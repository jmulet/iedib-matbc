!function(){"use strict";var t={707:function(t,e,r){var n=r(81),o=r.n(n),i=r(645),a=r.n(i)()(o());a.push([t.id,'[data-quizz-group]{padding:5px;border-left:3px solid lightblue}.ib-quizz-right{margin-left:8px;border-radius:50%;background-color:#438c43;color:white;width:23px;display:inline-block;height:23px;text-align:center}.ib-quizz-wrong{margin-left:8px;border-radius:50%;background-color:#a43c3c;color:white;width:23px;display:inline-block;height:23px;text-align:center}.ib-quizz-error{margin-left:8px;border-radius:50%;background-color:#72395a;color:white;width:23px;display:inline-block;height:23px;text-align:center}.ib-quizz-hint,.ib-quizz-feedback{margin-left:8px;border-radius:50%;background-color:#a3a3a3;color:black;width:23px;display:inline-block;height:23px;text-align:center;cursor:pointer}.ibquizz-me-btn-openeditor{background:whitesmoke;vertical-align:top}.ibquizz-me-btn-openeditor:hover{background:white}.ibquizz-me-btn-openeditor>i.fas{color:darkred}.ibquizz-square-root{background-position:50% 50%;background-size:20px 20px;background-repeat:no-repeat;background-image:url("https://piworld.es/iedib/mqwidgets2/pw-square-root.png");display:inline-block;width:16px;height:16px}.ibquizz-me-btn-toolbar{height:35px;overflow:hidden;font-weight:bold}.ibquizz-me-btn-toolbar>span{cursor:pointer;font-size:90%}.ibquizz-me-btn-toolbar:hover{background:white}ib-quizz-mathquill{display:none !important}ib-quizz-mathquill.ib-enable-future{display:inline-block !important}.ibquizz-editor-palette{padding:2px;background:whitesmoke}',""]),e.Z=a},645:function(t){t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r="",n=void 0!==e[5];return e[4]&&(r+="@supports (".concat(e[4],") {")),e[2]&&(r+="@media ".concat(e[2]," {")),n&&(r+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),r+=t(e),n&&(r+="}"),e[2]&&(r+="}"),e[4]&&(r+="}"),r})).join("")},e.i=function(t,r,n,o,i){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(n)for(var u=0;u<this.length;u++){var c=this[u][0];null!=c&&(a[c]=!0)}for(var s=0;s<t.length;s++){var l=[].concat(t[s]);n&&a[l[0]]||(void 0!==i&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=i),r&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=r):l[2]=r),o&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=o):l[4]="".concat(o)),e.push(l))}},e}},81:function(t){t.exports=function(t){return t[1]}},379:function(t){var e=[];function r(t){for(var r=-1,n=0;n<e.length;n++)if(e[n].identifier===t){r=n;break}return r}function n(t,n){for(var i={},a=[],u=0;u<t.length;u++){var c=t[u],s=n.base?c[0]+n.base:c[0],l=i[s]||0,f="".concat(s," ").concat(l);i[s]=l+1;var p=r(f),h={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)e[p].references++,e[p].updater(h);else{var d=o(h,n);n.byIndex=u,e.splice(u,0,{identifier:f,updater:d,references:1})}a.push(f)}return a}function o(t,e){var r=e.domAPI(e);r.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;r.update(t=e)}else r.remove()}}t.exports=function(t,o){var i=n(t=t||[],o=o||{});return function(t){t=t||[];for(var a=0;a<i.length;a++){var u=r(i[a]);e[u].references--}for(var c=n(t,o),s=0;s<i.length;s++){var l=r(i[s]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}i=c}}},569:function(t){var e={};t.exports=function(t,r){var n=function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}(t);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},216:function(t){t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:function(t,e,r){t.exports=function(t){var e=r.nc;e&&t.setAttribute("nonce",e)}},795:function(t){t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(r){!function(t,e,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var o=void 0!==r.layer;o&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,o&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var i=r.sourceMap;i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(n,t,e.options)}(e,t,r)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:function(t){t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={id:n,exports:{}};return t[n](i,i.exports,r),i.exports}r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,{a:e}),e},r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.nc=void 0,function(){function t(r,o,i){return t=e()?Reflect.construct.bind():function(t,e,r){var o=[null];o.push.apply(o,e);var i=new(Function.bind.apply(t,o));return r&&n(i,r.prototype),i},t.apply(null,arguments)}function e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function n(t,e){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},n(t,e)}function o(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function a(){return"g"+Math.random().toString(32).substring(2)}function u(t,e,r,n){n=n||0;var o=window;o[t]&&"function"==typeof o[t]?e&&e():n>15?r&&r():window.setTimeout((function(){u(t,e,r,n+1)}),50*(n+1))}function c(t,e){if(t&&"number"==typeof t)return t;if(!t||!(t+"").trim())return e;try{var r=parseInt(t+"");if(!isNaN(r))return r}catch(t){}return e}function s(t,e){var r=document.createElement(t);return Object.keys(e).forEach((function(t){var n=e[t];"class"===t?n.trim().split(/\s+/).forEach((function(t){r.classList.add(t)})):"style"===t?n.split(";").forEach((function(t){var e=t.split(":");2===e.length&&r.style.setProperty(e[0].trim(),e[1].trim())})):"html"===t?r.innerHTML=n:r.setAttribute(t,n)})),r}function l(t,e,r,n){if(!e||null==document.head.querySelector("script#"+e)){var o=document.createElement("script");o.type="text/javascript",o.src=t,e&&o.setAttribute("id",e),o.onload=function(){r&&r()},o.onerror=function(){console.error("Error loading ",t),n&&n()},document.head.append(o)}}function f(e,r){e=e||{};var n=Object.keys(e),i=[].concat(n,["expr","return eval(expr)"]),a=t(Function,o(i)),u=Object.values(e),c=[].concat(u,[r]);return a.apply(void 0,o(c))}function p(t){return t=t||"",JSON.parse(atob(t)||"{}")}function h(t){t.forEach((function(t){var e=window.IB;if(t.meta){var r=t.meta;if(e.sd[r.name]&&"function"==typeof e.sd[r.name].init)return console.error("Warning: component '".concat(r.name,"' loaded twice.")),void e.sd[r.name].init();!function n(){var o;e.sd[r.name]=e.sd[r.name]||{inst:{},_class:t,init:n,dispose:null};var i=null!==(o=r.query)&&void 0!==o?o:'div[role="snptd_'.concat(r.name,'"], div[data-snptd="').concat(r.name,'"]');if("body"===i){if(e.sd[r.name].singl)return void console.error("Singleton already defined");var a=document.querySelector("body"),u=new t(a);u.init(),e.sd[r.name].singl=u,"_init: Initialized singleton '".concat(r.name,"' instance.")}else{var c=function(t){return document.querySelectorAll(t)}(i),s=0;c.forEach((function(n){var o=n,i=o.getAttribute("id");if(i||(i="sd_"+Math.random().toString(32).substring(2),o.setAttribute("id",i)),"1"!==o.dataset.active){var a=new t(o);a.init(),null!=e.sd[r.name].inst&&(e.sd[r.name].inst[i]=a),s++}else console.warn("Warning: Element '".concat(r.name,"' ").concat(i," already processed."))})),"_init: Initialized ".concat(s," '").concat(r.name,"' instances.")}}();e.sd[r.name].dispose=function(){var t=0;window.IB&&window.IB.sd&&window.IB.sd[r.name]&&window.IB.sd[r.name].inst&&(Object.keys(window.IB.sd[r.name].inst).forEach((function(n){var o=window.IB.sd[r.name].inst[n];o&&(o.dispose(),t++,delete e.sd[r.name].inst[n])})),"_dispose: Destroyed ".concat(t," '").concat(r.name,"' instances."))}}else console.error("Missing meta in class ",t,". Annotate it with @Component")}))}var d=function(t){window.IB=window.IB||{sd:{}};var e,r=t;r.map((function(t){var e;return(null===(e=t.meta)||void 0===e?void 0:e.use$)||!1})).reduce((function(t,e){return e||t}))?(e=function(){var t;"function"==typeof(null===(t=window.IB)||void 0===t?void 0:t.on$Ready)&&window.IB.on$Ready(),h(r)},u("require",(function(){window.require(["jquery"],(function(t){var r=t;window.$||(window.$=r),window.jQuery||(window.jQuery=r),r(e)}),(function(){console.error("Error requiring $. Waiting for $"),u("jQuery",(function(){window.$||(window.$=jQuery),$(e)}),(function(){console.error("Cannot find $. Bootstrap anyway!"),e()}),35)}))}),(function(){console.error("Cannot find requirejs. Waiting for $"),u("jQuery",(function(){$(e)}),(function(){console.error("Cannot find $. Bootstrap anyway!"),e()}),35)}),10)):"complete"===document.readyState?h(r):window.addEventListener("DOMContentLoaded",(function(){return h(r)}))},y=r(379),v=r.n(y),m=r(795),g=r.n(m),b=r(569),w=r.n(b),x=r(565),O=r.n(x),E=r(216),S=r.n(E),j=r(589),_=r.n(j),k=r(707),L={};L.styleTagTransform=_(),L.setAttributes=O(),L.insert=w().bind(null,"head"),L.domAPI=g(),L.insertStyleElement=S();v()(k.Z,L),k.Z&&k.Z.locals&&k.Z.locals;function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function C(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==P(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===P(i)?i:String(i)),n)}var o,i}function T(t,e,r){return e&&C(t.prototype,e),r&&C(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var A=T((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.parent=e}));function q(t){return function(t){if(Array.isArray(t))return z(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return z(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var N={name:"",author:"",version:"1.0",use$:!1};function R(t){return function(e){var r=e.prototype.connectedCallback,n=t.elementName,o=t.classes,i=t.styles;e.prototype.connectedCallback=function(){var t;o&&(t=this.classList).add.apply(t,q(o));i&&Object.assign(this.style,i),r&&r.apply(this)},customElements.define(n,e)}}var I,M={ca:{check:"Comprova",chooseone:"Tria una opció",right:"Ben fet!",wrong:"Ho sento. Intentau-ho de nou",error:"Hi ha hagut un error processant la resposta",random_msg:"Aquestes activitats contenen preguntes aleatòries que es generen cada vegada que es carrega la pàgina.",open_editor:"Obrir l'editor matemàtic",math_editor:"Editor matemàtic",sym_notallowed:"El símbol no està permès",sym_once:"El símbol només es pot emprar una vegada",error_cantprocess:"Error quan es processava la petició",right_answer:"La resposta és correcta",wrong_answer:"La resposta és incorrecta",error_verifying:"Error quan es verificava la resposta",expected_ans:"S'esperava la resposta"},es:{check:"Comprueba",chooseone:"Elige una opción",right:"¡Bien hecho!",wrong:"Lo siento. Inténtalo de nuevo.",error:"Ha habido un error procesando la respuesta",random_msg:"Estas actividades contienen preguntas aleatorias que se generan cada vez que se carga la página.",open_editor:"Abrir el editor matemático",math_editor:"Editor matemático",sym_notallowed:"El símbolo no esta permitido",sym_once:"El símbolo solo se permite una vez",error_cantprocess:"Error cuando se procesaba la petición",right_answer:"Respuesta correcta",wrong_answer:"Respuesta incorrecta",error_verifying:"Error cuando se verificaba la respuesta",expected_ans:"Se esperaba la respuesta"},en:{check:"Check",chooseone:"Choose one",right:"Well done!",wrong:"Try it again.",error:"There has been an error processing the answer",random_msg:"These activities contain random questions that are generated at every page load.",open_editor:"Open math editor",math_editor:"Math editor",sym_notallowed:"The symbol is not allowed",sym_once:"The symbol can only be used once",error_cantprocess:"Error processing the request",right_answer:"Right answer",wrong_answer:"Wrong answer",error_verifying:"Error verifying the answer",expected_ans:"The expected answer is"},fr:{check:"Vérifier",chooseone:"Choisis une option",right:"¡Bien hecho!",wrong:"Lo siento. Inténtalo de nuevo.",error:"Ha habido un error procesando la respuesta",random_msg:"Estas actividades contienen preguntas aleatorias que se generan cada vez que se carga la página.",open_editor:"Open math editor",math_editor:"Math editor",sym_notallowed:"The symbol is not allowed",sym_once:"The symbol can only be used once",error_cantprocess:"Error processing the request",right_answer:"Right answer",wrong_answer:"Wrong answer",error_verifying:"Error verifying the answer",expected_ans:"The expected answer is"},de:{check:"Prüfen",chooseone:"Wähle eine option",right:"¡Bien hecho!",wrong:"Lo siento. Inténtalo de nuevo.",error:"Ha habido un error procesando la respuesta",random_msg:"Estas actividades contienen preguntas aleatorias que se generan cada vez que se carga la página.",open_editor:"Open math editor",math_editor:"Math editor",sym_notallowed:"The symbol is not allowed",sym_once:"The symbol can only be used once",error_cantprocess:"Error processing the request",right_answer:"Right answer",wrong_answer:"Wrong answer",error_verifying:"Error verifying the answer",expected_ans:"The expected answer is"}};function G(t,e,r){var n=M[t];n||(n=M.ca);var o=n[e]||e;return r&&(o+=" "+r),o}function D(t){for(var e=t.length-1;e>0;e--){var r=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[r],t[r]=n}}function F(t,e){for(var r=Math.min(t.length,e.length),n=[],o=0;o<r;o++)n.push([t[o],e[o]]);return n}function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function H(t){return function(t){if(Array.isArray(t))return U(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return U(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function V(t){var e=[];return t.split(".").forEach((function(t){var r=t.split("["),n=r[0].trim();n.length&&(e.push(n),r.length>1&&e.push("["+r[1].trim()))})),e}function Q(t,e){if(0===t.length)return null;if(1===t.length)return e;for(var r=e,n=0,o=t.length-1;null!=r&&n<o;){var i=t[n];if(i.indexOf("[")>=0){var a=parseInt(i.replace(/[[\]]/g,""));if(Array.isArray(r)){var u=r;a<u.length?r=u[a]:(console.error("Index out of bounds ",t.join(""),a,u),r=null)}else console.error("Not an array",t.join(""),r),r=null}else{var c=r;r=null!=c[i]?c[i]:null}n++}return r}function W(t,e,r){var n=Q(t,e),o=!1;if(null!=n){var i=t[t.length-1];if(i.indexOf("[")>=0){if(Array.isArray(n)){var a=n,u=parseInt(i.replace(/[[\]]/g,""));u<a.length&&(a[u]=r,o=!0)}}else if("object"===B(n))n[i]=r,o=!0}return o}function J(t){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J(t)}function Y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Z(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==J(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==J(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===J(i)?i:String(i)),n)}var o,i}!function(t){t[t.CLOSE=0]="CLOSE",t[t.CANCEL_ACCEPT=1]="CANCEL_ACCEPT",t[t.CANCEL_ACCEPT_FORM=2]="CANCEL_ACCEPT_FORM",t[t.CANCEL_ACCEPT_FORM_VALIDATION=3]="CANCEL_ACCEPT_FORM_VALIDATION"}(I||(I={}));var X=function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Diàleg";Y(this,t),this.type=r;var o=r===I.CANCEL_ACCEPT_FORM||r===I.CANCEL_ACCEPT_FORM_VALIDATION;this.hasValidation=r===I.CANCEL_ACCEPT_FORM_VALIDATION;var i="",a="";o&&(i="<form".concat(this.hasValidation?' class="needs-validation" novalidate':"",">"),a="</form>");var u='<button type="button" class="btn btn-sm btn-secondary" data-dismiss="modal">'.concat(r===I.CLOSE?"Tancar":"Cancel·lar","</button>");r!==I.CLOSE&&(u+='<button type="'.concat(o?"submit":"button",'" class="btn btn-sm btn-primary">Acceptar</button>')),this.elem=$('\n            <div class="modal fade moodle-dialogue" id="'.concat(e,'" tabindex="-1" aria-labelledby="bsdialog" aria-hidden="true">\n            <div class="modal-dialog">\n                <div class="modal-content">\n                  <div class="modal-header">\n                    <h5 class="modal-title">').concat(n,'</h5>\n                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                      <span aria-hidden="true">&times;</span>\n                    </button>\n                  </div>\n                  ').concat(i,'\n                  <div class="modal-body" style="max-height:400px;overflow-y:auto;font-size:90%;">\n                  </div>\n                  <div class="modal-footer">\n                    ').concat(u,"\n                  </div>\n                  ").concat(a,"\n                </div>\n                </div>")),this.body=this.elem.find("div.modal-body"),this.header=this.elem.find("h5.modal-title"),this.primaryButton=this.elem.find("button.btn.btn-primary"),this.form=this.elem.find("form"),this.validationDiv=this.elem.find("div.alert.alert-danger"),$("body").append(this.elem)}var e,r,n;return e=t,(r=[{key:"resetDialog",value:function(){var t;this.body.html(""),null===(t=this.primaryButton)||void 0===t||t.off(),this.form&&this.form.off(),this.validationDiv.css("display","none"),this.validationDiv.html("")}},{key:"setBody",value:function(t){var e=this;this.resetDialog();var r=$(t);this.validationDiv=$('<div class="alert alert-danger" style="display:none;max-height:100px;overflow-y:auto;"></div>'),this.body.append(this.validationDiv),this.body.append(r),this.primaryButton&&(this.form?this.form.on("submit",(function(t){if(t.preventDefault(),t.stopPropagation(),e.hasValidation){e.form.addClass("was-validated"),e.updateValues();var r=e.customValidation();if(r&&null!=e.validationDiv)return e.validationDiv.css("display",""),e.validationDiv.html(r),void(e.validationDiv.offset()&&e.body.animate({scrollTop:0}));e.form[0].checkValidity()&&(e.elem.modal("hide"),e.acceptCb&&e.acceptCb(e.scope))}else e.updateValues(),e.acceptCb&&e.acceptCb(e.scope)})):this.primaryButton.on("click",(function(t){t.preventDefault(),e.acceptCb&&e.acceptCb(),e.elem.modal("hide")})))}},{key:"setValues",value:function(t){this.scope=t,this.body.find("input[id], textarea[id], select[id]").each((function(e,r){var n=(r.getAttribute("id")||"").split("_");if(!(n.length<2)){var o=function(t,e){var r=Q([].concat(H(t),[""]),e);return null!=r?["string","boolean","number"].includes(B(r))?r+"":JSON.stringify(r):null}(V(n[n.length-1]),t);if("TEXTAREA"===r.nodeName)r.value=o||"";else{var i=r,a=(i.getAttribute("type")||"").toLowerCase();"radio"===a||"checkbox"===a?i.checked="true"===o:i.value=o||""}}}))}},{key:"updateValues",value:function(){var t=this;null!=this.scope&&this.body.find("input[id], textarea[id], select[id]").each((function(e,r){var n=(r.getAttribute("id")||"").split("_");if(!(n.length<2)){var o=V(n[n.length-1]);if("TEXTAREA"===r.nodeName){var i=r.value||"";W(o,t.scope||{},i)}else{var a=r,u=(a.getAttribute("type")||"").toLowerCase(),c="radio"===u||"checkbox"===u;W(o,t.scope||{},c?a.checked:a.value)}}}))}},{key:"setBodyBindings",value:function(t,e){var r=s("div",{style:"width:100%;padding:10px",html:t});this.setBody(r),this.setValues(e)}},{key:"customValidation",value:function(){return null}},{key:"setTitle",value:function(t){this.header.html(t)}},{key:"show",value:function(t){var e=this;this.form.removeClass("was-validated"),this.elem.modal("show"),window.setTimeout((function(){return e.body.scrollTop(0)}),400),this.acceptCb=t}}])&&Z(e.prototype,r),n&&Z(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function K(t){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K(t)}function tt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==K(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==K(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===K(i)?i:String(i)),n)}var o,i}function et(t,e){return et=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},et(t,e)}function rt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=ot(t);if(e){var o=ot(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return nt(this,r)}}function nt(t,e){if(e&&("object"===K(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function ot(t){return ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ot(t)}var it,at=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&et(t,e)}(i,t);var e,r,n,o=rt(i);function i(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,t,I.CLOSE,"")}return e=i,r&&tt(e.prototype,r),n&&tt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(X),ut={};function ct(t,e){var r=ut[t];return r||(r=new at(t),ut[t]=r),r.setTitle(e),r}function st(t){return st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},st(t)}function lt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pt(n.key),n)}}function ft(t,e,r){return(e=pt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pt(t){var e=function(t,e){if("object"!==st(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==st(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===st(e)?e:String(e)}!function(t){t[t.UNTOUCHED=0]="UNTOUCHED",t[t.PENDING=1]="PENDING",t[t.ERROR=2]="ERROR",t[t.WRONG=3]="WRONG",t[t.RIGHT=4]="RIGHT"}(it||(it={}));var ht=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ft(this,"status",it.UNTOUCHED),ft(this,"lang","ca"),this.spanStatus=document.createElement("span"),this.spanStatus.setAttribute("data-toggle","tooltip"),this.spanHint=s("span",{dataToggle:"tooltip",class:"ib-quizz-hint",title:"Mostrar pista",style:"display:none;",html:'<i class="'.concat("fa fas fa-life-ring",'"></i>')}),this.feedbackSpan=s("span",{class:"ib-quizz-feedback",dataToggle:"tooltip",title:"Mostrar solució",style:"display:none;",html:'<i class="'.concat("fa fas fa-question",'"></i>')}),this.divBlock=s("div",{style:"display:inline-block;"}),this.divBlock.append(this.spanStatus),this.divBlock.append(this.spanHint),this.divBlock.append(this.feedbackSpan)}var e,r,n;return e=t,(r=[{key:"setStatus",value:function(t,e){this.status=t;var r=this.spanStatus.classList,n=e;switch(t){case it.UNTOUCHED:case it.PENDING:r.remove("ib-quizz-right","ib-quizz-wrong","ib-quizz-error"),this.spanStatus.innerHTML="";break;case it.RIGHT:r.add("ib-quizz-right"),n||(n=G(this.lang,"right")),this.spanStatus.innerHTML='<i class="'.concat("fa fas fa-check",'"></i>');break;case it.WRONG:r.add("ib-quizz-wrong"),n||(n=G(this.lang,"wrong")),this.spanStatus.innerHTML='<i class="'.concat("fa fas fa-times",'"></i>');break;default:r.add("ib-quizz-error"),n||(n=G(this.lang,"error")),this.spanStatus.innerHTML='<i class="'.concat("fa fas fa-exclamation",'"></i>')}n&&this.spanStatus.setAttribute("title",n)}},{key:"getStatus",value:function(){return this.status}},{key:"setLang",value:function(t){this.lang=t}},{key:"setHint",value:function(t){this.spanHint.addEventListener("click",(function(){var e=ct("ib-quizz-modal-dlg","Una pista..."),r=s("div",{html:t});e.setBody(r),e.show()})),this.spanHint.style.setProperty("display","")}},{key:"setFeedback",value:function(t){this.feedbackSpan.addEventListener("click",(function(){var e=ct("ib-quizz-modal-dlg","Retroacció"),r=s("div",{html:t});e.setBody(r),e.show()})),this.spanHint.style.setProperty("display","none"),this.feedbackSpan.style.setProperty("display","")}},{key:"getElement",value:function(){return this.divBlock}}])&&lt(e.prototype,r),n&&lt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function dt(t,e,r){return dt=yt()?Reflect.construct.bind():function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&vt(o,r.prototype),o},dt.apply(null,arguments)}function yt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function vt(t,e){return vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},vt(t,e)}var mt={};function gt(t,e,r){return window.nerdamer&&!mt.N&&(Object.defineProperty(mt,"N",{value:window.nerdamer,enumerable:!0,configurable:!1,writable:!1}),Object.getOwnPropertyNames(window.nerdamer).forEach((function(t){void 0===mt[t]&&(mt[t]=window.nerdamer[t])}))),window.mathjs&&!mt.M&&Object.defineProperty(mt,"M",{value:window.mathjs,enumerable:!0,configurable:!1,writable:!1}),e=Object.assign(e||{},mt),function(t,e,r){e=e||{},r=r||{};var n=Object.keys(e),o=Object.values(e);return dt(Function,n.concat(['"use strict"\n'+t])).apply(r,o)}("var _this=this;\n"+t.replace(/#/g,"_this."),e,r)}function bt(t){return t?t.replace(/V\[(\d+)\]/g,(function(t,e){var r=parseInt(e);return"\\left("+new Array(r).fill("\\MathQuillMathField{}").join(",")+"\\right)"})).replace(/M\[(\d+)x(\d+)\]/g,(function(t,e,r){var n=parseInt(e),o=parseInt(r),i=new Array(n).fill("\\MathQuillMathField{}").join(" & ");return"\\begin{pmatrix}"+new Array(o).fill(i).join(" \\\\ ")+"\\end{pmatrix}"})).replace(/\?/g,"\\MathQuillMathField{}"):t}Object.getOwnPropertyNames(Math).forEach((function(t){mt[t]=Math[t]})),Object.defineProperty(mt,"alea",{value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e.length;if(0===n)return Math.random()<.5?-1:1;if(1===n){if(Array.isArray(e[0])){var o=Math.floor(Math.random()*e[0].length);return e[0][o]}if("number"==typeof e[0])return Math.floor(2*e[0]*Math.random())+e[0]}else if(n>=2){var i=e[0],a=e[1],u=1,c=0,s=(a-i)*Math.random();return 3===n&&(c=(c=Math.abs(e[2]))>8?8:c,u=Math.pow(10,c)),s=+(Math.round(s*u)/u+i).toFixed(c)}},enumerable:!0,configurable:!1,writable:!1}),Object.defineProperty(mt,"dec",{value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=Math.pow(10,e);return Math.round(t*r)/r},enumerable:!0,configurable:!1,writable:!1});function wt(t,e){if(!e)return t;var r=t.replace(/#([a-zA-Z0-9_]+)($|[ .,"'])/gm,(function(t,r,n){return null!=e[r]?("function"==typeof(o=e[r]).toTeX?o.toTeX().replace(/vmatrix/g,"matrix"):"function"==typeof o.toString?o.toString():o+"")+(n||""):t;var o}));return r=r.replace(/\${2}(.*)?\${2}/gm,(function(t,e){return"\\["+e+"\\]"})).replace(/\$(.*)?\$/gm,(function(t,e){return"\\("+e+"\\)"}))}function xt(t){return xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xt(t)}function Ot(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Et(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,At(n.key),n)}}function St(t,e){if(e&&("object"===xt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return jt(t)}function jt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _t(t){var e="function"==typeof Map?new Map:void 0;return _t=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return kt(t,arguments,Ct(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Pt(n,t)},_t(t)}function kt(t,e,r){return kt=Lt()?Reflect.construct.bind():function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&Pt(o,r.prototype),o},kt.apply(null,arguments)}function Lt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Pt(t,e){return Pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Pt(t,e)}function Ct(t){return Ct=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ct(t)}function Tt(t,e,r){return(e=At(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function At(t){var e=function(t,e){if("object"!==xt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==xt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===xt(e)?e:String(e)}var qt,zt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pt(t,e)}(u,t);var e,r,n,o,i,a=(e=u,r=Lt(),function(){var t,n=Ct(e);if(r){var o=Ct(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return St(this,t)});function u(){var t;Ot(this,u);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return Tt(jt(t=a.call.apply(a,[this].concat(r))),"lang","ca"),Tt(jt(t),"_syncCount",0),Tt(jt(t),"attempts",0),Tt(jt(t),"hintSet",!1),Tt(jt(t),"feedbackSet",!1),t}return n=u,(o=[{key:"init",value:function(t){if(t){var e=document.createElement("span");e.innerHTML=t,this.prepend(e)}}},{key:"connectedCallback",value:function(){this.innerHTML="",this.classList.add("d-print-none"),this.statusDisplay=new ht;try{this.widgetConfig=p(this.dataset.src)}catch(t){return void console.error(t)}this.widgetConfig,this._syncCount++,3===this._syncCount&&this.render()}},{key:"reflowLatex",value:function(){window.MathJax&&(window.MathJax.typesetPromise&&window.MathJax.typesetPromise(),window.MathJax.Hub&&window.MathJax.Hub.Queue&&window.MathJax.Hub.Queue(["Typeset",window.MathJax.Hub]))}},{key:"setLang",value:function(t){var e;this.lang=t,null===(e=this.statusDisplay)||void 0===e||e.setLang(t),this._syncCount++,3===this._syncCount&&this.render()}},{key:"setGroupContext",value:function(t){var e,r,n,o;this.groupContext=t,this.groupContext,this._syncCount++,Object.keys(t._s).length&&(null!==(e=this.widgetConfig)&&void 0!==e&&e.hint&&(this.widgetConfig.hint=wt(this.widgetConfig.hint,t._s)),null!==(r=this.widgetConfig)&&void 0!==r&&r.fbk&&(this.widgetConfig.fbk=wt(this.widgetConfig.fbk,t._s)),null!==(n=this.widgetConfig)&&void 0!==n&&n.ini&&(this.widgetConfig.ini=wt(this.widgetConfig.ini,t._s)),null!==(o=this.widgetConfig)&&void 0!==o&&o.pre&&(this.widgetConfig.pre=wt(this.widgetConfig.pre,t._s))),3===this._syncCount&&this.render()}},{key:"setStatus",value:function(t,e){var r;null===(r=this.statusDisplay)||void 0===r||r.setStatus(t,e)}},{key:"incAttempts",value:function(){var t,e,r,n;this.attempts++;var o,i,a,u,c=(null===(t=this.groupContext)||void 0===t?void 0:t.o.hint)||0,s=(null===(e=this.groupContext)||void 0===e?void 0:e.o.ans)||0;!this.hintSet&&c>0&&this.attempts>=c&&null!==(r=this.widgetConfig)&&void 0!==r&&r.hint&&(this.hintSet=!0,null===(o=this.statusDisplay)||void 0===o||o.setHint(null===(i=this.widgetConfig)||void 0===i?void 0:i.hint)),!this.feedbackSet&&s>0&&this.attempts>=s&&null!==(n=this.widgetConfig)&&void 0!==n&&n.fbk&&(this.feedbackSet=!0,null===(a=this.statusDisplay)||void 0===a||a.setFeedback(null===(u=this.widgetConfig)||void 0===u?void 0:u.fbk))}},{key:"showFeedback",value:function(){var t,e,r;!this.feedbackSet&&null!==(t=this.widgetConfig)&&void 0!==t&&t.fbk&&(this.feedbackSet=!0,null===(e=this.statusDisplay)||void 0===e||e.setFeedback(null===(r=this.widgetConfig)||void 0===r?void 0:r.fbk))}}])&&Et(n.prototype,o),i&&Et(n,i),Object.defineProperty(n,"prototype",{writable:!1}),u}(_t(HTMLElement));function Nt(t){return Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nt(t)}function Rt(){Rt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),u=new j(o||[]);return n(a,"_invoke",{value:x(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function p(){}function h(){}function d(){}var y={};c(y,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(_([])));m&&m!==e&&r.call(m,i)&&(y=m);var g=d.prototype=p.prototype=Object.create(y);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,u){var c=l(t[n],t,i);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==Nt(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return o("throw",t,a,u)}))}u(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return k()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=O(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function O(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function _(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return h.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=c(d,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),c(g,u,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=_,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function It(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function Mt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Wt(n.key),n)}}function Dt(){return Dt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=Ft(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Dt.apply(this,arguments)}function Ft(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Vt(t)););return t}function Bt(t,e){return Bt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Bt(t,e)}function Ht(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Vt(t);if(e){var o=Vt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ut(this,r)}}function Ut(t,e){if(e&&("object"===Nt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return $t(t)}function $t(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vt(t){return Vt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Vt(t)}function Qt(t,e,r){return(e=Wt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Wt(t){var e=function(t,e){if("object"!==Nt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Nt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Nt(e)?e:String(e)}var Jt;R({elementName:"ib-quizz-dropdown",classes:["ib-quizz-elem"],styles:{display:"inline-block"}})(qt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bt(t,e)}(u,t);var e,r,n,o,i,a=Ht(u);function u(){var t;Mt(this,u);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return Qt($t(t=a.call.apply(a,[this].concat(r))),"userAns",-1),t}return e=u,r=[{key:"enable",value:function(t){this.button&&(this.button.disabled=!t)}},{key:"getUserInput",value:function(){return this.userAns+""}},{key:"displayRightAnswer",value:function(){this.enable(!1)}},{key:"check",value:(o=Rt().mark((function t(){var e,r,n,o;return Rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((null===(e=this.statusDisplay)||void 0===e?void 0:e.getStatus())!==it.RIGHT){t.next=4;break}return t.abrupt("return",!0);case 4:if((null===(r=this.statusDisplay)||void 0===r?void 0:r.getStatus())===it.PENDING){t.next=6;break}return t.abrupt("return",!1);case 6:return o=(null===(n=this.widgetConfig)||void 0===n?void 0:n.ans)===this.userAns+"",this.setStatus(o?it.RIGHT:it.WRONG),this.enable(!o),o?this.showFeedback():this.incAttempts(),t.abrupt("return",o);case 11:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(r,n){var i=o.apply(t,e);function a(t){It(i,r,n,a,u,"next",t)}function u(t){It(i,r,n,a,u,"throw",t)}a(void 0)}))},function(){return i.apply(this,arguments)})},{key:"setLang",value:function(t){Dt(Vt(u.prototype),"setLang",this).call(this,t),this.button&&(this.button.innerHTML=G(t,"chooseone"))}},{key:"render",value:function(){var t,e,r,n,o=this;if(this.widgetConfig){var i=((null===(t=this.widgetConfig)||void 0===t?void 0:t.vars)||[]).filter((function(t){return(t+"").trim().length>0}));if(null!==(e=this.groupContext)&&void 0!==e&&e.s.length&&i.forEach((function(t,e){var r;t.indexOf("#")<0||(i[e]=wt(t,null===(r=o.groupContext)||void 0===r?void 0:r._s))})),this.dropdown=s("div",{class:"dropdown",style:"display:inline-block;"}),this.widgetConfig,this.widgetConfig){this.button=s("button",{class:"btn btn-outline-primary dropdown-toggle",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",html:G(this.lang,"chooseone")}),this.options=s("div",{class:"dropdown-menu","aria-labelledby":"dropdownMenuButton"});for(var a=i.length||0,c=new Array(a),l=0;l<a;l++)c[l]=l;null!==(r=this.widgetConfig)&&void 0!==r&&null!==(n=r.opts)&&void 0!==n&&n.shuffle&&D(c),c.forEach((function(t){var e,r=i[t],n=s("a",{class:"dropdown-item",href:"#","data-index":t+"",html:r});n.addEventListener("click",(function(e){o.userAns=t,e.preventDefault(),o.button&&(o.button.innerHTML=r),r.indexOf("\\(")>=0&&o.reflowLatex(),o.setStatus(it.PENDING)})),null===(e=o.options)||void 0===e||e.append(n)})),this.dropdown.append(this.button),this.dropdown.append(this.options),Dt(Vt(u.prototype),"init",this).call(this,this.widgetConfig.pre),this.append(this.dropdown),this.statusDisplay&&this.append(this.statusDisplay.getElement()),this.reflowLatex()}}else console.error("The widgetConfig is not set")}}],r&&Gt(e.prototype,r),n&&Gt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(zt));function Yt(t){return Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yt(t)}function Zt(){Zt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),u=new j(o||[]);return n(a,"_invoke",{value:x(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function p(){}function h(){}function d(){}var y={};c(y,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(_([])));m&&m!==e&&r.call(m,i)&&(y=m);var g=d.prototype=p.prototype=Object.create(y);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,u){var c=l(t[n],t,i);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==Yt(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return o("throw",t,a,u)}))}u(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return k()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=O(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function O(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function _(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return h.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=c(d,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),c(g,u,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=_,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Xt(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function Kt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function te(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,se(n.key),n)}}function ee(){return ee="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=re(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},ee.apply(this,arguments)}function re(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ue(t)););return t}function ne(t,e){return ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ne(t,e)}function oe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=ue(t);if(e){var o=ue(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return ie(this,r)}}function ie(t,e){if(e&&("object"===Yt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ae(t)}function ae(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ue(t){return ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ue(t)}function ce(t,e,r){return(e=se(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function se(t){var e=function(t,e){if("object"!==Yt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Yt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Yt(e)?e:String(e)}function le(t){return function(t){if(Array.isArray(t))return fe(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return fe(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fe(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var pe;R({elementName:"ib-quizz-mchoice",classes:["iedib-quizz-widget"],styles:{display:"flex","align-items":"center"}})(Jt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ne(t,e)}(c,t);var e,r,n,o,i,u=oe(c);function c(){var t;Kt(this,c);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return ce(ae(t=u.call.apply(u,[this].concat(r))),"radios",[]),ce(ae(t),"userAnsSet",new Set),t}return e=c,r=[{key:"enable",value:function(t){var e;null===(e=this.radios)||void 0===e||e.forEach((function(e){var r,n;t?(e.disabled=!1,null===(r=e.parentElement)||void 0===r||r.classList.remove("disabled")):(e.disabled=!0,null===(n=e.parentElement)||void 0===n||n.classList.add("disabled"))}))}},{key:"getUserInput",value:function(){return le(this.userAnsSet).join(",")}},{key:"displayRightAnswer",value:function(){this.enable(!1)}},{key:"check",value:(o=Zt().mark((function t(){var e,r,n,o,i,a;return Zt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((null===(e=this.statusDisplay)||void 0===e?void 0:e.getStatus())!==it.RIGHT){t.next=4;break}return t.abrupt("return",!0);case 4:if((null===(r=this.statusDisplay)||void 0===r?void 0:r.getStatus())===it.PENDING){t.next=6;break}return t.abrupt("return",!1);case 6:return o=((null===(n=this.widgetConfig)||void 0===n?void 0:n.ans)||"").split(",").map((function(t){return t.trim()})),i=new Set(o),u=this.userAnsSet,c=i,s=void 0,s=new Set([].concat(le(u),le(c))),a=s.size==u.size&&s.size==c.size,this.setStatus(a?it.RIGHT:it.WRONG),this.enable(!a),a?this.showFeedback():this.incAttempts(),t.abrupt("return",a);case 13:case"end":return t.stop()}var u,c,s}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(r,n){var i=o.apply(t,e);function a(t){Xt(i,r,n,a,u,"next",t)}function u(t){Xt(i,r,n,a,u,"throw",t)}a(void 0)}))},function(){return i.apply(this,arguments)})},{key:"render",value:function(){var t,e,r,n,o,i=this;if(this.groupContext,this.widgetConfig,this.widgetConfig){var u=((null===(t=this.widgetConfig)||void 0===t?void 0:t.vars)||[]).filter((function(t){return(t+"").trim().length>0}));null!==(e=this.groupContext)&&void 0!==e&&e.s.length&&u.forEach((function(t,e){var r;t.indexOf("#")<0||(u[e]=wt(t,null===(r=i.groupContext)||void 0===r?void 0:r._s))})),this.form=document.createElement("form"),this.form.style.setProperty("display","inline-block");for(var l=(null===(r=this.widgetConfig)||void 0===r?void 0:r.ans.indexOf(","))>0,f=u.length||0,p=new Array(f),h=0;h<f;h++)p[h]=h;null!==(n=this.widgetConfig)&&void 0!==n&&null!==(o=n.opts)&&void 0!==o&&o.shuffle&&D(p);var d=a();p.forEach((function(t){var e,r=u[t],n=s("div",{class:"form-check"});null===(e=i.form)||void 0===e||e.append(n);var o=s("input",{class:"form-check-input",type:l?"checkbox":"radio",name:d,id:d+"_"+t}),a=s("label",{class:"form-check-label",for:d+"_"+t,html:r});n.appendChild(o),n.appendChild(a),i.radios.push(o),o.addEventListener("click",(function(e){l?o.checked?i.userAnsSet.add(t+""):i.userAnsSet.delete(t+""):i.userAnsSet=new Set([t+""]),i.setStatus(it.PENDING)}))})),ee(ue(c.prototype),"init",this).call(this,this.widgetConfig.pre),this.append(this.form),this.statusDisplay&&this.append(this.statusDisplay.getElement()),this.reflowLatex()}}}],r&&te(e.prototype,r),n&&te(e,n),Object.defineProperty(e,"prototype",{writable:!1}),c}(zt));function he(t){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},he(t)}function de(){de=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),u=new j(o||[]);return n(a,"_invoke",{value:x(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function p(){}function h(){}function d(){}var y={};c(y,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(_([])));m&&m!==e&&r.call(m,i)&&(y=m);var g=d.prototype=p.prototype=Object.create(y);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,u){var c=l(t[n],t,i);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==he(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return o("throw",t,a,u)}))}u(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return k()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=O(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function O(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function _(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return h.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=c(d,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),c(g,u,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=_,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function ye(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function ve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function me(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_e(n.key),n)}}function ge(){return ge="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=be(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},ge.apply(this,arguments)}function be(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Se(t)););return t}function we(t,e){return we=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},we(t,e)}function xe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Se(t);if(e){var o=Se(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Oe(this,r)}}function Oe(t,e){if(e&&("object"===he(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ee(t)}function Ee(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Se(t){return Se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Se(t)}function je(t,e,r){return(e=_e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _e(t){var e=function(t,e){if("object"!==he(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==he(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===he(e)?e:String(e)}var ke;R({elementName:"ib-quizz-numeric",classes:["iedib-quizz-widget"],styles:{display:"inline-block"}})(pe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&we(t,e)}(u,t);var e,r,n,o,i,a=xe(u);function u(){var t;ve(this,u);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return je(Ee(t=a.call.apply(a,[this].concat(r))),"userAns",-1),t}return e=u,r=[{key:"enable",value:function(t){this.input&&(this.input.disabled=!t)}},{key:"getUserInput",value:function(){var t;return(null===(t=this.input)||void 0===t?void 0:t.value)||""}},{key:"displayRightAnswer",value:function(){var t;this.input&&(this.input.value=(null===(t=this.widgetConfig)||void 0===t?void 0:t.ans)||"",this.enable(!1))}},{key:"check",value:(o=de().mark((function t(){var e,r,n,o,i,a,u,c,s,l,f,p,h;return de().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((null===(e=this.statusDisplay)||void 0===e?void 0:e.getStatus())!==it.RIGHT){t.next=4;break}return t.abrupt("return",!0);case 4:if((null===(r=this.statusDisplay)||void 0===r?void 0:r.getStatus())===it.PENDING){t.next=6;break}return t.abrupt("return",!1);case 6:if(n=!1,t.prev=7,i=parseFloat(this.getUserInput()),a=parseFloat((null===(o=this.widgetConfig)||void 0===o?void 0:o.ans)||"0"),isNaN(i)||isNaN(a)){t.next=23;break}f=(null===(u=this.widgetConfig)||void 0===u||null===(c=u.opts)||void 0===c?void 0:c.err)||0,"%"===(p=(null===(s=this.widgetConfig)||void 0===s||null===(l=s.opts)||void 0===l?void 0:l.errunit)||"absolute")&&(f*=.01),0===a&&(p="absolute"),t.t0=p,t.next="absolute"===t.t0?18:20;break;case 18:return n=Math.abs(i-a)<=f,t.abrupt("break",21);case 20:n=Math.abs(i/a-1)<=f;case 21:t.next=26;break;case 23:return console.error("ERROR",this.getUserInput(),null===(h=this.widgetConfig)||void 0===h?void 0:h.ans),this.setStatus(it.ERROR),t.abrupt("return",!1);case 26:t.next=33;break;case 28:return t.prev=28,t.t1=t.catch(7),console.error(t.t1),this.setStatus(it.ERROR),t.abrupt("return",!1);case 33:return this.setStatus(n?it.RIGHT:it.WRONG),this.getUserInput(),this.enable(!n),n?this.showFeedback():this.incAttempts(),t.abrupt("return",n);case 38:case"end":return t.stop()}}),t,this,[[7,28]])})),i=function(){var t=this,e=arguments;return new Promise((function(r,n){var i=o.apply(t,e);function a(t){ye(i,r,n,a,u,"next",t)}function u(t){ye(i,r,n,a,u,"throw",t)}a(void 0)}))},function(){return i.apply(this,arguments)})},{key:"render",value:function(){var t,e=this;if(this.widgetConfig){if(null!==(t=this.groupContext)&&void 0!==t&&t.s.length&&this.widgetConfig){var r=this.widgetConfig.ans||"";r.indexOf("#")>=0&&(r=r.replace(/#/g,""),this.widgetConfig.ans=""+f(this.groupContext._s||{},r))}this.input=s("input",{class:"form-control",type:"number",style:"display:inline-block;width:100px;"}),this.input.addEventListener("change",(function(t){e.setStatus(it.PENDING)})),ge(Se(u.prototype),"init",this).call(this,this.widgetConfig.pre),this.append(this.input),this.statusDisplay&&this.append(this.statusDisplay.getElement()),this.reflowLatex()}}}],r&&me(e.prototype,r),n&&me(e,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(zt));function Le(t){return Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Le(t)}function Pe(){Pe=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),u=new j(o||[]);return n(a,"_invoke",{value:x(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function p(){}function h(){}function d(){}var y={};c(y,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(_([])));m&&m!==e&&r.call(m,i)&&(y=m);var g=d.prototype=p.prototype=Object.create(y);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,u){var c=l(t[n],t,i);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==Le(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return o("throw",t,a,u)}))}u(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return k()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=O(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function O(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function _(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return h.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=c(d,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),c(g,u,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=_,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Ce(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function Te(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ae(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==Le(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Le(i)?i:String(i)),n)}var o,i}function qe(){return qe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=ze(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},qe.apply(this,arguments)}function ze(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Me(t)););return t}function Ne(t,e){return Ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ne(t,e)}function Re(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Me(t);if(e){var o=Me(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ie(this,r)}}function Ie(t,e){if(e&&("object"===Le(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Me(t){return Me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Me(t)}R({elementName:"ib-quizz-cloze",classes:["iedib-quizz-widget"],styles:{display:"inline-block"}})(ke=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ne(t,e)}(u,t);var e,r,n,o,i,a=Re(u);function u(){return Te(this,u),a.apply(this,arguments)}return e=u,r=[{key:"enable",value:function(t){for(var e,r=(null===(e=this.mathInput)||void 0===e?void 0:e.innerFields)||[],n=0,o=r.length;n<o;n++)r[n].__controller.editable=t}},{key:"getUserInput",value:function(){return JSON.stringify(this.getUserInputArray())}},{key:"getUserInputArray",value:function(){var t,e,r=[];null===(t=this.mathInput)||void 0===t||t.innerFields;for(var n=(null===(e=this.mathInput)||void 0===e?void 0:e.innerFields)||[],o=0,i=n.length;o<i;o++)r.push((n[o].latex()||"").replace(/\\\s/g,"").trim());return r}},{key:"displayRightAnswer",value:function(){if(this.mathInput){for(var t,e=JSON.parse((null===(t=this.widgetConfig)||void 0===t?void 0:t.ans)||"[]"),r=this.mathInput.innerFields||[],n=0,o=r.length;n<o;n++)n<e.length&&e.push(r[n].latex(e[n]));this.enable(!1)}}},{key:"check",value:(o=Pe().mark((function t(){var e,r,n,o,i,a,u,c,s,l,f,p,h,d;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((null===(e=this.statusDisplay)||void 0===e?void 0:e.getStatus())!==it.RIGHT){t.next=4;break}return t.abrupt("return",!0);case 4:if((null===(r=this.statusDisplay)||void 0===r?void 0:r.getStatus())===it.PENDING){t.next=6;break}return t.abrupt("return",!1);case 6:if(n=!1,t.prev=7,null!==(o=this.widgetConfig)&&void 0!==o&&o.cfn)c={u:this.getUserInputArray()},Object.assign(c,null===(i=this.groupContext)||void 0===i?void 0:i._s),c.u.forEach((function(t,e){return c["u"+e]=t})),s=((null===(a=this.widgetConfig)||void 0===a?void 0:a.cfn)||"return true").replace(/#/g,""),n=gt(s,c,(null===(u=this.groupContext)||void 0===u?void 0:u._s)||{});else for("string"==typeof(f=(null===(l=this.widgetConfig)||void 0===l?void 0:l.ans)||"[]")&&(f=JSON.parse(f)),p=this.getUserInputArray(),n=!0,h=0,d=p.length;h<d;h++)n=h<f.length&&n&&f[h]==(p[h]||"").trim();t.next=16;break;case 11:return t.prev=11,t.t0=t.catch(7),console.error(t.t0),this.setStatus(it.ERROR),t.abrupt("return",!1);case 16:return this.setStatus(n?it.RIGHT:it.WRONG),this.getUserInput(),this.enable(!n),n?this.showFeedback():this.incAttempts(),t.abrupt("return",n);case 21:case"end":return t.stop()}}),t,this,[[7,11]])})),i=function(){var t=this,e=arguments;return new Promise((function(r,n){var i=o.apply(t,e);function a(t){Ce(i,r,n,a,u,"next",t)}function u(t){Ce(i,r,n,a,u,"throw",t)}a(void 0)}))},function(){return i.apply(this,arguments)})},{key:"render",value:function(){var t,e=this;if(this.widgetConfig)if(this.widgetConfig,window.MathQuill){if(null!==(t=this.groupContext)&&void 0!==t&&t.s.length&&this.widgetConfig){var r=this.widgetConfig.ans||"";r.indexOf("#")>=0&&(r=r.replace(/#/g,""),this.widgetConfig.ans=""+f(this.groupContext._s||{},r))}this.input=document.createElement("span"),this.input.innerText=bt(this.widgetConfig.ini||"?"),this.input.innerText,this.append(this.input);var n=window.MathQuill.getInterface(2);this.mathInput=n.StaticMath(this.input),this.mathInput.innerFields.forEach((function(t){t.__controller.textarea.on("keyup",(function(t){t.preventDefault(),e.setStatus(it.PENDING)}))})),qe(Me(u.prototype),"init",this).call(this,this.widgetConfig.pre),this.statusDisplay&&this.append(this.statusDisplay.getElement()),this.reflowLatex()}else console.error("MathQuill not found on page")}}],r&&Ae(e.prototype,r),n&&Ae(e,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(zt));var Ge=/\\begin\{pmatrix\}(.*?)\\end\{pmatrix\}/gm,De=0;function Fe(t){t=(t=t.replace(Ge,(function(t){var e,r,n,o;return e=t,(r=window.nerdamer.getCore()).Symbol,n=(e=e.replace("\\begin{pmatrix}","").replace("\\end{pmatrix}","")).split("\\\\").map((function(t){return t.split("&").map((function(t){return Fe(t.trim()||"0")})).join(",")})),o="MM_"+De,De++,window.nerdamer.setVar(o,r.Matrix.fromArray(n)),o}))).replace(/\\,/g," ").replace(/ \\\s+/g," ");var e=window.nerdamer.convertFromLaTeX(t);return window.nerdamer.getVars(),e}function Be(t){return Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Be(t)}function He(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){s=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Ue(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ue(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ue(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function $e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==Be(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Be(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Be(i)?i:String(i)),n)}var o,i}function Ve(t){var e;if(Array.isArray(null==t||null===(e=t.symbols)||void 0===e?void 0:e.elements)){var r=t.symbols.elements[0];if(!Array.isArray(r))return!0}return!1}function Qe(t){var e=t.text();return e.startsWith("matrix")?window.nerdamer("size("+e+")"):null}var We,Je=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.lang=e}var e,r,n;return e=t,n=[{key:"clone",value:function(t){return JSON.parse(JSON.stringify(t))}},{key:"decrypt",value:function(t){return atob(t)}}],(r=[{key:"checkRules",value:function(t){var e=this,r=[],n=t.rules||{};"string"==typeof n&&(n=JSON.parse(n));var o=t.latex.join(" ");return n.comma_as_decimal&&(t.latex=t.latex.map((function(t){return t.replace(",",".")}))),n.forbidden&&n.forbidden.forEach((function(t){o[t]&&r.push(G(e.lang,"sym_notallowed",t))})),n.unique&&n.unique.forEach((function(t){(o.match(new RegExp(t,"g"))||[]).length>1&&r.push(G(e.lang,"sym_once",t))})),r}},{key:"compare",value:function(e){var r=this,n=window.nerdamer;return e=t.clone(e),new Promise((function(o,i){n.flush(),n.clearVars(),window.nerdamer.getCore().Symbol;var a={x:n("x"),y:n("y"),z:n("z"),t:n("t"),e:n("exp(1)")},u=r.checkRules(e);if(u.length)o({qid:e.qid,msg:u.join(" "),correct:0});else{var c=[];try{if((c=e.latex.map((function(t){return Fe(t)}))).filter((function(t){return null==t})).length>0)return o({qid:e.qid,correct:-4,msg:G(r.lang,"error_cantprocess")})}catch(t){return console.error(t),o({qid:e.qid,correct:-4,msg:"Error: No es poden processar les respostes donades: "+t})}c.forEach((function(t,e){n.setVar("ua_"+e,t)}));try{(e.symbols||[]).forEach((function(t){if((t=(t||"").trim()).indexOf(":=")>0){var e=t.indexOf(":="),r=t.substring(0,e),o=t.substring(e+2);n.setVar(r.trim(),o.trim())}else n.setVar(t,t)}))}catch(t){return console.error(t),void o({qid:e.qid,correct:-2,msg:"Error: no es poden processar els símbols: "+t})}!function(t,e){if(Array.isArray(t))for(var r=0,n=t.length;r<n;r++)e(r,t[r]);else for(var o=Object.keys(t),i=0,a=o.length;i<a;i++){var u=o[i];e(u,t[u])}}(a,(function(t,e){e.text()}));var s=[];try{if(e.anse&&(e.ans=[t.decrypt(e.anse)]),e.anse,e.ans,(s=e.ans.map((function(t){return n(t,a)}))).filter((function(t){return null==t})).length>0)return void o({qid:e.qid,correct:-3,msg:"Error: Hi ha respostes 'ans' que no es poden processar"})}catch(t){return console.error(t),void o({qid:e.qid,correct:-3,msg:"Error: No es poden processar les respostes 'ans': "+t})}try{var l=[];if(F(s,c).forEach((function(t){var e=He(t,2),r=e[0],n=e[1];Ve(r)&&!Ve(n)?l.push("S'espera un conjunt per resposta. Per exemple \\(\\{\\sqrt{2},\\, \\pi\\}\\)"):Qe(r)&&!Qe(n)?l.push("S'espera una matriu per resposta."):!Qe(r)&&Qe(n)&&l.push("S'espera una expressió per resposta.");var o=Qe(r),i=Qe(n);o&&i&&(o[0]==i[0]&&o[1]==i[1]||l.push("La matriu resposta no té la dimensió correcta."))})),l.length>0)return void o({qid:e.qid,correct:0,msg:l.join(" ")})}catch(t){return console.error(t),void o({qid:e.qid,correct:-4,msg:"Error: S'ha produït un error comprovant els tipus "+t})}var f=0,p="";try{F(s,c).forEach((function(t){var n=He(t,2),o=n[0],i=n[1];o.text(),i.text();var a=null,u=e.rules||{};if(u.precision)a=Math.abs(o.toDecimal()-i.toDecimal())<u.precision;else if(Qe(o)){var c=o.subtract(i);o.text(),i.text(),c.text(),a=function(t){var e=!0;return t.each((function(t){e=e&&"0"==t.text()})),e}(c)}else a=u.factor||u.expand?o.eq(i):"0"===(a=o.subtract(i).simplify()).toString();if("boolean"==typeof a&&!0===a?(f=1,p=G(r.lang,"right_answer")):(p=G(r.lang,"wrong_answer"),f=0),0==f)return!0;if(u.num_terms&&i.isPolynomial()){var s=i.symbols.coeffs().length,l=o.symbols.expand().coeffs().length,h=l-s;"equal"==u.num_terms&&0!=h&&(p="La resposta hauria de tenir "+l+" termes sumats o restats.",f=0)}}))}catch(t){console.error("Exception comparing ",t),p=G(r.lang,"error_verifying"),f=-1}o({qid:e.qid,correct:f,msg:p})}}))}},{key:"getAnswer",value:function(e){var r=this,n=window.nerdamer;return e=t.clone(e),new Promise((function(t,o){var i={x:n("x"),y:n("y"),z:n("z"),t:n("t"),e:n("exp(1)")};try{(e.symbols||[]).forEach((function(t){if((t=(t||"").trim()).indexOf(":=")>0){var e=t.indexOf(":="),r=t.substring(0,e),o=t.substring(e+2);n.setVar(r.trim(),o.trim())}else n.setVar(t,t)}))}catch(e){return console.error(e),void t({msg:"Error: no es poden processar els símbols: "+e})}if("string"!=typeof e.ans)t({msg:"Vector ans is not supported yet!"});else{var a=n(e.ans,i),u="".concat(G(r.lang,"expected_ans"),"<br> \\(").concat(a.latex(),"\\)");t({right_answer:btoa(u)})}}))}}])&&$e(e.prototype,r),n&&$e(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ye(t){return Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ye(t)}function Ze(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==Ye(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ye(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Ye(i)?i:String(i)),n)}var o,i}var Xe=[{name:"General",buttons:[{name:"Multiplicació",latex:"\\times",tab:1,icon:"\\times"},{name:"Fracció",latex:"\\frac{}{}",moveto:"Up",movefor:1,tab:1,icon:"\\frac{\\square}{\\square}"},{name:"Exponent",latex:"\\^{}",moveto:"Up",movefor:1,tab:1,icon:"\\square^2"},{name:"Parèntesis",latex:"\\left(\\right)",moveto:"Left",movefor:1,tab:1,icon:"\\left(\\square\\right)"},{name:"Arrel quadrada",latex:"\\sqrt{}",moveto:"Left",movefor:1,tab:1,icon:"\\sqrt{\\square}"},{name:"Arrel cúbica",latex:"\\sqrt[3]{}",moveto:"Left",movefor:1,tab:1,icon:"\\sqrt[3]{\\square}"},{name:"Radical",latex:"\\sqrt[{}]{}",moveto:"Left",movefor:2,tab:1,icon:"\\sqrt[\\square]{\\square}"},{name:"Matriu 2x2",latex:"\\begin{pmatrix} & \\\\ & \\end{pmatrix}",tab:1,icon:"M_{2\\times 2}"},{name:"Matriu 3x3",latex:"\\begin{pmatrix} & & \\\\ & &  \\\\ & & \\end{pmatrix}",tab:1,icon:"M_{3\\times 3}"}]},{name:"Símbols",buttons:[{name:"pi",latex:"\\pi",tab:2,icon:"\\pi"},{name:"e",latex:"e",tab:2,icon:"e"},{name:"infinit",latex:"\\infty",tab:2,icon:"\\infty"},{name:"Més menys",latex:"\\pm",tab:2,icon:"\\pm"},{name:"Diferent",latex:"\\neq",tab:2,icon:"\\neq"},{name:"Major o igual",latex:"\\geq",tab:2,icon:"\\geq"},{name:"Menor o igual",latex:"\\leq",tab:2,icon:"\\leq"},{name:"Major que",latex:"\\gt",tab:2,icon:"\\gt"},{name:"Menor que",latex:"\\lt",tab:2,icon:"\\lt"}]},{name:"Funcions",buttons:[{name:"Sinus",latex:"\\sin()",moveto:"Left",movefor:1,tab:5,icon:"\\sin{\\square}"},{name:"Cosinus",latex:"\\cos()",moveto:"Left",movefor:1,tab:5,icon:"\\cos{\\square}"},{name:"Tangent",latex:"\\tan()",moveto:"Left",movefor:1,tab:5,icon:"\\tan{\\square}"},{name:"Arcsinus",latex:"\\arcsin()",moveto:"Left",movefor:1,tab:5,icon:"\\arcsin{\\square}"},{name:"Arccosinus",latex:"\\arccos()",moveto:"Left",movefor:1,tab:5,icon:"\\arccos{\\square}"},{name:"Arctangent",latex:"\\arctan()",moveto:"Left",movefor:1,tab:5,icon:"\\arctan{\\square}"},{name:"Logaritme Neperià",latex:"\\ln()",moveto:"Left",movefor:1,tab:5,icon:"\\ln{\\square}"},{name:"Logaritme en base b",latex:"\\frac{\\log()}{\\log{b}}",moveto:"Left",movefor:4,tab:5,icon:"\\log_b{\\square}"}]}],Ke=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.panel=e,this.staticMathFields=[],this.view=s("div",{class:"ibquizz-editor-palette"}),this.createPalettes()}var e,r,n;return e=t,(r=[{key:"createPalettes",value:function(){var t=this;Xe.forEach((function(e){var r=document.createElement("div");t.view.append(r),e.buttons.forEach((function(e){r.append(t.createButton(e))}))}))}},{key:"createButton",value:function(t){var e=this,r=document.createElement("span");r.innerHTML=t.icon;var n=window.MathQuill.getInterface(2);this.staticMathFields.push(n.StaticMath(r));var o=s("button",{class:"btn btn-sm ibquizz-me-btn-toolbar",title:t.name});return o.append(r),o.addEventListener("click",(function(r){r.preventDefault(),e.panel.write(t.latex,t.moveto,t.movefor)})),o}},{key:"getView",value:function(){return this.view}},{key:"reflow",value:function(){this.staticMathFields.forEach((function(t){return t.reflow()}))}}])&&Ze(e.prototype,r),n&&Ze(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function tr(t){return tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tr(t)}function er(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==tr(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==tr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===tr(i)?i:String(i)),n)}var o,i}var rr=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.view=s("div",{class:"ibquizz-editor-panel"}),this.palette=new Ke(this),this.view.append(this.palette.getView());var e=window.MathQuill.getInterface(2),r=document.createElement("span");r.style.display="block",r.style.width="100%",r.style.minHeight="100px",this.view.append(r),this.mathInput=e.MathField(r,{})}var e,r,n;return e=t,(r=[{key:"getView",value:function(){return this.view}},{key:"setLatex",value:function(t){this.mathInput.latex(t)}},{key:"getLatex",value:function(){return this.mathInput.latex()}},{key:"write",value:function(t,e,r){if(void 0===r&&(r=1),this.mathInput.write(t),this.mathInput.focus(),e)for(var n=0;n<r;n++)this.mathInput.keystroke(e)}},{key:"reflow",value:function(){this.mathInput.focus(),this.mathInput.reflow(),this.palette.reflow()}}])&&er(e.prototype,r),n&&er(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function nr(t){return nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nr(t)}function or(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==nr(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==nr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===nr(i)?i:String(i)),n)}var o,i}function ir(){return ir="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=ar(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},ir.apply(this,arguments)}function ar(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=lr(t)););return t}function ur(t,e){return ur=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ur(t,e)}function cr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=lr(t);if(e){var o=lr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return sr(this,r)}}function sr(t,e){if(e&&("object"===nr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function lr(t){return lr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},lr(t)}var fr,pr,hr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ur(t,e)}(i,t);var e,r,n,o=cr(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t,I.CANCEL_ACCEPT,"")).mathEditorPanel=new rr,e.setBody(e.mathEditorPanel.getView()),e}return e=i,(r=[{key:"setBody",value:function(t){var e=this;this.body.html(""),this.body.append($(t)),this.primaryButton.on("click",(function(t){t.preventDefault(),e.acceptCb&&e.acceptCb(),e.elem.modal("hide")}))}},{key:"setLatex",value:function(t){this.mathEditorPanel.setLatex(t)}},{key:"getLatex",value:function(){return this.mathEditorPanel.getLatex()}},{key:"show",value:function(t){var e=this;ir(lr(i.prototype),"show",this).call(this,t),setTimeout((function(){return e.mathEditorPanel.reflow()}),300)}}])&&or(e.prototype,r),n&&or(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(X);function dr(t){return dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dr(t)}function yr(){yr=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),u=new j(o||[]);return n(a,"_invoke",{value:x(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function p(){}function h(){}function d(){}var y={};c(y,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(_([])));m&&m!==e&&r.call(m,i)&&(y=m);var g=d.prototype=p.prototype=Object.create(y);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,u){var c=l(t[n],t,i);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==dr(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return o("throw",t,a,u)}))}u(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return k()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=O(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function O(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function _(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return h.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=c(d,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),c(g,u,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=_,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function vr(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function mr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==dr(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==dr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===dr(i)?i:String(i)),n)}var o,i}function br(){return br="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=wr(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},br.apply(this,arguments)}function wr(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Sr(t)););return t}function xr(t,e){return xr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},xr(t,e)}function Or(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Sr(t);if(e){var o=Sr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Er(this,r)}}function Er(t,e){if(e&&("object"===dr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Sr(t){return Sr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Sr(t)}var jr;R({elementName:"ib-quizz-mathquill",classes:["iedib-quizz-widget"],styles:{display:"inline-block"}})(pr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xr(t,e)}(c,t);var e,r,n,o,i,u=Or(c);function c(){return mr(this,c),u.apply(this,arguments)}return e=c,r=[{key:"enable",value:function(t){this.mathInput}},{key:"getUserInput",value:function(){var t,e=null===(t=this.mathInput)||void 0===t?void 0:t.latex();return(e||"").replace(/\\,/g," ").replace(/\\ /g," ").trim()}},{key:"displayRightAnswer",value:function(){if(this.mathInput){var t,e=(null===(t=this.widgetConfig)||void 0===t?void 0:t.ans)||"";this.mathInput.latex(e),this.enable(!1)}}},{key:"check",value:(o=yr().mark((function t(){var e,r,n,o,i,u,c,s,l,f,p,h,d,y,v,m,g,b,w,x,O,E,S;return yr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((null===(e=this.statusDisplay)||void 0===e?void 0:e.getStatus())!==it.RIGHT){t.next=4;break}return t.abrupt("return",!0);case 4:if((null===(r=this.statusDisplay)||void 0===r?void 0:r.getStatus())===it.PENDING){t.next=6;break}return t.abrupt("return",!1);case 6:if(i=!1,u=((null===(n=this.widgetConfig)||void 0===n||null===(o=n.opts)||void 0===o?void 0:o.ngx)||"nermader").trim().toLowerCase(),t.prev=8,null===(c=this.widgetConfig)||void 0===c||!c.cfn){t.next=20;break}p=this.getUserInput()||"",h=null,window.nerdamer&&(h=Fe(p)),d={uTex:p,uNerd:h},Object.assign(d,null===(s=this.groupContext)||void 0===s?void 0:s._s),y=((null===(l=this.widgetConfig)||void 0===l?void 0:l.cfn)||"return true").replace(/#/g,""),i=gt(y,d,(null===(f=this.groupContext)||void 0===f?void 0:f._s)||{}),t.next=37;break;case 20:if(!window.nerdamer||"nermader"!==u){t.next=36;break}return window.nerdamer,b=this.getUserInput()||"",w=(null===(v=this.groupContext)||void 0===v?void 0:v._s)||{},x=((null===(m=this.widgetConfig)||void 0===m?void 0:m.vars)||[]).map((function(t){return t.replace(/#([a-zA-Z0-9_]+)/gm,(function(t,e){var r=w[e];return null!=r?"function"==typeof r.text?r.text():"function"==typeof r.toString?r.toString():r+"":t}))})),j=this.lang,We||(We=new Je(j)),O=We,E={latex:[b],ans:[(null===(g=this.widgetConfig)||void 0===g?void 0:g.ans)||""],symbols:x,qid:a()},t.next=31,O.compare(E);case 31:S=t.sent,i=S.correct>0,t.next=37;break;case 36:throw new Error("Check function must be set");case 37:t.next=44;break;case 39:return t.prev=39,t.t0=t.catch(8),console.error(t.t0),this.setStatus(it.ERROR),t.abrupt("return",!1);case 44:return this.setStatus(i?it.RIGHT:it.WRONG),this.getUserInput(),this.enable(!i),i?this.showFeedback():this.incAttempts(),t.abrupt("return",i);case 49:case"end":return t.stop()}var j}),t,this,[[8,39]])})),i=function(){var t=this,e=arguments;return new Promise((function(r,n){var i=o.apply(t,e);function a(t){vr(i,r,n,a,u,"next",t)}function u(t){vr(i,r,n,a,u,"throw",t)}a(void 0)}))},function(){return i.apply(this,arguments)})},{key:"render",value:function(){var t,e=this;if(this.widgetConfig)if(this.widgetConfig,window.MathQuill){if(null!==(t=this.groupContext)&&void 0!==t&&t.s.length&&this.widgetConfig){var r=this.widgetConfig.ans||"";r.indexOf("#")>=0&&(r=r.replace(/#/g,""),this.widgetConfig.ans=""+f(this.groupContext._s||{},r))}this.input=document.createElement("span"),this.input.innerText=bt(this.widgetConfig.ini||"").replace(/\\MathQuillMathField{}/gm,""),this.input.style.minWidth="100px",this.append(this.input);var n=window.MathQuill.getInterface(2);this.mathInput=n.MathField(this.input,{handlers:{edit:function(){e.setStatus(it.PENDING)}}}),this.dlg_btn_el=s("button",{class:"btn btn-sm ibquizz-me-btn-openeditor",title:G(this.lang,"open_editor"),html:'<i class="ibquizz-square-root"></i>'}),this.append(this.dlg_btn_el),this.dlg_btn_el.addEventListener("click",(function(t){var r;t.preventDefault();var n=function(t){if(!fr){var e=a();fr=new hr(e)}return fr.setTitle(t),fr}(G(e.lang,"math_editor"));n.setLatex(""),n.show((function(){var t,r=n.getLatex();r&&(null===(t=e.mathInput)||void 0===t||t.latex(r))})),n.setLatex((null===(r=e.mathInput)||void 0===r?void 0:r.latex())||"")})),br(Sr(c.prototype),"init",this).call(this,this.widgetConfig.pre),this.statusDisplay&&this.append(this.statusDisplay.getElement()),this.reflowLatex()}else console.error("MathQuill not found on page")}}],r&&gr(e.prototype,r),n&&gr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),c}(zt));function _r(t){return _r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_r(t)}function kr(){kr=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),u=new j(o||[]);return n(a,"_invoke",{value:x(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function p(){}function h(){}function d(){}var y={};c(y,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(_([])));m&&m!==e&&r.call(m,i)&&(y=m);var g=d.prototype=p.prototype=Object.create(y);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,u){var c=l(t[n],t,i);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==_r(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return o("throw",t,a,u)}))}u(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return k()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=O(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function O(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function _(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return h.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=c(d,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),c(g,u,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=_,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Lr(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function Pr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Nr(n.key),n)}}function Cr(t,e){return Cr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Cr(t,e)}function Tr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=zr(t);if(e){var o=zr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ar(this,r)}}function Ar(t,e){if(e&&("object"===_r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return qr(t)}function qr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zr(t){return zr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zr(t)}function Nr(t){var e=function(t,e){if("object"!==_r(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===_r(e)?e:String(e)}var Rr,Ir,Mr=(Rr={name:"quizz",author:"Josep Mulet Pol",version:"1.0",query:"[data-quizz-group]",use$:!0},(Ir=Object.assign({},N,Rr)).query||(Ir.query='[role="snptd_'.concat(Ir.name,'"],[data-snptd="').concat(Ir.name,'"]')),function(t){t.meta=Ir}(jr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cr(t,e)}(i,t);var e,r,n,o=Tr(i);function i(t){var e,r,n,a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),e=o.call(this,t),r=qr(e),a={s:"",_s:{},o:{hint:2,ans:4}},(n=Nr(n="groupContext"))in r?Object.defineProperty(r,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[n]=a;var u,s=t.getAttribute("data-lang");s||(s=(null===(u=t.parentElement)||void 0===u?void 0:u.getAttribute("data-lang"))||null);var l=t.getAttribute("data-quizz-group")||"";try{var f=p(l);e.groupContext=Object.assign(e.groupContext,f),e.groupContext.o.hint=c(e.groupContext.o.hint,2),e.groupContext.o.ans=c(e.groupContext.o.ans,4),e.groupContext}catch(t){console.error(t)}return e.lang=s||"ca",e}return e=i,r=[{key:"generateGroup",value:function(){try{gt(this.groupContext.s,{},this.groupContext._s)}catch(t){console.error("GroupContext:: No es pot interpretar el codi.\n",t)}if(this.groupContext.s.trim().length){var t=s("div",{class:"alert alert-info d-print-none",style:"float:right;display:inline",html:'<svg data-toggle="tooltip" title="'.concat(G(this.lang,"random_msg"),'+" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" style="height:20px;"><path fill="#154b5e" d="M592 192H473.26c12.69 29.59 7.12 65.2-17 89.32L320 417.58V464c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48V240c0-26.51-21.49-48-48-48zM480 376c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24zm-46.37-186.7L258.7 14.37c-19.16-19.16-50.23-19.16-69.39 0L14.37 189.3c-19.16 19.16-19.16 50.23 0 69.39L189.3 433.63c19.16 19.16 50.23 19.16 69.39 0L433.63 258.7c19.16-19.17 19.16-50.24 0-69.4zM96 248c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24zm128 128c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24zm0-128c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24zm0-128c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24zm128 128c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"/></svg> \n                ')}),e=this.parent.querySelector(":nth-child(2)");"H4"===(null==e?void 0:e.nodeName)?this.parent.insertBefore(t,e.nextSibling):this.parent.prepend(t)}}},{key:"findPlaceholders",value:function(){0!==this.groupContext.s.trim().length&&(this.findPlaceholdersSpan(),this.findPlaceholdersText())}},{key:"findPlaceholdersText",value:function(){var t=this;(function(t){for(var e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,null),n=r.nextNode();null!=n;)e.push(n),n=r.nextNode();return e})(this.parent).forEach((function(e){var r=e.textContent||"";e.textContent=wt(r,t.groupContext._s)}))}},{key:"findPlaceholdersSpan",value:function(){var t=this;this.parent.querySelectorAll("span[data-quizz-interpol]").forEach((function(e){var r=e.getAttribute("data-quizz-interpol")||"";r.indexOf("#")<0||(e.innerHTML=wt(r,t.groupContext._s))}))}},{key:"init",value:function(){var t=this,e=this.parent.dataset;if("1"!==e.active)if(e.active="1",this.groupContext.s.trim().length)if(window.nerdamer)this.generateGroup(),this.initProxy();else{var r="https://piworld.es/iedib/snippets/sd/mathquill.min.js",n=document.querySelector('script[src$="sd/quizz-editor.min.js"]');n&&(r=n.src.replace("sd/quizz-editor.min.js","sd/mathquill.min.js")),l(r,"mathquill.matrix4quizz",(function(){t.generateGroup(),t.initProxy()}),(function(){console.error("Cannot load mathquill-nerdamer"),t.generateGroup(),t.initProxy()}))}else this.initProxy()}},{key:"initProxy",value:function(){var t,e,r,n=this;if(this.findPlaceholders(),this.allQuizzElements=this.parent.querySelectorAll("ib-quizz-numeric, ib-quizz-dropdown, ib-quizz-mchoice"),this.allClozeElements=this.parent.querySelectorAll("ib-quizz-cloze, ib-quizz-mathquill"),this.allQuizzElements,this.allClozeElements,this.checkButton=s("button",{class:"btn btn-sm btn-primary d-print-none",style:"margin: 10px;display:block",html:'<i class="fa fas fa-check"></i> '+G(this.lang,"check")}),this.listener=function(){var t,e=(t=kr().mark((function t(e){var r,o,i,a;return kr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),i=[],null===(r=n.allQuizzElements)||void 0===r||r.forEach((function(t){i.push(t.check())})),null===(o=n.allClozeElements)||void 0===o||o.forEach((function(t){i.push(t.check())})),t.next=6,Promise.all(i);case 6:t.sent.every((function(t){return!0===t}))&&(null===(a=n.checkButton)||void 0===a||a.setAttribute("disabled","true"));case 8:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Lr(i,n,o,a,u,"next",t)}function u(t){Lr(i,n,o,a,u,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}(),this.allQuizzElements.length+this.allClozeElements.length>0&&this.parent.append(this.checkButton),this.listener&&(null===(r=this.checkButton)||void 0===r||r.addEventListener("click",this.listener)),null===(t=this.allQuizzElements)||void 0===t||t.forEach((function(t){"function"==typeof t.setLang?(t.setLang(n.lang),t.setGroupContext(n.groupContext)):console.error("No custom element registered for ",t)})),null!==(e=this.allClozeElements)&&void 0!==e&&e.length){var o="https://piworld.es/iedib/snippets/sd/mathquill.min.js",i=document.body.querySelector('script[src$="/sd/quizz.min.js"]');i&&(o=(i.getAttribute("src")||"").replace("/sd/quizz.min.js","/sd/mathquill.min.js")),l(o,"mathquill.matrix4quizz",(function(){var t;null===(t=n.allClozeElements)||void 0===t||t.forEach((function(t){"function"==typeof t.setLang?(t.setLang(n.lang),t.setGroupContext(n.groupContext)):console.error("No custom element registered for ",t)}))}))}}},{key:"dispose",value:function(){var t;"0"!==this.parent.dataset.active&&(this.parent.removeAttribute("data-active"),this.listener&&(null===(t=this.checkButton)||void 0===t||t.removeEventListener("click",this.listener)))}}],r&&Pr(e.prototype,r),n&&Pr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(A))||jr);d([Mr])}()}();