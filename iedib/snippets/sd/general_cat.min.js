window.IB = window.IB || {}; window.IB.sd = window.IB.sd || {};
        !function(){if(document.getElementById("sd_css_general")){return;}; var l = '.modal-fullscreen-xl .modal-header {   padding: 0rem 1rem;   border: none; } .modal-fullscreen-xl .close {   font-size: 200%;   border-radius: 50%;   background: black; } .modal-fullscreen-xl .modal-dialog {   width: 95%;   height: 95%;   max-width: none;   margin: auto; } .modal-fullscreen-xl .modal-content {   height: 100%;   border: 0;   border-radius: 0;   background: rgba(0,0,0,0); } .modal-fullscreen-xl .modal-body {   width: 100%;   overflow: auto;   background: rgba(0,0,0,0); } .navigate-left-arrow, .navigate-right-arrow {   font-size: 300%;   color: whitesmoke; } @media not print {   div[role="snptd_presentacio"] {     margin: auto;     border-radius: 5px;     border: 2px solid #d4ebee;     max-width: 600px;   }    div[role="snptd_presentacio"].theme-dark > .tab-content {     background: #363640;     color: whitesmoke;   }   div[role="snptd_presentacio"].align-center div.tab-pane {     align-self: center;     min-height: initial;   }   div[role="snptd_presentacio"].align-bottom div.tab-pane {     align-self: flex-end;     min-height: initial;   }  }     div[role="snptd_presentacio"] .nav.nav-tabs {   display: none;  }  @media not print {   div[role="snptd_presentacio"] > .tab-content {     border: none;     display: flex;     padding: 10px;   }     div[role="snptd_presentacio"] .tab-pane {     display: block;     border: none;     min-height: 100px;     margin-right: -100%;     width: 100%;     opacity: 0;   }   div[role="snptd_presentacio"] .tab-pane.fade {     transition-delay: 300ms;     transition-duration: 500ms;   }   div[role="snptd_presentacio"][data-transition="slide"] .tab-pane {     transition: transform .55s linear, opacity 0.55s ease-out;   }    div[role="snptd_presentacio"] .tab-pane.active {     opacity: 1;     transform: translate(0,0);   }   div[role="snptd_presentacio"] .tab-pane:not(.active) {     transform: translate(-110%,0);   }    div[role="snptd_presentacio"] .snpt_container {     margin: 20px 400px;     height: 300px;     width: 50%;     background-color: #d4ebee;   }    div[role="snptd_presentacio"] .box_continguts {     padding-top: 20px;     padding-left: 20px;     padding-right: 20px;     font-size: 20px;     height: 250px;     background-color: #d4ebee;   }    div[role="snptd_presentacio"] .box_botons {     padding-left: 10px;     padding-top: 6px;     font-size: 18px;     height: 40px;     background-color: #d4ebee;   }    div[role="snptd_presentacio"] .box_botons button {     margin: 0 1px;   }    div[role="snptd_presentacio"] .box_comptador {     display: inline;     float: right;     padding-right: 15px;     padding-top: 5px;     font-size: 16px;     height: 30px;     color: #0069d9;   }  }   @media print {   div[role="snptd_presentacio"] {     width: 99%;     margin: auto;     border: 1px solid #eee;     display: flex;   }   div[role="snptd_presentacio"] .box_botons {    display: none;   }   div[role="snptd_presentacio"] .fade {     opacity: 1;   }   div[role="snptd_presentacio"] .nav>li>a {     min-width: 80px;     color: #555;   }   div[role="snptd_presentacio"] .tab-pane {     opacity: 1;     width: 100%;     display: inline-block!important;   }   div[role="snptd_presentacio"] .tab-pane::before {     content: attr(data-label);     width: 100%;     display: block;     margin-bottom: 10px;     background-color: #d4ebee;     text-align: right;     padding-right: 5px;   }  }'; var s = document.createElement('style'); s.type = 'text/css'; s.innerHTML = l; s.id="sd_css_general"; document.getElementsByTagName('head')[0].appendChild(s);}();
        !function(){for(var e=document.querySelectorAll("div.carousel[data-durades]"),r=0,a=e.length;a>r;r++){var t=e[r],l=t.dataset;if(l.durades){if("0"==l.durades.trim())continue;l.ride="carousel",t.removeAttribute("data-interval");for(var d=l.durades.split(","),i=t.querySelectorAll(".carousel-inner > carousel-item"),u=0,n=i.length;n>u;u++){var o=2;u<d.length&&(o=d[u].trim());var s=i[u];s.dataset.interval=o+"000"}}}}(); 
!function(){"use strict";var t="<span>&#10094;</span>",e="<span>&#10095;</span>",r="snptModal_lightbox",a="lightbox";if(window.IB.sd[a])return void console.error("Warning: "+a+" loaded twice.");var n=function(){for(var t=0,i=[],e=document.querySelectorAll('[role="snptd_lightbox"], [data-snptd="lightbox"]'),r=0,a=e.length;a>r;r++){var n=e[r],o=(n.tagName||"").toUpperCase();if("DIV"==o||"TABLE"==o)for(var s=n.querySelectorAll("img"),l=0,d=s.length;d>l;l++){var c=s[l];c.dataset.lbpos=t,t++,i.push(c)}else if("IMG"==o){if("lightbox"!=n.dataset.snptd&&"snptd_lightbox"!=n.getAttribute("role"))continue;n.dataset.lbpos=t,t++,i.push(n)}}return i},o=function(){this.$gallery=n(),this._createModal(),this.currentIndex=0;for(var t=0;t<this.$gallery.length;t++)this._setupImage(this.$gallery[t])};o.prototype._setupImage=function(t){var i=this,e=$(t);"1"!=e.attr("data-active")&&(e.css("cursor","pointer"),e.attr("data-toggle","modal"),e.attr("data-target","#"+r),e.attr("data-active","1"),e.off(),e.on("click",function(t){i.currentIndex=parseInt(this.dataset.lbpos),i._loadImageDynamically()}))},o.prototype._loadImageDynamically=function(){var t=this;if(!this.$gallery[this.currentIndex])return void console.error("Nothing at currentIndex",this.currentIndex);var i=$(this.$gallery[this.currentIndex]);if(t.$img.length){var e=new Image,r=i.attr("data-src")||i.attr("src");e.onload=function(){t._resize(e.width,e.height),t.$img.attr("src",r)},e.onerror=function(i){console.error("Cannot load image ",i),t.$img.attr("src","")},e.src=r}},o.prototype._createModal=function(){var i=this,a=this.$gallery.length>1,n='<a class="navigate-left-arrow" href="javascript:void(0);">'+t+"</a>",o='<a class="navigate-right-arrow" href="javascript:void(0);">'+e+"</a>",s=$('<div class="modal fade modal-fullscreen-xl" id="'+r+'" tabindex="-1" role="dialog"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close text-white" data-dismiss="modal">&times;</button></div><div class="modal-body p-0" style="text-align:center;">'+(a?n:"")+'<img src="">'+(a?o:"")+"</div></div></div></div>");this.$modal=$(s),this.$img=this.$modal.find("img"),this.$close=this.$modal.find("button"),$("body").append(this.$modal),this.$modal.on("hide.bs.modal",function(){i.$img.attr("src","")}),$("#modalCloseBtn").on("click",function(){i.$img.attr("src","")}),a&&(this.$modal.find(".navigate-left-arrow").on("click",function(t){t.preventDefault(),i._navigateLeft()}),this.$modal.find(".navigate-right-arrow").on("click",function(t){t.preventDefault(),i._navigateRight()}))},o.prototype._resize=function(t,i){var e=1;i>0&&(e=t/i);var r=$(window).height(),a=$(window).width(),n=1;a>0&&(n=r/a),e>n?(this.$img.css("width","initial"),this.$img.css("height","100%")):(this.$img.css("height","initial"),this.$img.css("width","100%"))},o.prototype._loadImageDynamically=function(){var t=this;if(!this.$gallery[this.currentIndex])return void console.error("Nothing at currentIndex",this.currentIndex);var i=$(this.$gallery[this.currentIndex]);if(t.$img.length){var e=new Image,r=i.attr("data-src")||i.attr("src");e.onload=function(){t._resize(e.width,e.height),t.$img.attr("src",r)},e.onerror=function(i){console.error("Cannot load image ",i),t.$img.attr("src","")},e.src=r}},o.prototype._navigateLeft=function(){0==this.currentIndex?this.currentIndex=this.$gallery.length-1:this.currentIndex=this.currentIndex-1,this._loadImageDynamically()},o.prototype._navigateRight=function(){this.currentIndex==this.$gallery.length-1?this.currentIndex=0:this.currentIndex=this.currentIndex+1,this._loadImageDynamically()},o.prototype.dispose=function(){for(var t=0;t<this.$gallery.length;t++){var i=$(this.$gallery[t]);i.removeAttr("data-active"),i.removeAttr("data-toggle"),i.removeAttr("data-target"),i.css("cursor","initial"),i.off()}var e=$("#"+r);e.off(),e.remove()};var s={author:"Josep Mulet",version:"2.3"};window.IB.sd[a]=s;var l=function(){var t=new o;window.IB.sd[a].inst=t};s.bind=l,s.unbind=function(){var t=Object.values(s.inst);t[i].dispose(),s.inst=null};var d=function(t,i){return i=i||0,window.require&&"function"==typeof window.require?void t():i>15?void console.error("Talea:: Cannot find requirejs"):void window.setTimeout(function(){d(t,i+1)},500)};d(function(){require(["jquery"],function(t){t(function(){l()})})})}(); 
!function(){var a={},e=' .pw-laser-nw{position:relative;}\n .pw-laser-nw::after{content:"";position:absolute;left:0;top:0;width:10px;height:10px;border-radius:50%;background:rgba(255,0,0,0.6);box-shadow: 0 0 5px 3px red;}\n ';e+=' .pw-laser-ne{position:relative;}\n .pw-laser-ne::after{content:"";position:absolute;right:0;top:0;width:10px;height:10px;border-radius:50%;background:rgba(255,0,0,0.6);box-shadow: 0 0 5px 3px red;}\n ',e+=' .pw-laser-sw{position:relative;}\n .pw-laser-sw::after{content:"";position:absolute;left:0;bottom:0;width:10px;height:10px;border-radius:50%;background:rgba(255,0,0,0.6);box-shadow: 0 0 5px 3px red;} \n',e+=' .pw-laser-se{position:relative;}\n .pw-laser-se::after{content:"";position:absolute;right:0;bottom:0;width:10px;height:10px;border-radius:50%;background:rgba(255,0,0,0.6);box-shadow: 0 0 5px 3px red;}\n ',e+=' .pw-laser-md{position:relative;}\n .pw-laser-md::after{content:"";position:absolute;left:50%;bottom:50%;width:10px;height:10px;border-radius:50%;background:rgba(255,0,0,0.6);box-shadow: 0 0 5px 3px red;}\n ',e+=" .audible-media-player{max-width:600px;padding:6px;border-radius:7px;display:flex;margin:auto;margin-bottom:15px;}\n ",e+="  \n .audible-frog span, .audible-frog button{color: #4f6e46;}\n .audible-sky{background:rgb(241,245,254);}\n .audible-frog{background:#e6ede6;}\n .audible-sky span, .audible-sky button{color:rgb(31,106,219);} \n ",e+=" .pw-audible-btn{background: none; border: none; color: #4f6e46; margin: 0 5px;} \n",e+=" .pw-pen-yellow{-webkit-box-shadow: #FFF 0 -1px 4px, #ff0 0 -2px 10px, 5px 5px 15px 5px rgba(0,0,0,0);box-shadow: #FFF 0 -1px 4px, #ff0 0 -2px 10px, 5px 5px 15px 5px rgba(0,0,0,0);background: rgb(255,255,193,0.5);} \n ",e+=" .pw-pen-green{-webkit-box-shadow: #FFF 0 -1px 4px, #3f3 0 -2px 10px, 5px 5px 15px 5px rgba(0,0,0,0);box-shadow: #FFF 0 -1px 4px, #3f3 0 -2px 10px, 5px 5px 15px 5px rgba(0,0,0,0);background: rgb(193,255,200,0.5);}\n ",e+=" .pw-pen-red{-webkit-box-shadow: #FFF 0 -1px 4px, #f33 0 -2px 10px, 5px 5px 15px 5px rgba(0,0,0,0);box-shadow: #FFF 0 -1px 4px, #f33 0 -2px 10px, 5px 5px 15px 5px rgba(0,0,0,0);background: rgb(255,193,193,0.5);} \n ",e+="  @media print{.audible-media-player{display:none;} }\n";var n=function(a,e){if(!e||!document.getElementById(e)){var n=document.createElement("style");n.type="text/css",n.innerHTML=a,e&&(n.id=e),document.getElementsByTagName("head")[0].appendChild(n)}};n(e,"audible_css");var t=function(e){e.fn.snpt_overlaypen=function(a){this.old_display||(this.old_display=this.css("display")),this.old_position||(this.old_position=this.css("position")),this.css({position:"relative",display:"inline-block"});for(var n=e.extend({width:"15px",height:"60%",background:"orange",opacity:"0.37","z-index":"100","border-radius":"20%"},a),t=Object.keys(n),r=[],o=0,i=t.length;i>o;o++){var s=t[o];r.push(s+":"+n[s])}var p=e('<div class="pw-overlaypen" style="position:absolute;'+r.join(";")+'"></div>');return this.append(p),this},e.fn.snpt_erasepen=function(){this.css({position:this.old_position,display:this.old_display}),this.find(".pw-overlaypen").remove()},e.fn.snpt_player=function(n){if(!window.Audio)return console.error("No HTML5 Audio support"),this;var t=e.extend({id:"p"+Math.random().toString(32).substring(2),src:[],skin:"frog",css:""},n),r="";t.css&&(r='style="'+t.css+'"');var o=!1,i=new Audio;i.id=t.id,a[t.id]=i;var s=e('<button class="pw-audible-btn" style="background: none; border: none; margin: 0 5px;" id="'+t.id+'_stop"><i class="fa fas fa-sync"></i></button>'),p=e('<input type="range" value="0" min="0" max="100" style="margin-left:5px;flex-grow:96;"/>'),d=e('<span style="margin-left:5px;font-family:arial;">00:00</span>'),l=e('<button style="background: none; border: none; margin: 0 5px;" class="pw-audible-btn"><i class="fa fas fa-play"></i></button>'),u=e('<div class="audible-media-player audible-'+t.skin+'" '+r+' id="pwmplayer_'+t.id+'" title="AudioPlayer by Josep Mulet"></div>');e.each(t.src,function(a,n){var r=e('<source id="'+t.id+"_src"+a+'" src="'+n+'"></source>');e(i).append(r)}),i.load(),i.addEventListener("loadeddata",function(){var a=i.duration;s.on("click",function(a){i.pause(),e(l).html('<i class="fa fas fa-play"></i>'),i.currentTime=0,d.html("00:00"),p.val(0),t.onStop&&t.onStop()}),l.on("click",function(a){i.stopped=!1,i.paused?(i.play(),e(l).html('<i class="fa fas fa-pause"></i>')):(i.pause(),e(l).html('<i class="fa fas fa-play"></i>'))}),i.addEventListener("timeupdate",function(e){var n=e.target;if(!o){var r=Math.floor(n.currentTime),i=Math.floor(r/60)+"",s=r-60*i+"";i.length<2&&(i="0"+i),s.length<2&&(s="0"+s),d.html(i+":"+s);var l=Math.round(100*r/a);p.val(l),t.onTimeupdate&&t.onTimeupdate(n.currentTime)}}),i.addEventListener("ended",function(a){var n=e(a.target);n.val(100),e(l).html('<i class="fa fas fa-play"></i>'),d.html("00:00"),p.val(0),i.stopped=!0,i.currentTime=0}),p.on("mousedown",function(a){o=!0}),p.on("mouseup",function(a){o=!1}),p.on("change",function(n){var t=n.target,r=Math.floor(.01*e(t).val()*a),o=Math.floor(r/60)+"",s=r-60*o+"";o.length<2&&(o="0"+o),s.length<2&&(s="0"+s),d.html(o+":"+s),0==r&&d.html("00:00"),i.currentTime=r}),u.append(l),u.append(p),u.append(d),u.append(s),t.accordion&&t.accordion.on("click",function(a){i.pause(),e(l).html('<i class="fa fas fa-play"></i>')})}),this.prepend(u)},e.fn.snpt_narracio=function(a){var n=this,t=n.parent(),r="";t&&(t=t.parent(),t&&(r=t.attr("data-lang")));var o=n.find("a.accordion-toggle");o&&("ca"==r?o.append(e('<span title="Explicació en àudio"> narrada </span>')):"es"==r?o.append(e('<span title="Explicación con audio"> narrada </span>')):"en"==r&&o.append(e('<span title="Explanation with audio"> with audio </span>')),o.append(e('<i class="fa fas fa-headphones"></i>')));var i=n.find(".accordion-inner"),s=n.attr("data-audible"),p=s,d=[];if(p.startsWith("http"))for(var l=p.split(","),u=0,c=l.length;c>u;u++)d.push(l[u].trim());else p="https://piworld.es/iedib/audible/"+s,d.push(p+".m4a"),d.push(p+".mp3");var f=n.find("[data-from]"),h=n.find("[data-laser]"),x=n.find("[data-pen]");f.each(function(a,n){var t=e(n).attr("data-from");n.fromTime=t}),h.each(function(a,n){var t=e(n).attr("data-laser");n.lasers=[];for(var r=t.split("|"),o=0,i=r.length;i>o;o++){var s=r[o],p=s.split(",");if(p.length>=2){var d=0,l=0,u="md";d=parseInt(p[0]),l=parseInt(p[1]),p.length>2&&(u=(p[2]||"md").trim().toLowerCase()),n.lasers.push({start:d,end:l,pos:u})}else console.error("Invalid laser ",s)}}),x.each(function(a,n){var t=e(n).attr("data-pen");n.pen=[];for(var r=t.split("|"),o=0,i=r.length;i>o;o++){var s=r[o],p=s.split(",");if(3===p.length){var d=0,l=0,u={};d=parseInt(p[0]),l=parseInt(p[1]);for(var c=p[2].split(";"),a=0,f=c.length;f>a;a++){var h=c[a],x=h.split(":");if(2==x.length){var b=x[0].trim(),v=x[1].trim();u[b]=v}}n.pen.push({start:d,end:l,opts:u})}else console.error("Invalid penmarker ",s)}});var b=function(a){if(0==a)return f.fadeTo("fast",1),h.removeClass("pw-laser-md").removeClass("pw-laser-nw").removeClass("pw-laser-ne").removeClass("pw-laser-sw").removeClass("pw-laser-se"),void x.each(function(a,n){var t=e(n);t.snpt_erasepen()});for(var n=0,t=f.length;t>n;n++){var r=f[n];r.fromTime>a?e(r).fadeTo("fast",0):e(r).fadeTo("fast",1)}for(var n=0,t=h.length;t>n;n++){for(var r=h[n],o=null,i=0,s=r.lasers.length;s>i;i++){var p=r.lasers[i];if(p.start<=a&&a<=p.end){o=p.pos;break}}o?e(r).addClass("pw-laser-"+o):e(r).removeClass("pw-laser-md").removeClass("pw-laser-nw").removeClass("pw-laser-ne").removeClass("pw-laser-sw").removeClass("pw-laser-se")}for(var n=0,t=x.length;t>n;n++){var r=x[n],d=e(r);d.each(function(a,n){var t=e(n);t.snpt_erasepen()});for(var i=0,s=r.pen.length;s>i;i++){var p=r.pen[i];if(p.start<=a&&a<=p.end){var l=p.opts;l&&d.snpt_overlaypen(l)}}}},v=function(){f.fadeTo("fast",1)};i.snpt_player({id:s,src:d,onTimeupdate:b,onStop:v,accordion:o})}},r=function(a,e){return e=e||0,window.require&&"function"==typeof window.require?void a():e>15?void console.error("Talea:: Cannot find requirejs"):void window.setTimeout(function(){r(a,e+1)},500)};r(function(){require(["jquery"],function(a){a(function(){t(a),a('[role="snptd_narracio"]').each(function(e,n){a(n).snpt_narracio()})})})})}(); 
!function(){var t="presentacio";if(window.IB.sd[t])return console.error("Warning: "+t+" loaded twice."),void(window.IB.sd[t].bind&&window.IB.sd[t].bind());var i=5,n='<i class="fa fas fa-play"></i>',e='<i class="fa fas fa-pause"></i>',s=function(t){var e=this,s=t.dataset;this.loop="1"==s.loop||"true"==s.loop;for(var a=t.querySelectorAll("ul.nav.nav-tabs > li > a"),o=0,r=a.length;r>o;o++)a[o].innerHTML="&nbsp; "+(o+1)+"/"+r;if(this.container=t,this.container.style.overflow="hidden",this.button_container=document.createElement("div"),this.button_container.className="box_botons",t.append(this.button_container),this.diapositives=t.querySelectorAll("div.tab-content > div.tab-pane"),this.num=this.diapositives.length,this.n=0,s.start)try{this.n=(parseInt(s.start)-1)%this.num}catch(u){console.error(u)}for(var h="fade"==s.transition,o=0;o<this.num;o++)this.diapositives[o].dataset.label=o+1+"/"+this.num,this.diapositives[o].classList.remove("iedib-tabpane"),h&&this.diapositives[o].classList.add("fade"),o==this.n?this.diapositives[o].classList.add("active"):this.diapositives[o].classList.remove("active");var c=(s.durades||"0").trim();this.continuarAutomatic="0"!=c;var d=c.split(",");if(1==d.length)try{i=parseInt(d[0])}catch(u){console.error(u)}this.durada=[];for(var l=d.length,p=0;p<this.num;p++){var v=i;if(p>=l)this.durada.push(v);else try{v=parseInt(d[p]),null!=v&&this.durada.push(v)}catch(u){console.error(u)}}this._crearBotons(),this._carregaListeners();var m=s.autostart;"1"!=s.loop&&"true"!=s.loop&&(m="0"),"1"==m||"true"==m?this.continuarAutomatic&&this.n<this.num&&(this._updateCounter(),this.currentTimeout=setTimeout(function(){e.seguent()},1e3*this.durada[this.n])):this.continuarAutomatic?(this.continuarAutomatic=!1,this.buttonPlay&&(this.buttonPlay.innerHTML=n),this._updateCounter()):this._updateCounter()};s.prototype._eliminarActive=function(){for(var t=0;t<this.num;t++)this.diapositives[t].classList.remove("active")},s.prototype._updateCounter=function(){if(this.boxComptador.innerHTML="&nbsp;&nbsp;&nbsp;&nbsp; "+(this.n+1)+" / "+this.num,this.currentTimeout&&(clearInterval(this.currentTimeout),this.currentTimeout=null),this.continuarAutomatic){if(!this.loop&&this.n==this.num-1)return this.continuarAutomatic=!1,void(this.buttonPlay&&(this.buttonPlay.innerHTML=n));var t=this;this.currentTimeout=setTimeout(function(){t.seguent()},1e3*this.durada[this.n]),this.buttonPlay&&(this.buttonPlay.innerHTML=e)}else this.buttonPlay&&(this.buttonPlay.innerHTML=n)},s.prototype.seguent=function(){if(this.n>=this.num-1){if(!this.loop)return;this.n=-1}this._eliminarActive(),this.n+=1,this.diapositives[this.n].classList.add("active"),this._updateCounter()},s.prototype.anterior=function(){if(0==this.n){if(!this.loop)return;this.n=this.num}this._eliminarActive(),this.n-=1,this.diapositives[this.n].classList.add("active"),this._updateCounter()},s.prototype.primer=function(){this._eliminarActive(),this.n=0,this.diapositives[this.n].classList.add("active"),this.continuarAutomatic=!1,this._updateCounter()},s.prototype.darrer=function(){this._eliminarActive(),this.n=this.num-1,this.diapositives[this.n].classList.add("active"),this.continuarAutomatic=!1,this._updateCounter()},s.prototype.pausa=function(){this.continuarAutomatic=!1,null!=this.currentTimeout&&(clearTimeout(this.currentTimeout),this.currentTimeout=null),this.buttonPlay.innerHTML=n},s.prototype.play=function(){var t=this;this.n>=this.num-1&&this.primer(),this.continuarAutomatic=!0,this.currentTimeout=setTimeout(function(){t.seguent()},1e3*this.durada[this.n]),this.buttonPlay.innerHTML=e},s.prototype._carregaListeners=function(){var t=this;this.evListener1=this.buttonFirst.addEventListener("click",function(i){t.primer()}),this.evListener2=this.buttonLast.addEventListener("click",function(i){t.darrer()}),this.evListener3=this.buttonNext.addEventListener("click",function(i){t.seguent()}),this.evListener4=this.buttonBack.addEventListener("click",function(i){t.anterior()}),t.continuarAutomatic&&(this.evListener5=this.buttonPlay.addEventListener("click",function(i){t.continuarAutomatic?t.pausa():t.play()}))},s.prototype.dispose=function(){this.currentTimeout&&window.clearTimeout(this.currentTimeout),this.evListener1&&window.removeEventListener("click",this.evListener1),this.evListener2&&window.removeEventListener("click",this.evListener2),this.evListener3&&window.removeEventListener("click",this.evListener3),this.evListener4&&window.removeEventListener("click",this.evListener4),this.evListener5&&window.removeEventListener("click",this.evListener5),this.container.dataset.active="0",this.container.remove(this.button_container)};var a=function(t,i){var n=document.createElement("button");n.className=t;var e=document.createElement("i");return e.className=i,n.appendChild(e),n};s.prototype._crearBotons=function(){this.buttonFirst=a("btn btn-sm btn-outline-primary btn-first","fa fas fa-fast-backward"),this.button_container.appendChild(this.buttonFirst),this.buttonFirst.title="First",this.buttonBack=a("btn btn-sm btn-outline-primary btn-step-backward","fa fas fa-chevron-left"),this.button_container.appendChild(this.buttonBack),this.buttonBack.title="Previous",this.buttonNext=a("btn btn-sm btn-outline-primary btn-step-forward","fa fas fa-chevron-right"),this.button_container.appendChild(this.buttonNext),this.buttonNext.title="Next",this.buttonLast=a("btn btn-sm btn-outline-primary btn-last","fa fas fa-fast-forward"),this.buttonLast.title="Last",this.button_container.appendChild(this.buttonLast),this.continuarAutomatic&&(this.buttonPlay=a("btn btn-sm btn-primary btn-step-play","fa fas fa-pause"),this.buttonPlay.style["margin-left"]="15px",this.buttonPlay.title="Play/Pause",this.button_container.appendChild(this.buttonPlay)),this.boxComptador=document.createElement("div"),this.boxComptador.className="box_comptador",this.button_container.appendChild(this.boxComptador)};var o={author:"Tomeu Fiol, Josep Mulet",version:"1.6",inst:{}};window.IB.sd[t]=o;var r=function(){for(var i=document.querySelectorAll('div[role="snptd_presentacio"]'),n=0,e=i.length;e>n;n++){var a=i[n];if(!a.dataset.active){a.dataset.active="1";var o=new s(a),r=a.getAttribute("id");r||(r="dynamic_"+Math.random().toString(32).substring(2),a.id=r),window.IB.sd[t].inst[r]=o}}};o.bind=r,o.unbind=function(){for(var t=Object.values(o.inst),i=0,n=t.length;n>i;i++)t[i].dispose();o.inst={}},r()}(); 
!function(){var n="programacio",e="xcode",i="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/styles/"+e+".min.css",t="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/highlight.min.js",l="https://cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js",s=function(n,e){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.href=n,e&&(i.id=e),document.getElementsByTagName("head")[0].appendChild(i)},h=function(n,e,i){var t=document.createElement("script");t.src=n,t.async=!1,e&&(t.id=e),i&&(t.onload=function(){i()}),document.getElementsByTagName("head")[0].appendChild(t)},a=function(){var n=function(){o()},e=function(){h(l,"highlight-numbering.min",n)};h(t,"highlight.min",e)},o=function(){if(window.hljs&&!hljs.highlightElement)return void console.error("ERROR> S'ha detectat una versió antiga de hljs a la pàgina que impedeix que es carregui la nova. Eliminau l'script manualment.");for(var n=document.querySelectorAll("pre code"),e=0,i=n.length;i>e;e++){var t=n[e];t.style.padding="initial",hljs&&!t.classList.contains("nohighlight")&&(hljs.highlightElement(t),hljs.lineNumbersBlock&&!t.classList.contains("nohljsln")&&hljs.lineNumbersBlock(t,{singleLine:!0}))}};document.querySelector("#hljs_styles")||s(i,"hljs_styles");var c={author:"Josep Mulet",version:"1.0",inst:{}};window.IB.sd[n]=c;var r=function(){window.hljs?o():a()};c.bind=r,c.unbind=function(){c.inst={}},r()}(); 
!function(){"use strict";function e(e){e%=2147483647;var t=function(){return e=16807*e%2147483647,(e-1)/2147483646};return t(),t(),t(),t}var t="talea";if(window.IB.sd[t])return console.error("Warning: "+t+" loaded twice."),void(window.IB.sd[t].bind&&window.IB.sd[t].bind());var i=function(e){for(var t={},i=e.substring(1).split("&"),n=0;n<i.length;n++){var s=i[n].split("=");s[0]&&(t[s[0]]=s[1]||!0)}return t},n=function(){if(!document.querySelector)return{};var e=null,t=null,n=document.querySelector("[data-userid]");n&&(e=n.getAttribute("data-userid"));var s=document.getElementsByClassName("usertext");if(s&&s.length)t=s[0].innerText;else{var r=document.querySelector("div.logininfo > a");r&&(t=r.innerText)}e||(e=1,t="Usuari convidat");var o=null!=document.querySelector('.usermenu li a[href*="switchrole"]')?1:0;o||(o=null!=document.querySelector(".teacherdash.nav-item.nav-link")?1:0);var a=null,d=null,l=document.querySelector(".homelink > a");if(l){d=l.innerText;var u="?"+(l.href.split("?")[1]||"");a=i(u).id}else{window.M&&M.cfg&&(a=M.cfg.courseId);var c=document.querySelector("#page-navbar ol > li:first-child > a");c?d=c.innerText:console.error("Cannot find footer in document")}var h=(location.href.split("?")[0]||"").replace("/mod/book/view.php","");return{userId:e,userFullname:t,isTeacher:o,site:h,courseName:d,courseId:a}},s=function(e,t){if(!t||!document.getElementById(t)){var i=document.createElement("style");i.type="text/css",i.innerHTML=e,t&&(i.id=t),document.getElementsByTagName("head")[0].appendChild(i)}};s("@media print and (color) {.pw-tasca-solucio, .pw-tasca-nprt {display:none!important;}}","pw-microtasca");var r=function(e){var t=this;if(this.pi=n(),this.pi.isTeacher&&e.dataset.debug){for(var i=JSON.parse(e.dataset.debug),s=Object.keys(i),r=0,a=s.length;a>r;r++){var d=s[r];this.pi[d]=i[d]}console.log(this.pi);var l=document.createElement("div");l.innerHTML="<p>DEBUG INFO::<br>  "+JSON.stringify(this.pi)+"</p>",e.append(l)}this.pi.userId>0&&$.ajax({method:"POST",url:"https://piworld.es/iedibapi/p1/users/create",data:t.pi,dataType:"json"}).done(function(e){console.log(e)}),this.container=e;var u=this.container.dataset;this.seed=parseInt(u.seed||"1")||1;var c=JSON.parse(u.different||"[]");this.workingMode=u.mode||"urandom";var h=e.querySelectorAll("div.iedib-tabmenu:not(.talea-skip)");this.smartMenus=[];for(var r=0,a=h.length;a>r;r++)this.smartMenus.push(new o(h[r],this.pi,c,this.workingMode,this.seed));var p=document.createElement("p");p.id="talea-name",p.style["font-weight"]="bold",p.innerText="Tasca de "+(this.pi.userFullname||"???"),this.container.prepend(p),this.pi.isTeacher?this.setupTeacher():this.showUser(this.pi.userId)};r.prototype.showUser=function(t){t=parseInt(t||"0"),this.pi.isTeacher&&this.mapStudents&&this.mapStudents[t]&&(document.querySelector("#talea-name").innerText="Tasca de "+this.mapStudents[t]);var i=null;"urandom"===this.workingMode?i=e(t*this.seed):"lrandom"===this.workingMode&&(i=e(this.seed));for(var n=0,s=this.smartMenus.length;s>n;n++)this.smartMenus[n].showUser(i,t)},r.prototype.clear=function(){this.pi.isTeacher&&$("#talea-name").text("Sense filtre");for(var e=0,t=this.smartMenus.length;t>e;e++)this.smartMenus[e].clear()},r.prototype.dispose=function(){this.clear()},r.prototype.setupTeacher=function(){var e=this,t=document.createElement("div");t.id="talea-controls",this.container.prepend(t);var i='<input type="text" class="form-control" placeholder="Nom o id de l\'estudiant..." list="list_controls_userid" id="controls_userid"><br>';i+='<datalist id="list_controls_userid">',i+='<option value="-1">Sense filtre</option>',i+="</datalist>",t.innerHTML=i;var n=t.querySelector("#controls_userid");n&&n.addEventListener("change",function(t){var i=parseInt(n.value||"0");0>i?e.clear():e.showUser(i,n.innerText)})};var o=function(e,t,i,n,s){this.pi=t,this.forceDifferent=i||[],this.workingMode=n||"urandom",this.seed=s||1,e.style.border="none",this.theTabMenu=e.querySelector("ul.nav.nav-tabs"),this.theLinks=this.theTabMenu.querySelector("li"),this.theContentOpts=e.querySelectorAll("div.tab-content > div"),this.numOpts=this.theContentOpts.length,0===this.numOpts&&(console.error("ERROR: theContentOpts is Empty!"),this.numOpts=1)};o.prototype.showUser=function(e,t){this.pi.isTeacher?this.theTabMenu.style.display="none":this.theTabMenu.remove();for(var i=-1,n=0,s=this.forceDifferent.length;s>n;n++){for(var r=this.forceDifferent[n],o=0,a=r.length;a>o;o++)if(r[o]==t){i=o;break}if(i>=0)break}var d=0;if("urandom"===this.workingMode||"lrandom"===this.workingMode)d=i>=0?i%this.numOpts:Math.floor(e()*this.numOpts);else if(this.workingMode.startsWith("fixed")){if(this.workingMode.indexOf(":")>0){var l=this.workingMode.split(":")[1].trim();l&&(d=parseInt(l)||0)}}else console.error("ERROR: Unknown working mode ",this.workingMode,", choosing first element");for(var n=0,s=this.theContentOpts.length;s>n;n++){var u=this.theContentOpts[n],c=this.theLinks[n];n==d?(u.classList.add("active"),u.style.display="",c&&c.classList.add("active")):(u.classList.remove("active"),this.pi.isTeacher?u.style.display="none":u.remove(),c&&c.classList.remove("active"))}},o.prototype.clear=function(){this.theTabMenu.style.display="";for(var e=0,t=0,i=this.theContentOpts.length;i>t;t++){var n=this.theContentOpts[t],s=this.theLinks[t];n.style.display="",t==e?(n.classList.add("active"),s&&(s.style.display="",s.classList.add("active"))):(n.classList.remove("active"),s&&(s.style.display="",s.classList.remove("active")))}},o.prototype.dispose=function(){this.clear()};var a={author:"Josep Mulet",version:"2.0",inst:{}};window.IB.sd[t]=a;var d=function(){for(var e=document.querySelectorAll('div[role="snptd_'+t+'"]'),i=0,n=e.length;n>i;i++){var s=e[i];if(!s.dataset.active){s.dataset.active="1";var o=new r(s),a=s.getAttribute("id");a||(a="dynamic_"+Math.random().toString(32).substring(2),s.id=a),o.pi.isTeacher&&(window.IB.sd[t].inst[a]=o,$.ajax({method:"POST",url:"https://piworld.es/iedibapi/p1/users/list",data:o.pi,dataType:"json"}).done(function(e){var t=$("#list_controls_userid");o.mapStudents={},o.mapStudents[-1]="Sense filtre";for(var i=0,n=e.length;n>i;i++){var s=e[i],r=parseInt(s.userid||"0");o.mapStudents[r]=s.userfullname,t.append($('<option value="'+s.userid+'">'+s.userfullname+"</option>"))}}))}}};a.bind=d,a.unbind=function(){for(var e=Object.values(a.inst),t=0,i=e.length;i>t;t++)e[t].dispose();a.inst={}};var l=function(e,t){return t=t||0,window.require&&"function"==typeof window.require?void e():t>15?void console.error("Talea:: Cannot find requirejs"):void window.setTimeout(function(){l(e,t+1)},500)};l(function(){require(["jquery"],function(e){e(function(){d()})})})}();