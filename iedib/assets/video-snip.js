window.IB=window.IB||{},window.IB.sd=window.IB.sd||{},(()=>{var e;document.getElementById("sd_css_vnotify.js")||((e=document.createElement("style")).type="text/css",e.innerHTML=".vnotify-container {  position: fixed; }  .vnotify-container.vn-top-right {   right: 10px;   top: 10px; }  .vnotify-container.vn-top-left {   top: 10px;   left: 10px; }  .vnotify-container.vn-bottom-right {   bottom: 10px;   right: 10px; }  .vnotify-container.vn-bottom-left {   bottom: 10px;   left: 10px; }  .vnotify-container.vn-center {   top: 50%;   left: 50%;   transform: translate(-50%, -50%); }  .vnotify-container .vn-close {   position: absolute;   top: 5px;   right: 10px;   width: 15px;   height: 15px;   padding: 2px;   cursor: pointer; }   .vnotify-container .vn-close:before, .vnotify-container .vn-close:after {    content: '';    position: absolute;    width: 100%;    top: 50%;    height: 2px;    background: #fff; }   .vnotify-container .vn-close:before {    -webkit-transform: rotate(45deg);    -moz-transform: rotate(45deg);    transform: rotate(45deg); }   .vnotify-container .vn-close:after {    -webkit-transform: rotate(-45deg);    -moz-transform: rotate(-45deg);    transform: rotate(-45deg); } .vnotify-item {  width: 20em;  padding: 15px;  position: relative;  -webkit-border-radius: 5px;  -moz-border-radius: 5px;  -ms-border-radius: 5px;  border-radius: 5px;  margin-bottom: 15px;  opacity: 0.75;  -ms-filter: \"progid:DXImageTransform.Microsoft.Alpha(Opacity=75)\";  filter: alpha(opacity=75); }  .vnotify-item:hover {   opacity: 1; } .vnotify-title {  font-weight: bold; } .vnotify-info {  background: #3498db;  color: #fff; } .vnotify-success {  background: #2ecc71;  color: #fff; } .vnotify-error {  background: #e74c3c;  color: #fff; } .vnotify-warning {  background: #f39c12;  color: #fff; } .vnotify-notify {  background: #333;  color: #fff; } ",e.id="sd_css_vnotify.js",document.getElementsByTagName("head")[0].appendChild(e))})(),(()=>{function t(e){var t=JSON.parse(JSON.stringify(d));if(e&&"object"==typeof e)for(var i=Object.keys(e),n=0,o=i.length;n<o;n++){var a=i[n];t[a]=e[a]}return t}function i(e){var t,i,n;return e.title||e.text?(t=document.createDocumentFragment(),(i=document.createElement("div")).classList.add("vnotify-item"),i.classList.add(e.notifyClass),i.style.opacity=0,i.options=u(e),e.title&&i.appendChild(a(e.title)),e.text&&i.appendChild(o(e.text)),i.options.showClose&&i.appendChild(r(i)),i.visibleDuration=i.options.visibleDuration,n=function(){i.fadeInterval=f("out",i.options.fadeOutDuration,i)},e=function(){i.interval=setTimeout(n,i.visibleDuration)},t.appendChild(i),s(i.options.position).appendChild(t),i.addEventListener("mouseover",function(){clearTimeout(i.interval),clearTimeout(i.fadeInterval),i.style.opacity=null,i.visibleDuration=i.options.postHoverVisibleDuration}),f("in",i.options.fadeInDuration,i),i.options.sticky||(i.addEventListener("mouseout",e),e()),i):null}var n={topLeft:"topLeft",topRight:"topRight",bottomLeft:"bottomLeft",bottomRight:"bottomRight",center:"center"},d={fadeInDuration:1e3,fadeOutDuration:1e3,fadeInterval:50,visibleDuration:5e3,postHoverVisibleDuration:500,position:n.topRight,sticky:!1,showClose:!0},o=function(e){var t=document.createElement("div");return t.classList.add("vnotify-text"),t.innerHTML=e,t},a=function(e){var t=document.createElement("div");return t.classList.add("vnotify-title"),t.innerHTML=e,t},r=function(e){var t=document.createElement("span");return t.classList.add("vn-close"),t.addEventListener("click",function(){p(e)}),t},s=function(e){var e=c(e),t=document.querySelector("."+e);return t||l(e)},l=function(e){var t=document.createDocumentFragment();return(container=document.createElement("div")).classList.add("vnotify-container"),container.classList.add(e),container.setAttribute("role","alert"),t.appendChild(container),document.body.appendChild(t),container},c=function(e){switch(e){case n.topLeft:return"vn-top-left";case n.bottomRight:return"vn-bottom-right";case n.bottomLeft:return"vn-bottom-left";case n.center:return"vn-center";default:return"vn-top-right"}},u=function(e){return{fadeInDuration:e.fadeInDuration||d.fadeInDuration,fadeOutDuration:e.fadeOutDuration||d.fadeOutDuration,fadeInterval:e.fadeInterval||d.fadeInterval,visibleDuration:e.visibleDuration||d.visibleDuration,postHoverVisibleDuration:e.postHoverVisibleDuration||d.postHoverVisibleDuration,position:e.position||d.position,sticky:(null!=e.sticky?e:d).sticky,showClose:(null!=e.showClose?e:d).showClose}},p=function(e){e.style.display="none",e.outerHTML=""},f=function(e,t,i){var n="in"===e,o=n?0:i.style.opacity||1,a=n?.8:0,r=d.fadeInterval/t,s=(n&&(i.style.display="block",i.style.opacity=o),window.setInterval(function(){o=n?o+r:o-r,(i.style.opacity=o)<=0&&(p(i),m()),(!n&&o<=a||n&&a<=o)&&window.clearInterval(s)},d.fadeInterval));return s},m=function(){if(!document.querySelector(".vnotify-item"))for(var e=document.querySelectorAll(".vnotify-container"),t=0;t<e.length;t++)e[t].outerHTML="",e[t]=null};window.vNotify={info:function(e){return(e=t(e)).notifyClass="vnotify-info",i(e)},success:function(e){return(e=t(e)).notifyClass="vnotify-success",i(e)},error:function(e){return(e=t(e)).notifyClass="vnotify-error",i(e)},warning:function(e){return(e=t(e)).notifyClass="vnotify-warning",i(e)},notify:function(e){return(e=t(e)).notifyClass="vnotify-notify",i(e)},custom:function(e){return e=t(e),i(e)},setOption:function(e,t){d[e]=t}}})(),window.require(["jquery","core/modal_factory","core/modal_events"],function($,d,l){var f,m,v,s=iedibAPI.isBoost(),g={},o=!0,h={},c={},u=1,p=15,n=4,b=30,y=!0,x="https://videotracker.ibsuite.es/iedibapi",I=!1,w=function(e){return e.tz=(new Date).getTime(),encodeURI(window.btoa(JSON.stringify(e)))},D=function(e,t){function i(){o=new Date,n=window.setTimeout(function(){a=t,window.clearTimeout(n),i(),e()},a)}var n,o,a=t;this.pause=function(){window.clearTimeout(n),a-=new Date-o,n=null},this.paused=function(){return null===n};this.resume=i},a=function(e){if(!e)return"";if("object"!=typeof e)return e;for(var t=Object.keys(e),i="",n=0,o=t.length;n<o;n++)i+=e[t[n]]+" ";return i},T=function(e){var t,i;I&&(t=e.duration/2,i=Math.round(Math.random())+1,e.dman=2==i?[Math.random()*t,t+Math.random()*t]:[Math.random()*t])},k=function(e){for(var t=null,i=0,n=Object.keys(g);!t&&i<n.length;)g[n[i]].videoId==e&&(t=g[n[i]]),i++;return t},S=function(e,t,i){var n,o,a=e.fstars,r=(o=s?(o='<span><i class="fa fa-star-o far fa-star" style="color: #e09100;"></i></span>',r='<span><i class="fa fas fa-star-half-alt" style="color: #e09100;"></i></span>',n='<span><i class="fa fas fa-star" style="color: #e09100;"></i></span>',a<=.1?o+o+o:.1<a&&a<=.2?r+o+o:.2<a&&a<=.4?n+o+o:.4<a&&a<=.6?n+r+o:.6<a&&a<=.7?n+n+o:.7<a&&a<=.9?n+n+r:n+n+n):a<=.2?'<img src="https://ibsuite.es/iedib/img/star-empty.png"><img src="https://ibsuite.es/iedib/img/star-empty.png"><img src="https://ibsuite.es/iedib/img/star-empty.png">':.2<a&&a<=.6?'<img src="https://ibsuite.es/iedib/img/star.png"><img src="https://ibsuite.es/iedib/img/star-empty.png"><img src="https://ibsuite.es/iedib/img/star-empty.png">':.6<a&&a<=.8?'<img src="https://ibsuite.es/iedib/img/star.png"><img src="https://ibsuite.es/iedib/img/star.png"><img src="https://ibsuite.es/iedib/img/star-empty.png">':'<img src="https://ibsuite.es/iedib/img/star.png"><img src="https://ibsuite.es/iedib/img/star.png"><img src="https://ibsuite.es/iedib/img/star.png">',Math.floor(100*e.fvis));t.css("background","linear-gradient(90deg, #ffca8e 0%, #ffca8e "+(r=100<r?100:r)+"%, #FFFFFF "+r+"%, #FFFFFF 100%)"),t.html(o=i&&y&&x?'<a href="'+x+"/vw_vb?erq="+i+'" target="_blank">'+o+"</a>":o),t.attr("title","Visualitzat "+r.toFixed(0)+"%")},_=function(e){return"rgb(10,"+Math.floor(245*e+10)+",10)"},z=function(e,t,i){for(var n=[],o=t/10,a=0,r=0;r<e.length;r++){a+=e[r];var s=_(0<o?e[r]/o:0);n.push('<span style="width:10px;height:15px;display:table-cell;border:1px solid gray;background:'+s+'"></span>')}i.html(n.join(""));var d=Math.round(100*a/(.98*t)).toFixed(0);100<d&&(d=100),0<t&&i.attr("title","Visualitzat "+d+"%")},r=function(){window.vNotify.error({title:":-( Error registre de vídeos",text:"No funciona la connexió."});var e=$(".iedib-caption-progress");e.css("color","red"),e.attr("title","El registre de vídeos no funciona en aquests moments. No podreu obtenir punts fins que no s'activi.")},A=function(){if(window.fullScreen)try{document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}catch(e){}},N=function(n,e,t){var o=n.t0;if(n.info.maxtime<e&&(n.info.maxtime=e),Math.abs(e-o)>3*u)n.t0=e;else if(Math.abs(e-o)<.5*u)n.player&&Math.abs(e-o)<.001&&(n.timer.pause(),n.player.pause)&&n.player.pause(),n.t0=e-1;else{var a=.1*n.duration;if(o<=a?n.info.s1+=u:a<o&&o<=2*a?n.info.s2+=u:2*a<o&&o<=3*a?n.info.s3+=u:3*a<o&&o<=4*a?n.info.s4+=u:4*a<o&&o<=5*a?n.info.s5+=u:5*a<o&&o<=6*a?n.info.s6+=u:6*a<o&&o<=7*a?n.info.s7+=u:7*a<o&&o<=8*a?n.info.s8+=u:8*a<o&&o<=9*a?n.info.s9+=u:n.info.s10+=u,!t){if(n.dman&&I){var r,s=!1;for(i=0;i<n.dman.length;i++)if(o<=n.dman[i]&&n.dman[i]<=e){s=!0;break}s&&(T(n),n.player.pauseVideo(),r=new Date,A(),d.create({title:"Estàs seguint el vídeo?",body:"<p>Clica sobre la pantalla per continuar la visualització. Si trigues més de "+b+" segons en fer-ho, perdràs els punts de visualització d'aquest vídeo.</p>"}).then(function(t){t.show(),t.getRoot().on(l.hidden,function(){t.destroy();var e=(new Date).getTime()-r.getTime();1e3*b<e?(t.hide(),confirm&&confirm(":-( Ho sentim. Massa tard. Cal que estiguis atent si no vols perdre punts de les visualitzacions."),n.info.s1=0,n.info.s2=0,n.info.s3=0,n.info.s4=0,n.info.s5=0,n.info.s6=0,n.info.s7=0,n.info.s8=0,n.info.s9=0,n.info.s10=0,C(n),n.player.stopVideo()):n.player.playVideo()})}))}n.t0=e}}},P=function(e,t){(e.title_elem.text()||"").trim()||e.title_elem.text(": "+e.title);t={idSite:c.idSite,idSession:c.idSession,videoId:e.videoId,title:e.title,author:e.author||"Josep Mulet",duration:e.duration,type:e.type,assignNum:h.assignNum,assignName:h.assignName,bookId:h.bookId,chapterId:h.chapterId,courseId:h.courseId,courseName:h.courseName,userId:h.userId,userFullname:h.userFullname,isTeacher:h.isTeacher,site:h.site,jsession:h.moodleSession,maxscore:e.maxscore,score:0,anchorId:e.anchorId,counter:e.counter,maxtime:0,forceUpdate:t?e.info.idVideos:0};$.ajax({method:"POST",url:x+"/video/info",data:e.info=t,dataType:"json"}).done(function(e){var t,i,n;e.current?(t=k(e.current.videoId),e.current.maxscore=t.maxscore,i=t.progress_elem,t.info=e.current,t.info.idSite=c.idSite,t.info.idSession=c.idSession,t.info.bookId=h.bookId,t.info.chapterId=h.chapterId,t.info.userId=h.userId,t.info.assignNum=h.assignNum,t.info.chapterId||(t.info.chapterId=e.chapterId),window.btoa&&(n={s:c.idSite,u:h.userId,c:h.courseId,b:h.bookId,p:t.info.chapterId,v:e.current.videoId},t.erqPayload=w(n)),i&&S(e.global,i,t.erqPayload)):(r(),o=!1)}).fail(function(e){r(),o=!1}),e.progress_elem&&S({fstars:0,fvis:0},e.progress_elem)},C=function(t){if(o&&t.info){if(t.last_db_access){var e=(new Date).getTime();if(e-t.last_db_access<1e3*n)return;t.last_db_access=e}else t.last_db_access=(new Date).getTime();null!=t.info.s1&&$.ajax({method:"POST",url:x+"/video/update",data:t.info,dataType:"json"}).done(function(e){t.info.idVisualization=e.idVisualization||0,S(e,t.progress_elem,t.erqPayload)}).fail(function(e){r()})}},j=function(e){return e.getCurrentTime?e.getCurrentTime():e.playerInfo&&e.playerInfo.currentTime||0},E=function(e){if(this.contentId)i=g[this.contentId],n=f,o=m,a=v;else{var t=null;if(!(t=(e.target.getVideoData?e.target.getVideoData():e.target.playerInfo.videoData).video_id))return;var i=g[t],n=YT.PlayerState.PLAYING,o=YT.PlayerState.PAUSED,a=YT.PlayerState.ENDED}var r,s=i.player;switch(e.data){case n:i&&(i.info||M(e),i.info.duration||(r=0,s.getDuration?r=s.getDuration():s.playerInfo&&(r=Math.floor(s.playerInfo.duration||0)),i.info.duration),!i.played&&60<i.info.maxtime&&i.info.maxtime<i.info.duration-60&&i.player.seekTo&&i.player.seekTo(i.info.maxtime,!0),i.played=!0,i.initialized||(i.initialized=!0,C(i)),$.each(g,function(e,t){t.videoId!=i.videoId&&t.player.pauseVideo&&t.player.pauseVideo()}),i.timer||(i.t0=j(s),i.calls=0,i.timer=new D(function(){var e=j(s);N(i,e),i.calls>=p?(i.calls=0,C(i)):i.calls+=u},1e3*u)),i.timer.resume());break;case o:i&&i.timer&&i.timer.pause();var d=j(s);N(i,d,!0),C(i);break;case a:i&&i.timer&&i.timer.pause();d=j(s);N(i,d,!0),C(i),s.stopVideo&&s.stopVideo()}},F=function(e){var t="";if(null!=e)for(var i=Object.keys(e),n=0;n<i.length;n++)t+=e[i[n]]+" ";return t},V=function(e,t){for(var i=e.length,n=0,o="";n<i&&0==o.length;)e[n].id==t&&(o=a(e[n].description)),n+=1;return o},L=function(e,t,i,n){i=i||0;var o=null,a=null,r=null,s=null,d=null;try{null!=(a=e.contentWindow.document.getElementsByClassName("h5p-iframe")[0].contentWindow.H5P)?null!=(r=a.instances[0])?null!=(s=r.video)?(d=r.duration||s.getDuration())||(o="H5P.instances[0] does not have any duration"):o="H5P.instances[0] does not have video property":o="H5P.instances[0] does not exist":o="NO H5P found in iframe"}catch(e){o="H5P exception "+e}null==o?t&&t(e,a,r,s,d):n&&n<i||setTimeout(function(){L(e,t,i+1,n)},250*(i+1))},H=function(e,t,i,n,o){var e=$(e),a=e.parent(),r=(a.hasClass("h5p-placeholder")&&(a=a.parent()),t.Video||{ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3}),r=(f=f||r.PLAYING,m=m||r.PAUSED,v=v||r.ENDED,i.getXAPIData()),s=i.getMaxScore(),d=r.statement.object.id||"",l=(d=0<=d.indexOf("id=")?d.split("id=")[1]:0<=d.indexOf("url=")?(l=(d=decodeURIComponent(d.split("url=")[1])).split("/"))[l.length-1]:F(r.statement.object.definition.name),r.statement.object.definition.name||{"en-us":""}),r=F(l),l=((r||"").trim()||(r=a.find(".iedib-caption-counter").text()||""),$(a.find(".iedib-caption")[0])),c=$(l.find(".iedib-caption-title")[0]),u=$(l.find(".iedib-caption-progress")[0]),p=(u.css({display:"inline-table",height:"25px",width:"70px","font-size":"80%","border-top":"3px solid #e9b04f","border-bottom":"3px solid #e9b04f"}),g[n.contentId]={videoId:d,title:r+(" "+c.text()||"").trim(),duration:o,caption_elem:l,title_elem:c,progress_elem:u,maxscore:s,anchorId:a.attr("data-anchor-id")||"",counter:a.attr("data-counter")||100,ampliacio:a.attr("data-ampliacio")||0,player:n,type:"h5p"},P(g[n.contentId]),n.on("stateChange",E),g[n.contentId]);o||n.on("ready",function(){p.duration=i.duration||n.getDuration(),P(g[n.contentId],h.isTeacher)}),t.externalDispatcher.on("xAPI",function(e){var t=g[this.contentId],e=e.data;if("http://adlnet.gov/expapi/verbs/answered"==e.statement.verb.id&&e.statement.object.definition.correctResponsesPattern){var i=e.statement.object.definition.choices,n=e.statement.result.response,o=[];if((n=n&&"string"==typeof n?n.split("[,]"):n)&&Array.isArray(n))for(var a=0,r=n.length;a<r;a++)o.push(V(i,n[a]));var s=F(e.statement.object.definition.description),d=[],l=e.statement.object.definition.correctResponsesPattern;if(l)for(a=0,r=l.length;a<r;a++)for(var c=l[a].split("[,]"),u=0,p=c.length;u<p;u++)d.push(V(i,c[u]));var f=e.statement.result.success,m=0,e=(0<e.statement.result.score.raw&&(m=e.statement.result.score.raw,f?t.info.score+=e.statement.result.score.raw:t.info.score-=e.statement.result.score.raw/3,t.info.score<0?t.info.score=0:t.info.score>t.info.maxscore&&(t.info.score=t.info.maxscore)),null);s&&null!=f?(e={xapi_formulation:s,xapi_answer_correct:d.join("; "),xapi_answer:o.join("; "),xapi_correct:f?"S":"N",xapi_scoreraw:m},$.extend(e,t.info)):e=t.info,$.ajax({method:"POST",url:x+"/video/update",data:e,dataType:"json"}).done(function(e){S(e,t.progress_elem,t.erqPayload)})}}),e.attr("data-vsnip","true")},M=function(e){var t,i=null;(i=e.target.getVideoData?e.target.getVideoData():e.target.playerInfo.videoData)&&((t=g[i.video_id]).duration=0,e.target.getDuration?t.duration=e.target.getDuration():t.duration=Math.floor(e.target.playerInfo.duration||0),t.author=i.author,t.title=i.title,P(t),T(t))},O=function(e){var t,i,n,o,a,r,e=$(e),s=e.parent();e.hasClass("pw-yt-video-handled")||s.hasClass("iedib-no-tracking")||(t=s.attr("data-anchor-id"),i=s.attr("data-counter"),s=s.attr("data-ampliacio"),n=e.attr("id").replace("pwVideoId_","").split("?")[0],a=$(e.parent().parent().find(".iedib-caption")[0]),r=$(a.find(".iedib-caption-title")[0]),(o=$(a.find(".iedib-caption-progress")[0])).css({display:"inline-table",height:"25px",width:"70px","font-size":"80%","border-top":"3px solid #e9b04f","border-bottom":"3px solid #e9b04f"}),g[n]={type:"yt",videoId:n,name:"",duration:0,caption_elem:a,title_elem:r,progress_elem:o,maxscore:0,anchorId:t,counter:i,ampliacio:s},a=e.attr("id"),r=new YT.Player(a,{videoId:n,events:{onReady:M,onStateChange:E}}),g[n].player=r,e.addClass("pw-yt-video-handled"))},q=function(e){return e?(e=new Date(e)).getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear():"Mai"},R=function(e){var e=e.currentTarget.dataset.videoid,a=null,t=(window.btoa&&(a={s:c.idSite,u:h.userId,c:h.courseId,b:h.bookId},a=w(a)),$("#iedib-report-div"));$.ajax({method:"POST",url:x+"/video/report",data:{isTeacher:h.isTeacher,courseId:h.courseId,bookId:h.bookId,site:h.site,videoId:e,userId:h.userId,idSite:c.idSite,idSession:c.idSession},dataType:"json"}).done(function(e){var o;e.length?(o=$("<ol></ol>"),$.each(e,function(e,t){var i=$("<li></li>"),n=$('<p style="display:inline; margin: 0 10px; font-size: 110%;"></p>'),n=(S(t,n,a),i.append(n),$('<p style="display:inline-table; margin:0 8px; position:relative; border:1px solid gray;"></p>'));z(t.segments,t.duration,n),i.append(n),i.append('<span style="font-size:80%; padding: 0 10px" title="Primer accés">'+q(t.first_access)+"</span>"),i.append($("<span>"+t.fullName+"</span>")),o.append(i)}),t.html(""),t.append(o)):t.html("<i>No hi ha dades</i><br>")}).fail(function(e){t.html("<i>S'ha produït un error. No hi ha dades</i><br>")})};$(document).ready(function(){var t,e;0<(h=iedibAPI.getPageInfo()).userId&&(t=function(){var e,t,i,l;t=$("div.iedib-videoWrapper > iframe.pw-yt-video"),(i=t.length)&&(window.YT?$.each(t,function(e,t){O(t)}):(window.onYouTubeIframeAPIReady=function(){$.each(t,function(e,t){O(t)})},(i=document.createElement("script")).src="https://www.youtube.com/iframe_api",(e=document.getElementsByTagName("script")[0]).parentNode.insertBefore(i,e))),(()=>{for(var e=$("div.iedib-video-container  iframe"),t=(e.length,0),i=e.length;t<i;t++){var n=e[t],o=$(n);if("true"!=o.attr("data-vsnip")){if(o.parent().hasClass("iedib-no-tracking"))return;L(n,H,0)}}})(),(l=$("#video-completion-progress")).length&&(i=$.extend({idSite:c.idSite,idSession:c.idSession,idVideo:h.idVideo},h),$.ajax({method:"POST",url:x+"/video/progress",data:i,dataType:"json"}).done(function(e){if(Array.isArray(e)&&e.length){l.css({padding:"10px",margin:"25px auto",width:"85%",border:"1px solid #e3e3e3","border-radius":"4px","background-color":"#f5f5f5"});var t=y&&window.btoa,i='<h4 style="text-transform: uppercase; color: gray; font-size: 1.1em;margin-top:5px;">',n=(t&&(n={s:c.idSite,u:h.userId,c:h.courseId,b:h.bookId},n=w(n),i+='<a href="'+x+"/vw_bk?erq="+n+'" target="_blank"> <i class="fa fas fa-list"></i>'),i+=" Índex de les video-explicacions ",t&&(i+="</a>"),$(i+="</h4>"));l.append(n);for(var o=0;o<e.length;o++){var a=e[o],r=$('<div style="overflow: hidden;white-space: nowrap;"></div>'),s=$('<p style="display:inline; margin: 0 10px; font-size: 110%"></p>'),d=k(a.videoId),d=(S(a,s,d),h.isTeacher&&((d=$('<button title="Generate report" class="btn" style="width: 20px; padding: 0; margin-right:5px; vertical-align: baseline; background: lightblue;"><span class="fa fa-plus" style="color:white"></span></button>')).on("click",R),d.attr("data-videoid",a.videoId),d.attr("data-chapterid",0),r.append(d)),r.append(s),$("<span></span>"));"S"==a.ampliacio&&(d.css("background","lightblue"),d.attr("title","Ampliació")),d.html(a.title),r.append(d),l.append(r)}h.isTeacher&&(t=$('<div id="iedib-report-div" style="border-top: 1px solid lightgray; max-height: 400px; overflow-y: auto; padding: 5px;"></div>'),l.append(t))}}))},e={assignNum:h.assignNum,assignName:h.assignName,bookId:h.bookId,courseId:h.courseId,courseName:h.courseName,userId:h.userId,userFullname:h.userFullname,isTeacher:h.isTeacher,site:h.site,jsession:h.moodleSession},$.ajax({method:"POST",url:x+"/video/handshake",data:e,dataType:"json"}).done(function(e){e.msg?(window.vNotify.error({title:":-( Error registre de vídeos",text:"No es pot establir acord amb el servidor."}),c={}):(c=e,t&&t())}))})});
