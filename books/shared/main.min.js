
var FlipBookAPI={user_info:{idUser:-1,idRole:-1},testSVG:function(){var b=new Image();b.onerror=function(){bookConfig.imageExt="jpg"};b.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMSIgaGVpZ2h0PSIxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjwvc3ZnPg=="}};if(bookConfig.imageExt==="svg"||bookConfig.imageExt==="svgz"){FlipBookAPI.testSVG()}(this||(0,eval)("(this)")).bdor=[];(function(v){function u(d){d=s.match(d);if(null==d||0==d.length){return 0}d=d[0];var f=d.indexOf("/");d=d.substring(f+1,d.length);return""==d?0:parseInt(d)}function t(c){c=s.match(c);if(null==c||0==c.length){return 0}c=c[0].replace("_",".").match(/\d+\.?\d?/);if(null==c||0==c.length){return 0}c=c[0];return""==c?0:parseFloat(c)}var s=navigator.userAgent.toLowerCase();v.browser={};v.browser.webkit=/webkit/.test(s);v.browser.mozilla=/firefox/.test(s);v.browser.firefox=v.browser.mozilla;v.browser.msie=/msie/.test(s)||/trident/.test(s)||/edge/.test(s);v.browser.edge=/edge/.test(s);v.browser.opera=/opera/.test(s)||/opr/.test(s);v.browser.chrome=/chrome/.test(s)&&!v.browser.opera&&!v.browser.edge;v.browser.uc=/ucbrowser/.test(s);v.browser.safari=/safari/.test(s)&&!v.browser.chrome&&!v.browser.uc&&!v.browser.opera;v.browser.version=0;bdor[1]="p";v.browser.firefox&&(v.browser.version=u(/firefox\/\d+/));if(v.browser.msie){var r=s.match(/msie\s?\d+\.0/);null==r?(r=s.match(/trident\/\d+\.0/),null!=r&&0<r.length&&(r=parseInt(r[0].replace("trident/","")),v.browser.version=r+4)):(r=parseInt(r[0].replace("msie","")),v.browser.version=r)}v.browser.opera&&(v.browser.version=u(/opera\/\d+/)||u(/opr\/\d+/));v.browser.chrome&&(v.browser.version=u(/chrome\/\d+/));v.browser.uc&&(v.browser.version=u(/ucbrowser\/\d+/));v.browser.safari&&(v.browser.version=u(/safari\/\d+/));if(void 0==v.browser.device){v.browser.DEVICE_PC=0;v.browser.DEVICE_PAD=1;v.browser.DEVICE_PHONE=2;var r=/pad/.test(s)||/ipod/.test(s),q=/iphone/.test(s),p=/wpdesktop/.test(s)||/windows phone/.test(s),o=/blackberry/.test(s),n=/mobile/.test(s)||/phone/.test(s);v.browser.device=v.browser.DEVICE_PC;if(r){v.browser.device=v.browser.DEVICE_PAD}else{if(q||p||o||n){v.browser.device=v.browser.DEVICE_PHONE}}}void 0==v.browser.prefix&&(v.browser.prefix="",!0==v.browser.webkit&&(v.browser.prefix="-webkit-"),!0==v.browser.mozilla&&(v.browser.prefix="-moz-"),!0==v.browser.opera&&(v.browser.prefix="-webkit-"),!0==v.browser.uc&&(v.browser.prefix="-webkit-"),!0==v.browser.msie&&(v.browser.prefix="-ms-"));if(void 0==v.system){v.system={name:"",version:0};v.system.WINDOWS="Windows";v.system.WP="WinPhone";v.system.WP_DESKTOP="WinPhoneDesktop";v.system.MAC="Mac OS";v.system.IOS="iPhone OS";v.system.LINUX="Linux";v.system.ANDROID="Android";v.system.BLACKBERRY="BlackBerry";/windows/.test(s)&&(v.system.name=v.system.WINDOWS,v.system.version=t(/windows nt\s?\d+\.?\d?/));/windows phone/.test(s)&&(v.system.name=v.system.WP,v.system.version=t(/windows phone\s?\d+\.?\d?/));/wpdesktop/.test(s)&&(v.system.name=v.system.WP_DESKTOP,v.system.version=t(/wpdesktop\s?\d+\.?\d?/));if(v.system.name!=v.system.WP){if(/iphone/.test(s)||/ipad/.test(s)){v.system.name=v.system.IOS,v.system.version=t(/os\s?\d+_?\d?/)}/android/.test(s)&&(v.system.name=v.system.ANDROID,v.system.version=t(/android\s?\d+\.?\d?/))}/mac/.test(s)&&v.browser.system!=v.browser.IOS&&(v.system.name=v.system.MAC,v.system.version=t(/os x\s?\d+\.?\d?/));/linux/.test(s)&&!/android/.test(s)&&(v.system.name=v.system.LINUX);/blackberry/.test(s)&&(v.system.name=v.system.BLACKBERRY,v.system.version=t(/blackberry\s?\d+/))}})(jQuery);var isIE=function(){return $.browser.msie},isIE8=function(){return $.browser.msie&&8==$.browser.version},isIE9=function(){return $.browser.msie&&9==$.browser.version},isIE11=function(){return $.browser.msie&&11==$.browser.version},isBelowIE11=function(){return $.browser.msie&&11>$.browser.version},isPad=function(){return $.browser.device==$.browser.DEVICE_PAD||$.browser.device==$.browser.DEVICE_PC&&$.system.name==$.system.ANDROID?!0:!1},isIpad=function(){var c=navigator.userAgent.toLowerCase();return 0<c.indexOf("ipad")&&0<c.indexOf("safari")},isPC=function(){return $.browser.device==$.browser.DEVICE_PC?!0:!1},isIpod=function(){return 0<navigator.userAgent.toLowerCase().indexOf("ipod")},isIphone=function(){return 0<navigator.userAgent.toLowerCase().indexOf("iphone")},isNokiaPhone=function(){var c=navigator.userAgent.toLowerCase();return 0<c.indexOf("msie")&&0<c.indexOf("wpdesktop")},isPhone=function(){var c=window.location.search;return $.browser.device==$.browser.DEVICE_PHONE||0<=c.toLowerCase().indexOf("phone=true")||0<=c.toLowerCase().indexOf("phonebook=true")?!0:!1},isAndroidWeChat=function(){return $.system.name==$.system.ANDROID&&$.browser.chrome&&40>$.browser.version},isAndroidDefault=function(){return $.system.name==$.system.ANDROID&&$.browser.safari},isPhoneBook=function(){if($.system.name==$.system.ANDROID&&$.browser.uc){return !0}var c=window.location.search;return(isPhone()||isPad())&&$.system.name==$.system.ANDROID&&4>parseInt($.system.version)||0<=c.toLowerCase().indexOf("phonebook=true")||(isPhone()||isPad())&&"slide"==bookConfig.FlipStyle.toLowerCase()?!0:!1},isHigherThanIOS8=function(){return $.system.name==$.system.IOS&&8<=$.system.version},isInTheFrame=function(){return window.top!=window};function isBelowIE9(){return $.browser.msie?9>$.browser.version?!0:!1:!1}function isBelowIE8(){return $.browser.msie?8>$.browser.version?!0:!1:!1}function isBelowIE10(){return $.browser.msie?10>$.browser.version?!0:!1:!1}var global=function(){return this||(0,eval)("(this)")}(),virtual_function=function(){};function getPackageByName(g){if(void 0==g||""==g){return global}var l=global;g=g.split(".");for(var k=0;k<g.length;k++){var h=g[k];l[h]||(l[h]={IS_PACKAGE_OBJECT:!0});l=l[h]}return l}function getClassByFullName(d){if(-1==d.indexOf(".")){return global[d]}var f=d.split(".");d=f.pop();f=f.join(".");return getPackageByName(f)[d]}function classof(k,p){if(!k){return""}p||(p=global);"string"==typeof p&&(p=getPackageByName(p));var o=["webkitStorageInfo","webkitIndexedDB"],n;for(n in p){try{if(!(-1<o.indexOf(n))&&p[n] instanceof Function){try{if(k instanceof p[n]){return n}}catch(m){}}}catch(l){}}for(n in p){if("object"==typeof p[n]&&p[n].IS_PACKAGE_OBJECT&&(o=classof(k,p[n]),""!=o)){return n+"."+o}}return""}function nameof(h,n){if(!h){return""}n||(n=global);"string"==typeof n&&(n=getPackageByName(n));var m=["webkitStorageInfo","webkitIndexedDB"],l;for(l in n){try{if(!(-1<m.indexOf(l))&&n[l]==h){return l}}catch(k){}}for(l in n){if("object"==typeof n[l]&&n[l].IS_PACKAGE_OBJECT&&(m=nameof(h,n[l]),""!=m)){return l+"."+m}}return""}function Class(k,p){if("string"===typeof k){var o=p,n=getPackageByName(o.Package);n[k]=Class(o);return n[k]}var m=function(){if(this.Import){"string"==typeof this.Import&&(this.Import=[this.Import]);for(var g=0;g<this.Import.length;g++){var r=this.Import[g],q=getPackageByName(r);if(q instanceof Function){this[r.split(".").pop()]=q}else{for(var h in q){q[h] instanceof Function&&(this[h]=q[h])}}}}q=getPackageByName(this.Package);if(q!=global){for(h in q){this.getClassName()!=h&&q[h] instanceof Function&&(this[h]=q[h])}}this.create&&this.create instanceof Function&&this.create.apply(this,arguments)};m.prototype=k||{};var l;m.prototype.getClassName=function(){l||(l=nameof(m,this.Package));return l};m.prototype.getClass=function(){return m};o=m.prototype.statics;if(void 0!=o){for(n in o){void 0==m[n]&&(m[n]=o[n])}delete m.prototype.statics}return m}Function.prototype.extend=function(g){if(!g){return this}if("string"==typeof g){if(-1<g.indexOf(".")){if(g=getClassByFullName(g),!g){return this}}else{var l=this.prototype.Package,k=g;l&&""!=l&&(g=l+"."+k);g=getClassByFullName(g);if(!g&&(g=getClassByFullName(k),!g)){return this}}}if(g instanceof Function){for(var h in g){void 0==this[h]&&(this[h]=g[h])}for(h in g.prototype){void 0==this.prototype[h]?g.prototype[h]==virtual_function?console&&console.error&&console.error("virtual function [%s] must be override.",h):this.prototype[h]=g.prototype[h]:(k=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,this.prototype[h] instanceof Function&&g.prototype[h] instanceof Function&&k.test(this.prototype[h])&&(this.prototype[h]=function(d,f){return function(){var c=this._super;this._super=d;var b=f.apply(this,arguments);this._super=c;return b}}(g.prototype[h],this.prototype[h])))}return this}return"object"!==typeof g?this:this.extend(Class(g))};Function.prototype.expand=function(f,h){if("object"===typeof f){if(void 0==h&&(h=!1),!0===h){for(var g in f){this.prototype[g]=f[g]}}else{this.extend(Class(f))}}};var Instance={copy:function(d){if(!d||"object"!==typeof d){return d}var f={};d instanceof Array&&(f=[]);for(property in d){f[property]="object"==typeof d[property]?Instance.copy(d[property]):d[property]}return f},create:function(h,n){n||(n=[]);var m=h;"string"==typeof h&&(m=getClassByFullName(m));if(!m){return null}var l=m.prototype.create;m.prototype.create=function(){};var k=new m;m.prototype.create=l;k.create&&k.create instanceof Function&&k.create.apply(k,n);return k},JSON:function(g){if(void 0===g){return"undefined"}if(null===g){return"null"}if(g instanceof Array){var l=[];l.push("[");for(var k=0;k<g.length;k++){l.push(Instance.JSON(g[k])),l.push(", ")}1<l.length&&l.pop();l.push("]");return l.join("")}if(g instanceof Function){return g}if("string"===typeof g){return'"'+g.toString()+'"'}if("number"===typeof g){return Number(g).toString()}if("boolean"===typeof g){return Boolean(g).toString()}if("object"===typeof g){l=[];l.push("{");for(k in g){var h='"'+k+'":'+Instance.JSON(g[k]);l.push(h);l.push(", ")}1<l.length&&l.pop();l.push("}");return l.join("")}},parse:function(b,c){return b&&"undefined"!=b&&"null"!=b&&""!=b?eval("("+b+")"):c}};Object.create=Object.create||function(){function c(){}return function(b){if(1!=arguments.length){throw Error("Object.create implementation only accepts one parameter.")}c.prototype=b;return new c}}();Object.keys=Object.keys||function(f){if(f!==Object(f)){throw new TypeError("Object.keys called on a non-object")}var h=[],g;for(g in f){Object.prototype.hasOwnProperty.call(f,g)&&h.push(g)}return h};(function(){for(var f=0,h=["webkit","moz"],g=0;g<h.length&&!window.requestAnimationFrame;++g){window.requestAnimationFrame=window[h[g]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[h[g]+"CancelAnimationFrame"]||window[h[g]+"CancelRequestAnimationFrame"]}window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var m=(new Date).getTime(),l=Math.max(0,16.7-(m-f)),b=window.setTimeout(function(){n(m+l)},l);f=m+l;return b});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(c){clearTimeout(c)})})();var ColorTable={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff0",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdC",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",value:function(d){if(!d||"string"!=typeof d){return d}var f=d.toLowerCase();return this[f]?this[f]:d}};Function.expand({bind:function(d){var f=this;return function(){return f.apply(d,arguments)}},delay:function(f,h,g){"object"!==typeof f&&(g=h,h=f,f=global);h=h||1;g=g||[];return setTimeout(function(){this.apply(f,g)}.bind(this),h)},interval:function(g,l,k){"object"!==typeof g&&(k=l,l=g,g=global);l=l||1;k=k||[];var h=this;return{intervalId:setInterval(function(){this.apply(g,k)}.bind(this),l),stop:function(){clearInterval(this.intervalId);this.intervalId=void 0},isRunning:function(){return void 0!=this.intervalId},start:function(){this.intervalId=setInterval(function(){h.apply(g,k)},l)}}},runInAnimate:function(l,r){"object"!==typeof l&&(r=l,l={});var q={stopFlag:!1,stop:function(){this.stopFlag=!0}},p=this,o=0,n=Math.ceil(r/16.7),m=function(){!0!==q.stopFlag&&(o++,!1!==p.apply(l,[o,n])&&(o<n||void 0==r)&&window.requestAnimationFrame(m))};m();return q},executeOnce:function(){this.executed||(this.executed=!1);this.executed||(this(),this.executed=!0)}});String.expand({trim:function(){return this.replace(/(^\s*)|(\s*$)/g,"")},replaceAll:function(k,p,o){void 0==o&&(o=!1);if(!k||!p){return this}if(RegExp&&!o){return this.replace(RegExp(k,"g"),p)}var n=this.indexOf(k);o=[];for(var m=this;-1!=n;){var n=n+k.length,l=m.substring(0,n),m=m.substring(n),l=l.replace(k,p);o.push(l);n=m.indexOf(k)}""!==m&&o.push(m);return o.join("")},subBetween:function(g,l){if(void 0==g||void 0==l){return""}var k=this.length,h=this.indexOf(g);if(-1==h){return""}h+=g.length;k=this.substring(h,k).indexOf(l);return -1==k?"":this.substring(h,k+h)},isUrl:function(){if(""==this.trim()||!RegExp){return !1}var d=/((((ht|f)tp(s?))\:\/\/)|(www\.))\w+\.\w+\/?\w*/gi,f=this.toLowerCase();return !!f.match(/(((ht|f)tp(s?))\:\/\/)?(www\.)?\w+\.\w+\/\w*/gi)||f.match(d)},isEmail:function(){return""==this?!1:!!this.toLowerCase().match(/^([A-Za-z0-9])(\w)+@(\w)+(\.)(com|com\.cn|net|cn|net\.cn|org|biz|info|gov|gov\.cn|edu|edu\.cn)/)},toArray:function(c){c||(c="");return this.split(c)},reverse:function(){var c=this.split("");c.reverse();return c.join("")},equals:function(c){return this.trim()==c.trim()},equalsIgnoreCase:function(c){return this.toLowerCase().trim()==c.toLowerCase().trim()},like:function(d){if(!d){return !1}d=this.toLowerCase().trim();var f=this.toLowerCase().trim();return -1<d.indexOf(f)||-1<f.indexOf(d)},contain:function(c){return -1<this.indexOf(c)},startsWith:function(c){return""===c?!1:this.substr(0,c.length)===c},endsWith:function(c){return""===c?!1:this.substr(-c.length,c.length)===c},isEnglish:function(){return/[\x00-\xff]/.test(this)},overflow:function(d){if(void 0==d){return this.toString()}var f=2;/[^\x00-\xff]/.test(this)&&(d=Math.floor(d/2),f=Math.floor(f/2));return this.length-d>f?this.substr(0,d)+"...":this.toString()},remove:function(d){if("string"!=typeof d||!d){return this}var f=this.indexOf(d);if(0>f){return this}d=d.length;return this.substring(0,f)+this.substring(f+d,this.length)},removeStartFrom:function(c){if("string"==typeof c&&c){return c=this.indexOf(c),0>c?this:this.substring(0,c)}},cycleToLength:function(f){if(!isNaN(f)){for(var h=parseInt(f/this.length),g=this;0<h;){g+=this,h--}return g.substring(0,f)}},firstUpperCase:function(){return 1>this.length?this:this.substring(0,1).toUpperCase()+this.substring(1)},firstLowerCase:function(){return 1>this.length?this:this.substring(0,1).toLowerCase()+this.substring(1)},extract:function(){if(0==this.length||0==arguments.length){return[]}for(var k=[],p=this.toString(),o=0;o<p.length;){for(var n=!1,m=0;m<arguments.length;m++){var l=arguments[m];if(p.substr(o,l.length)==l){k.push(l);o+=l.length;n=!0;break}}n||o++}return k},statics:{format:function(){if(0==arguments.length){return""}if(1==arguments.length){return arguments[0]}for(var k=arguments[0],p=k.extract("%s","%d","%f","%b","%o"),o=1;o<arguments.length;o++){var n=arguments[o],m=p[o-1];"%s"==m&&("string"==typeof n?k=k.replace("%s",n):k=k.replace("%s",""));if("%d"==m){isNaN(n)&&(n=0);var l;l="number"==typeof n?-1==Number(n).toString().indexOf("."):!1;l?k=k.replace("%d",n+""):k=k.replace("%d","")}"%f"==m&&(isNaN(n)&&(n=0),"number"==typeof n?k=k.replace("%f",n+""):k=k.replace("%f",""));"%b"==m&&(n=!!n,"boolean"==typeof n?k=k.replace("%b",n+""):k=k.replace("%b",""));"%o"==m&&("object"==typeof n?k=k.replace("%o",Instance.JSON(n)):k=k.replace("%o",""))}return k}}});Array.expand({remove:function(c){return isNaN(c)||c>this.length?!1:this.splice(c,1)[0]},indexOf:function(d){for(var f=0;f<this.length;f++){if(this[f]===d){return f}}return -1},removeElement:function(c){c=this.indexOf(c);-1<c&&this.remove(c)},lastIndexOf:function(f){for(var h=-1,g=0;g<this.length;g++){this[g]===f&&(h=g)}return h},statics:{isArray:function(c){return"[object Array]"==Object.prototype.toString.call(c)}}});Date.expand({format:function(g,l){l=l||!0;var k={"y+":this.getYear(),"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(g)&&(g=g.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var h in k){RegExp("("+h+")").test(g)&&(g=!0===l?g.replace(RegExp.$1,k[h]):g.replace(RegExp.$1,1==RegExp.$1.length?k[h]:("00"+k[h]).substr((""+k[h]).length)))}return g},statics:{now:function(){return(new Date).getTime()}}});Number.expand({statics:{between:function(g,l,k){var h=Math.min(l,k);l=Math.max(l,k);g<h&&(g=h);g>l&&(g=l);return g},fixed:function(f,h){var g=Math.pow(10,h);return Math.round(f*g)/g}}});var Color=function(c){c&&"object"==typeof c&&c.toString&&(c=c.toString());return{value:ColorTable.value(c),toString:function(){function f(l,k,b){if(l.length<b&&l.length>k){for(;l.length<b;){l="0"+l}}return l}var g=this.value;g||(g=0);if("string"==typeof g){if(0==g.indexOf("#")){return g}if(0==g.indexOf("0x")){return g.replace("0x","#")}}g=parseInt(g);g=0>g?Number(0):g;g=g.toString(16);8<g.length&&(g=g.substr(0,8));g=f(g,6,8);g=f(g,3,6);g=f(g,0,3);return"#"+g},valueOf:toString,split:function(){var l={r:0,g:0,b:0,a:255};if(!this.value){return l}var q=this.toString(),p="FF",o="FF",n="FF",m="FF";switch(q.length){case 9:m=q.substr(1,2);p=q.substr(3,2);o=q.substr(5,2);n=q.substr(7,2);break;case 7:p=q.substr(1,2);o=q.substr(3,2);n=q.substr(5,2);break;case 4:p=q.substr(1,1);o=q.substr(2,1);n=q.substr(3,1);p+=p;o+=o;n+=n;break;default:return l}return{r:parseInt(p,16),g:parseInt(o,16),b:parseInt(n,16),a:parseInt(m,16)}},add:function(h){var m;m="object"==typeof h?h:{r:h,g:h,b:h,a:1};var l=this.split();h=Number.between(l.r+m.r,0,255).toString(16).toUpperCase();var k=Number.between(l.g+m.g,0,255).toString(16).toUpperCase();m=Number.between(l.b+m.b,0,255).toString(16).toUpperCase();l=Number(l.a).toString(16).toUpperCase();h=1>=h.length?"0"+h:h;k=1>=k.length?"0"+k:k;m=1>=m.length?"0"+m:m;l=1>=l.length?"0"+l:l;return"FF"==l?"#"+h+k+m:"#"+l+h+k+m},reduce:function(d){return this.add("object"==typeof d?d:{r:-d,g:-d,b:-d,a:1})},rgba:function(f){var g=this.split();f=void 0==f||""===f?g.a:parseFloat(f);1<f&&(f=Number.fixed(f/255,2));return String.format("rgba(%d,%d,%d,%f)",g.r,g.g,g.b,f)},equals:function(d){return this.toString()==Color(d).toString()},difference:function(f){var g=this.split();f=Color(f).split();return{r:Math.abs(g.r-f.r),g:Math.abs(g.g-f.g),b:Math.abs(g.b-f.b),a:Math.abs(g.a-f.a)}}}};function colorSplit(c){return Color(c).split()}function colorAdd(d,f){return Color(d).add(f)}function colorDiv(d,f){return Color(d).reduce(f)}function equals(d,f){return 1e-7>Math.abs(d-f)}var Point=function(d,f){return{x:d,y:f,isNearTo:function(g,h){if(!g){return !1}void 0==h&&(h=5);return Math.abs(this.x-g.x)<h&&Math.abs(this.y-g.y)<h},equals:function(c){return c?equals(this.x,c.x)&&equals(this.y,c.y):!1},toString:function(){return"("+this.x+","+this.y+")"},clone:function(){return Point(this.x,this.y)},getX:function(){return this.x},getY:function(){return this.y},isNaP:function(){return isNaN(this.x)||isNaN(this.y)}}};Point.NaP=function(){return Point(Number.NaN,Number.NaN)};$.browser.mozilla&&(HTMLElement.prototype.__defineGetter__("innerText",function(){return this.textContent}),HTMLElement.prototype.__defineSetter__("innerText",function(c){this.textContent=c}));bdor[30]=function(d,f){return bdor[d]-f};Class("RangeSlider",{create:function(d,f){this.slider=d;this.min=0;this.max=f.max?f.max:1;isNaN(this.max)&&(this.max=100);this.onChange=f.onChange;this.init();void 0==f.range||isNaN(f.range)?(this.currentRange=0,this.setRange(0)):(this.currentRange=f.range,this.setRange(f.range))},init:function(){this.slider_total=$('<div class="slider-total"></div>');this.slider_range=$('<div class="slider-range"></div>');this.slider_hander=$('<div class="slider-handle"></div>');this.slider_range.css("pointer-events","none");this.slider_hander.css("pointer-events","none");this.slider.append(this.slider_total);this.slider.append(this.slider_range);this.slider.append(this.slider_hander);this.initEvents()},initEvents:function(){this.isMouseDown=!1;this.slider_total.bind(_event._down,function(c){this.isMouseDown=!0;c=isTouch?c.originalEvent?c.originalEvent.changedTouches:c.changedTouches:[c];this.onChangeRange(c);return !1}.bind(this));this.slider_total.bind(_event._move,function(c){if(this.isMouseDown){return c=isTouch?c.originalEvent?c.originalEvent.changedTouches:c.changedTouches:[c],this.onChangeRange(c),!1}}.bind(this));this.slider_total.bind(_event._up,function(c){return this.isMouseDown=!1}.bind(this));this.slider_total.bind(_event._leave,function(c){this.isMouseDown=!1}.bind(this));this.slider_hander.bind(_event._down,function(c){c=isTouch?c.originalEvent?c.originalEvent.changedTouches:c.changedTouches:[c];this.onChangeRange(c);return !1}.bind(this))},setMax:function(c){this.max=c},setRange:function(f){if(void 0!=f){this.range=parseFloat(f);this.animation&&this.animation.stop();var h=this.currentRange,g=this.range;this.animation=function(c,d){this.currentRange=$.easing.swing(null,c,h,g-h,d);this.moveToRange(this.currentRange);this.currentRange==this.range&&this.animation&&this.animation.stop()}.runInAnimate(this,200)}},onChangeRange:virtual_function,moveToRange:virtual_function});Class("VerticalSlider",{onChangeRange:function(f){f=f[0];if(void 0!=f){var h=$(f.target),g=f.offsetY;void 0==g&&(g=f.pageY-h.offset().top);f=(h.height()-g)/this.slider_total.height()*this.max;this.setRange(f);if(this.onChange){this.onChange(f)}}},moveToRange:function(g){this.slider_total.offset();this.slider.offset();var l=parseInt(this.slider_range.css("bottom").replace("px","")),k=this.slider_hander.width(),h=this.slider_total.height()-k;g=Math.floor(g*h/this.max);g=Math.min(g,h);k=g+k/2;this.slider_hander.css({bottom:g+l});this.slider_range.css({height:k})}}).extend("RangeSlider");Class("HorizontalSlider",{onChangeRange:function(f){f=f[0];if(void 0!=f){var h=$(f.target),g=f.offsetX;void 0==g&&(g=f.pageX-h.offset().left);f=g/this.slider_total.width()*this.max;this.setRange(f);if(this.onChange){this.onChange(f)}}},moveToRange:function(g){var l=this.slider_total.offset().left-this.slider.offset().left;parseInt(this.slider_range.css("bottom").replace("px",""));var k=this.slider_hander.width(),h=this.slider_total.width()-k;g=Math.floor(g*h/this.max);g=Math.min(g,h);k=g+k/2;this.slider_hander.css({left:g+l});this.slider_range.css({width:k})}}).extend("RangeSlider");(function(c){c.fn.slider=function(f){if(f){this.empty();var g=null;(g="horizontal"==f.direction?new HorizontalSlider(this,f):new VerticalSlider(this,f))||(g=new HorizontalSlider(this,f));return g}}})(jQuery);(function(l){var r="object"==typeof exports&&exports,q="object"==typeof module&&module&&module.exports==r&&module,p="object"==typeof global&&global;if(p.global===p||p.window===p){l=p}var o=function(c){this.message=c};o.prototype=Error();o.prototype.name="InvalidCharacterError";var n={encode:function(g){g=String(g);if(/[^\0-\xFF]/.test(g)){throw new o("The string to be encoded contains characters outside of the Latin1 range.")}for(var z=g.length%3,y="",x=-1,v,t,w,u=g.length-z;++x<u;){v=g.charCodeAt(x)<<16,t=g.charCodeAt(++x)<<8,w=g.charCodeAt(++x),v=v+t+w,y+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(v>>18&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(v>>12&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(v>>6&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(v&63)}2==z?(v=g.charCodeAt(x)<<8,t=g.charCodeAt(++x),v+=t,y+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(v>>10)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(v>>4&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(v<<2&63)+"="):1==z&&(v=g.charCodeAt(x),y+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(v>>2)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(v<<4&63)+"==");return y},decode:function(s){s=String(s);for(var y=s.length,x=0,w,v,u="",t=-1;++t<y;){v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(s.charAt(t)),w=x%4?64*w+v:v,x++%4&&(u+=String.fromCharCode(255&w>>(-2*x&6)))}return u},version:"0.1.0"};if("function"==typeof define&&"object"==typeof define.amd&&define.amd){define(function(){return n})}else{if(r&&!r.nodeType){if(q){q.exports=n}else{for(var m in n){n.hasOwnProperty(m)&&(r[m]=n[m])}}}else{l.base64=n}}})(this);function parsHexToNormalString(d){for(var f="";2<=d.length;){f+=String.fromCharCode(parseInt(d.substring(0,2),16)),d=d.substring(2,d.length)}return f}function parseHexString(d){for(var f=[];2<=d.length;){f.push(parseInt(d.substring(0,2),16)),d=d.substring(2,d.length)}return f}function byteArray2String(f){for(var h="",g=0;g<f.length;g++){h+=String.fromCharCode(f[g])}return h}function rc4(v,u){for(var t=[],s=[],r=0;256>r;r++){t[r]=r,s[r]=v.charCodeAt(r%v.length)}for(var q=0,r=0;256>r;r++){var q=q+t[r]+s[r]&255,p=t[r];t[r]=t[q];t[q]=p}for(var o=q=s=0,n,p="",r=0;r<u.length;r++){s=s+1&255,q=q+t[s]&255,o=t[s],t[s]=t[q],t[q]=o,o=t[s]+t[q]&255,n=u.charCodeAt(r),n^=t[o],p+=String.fromCharCode(n)}return p}String.prototype.MD5=function(H){function G(l,s){var r,q,p,n,m;p=l&2147483648;n=s&2147483648;r=l&1073741824;q=s&1073741824;m=(l&1073741823)+(s&1073741823);return r&q?m^2147483648^p^n:r|q?m&1073741824?m^3221225472^p^n:m^1073741824^p^n:m^p^n}function F(c,s,r,q,p,n,m){c=G(c,G(G(s&r|~s&q,p),m));return G(c<<n|c>>>32-n,s)}function E(c,s,r,q,p,n,m){c=G(c,G(G(s&q|r&~q,p),m));return G(c<<n|c>>>32-n,s)}function D(c,s,r,q,p,n,m){c=G(c,G(G(s^r^q,p),m));return G(c<<n|c>>>32-n,s)}function C(c,s,r,q,p,n,m){c=G(c,G(G(r^(s|~q),p),m));return G(c<<n|c>>>32-n,s)}function B(g){var l="",k="",h;for(h=0;3>=h;h++){k=g>>>8*h&255,k="0"+k.toString(16),l+=k.substr(k.length-2,2)}return l}var A=[],z,y,x,w,K,o,L,I,J,A=function(l){var s,r=l.length;s=r+8;for(var q=16*((s-s%64)/64+1),p=Array(q-1),n=0,m=0;m<r;){s=(m-m%4)/4,n=m%4*8,p[s]|=l.charCodeAt(m)<<n,m++}s=(m-m%4)/4;p[s]|=128<<m%4*8;p[q-2]=r<<3;p[q-1]=r>>>29;return p}(this);o=1732584193;L=4023233417;I=2562383102;J=271733878;for(z=0;z<A.length;z+=16){y=o,x=L,w=I,K=J,o=F(o,L,I,J,A[z+0],7,3614090360),J=F(J,o,L,I,A[z+1],12,3905402710),I=F(I,J,o,L,A[z+2],17,606105819),L=F(L,I,J,o,A[z+3],22,3250441966),o=F(o,L,I,J,A[z+4],7,4118548399),J=F(J,o,L,I,A[z+5],12,1200080426),I=F(I,J,o,L,A[z+6],17,2821735955),L=F(L,I,J,o,A[z+7],22,4249261313),o=F(o,L,I,J,A[z+8],7,1770035416),J=F(J,o,L,I,A[z+9],12,2336552879),I=F(I,J,o,L,A[z+10],17,4294925233),L=F(L,I,J,o,A[z+11],22,2304563134),o=F(o,L,I,J,A[z+12],7,1804603682),J=F(J,o,L,I,A[z+13],12,4254626195),I=F(I,J,o,L,A[z+14],17,2792965006),L=F(L,I,J,o,A[z+15],22,1236535329),o=E(o,L,I,J,A[z+1],5,4129170786),J=E(J,o,L,I,A[z+6],9,3225465664),I=E(I,J,o,L,A[z+11],14,643717713),L=E(L,I,J,o,A[z+0],20,3921069994),o=E(o,L,I,J,A[z+5],5,3593408605),J=E(J,o,L,I,A[z+10],9,38016083),I=E(I,J,o,L,A[z+15],14,3634488961),L=E(L,I,J,o,A[z+4],20,3889429448),o=E(o,L,I,J,A[z+9],5,568446438),J=E(J,o,L,I,A[z+14],9,3275163606),I=E(I,J,o,L,A[z+3],14,4107603335),L=E(L,I,J,o,A[z+8],20,1163531501),o=E(o,L,I,J,A[z+13],5,2850285829),J=E(J,o,L,I,A[z+2],9,4243563512),I=E(I,J,o,L,A[z+7],14,1735328473),L=E(L,I,J,o,A[z+12],20,2368359562),o=D(o,L,I,J,A[z+5],4,4294588738),J=D(J,o,L,I,A[z+8],11,2272392833),I=D(I,J,o,L,A[z+11],16,1839030562),L=D(L,I,J,o,A[z+14],23,4259657740),o=D(o,L,I,J,A[z+1],4,2763975236),J=D(J,o,L,I,A[z+4],11,1272893353),I=D(I,J,o,L,A[z+7],16,4139469664),L=D(L,I,J,o,A[z+10],23,3200236656),o=D(o,L,I,J,A[z+13],4,681279174),J=D(J,o,L,I,A[z+0],11,3936430074),I=D(I,J,o,L,A[z+3],16,3572445317),L=D(L,I,J,o,A[z+6],23,76029189),o=D(o,L,I,J,A[z+9],4,3654602809),J=D(J,o,L,I,A[z+12],11,3873151461),I=D(I,J,o,L,A[z+15],16,530742520),L=D(L,I,J,o,A[z+2],23,3299628645),o=C(o,L,I,J,A[z+0],6,4096336452),J=C(J,o,L,I,A[z+7],10,1126891415),I=C(I,J,o,L,A[z+14],15,2878612391),L=C(L,I,J,o,A[z+5],21,4237533241),o=C(o,L,I,J,A[z+12],6,1700485571),J=C(J,o,L,I,A[z+3],10,2399980690),I=C(I,J,o,L,A[z+10],15,4293915773),L=C(L,I,J,o,A[z+1],21,2240044497),o=C(o,L,I,J,A[z+8],6,1873313359),J=C(J,o,L,I,A[z+15],10,4264355552),I=C(I,J,o,L,A[z+6],15,2734768916),L=C(L,I,J,o,A[z+13],21,1309151649),o=C(o,L,I,J,A[z+4],6,4149444226),J=C(J,o,L,I,A[z+11],10,3174756917),I=C(I,J,o,L,A[z+2],15,718787259),L=C(L,I,J,o,A[z+9],21,3951481745),o=G(o,y),L=G(L,x),I=G(I,w),J=G(J,K)}return 32==H?B(o)+B(L)+B(I)+B(J):B(L)+B(I)};function QR8bitByte(c){this.mode=QRMode.MODE_8BIT_BYTE;this.data=c}QR8bitByte.prototype={getLength:function(c){return this.data.length},write:function(d){for(var f=0;f<this.data.length;f++){d.put(this.data.charCodeAt(f),8)}}};function QRCode(d,f){this.typeNumber=d;this.errorCorrectLevel=f;this.modules=null;this.moduleCount=0;this.dataCache=null;this.dataList=[]}QRCode.prototype={addData:function(c){c=new QR8bitByte(c);this.dataList.push(c);this.dataCache=null},isDark:function(d,f){if(0>d||this.moduleCount<=d||0>f||this.moduleCount<=f){throw Error(d+","+f)}return this.modules[d][f]},getModuleCount:function(){return this.moduleCount},make:function(){if(1>this.typeNumber){for(var h=1,h=1;40>h;h++){for(var n=QRRSBlock.getRSBlocks(h,this.errorCorrectLevel),m=new QRBitBuffer,l=0,k=0;k<n.length;k++){l+=n[k].dataCount}for(k=0;k<this.dataList.length;k++){n=this.dataList[k],m.put(n.mode,4),m.put(n.getLength(),QRUtil.getLengthInBits(n.mode,h)),n.write(m)}if(m.getLengthInBits()<=8*l){break}}this.typeNumber=h}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(g,l){this.moduleCount=4*this.typeNumber+17;this.modules=Array(this.moduleCount);for(var k=0;k<this.moduleCount;k++){this.modules[k]=Array(this.moduleCount);for(var h=0;h<this.moduleCount;h++){this.modules[k][h]=null}}this.setupPositionProbePattern(0,0);this.setupPositionProbePattern(this.moduleCount-7,0);this.setupPositionProbePattern(0,this.moduleCount-7);this.setupPositionAdjustPattern();this.setupTimingPattern();this.setupTypeInfo(g,l);7<=this.typeNumber&&this.setupTypeNumber(g);null==this.dataCache&&(this.dataCache=QRCode.createData(this.typeNumber,this.errorCorrectLevel,this.dataList));this.mapData(this.dataCache,l)},setupPositionProbePattern:function(g,l){for(var k=-1;7>=k;k++){if(!(-1>=g+k||this.moduleCount<=g+k)){for(var h=-1;7>=h;h++){-1>=l+h||this.moduleCount<=l+h||(this.modules[g+k][l+h]=0<=k&&6>=k&&(0==h||6==h)||0<=h&&6>=h&&(0==k||6==k)||2<=k&&4>=k&&2<=h&&4>=h?!0:!1)}}}},getBestMaskPattern:function(){for(var g=0,l=0,k=0;8>k;k++){this.makeImpl(!0,k);var h=QRUtil.getLostPoint(this);if(0==k||g>h){g=h,l=k}}return l},createMovieClip:function(h,n,m){h=h.createEmptyMovieClip(n,m);this.make();for(n=0;n<this.modules.length;n++){m=1*n;for(var l=0;l<this.modules[n].length;l++){var k=1*l;this.modules[n][l]&&(h.beginFill(0,100),h.moveTo(k,m),h.lineTo(k+1,m),h.lineTo(k+1,m+1),h.lineTo(k,m+1),h.endFill())}}return h},setupTimingPattern:function(){for(var c=8;c<this.moduleCount-8;c++){null==this.modules[c][6]&&(this.modules[c][6]=0==c%2)}for(c=8;c<this.moduleCount-8;c++){null==this.modules[6][c]&&(this.modules[6][c]=0==c%2)}},setupPositionAdjustPattern:function(){for(var l=QRUtil.getPatternPosition(this.typeNumber),r=0;r<l.length;r++){for(var q=0;q<l.length;q++){var p=l[r],o=l[q];if(null==this.modules[p][o]){for(var n=-2;2>=n;n++){for(var m=-2;2>=m;m++){this.modules[p+n][o+m]=-2==n||2==n||-2==m||2==m||0==n&&0==m?!0:!1}}}}}},setupTypeNumber:function(g){for(var l=QRUtil.getBCHTypeNumber(this.typeNumber),k=0;18>k;k++){var h=!g&&1==(l>>k&1);this.modules[Math.floor(k/3)][k%3+this.moduleCount-8-3]=h}for(k=0;18>k;k++){h=!g&&1==(l>>k&1),this.modules[k%3+this.moduleCount-8-3][Math.floor(k/3)]=h}},setupTypeInfo:function(h,n){for(var m=QRUtil.getBCHTypeInfo(this.errorCorrectLevel<<3|n),l=0;15>l;l++){var k=!h&&1==(m>>l&1);6>l?this.modules[l][8]=k:8>l?this.modules[l+1][8]=k:this.modules[this.moduleCount-15+l][8]=k}for(l=0;15>l;l++){k=!h&&1==(m>>l&1),8>l?this.modules[8][this.moduleCount-l-1]=k:9>l?this.modules[8][15-l-1+1]=k:this.modules[8][15-l-1]=k}this.modules[this.moduleCount-8][8]=!h},mapData:function(v,u){for(var t=-1,s=this.moduleCount-1,r=7,q=0,p=this.moduleCount-1;0<p;p-=2){for(6==p&&p--;;){for(var o=0;2>o;o++){if(null==this.modules[s][p-o]){var n=!1;q<v.length&&(n=1==(v[q]>>>r&1));QRUtil.getMask(u,s,p-o)&&(n=!n);this.modules[s][p-o]=n;r--;-1==r&&(q++,r=7)}}s+=t;if(0>s||this.moduleCount<=s){s-=t;t=-t;break}}}}};QRCode.PAD0=236;QRCode.PAD1=17;QRCode.createData=function(k,p,o){p=QRRSBlock.getRSBlocks(k,p);for(var n=new QRBitBuffer,m=0;m<o.length;m++){var l=o[m];n.put(l.mode,4);n.put(l.getLength(),QRUtil.getLengthInBits(l.mode,k));l.write(n)}for(m=k=0;m<p.length;m++){k+=p[m].dataCount}if(n.getLengthInBits()>8*k){throw Error("code length overflow. ("+n.getLengthInBits()+">"+8*k+")")}for(n.getLengthInBits()+4<=8*k&&n.put(0,4);0!=n.getLengthInBits()%8;){n.putBit(!1)}for(;!(n.getLengthInBits()>=8*k);){n.put(QRCode.PAD0,8);if(n.getLengthInBits()>=8*k){break}n.put(QRCode.PAD1,8)}return QRCode.createBytes(n,p)};QRCode.createBytes=function(z,y){for(var x=0,w=0,v=0,u=Array(y.length),t=Array(y.length),s=0;s<y.length;s++){var r=y[s].dataCount,q=y[s].totalCount-r,w=Math.max(w,r),v=Math.max(v,q);u[s]=Array(r);for(var o=0;o<u[s].length;o++){u[s][o]=255&z.buffer[o+x]}x+=r;o=QRUtil.getErrorCorrectPolynomial(q);r=(new QRPolynomial(u[s],o.getLength()-1)).mod(o);t[s]=Array(o.getLength()-1);for(o=0;o<t[s].length;o++){q=o+r.getLength()-t[s].length,t[s][o]=0<=q?r.get(q):0}}for(o=s=0;o<y.length;o++){s+=y[o].totalCount}x=Array(s);for(o=r=0;o<w;o++){for(s=0;s<y.length;s++){o<u[s].length&&(x[r++]=u[s][o])}}for(o=0;o<v;o++){for(s=0;s<y.length;s++){o<t[s].length&&(x[r++]=t[s][o])}}return x};for(var QRMode={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},QRErrorCorrectLevel={L:1,M:0,Q:3,H:2},QRMaskPattern={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},QRUtil={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(d){for(var f=d<<10;0<=QRUtil.getBCHDigit(f)-QRUtil.getBCHDigit(QRUtil.G15);){f^=QRUtil.G15<<QRUtil.getBCHDigit(f)-QRUtil.getBCHDigit(QRUtil.G15)}return(d<<10|f)^QRUtil.G15_MASK},getBCHTypeNumber:function(d){for(var f=d<<12;0<=QRUtil.getBCHDigit(f)-QRUtil.getBCHDigit(QRUtil.G18);){f^=QRUtil.G18<<QRUtil.getBCHDigit(f)-QRUtil.getBCHDigit(QRUtil.G18)}return d<<12|f},getBCHDigit:function(d){for(var f=0;0!=d;){f++,d>>>=1}return f},getPatternPosition:function(c){return QRUtil.PATTERN_POSITION_TABLE[c-1]},getMask:function(f,h,g){switch(f){case QRMaskPattern.PATTERN000:return 0==(h+g)%2;case QRMaskPattern.PATTERN001:return 0==h%2;case QRMaskPattern.PATTERN010:return 0==g%3;case QRMaskPattern.PATTERN011:return 0==(h+g)%3;case QRMaskPattern.PATTERN100:return 0==(Math.floor(h/2)+Math.floor(g/3))%2;case QRMaskPattern.PATTERN101:return 0==h*g%2+h*g%3;case QRMaskPattern.PATTERN110:return 0==(h*g%2+h*g%3)%2;case QRMaskPattern.PATTERN111:return 0==(h*g%3+(h+g)%2)%2;default:throw Error("bad maskPattern:"+f)}},getErrorCorrectPolynomial:function(f){for(var h=new QRPolynomial([1],0),g=0;g<f;g++){h=h.multiply(new QRPolynomial([1,QRMath.gexp(g)],0))}return h},getLengthInBits:function(d,f){if(1<=f&&10>f){switch(d){case QRMode.MODE_NUMBER:return 10;case QRMode.MODE_ALPHA_NUM:return 9;case QRMode.MODE_8BIT_BYTE:return 8;case QRMode.MODE_KANJI:return 8;default:throw Error("mode:"+d)}}else{if(27>f){switch(d){case QRMode.MODE_NUMBER:return 12;case QRMode.MODE_ALPHA_NUM:return 11;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 10;default:throw Error("mode:"+d)}}else{if(41>f){switch(d){case QRMode.MODE_NUMBER:return 14;case QRMode.MODE_ALPHA_NUM:return 13;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 12;default:throw Error("mode:"+d)}}else{throw Error("type:"+f)}}}},getLostPoint:function(v){for(var u=v.getModuleCount(),t=0,s=0;s<u;s++){for(var r=0;r<u;r++){for(var q=0,p=v.isDark(s,r),o=-1;1>=o;o++){if(!(0>s+o||u<=s+o)){for(var n=-1;1>=n;n++){0>r+n||u<=r+n||0==o&&0==n||p!=v.isDark(s+o,r+n)||q++}}}5<q&&(t+=3+q-5)}}for(s=0;s<u-1;s++){for(r=0;r<u-1;r++){if(q=0,v.isDark(s,r)&&q++,v.isDark(s+1,r)&&q++,v.isDark(s,r+1)&&q++,v.isDark(s+1,r+1)&&q++,0==q||4==q){t+=3}}}for(s=0;s<u;s++){for(r=0;r<u-6;r++){v.isDark(s,r)&&!v.isDark(s,r+1)&&v.isDark(s,r+2)&&v.isDark(s,r+3)&&v.isDark(s,r+4)&&!v.isDark(s,r+5)&&v.isDark(s,r+6)&&(t+=40)}}for(r=0;r<u;r++){for(s=0;s<u-6;s++){v.isDark(s,r)&&!v.isDark(s+1,r)&&v.isDark(s+2,r)&&v.isDark(s+3,r)&&v.isDark(s+4,r)&&!v.isDark(s+5,r)&&v.isDark(s+6,r)&&(t+=40)}}for(r=q=0;r<u;r++){for(s=0;s<u;s++){v.isDark(s,r)&&q++}}v=Math.abs(100*q/u/u-50)/5;return t+10*v}},QRMath={glog:function(c){if(1>c){throw Error("glog("+c+")")}return QRMath.LOG_TABLE[c]},gexp:function(c){for(;0>c;){c+=255}for(;256<=c;){c-=255}return QRMath.EXP_TABLE[c]},EXP_TABLE:Array(256),LOG_TABLE:Array(256)},i=0;8>i;i++){QRMath.EXP_TABLE[i]=1<<i}for(i=8;256>i;i++){QRMath.EXP_TABLE[i]=QRMath.EXP_TABLE[i-4]^QRMath.EXP_TABLE[i-5]^QRMath.EXP_TABLE[i-6]^QRMath.EXP_TABLE[i-8]}for(i=0;255>i;i++){QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]]=i}function QRPolynomial(g,l){if(void 0==g.length){throw Error(g.length+"/"+l)}for(var k=0;k<g.length&&0==g[k];){k++}this.num=Array(g.length-k+l);for(var h=0;h<g.length-k;h++){this.num[h]=g[h+k]}}QRPolynomial.prototype={get:function(c){return this.num[c]},getLength:function(){return this.num.length},multiply:function(g){for(var l=Array(this.getLength()+g.getLength()-1),k=0;k<this.getLength();k++){for(var h=0;h<g.getLength();h++){l[k+h]^=QRMath.gexp(QRMath.glog(this.get(k))+QRMath.glog(g.get(h)))}}return new QRPolynomial(l,0)},mod:function(g){if(0>this.getLength()-g.getLength()){return this}for(var l=QRMath.glog(this.get(0))-QRMath.glog(g.get(0)),k=Array(this.getLength()),h=0;h<this.getLength();h++){k[h]=this.get(h)}for(h=0;h<g.getLength();h++){k[h]^=QRMath.gexp(QRMath.glog(g.get(h))+l)}return(new QRPolynomial(k,0)).mod(g)}};function QRRSBlock(d,f){this.totalCount=d;this.dataCount=f}QRRSBlock.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];QRRSBlock.getRSBlocks=function(x,w){var v=QRRSBlock.getRsBlockTable(x,w);if(void 0==v){throw Error("bad rs block @ typeNumber:"+x+"/errorCorrectLevel:"+w)}for(var u=v.length/3,t=[],s=0;s<u;s++){for(var r=v[3*s+0],q=v[3*s+1],p=v[3*s+2],o=0;o<r;o++){t.push(new QRRSBlock(q,p))}}return t};QRRSBlock.getRsBlockTable=function(d,f){switch(f){case QRErrorCorrectLevel.L:return QRRSBlock.RS_BLOCK_TABLE[4*(d-1)+0];case QRErrorCorrectLevel.M:return QRRSBlock.RS_BLOCK_TABLE[4*(d-1)+1];case QRErrorCorrectLevel.Q:return QRRSBlock.RS_BLOCK_TABLE[4*(d-1)+2];case QRErrorCorrectLevel.H:return QRRSBlock.RS_BLOCK_TABLE[4*(d-1)+3]}};function QRBitBuffer(){this.buffer=[];this.length=0}QRBitBuffer.prototype={get:function(c){return 1==(this.buffer[Math.floor(c/8)]>>>7-c%8&1)},put:function(f,h){for(var g=0;g<h;g++){this.putBit(1==(f>>>h-g-1&1))}},getLengthInBits:function(){return this.length},putBit:function(d){var f=Math.floor(this.length/8);this.buffer.length<=f&&this.buffer.push(0);d&&(this.buffer[f]|=128>>>this.length%8);this.length++}};(function(c){c.fn.qrcode=function(b){"string"===typeof b&&(b={text:b});b=c.extend({},{render:"canvas",width:256,height:256,typeNumber:-1,correctLevel:QRErrorCorrectLevel.H,background:"#ffffff",foreground:"#000000"},b);return this.each(function(){var x;if("canvas"==b.render){x=new QRCode(b.typeNumber,b.correctLevel);x.addData(b.text);x.make();var w=document.createElement("canvas");w.width=b.width;w.height=b.height;for(var v=w.getContext("2d"),u=b.width/x.getModuleCount(),t=b.height/x.getModuleCount(),s=0;s<x.getModuleCount();s++){for(var r=0;r<x.getModuleCount();r++){v.fillStyle=x.isDark(s,r)?b.foreground:b.background;var q=Math.ceil((r+1)*u)-Math.floor(r*u),o=Math.ceil((s+1)*u)-Math.floor(s*u);v.fillRect(Math.round(r*u),Math.round(s*t),q,o)}}}else{for(x=new QRCode(b.typeNumber,b.correctLevel),x.addData(b.text),x.make(),w=c("<table></table>").css("width",b.width+"px").css("height",b.height+"px").css("border","0px").css("border-collapse","collapse").css("background-color",b.background),v=b.width/x.getModuleCount(),u=b.height/x.getModuleCount(),t=0;t<x.getModuleCount();t++){for(s=c("<tr></tr>").css("height",u+"px").appendTo(w),r=0;r<x.getModuleCount();r++){c("<td></td>").css("width",v+"px").css("background-color",x.isDark(t,r)?b.foreground:b.background).appendTo(s)}}}x=w;jQuery(x).appendTo(this)})}})(jQuery);!function(aX,aW,aU,aS){function aR(f,h,g){return Array.isArray(f)?(aQ(f,g[h],g),!0):!1}function aQ(f,l,k){var h;if(f){if(f.forEach){f.forEach(l,k)}else{if(f.length!==aS){for(h=0;h<f.length;){l.call(k,f[h],h,f),h++}}else{for(h in f){f.hasOwnProperty(h)&&l.call(k,f[h],h,f)}}}}}function aN(l,k,h){var b="DEPRECATED METHOD: "+k+"\n"+h+" AT \n";return function(){var g=Error("get-stack-trace"),g=g&&g.stack?g.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",c=aX.console&&(aX.console.warn||aX.console.log);return c&&c.call(aX.console,b,g),l.apply(this,arguments)}}function aM(g,l,k){var h=l.prototype;l=g.prototype=Object.create(h);l.constructor=g;l._super=h;k&&bh(l,k)}function aL(d,f){return function(){return d.apply(f,arguments)}}function aK(d,f){return typeof d==bV?d.apply(f?f[0]||aS:aS,f):d}function aH(f,h,g){aQ(aF(h),function(b){"undefined"!=typeof window.addEventListener?f.addEventListener(b,g,!1):f.attachEvent(b,g)})}function aG(f,h,g){aQ(aF(h),function(b){"undefined"!=typeof window.removeEventListener?f.removeEventListener(b,g,!1):f.detachEvent(b,g)})}function aD(d,f){for(;d;){if(d==f){return !0}d=d.parentNode}return !1}function aF(c){return c.trim().split(/\s+/g)}function aE(g,l,k){if(g.indexOf&&!k){return g.indexOf(l)}for(var h=0;h<g.length;){if(k&&g[h][k]==l||!k&&g[h]===l){return h}h++}return -1}function aB(c){return Array.prototype.slice.call(c,0)}function aC(l,s,r){for(var q=[],p=[],n=0;n<l.length;){var m=s?l[n][s]:l[n];0>aE(p,m)&&q.push(l[n]);p[n]=m;n++}return r&&(q=s?q.sort(function(c,f){return c[s]>f[s]}):q.sort()),q}function ay(f,q){if(q&&q[0]){for(var p,n,m=q[0].toUpperCase()+q.slice(1),l=0;l<bC.length;){if(p=bC[l],n=p?p+m:q,n in f){return n}l++}return aS}}function ax(b){b=b.ownerDocument||b;return b.defaultView||b.parentWindow||aX}function aA(f,h){var g=this;this.manager=f;this.callback=h;this.element=f.element;this.target=f.options.inputTarget;this.domHandler=function(b){aK(f.options.enable,[f])&&g.handler(b)};this.init()}function aw(d){var f=d.options.inputClass;return new (f?f:bL?bl:bB?a5:bR?bg:bt)(d,by)}function by(u,t,s){var r=s.pointers.length,q=s.changedPointers.length,p=t&bq&&0===r-q,r=t&(bw|bp)&&0===r-q;s.isFirst=!!p;s.isFinal=!!r;p&&(u.session={});s.eventType=t;t=u.session;p=s.pointers;r=p.length;t.firstInput||(t.firstInput=br(s));1<r&&!t.firstMultiple?t.firstMultiple=br(s):1===r&&(t.firstMultiple=!1);var q=t.firstInput,n=(r=t.firstMultiple)?r.center:q.center,f=s.center=bu(p);s.timeStamp=bK();s.deltaTime=s.timeStamp-q.timeStamp;s.angle=a8(n,f);s.distance=bz(n,f);var q=s.center,n=t.offsetDelta||{},f=t.prevDelta||{},v=t.prevInput||{};s.eventType!==bq&&v.eventType!==bw||(f=t.prevDelta={x:v.deltaX||0,y:v.deltaY||0},n=t.offsetDelta={x:q.x,y:q.y});s.deltaX=f.x+(q.x-n.x);s.deltaY=f.y+(q.y-n.y);s.offsetDirection=bj(s.deltaX,s.deltaY);q=s.deltaX/s.deltaTime||0;n=s.deltaY/s.deltaTime||0;s.overallVelocityX=q;s.overallVelocityY=n;s.overallVelocity=a4(q)>a4(n)?q:n;s.scale=r?bz(p[0],p[1],ag)/bz(r.pointers[0],r.pointers[1],ag):1;s.rotation=r?a8(p[1],p[0],ag)+a8(r.pointers[1],r.pointers[0],ag):0;s.maxPointers=t.prevInput?s.pointers.length>t.prevInput.maxPointers?s.pointers.length:t.prevInput.maxPointers:s.pointers.length;n=t.lastInterval||s;p=s.timeStamp-n.timeStamp;s.eventType!=bp&&(p>aZ||n.velocity===aS)?(q=s.deltaX-n.deltaX,n=s.deltaY-n.deltaY,f=q/p||0,v=n/p||0,p=f,r=v,f=a4(f)>a4(v)?f:v,q=bj(q,n),t.lastInterval=s):(f=n.velocity,p=n.velocityX,r=n.velocityY,q=n.direction);s.velocity=f;s.velocityX=p;s.velocityY=r;s.direction=q;t=u.element;aD(s.srcEvent.target,t)&&(t=s.srcEvent.target);s.target=t;u.emit("hammer.input",s);u.recognize(s);u.session.prevInput=s}function br(f){for(var h=[],g=0;g<f.pointers.length;){h[g]={clientX:bF(f.pointers[g].clientX),clientY:bF(f.pointers[g].clientY)},g++}return{timeStamp:bK(),pointers:h,center:bu(h),deltaX:f.deltaX,deltaY:f.deltaY}}function bu(h){var n=h.length;if(1===n){return{x:bF(h[0].clientX),y:bF(h[0].clientY)}}for(var m=0,l=0,k=0;n>k;){m+=h[k].clientX,l+=h[k].clientY,k++}return{x:bF(m/n),y:bF(l/n)}}function bj(d,f){return d===f?bS:a4(d)>=a4(f)?0>d?ao:af:0>f?bQ:bG}function bz(g,l,k){k||(k=bH);var h=l[k[0]]-g[k[0]];g=l[k[1]]-g[k[1]];return Math.sqrt(h*h+g*g)}function a8(f,h,g){g||(g=bH);return 180*Math.atan2(h[g[1]]-f[g[1]],h[g[0]]-f[g[0]])/Math.PI}function bt(){this.evEl=av;this.evWin=al;this.pressed=!1;aA.apply(this,arguments)}function bl(){this.evEl=bo;this.evWin=aP;aA.apply(this,arguments);this.store=this.manager.session.pointerEvents=[]}function bm(){this.evTarget=ac;this.evWin=bN;this.started=!1;aA.apply(this,arguments)}function a5(){this.evTarget=bD;this.targetIds={};aA.apply(this,arguments)}function a3(m,u){var t=aB(m.touches),s=this.targetIds;if(u&(bq|a2)&&1===t.length){return s[t[0].identifier]=!0,[t,t]}var r,q=aB(m.changedTouches),p=[],n=this.target;if(r=t.filter(function(c){return aD(c.target,n)}),u===bq){for(t=0;t<r.length;){s[r[t].identifier]=!0,t++}}for(t=0;t<q.length;){s[q[t].identifier]&&p.push(q[t]),u&(bw|bp)&&delete s[q[t].identifier],t++}return p.length?[aC(r.concat(p),"identifier",!0),p]:void 0}function bg(){aA.apply(this,arguments);var c=aL(this.handler,this);this.touch=new a5(this.manager,c);this.mouse=new bt(this.manager,c);this.primaryTouch=null;this.lastTouches=[]}function aO(f){f=f.changedPointers[0];if(f.identifier===this.primaryTouch){var h={x:f.clientX,y:f.clientY};this.lastTouches.push(h);var g=this.lastTouches;setTimeout(function(){var c=g.indexOf(h);-1<c&&g.splice(c,1)},a1)}}function a7(d,f){this.manager=d;this.set(f)}function az(f){if(-1<f.indexOf(bf)){return bf}var h=-1<f.indexOf(bI),g=-1<f.indexOf(bs);return h&&g?bf:h||g?h?bI:bs:-1<f.indexOf(bA)?bA:aq}function be(c){this.options=bh({},this.defaults,c||{});this.id=am++;this.manager=null;this.options.enable=this.options.enable===aS?!0:this.options.enable;this.state=aT;this.simultaneous={};this.requireFail=[]}function ah(c){return c&ap?"cancel":c&a6?"end":c&aJ?"move":c&bn?"start":""}function bT(c){return c==bG?"down":c==bQ?"up":c==ao?"left":c==af?"right":""}function ar(f,h){var g=h.manager;return g?g.get(f):f}function bk(){be.apply(this,arguments)}function ai(){bk.apply(this,arguments);this.pY=this.pX=null}function aY(){bk.apply(this,arguments)}function au(){be.apply(this,arguments);this._input=this._timer=null}function ak(){bk.apply(this,arguments)}function o(){bk.apply(this,arguments)}function bU(){be.apply(this,arguments);this.pCenter=this.pTime=!1;this._input=this._timer=null;this.count=0}function bc(d,f){return f=f||{},f.recognizers=f.recognizers===aS?bc.defaults.preset:f.recognizers,new bM(d,f)}function bM(d,f){this.options=bh({},bc.defaults,f||{});this.options.inputTarget=this.options.inputTarget||d;this.handlers={};this.session={};this.recognizers=[];this.element=d;this.input=aw(this);this.touchAction=new a7(this,this.options.touchAction);bJ(this,!0);aQ(this.options.recognizers,function(g){var h=this.add(new g[0](g[1]));g[2]&&h.recognizeWith(g[2]);g[3]&&h.requireFailure(g[3])},this)}function bJ(f,h){var g=f.element;g.style&&aQ(f.options.cssProps,function(c,d){g.style[ay(g.style,d)]=h?c:""})}function ad(c,h){var g=aW.createEvent("Event");g.initEvent(c,!0,!0);g.gesture=h;h.target.dispatchEvent(g)}var bh,bC=" webkit Moz MS ms o".split(" "),bO=aW.createElement("div"),bV="function",bF=Math.round,a4=Math.abs,bK=Date.now;bh="function"!=typeof Object.assign?function(f){if(f===aS||null===f){throw new TypeError("Cannot convert undefined or null to object")}for(var n=Object(f),m=1;m<arguments.length;m++){var l=arguments[m];if(l!==aS&&null!==l){for(var k in l){l.hasOwnProperty(k)&&(n[k]=l[k])}}}return n}:Object.assign;var bv=aN(function(f,n,m){for(var l=Object.keys(n),k=0;k<l.length;){(!m||m&&f[l[k]]===aS)&&(f[l[k]]=n[l[k]]),k++}return f},"extend","Use `assign`."),bx=aN(function(d,f){return bv(d,f,!0)},"merge","Use `assign`."),am=1,bE=/mobile|tablet|ip(ad|hone|od)|android/i,bR="ontouchstart" in aX,bL=ay(aX,"PointerEvent")!==aS,bB=bR&&bE.test(navigator.userAgent),aZ=25,bq=1,a2=2,bw=4,bp=8,bS=1,ao=2,af=4,bQ=8,bG=16,bi=ao|af,a0=bQ|bG,aV=bi|a0,bH=["x","y"],ag=["clientX","clientY"];aA.prototype={handler:function(){},init:function(){this.evEl&&aH(this.element,this.evEl,this.domHandler);this.evTarget&&aH(this.target,this.evTarget,this.domHandler);this.evWin&&aH(ax(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&aG(this.element,this.evEl,this.domHandler);this.evTarget&&aG(this.target,this.evTarget,this.domHandler);this.evWin&&aG(ax(this.element),this.evWin,this.domHandler)}};var bd={mousedown:bq,mousemove:a2,mouseup:bw},av="mousedown",al="mousemove mouseup";aM(bt,aA,{handler:function(d){var f=bd[d.type];f&bq&&0===d.button&&(this.pressed=!0);f&a2&&1!==d.which&&(f=bw);this.pressed&&(f&bw&&(this.pressed=!1),this.callback(this.manager,f,{pointers:[d],changedPointers:[d],pointerType:"mouse",srcEvent:d}))}});var aI={pointerdown:bq,pointermove:a2,pointerup:bw,pointercancel:bp,pointerout:bp},an={2:"touch",3:"pen",4:"mouse",5:"kinect"},bo="pointerdown",aP="pointermove pointerup pointercancel";aX.MSPointerEvent&&!aX.PointerEvent&&(bo="MSPointerDown",aP="MSPointerMove MSPointerUp MSPointerCancel");aM(bl,aA,{handler:function(l){var s=this.store,r=!1,q=l.type.toLowerCase().replace("ms",""),q=aI[q],p=an[l.pointerType]||l.pointerType,n="touch"==p,m=aE(s,l.pointerId,"pointerId");q&bq&&(0===l.button||n)?0>m&&(s.push(l),m=s.length-1):q&(bw|bp)&&(r=!0);0>m||(s[m]=l,this.callback(this.manager,q,{pointers:s,changedPointers:[l],pointerType:p,srcEvent:l}),r&&s.splice(m,1))}});var ae={touchstart:bq,touchmove:a2,touchend:bw,touchcancel:bp},ac="touchstart",bN="touchstart touchmove touchend touchcancel";aM(bm,aA,{handler:function(g){var l=ae[g.type];if(l===bq&&(this.started=!0),this.started){var k,h=aB(g.touches);k=aB(g.changedTouches);k=(l&(bw|bp)&&(h=aC(h.concat(k),"identifier",!0)),[h,k]);l&(bw|bp)&&0===k[0].length-k[1].length&&(this.started=!1);this.callback(this.manager,l,{pointers:k[0],changedPointers:k[1],pointerType:"touch",srcEvent:g})}}});var bP={touchstart:bq,touchmove:a2,touchend:bw,touchcancel:bp},bD="touchstart touchmove touchend touchcancel";aM(a5,aA,{handler:function(f){var h=bP[f.type],g=a3.call(this,f,h);g&&this.callback(this.manager,h,{pointers:g[0],changedPointers:g[1],pointerType:"touch",srcEvent:f})}});var a1=2500;aM(bg,aA,{handler:function(m,u,t){var s="touch"==t.pointerType,r="mouse"==t.pointerType;if(!(r&&t.sourceCapabilities&&t.sourceCapabilities.firesTouchEvents)){if(s){u&bq?(this.primaryTouch=t.changedPointers[0].identifier,aO.call(this,t)):u&(bw|bp)&&aO.call(this,t)}else{if(s=r){a:{for(var s=t.srcEvent.clientX,r=t.srcEvent.clientY,q=0;q<this.lastTouches.length;q++){var p=this.lastTouches[q],n=Math.abs(s-p.x),p=Math.abs(r-p.y);if(25>=n&&25>=p){s=!0;break a}}s=!1}}if(s){return}}this.callback(m,u,t)}},destroy:function(){this.touch.destroy();this.mouse.destroy()}});var at=ay(bO.style,"touchAction"),aj=at!==aS,aq="auto",bA="manipulation",bf="none",bI="pan-x",bs="pan-y";a7.prototype={set:function(c){"compute"==c&&(c=this.compute());aj&&this.manager.element.style&&(this.manager.element.style[at]=c);this.actions=c.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var c=[];return aQ(this.manager.recognizers,function(b){aK(b.options.enable,[b])&&(c=c.concat(b.getTouchAction()))}),az(c.join(" "))},preventDefaults:function(m){if(!aj){var u=m.srcEvent,t=m.offsetDirection;if(!this.manager.session.prevented){void u.preventDefault();var s=this.actions,r=-1<s.indexOf(bf),q=-1<s.indexOf(bs),s=-1<s.indexOf(bI);if(r){var p=2>m.distance,n=250>m.deltaTime;if(1===m.pointers.length&&p&&n){return}}if(!s||!q){return r||q&&t&bi||s&&t&a0?this.preventSrc(u):void 0}}}},preventSrc:function(c){this.manager.session.prevented=!0;c.preventDefault()}};var aT=1,bn=2,aJ=4,a6=8,a9=a6,ap=16;be.prototype={defaults:{},set:function(c){return bh(this.options,c),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(d){if(aR(d,"recognizeWith",this)){return this}var f=this.simultaneous;return d=ar(d,this),f[d.id]||(f[d.id]=d,d.recognizeWith(this)),this},dropRecognizeWith:function(c){return aR(c,"dropRecognizeWith",this)?this:(c=ar(c,this),delete this.simultaneous[c.id],this)},requireFailure:function(d){if(aR(d,"requireFailure",this)){return this}var f=this.requireFail;return d=ar(d,this),-1===aE(f,d)&&(f.push(d),d.requireFailure(this)),this},dropRequireFailure:function(c){if(aR(c,"dropRequireFailure",this)){return this}c=ar(c,this);c=aE(this.requireFail,c);return -1<c&&this.requireFail.splice(c,1),this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(c){return !!this.simultaneous[c.id]},emit:function(g){function l(b){k.manager.emit(b,g)}var k=this,h=this.state;a6>h&&l(k.options.event+ah(h));l(k.options.event);g.additionalEvent&&l(g.additionalEvent);h>=a6&&l(k.options.event+ah(h))},tryEmit:function(c){return this.canEmit()?this.emit(c):void (this.state=32)},canEmit:function(){for(var c=0;c<this.requireFail.length;){if(!(this.requireFail[c].state&(32|aT))){return !1}c++}return !0},recognize:function(c){c=bh({},c);return aK(this.options.enable,[this,c])?(this.state&(a9|ap|32)&&(this.state=aT),this.state=this.process(c),void (this.state&(bn|aJ|a6|ap)&&this.tryEmit(c))):(this.reset(),void (this.state=32))},process:function(c){},getTouchAction:function(){},reset:function(){}};aM(bk,be,{defaults:{pointers:1},attrTest:function(d){var f=this.options.pointers;return 0===f||d.pointers.length===f},process:function(g){var l=this.state,k=g.eventType,h=l&(bn|aJ);g=this.attrTest(g);return h&&(k&bp||!g)?l|ap:h||g?k&bw?l|a6:l&bn?l|aJ:bn:32}});aM(ai,bk,{defaults:{event:"pan",threshold:10,pointers:1,direction:aV},getTouchAction:function(){var d=this.options.direction,f=[];return d&bi&&f.push(bs),d&a0&&f.push(bI),f},directionTest:function(l){var s=this.options,r=!0,q=l.distance,p=l.direction,n=l.deltaX,m=l.deltaY;return p&s.direction||(s.direction&bi?(p=0===n?bS:0>n?ao:af,r=n!=this.pX,q=Math.abs(l.deltaX)):(p=0===m?bS:0>m?bQ:bG,r=m!=this.pY,q=Math.abs(l.deltaY))),l.direction=p,r&&q>s.threshold&&p&s.direction},attrTest:function(c){return bk.prototype.attrTest.call(this,c)&&(this.state&bn||!(this.state&bn)&&this.directionTest(c))},emit:function(d){this.pX=d.deltaX;this.pY=d.deltaY;var f=bT(d.direction);f&&(d.additionalEvent=this.options.event+f);this._super.emit.call(this,d)}});aM(aY,bk,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[bf]},attrTest:function(c){return this._super.attrTest.call(this,c)&&(Math.abs(c.scale-1)>this.options.threshold||this.state&bn)},emit:function(c){1!==c.scale&&(c.additionalEvent=this.options.event+(1>c.scale?"in":"out"));this._super.emit.call(this,c)}});aM(au,be,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[aq]},process:function(h){var n=this.options,m=h.pointers.length===n.pointers,l=h.distance<n.threshold,k=h.deltaTime>n.time;if(this._input=h,!l||!m||h.eventType&(bw|bp)&&!k){this.reset()}else{if(h.eventType&bq){this.reset(),this._timer=setTimeout(aL(function(){this.state=a9;this.tryEmit()},this),n.time)}else{if(h.eventType&bw){return a9}}}return 32},reset:function(){clearTimeout(this._timer)},emit:function(c){this.state===a9&&(c&&c.eventType&bw?this.manager.emit(this.options.event+"up",c):(this._input.timeStamp=bK(),this.manager.emit(this.options.event,this._input)))}});aM(ak,bk,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[bf]},attrTest:function(c){return this._super.attrTest.call(this,c)&&(Math.abs(c.rotation)>this.options.threshold||this.state&bn)}});aM(o,bk,{defaults:{event:"swipe",threshold:10,velocity:0.3,direction:bi|a0,pointers:1},getTouchAction:function(){return ai.prototype.getTouchAction.call(this)},attrTest:function(f){var h,g=this.options.direction;return g&(bi|a0)?h=f.overallVelocity:g&bi?h=f.overallVelocityX:g&a0&&(h=f.overallVelocityY),this._super.attrTest.call(this,f)&&g&f.offsetDirection&&f.distance>this.options.threshold&&f.maxPointers==this.options.pointers&&a4(h)>this.options.velocity&&f.eventType&bw},emit:function(d){var f=bT(d.offsetDirection);f&&this.manager.emit(this.options.event+f,d);this.manager.emit(this.options.event,d)}});aM(bU,be,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[bA]},process:function(h){var n=this.options,m=h.pointers.length===n.pointers,l=h.distance<n.threshold,k=h.deltaTime<n.time;if(this.reset(),h.eventType&bq&&0===this.count){return this.failTimeout()}if(l&&k&&m){if(h.eventType!=bw){return this.failTimeout()}m=this.pTime?h.timeStamp-this.pTime<n.interval:!0;l=!this.pCenter||bz(this.pCenter,h.center)<n.posThreshold;this.pTime=h.timeStamp;this.pCenter=h.center;l&&m?this.count+=1:this.count=1;this._input=h;if(0===this.count%n.taps){return this.hasRequireFailures()?(this._timer=setTimeout(aL(function(){this.state=a9;this.tryEmit()},this),n.interval),bn):a9}}return 32},failTimeout:function(){return this._timer=setTimeout(aL(function(){this.state=32},this),this.options.interval),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==a9&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});bc.VERSION="2.0.7";bc.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[ak,{enable:!1}],[aY,{enable:!1},["rotate"]],[o,{direction:bi}],[ai,{direction:bi},["swipe"]],[bU],[bU,{event:"doubletap",taps:2},["tap"]],[au]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};bM.prototype={set:function(c){return bh(this.options,c),c.touchAction&&this.touchAction.update(),c.inputTarget&&(this.input.destroy(),this.input.target=c.inputTarget,this.input.init()),this},stop:function(c){this.session.stopped=c?2:1},recognize:function(k){var q=this.session;if(!q.stopped){this.touchAction.preventDefaults(k);var p,n=this.recognizers,m=q.curRecognizer;(!m||m&&m.state&a9)&&(m=q.curRecognizer=null);for(var l=0;l<n.length;){p=n[l],2===q.stopped||m&&p!=m&&!p.canRecognizeWith(m)?p.reset():p.recognize(k),!m&&p.state&(bn|aJ|a6)&&(m=q.curRecognizer=p),l++}}},get:function(f){if(f instanceof be){return f}for(var h=this.recognizers,g=0;g<h.length;g++){if(h[g].options.event==f){return h[g]}}return null},add:function(d){if(aR(d,"add",this)){return this}var f=this.get(d.options.event);return f&&this.remove(f),this.recognizers.push(d),d.manager=this,this.touchAction.update(),d},remove:function(d){if(aR(d,"remove",this)){return this}if(d=this.get(d)){var f=this.recognizers;d=aE(f,d);-1!==d&&(f.splice(d,1),this.touchAction.update())}return this},on:function(f,h){var g=this.handlers;return aQ(aF(f),function(c){g[c]=g[c]||[];g[c].push(h)}),this},off:function(f,h){var g=this.handlers;return aQ(aF(f),function(c){h?g[c]&&g[c].splice(aE(g[c],h),1):delete g[c]}),this},emit:function(g,l){this.options.domEvents&&ad(g,l);var k=this.handlers[g]&&this.handlers[g].slice();if(k&&k.length){l.type=g;l.preventDefault=function(){l.srcEvent.preventDefault()};for(var h=0;h<k.length;){k[h](l),h++}}},destroy:function(){this.element&&bJ(this,!1);this.handlers={};this.session={};this.input.destroy();this.element=null}};bh(bc,{INPUT_START:bq,INPUT_MOVE:a2,INPUT_END:bw,INPUT_CANCEL:bp,STATE_POSSIBLE:aT,STATE_BEGAN:bn,STATE_CHANGED:aJ,STATE_ENDED:a6,STATE_RECOGNIZED:a9,STATE_CANCELLED:ap,STATE_FAILED:32,DIRECTION_NONE:bS,DIRECTION_LEFT:ao,DIRECTION_RIGHT:af,DIRECTION_UP:bQ,DIRECTION_DOWN:bG,DIRECTION_HORIZONTAL:bi,DIRECTION_VERTICAL:a0,DIRECTION_ALL:aV,Manager:bM,Input:aA,TouchAction:a7,TouchInput:a5,MouseInput:bt,PointerEventInput:bl,TouchMouseInput:bg,SingleTouchInput:bm,Recognizer:be,AttrRecognizer:bk,Tap:bU,Pan:ai,Swipe:o,Pinch:aY,Rotate:ak,Press:au,on:aH,off:aG,each:aQ,merge:bx,extend:bv,assign:bh,inherit:aM,bindFn:aL,prefixed:ay});("undefined"!=typeof aX?aX:"undefined"!=typeof self?self:{}).Hammer=bc;"function"==typeof define&&define.amd?define(function(){return bc}):"undefined"!=typeof module&&module.exports?module.exports=bc:aX[aU]=bc}(window,document,"Hammer");jQuery.fn.IEZoom=function(g){this.options=g;this.middleScale=3;this.maxScale=6;this.side=g.side;this.parameters={width:$(this).width()||0,height:$(this).height()||0,naturalWidth:$(this).width()||0,naturalHeight:$(this).height()||0,left:parseInt($(this).css("left"))||0,top:parseInt($(this).css("top"))||0,naturalLeft:parseInt($(this).css("left"))||0,naturalTop:parseInt($(this).css("top"))||0,scale:1,rotate:0,toScale:1,tran:{x:0,y:0},origin:{x:50,y:50},zoomFlag:!1,zoomming:!1,zoonOut:!1,resize:!1,eventCancel:!1};this.onPan=function(c){if(!this.parameters.resize&&!this.parameters.eventCancel&&!this.parameters.zoomming&&c&&c.pointers&&1==c.pointers.length&&(this.swipeInterval&&this.swipeInterval.stop(),this.animateInterval&&this.animateInterval.stop(),this.parameters.zoomFlag&&(this.panForMove(this,c.deltaX,c.deltaY,!0),this.options&&this.options.onPan))){this.options.onPan()}};this.onDoubleTap=function(d){if(!(BookInfo.getBook().status_resize||BookInfo.getBook().flipping||(BookInfo.getBook().endFlip(),global.windowTapInterval&&window.clearTimeout(global.windowTapInterval),this.parameters.resize||this.parameters.eventCancel||this.parameters.zoomming))){if(this.status_zoom=!0,!this.parameters.zoomFlag){this.zoomIn(this),this.parameters.zoomOut=!1,this.animateToScale(this,this.middleScale,d)}else{if(this.parameters.zoomFlag){var f=this.parameters.naturalWidth/this.parameters.width;this.parameters.zoomOut=!0;this.animateToScale(this,f,d)}}}};this.zoomIn=function(c){c.parameters.left=parseInt($(c).css("left"));c.parameters.top=parseInt($(c).css("top"));c.parameters.naturalLeft=c.parameters.left;c.parameters.naturalTop=c.parameters.top;c.parameters.width=$(c).width();c.parameters.height=$(c).height();c.parameters.naturalWidth=$(c).width();c.parameters.naturalHeight=$(c).height();c.parameters.zoomFlag=!0;c.parameters.zoomOut=!1;c.options&&c.options.zoomIn&&c.options.zoomIn()};this.zoomOut=function(c){c.swipeInterval&&c.swipeInterval.stop();c.animateInterval&&c.animateInterval.stop();c.parameters.zoomFlag=!1;c.parameters.zoomOut=!0;c.parameters.toScale=1;c.parameters.scale=1;c.options&&c.options.zoomOut&&c.options.zoomOut()};this.animateToScale=function(r,x,v){if(!r.parameters.eventCancel&&!r.parameters.zoomming){r.options&&r.options.zoomStart&&r.options.zoomStart();r.parameters.zoomming=!0;var t=0,o=0,w=0,u=0,s=0;r.animateInterval=function(f,b){t=$.easing.swing(null,w,r.parameters.width,r.parameters.width*(x-1),20);o=$.easing.swing(null,w,r.parameters.height,r.parameters.height*(x-1),20);u=$.easing.swing(null,w,r.parameters.left,r.parameters.naturalLeft+50*(r.parameters.naturalWidth-r.parameters.width*x)/100-r.parameters.left,20);s=$.easing.swing(null,w,r.parameters.top,r.parameters.naturalTop+50*(r.parameters.naturalHeight-r.parameters.height*x)/100-r.parameters.top,20);r.css({width:t+"px",height:o+"px",left:u+"px",top:s+"px"});for(var c=0;c<r.side.pageArray.length;c++){if(r.side.pageArray[c]){r.side.pageArray[c].onResize(t/2,o)}}w++;if(20<=w||f>=b){r.animateInterval.stop();r.parameters.left=r.parameters.naturalLeft+50*(r.parameters.naturalWidth-r.parameters.width*x)/100;r.parameters.top=r.parameters.naturalTop+50*(r.parameters.naturalHeight-r.parameters.height*x)/100;r.parameters.width*=x;r.parameters.height*=x;r.css({width:r.parameters.width+"px",height:r.parameters.height+"px",left:r.parameters.left+"px",top:r.parameters.top+"px"});for(c=0;c<r.side.pageArray.length;c++){if(r.side.pageArray[c]){r.side.pageArray[c].onResize(r.parameters.width/2,r.parameters.height)}}r.parameters.zoomming=!1;1>=r.parameters.width*r.parameters.scale/r.parameters.naturalWidth&&r.zoomOut(r)}}.runInAnimate(this,320)}};this.panForMove=function(m,p,o,n){m.css({left:m.parameters.left+p+"px",top:m.parameters.top+o+"px"})};var l=!1,k=0,h=0;this.dblclick(function(c){c.pointers=[{pageX:c.pageX,pageY:c.pageY}];this.onDoubleTap(c)}.bind(this));this.bind(_event._down,function(c){l=!0;k=c.pageX;h=c.pageY}.bind(this));this.bind(_event._move,function(c){c.pointers=[{pageX:c.pageX,pageY:c.pageY}];l&&(c.deltaX=c.pageX-k,c.deltaY=c.pageY-h,this.onPan(c))}.bind(this));this.bind(_event._end,function(c){l=!1;this.parameters.left+=c.pageX-k;this.parameters.top+=c.pageY-h}.bind(this))};jQuery.fn.zoom=function(c){this.options=c;this.middleScale=3;this.maxScale=6;this.parameters={width:$(this).width()||0,height:$(this).height()||0,naturalWidth:$(this).width()||0,naturalHeight:$(this).height()||0,left:$(this).offset().left||0,top:$(this).offset().top||0,scale:1,rotate:0,toScale:1,tran:{x:0,y:0},origin:{x:50,y:50},zoomFlag:!1,zoomming:!1,zoonOut:!1,resize:!1,eventCancel:!1};this.onPan=function(f){if(!this.parameters.resize&&!this.parameters.eventCancel&&!this.parameters.zoomming&&f&&f.pointers&&1==f.pointers.length&&(this.swipeInterval&&this.swipeInterval.stop(),this.animateInterval&&this.animateInterval.stop(),this.parameters.zoomFlag)){var g=this.panForMove(this,f.deltaX,f.deltaY,!0);if(this.options&&this.options.onPan){this.options.onPan()}if("panend"==f.type||"pancancel"==f.type){this.setZoomParameters(this,g),this.restrictInBoundary(this)}}};this.onSwipe=function(k){if(!this.parameters.resize&&!this.parameters.eventCancel&&!this.parameters.zoomming){if(this.parameters.zoomFlag){var o=this.parameters.tran,n=this.tranLimit(this,this.parameters.scale,this.parameters.tran);if(n.x==parseInt(o.x)&&n.y==parseInt(o.y)){this.animateInterval&&this.animateInterval.stop();this.swipeInterval&&this.swipeInterval.stop();var m=0,l=0;0!=k.velocityX&&(m=k.velocityX);0!=k.velocityY&&(l=k.velocityY);this.swipeInterval=function(g,q){var p=this.parameters.tran,h=this.tranLimit(this,this.parameters.scale,this.parameters.tran);h.x!=parseInt(p.x)||h.y!=parseInt(p.y)?(this.swipeInterval.stop(),this.restrictInBoundary(this)):(p=(q-g)/q,p=this.panForMove(this,m*p*16.7,l*p*16.7,!0),this.setZoomParameters(this,p),g>=q&&(this.swipeInterval.stop(),this.restrictInBoundary(this)))}.runInAnimate(this,320)}}else{k.direction&Hammer.DIRECTION_RIGHT&&(o="right"),k.direction&Hammer.DIRECTION_LEFT&&(o="left"),k.direction&Hammer.DIRECTION_UP&&(o="up"),k.direction&Hammer.DIRECTION_DOWN&&(o="down"),this.options&&this.options.swipeend&&this.options.swipeend(o)}}};this.onDoubleTap=function(f){if(!(BookInfo.getBook().status_resize||BookInfo.getBook().flipping||(BookInfo.getBook().endFlip(),global.windowTapInterval&&window.clearTimeout(global.windowTapInterval),this.parameters.resize||this.parameters.eventCancel||this.parameters.zoomming))){if(this.status_zoom=!0,!this.parameters.zoomFlag){this.zoomIn(this),this.parameters.origin=this.mathOrigin(this,f),this.originObj(this,this.parameters.origin),this.parameters.zoomOut=!1,this.animateToScale(this,this.middleScale,f)}else{if(this.parameters.zoomFlag){var g=this.parameters.naturalWidth/this.parameters.width;this.parameters.zoomOut=!0;this.animateToScale(this,g,f)}}}};this.onPinch=function(f){"pinchstart"==f.type&&(this.pinchStart=!0);if(!(this.parameters.resize||this.parameters.eventCancel||this.parameters.zoomming||!this.parameters.zoomFlag&&1>=f.scale)&&f&&f.pointers){this.animateInterval&&this.animateInterval.stop();this.swipeInterval&&this.swipeInterval.stop();var g=function(){this.pinchStart=!1;this.parameters.zoomFlag||(this.parameters.zoomOut=!1,this.zoomIn(this));this.scale=this.parameters.toScale;this.parameters.origin=this.mathOrigin(this,f);this.originObj(this,this.parameters.origin);this.pinchMoveIn(this,parseFloat(this.scale)*parseFloat(f.scale),f,this.parameters.origin)}.bind(this);"pinchstart"==f.type&&g(f);"pinchend"==f.type&&(this.parameters.scale=this.parameters.toScale,this.exceedScale(this,f),this.pinchStart=!1);"pinchmove"==f.type&&(this.pinchStart&&g(f),this.pinchMoveIn(this,parseFloat(this.scale)*parseFloat(f.scale),f,this.parameters.origin));"pinchcancel"==f.type&&(this.parameters.scale=this.parameters.toScale,this.exceedScale(this,f),this.pinchStart=!1)}};this.exceedScale=function(o,u){var t=o.parameters.width*o.parameters.toScale/o.parameters.naturalWidth,s=o.parameters.width*o.parameters.toScale,r=o.parameters.height*o.parameters.toScale,q=o.parameters.naturalWidth*o.maxScale/o.parameters.width,p=o.parameters.naturalWidth/o.parameters.width,n=o.parameters.toScale;t>o.maxScale&&(n=q);if(1>t||s<windowWidth&&r<windowHeight){o.parameters.zoomOut=!0,n=p}o.animateToScale(o,n,u)};this.zoomIn=function(d){d.parameters.tran=getTransform(d[0]);d.parameters.left=$(d).offset().left-d.parameters.tran.x;d.parameters.top=$(d).offset().top-d.parameters.tran.y;d.parameters.width=$(d).width();d.parameters.height=$(d).height();d.parameters.naturalWidth=$(d).width();d.parameters.naturalHeight=$(d).height();d.parameters.zoomFlag=!0;d.parameters.zoomOut=!1;d.options&&d.options.zoomIn&&d.options.zoomIn()};this.zoomOut=function(d){d.swipeInterval&&d.swipeInterval.stop();d.animateInterval&&d.animateInterval.stop();d.parameters.zoomFlag=!1;d.parameters.zoomOut=!0;d.parameters.toScale=1;d.parameters.scale=1;d.options&&d.options.zoomOut&&d.options.zoomOut()};this.tranLimit=function(A,z,y){if(y){if(A.parameters.zoomOut){y={x:0,y:0};y.x=A.parameters.width*(z-1)*A.parameters.origin.x/100;y.y=A.parameters.height*(z-1)*A.parameters.origin.y/100;if((bookType==BookType.normal_book||bookType==BookType.catalog_book)&&bookConfig.retainBookCenter){var x=BookInfo.getBook().getCurrentPageIndex();if(1==x&&!rightToLeft||rightToLeft&&x==totalPageCount){y.x-=A.parameters.width*z/4}if(1==x&&rightToLeft||!rightToLeft&&x==totalPageCount){y.x+=A.parameters.width*z/4}}return y}A.parameters.origin||(A.parameters.origin={x:0,y:0});x=y.x;y=y.y;var w,v,u;w=A.parameters.width;v=A.parameters.height;u=A.parameters.left-A.parameters.origin.x*(z-1)*w/100;A=A.parameters.top-A.parameters.origin.y*(z-1)*v/100;var t=0,s=0,r=0,o=0;w*=z;z*=v;w>windowWidth?(t=windowWidth-w-u,r=-u):(t=-u,r=windowWidth-w-u);z>windowHeight?(s=windowHeight-z-A,o=-A):(s=-A,o=windowHeight-z-A);x=Number.between(x,t,r);y=Number.between(y,s,o);return{x:parseInt(x),y:parseInt(y)}}};this.pinchMoveIn=function(h,m,l){if(!h.parameters.eventCancel&&!h.parameters.zoomming&&l&&l.pointers&&2==l.pointers.length){var k={};k.scale=m;k.tran=h.mathTran(h,l,h.parameters.origin);h.transformSetting(h,k);h.parameters.toScale=m}};this.mathTran=function(m,s,r){if(!s||!s.pointers||0>=s.pointers.length||!r){return{x:0,y:0}}var q,p;1==s.pointers.length&&(q=s.pointers[0].pageX,p=s.pointers[0].pageY);1<s.pointers.length&&(q=(s.pointers[0].pageX+s.pointers[1].pageX)/2,p=(s.pointers[0].pageY+s.pointers[1].pageY)/2);var o,n;n=m.parameters.width;s=m.parameters.height;o=m.parameters.left;m=m.parameters.top;o=(r.x*n/100+o).toFixed(2);r=(r.y*s/100+m).toFixed(2);tranX=q-parseFloat(o);tranY=p-parseFloat(r);return{x:parseFloat(tranX.toFixed(2)),y:parseFloat(tranY.toFixed(2))}};this.mathOrigin=function(l,q){if(!q||!q.pointers||0>=q.pointers.length){return{x:50,y:50}}var p,o;1==q.pointers.length&&(p=q.pointers[0].pageX,o=q.pointers[0].pageY);1<q.pointers.length&&(p=(q.pointers[0].pageX+q.pointers[1].pageX)/2,o=(q.pointers[0].pageY+q.pointers[1].pageY)/2);var n,m;n=l.parameters.width;m=l.parameters.height;p=(p-parseInt(l.offset().left))/(n*l.parameters.scale);o=(o-parseInt(l.offset().top))/(m*l.parameters.scale);return{x:(100*p).toFixed(2),y:(100*o).toFixed(2)}};this.animateToScale=function(h,m,l){if(!h.parameters.eventCancel&&!h.parameters.zoomming){h.options&&h.options.zoomStart&&h.options.zoomStart();h.parameters.zoomming=!0;var k={};k.origin=h.parameters.origin;k.scale=m;k.tran=this.mathTran(h,l,k.origin);k.tran=this.tranLimit(h,m,k.tran);l=transformCSS(k);h.originObj(h,k.origin);animateOnce(h,l,300,function(){getTransform(h[0]);h.transformSetting(h,k);h.parameters.scale=m;h.parameters.toScale=m;h.parameters.zoomming=!1;if(h.options.onZoomed){h.options.onZoomed(k)}1>=h.parameters.width*h.parameters.toScale/h.parameters.naturalWidth&&h.zoomOut(h)}.bind(h),"%stransform","ease-in-out")}};this.restrictInBoundary=function(m,s){if(!m.parameters.eventCancel&&!m.parameters.zoomming){var r=m.parameters.tran,q=this.tranLimit(m,m.parameters.scale,r);if(q.x!=parseInt(r.x)||q.y!=parseInt(r.y)){m.animateInterval&&m.animateInterval.stop();var p=0,o=0,n=0;q.x!=r.x&&(p=q.x-r.x);q.y!=r.y&&(o=q.y-r.y);m.animateInterval=function(h,b){var k=$.easing.easeOutBack(null,n,0,p,20),d=$.easing.easeOutBack(null,n,0,o,20);0<n&&(k-=$.easing.easeOutBack(null,n-1,0,p,20),d-=$.easing.easeOutBack(null,n-1,0,o,20));k=m.panForMove(m,k,d);m.setZoomParameters(m,k);n++;if(20<=n||h>=b){m.animateInterval.stop(),s&&"function"==typeof s&&s()}}.runInAnimate(this,320)}}};this.transformSetting=function(g,k){g.setZoomParameters(g,k);var h=transformCSS(k);g.css(h)};this.panForMove=function(k,o,n,m){var l=k.parameters?k.parameters.tran:{x:0,y:0};m=k.parameters?k.parameters.scale:1;l||(l={x:0,y:0});m||0==m||(m=1);o={x:l.x+o,y:l.y+n};n=transformCSS({tran:o,scale:m});k.css(n);return{tran:o,scale:m}};this.originObj=function(f,g){f.css({"-webkit-transform-origin":g.x+"% "+g.y+"%","-moz-transform-origin":g.x+"% "+g.y+"%","-ms-transform-origin":g.x+"% "+g.y+"%","-o-transform-origin":g.x+"% "+g.y+"%"})};this.setZoomParameters=function(h,m){function l(b){return void 0===m[b]||null===m[b]||isNaN(m[b])?h.parameters[b]:m[b]}function k(b){return void 0!==m[b]&&null!==m[b]?m[b]:h.parameters[b]}h&&h.parameters&&m&&(h.parameters={width:l("width"),height:l("height"),naturalWidth:l("naturalWidth"),naturalHeight:l("naturalHeight"),left:l("left"),top:l("top"),scale:l("scale"),rotate:l("rotate"),toScale:l("toScale"),tran:k("tran"),origin:k("origin"),zoomFlag:k("zoomFlag"),zoomming:k("zoomming"),zoomOut:k("zoomOut"),resize:k("resize"),eventCancel:k("eventCancel")})};this.animateToTransform=function(h,m,l){if(!this.parameters.eventCancel&&!this.parameters.zoomming){this.options&&this.options.zoomStart&&this.options.zoomStart();this.parameters.zoomming=!0;this.parameters.tran=getTransform(this[0]);this.parameters.left=$(this).offset().left-this.parameters.tran.x;this.parameters.top=$(this).offset().top-this.parameters.tran.y;this.parameters.width=$(this).width();this.parameters.height=$(this).height();this.parameters.naturalWidth=$(this).width();this.parameters.naturalHeight=$(this).height();var k={};k.origin=this.parameters.origin;k.scale=h;k.tran=m;k.origin=l;m=transformCSS(k);this.originObj(this,k.origin);animateOnce(this,m,300,function(){getTransform(this[0]);this.transformSetting(this,k);this.parameters.scale=h;this.parameters.toScale=h;this.parameters.zoomming=!1;if(this.options.onZoomed){this.options.onZoomed(k)}}.bind(this),"%stransform","ease-in-out")}};this.setCss=function(d){d&&(void 0!=d.width&&(this.css("width",d.width+"px"),this.parameters.width=d.width),void 0!=d.height&&(this.css("height",d.height+"px"),this.parameters.height=d.height),void 0!=d.left&&(this.css("left",d.left+"px"),this.parameters.left=d.left),void 0!=d.top&&(this.css("top",d.top+"px"),this.parameters.top=d.top),void 0!=d.display&&this.css("display",d.display),d.tran||void 0!=d.scale||d.origin)&&(this.parameters.tran=d.tran?d.tran:this.parameters.tran,this.parameters.scale=d.scale?d.scale:this.parameters.scale,this.parameters.origin=d.origin?d.origin:this.parameters.origin,d=transformCSS(d),this.css(d))};this.tranToOffset=function(){if(!this.parameters.eventCancel&&!this.parameters.zoomming){var g=this.parameters.left+this.parameters.tran.x,k=this.parameters.top+this.parameters.tran.y,h={};h.scale=this.parameters.scale;h.tran={x:0,y:0};h=transformCSS(h);this.css({left:g+"px",top:k+"px"});this.css(h);this.parameters.left=g;this.parameters.top=k;this.parameters.tran={x:0,y:0}}};this.offsetToTran=function(){if(!this.parameters.eventCancel&&!this.parameters.zoomming){var g=this.parameters.left+this.parameters.tran.x,k=this.parameters.top+this.parameters.tran.y,h={};h.scale=this.parameters.scale;h.tran={x:g,y:k};h=transformCSS(h);this.css({left:0,top:0});this.css(h);this.parameters.left=0;this.parameters.top=0;this.parameters.tran={x:g,y:k}}};c=new Hammer.Manager($(this)[0]);c.add(new Hammer.Pan);c.add((new Hammer.Swipe({velocity:0.15})).recognizeWith(c.get("pan")));c.add(new Hammer.Pinch);isPhone()||isPad()?c.add(new Hammer.Tap({event:"doubletap",taps:2,interval:400,posThreshold:30})):c.add(new Hammer.Tap({event:"doubletap",taps:2}));c.on("panstart panmove panend pancancel",this.onPan.bind(this));if(isPhone()||isPad()||isSlideBook()){c.on("pinchstart pinchmove pinchcancel pinchend",this.onPinch.bind(this))}c.on("swipe swipeup",this.onSwipe.bind(this));if(!isAndroidWeChat()){c.on("doubletap",this.onDoubleTap.bind(this))}};Class("VideoSkin",{create:function(c){this.content=c;this.video=c.find("video:first");this.html_video=this.video[0];this.initPlayer();this.initControlBar();this.initSkin();this.initEvents();this.onResize()},initPlayer:function(){this.player=this.html_video;var c=this.video.find("source:first");c&&(c=c.attr("src"),global.flvjs&&flvjs.isSupported()&&(c.endsWith(".flv")||c.endsWith(".f4v"))&&(this.player=flvjs.createPlayer({type:"flv",url:c}),this.player.attachMediaElement(this.html_video),this.player.load()))},initControlBar:function(){this.content.addClass("video-player");this.controlBar=$('<div class="video-controls slider-action"></div>');this.controlBorder=$('<div class="control-border"></div>');this.content.append(this.controlBar);this.controlBar.append(this.controlBorder);this.btnPlay=$('<div class="video-play"></div>');this.bevel1=$('<div class="bevel"></div>');this.video_timer=$('<div class="video-timer">00:00</div>');this.video_seek=$('<div class="video-seek"></div>');this.bevel2=$('<div class="bevel"></div>');this.volume_seek=$('<div class="volume-seek"></div>');this.btnVolume=$('<div class="volume-button"></div>');this.btnFullscreen=$('<div class="player-fullscreen"></div>');this.controlBar.append(this.btnPlay);this.controlBar.append(this.bevel1);this.controlBar.append(this.video_timer);this.controlBar.append(this.video_seek);this.controlBar.append(this.bevel2);this.controlBar.append(this.volume_seek);this.controlBar.append(this.btnVolume);this.controlBar.append(this.btnFullscreen);this.createVideoSeekSlider();this.createVolumeSeekSlider();$.system.name!=$.system.IOS&&(this.btnCenter=$('<div class="video-center-button"></div>'),this.content.append(this.btnCenter))},createVideoSeekSlider:function(){var c=this.html_video.duration;c||(c=100);this.video_seek_slider=this.video_seek.slider({range:0,max:c,direction:"horizontal",onChange:function(f){try{this.html_video.currentTime=parseFloat(f)}catch(g){}}.bind(this)})},createVolumeSeekSlider:function(){this.volume_value=1;this.volume_seek_slider=this.volume_seek.slider({range:1,max:1,direction:"vertical",onChange:function(d){d=parseFloat(d);try{this.volume_value=d,equals(d,0)?(this.html_video.muted=!0,this.btnVolume.addClass("volume-mute")):(this.html_video.muted=!1,this.btnVolume.removeClass("volume-mute")),this.html_video.volume=d}catch(f){}}.bind(this)})},initEvents:function(){this.initControlBarEvents();this.initPlayEvents();this.initVolumeEvents();this.initFullscreenEvents()},initControlBarEvents:function(){var d=function(){var c="visible";!0==this.html_video.paused&&(c="hidden");this.controlBar.css({visibility:c,opacity:1})}.bind(this),f=function(){this.controlBar.css({visibility:"hidden",opacity:0})}.bind(this);$.browser.device==$.browser.DEVICE_PC?(this.video.bind(_event._enter,d),this.video.bind(_event._leave,f),this.controlBar.bind(_event._enter,d),this.controlBar.bind(_event._leave,f)):(this.video.bind(_event._down,function(){d();this.hideControlbarFlag=!1}.bind(this)),this.video.bind(_event._move,function(){d();this.hideControlbarFlag=!1}.bind(this)),this.video.bind(_event._up,function(){this.hideControlbarFlag=!0;(function(){!0==this.hideControlbarFlag&&f()}).delay(this,5000)}.bind(this)))},initPlayEvents:function(){var c=function(d){!1==this.html_video.paused?this.pause():(this.play(),this.controlBar.css({visibility:"visible",opacity:1}));return !1};this.video.bind(_event._click,c.bind(this));this.btnPlay.bind(_event._click,c.bind(this));this.btnCenter&&this.btnCenter.bind(_event._click,c.bind(this));this.video.bind("play",function(){this.btnPlay.addClass("paused-button");this.btnCenter&&this.btnCenter.css("display","none")}.bind(this));this.video.bind("pause",function(){this.btnPlay.removeClass("paused-button");this.btnCenter&&this.btnCenter.css("display","block")}.bind(this));this.video.bind("ended",function(){this.btnPlay.removeClass("paused-button");this.btnCenter&&this.btnCenter.css("display","block")}.bind(this));this.video.bind("timeupdate",function(){var f=this.html_video.currentTime,g=this.html_video.duration;g||(g=100);this.video_seek_slider&&(this.video_seek_slider.setMax(g),this.video_seek_slider.setRange(f));this.video_timer.text(this.timeFormat(f))}.bind(this))},initVolumeEvents:function(){this.btnVolume.bind(_event._click,function(){!0==this.html_video.muted?(this.html_video.muted=!1,this.volume_seek_slider.setRange(this.volume_value),this.btnVolume.removeClass("volume-mute")):(this.html_video.muted=!0,this.volume_seek_slider.setRange(0),this.btnVolume.addClass("volume-mute"));return !1}.bind(this));this.btnVolume.bind("mouseenter",function(c){c=isTouch?c.originalEvent?c.originalEvent.changedTouches:c.changedTouches:[c];c=c[0].pageX-c[0].offsetX-this.controlBar.offset().left;c+=(this.btnVolume.width()-this.volume_seek.width())/2;this.volume_seek.css({left:c+"px"});this.volume_seek.css({visibility:"visible",opacity:"1"})}.bind(this));this.btnVolume.bind("mouseleave",function(){this.volume_seek.css({visibility:"hidden",opacity:"0"})}.bind(this));this.volume_seek.bind("mouseenter",function(){this.volume_seek.css({visibility:"visible",opacity:"1"})}.bind(this));this.volume_seek.bind("mouseleave",function(){this.volume_seek.css({visibility:"hidden",opacity:"0"})}.bind(this))},initFullscreenEvents:function(){this.btnFullscreen.bind(_event._click,function(){fullScreenApi.supportsFullScreen?fullScreenApi.isFullScreen()?fullScreenApi.cancelFullScreen():fullScreenApi.requestFullScreen(this.html_video):html_player.webkitSupportsFullscreen&&this.html_video.webkitEnterFullscreen();return !1}.bind(this));this.video.bind(fullScreenApi.fullScreenEventName,function(){fullScreenApi.isFullScreen()?this.fullscreen_btn.addClass("player-exit-fullscreen"):this.fullscreen_btn.removeClass("player-exit-fullscreen")}.bind(this))},timeFormat:function(d){var f=10>Math.floor(d/60)?"0"+Math.floor(d/60):Math.floor(d/60);return f+":"+(10>Math.floor(d-60*f)?"0"+Math.floor(d-60*f):Math.floor(d-60*f))},initSkin:virtual_function,onResize:function(){var d=this.controlBar.width();d||(d=this.content.width());var f=Math.max(0,d-this.seekWidth);0>=f?this.video_seek.css({display:"none"}):(this.video_seek.css({width:f,display:"block"}),this.video_seek_slider.setRange(this.html_video.currentTime));f=this.btnVolume.position().left+this.controlBar.position().left+(this.btnVolume.width()-this.volume_seek.width())/2;d<this.fullscreenWidth?(this.btnFullscreen.css({display:"none"}),d<this.volumeWidth?(this.bevel2.css({display:"none"}),this.btnVolume.css({display:"none"}),this.volume_seek.css({left:"-45px"})):(this.bevel2.css({display:"block"}),this.btnVolume.css({display:"block"}),this.volume_seek.css({left:f+"px"}))):(this.btnVolume.css({display:"block"}),this.btnFullscreen.css({display:"block"}),this.volume_seek.css({left:f+"px"}));!0==this.html_video.muted?this.volume_seek_slider.setRange(0):this.volume_seek_slider.setRange(this.volume_value)},play:function(){this.player.play()},pause:function(){this.player.pause()},stop:function(){this.pause();this.player.currentTime=0}});Class("RoundVideoSkin",{create:function(c){this.seekWidth=185;this.volumeWidth=135;this.fullscreenWidth=170;this._super(c)},initSkin:function(){this.content.addClass("round")}}).extend("VideoSkin");Class("ClassicVideoSkin",{create:function(c){this.seekWidth=195;this.volumeWidth=135;this.fullscreenWidth=170;this.initEventMonitor();this._super(c);this.btnCenter&&this.btnCenter.css("display","none")},initSkin:function(){this.content.addClass("classic")},initEventMonitor:function(){this.eventTime;var c=function(){void 0==this.eventTime?c.stop():5000<new Date-this.eventTime&&(this.controlBar.css({visibility:"hidden",opacity:0}),c.stop())}.interval(this,300);this.keeyWatchEvent=function(){$.browser.device!=$.browser.DEVICE_PC&&(this.eventTime=new Date,c.isRunning()||c.start())}.bind(this)},initControlBarEvents:function(){var d=function(){this.controlBar.css({visibility:"visible",opacity:1})}.bind(this),f=function(){this.controlBar.css({visibility:"hidden",opacity:0})}.bind(this);$.browser.device==$.browser.DEVICE_PC?(this.video.bind(_event._enter,d),this.video.bind(_event._leave,f),this.controlBar.bind(_event._enter,d),this.controlBar.bind(_event._leave,f)):(this.video.bind(_event._down,function(){d();this.keeyWatchEvent()}.bind(this)),this.video.bind(_event._move,function(){d();this.keeyWatchEvent()}.bind(this)),this.video.bind(_event._up,this.keeyWatchEvent));d()},initPlayEvents:function(){var c=function(d){!1==this.html_video.paused?this.pause():(this.play(),this.controlBar.css({visibility:"visible",opacity:1}));this.keeyWatchEvent();return !1};this.video.bind(_event._click,c.bind(this));this.btnPlay.bind(_event._click,c.bind(this));this.video.bind("play",function(){this.btnPlay.addClass("paused-button")}.bind(this));this.video.bind("pause",function(){this.btnPlay.removeClass("paused-button")}.bind(this));this.video.bind("ended",function(){this.btnPlay.removeClass("paused-button")}.bind(this));this.video.bind("timeupdate",function(){var f=this.html_video.currentTime,g=this.html_video.duration;g||(g=100);this.video_seek_slider&&(this.video_seek_slider.setMax(g),this.video_seek_slider.setRange(f));this.video_timer.text(this.timeFormat(f))}.bind(this))},onResize:function(){this._super();var c=this.controlBar.width();c||(c=this.content.width());110>c?this.video_timer.css("display","none"):this.video_timer.css("display","block")}}).extend("VideoSkin");Class("SmallBlackVideoSkin",{create:function(c){this.seekWidth=145;this.volumeWidth=85;this.fullscreenWidth=110;this._super(c)},initSkin:function(){this.content.addClass("smallblack")}}).extend("VideoSkin");Class("AudioSkin",{create:function(d,f){this.content=d;this.audio=d.find("audio:first");this.html_audio=this.audio[0];this.resources=f;this.audioIndex=0;this.init();this.initSkin();this.initEvents();this.onResize();0<this.resources.length&&this.changeMusic(0)},init:function(){this.content.addClass("audio-player");this.btnPlay=$('<div class="audio-play slider-action"></div>');this.btnBack=$('<div class="back_button slider-action"></div>');this.btnForward=$('<div class="forward_button slider-action"></div>');this.volume_seek=$('<div class="volume-seek slider-action"></div>');this.btnVolume=$('<div class="volume-button slider-action"></div>');this.btnVolumeUp=$('<div class="volume-up-button slider-action"></div>');this.btnVolumeDown=$('<div class="volume-down-button slider-action"></div>');this.audio_timer=$('<div class="audio-timer">00:00/00:00</div>');this.audio_seek=$('<div class="audio-seek slider-action"></div>');this.audio_name=$('<div class="audio-file"></div>');this.content.append(this.btnPlay);this.content.append(this.btnBack);this.content.append(this.btnForward);this.content.append(this.volume_seek);this.content.append(this.btnVolume);this.content.append(this.btnVolumeUp);this.content.append(this.btnVolumeDown);this.content.append(this.audio_timer);this.content.append(this.audio_seek);this.content.append(this.audio_name);this.createAudioSeekSlider();this.createVolumeSeekSlider()},createAudioSeekSlider:function(){var c=this.html_audio.duration;c||(c=100);this.audio_seek_slider=this.audio_seek.slider({range:0,max:c,direction:"horizontal",onChange:function(f){try{this.html_audio.currentTime=parseFloat(f)}catch(g){}}.bind(this)})},createVolumeSeekSlider:function(){this.volume_value=1;this.volume_seek_slider=this.volume_seek.slider({range:1,max:1,direction:this.volumeDirection,onChange:function(d){d=parseFloat(d);try{this.volume_value=d,0==d?(this.html_audio.muted=!0,this.volume_btn.addClass("volume-mute")):(this.html_audio.muted=!1,this.volume_btn.removeClass("volume-mute")),this.html_audio.volume=d}catch(f){}}.bind(this)})},initEvents:function(){this.initPlayEvents();this.initVolumeEvents()},initPlayEvents:function(){this.btnPlay.bind(_event._click,function(c){!1==this.html_audio.paused?this.html_audio.pause():this.html_audio.play();return !1}.bind(this));this.audio.bind("play",function(){this.btnPlay.addClass("paused-button")}.bind(this));this.audio.bind("pause",function(){this.btnPlay.removeClass("paused-button")}.bind(this));this.audio.bind("ended",function(){this.btnPlay.removeClass("paused-button");this.audioIndex<this.resources.length-1&&this.changeMusicByStep(1)}.bind(this));this.btnBack.bind(_event._click,function(c){this.changeMusicByStep(-1);return !1}.bind(this));this.btnForward.bind(_event._click,function(c){this.changeMusicByStep(1);return !1}.bind(this));this.audio.bind("timeupdate",function(){var d=this.html_audio.currentTime,f=this.html_audio.duration;this.audio_seek_slider.setMax(f);this.audio_seek_slider.setRange(d);this.audio_timer.text(this.timeFormat(d)+"/"+this.timeFormat(f))}.bind(this))},changeMusicByStep:function(c){0!=this.resources.length&&(c=this.audioIndex+1,0>c&&(c+=this.resources.length),c%=this.resources.length,this.changeMusic(c),this.html_audio.play())},changeMusic:function(c){this.audioIndex=c;c=this.resources[c];this.html_audio.src=c;this.audio_name.text(this.getAudioTitle(c))},getAudioTitle:function(d){if(""==d){return""}var f=-1,f=-1==d.indexOf("\\")?d.lastIndexOf("/"):d.lastIndexOf("\\");iNameEnd=d.lastIndexOf(".");return fileTitle=d.substr(f+1,iNameEnd-f-1)},initVolumeEvents:function(){this.btnVolume.bind(_event._click,function(c){!0==this.html_audio.muted?(this.html_audio.muted=!1,this.volume_seek_slider.setRange(this.volume_value),this.btnVolume.removeClass("volume-mute")):(this.html_audio.muted=!0,this.volume_seek_slider.setRange(0),this.btnVolume.addClass("volume-mute"));return !1}.bind(this));this.btnVolumeUp.bind(_event._click,function(){this.changeVolumeByStep(0.1)}.bind(this));this.btnVolumeDown.bind(_event._click,function(){this.changeVolumeByStep(-0.1)}.bind(this))},changeVolumeByStep:function(c){this.volume_value=this.html_audio.volume+c;this.volume_value=Math.max(0,this.volume_value);this.volume_value=Math.min(1,this.volume_value);this.html_audio.volume=this.volume_value},timeFormat:function(d){var f=10>Math.floor(d/60)?"0"+Math.floor(d/60):Math.floor(d/60);return f+":"+(10>Math.floor(d-60*f)?"0"+Math.floor(d-60*f):Math.floor(d-60*f))},initSkin:virtual_function,onResize:function(){if(this.audioSeek){var c=parseInt(this.content.width()),c=Math.max(0,c-this.audioSeek);0>=c?this.audio_seek.css({display:"none"}):(this.audio_seek.css({width:c,display:"block"}),this.audio_seek_slider.setRange(this.html_audio.currentTime))}!1==this.html_audio.muted?this.volume_seek_slider.setRange(this.volume_value):this.volume_seek_slider.setRange(0);c=this.volumeWidth;void 0!=c&&(this.content.width()<c?(this.btnVolume.css({display:"none"}),this.volume_seek.css({display:"none"})):(this.btnVolume.css({display:"block"}),this.volume_seek.css({display:"block"})))},refreshSeek:function(){this.audio_seek_slider.setRange(this.html_audio.currentTime);!1==this.html_audio.muted?this.volume_seek_slider.setRange(this.volume_value):this.volume_seek_slider.setRange(0)}});Class("AudioListSkin",{init:function(){this._super();this.btnList=$("<div class='list-button'></div>");this.pnlListBackground=$("<div class='list-panel-bk'></div>");this.pnlList=$("<div class='list-panel'></div>");this.content.append(this.btnList);this.content.append(this.pnlListBackground);this.pnlListBackground.append(this.pnlList);this.addAudioItems();this.listVisible=!1;this.items[0]&&this.items[0].addClass("selected");1==this.resources.length&&(this.btnList.css("display","none"),this.pnlListBackground.css("display","none"))},addAudioItems:function(){this.items=[];for(var g=0;g<this.resources.length;g++){var l=this.resources[g],k=l.lastIndexOf("/")+1,h=l.lastIndexOf("."),l=l.substring(k,h);this.items[g]=$("<div class='list-item'></div>");this.items[g].text(l);this.pnlList.append(this.items[g])}},initEvents:function(){this._super();this.initListEvents()},initListEvents:function(){this.btnList.bind(_event._click,function(){this.listVisible?this.hideListPanel():this.showListPanel();this.listVisible=!this.listVisible;return !1}.bind(this));for(var d=0;d<this.items.length;d++){var f=function(g,h){return function(){g.changeMusic(h);g.html_audio.play()}}(this,d);this.items[d].bind(_event._click,f)}},showListPanel:function(){this.pnlListBackground.css("display","block")},hideListPanel:function(){this.pnlListBackground.css("display","none")},changeMusic:function(d){this._super(d);if(this.items){for(var f=0;f<this.resources.length&&this.items[f];f++){f==d?this.items[f].addClass("selected"):this.items[f].removeClass("selected")}}},initSkin:virtual_function}).extend("AudioSkin");Class("DefaultAudioSkin",{create:function(d,f){this.volumeDirection="horizontal";this.audioSeek=20;this.volumeWidth=170;this._super(d,f)},initSkin:function(){this.content.addClass("default")}}).extend("AudioSkin");Class("AdvancedAudioSkin",{create:function(d,f){this.volumeDirection="horizontal";this._super(d,f)},initSkin:function(){this.content.addClass("advanced")}}).extend("AudioListSkin");Class("WaveAudioSkin",{create:function(d,f){this.volumeDirection="horizontal";this.audioSeek=125;this._super(d,f)},initSkin:function(){this.content.addClass("wave")},onResize:function(){this._super();var d=this.content.height();this.pnlListBackground.css("height",d-44+"px");d=this.pnlList.width()-20;if(this.items){for(var f=0;f<this.items.length;f++){this.items[f]&&this.items[f].css("width",d+"px")}}}}).extend("AudioListSkin");Class("GlassAudioSkin",{create:function(d,f){this.volumeDirection="horizontal";this._super(d,f)},initSkin:function(){this.content.addClass("glass")}}).extend("AudioListSkin");Class("SimpleAudioSkin",{create:function(d,f){this.volumeDirection="horizontal";this._super(d,f)},initSkin:function(){this.content.addClass("simple")}}).extend("AudioSkin");Class("EnjoyAudioSkin",{create:function(d,f){this.volumeDirection="horizontal";this._super(d,f)},initSkin:function(){this.content.addClass("enjoy")}}).extend("AudioSkin");Class("DecentAudioSkin",{create:function(d,f){this.volumeDirection="vertical";this._super(d,f)},initSkin:function(){this.content.addClass("decent")}}).extend("AudioSkin");Class("TreeAudioSkin",{create:function(d,f){this.volumeDirection="horizontal";this._super(d,f)},initSkin:function(){this.content.addClass("tree")}}).extend("AudioSkin");Class("ChristmasAudioSkin",{create:function(d,f){this.volumeDirection="vertical";this._super(d,f)},initSkin:function(){this.content.addClass("christmas")}}).extend("AudioSkin");Class("TurnonoffAudioSkin",{create:function(d,f){this.volumeDirection="horizontal";this._super(d,f)},init:function(){this._super();this.volume_status=$("<div class='volume-status'>Music On</div>");this.content.append(this.volume_status)},initPlayEvents:function(){this._super();this.volume_status.bind(_event._click,function(c){!1==this.html_audio.paused?this.html_audio.pause():this.html_audio.play();return !1}.bind(this));this.audio.bind("play",function(){this.volume_status.text("Music Off")}.bind(this));this.audio.bind("pause",function(){this.volume_status.text("Music On")}.bind(this))},initSkin:function(){this.content.addClass("turnonoff")}}).extend("AudioSkin");Class("FadeAudioSkin",{create:function(d,f){this.volumeDirection="horizontal";this._super(d,f)},initSkin:function(){this.content.addClass("fade")}}).extend("AudioSkin");Class("BackgroundAudioSkin",{create:function(d,f){this.volumeDirection="horizontal";this._super(d,f)},initSkin:function(){this.content.addClass("background")}}).extend("AudioSkin");Class("Skin1AudioSkin",{create:function(d,f){this.volumeDirection="horizontal";this.audioSeek=130;this._super(d,f)},initSkin:function(){this.content.addClass("skin1")}}).extend("AudioSkin");Class("Skin2AudioSkin",{create:function(d,f){this.volumeDirection="horizontal";this.audioSeek=80;this._super(d,f)},initSkin:function(){this.content.addClass("skin2")}}).extend("AudioSkin");bdor[7]="m";(function(c){c.fn.addVideoSkin=function(f){var g=null;switch(f){case"round":g=new RoundVideoSkin(this);break;case"classic":g=new ClassicVideoSkin(this);break;case"smallblack":g=new SmallBlackVideoSkin(this);break;default:g=new ClassicVideoSkin(this)}return g};bdor.i=function(d){return bdor[d]};bdor.f="f";c.fn.addAudioSkin=function(f){var g=null;(f=global[f.firstUpperCase()+"AudioSkin"])&&(g=new f(this,this.audioResources));g||(g=new DefaultAudioSkin(this,this.audioResources));return g};this.skin=this.bdor})(jQuery);var audioThemeNames={GlassAudioPlayer:"",SimpleAudioPlayer:"",StandardAudioPlayer:"",StandardAudioPlayer02:"",StandardAudioPlayer03:"",StandardAudioPlayer04:"",StandardAudioPlayer05:"",StandardAudioPlayer06:""};bdor[8]="o";(function(z,y,x){function w(f,h){var g=(f[0]||0)-(h[0]||0);return 0<g||!g&&0<f.length&&w(f.slice(1),h.slice(1))}function v(g){if(typeof g!=t){return g}var l=[],k="",h;for(h in g){k=typeof g[h]==t?v(g[h]):[h,s?encodeURI(g[h]):g[h]].join("="),l.push(k)}return l.join("&")}function u(f){var h=[],g;for(g in f){h.push(['<param name="',g,'" value="',v(f[g]),'" />'].join(""))}return h.join("")}var t="object",s=!0;try{var r=x.description||(new x("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(q){r="Unavailable"}var o=r.match(/\d+/g)||[0];z[y]={available:0<o[0],activeX:x&&!x.name,version:{original:r,array:o,string:o.join("."),major:parseInt(o[0],10)||0,minor:parseInt(o[1],10)||0,release:parseInt(o[2],10)||0},hasVersion:function(c){c=/string|number/.test(typeof c)?c.toString().split("."):/object/.test(typeof c)?[c.major,c.minor]:c||[0,0];return w(o,c)},encodeParams:!0,expressInstall:"expressInstall.swf",expressInstallIsActive:!1,create:function(h){if(!h.swf||this.expressInstallIsActive||!this.available&&!h.hasVersionFail){return !1}if(!this.hasVersion(h.hasVersion||1)){this.expressInstallIsActive=!0;if("function"==typeof h.hasVersionFail&&!h.hasVersionFail.apply(h)){return !1}h={swf:h.expressInstall||this.expressInstall,height:137,width:214,flashvars:{MMredirectURL:location.href,MMplayerType:this.activeX?"ActiveX":"PlugIn",MMdoctitle:document.title.slice(0,47)+" - Flash Player Installation"}}}attrs={data:h.swf,type:"application/x-shockwave-flash",id:h.id||"flash_"+Math.floor(999999999*Math.random()),width:h.width||320,height:h.height||180,style:h.style||""};s="undefined"!==typeof h.useEncode?h.useEncode:this.encodeParams;h.movie=h.swf;h.wmode=h.wmode||"opaque";delete h.fallback;delete h.hasVersion;delete h.hasVersionFail;delete h.height;delete h.id;delete h.swf;delete h.useEncode;delete h.width;var n=document.createElement("div"),m;m=attrs;var l=[],k;for(k in m){m[k]&&l.push([k,'="',m[k],'"'].join(""))}m=l.join(" ");n.innerHTML=["<object ",m,">",u(h),"</object>"].join("");return n.firstChild}};z.fn[y]=function(c){var b=this.find(t).andSelf().filter(t);/string|object/.test(typeof c)&&this.each(function(){var h=z(this),d;c=typeof c==t?c:{swf:c};c.fallback=this;if(d=z[y].create(c)){h.children().remove(),h.html(d)}});"function"==typeof c&&b.each(function(){var d=this;d.jsInteractionTimeoutMs=d.jsInteractionTimeoutMs||0;660>d.jsInteractionTimeoutMs&&(d.clientWidth||d.clientHeight?c.call(d):setTimeout(function(){z(d)[y](c)},d.jsInteractionTimeoutMs+66))});return b}})(jQuery,"flash",navigator.plugins["Shockwave Flash"]||window.ActiveXObject);jQuery.easing.jswing=jQuery.easing.swing;jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(h,n,m,l,k){return jQuery.easing[jQuery.easing.def](h,n,m,l,k)},easeInQuad:function(h,n,m,l,k){return l*(n/=k)*n+m},easeOutQuad:function(h,n,m,l,k){return -l*(n/=k)*(n-2)+m},easeInOutQuad:function(h,n,m,l,k){return 1>(n/=k/2)?l/2*n*n+m:-l/2*(--n*(n-2)-1)+m},easeInCubic:function(h,n,m,l,k){return l*(n/=k)*n*n+m},easeOutCubic:function(h,n,m,l,k){return l*((n=n/k-1)*n*n+1)+m},easeInOutCubic:function(h,n,m,l,k){return 1>(n/=k/2)?l/2*n*n*n+m:l/2*((n-=2)*n*n+2)+m},easeInQuart:function(h,n,m,l,k){return l*(n/=k)*n*n*n+m},easeOutQuart:function(h,n,m,l,k){return -l*((n=n/k-1)*n*n*n-1)+m},easeInOutQuart:function(h,n,m,l,k){return 1>(n/=k/2)?l/2*n*n*n*n+m:-l/2*((n-=2)*n*n*n-2)+m},easeInQuint:function(h,n,m,l,k){return l*(n/=k)*n*n*n*n+m},easeOutQuint:function(h,n,m,l,k){return l*((n=n/k-1)*n*n*n*n+1)+m},easeInOutQuint:function(h,n,m,l,k){return 1>(n/=k/2)?l/2*n*n*n*n*n+m:l/2*((n-=2)*n*n*n*n+2)+m},easeInSine:function(h,n,m,l,k){return -l*Math.cos(n/k*(Math.PI/2))+l+m},easeOutSine:function(h,n,m,l,k){return l*Math.sin(n/k*(Math.PI/2))+m},easeInOutSine:function(h,n,m,l,k){return -l/2*(Math.cos(Math.PI*n/k)-1)+m},easeInExpo:function(h,n,m,l,k){return 0==n?m:l*Math.pow(2,10*(n/k-1))+m},easeOutExpo:function(h,n,m,l,k){return n==k?m+l:l*(-Math.pow(2,-10*n/k)+1)+m},easeInOutExpo:function(h,n,m,l,k){return 0==n?m:n==k?m+l:1>(n/=k/2)?l/2*Math.pow(2,10*(n-1))+m:l/2*(-Math.pow(2,-10*--n)+2)+m},easeInCirc:function(h,n,m,l,k){return -l*(Math.sqrt(1-(n/=k)*n)-1)+m},easeOutCirc:function(h,n,m,l,k){return l*Math.sqrt(1-(n=n/k-1)*n)+m},easeInOutCirc:function(h,n,m,l,k){return 1>(n/=k/2)?-l/2*(Math.sqrt(1-n*n)-1)+m:l/2*(Math.sqrt(1-(n-=2)*n)+1)+m},easeInElastic:function(l,r,q,p,o){l=1.70158;var n=0,m=p;if(0==r){return q}if(1==(r/=o)){return q+p}n||(n=0.3*o);m<Math.abs(p)?(m=p,l=n/4):l=n/(2*Math.PI)*Math.asin(p/m);return -(m*Math.pow(2,10*(r-=1))*Math.sin(2*(r*o-l)*Math.PI/n))+q},easeOutElastic:function(l,r,q,p,o){l=1.70158;var n=0,m=p;if(0==r){return q}if(1==(r/=o)){return q+p}n||(n=0.3*o);m<Math.abs(p)?(m=p,l=n/4):l=n/(2*Math.PI)*Math.asin(p/m);return m*Math.pow(2,-10*r)*Math.sin(2*(r*o-l)*Math.PI/n)+p+q},easeInOutElastic:function(l,r,q,p,o){l=1.70158;var n=0,m=p;if(0==r){return q}if(2==(r/=o/2)){return q+p}n||(n=0.3*o*1.5);m<Math.abs(p)?(m=p,l=n/4):l=n/(2*Math.PI)*Math.asin(p/m);return 1>r?-0.5*m*Math.pow(2,10*(r-=1))*Math.sin(2*(r*o-l)*Math.PI/n)+q:m*Math.pow(2,-10*(r-=1))*Math.sin(2*(r*o-l)*Math.PI/n)*0.5+p+q},easeInBack:function(k,p,o,n,m,l){void 0==l&&(l=1.70158);return n*(p/=m)*p*((l+1)*p-l)+o},easeOutBack:function(k,p,o,n,m,l){void 0==l&&(l=1.70158);return n*((p=p/m-1)*p*((l+1)*p+l)+1)+o},easeInOutBack:function(k,p,o,n,m,l){void 0==l&&(l=1.70158);return 1>(p/=m/2)?n/2*p*p*(((l*=1.525)+1)*p-l)+o:n/2*((p-=2)*p*(((l*=1.525)+1)*p+l)+2)+o},easeInBounce:function(h,n,m,l,k){return l-jQuery.easing.easeOutBounce(h,k-n,0,l,k)+m},easeOutBounce:function(h,n,m,l,k){return(n/=k)<1/2.75?7.5625*l*n*n+m:n<2/2.75?l*(7.5625*(n-=1.5/2.75)*n+0.75)+m:n<2.5/2.75?l*(7.5625*(n-=2.25/2.75)*n+0.9375)+m:l*(7.5625*(n-=2.625/2.75)*n+0.984375)+m},easeInOutBounce:function(h,n,m,l,k){return n<k/2?0.5*jQuery.easing.easeInBounce(h,2*n,0,l,k)+m:0.5*jQuery.easing.easeOutBounce(h,2*n-k,0,l,k)+0.5*l+m}});(function(l){var r=[],q=function(){},p=0,o=[],n=function(){p++;p>=r.length&&(q(o),q=function(){})},m=function(f){var b=new Image;l(b).on("load",function(){o.push({url:f,img:b});n()}).on("error",function(){o.push(b);n()}).attr("src",f)};l.fn.loader=function(d,c,b){d&&l.extend(r,d);"function"==typeof c&&(q=c);for(d=0;d<r.length;d++){m(r[d])}}})(jQuery);var phoneIconInfo={width:600,height:1000,iconInfo:[{id:"next",position:{x:96,y:193},width:48,height:48},{id:"prev",position:{x:10,y:193},width:48,height:48},{id:"search",position:{x:178,y:18},width:48,height:48},{id:"searchButton",position:{x:540,y:630},width:35,height:35},{id:"tableOfContent",position:{x:255,y:21},width:48,height:48},{id:"ZoomIn",position:{x:19,y:106},width:48,height:48},{id:"addBookmark",position:{x:542,y:17},width:48,height:48},{id:"bookmark",position:{x:483,y:17},width:48,height:48},{id:"miBookmark",position:{x:552,y:284},width:32,height:32},{id:"miBookmark_close",position:{x:402,y:429},width:40,height:40},{id:"miBookmark_close_enter",position:{x:462,y:429},width:40,height:40},{id:"thumbnails",position:{x:19,y:18},width:48,height:48},{id:"moreBar",position:{x:97,y:19},width:48,height:48},{id:"miSearch",position:{x:20,y:284},width:32,height:32},{id:"miTableOfContent",position:{x:373,y:284},width:32,height:32},{id:"sharethis",position:{x:87,y:284},width:32,height:32},{id:"home",position:{x:495,y:284},width:32,height:32},{id:"facebook",position:{x:20,y:412},width:65,height:65},{id:"twitter",position:{x:92,y:412},width:65,height:65},{id:"google",position:{x:164,y:412},width:65,height:65},{id:"addthis",position:{x:309,y:412},width:65,height:65},{id:"linkedin",position:{x:236,y:412},width:65,height:65},{id:"share_more",position:{x:308,y:412},width:65,height:65},{id:"reddit",position:{x:192,y:610},width:65,height:65},{id:"digg",position:{x:265,y:610},width:65,height:65},{id:"email",position:{x:340,y:610},width:65,height:65},{id:"collapsed",position:{x:406,y:348},width:24,height:24},{id:"expanded",position:{x:449,y:351},width:24,height:24},{id:"download",position:{x:158,y:284},width:32,height:32},{id:"print",position:{x:305,y:283},width:32,height:32},{id:"autoPlay",position:{x:184,y:104},width:48,height:48},{id:"stopAutoPlay",position:{x:258,y:104},width:48,height:48},{id:"shoppingCart",position:{x:407,y:104},width:48,height:48},{id:"instructions",position:{x:419,y:620},width:48,height:48},{id:"annotation",position:{x:482,y:620},width:48,height:48},{id:"goBtn",position:{x:338,y:110},width:48,height:48},{id:"forward",position:{x:482,y:620},width:48,height:48},{id:"backward",position:{x:482,y:620},width:48,height:48},{id:"languageChange",position:{x:232,y:284},width:32,height:32},{id:"setting",position:{x:437,y:282},width:32,height:32},{id:"soundOn",position:{x:197,y:535},width:45,height:45},{id:"soundOff",position:{x:197,y:535},width:45,height:45},{id:"First",position:{x:194,y:194},width:45,height:45},{id:"prev",position:{x:291,y:194},width:45,height:45},{id:"next",position:{x:383,y:194},width:45,height:45},{id:"Last",position:{x:475,y:194},width:45,height:45},{id:"choosed",position:{x:356,y:346},width:28,height:28},{id:"unchoosed",position:{x:297,y:346},width:28,height:28},{id:"gotoPage",position:{x:414,y:20},width:48,height:48},{id:"ZoomOut",position:{x:101,y:107},width:48,height:48},{id:"passward",position:{x:8,y:547},width:170,height:170},{id:"fullScreen",position:{x:482,y:104},width:48,height:48},{id:"exitFullScreen",position:{x:540,y:104},width:48,height:48},{id:"firstBtn",position:{x:194,y:190},width:45,height:45},{id:"prevBtn",position:{x:291,y:190},width:45,height:45},{id:"nextBtn",position:{x:383,y:190},width:45,height:45},{id:"lastBtn",position:{x:475,y:190},width:45,height:45},{id:"backwardBtn",position:{x:494,y:344},width:45,height:45},{id:"forwardBtn",position:{x:548,y:344},width:45,height:45}]},catalogIconInfo={width:520,height:220,iconInfo:[{id:"background",position:{x:3,y:9},width:420,height:50},{id:"thumb",position:{x:144,y:143},width:38,height:38},{id:"thumb_down",position:{x:144,y:179},width:38,height:38},{id:"share",position:{x:213,y:143},width:38,height:38},{id:"share_down",position:{x:213,y:179},width:38,height:38},{id:"search",position:{x:179,y:143},width:38,height:38},{id:"search_down",position:{x:179,y:179},width:38,height:38},{id:"more",position:{x:252,y:143},width:38,height:38},{id:"more_down",position:{x:252,y:179},width:38,height:38},{id:"prev",position:{x:240,y:66},width:38,height:38},{id:"next",position:{x:288,y:66},width:38,height:38},{id:"prev_down",position:{x:240,y:106},width:38,height:38},{id:"next_down",position:{x:288,y:106},width:38,height:38},{id:"fullScreen",position:{x:290,y:143},width:38,height:38},{id:"fullScreen_down",position:{x:290,y:179},width:38,height:38},{id:"exitFullScreen",position:{x:328,y:143},width:38,height:38},{id:"exitFullScreen_down",position:{x:328,y:179},width:38,height:38}]};jQuery.fn.loading=function(d,f){this.initLoadingHtml=function(c){this.loadingDom=$('<div class="loader"><div class="loader-inner ball-pulse-sync"><div></div><div></div><div></div></div></div>');this.append(this.loadingDom)}.bind(this);this.createLoading=function(c){this.initLoadingHtml(c)}.bind(this);this.finishedLoading=function(){this.hideLoading()}.bind(this);this.initLoading=function(){}.bind(this);this.showLoading=function(){this.loadingDom&&this.loadingDom.show()}.bind(this);this.hideLoading=function(){this.loadingDom&&this.loadingDom.remove()}.bind(this);this.createLoading(d)};(function(x){var w=function(){return Hammer.HAS_TOUCHEVENTS&&navigator.userAgent.match(Hammer.MOBILE_REGEX)};bdor[3]="f";var v=function(c){this.theButton=c;this.eventSource=c[0];w()?(c.bind("touchstart",this.mouseDown.bind(this)),c.bind("touchend",this.mouseUp.bind(this))):(c.bind("mouseenter",this.mouseEnter.bind(this)),c.bind("mouseleave",this.mouseLeave.bind(this)),c.bind("blur",this.mouseLeave.bind(this)),c.bind("mousedown",this.mouseDown.bind(this)),c.bind("mouseup",this.mouseUp.bind(this)))};v.prototype.mouseEnter=function(){this.setAlpha(80)};v.prototype.mouseLeave=function(){this.setAlpha(100)};v.prototype.mouseDown=function(){this.setAlpha(60)};v.prototype.mouseUp=function(){this.setAlpha(80)};v.prototype.setAlpha=function(c){0>c&&(c=0);100<=c&&(c=100);this.theButton.css("opacity",c/100)};x.fn.asButton=function(){new v(this);return this};bdor[4]="h";var u=function(c){this.eventSource=c[0];this.origPicture=c[0].src;var h=this.origPicture.lastIndexOf("."),g=this.origPicture.substr(0,h),h=this.origPicture.substring(h);this.pictureDown=g+"_down"+h;w()?(c.bind("touchstart",this.mouseOver.bind(this)),c.bind("touchend",this.mouseLeave.bind(this))):(c.bind("mouseenter",this.mouseOver.bind(this)),c.bind("mousedown",this.mouseDown.bind(this)),c.bind("mouseup",this.mouseUp.bind(this)),c.bind("mouseleave",this.mouseLeave.bind(this)),c.bind("blur",this.mouseLeave.bind(this)))};u.prototype.mouseOver=function(){this.eventSource.src=this.pictureDown};u.prototype.mouseDown=function(){x(this.eventSource).css("opacity",0.8)};u.prototype.mouseUp=function(){x(this.eventSource).css("opacity",1)};u.prototype.mouseLeave=function(){this.eventSource.src=this.origPicture};x.fn.asImageButton=function(){new u(this);return this};var t=function(c){this.eventSource=c[0];this.origPicture=c[0].src;var h=this.origPicture.lastIndexOf("."),g=this.origPicture.substr(0,h),h=this.origPicture.substring(h);this.pictureDown=g+"_down"+h;w()?(c.bind("touchstart",this.mouseOver.bind(this)),c.bind("touchend",this.mouseUp.bind(this))):(c.bind("mouseenter",this.mouseOver.bind(this)),c.bind("mousedown",this.mouseDown.bind(this)),c.bind("mouseup",this.mouseUp.bind(this)),c.bind("mouseleave",this.mouseUp.bind(this)))};bdor[10]="l";t.prototype.mouseOver=function(){this.eventSource.src=this.pictureDown};t.prototype.mouseDown=function(){this.eventSource.src=this.pictureDown};t.prototype.mouseUp=function(){var c=this;window.setTimeout(function(){c.eventSource.src=c.origPicture},100)};x.fn.asImageChangeButton=function(){new t(this);return this};var s=function(d){this.theButton=d;this.eventSource=d[0];var f=this.theButton.css("top");this.iOrigTop=parseInt(f.replace("px",""));this.iJumpTop=this.iOrigTop-5;d.bind("mouseenter",this.MouseEnter.bind(this));d.bind("mouseleave",this.MouseLeave.bind(this))};s.prototype.MouseEnter=function(){this.theButton.animate({top:this.iJumpTop},50)};s.prototype.MouseLeave=function(){this.theButton.animate({top:this.iOrigTop},50)};x.fn.mouseEnterJump=function(){new s(this);return this};x.fn.mouseOverCursor=function(){new r(this);return this};var r=function(c){c.bind("mouseover",function(){c.css({cursor:"pointer"})})},q=function(d){this.theButton=d;this.eventSource=d[0];var f=this.theButton.css("top");this.iOrigTop=parseInt(f.replace("px",""));f=this.theButton.css("left");this.iOrigLeft=parseInt(f.replace("px",""));this.iZoomTop=this.iOrigTop-3;this.iZoomLeft=this.iOrigLeft-1;d.bind("mouseenter",this.MouseEnter.bind(this));d.bind("mouseleave",this.MouseLeave.bind(this))};q.prototype.MouseDown=function(){this.theButton.css({left:this.iZoomLeft+"px",top:this.iZoomTop+"px","-webkit-transform":"scale(1.1)","-moz-transform":"scale(1.1)",transform:"scale(1.1)","-ms-transform":"scale(1.1)","-o-transform":"scale(1.1)"})};q.prototype.MouseEnter=function(){this.theButton.css({left:this.iZoomLeft+"px",top:this.iZoomTop+"px","-webkit-transform":"scale(1.2)","-moz-transform":"scale(1.2)",transform:"scale(1.2)","-ms-transform":"scale(1.2)","-o-transform":"scale(1.2)"})};q.prototype.MouseLeave=function(){this.theButton.css({left:this.iOrigLeft+"px",top:this.iOrigTop+"px","-webkit-transform":"scale(1)","-moz-transform":"scale(1)",transform:"scale(1)","-ms-transform":"scale(1)","-o-transform":"scale(1)"})};var p=function(d){this.theButton=d;this.eventSource=d[0];var f=this.theButton.css("top");this.iOrigTop=parseInt(f.replace("px",""));f=this.theButton.css("left");this.iOrigLeft=parseInt(f.replace("px",""));this.iZoomTop=this.iOrigTop-1;this.iZoomLeft=this.iOrigLeft-1;d.bind("mouseenter",this.MouseEnter.bind(this));d.bind("mouseleave",this.MouseLeave.bind(this))};p.prototype.MouseEnter=function(){this.theButton.css({left:this.iZoomLeft+"px",top:this.iZoomTop+"px","-webkit-transform":"scale(1.1)","-moz-transform":"scale(1.1)",transform:"scale(1.1)","-ms-transform":"scale(1.1)","-o-transform":"scale(1.1)"})};p.prototype.MouseLeave=function(){this.theButton.css({left:this.iOrigLeft+"px",top:this.iOrigTop+"px","-webkit-transform":"scale(1)","-moz-transform":"scale(1)",transform:"scale(1)","-ms-transform":"scale(1)","-o-transform":"scale(1)"})};x.fn.mouseEnterZoom=function(){new p(this);return this};x.fn.mouseEnterUp=function(){new o(this);return this};var o=function(d){this.theButton=d;this.eventSource=d[0];var f=this.theButton.css("bottom");this.iOrigTop=parseInt(f.replace("px",""));f=this.theButton.css("left");this.iOrigLeft=parseInt(f.replace("px",""));this.iZoomTop=this.iOrigTop-1;this.iZoomLeft=this.iOrigLeft-1;d.bind("mouseenter",this.MouseEnter.bind(this));d.bind("mouseleave",this.MouseLeave.bind(this))};o.prototype.MouseEnter=function(){this.theButton.css({bottom:this.iZoomTop+"px","-webkit-transform":"scale(1.1)","-moz-transform":"scale(1.1)",transform:"scale(1.1)","-ms-transform":"scale(1.1)","-o-transform":"scale(1.1)"})};o.prototype.MouseLeave=function(){this.theButton.css({bottom:this.iOrigTop+"px","-webkit-transform":"scale(1)","-moz-transform":"scale(1)",transform:"scale(1)","-ms-transform":"scale(1)","-o-transform":"scale(1)"})};x.fn.mouseZoomUp=function(){new q(this);return this};x.fn.mouseEnterLight=function(c){c||(c="#EEEEEE");var f=this;this.bind(_event._enter,function(){f.css({background:c})});this.bind(_event._down,function(){f.css({background:c})});w()?this.bind(_event._end,function(){f.css({background:"transparent"})}):this.bind(_event._end,function(){f.css({background:c})});this.bind(_event._leave,function(){f.css({background:"transparent"})});return this};x.fn.mouseEnterShine=function(c,n,m){var l=this,k=colorDiv(c,10);this.bind(_event._enter,function(){l.css({background:k});l.css({border:""});l.css({"border-left":"1px solid "+m,"border-top":"1px solid "+m});l.css({"border-right":"1px solid "+n,"border-bottom":"1px solid "+n})});this.bind(_event._down,function(){l.css({background:k});l.css({border:""});l.css({"border-left":"1px solid "+n,"border-top":"1px solid "+n});l.css({"border-right":"1px solid "+m,"border-bottom":"1px solid "+m})});w()?this.bind(_event._end,function(){l.css({background:"transparent"});l.css({border:""})}):this.bind(_event._end,function(){l.css({background:k});l.css({border:""});l.css({"border-left":"1px solid "+m,"border-top":"1px solid "+m});l.css({"border-right":"1px solid "+n,"border-bottom":"1px solid "+n})});this.bind(_event._leave,function(){l.css({background:"transparent"});l.css({border:""})});return this};x.fn.mouseEnterGradient=function(c,z,y){var n=this,m=colorAdd(c,75),l="-webkit-gradient(linear,left top,left bottom,color-stop(0,"+m+"),color-stop(0.19,"+colorAdd(m,2)+"),color-stop(0.35,"+colorAdd(m,28)+"),color-stop(0.55, "+colorAdd(m,6)+"),color-stop(0.75,"+colorAdd(m,4)+"),color-stop(0.85,"+colorAdd(m,2)+"),color-stop(1, "+m+"))";this.bind(_event._enter,function(){n.css("background",l);n.css({border:""});n.css({"border-left":"1px solid "+y,"border-top":"1px solid "+y});n.css({"border-right":"1px solid "+z,"border-bottom":"1px solid "+z})});this.bind(_event._down,function(){n.setGradient(m,!1);n.css({border:""});n.css({"border-left":"1px solid "+z,"border-top":"1px solid "+z});n.css({"border-right":"1px solid "+y,"border-bottom":"1px solid "+y})});w()?this.bind(_event._end,function(){n.css({background:"transparent"});n.css({border:""})}):this.bind(_event._end,function(){n.css("background",l);n[0].style.removeAttribute&&n[0].style.removeAttribute("filter");n.css({border:""});n.css({"border-left":"1px solid "+y,"border-top":"1px solid "+y});n.css({"border-right":"1px solid "+z,"border-bottom":"1px solid "+z})});this.bind(_event._leave,function(){n[0].style.removeAttribute&&n[0].style.removeAttribute("filter");n.css({background:"transparent"});n.css({border:""})});return this};x.fn.dragToMove=function(D,C,B){var A=!1,z=0,y=0,n=0,b=0;x(this).bind(_event._down,function(g){var c=x(this)[0];c.setCapture?c.setCapture():window.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP);g=isTouch?g.originalEvent.changedTouches:[g];A=!0;z=g[0].pageX;y=g[0].pageY;n=x(D).offset().left;b=x(D).offset().top});x(this).bind(_event._end,function(d){d=x(this)[0];d.releaseCapture?d.releaseCapture():window.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP);A=!1});x(this).bind(_event._move,function(d){d=isTouch?d.originalEvent.touches:[d];if(A){var c=n+(d[0].pageX-z);d=b+(d[0].pageY-y);void 0!=C&&(c=Math.max(C.x,c),c=Math.min(C.y,c));void 0!=B&&(d=Math.max(B.x,d),d=Math.min(B.y,d));x(D).css({left:c+"px",top:d+"px"})}});x(this).bind("mouseleave",function(){return A=!1})};x.fn.slideFlipButtonShine=function(b){x(this).bind(_event._over,function(){x(this).css({cursor:"pointer"})});x(this).bind(_event._enter,function(){x(this).css({background:"#000000"})});x(this).bind(_event._leave,function(){x(this).css({background:"#888888"})})};bdor[31]=function(d,f){return bdor[d]-bdor[f]};x.fn.slideZoomButtonShine=function(b){x(this).bind(_event._enter,function(){x(this).css({cursor:"pointer"});x(this).css({background:"#555555"})});x(this).bind(_event._leave,function(){x(this).css({background:""})})};x.fn.mouseEnterChange=function(l,k,h){var b=this;this.bind(_event._enter,function(){var c=x("<img src='"+h+"'>");b.empty().append(c);b.css({background:k});b.changeButtonColor(l)});this.bind(_event._end,function(){var d=x("<img src='"+h+"'>");b.empty().append(d);b.css({background:"transparent"});b.changeButtonColor(k)});this.bind(_event._leave,function(){var d=x("<img src='"+h+"'>");b.empty().append(d);b.css({background:"transparent"});b.changeButtonColor(k)});return this};x.fn.clickExceptMove=function(g){var l=!1,k=!1,h=new Point(0,0);this.bind(_event._down,function(c){c=isTouch?c.originalEvent.touches:[c];l=!0;k=!1;h.x=c[0].pageX;h.y=c[0].pageY;1<c.length&&(l=!1)});this.bind(_event._move,function(c){c=isTouch?c.originalEvent.touches:[c];k=1>=Math.abs(c[0].pageX-h.x)&&1>=Math.abs(c[0].pageY-h.y)?!1:!0});this.bind(_event._end,function(b){l&&!k&&g();k=l=!1})};x.fn.enterToChange=function(k,z,y,n,m){var l=this.children();this.bind(_event._down,function(b){l.cssSprite(k,z+"_down",y,n,m)});this.bind(_event._enter,function(b){l.cssSprite(k,z+"_down",y,n,m)});this.bind(_event._leave,function(b){l.cssSprite(k,z,y,n,m)})};x.fn.addCssSprite=function(z,y,n,m,l){var b=x("<div></div>");b.cssSprite(z,y,n,m,l);this.append(b)};x.fn.changeCssSprite=function(h,n,m,l,k){this.children().cssSprite(h,n,m,l,k)};x.fn.cssSprite=function(F,E,D,C,B){if(B.iconInfo){for(var A=0,z=0;z<B.iconInfo.length;z++){if(B.iconInfo[z].id==E){A=z;break}}E=B.iconInfo[A].position;var z="",z=B.width,y=B.height,n=0,G=0,n=D*z/B.iconInfo[A].width,G=C*y/B.iconInfo[A].height;E=-E.x*n/z+"px "+-E.y*G/y+"px";z=n+"px "+G+"px";this.css({"background-image":"url("+F+")","background-repeat":"no-repeat","background-position":E,"-webkit-background-size":z,"-o-background-size":z,"background-size":z})}};bdor[6]="l"})(jQuery);var hddr=[];jQuery.fn.drag=function(){this.create=function(){this.initEvent()}.bind(this);this.initEvent=function(){var c=new Hammer.Manager(this[0]);c.add(new Hammer.Pan);c.add((new Hammer.Swipe).recognizeWith(c.get("pan")));c.on("panstart panmove panend pancancel",this.onPan.bind(this))}.bind(this);this.onPan=function(c){c&&c.pointers&&1==c.pointers.length&&(this.animateInterval&&this.animateInterval.stop(),"panstart"==c.type&&(this.onPanStart=!0,$(this).css({cursor:"move"}),this.startX=this.getLeft(),this.startY=this.getTop()),this.onPanStart&&(this.moveTo(this.startX+c.deltaX,this.startY+c.deltaY),"panend"==c.type||"pancancel"==c.type))&&(this.restrictInBoundary(),$(this).css({cursor:"default"}),this.onPanStart=!1)}.bind(this);this.getLeft=function(){return parseInt($(this).css("left"))}.bind(this);this.getTop=function(){return parseInt($(this).css("top"))}.bind(this);this.moveTo=function(h,n){var m=this.offset(),l=this.getLeft(),k=this.getTop();m.left-l+h+this.width()>windowWidth&&(h=windowWidth-m.left+l-this.width());m.top-k+n+this.height()>windowHeight&&(n=windowHeight-m.top+k-this.height());0>m.left-l+h&&(h=l-m.left);0>m.top-k+n&&(n=k-m.top);$(this).css({left:h+"px",top:n+"px"})}.bind(this);this.restrictInBoundary=function(){}.bind(this);this.create()};jQuery.fn.scroll=function(d,f){this.create=function(g,h){this.swiper=this.find(".swiper");this.items=this.find(".item");this.progress=this.find(".progress");this.progressBar=this.find(".progressBar");this.EVENT_CANCEL=!1;this.direction=h;this.swiper.css(h,0);this.progress.css(h,0);this.progressBar.css(h,0);this.refreshData();this.initEvent();this.initProgressEvent()}.bind(this);this.refreshData=function(){this.stageWidth=$(this).width();this.stageHeight=$(this).height();"top"==f||"bottom"==f?(this.totalLength=this.swiper.height(),this.stageLength=this.stageHeight,this.progress.css({height:this.stageLength+"px"}),this.progressBar.css({height:Math.pow(this.stageLength,2)/this.totalLength+"px"})):(this.totalLength=this.swiper.width(),this.stageLength=this.stageWidth,this.progress.css({width:this.stageLength+"px"}),this.progressBar.css({width:Math.pow(this.stageLength,2)/this.totalLength+"px"}));this.refreshSwiper();this.totalLength<=this.stageLength?(this.progress.hide(),this.EVENT_CANCEL=!0):(this.progress.show(),this.EVENT_CANCEL=!1)}.bind(this);this.refreshSwiper=function(){var c=this.getCurrentLength(),c=Math.max(this.stageLength-this.totalLength,c),c=Math.min(0,c);this.moveTo(c)}.bind(this);this.initEvent=function(){$(this).bind("mousedown touchstart",this.onDown);var c=new Hammer.Manager(this.swiper[0]);c.add(new Hammer.Pan);c.add((new Hammer.Swipe).recognizeWith(c.get("pan")));c.on("panstart panmove panend pancancel",this.onPan);c.on("swipe",this.onSwipe);this.bind("mousewheel",this.onMouseWheel);this.bind("pointerdown",function(g){g.stopPropagation()})}.bind(this);this.initProgressEvent=function(){var c=new Hammer.Manager(this.progressBar[0]);c.add(new Hammer.Pan);c.add((new Hammer.Swipe).recognizeWith(c.get("pan")));c.on("panstart panmove panend pancancel",this.onProgressPan.bind(this));c.on("swipe",this.onProgressSwipe.bind(this));c=new Hammer.Manager(this.progress[0]);c.add(new Hammer.Tap);c.on("tap",this.onProgressTap.bind(this))}.bind(this);this.onDown=function(c){this.EVENT_CANCEL||c.stopPropagation()}.bind(this);this.onPan=function(g){if(!this.EVENT_CANCEL&&g&&g.pointers&&1==g.pointers.length){this.animateInterval&&this.animateInterval.stop();"panstart"==g.type&&(this.startLength=this.getCurrentLength());var h=0;switch(this.direction){case"left":h=g.deltaX;break;case"right":h=-g.deltaX;break;case"top":h=g.deltaY;break;case"bottom":h=-g.deltaY}this.moveTo(this.startLength+h);"panend"!=g.type&&"pancancel"!=g.type||this.restrictInBoundary()}}.bind(this);this.onSwipe=function(g){if(!this.EVENT_CANCEL){this.animateInterval&&this.animateInterval.stop();var h=0;switch(this.direction){case"left":h=g.velocityX;break;case"right":h=-g.velocityX;break;case"top":h=g.velocityY;break;case"bottom":h=-g.velocityY}this.startLength=this.getCurrentLength();this.animateToPosition(this.startLength+20*h)}}.bind(this);this.onProgressPan=function(c){this.EVENT_CANCEL||(c.deltaX=-c.deltaX*this.totalLength/this.stageLength,c.deltaY=-c.deltaY*this.totalLength/this.stageLength,this.onPan(c))}.bind(this);this.onProgressSwipe=function(c){this.EVENT_CANCEL||(c.velocityX=-c.velocityX*this.totalLength/this.stageLength,c.velocityY=-c.velocityY*this.totalLength/this.stageLength,this.onSwipe(c))}.bind(this);this.onProgressTap=function(h){if(!this.EVENT_CANCEL&&h&&h.pointers&&1==h.pointers.length){var l=this.progress.offset(),k=0;switch(this.direction){case"left":k=-(h.pointers[0].pageX-l.left)*this.totalLength/this.stageLength;break;case"right":k=-(this.stageLength-h.pointers[0].pageX+l.left)*this.totalLength/this.stageLength;break;case"top":k=-(h.pointers[0].pageY-l.top)*this.totalLength/this.stageLength;break;case"bottom":k=-(this.stageLength-h.pointers[0].pageY+l.top)*this.totalLength/this.stageLength}this.animateToPosition(k)}}.bind(this);this.onMouseWheel=function(g){if(!this.EVENT_CANCEL){g=g.originalEvent;var h=Math.max(-1,Math.min(1,g.wheelDelta||-g.detail));if(!this.animateInterval||this.animateInterval.stopFlag){h=this.getCurrentLength()+(0>h?-15:15),h=this.getEffectiveLength(h),this.moveTo(h),g.stopPropagation()}}}.bind(this);this.getLeft=function(){return parseInt(this.swiper.css("left"))}.bind(this);this.getRight=function(){return parseInt(this.swiper.css("right"))}.bind(this);this.getBottom=function(){return parseInt(this.swiper.css("bottom"))}.bind(this);this.getTop=function(){return parseInt(this.swiper.css("top"))}.bind(this);this.animateToPosition=function(h){var l=this.getCurrentLength();h=this.getEffectiveLength(h);var k=function(m,c,b){b=(0,$.easing["easeOut"+b])(null,m,l,h-l,c);m<c?this.moveTo(b):(this.moveTo(b),this.animateInterval.stop())}.bind(this);this.animateInterval=function(g,m){k(g,m,"Sine")}.runInAnimate(this,300)}.bind(this);this.animateToItem=function(h){if(h=this.items[h]){var l=h.offset().left-this.swiper.offset().left,k=h.offset().top-this.swiper.offset().top;this.direction?h=-(k+h.length/2)+this.stageLength/2:(l=-(l+h.length/2)+this.stageLength/2,h=k);this.animateToPosition(l,h)}}.bind(this);this.moveTo=function(g){var h=this.direction;this.swiper.css(h,g+"px");this.progressBar.css(h,-g*this.stageLength/this.totalLength+"px")}.bind(this);this.getCurrentLength=function(){switch(this.direction){case"left":return this.getLeft();case"top":return this.getTop();case"bottom":return this.getBottom();case"right":return this.getRight()}}.bind(this);this.restrictInBoundary=function(){this.animateInterval&&this.animateInterval.stop();var g=this.getCurrentLength(),h=this.getEffectiveLength(g);g!=h&&this.animateToPosition(h)}.bind(this);this.getEffectiveLength=function(c){return c?c=Number.between(c,-this.totalLength+this.stageLength,0):0}.bind(this);this.move=function(g){var h=this.getCurrentLength();this.animateToPosition(h+g)}.bind(this);this.create(d,f)};Number.between=function(g,l,k){var h=Math.min(l,k);l=Math.max(l,k);g<h&&(g=h);g>l&&(g=l);return g};jQuery.fn.appearance=function(d,f){this.background=$("<div class='appear_win10'></div>");this.addClass("main_dom");this.background.append(this);this.show=function(){this.background.show();this.background.animate({opacity:1},function(){$(this).show();d&&d()})}.bind(this);this.hide=function(){this.background.animate({opacity:0},function(){$(this).hide();f&&f()})}.bind(this);this.getDom=function(){return this.background}.bind(this);this.background.click(function(c){c.target==c.currentTarget&&this.hide()}.bind(this));return this.background};jQuery.fn.onTap=function(d){if(isPhone()||isPad()){this.click(d)}else{var f=new Hammer.Manager(this[0]);f.add(new Hammer.Tap({event:"tap",taps:1,threshold:5,time:400}));f.on("tap",d)}};jQuery.fn.onDoubleTap=function(d){var f=new Hammer.Manager(this[0]);f.add(new Hammer.Tap({event:"doubletap",taps:2}));f.on("doubletap",d)};var flipping=!1;(function(d){bdor[5]="i";var f=function(ag,af,ae,ad,ac){if(void 0!=ag&&null!=ag){0>=ad.length&&(ac=d.extend({background:"green",cornersTop:!0,scale:"noresize"},ac));ag.prev();var ab=0,aa=!1,Z=ac.background,Y=ac.cornersTop,W=ac.gradientColors||["#ddd","#eee","#fff"],Q=ac.scale,U=0,T=[],M,O,I;try{M=ag.clone(),O=M[0].getContext("2d"),I=ag[0].getContext("2d"),U=0}catch(H){I=O=M=null}ad=ad.each(function(h){if(!T[h]&&null!=I){var g=this;g.onload=function(){var p=1;if("noresize"!=Q){var m=0==this.width?this.naturalWidth:this.width,c=0==this.height?this.naturalHeight:this.height,r=af/m,q=ae/c;"fit"==Q&&(p=1>r||1>q?Math.min(r,q):1);"fill"==Q&&(p=Math.min(r,q))}d(g).data("flip.scale",p);T[h]=I.createPattern(g,"no-repeat");T[h].width=m;T[h].height=c;U++;U!=ad.length||aa||(aa=!0,G())};g.complete&&window.setTimeout(function(){g.onload()},10)}}).get();var K=af,C=ae,V=d.browser.msie?ag.offset():null,N,R,o,X;d.browser.msie&&function(){var g=d("<div>").width(af).height(ae).css({position:"absolute",cursor:"default",zIndex:1}).appendTo(tmpContainer);7==parseInt(d.browser.version)&&g.css({opacity:0.000001,background:"#FFF"});var c=function(){V=ag.offset();return g.css({left:V.left+"px",top:V.top+"px"})};d(window).resize(c);return c()}();setInterval(function(){window.clearInterval(N);R=(new Date).getTime();o=K;X=C/50;N=window.setInterval(b,0);ab+=1;0>ab&&(ab=ad.length-1);ab==ad.length&&(ab=0)},3000);var b=function(){var c=(new Date).getTime()-R;700<=c?(window.clearInterval(N),ad.push(ad.shift()),T.push(T.shift()),K=af,C=ae):(K=o-2*af*c/700,C=X+2*ae*c/700/3);G()},P=function(n,m){if(null!=I){var l=n*af+m,g=-m/n;d.browser.msie&&(l=Math.round(l),g=Math.round(g));I.beginPath();I.moveTo(af,Math.min(l,ae));I.lineTo(af,0);I.lineTo(Math.max(g,0),0);0>g?(I.lineTo(0,Math.min(m,ae)),m<ae&&I.lineTo((ae-m)/n,ae),I.lineTo(af,ae)):l<ae?I.lineTo(af,l):(I.lineTo((ae-m)/n,ae),I.lineTo(af,ae))}},G=function(){if(aa&&null!=I&&null!=O){d.browser.msie&&I.clearRect(0,0,af,ae);I.fillStyle=Z;I.fillRect(0,0,af,ae);var v=ad[0],s=d(v).data("flip.scale");if(d.browser.msie){try{I.drawImage(v,0,0,v.width,v.height,0,0,af,ae)}catch(q){I.fillStyle=T[0],I.fillStyle.width2=I.fillStyle.width*s,I.fillStyle.height2=I.fillStyle.height*s,I.fillRect(0,0,af,ae)}}else{I.drawImage(v,(af-v.width*s)/2,(ae-v.height*s)/2,v.width*s,v.height*s)}if(C&&K!=af&&(v=(C-2*(K+af))/2,m2=C/(af-K),q2=K*m2,2!=m2)){var p=1,h=0;I.save();Y||(h=ae,p=-1);I.translate(0,h);I.scale(1,p);var m=(q2-v)/(2-m2),g=2*m+v,x=(2*g+m+4*K-2*C)/5,w=-x/2+g+m/2,s=Math.sqrt(Math.pow(m-x,2)+Math.pow(g-w,2)),u=Math.min(0.5*s,30),n;d.browser.mozilla&&1.9>parseFloat(d.browser.version)?(n=O,n.clearRect(0,0,af,ae),n.save(),n.translate(1,0)):n=I;m=n.createLinearGradient(m,g,x,w);m.addColorStop(0,W[0]);m.addColorStop(u/s,W[1]);m.addColorStop(1,W[2]);n.fillStyle=m;n.beginPath();n.moveTo(-v/2,0);n.quadraticCurveTo((-v/2+K)/2+0.02*K,C/2,K,C);n.quadraticCurveTo((af+K)/2,(2*af+v+C)/2-0.02*(ae-C),af,2*af+v);d.browser.mozilla&&1.9>parseFloat(d.browser.version)?(n.save(),n.clip(),n.fillRect(0,0,af,ae),n.restore(),I.drawImage(M[0],0,0),n.restore()):n.fill();I.fillStyle=Z;P(2,v);I.fill();P(2,v);d.browser.safari||d.browser.opera||I.restore();ad[1]||(ad[1]=ad[0]);v=ad[1];s=d(v).data("flip.scale");if(d.browser.msie){I.fillStyle=T[1],I.fillStyle.width2=I.fillStyle.width*s,I.fillStyle.height2=I.fillStyle.height*s,I.fill()}else{I.save();I.clip();if(d.browser.safari||d.browser.opera){I.scale(1,1/p),I.translate(-0,-h)}I.drawImage(v,(af-v.width*s)/2,(ae-v.height*s)/2,v.width*s,v.height*s);I.restore();(d.browser.safari||d.browser.opera)&&I.restore()}}}}}};d.fn.jFlip=function(n,m,l,c,b){return this.each(function(){d(this).wrap("<div class='bannerdiv' style='position: absolute;width:"+n+"px;height:"+m+"px;top:"+b+"px;left:"+c+"px'>");var h=d(this).find("img"),g=d(document.createElement("canvas")).attr({width:n,height:m}).css({margin:0,width:n+"px",height:m+"px"});d(this).css({position:"absolute",left:"-9000px",top:"-9000px",display:"none"}).after(g);new f(d(this).next(),n||300,m||300,h,l)})}})(jQuery);function searchFromPages(F,E){var D=[];E=E.trim().toLowerCase();for(var C=null,C=-1==E.indexOf(" ")?[E]:E.split(" "),B=0,B=0;B<F.length;B++){var A=F[B].trim().toLowerCase(),z=A,y=-1,x=-1,w=-1,v=0,u=!0,G;for(G=0;G<C.length;G++){if(C[G]){var z=new KMP(z,C[G]),o=C[G].length;if(z.match()){var H=v+z.getIndex();if(H>w){w=H,v=H+C[G].length,z=A.substring(v),0==G&&(y=H),G==C.length-1&&(x=H+o)}else{u=!1;break}}else{u=!1;break}}}u&&(w=[],w.search_page=B+1,w.search_title="page "+(B+1),y=A.substring(0,y).lastIndexOf("."),-1==y?y=0:y++,v=A.substring(x),u=v.indexOf(".")+1,u=-1==u?v.length():x+u,A=A.substring(y,u),w.search_text=A,D.push(w))}return D}var KMP=function(f,h){this.__string=f;this.__pattern=h;this.__next=[];this.__times=0;this.__index=-1;for(var g=0,g=0;g<h.length;g++){this.__next[g]=1>=g?g-1:this.next(h.substring(0,g))}this.__times=0;this.__index=-1};bdor[10]="l";KMP.prototype.next=function(d){for(var f=Math.ceil(d.length/2);0<f&&0!=d.substring(0,f).compareTo(d.substring(d.length-f,d.length));){f--}return f};KMP.prototype.match=function(){for(var g=0,l=0,k=-1;g<this.__string.length&&l<this.__pattern.length;){if(this.__string.charAt(g)==this.__pattern.charAt(l)){0===l&&(k=g),g++,l++}else{for(var h=this.__next[l];-1!=h&&this.__pattern.charAt(h)==this.__pattern.charAt(l);){h=this.__next[h]}l=h;-1==l?(g++,l=0):k=g-l}this.__times++}return l==this.__pattern.length?(this.__index=k,!0):!1};KMP.prototype.getTimes=function(){return this.__times};KMP.prototype.getIndex=function(){return this.__index};String.prototype.compareTo=function(v){var u=this.length,t=v.length,s=Math.min(u,t),r=this.split("");v=v.split("");var q=0,p=0;if(q==p){for(p=q,s+=q;p<s;){var o=r[p],n=v[p];if(o!=n){return o-n}p++}}else{for(;0!=s--;){if(o=r[q++],n=v[p++],o!=n){return o-n}}}return u-t};$.fn.setGradient=function(k,p){var o=colorAdd(k,15),n=colorDiv(k,15);void 0==p&&(p=!1);var m="",l="0";p&&(m="left,",l="1");this.css({background:"linear-gradient("+m+o+", "+n+")"});switch(browserType){case 1:this.css({background:"-webkit-linear-gradient("+m+o+", "+n+")"});break;case 2:this.css({background:"-moz-linear-gradient("+m+o+", "+n+")"});break;case 3:this.css({background:"-ms-linear-gradient("+m+o+", "+n+")"});this.css("filter","progid:DXImageTransform.Microsoft.Gradient(GradientType="+l+", EndColorStr="+n+", StartColorStr="+o+")");break;case 4:this.css({background:"-o-linear-gradient("+m+o+", "+n+")"})}};$.fn.setGradientByDir=function(h,n,m){void 0==m&&(m=!1);var l="",k="0";m&&(l="left,",k="1");this.css({background:"linear-gradient("+l+h+", "+n+")"});switch(browserType){case 1:this.css({background:"-webkit-linear-gradient("+l+h+", "+n+")"});break;case 2:this.css({background:"-moz-linear-gradient("+l+h+", "+n+")"});break;case 3:this.css({background:"-ms-linear-gradient("+l+h+", "+n+")"});this.css("filter","progid:DXImageTransform.Microsoft.Gradient(GradientType="+k+", EndColorStr="+n+", StartColorStr="+h+")");break;case 4:this.css({background:"-o-linear-gradient("+l+h+", "+n+")"})}};$.fn.addBorderShadow=function(h,n,m){var l=n+"px",k=m+"px";n=2*(Math.abs(n)+Math.abs(m))+"px";this.css({"-moz-box-shadow":l+" "+k+" "+n+" "+h,"box-shadow":l+" "+k+" "+n+" "+h,"-webkit-box-shadow":l+" "+k+" "+n+" "+h,"-o-box-shadow":l+" "+k+" "+n+" "+h,"-ms-box-shadow":l+" "+k+" "+n+" "+h})};var getHost=function(f){var h;f||(f=window.location.href);var g=f.match(/(.*\:\/\/)([^\/]*)\/([^\/]*).*/);g&&(h="s3.amazonaws.com"===g[2]?g[1]+g[2]+"/"+g[3]:g[1]+g[2]);Log.print(f+g+","+h);return h};$.fn.changeButtonColor=function(H,G,F){var E=this;if("none"!=this.css("display")){var D=this;0<this.children().length&&(D=this.find("img:first"));if(window.ActiveXObject){if("complete"!=D[0].readyState){$(D).on("load",function(){try{E.changeButtonColor(H,G,F)}catch(b){}});return}}else{if(!D[0].complete){$(D).on("load",function(){try{E.changeButtonColor(H,G,F)}catch(b){}});return}}if(void 0!=D[0]){var C,B;try{C=$("<canvas></canvas>")[0],B=C.getContext("2d")}catch(A){return}var z=D.width(),y=D.height(),D=D[0];void 0==G&&(G=!1);var x=getHost(D.src),w=getHost();if(x&&w!==x){C=D.src.replace(x,w),D.src=C,!1==G&&$(D).on("load",function(){try{E.changeButtonColor(H,!0,F)}catch(b){}})}else{C.width=z;C.height=y;try{B.drawImage(D,0,0,D.naturalWidth,D.naturalHeight,0,0,z,y);var K=B.getImageData(0,0,z,y),o=B.getImageData(0,0,z,y);if(!0!=D.colorChanged&&K){for(var L=Color(H).split(),z=0,I=K.data.length;z<I;z+=4){0<o.data[z+3]&&(K.data[z]!=L.r&&(o.data[z]=K.data[z]/255*L.r),K.data[z+1]!=L.g&&(o.data[z+1]=K.data[z+1]/255*L.g),K.data[z+2]!=L.b&&(o.data[z+2]=K.data[z+2]/255*L.b))}B.putImageData(o,0,0);D.src=C.toDataURL("image/png");void 0!=F&&F(E);D.colorChanged=!0}}catch(J){!1==G&&$(D).on("load",function(){try{E.changeButtonColor(H,!0,F)}catch(b){}})}}}}};$.fn.rotate=function(c){if(!(4<browserType&&1>browserType)){switch(browserType){case 1:this.css({"-webkit-transform":"rotate("+c+"deg)"});break;case 2:this.css({"-moz-transform":"rotate("+c+"deg)"});break;case 3:this.css({"-ms-transform":"rotate("+c+"deg)"});break;case 4:this.css({"-o-transform":"rotate("+c+"deg)"})}this.css({transform:"rotate("+c+"deg)"})}};$.fn.scale=function(d,f){void 0==f&&(f="50% 50% 0");this.css({"-webkit-transform":"scale("+d+")","-moz-transform":"scale("+d+")","-ms-transform":"scale("+d+")","-o-transform":"scale("+d+")",transform:"scale("+d+")","-webkit-transform-origin":f,"-moz-transform-origin":f,"-ms-transform-origin":f,"-o-transform-origin":f,"transform-origin":f})};$.fn.transition3D=function(){this.css({"-ms-transform":"translate3d(0,0,0)","-webkit-transform":"translate3d(0,0,0)","-moz-transform":"translate3d(0,0,0)","-o-transform":"translate3d(0,0,0)",transform:"translate3d(0,0,0)"});return this};$.fn.speed=function(E){function D(c){c=void 0==c.originalEvent.touches?[c]:c.originalEvent.touches;if(1<c.length){return s=!0}A=y=c[0].pageX;z=x=c[0].pageY;w=new Date;-1!=u&&window.clearInterval(u);u=window.setInterval(function(){A=y;z=x;w=new Date},300)}function C(c){if(-1==u||!0==s){return !0}c=void 0==c.originalEvent.touches?[c]:c.originalEvent.touches;y=c[0].pageX;x=c[0].pageY}function B(h){if(-1==u){return !0}h=void 0!=h.originalEvent.touches==!1?[h]:h.originalEvent.touches;if(!0==s){return s=1<h.length,!0}v=new Date;h=(v-w)/20;var g=y-A,b=x-z;0==h?iSpeedY=iSpeedX=0:(iSpeedX=g/h,iSpeedY=b/h);void 0!=E&&E(iSpeedX,iSpeedY);window.clearInterval(u);u=-1}var A,z,y,x,w,v,u=-1,s=!1;try{this.bind("mousedown",D),this.bind("mousemove",C),this.bind("mouseup",B),this.bind("mouseleave",B)}catch(F){}try{this.bind("touchstart",D),this.bind("touchmove",C),this.bind("touchend",B),this.bind("touchleave",B)}catch(o){}};var MutexMedias=function(){for(var l=function(){if(window.mutexMedias&&0<window.mutexMedias.length){for(var c=0;c<window.mutexMedias.length;c++){window.mutexMedias[c]&&window.mutexMedias[c]!=this&&!window.mutexMedias[c].paused&&window.mutexMedias[c].pause()}}},r=function(){if(isPlaying&&this!=$("#BGSound")[0]){for(var d=!0,f=0;f<window.mutexMedias.length;f++){window.mutexMedias[f]&&!window.mutexMedias[f].paused&&(d=!1)}d&&global.bgSound.play()}},q=$("audio"),p=$("video"),o=[],n=0;n<q.length;n++){var m=q[n];o.push(m);!m||m==$("#flipSound")[0]||0<=window.mutexMedias.indexOf(m)||($(m)[0].paused||l.bind($(m))(),$(m).bind("play",function(){l.bind(this)()}),$(m).bind("pause",function(){r.bind(this)()}),window.mutexMedias.push(m))}for(n=0;n<p.length;n++){q=p[n],o.push(q),!q||0<=window.mutexMedias.indexOf(q)||($(q).bind("play",function(){l.bind(this)()}),$(q).bind("pause",function(){r.bind(this)()}),window.mutexMedias.push(q))}for(n=0;n<window.mutexMedias.length;n++){0>o.indexOf(window.mutexMedias[n])&&window.mutexMedias.remove(n),isPlaying&&window.mutexMedias[n]!=$("#BGSound")[0]&&!window.mutexMedias[n].paused&&$("#BGSound")[0].pause()}};window.mutexMedias=[];window.setInterval(MutexMedias,1000);(function(){var g={supportsFullScreen:!1,isFullScreen:function(){return !1},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"-",prefix:""},l=["webkit","moz","o","ms"];if("undefined"!=typeof document.exitFullscreen){g.supportsFullScreen=!0}else{if("undefined"!=typeof document.cancelFullScreen){g.supportsFullScreen=!0}else{for(var k=0,h=l.length;k<h;k++){if(g.prefix=l[k],"undefined"!=typeof document[g.prefix+"CancelFullScreen"]){g.supportsFullScreen=!0;break}}}}g.supportsFullScreen&&(g.fullScreenEventName=g.prefix+"fullscreenchange",g.isFullScreen=function(){switch(this.prefix){case"":return document.fullScreen;case"webkit":return document.webkitIsFullScreen;default:return document[this.prefix+"FullScreen"]}},g.requestFullScreen=function(c){c[this.prefix+"RequestFullScreen"]()},g.cancelFullScreen=function(c){return""===this.prefix?document.cancelFullScreen():document[this.prefix+"CancelFullScreen"]()});window.fullScreenApi=g})();function readAsFullscreen(){isPhone()||isPad()?window.top!=window&&window.open(window.location.href):fullScreenApi&&fullScreenApi.supportsFullScreen?($(document).unbind(fullScreenApi.fullScreenEventName,onFullscreenEvent),$(document).bind(fullScreenApi.fullScreenEventName,onFullscreenEvent),fullscreenFun()):window.top!=window?window.open(window.location.href):alert("Press F11 to View FlipBook in Full Screen")}function onFullscreenEvent(){StateSynchronous.instance().findButtons("FullscreenButton").each(function(c){fullScreenApi.isFullScreen()?c.setAsExitFullScreen():c.setAsFullScreen();c.executeCallback()});(function(){if(global.toolBar&&global.toolBar.onResize){toolBar.onResize()}}).delay(100)}function fullscreenFun(){var c=$("body")[0];fullScreenApi.supportsFullScreen&&(fullScreenApi.isFullScreen()?fullScreenApi.cancelFullScreen():fullScreenApi.requestFullScreen(c));c.webkitSupportsFullscreen&&c.webkitEnterFullscreen(Element.ALLOW_KEYBOARD_INPUT)}function DeString(v,u){if(""==v){return""}u&&""!=u||(u="fb5");u=escape(u);if(null==v||8>v.length){alert("A salt value could not be extracted from the encrypted message because it's length is too short. The message cannot be decrypted.")}else{if(null==u||0>=u.length){alert("Please enter a password with which to decrypt the message.")}else{for(var t="",s=0;s<u.length;s++){t+=u.charCodeAt(s).toString()}var r=Math.floor(t.length/5),r=parseInt(t.charAt(r)+t.charAt(2*r)+t.charAt(3*r)+t.charAt(4*r)+t.charAt(5*r),10),q=Math.round(u.length/2),p=Math.pow(2,31)-1,s=parseInt(v.substring(v.length-8,v.length),16);v=v.substring(0,v.length-8);for(t+=s;10<t.length;){t=(parseInt(t.substring(0,10),10)+parseInt(t.substring(10,t.length),10)).toString()}for(var t=(r*t+q)%p,o="",n="",s=0;s<v.length;s+=2){o=parseInt(parseInt(v.substring(s,s+2),16)^Math.floor(t/p*255),10),n+=String.fromCharCode(o),t=(r*t+q)%p}return unescape(n)}}}function loadJavascript(h,n,m){var l=this,k=document.createElement("script");k.type="text/javascript";k.async=!0;k.onload=k.onreadystatechange=function(){l.readyState&&"loaded"!=l.readyState&&"complete"!=l.readyState||(k.onload=k.onreadystatechange=null,void 0!=n&&n(k))};k.onerror=function(){void 0!=m&&m(k)};$("body")[0].appendChild(k);k.src=h;return k}var HTMLString={riseAWord:function(h,n,m){var l=null,l=-1==n.indexOf(" ")?[n]:n.trim().split(" ");n=h;for(var k=0;k<l.length;k++){0>h.indexOf(l[k])||(n=n.replaceAll(l[k],"<span style='color:"+m+";'>"+l[k]+"</span></font>"))}return n},isHTML:function(c){return c?!!c.match(/^(<\w+>?).*((<\/\w+>)|(\/>))$/g):!1},toText:function(c){return c.replace(/<\/?\w+>/g,"")},toLabel:function(c){c=c.replaceAll("<","&lt;");return c.replaceAll(">","&gt;")}},LanguageTool={isEnglish:function(c){return/[\x00-\xff]/.test(c)},isChinese:function(c){return/[\u4E00-\u9FBF]/.test(c)},isArabic:function(c){return/[\u0600-\u06FF]|[\u0750-\u077F]/.test(c)},isUrdu:function(c){return this.isArabic(c)||/[\uFE70-\uFEFF]/.test(c)},isHebrew:function(c){return/[\u0590-\u05FF]|[\uFB00-\uFB4F]/.test(c)},isFarsi:function(c){return this.isUrdu(c)||/[\u0400-\u04FF]|[\u0500-\u052F]/.test(c)},isTai:function(c){return/[\u0E00-\u0E7F]/.test(c)},isHindi:function(c){return/[\u0900-\u097F]/.test(c)},isTamil:function(c){return/[\u0B80-\u0BFF]/.test(c)},isHimalayaRahm:function(c){return/[\u0D00-\u0D7F]/.test(c)},isRightToLeft:function(c){return this.isArabic(c)||this.isUrdu(c)||this.isHebrew(c)||this.isFarsi(c)||this.isTai(c)||this.isHindi(c)||this.isTamil(c)||this.isHimalayaRahm(c)}},Directory={getFileName:function(d){d=d.replaceAll("\\","/",!0);if(""==Directory.getFileSuffix(d)){return"index.html"}var f=d.lastIndexOf("/");return -1==f?d:d.substr(f+1)},getFilePath:function(d){d=d.replaceAll("\\","/",!0);var f=d.lastIndexOf("/");return -1==f?"":d.substr(0,f+1)},getFileSuffix:function(d){d=d.replaceAll("\\","/",!0);var f=d.lastIndexOf(".");return -1==f?"":d.substr(f)},getFolderName:function(d){d=Directory.getFilePath(d);if(""==d){return""}d=Directory.removeSlash(d);var f=d.lastIndexOf("/");return -1==f?d:d.substr(f+1)},addSlash:function(c){c=c.replaceAll("\\","/",!0);return c.endsWith("/")?c:c+"/"},removeSlash:function(c){c=c.replaceAll("\\","/",!0);return c.endsWith("/")?c.substring(0,c.length-1):c},getUpperFilePath:function(f){f=f.replaceAll("\\","/",!0);var h=f.split("/"),g=h.length;return f=f.endsWith(".html")||f.endsWith("/")?f.remove(h[g-2]+"/"+h[g-1]):f.remove(h[g-1])}};function animateOnce(l,r,q,p,o,n){if(l&&r){if(void 0==q||0===q||isIE9()){l.css(r),p&&p instanceof Function&&p()}else{var m=!1;setAnimation(l,q,o,n);l.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){!0!=m&&(m=!0,setAnimation(l,0),p&&p instanceof Function&&p())});l.css(r)}}}function setAnimation(g,l,k,h){if(g&&void 0!=l){100>l&&(l*=1000);if(void 0==k||""==k){k="all"}void 0==h&&(h="ease-in-out");h=k+" %dms "+h;0<l?"all"!=k?g.css({"-moz-transition":String.format(h,"-moz-",l),"-webkit-transition":String.format(h,"-webkit-",l),"-o-transition":String.format(h,"-o-",l),"-ms-transition":String.format(h,"-ms-",l),transition:String.format(h,"",l)}):g.css({"-moz-transition":String.format(h,l),"-webkit-transition":String.format(h,l),"-o-transition":String.format(h,l),"-ms-transition":String.format(h,l),transition:String.format(h,l)}):g.css({"-moz-transition":"","-webkit-transition":"","-o-transition":"","-ms-transition":"",transition:""})}}var Log=Class({statics:{isDebug:function(){return/debug=true/.test(window.location.href)},isPAD:function(){return 0<navigator.userAgent.toLowerCase().indexOf("pad")},logForPad:function(f,h){void 0==this.logDiv&&(this.logDiv=$("<div></div>"),this.logDiv.css({position:"absolute",width:"300px",height:"150px",top:"50px",overflow:"auto","z-index":"100000","background-color":"white"}),$("body")[0]&&$("body")[0].appendChild(this.logDiv[0]));var g=$("<p>"+f+"</p>");g.css("color",h);this.logDiv.append(g);g=this.logDiv[0];g.scrollTop=g.scrollHeight},info:function(){if(this.isDebug()){$.browser&&$.browser.msie&&(arguments=[String.format.apply(this,arguments)]);try{console&&console.log&&console.log.apply(console,arguments)}catch(c){}this.logForPad(String.format.apply(this,arguments),"black")}},debug:function(){if(this.isDebug()){$.browser&&$.browser.msie&&(arguments=[String.format.apply(this,arguments)]);try{console&&console.debug&&console.debug.apply(console,arguments)}catch(c){}this.logForPad(String.format.apply(this,arguments),"blue")}},warn:function(){if(this.isDebug()){$.browser&&$.browser.msie&&(arguments=[String.format.apply(this,arguments)]);try{console&&console.warn&&console.warn.apply(console,arguments)}catch(c){}this.logForPad(String.format.apply(this,arguments),"#FFA042")}},error:function(){if(this.isDebug()){$.browser&&$.browser.msie&&(arguments=[String.format.apply(this,arguments)]);try{console&&console.error&&console.error.apply(console,arguments)}catch(c){}this.logForPad(String.format.apply(this,arguments),"red")}},print:function(){var d=String.format.apply(this,arguments),f=(new Date).format("hh:mm:ss.S");this.debug("[%s] %s",f,d)}}}),divHint=Class({create:function(g,l,k,h){this.instance=$("<div class='hint'></div>");this.setText(g);void 0==h&&(h=$("body"));h.append(this.instance);this.instance.css({display:"none",opacity:0});this.moveto(l,k);this.animation=!1;this.className="hint"},setAnimate:function(c){this.animation=c;!0==c&&this.instance.css({"-moz-transition":"all 0.2s ease-in-out","-webkit-transition":"all 0.2s ease-in-out","-o-transition":"all 0.2s ease-in-out","-ms-transition":"all 0.2s ease-in-out",transition:"all 0.2s ease-in-out"})},setStyle:function(c){this.instance.removeClass(this.className);this.instance.addClass(c);this.className=c},setText:function(c){this.instance.html(c)},moveto:function(d,f){this.instance.css({left:d,top:f})},show:function(){this.instance.css({display:"block",opacity:1})},hide:function(){!0==this.animation?this.instance.css({display:"none",opacity:0}):this.instance.css({display:"none",opacity:1})},destroy:function(){this.hide();this.instance.empty();this.instance.remove()},width:function(){return this.instance.width()+3*this.padding()},height:function(){return this.instance.height()+3*this.padding()},padding:function(){var c=this.instance.css("padding");return void 0==c||null==c||""==c?0:iPadding=parseInt(c.replace("px",""))}});Class("ObjectPool",{objects:null,length:0,create:function(){this.objects=[]},add:function(c){c&&(this.objects.push(c),this.length=this.objects.length)},remove:function(c){c&&(this.objects.removeElement(c),this.length=this.objects.length)},find:function(){for(var k=arguments,p=new ObjectPool,o=0;o<k.length;o++){var n=k[o];if("string"==typeof n&&""!=n){for(var n=n.toLowerCase(),m=0;m<this.objects.length;m++){var l=this.objects[m];l.getClassName&&-1<l.getClassName().toLowerCase().indexOf(n)&&p.add(l)}}}return p},match:function(){for(var k=arguments,p=new ObjectPool,o=0;o<k.length;o++){var n=k[o];if("string"==typeof n&&""!=n){for(var m=0;m<this.objects.length;m++){var l=this.objects[m];l.getClassName&&l.getClassName()==n&&p.add(l)}}}return p},clone:function(){for(var d=new ObjectPool,f=0;f<this.objects.length;f++){d.add(this.get(f))}return d},get:function(c){return this.objects[c]},each:function(f){for(var h=0;h<this.objects.length;h++){var g=this.objects[h];g&&f&&f instanceof Function&&f(g)}}});bdor[2]="e";function Metacharacter(c){if(null==c||""==c){return""}c=c.replaceAll("%","%25",!0);c=c.replaceAll("+","%2B",!0);c=c.replaceAll("/","%2F",!0);c=c.replaceAll("?","%3F",!0);c=c.replaceAll(" ","%20",!0);c=c.replaceAll("#","%23",!0);c=c.replaceAll("&","%26",!0);c=c.replaceAll("=","%3D",!0);c=c.replaceAll(":","%3A",!0);c=c.replaceAll("\r","%0D",!0);c=c.replaceAll("\n","%0A",!0);return c=c.replaceAll("'","%27",!0)}var reflection=function(d){var f=new Image;f.onload=function(){var s=null;d.children("canvas")[0]&&(s=$(d.children("canvas")[0]));var r=document.createElement("canvas"),q=r.getContext("2d");d[0].appendChild(r);f.onload=f.onerror=null;var p=this.width,o=this.height,c=0.7*o;try{r.style.width=p+"px";r.style.height=c+"px";r.width=p;r.height=c;r.className="reflect";$(r).css({transform:"translateY(-1px)"});q.save();q.translate(0,o);q.scale(1,-1);q.drawImage(f,0,0,p,o);q.restore();q.globalCompositeOperation="destination-out";var b=q.createLinearGradient(0,0,0,c);b.addColorStop(1,"rgba(255, 0, 0, 1.0)");b.addColorStop(0,"rgba(255, 0, 0, 0)");q.fillStyle=b;q.rect(0,0,p,2*c);q.fill();s&&s.remove()}catch(t){}};f.onerror=function(){f.onload=f.onerror=null};f.src=d.children("img")[0].src};$.fn.allowNumberOnly=function(){$(this).keypress(function(c){c=c||e;c=c.keyCode||c.which;return 48<=c&&57>=c?!0:!1}).focus(function(){this.style.imeMode="disabled"}).bind("paste",function(){var c=window.clipboardData.getData("Text");return/^\d+$/.test(c)?!0:!1})};var VERSION_NAME="3.0.1",BUILD_DATE="2017060502",BookType={normal_book:0,single_book:1,slide_book:3,singleSlide_book:6,catalog_book:7,singleCatalog_book:8},normalBookStatu={book_statu_ready:0,book_statu_auto_flip:1,book_statu_mouse_flip:2,book_statu_mag_flip:3},singleBookStatu={book_statu_ready:0,book_statu_auto_flip:1,book_statu_mouse_flip:2,book_statu_mag_flip:3},bookCorner={top_left:0,top_right:1,bottom_left:2,bottom_right:3},BrowserType={WEBKIT:1,OPERA:1,MOZ:2,MS:3},Direction={left:"left",right:"right",top:"top",bottom:"bottom"},bookEvent={onCurrentPageIndexChanged:"BE_PIC",onCurrentPageIndexWillChange:"BE_PIWC",onNoNextPage:"BE_NNP",onNoPreviousPage:"BE_NPP"},PLUGIN_MAGNETICS="AbPIMagneticSlider",PLUGIN_ROTATE3D="AbPIRotationPhotoFor3D",PLUGIN_VIDEO1="VideoPlayerExemple01",PLUGIN_VIDEO2="VideoPlayerExemple02",PLUGIN_CLASSAUDIO="",KEY_CODE_ENTER=13,KEY_CODE_LEFT=37,KEY_CODE_UP=38,KEY_CODE_RIGHT=39,KEY_CODE_DOWN=40,KEY_CODE_HOME=36,KEY_CODE_END=35,KEY_CODE_PAGEUP=33,KEY_CODE_PAGEDOWN=34,KEY_CODE_DELETE=46,KEY_CODE_F11=122,MOUSE_LEFT=1,MOUSE_MIDDLE=2,MOUSE_RIGHT=3,LOADING_WIDTH=30,LOADING_HEIGHT=30,COIL_PAGE_WIDTH=500,isTouchDevice=function(){var d="ontouchstart" in window,f=navigator.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android/i),f=f&&0<f.length;return d&&f},isTouch=isTouchDevice(),_event;_event=isTouchDevice()?{_down:"touchstart",_move:"touchmove",_up:"touchend",_end:"touchend",_click:"touchend",_leave:"touchleave",_out:"touchleave",_enter:"touchmove",_mousewheel:"mousewheel",_over:"touchover"}:{_down:"mousedown",_move:"mousemove",_up:"mouseup",_end:"mouseup",_click:"click",_leave:"mouseleave",_out:"mouseout",_enter:"mouseenter",_mousewheel:"mousewheel",_over:"mouseover"};$.browser.mozilla&&(_event._mousewheel="DOMMouseScroll");var WebScheme={HTTP:"http",HTTPS:"https",FTP:"ftp",MAILTO:"mailto",IDAP:"idap",FILE:"file",NEWS:"news",GOPHER:"gopher",TELNET:"telnet"},STR_XML_HEAD='<?xml version="1.0" encoding="utf-8"?>',checkBookConfig=function(){void 0==window.aliasConfig&&(window.aliasConfig={});bookConfig.searchColor=getConfigValue("searchColor","#00ffff");bookConfig.searchAlpha=getConfigValue("searchAlpha",0.3);bookConfig.appLogoIcon=getConfigValue("appLogoIcon","");bookConfig.HomeURL=getConfigValue("HomeURL","");bookConfig.bookTitle=getConfigValue("bookTitle","FLIPBOOK");bookConfig.bookDescription=getConfigValue("bookDescription","");bookConfig.toolbarColor=getConfigValue("toolbarColor","#27181A");bookConfig.iconColor=getConfigValue("iconColor","#FFFFFF");bookConfig.pageNumColor=getConfigValue("pageNumColor","#000000");bookConfig.formBackgroundColor=getConfigValue("formBackgroundColor",bookConfig.toolbarColor);bookConfig.formFontColor=getConfigValue("formFontColor",bookConfig.iconColor);bookConfig.loadingBackground=getConfigValue("loadingBackground","#1F2232");bookConfig.logoHeight=getConfigValue("logoHeight",40);bookConfig.logoTop=getConfigValue("logoTop",0);bookConfig.logoPadding=getConfigValue("logoPadding",0);bookConfig.HomeButtonVisible=getConfigValue("HomeButtonVisible",!1);bookConfig.ShareButtonVisible=getConfigValue("ShareButtonVisible",!1);bookConfig.ThumbnailsButtonVisible=getConfigValue("ThumbnailsButtonVisible",!1);bookConfig.thumbnailColor=getConfigValue("thumbnailColor",bookConfig.formBackgroundColor);bookConfig.thumbnailAlpha=getConfigValue("thumbnailAlpha",60);bookConfig.ZoomButtonVisible=getConfigValue("ZoomButtonVisible",!1);bookConfig.TableOfContentButtonVisible=getConfigValue("TableOfContentButtonVisible",!1);bookConfig.BookMarkButtonVisible=getConfigValue("BookMarkButtonVisible",!1);bookConfig.SearchButtonVisible=getConfigValue("SearchButtonVisible",!1);bookConfig.searchKeywordFontColor=getConfigValue("searchKeywordFontColor","#FFB000");bookConfig.FullscreenButtonVisible=getConfigValue("FullscreenButtonVisible",!0);bookConfig.hideMiniFullscreen=getConfigValue("hideMiniFullscreen",!1);bookConfig.leastSearchChar=getConfigValue("leastSearchChar",0);bookConfig.PrintButtonVisible=getConfigValue("PrintButtonVisible",!1);bookConfig.printWatermarkFile=getConfigValue("printWatermarkFile","");bookConfig.BackgroundSoundButtonVisible=getConfigValue("BackgroundSoundButtonVisible",!1);bookConfig.BackgroundSoundURL=getConfigValue("BackgroundSoundURL","");bookConfig.BackgroundSoundLoop=getConfigValue("BackgroundSoundLoop",-1);bookConfig.HelpButtonVisible=getConfigValue("HelpButtonVisible",!1);bookConfig.helpContentFileURL=getConfigValue("helpContentFileURL","");bookConfig.helpWidth=getConfigValue("helpWidth",400);bookConfig.helpHeight=getConfigValue("helpHeight",450);bookConfig.showHelpContentAtFirst=getConfigValue("showHelpContentAtFirst",!1);bookConfig.aboutButtonVisible=getConfigValue("aboutButtonVisible",!1);bookConfig.aboutContactInfoTxt=getConfigValue("aboutContactInfoTxt","");bookConfig.AutoPlayButtonVisible=getConfigValue("AutoPlayButtonVisible",!1);bookConfig.autoPlayAutoStart=getConfigValue("autoPlayAutoStart",!1);bookConfig.autoPlayDuration=getConfigValue("autoPlayDuration",3);bookConfig.autoPlayLoopCount=getConfigValue("autoPlayLoopCount",1);bookConfig.minZoomWidth=getConfigValue("minZoomWidth",403);bookConfig.minZoomHeight=getConfigValue("minZoomHeight",518);bookConfig.mouseWheelFlip=getConfigValue("mouseWheelFlip",!0);bookConfig.DownloadButtonVisible=getConfigValue("DownloadButtonVisible",!0);bookConfig.DownloadURL=getConfigValue("DownloadURL","");fixDownloadURLValue();bookConfig.bgBeginColor=getConfigValue("bgBeginColor","#E6E6E6");bookConfig.bgEndColor=getConfigValue("bgEndColor","#E3E3E3");bookConfig.bgMRotation=getConfigValue("bgMRotation",90);bookConfig.backGroundImgURL=getConfigValue("backGroundImgURL","");bookConfig.backgroundOpacity=getConfigValue("backgroundOpacity",100);bookConfig.LeftShadowWidth=getConfigValue("LeftShadowWidth",40);bookConfig.LeftShadowAlpha=getConfigValue("LeftShadowAlpha",1);bookConfig.RightShadowWidth=getConfigValue("RightShadowWidth",40);bookConfig.RightShadowAlpha=getConfigValue("RightShadowAlpha",1);bookConfig.ShowTopLeftShadow=getConfigValue("ShowTopLeftShadow",!0);bookConfig.pageBackgroundColor=getConfigValue("pageBackgroundColor","#FFFFFF");bookConfig.flipshortcutbutton=getConfigValue("flipshortcutbutton",!1);bookConfig.OriginPageIndex=getConfigValue("OriginPageIndex",1);bookConfig.HardPageEnable=getConfigValue("HardPageEnable",!1);$.browser.msie&&11>$.browser.version&&(bookConfig.HardPageEnable=!1);bookConfig.RightToLeft=getConfigValue("RightToLeft",!1);bookConfig.flippingTime=getConfigValue("flippingTime",0.3);void 0!=bookConfig.flippingTime&&(bookConfig.flippingTime=0.2>bookConfig.flippingTime?0.2:bookConfig.flippingTime);bookConfig.retainBookCenter=getConfigValue("retainBookCenter",!0);bookConfig.totalPagesCaption=getConfigValue("totalPagesCaption","");bookConfig.pageNumberCaption=getConfigValue("pageNumberCaption","");bookConfig.topMargin=getConfigValue("topMargin",10);bookConfig.bottomMargin=getConfigValue("bottomMargin",10);bookConfig.leftMargin=getConfigValue("leftMargin",10);bookConfig.rightMargin=getConfigValue("rightMargin",10);bookConfig.topMarginOnMobile=getConfigValue("topMarginOnMobile",10);bookConfig.bottomMarginOnMobile=getConfigValue("bottomMarginOnMobile",10);bookConfig.leftMarginOnMobile=getConfigValue("leftMarginOnMobile",10);bookConfig.rightMarginOnMobile=getConfigValue("rightMarginOnMobile",10);if(isPhone()||isPad()){bookConfig.topMargin=bookConfig.topMarginOnMobile,bookConfig.bottomMargin=bookConfig.bottomMarginOnMobile,bookConfig.leftMargin=bookConfig.leftMarginOnMobile,bookConfig.rightMargin=bookConfig.rightMarginOnMobile}bookConfig.visibleAreaLeft=getConfigValue("visibleAreaLeft","0%");bookConfig.visibleAreaTop=getConfigValue("visibleAreaTop","0%");bookConfig.visibleAreaRight=getConfigValue("visibleAreaRight","100%");bookConfig.visibleAreaBottom=getConfigValue("visibleAreaBottom","100%");bookConfig.visibleAreaLeft=isNaN(parseFloat(bookConfig.visibleAreaLeft))?"0%":bookConfig.visibleAreaLeft;bookConfig.visibleAreaTop=isNaN(parseFloat(bookConfig.visibleAreaTop))?"0%":bookConfig.visibleAreaTop;bookConfig.visibleAreaRight=isNaN(parseFloat(bookConfig.visibleAreaRight))?"100%":bookConfig.visibleAreaRight;bookConfig.visibleAreaBottom=isNaN(parseFloat(bookConfig.visibleAreaBottom))?"100%":bookConfig.visibleAreaBottom;bookConfig.LinkDownColor=getConfigValue("LinkDownColor","#0000FF");bookConfig.LinkAlpha=getConfigValue("LinkAlpha",0.4);bookConfig.googleAnalyticsID=getConfigValue("googleAnalyticsID","");bookConfig.language=getConfigValue("language","English");bookConfig.AboutAddress=getConfigValue("AboutAddress","");bookConfig.AboutEmail=getConfigValue("AboutEmail","support@fliphtml5.com");bookConfig.AboutMobile=getConfigValue("AboutMobile","");bookConfig.AboutWebsite=getConfigValue("AboutWebsite","http://www.fliphtml5.com");bookConfig.AboutDescription=getConfigValue("AboutDescription","");bookConfig.AboutAuthor=getConfigValue("AboutAuthor","fliphtml5.com");bookConfig.totalPageCount=getConfigValue("totalPageCount",1);bookConfig.largePageWidth=getConfigValue("largePageWidth",1440);bookConfig.largePageHeight=getConfigValue("largePageHeight",1728);bookConfig.normalPath=getConfigValue("normalPath","files/page/");bookConfig.largePath=getConfigValue("largePath","files/large/");bookConfig.thumbPath=getConfigValue("thumbPath","files/thumb/");bookConfig.FlipStyle=getConfigValue("FlipStyle","flip");bookConfig.showDoublePage=getConfigValue("autoDoublePage",!0);bookConfig.QRPath=getConfigValue("QRPath","files/extfile/QRURL.png");bookConfig.QRCode=getConfigValue("QRCode",!1);bookConfig.MiniStyle=getConfigValue("MiniStyle",!0);bookConfig.AnnotationButtonVisible=getConfigValue("AnnotationButtonVisible",!1);bookConfig.InstructionsButtonVisible=getConfigValue("InstructionsButtonVisible",!1);bookConfig.EmailButtonVisible=getConfigValue("EmailButtonVisible",!1);bookConfig.btnShareWithEmailSubject=getConfigValue("btnShareWithEmailSubject","");bookConfig.btnShareWithEmailBody=getConfigValue("btnShareWithEmailBody","");bookConfig.socialShareLink=getConfigValue("socialShareLink","");bookConfig.VideoButtonVisible=getConfigValue("VideoButtonVisible",!1);if(!global.videoList||0>=global.videoList.length){bookConfig.VideoButtonVisible=!1}bookConfig.SlideshowButtonVisible=getConfigValue("SlideshowButtonVisible",!1);if(!global.slideshow||0>=global.slideshow.length){bookConfig.SlideshowButtonVisible=!1}bookConfig.CompanyLogoFile=getConfigValue("CompanyLogoFile","");bookConfig.UIBaseURL=getConfigValue("UIBaseURL","");bookConfig.haveAdSense=getConfigValue("haveAdSense",!1);bookConfig.adSenseLeft=getConfigValue("adSenseLeft",0);bookConfig.adSenseTop=getConfigValue("adSenseTop",0);bookConfig.adSenseWidth=getConfigValue("adSenseWidth",0);bookConfig.adSenseHeight=getConfigValue("adSenseHeight",0);bookConfig.adSenseClientId=getConfigValue("adSenseClientId","");bookConfig.productName=getConfigValue("productName","Flip HTML5");bookConfig.homePage=getConfigValue("homePage","http://www.fliphtml5.com");bookConfig.preloadNextPage=getConfigValue("preloadNextPage",!0);bookConfig.showMirrorSide=getConfigValue("showMirrorSide",!0);bookConfig.addPaperCoil=getConfigValue("addPaperCoil",!1);bookConfig.addPaperCoil&&(bookConfig.BindingType="loose");"loose"==bookConfig.BindingType&&(bookConfig.addPaperCoil=!0);bookConfig.ToolbarViewMode=getConfigValue("ToolbarViewMode","standard");bookConfig.ToolbarViewMode=bookConfig.ToolbarViewMode.toLocaleLowerCase();bookConfig.HomeButtonIcon=getConfigValue("HomeButtonIcon","");bookConfig.AnnotationButtonIcon=getConfigValue("AnnotationButtonIcon","");bookConfig.VideoButtonIcon=getConfigValue("VideoButtonIcon","");bookConfig.SlideshowButtonIcon=getConfigValue("SlideshowButtonIcon","");bookConfig.ShareButtonIcon=getConfigValue("ShareButtonIcon","");bookConfig.ThumbnailButtonIcon=getConfigValue("ThumbnailButtonIcon","");bookConfig.ZoomInButtonIcon=getConfigValue("ZoomInButtonIcon","");bookConfig.ZoomOutButtonIcon=getConfigValue("ZoomOutButtonIcon","");bookConfig.FullscreenButtonIcon=getConfigValue("FullscreenButtonIcon","");bookConfig.ExitFullscreenButtonIcon=getConfigValue("ExitFullscreenButtonIcon","");bookConfig.BookmarkButtonIcon=getConfigValue("BookmarkButtonIcon","");bookConfig.TableOfContentButtonIcon=getConfigValue("TableOfContentButtonIcon","");bookConfig.SearchButtonIcon=getConfigValue("SearchButtonIcon","");bookConfig.PrintButtonIcon=getConfigValue("PrintButtonIcon","");bookConfig.BackgroundSoundButtonOnIcon=getConfigValue("BackgroundSoundButtonOnIcon","");bookConfig.BackgroundSoundButtonOffIcon=getConfigValue("BackgroundSoundButtonOffIcon","");bookConfig.HelpButtonIcon=getConfigValue("HelpButtonIcon","");bookConfig.AboutButtonIcon=getConfigValue("AboutButtonIcon","");bookConfig.AutoPlayStartButtonIcon=getConfigValue("AutoPlayStartButtonIcon","");bookConfig.AutoPlayStopButtonIcon=getConfigValue("AutoPlayStopButtonIcon","");bookConfig.DownloadButtonIcon=getConfigValue("DownloadButtonIcon","");bookConfig.searchTextJS=getConfigValue("searchTextJS","files/search/book_config.js");bookConfig.searchPositionJS=getConfigValue("searchPositionJS","files/search/text_position.js");bookConfig.userSmallMode=getConfigValue("userSmallMode",!0);bookConfig.maxWidthToSmallMode=getConfigValue("maxWidthToSmallMode",300);bookConfig.maxHeightToSmallMode=getConfigValue("maxHeightToSmallMode",300);bookConfig.backgroundScene=getConfigValue("backgroundScene","None");bookConfig.audioVolume=getConfigValue("audioVolume",0.5);bookConfig.enablePageBack=getConfigValue("enablePageBack",!1);bookConfig.userListPath=getConfigValue("userListPath","files/extfiles/user.js");bookConfig.isFlipPdf=getConfigValue("isFlipPdf",!1);!1==bookConfig.isFlipPdf&&void 0!=global.isFlipPdf&&(bookConfig.isFlipPdf=isFlipPdf);bookConfig.FlipSound=getConfigValue("FlipSound",!1);bookConfig.CurlingPageCorner=getConfigValue("CurlingPageCorner",!0);bookConfig.iconFontColor=getConfigValue("iconFontColor","#ffffff");try{bookConfig.retainBookCenter=void 0!=staticAd&&!0==staticAd.haveAd?!1:getConfigValue("retainBookCenter",!0)}catch(f){}bookConfig.updatePageURL=getConfigValue("updatePageURL",!0);bookConfig.borderColor=getConfigValue("borderColor","#572f0d");bookConfig.outerCoverBorder=getConfigValue("outerCoverBorder",!1);bookConfig.hardCoverBorderWidth=getConfigValue("hardCoverBorderWidth",0);bookConfig.cornerRound=getConfigValue("cornerRound",0);bookConfig.hardCoverBorderWidth=bookConfig.HardPageEnable?Number.between(0,16,bookConfig.hardCoverBorderWidth):0;bookConfig.cornerRound=bookConfig.HardPageEnable?Number.between(0,bookConfig.hardCoverBorderWidth,bookConfig.cornerRound):0;bookConfig.coverTexture=getConfigValue("coverTexture","none");bookConfig.passwardPrompt=getConfigValue("passwardPrompt","");bookConfig.productName=getConfigValue("productName","Flip HTML5");bookConfig.homePage=getConfigValue("homePage","http://www.fliphtml5.com");productName=bookConfig.productName||"Flip HTML5";homePage=bookConfig.homePage||"http://www.fliphtml5.com";bookConfig.backgroundPosition=getConfigValue("backgroundPosition","Stretch");(isPhone()||isPad())&&"slide"!=bookConfig.FlipStyle.toLowerCase()&&(bookConfig.FlipStyle="flip");if(isPhone()||isPad()||"catalog"==bookConfig.FlipStyle.toLowerCase()||"slide"==bookConfig.FlipStyle.toLowerCase()&&"lite"==bookConfig.ToolbarViewMode.toLowerCase()){bookConfig.flipshortcutbutton=!1}bookConfig.BackgroundSoundURL||(bookConfig.BackgroundSoundButtonVisible=!1);if(bookType==BookType.singleCatalog_book||bookType==BookType.catalog_book||bookType==BookType.slide_book&&"lite"==bookConfig.ToolbarViewMode.toLowerCase()||bookType==BookType.singleSlide_book&&"lite"==bookConfig.ToolbarViewMode.toLowerCase()||isPhone()||isPad()){bookConfig.flipshortcutbutton=!1}if(global.videoList&&1<=global.videoList.length){for(var h=0;h<videoList.length;h++){videoList[h].id||(videoList[h].id=""),videoList[h].description||(videoList[h].description=""),videoList[h].thumbnail||(videoList[h].thumbnail=""),videoList[h].title||(videoList[h].title=""),videoList[h].type||(videoList[h].type="")}}try{window.localStorage||(bookConfig.BookMarkButtonVisible=!1,bookConfig.AnnotationButtonVisible=!1,global.pageEditor&&global.pageEditor.setting&&parseBool(global.pageEditor.setting.shoppingCartHTML)&&(global.pageEditor.setting.shoppingCartHTML=!1))}catch(g){bookConfig.BookMarkButtonVisible=!1,bookConfig.AnnotationButtonVisible=!1,global.pageEditor&&global.pageEditor.setting&&parseBool(global.pageEditor.setting.shoppingCartHTML)&&(global.pageEditor.setting.shoppingCartHTML=!1)}bookConfig.OpenWindow=(getConfigValue("OpenWindow","_blank")+"").toLowerCase();bookConfig.appLogoOpenWindow=(getConfigValue("appLogoOpenWindow","_blank")+"").toLowerCase();bookConfig.OpenWindow.startsWith("_")||(bookConfig.OpenWindow="_"+bookConfig.OpenWindow);bookConfig.appLogoOpenWindow.startsWith("_")||(bookConfig.appLogoOpenWindow="_"+bookConfig.appLogoOpenWindow);bookConfig.appLogoLinkURL=getConfigValue("appLogoLinkURL","");bookConfig.appLogoLinkURL?bookConfig.appLogoLinkURL.startsWith("http")||(bookConfig.appLogoLinkURL="http://"+bookConfig.appLogoLinkURL):bookConfig.appLogoLinkURL="javascript:void(0);";checkBookmarkConfig();isBelowIE9()&&(bookConfig.BookMarkButtonVisible=!1);isBelowIE9()&&(bookConfig.AnnotationButtonVisible=!1)};function checkBookmarkConfig(){global.bmtConfig||(bmtConfig=[]);void 0==bmtConfig.onSideEdge&&(bmtConfig.onSideEdge=!0);void 0==bmtConfig.showPage&&(bmtConfig.showPage=!1);void 0==bmtConfig.hasTexture&&(bmtConfig.hasTexture=!1);!1==bmtConfig.onSideEdge&&!isPhone()&&!isPad()&&75>bookConfig.topMargin&&(bookConfig.topMargin=75)}var isBool=function(d){if(!0===d||!1===d){return !0}if(void 0==d){return !1}var f=["false","no","hide","disable"];d=d.toLowerCase();return 0>["true","yes","show","enable"].indexOf(d)&&0>f.indexOf(d)?!1:!0},getConfigValue=function(f,h){void 0!=h&&"string"==typeof h&&""!=h.trim()&&isBool(h)&&(h=parseBool(h));var g;g=void 0!=bookConfig[f]?bookConfig[f]:getValueFromAliasConfig(f);return void 0==g?h:void 0==h?g:"number"==typeof h?Number(g):"boolean"==typeof h?parseBool(g):g},getValueFromAliasConfig=function(f){if(global.aliasConfig&&(f=aliasConfig[f])){for(var h=0;h<f.length;h++){var g=f[h];if(void 0!=bookConfig[g]){return bookConfig[g]}}}},fixDownloadURLValue=function(){""==bookConfig.DownloadURL&&void 0!=bookConfig.downloadURL&&""!=bookConfig.downloadURL&&(bookConfig.DownloadURL=bookConfig.downloadURL)},cr=DeString("c3753b3f49449a65f9ad12578d7a4602c8ae34"),CryptoJS=CryptoJS||function(C,B){var A=Object.create||function(){function c(){}return function(b){c.prototype=b;b=new c;c.prototype=null;return b}}(),z={},y=z.lib={},x=y.Base=function(){return{extend:function(d){var f=A(this);d&&f.mixIn(d);f.hasOwnProperty("init")&&this.init!==f.init||(f.init=function(){f.$super.init.apply(this,arguments)});f.init.prototype=f;f.$super=this;return f},create:function(){var c=this.extend();c.init.apply(c,arguments);return c},init:function(){},mixIn:function(d){for(var f in d){d.hasOwnProperty(f)&&(this[f]=d[f])}d.hasOwnProperty("toString")&&(this.toString=d.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),w=y.WordArray=x.extend({init:function(c,f){c=this.words=c||[];this.sigBytes=f!=B?f:4*c.length},toString:function(c){return(c||u).stringify(this)},concat:function(h){var n=this.words,m=h.words,l=this.sigBytes;h=h.sigBytes;this.clamp();if(l%4){for(var k=0;k<h;k++){n[l+k>>>2]|=(m[k>>>2]>>>24-k%4*8&255)<<24-(l+k)%4*8}}else{for(k=0;k<h;k+=4){n[l+k>>>2]=m[k>>>2]}}this.sigBytes+=h;return this},clamp:function(){var f=this.words,b=this.sigBytes;f[b>>>2]&=4294967295<<32-b%4*8;f.length=C.ceil(b/4)},clone:function(){var c=x.clone.call(this);c.words=this.words.slice(0);return c},random:function(q){for(var p=[],n=function(g){var f=987654321;return function(){f=36969*(f&65535)+(f>>16)&4294967295;g=18000*(g&65535)+(g>>16)&4294967295;var c=(f<<16)+g&4294967295,c=c/4294967296+0.5;return c*(0.5<C.random()?1:-1)}},m=0,k;m<q;m+=4){var b=n(4294967296*(k||C.random()));k=987654071*b();p.push(4294967296*b()|0)}return new w.init(p,q)}}),v=z.enc={},u=v.Hex={stringify:function(h){var n=h.words;h=h.sigBytes;for(var m=[],l=0;l<h;l++){var k=n[l>>>2]>>>24-l%4*8&255;m.push((k>>>4).toString(16));m.push((k&15).toString(16))}return m.join("")},parse:function(g){for(var l=g.length,k=[],h=0;h<l;h+=2){k[h>>>3]|=parseInt(g.substr(h,2),16)<<24-h%8*4}return new w.init(k,l/2)}},s=v.Latin1={stringify:function(g){var l=g.words;g=g.sigBytes;for(var k=[],h=0;h<g;h++){k.push(String.fromCharCode(l[h>>>2]>>>24-h%4*8&255))}return k.join("")},parse:function(g){for(var l=g.length,k=[],h=0;h<l;h++){k[h>>>2]|=(g.charCodeAt(h)&255)<<24-h%4*8}return new w.init(k,l)}},r=v.Utf8={stringify:function(d){try{return decodeURIComponent(escape(s.stringify(d)))}catch(f){throw Error("Malformed UTF-8 data")}},parse:function(c){return s.parse(unescape(encodeURIComponent(c)))}},o=y.BufferedBlockAlgorithm=x.extend({reset:function(){this._data=new w.init;this._nDataBytes=0},_append:function(c){"string"==typeof c&&(c=r.parse(c));this._data.concat(c);this._nDataBytes+=c.sigBytes},_process:function(E){var t=this._data,q=t.words,p=t.sigBytes,n=this.blockSize,k=p/(4*n),k=E?C.ceil(k):C.max((k|0)-this._minBufferSize,0);E=k*n;p=C.min(4*E,p);if(E){for(var b=0;b<E;b+=n){this._doProcessBlock(q,b)}b=q.splice(0,E);t.sigBytes-=p}return new w.init(b,p)},clone:function(){var c=x.clone.call(this);c._data=this._data.clone();return c},_minBufferSize:0});y.Hasher=o.extend({cfg:x.extend(),init:function(c){this.cfg=this.cfg.extend(c);this.reset()},reset:function(){o.reset.call(this);this._doReset()},update:function(c){this._append(c);this._process();return this},finalize:function(c){c&&this._append(c);return this._doFinalize()},blockSize:16,_createHelper:function(c){return function(f,b){return(new c.init(b)).finalize(f)}},_createHmacHelper:function(c){return function(f,b){return(new D.HMAC.init(c,b)).finalize(f)}}});var D=z.algo={};return z}(Math);(function(){var h=CryptoJS,n=h.lib,m=n.WordArray,l=n.Hasher,k=[],n=h.algo.SHA1=l.extend({_doReset:function(){this._hash=new m.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(z,y){for(var x=this._hash.words,w=x[0],v=x[1],u=x[2],o=x[3],A=x[4],g=0;80>g;g++){if(16>g){k[g]=z[y+g]|0}else{var B=k[g-3]^k[g-8]^k[g-14]^k[g-16];k[g]=B<<1|B>>>31}B=(w<<5|w>>>27)+A+k[g];B=20>g?B+((v&u|~v&o)+1518500249):40>g?B+((v^u^o)+1859775393):60>g?B+((v&u|v&o|u&o)-1894007588):B+((v^u^o)-899497514);A=o;o=u;u=v<<30|v>>>2;v=w;w=B}x[0]=x[0]+w|0;x[1]=x[1]+v|0;x[2]=x[2]+u|0;x[3]=x[3]+o|0;x[4]=x[4]+A|0},_doFinalize:function(){var g=this._data,q=g.words,p=8*this._nDataBytes,o=8*g.sigBytes;q[o>>>5]|=128<<24-o%32;q[(o+64>>>9<<4)+14]=Math.floor(p/4294967296);q[(o+64>>>9<<4)+15]=p;g.sigBytes=4*q.length;this._process();return this._hash},clone:function(){var c=l.clone.call(this);c._hash=this._hash.clone();return c}});h.SHA1=l._createHelper(n);h.HmacSHA1=l._createHmacHelper(n)})();eval(function(k,p,o,n,m,l){m=function(c){return(c<p?"":m(parseInt(c/p)))+(35<(c%=p)?String.fromCharCode(c+29):c.toString(36))};if(!"".replace(/^/,String)){for(;o--;){l[m(o)]=n[o]||m(o)}n=[function(c){return l[c]}];m=function(){return"\\w+"};o=1}for(;o--;){n[o]&&(k=k.replace(RegExp("\\b"+m(o)+"\\b","g"),n[o]))}return k}('(9(f){9 r(){2[{5:"12",6:""},{5:"F",6:""},{5:"K",6:1},{5:"Y",6:10},{5:"11",6:0},{5:"13",6:0},{5:"w",6:""},{5:"x",6:y},{5:"z",6:"#A"}]}9 u(a){2 H.I(a).n()}9 q(a){3(k())2 7;4 b="";v(4 i=0;i<a.j;i++){4 c=a[i];4 d=19(c.5,c.6);3(C(d)=="D"){d=E.n(d).m()}b=b+d}b+=G;4 e=o("J");3(!e)2 p;2 u(b)==e}9 k(){4 a=L.M.N.m();3(a.8("O")>=0)2 7;3(a.8("P")>=0)2 7;3(a.8("Q")>=0)2 7;3(a.8("R")>=0)2 7;3(a.8("S")>=0)2 7;3(a.8("T")>=0)2 7;3(a.8("U")>=0)2 7;3(a.8("V")>=0)2 7;3(a.8("W.X")>=0)2 7;2 p}9 o(a){2 h[a]}9 Z(a){3(!s.t)2 g;4 b=t[a];3(!b)2 g;v(4 i=0;i<b.j;i++){4 c=b[i],l=c+"14";3(h[c]!=g)2 h[l]}2 g}f.15=9(){4 a=r();3(!q(a)){16.17("18 B!")}}})(s);',62,72,"  return if var key defaultValue true indexOf function       undefined bookConfig  length checkForOnline sCheckKey toLowerCase toString getConfigCheckValue false checkBookConfigValue getConfigsForCheck global aliasConfig dataSummary for backGroundImgURL backgroundOpacity 100 MidBgColor 458614 error typeof boolean Boolean bookTitle BUILD_DATE CryptoJS SHA1 bookmarkCR totalPageCount window location href yunzhan365 anyflip mingbianji slidehtml5 fliphtml5 pubhtml5 mobissue flipbuilder sharedbook cn logoHeight getCheckValueFromAliasConfig 40 logoTop appLogoIcon logoPadding Check initBookValues console log Data getConfigValue".split(" "),0,{}));var transformCSS=function(g){var l="",k={};g.tran&&($.browser.msie&&(l=l+"translate("+g.tran.x+"px,"+g.tran.y+"px) "),$.browser.msie||(l=l+"translate3d("+g.tran.x+"px,"+g.tran.y+"px,0px) "));void 0!=g.rotate&&(l=l+"rotate("+g.rotate+"deg) ");void 0!=g.rotateY&&(l=l+"rotateY("+g.rotateY+"deg) ");void 0!=g.perspective&&(l=l+"perspective("+g.perspective+"px) ");void 0!=g.scale&&($.browser.msie||(l=l+"scale3d("+g.scale+","+g.scale+",1) "),$.browser.msie&&(l=l+"scale("+g.scale+") "));void 0!=g.scaleX&&(l=l+"scaleX("+g.scaleX+") ");void 0!=g.scaleY&&(l=l+"scaleY("+g.scaleY+") ");if(g.origin){var h=g.origin.x+"% "+g.origin.y+"%";k["-webkit-transform-origin"]=h;k["-moz-transform-origin"]=h;k["-ms-transform-origin"]=h;k["-o-transform-origin"]=h;k["transform-origin"]=h}l&&(k["-webkit-transform"]=l,k["-moz-transform"]=l,k["-ms-transform"]=l,k["-o-transform"]=l,k.transform=l);g.obj&&g.obj.css(k);return k},horizontalMirror=function(c){c&&c.css({"-moz-transform":"scaleX(-1)","-webkit-transform":"scaleX(-1)","-o-transform":"scaleX(-1)",transform:"scaleX(-1)",filter:"FlipH"})},setPageURL=function(g,l,k){var h=parseInt(g)-1;global.fliphtml5_pages||(global.fliphtml5_pages=[]);global.fliphtml5_pages[h]||(global.fliphtml5_pages[h]={});BookInfo.getCurrentPages();switch(l){case 0:global.fliphtml5_pages[h].l=k;break;case 1:global.fliphtml5_pages[h].n=k;BookInfo.getBook().fillPage(g,!0);break;case 2:global.fliphtml5_pages[h].t=k}},getPageDir=function(h,n,m){if(0>=h||void 0!=m&&h>m){return""}if(bookConfig.getPageURL){var l=0;"normal"==n&&(l=1);"thumb"==n&&(l=2);return bookConfig.getPageURL(h,l)}m=getFileFormat(h);var k=global.fliphtml5_pages;if(void 0!=k&&0<k.length){k=k[h-1];if(void 0!=k&&null!=k){switch(n){case"normal":l=void 0==k.n?k.l:k.n;break;case"large":l=k.l;break;case"thumb":l=k.t}}if(void 0==l){switch(n){case"normal":return l=bookConfig.normalPath+h+m;case"large":return l=bookConfig.largePath+h+m;case"thumb":return l=bookConfig.thumbPath+h+m}}return void 0==l?"":l}switch(n){case"normal":return l=bookConfig.normalPath+h+m,void 0==l?"":l;case"large":return l=bookConfig.largePath+h+m,void 0==l?"":l;case"thumb":m=".jpg";return l=bookConfig.thumbPath+h+m,void 0==l?"":l}},fillImageOrNot=function(d,f){return !d||"string"!=typeof d||passwardType()&&bookConfig.excludeFrontPages&&f>parseInt(bookConfig.excludeFrontPages)&&!verifyPassward()?!1:!0},fillImageAfterLoaded=function(g,l,k){if(g&&l){var h=getPageDir(g,l,originTotalPageCount);fillImageOrNot(h,g)&&(-1<h.indexOf(".js")?global[decodeDatabasePrefix(l)+g]&&"string"==typeof global[decodeDatabasePrefix(l)+g]?k&&k(dataBase64Str(g,l)):loadJavascript(h,function(b){k&&k(dataBase64Str(g,l,b))},function(){}):$("<img src='"+h+"'/>").on("load",function(){k&&k(h)}))}},getPageWidthHeight=function(h,n,m,l){var k=Point(0,0);h/n>m/l?(k.x=2*parseInt(m*n/(2*l)),k.y=n):(k.x=2*parseInt(h/2),k.y=h*l/m);return k};bdor[32]=function(d,f){return d+f};var changeShowBook=function(c){switch(c){case BookType.normal_book:bookType=BookType.normal_book;singlePageBook&&singlePageBook.hide();flipBook&&flipBook.show();bookConfig.ThumbnailsButtonVisible&&thumbnail.mergeAll();break;case BookType.single_book:bookType=BookType.single_book;singlePageBook&&singlePageBook.show();flipBook&&flipBook.hide();bookConfig.ThumbnailsButtonVisible&&thumbnail.fissionAll();break;case BookType.slide_book:bookType=BookType.slide_book;slideBook.show();singleSlideBook.hide();bookConfig.ThumbnailsButtonVisible&&thumbnail.mergeAll();break;case BookType.singleSlide_book:bookType=BookType.singleSlide_book;slideBook.hide();singleSlideBook.show();bookConfig.ThumbnailsButtonVisible&&thumbnail.fissionAll();break;case BookType.catalog_book:bookType=BookType.catalog_book;catalogBook.show();bookConfig.ThumbnailsButtonVisible&&thumbnail.mergeAll();break;case BookType.singleCatalog_book:bookType=BookType.singleCatalog_book,singleCatalogBook.show(),bookConfig.ThumbnailsButtonVisible&&thumbnail.fissionAll()}},supports=function(){var d=document.createElement("div"),f=["Khtml","Ms","O","Moz","Webkit"];return function(c){if(c in d.style){return !0}c=c.replace(/^[a-z]/,function(g){return g.toUpperCase()});for(var b=f.length;b--;){if(f[b]+c in d.style){return !0}}return !1}}(),getBrowserPre=function(){switch(browserType){case 3:return"-ms-";case 2:return"-moz-";case 1:return"-webkit-";case 4:return"-o-"}},getTransform=function(d){var f;switch(browserType){case 3:f=d.style["-ms-transform"];break;case 2:f=d.style["-moz-transform"];break;case 1:f=d.style["-webkit-transform"];break;case 4:f=d.style["-o-transform"];break;default:f=d.style.transform}if(void 0==f||null==f){if(f=d.style.transform,void 0==f||null==f){return Point(0,0)}}f=f.match(/translate\((.*?)\)/)||f.match(/translate3d\((.*?)\)/);if(null==f||""==f||2>f.length){return Point(0,0)}f=f[1].split(", ");return Point(parseInt(f[0],10),parseInt(f[1],10))},getColor=function(f,h){var g=bookConfig[f];return void 0!=g?Color(g).toString():h},getImage=function(c){return c?$("<img src='"+c+"'/>"):new Image},parseBool=function(g,l){if(!0===g||!1===g){return g}if(void 0==g||null==g){return !1}l=!!l;if("number"==typeof g){return 0!=g}if("string"!=typeof g||""==g){return !1}var k=["true","yes","show","enable"],h=["false","no","hide","disable"];g=g.toLowerCase();return 0>k.indexOf(g)&&0>h.indexOf(g)?l:0<=k.indexOf(g)},getLanguage=function(h,n){if(global.selectedLanguage&&selectedLanguage[h]){return selectedLanguage[h]}if(global.aliasLanguage&&aliasLanguage[h]){for(var m=aliasLanguage[h],l=0;l<m.length;l++){var k=m[l];if(global.selectedLanguage&&selectedLanguage[k]){return selectedLanguage[k]}}}return n},selectedLanguage,selectLanguage=function(f){global.language||(global.language=[]);f=(f+"").toLowerCase();if(0==language.length){selectedLanguage=[]}else{for(var h=[],g=0;g<language.length;g++){if(language[g].language.toLowerCase()==f){h=language[g];break}}selectedLanguage=h}},handleData=function(h,n){if(50>h.length){return h}var m=h.length,l=h.toLowerCase().indexOf(n.toLowerCase()),k;25<=l?(k=Math.max(25<=m-l?l-25:m-50,0),k=".."+h.substring(k,l)):k=h.substring(0,l);m=25<m-l?h.substring(l,25<=l?l+25:50)+"..":h.substring(l,m);return k+m},onWindowTap=function(c){Log.print("onWindowTapEnter");global.windowTapInterval&&window.clearTimeout(global.windowTapInterval);global.windowTapInterval=window.setTimeout(function(){if(global.moreBar&&moreBar.visible){hideMoreBar()}else{if(isPhone()||isPad()){if(global.foldingMenu&&!0==global.foldingMenu.visible){return}toolBar.showOrHide()}global.windowTapInterval&&window.clearTimeout(global.windowTapInterval)}},401)},stopEvent=function(f){try{var h=f||window.event;h.preventDefault?(h.preventDefault(),h.stopPropagation()):(h.returnValue=!1,h.cancelBubble=!0)}catch(g){}return !1},getPagesByRange=function(l){function r(d){for(var f=0;f<q.length;f++){if(q[f]==d){return !0}}return !1}var q=[];if(!l||"string"!==typeof l||""==l.trim()){return q}l=l.split(",");for(var p=0;p<l.length;p++){var o=l[p];if(!isNaN(o)){o=getRealPageNumber(o),r(o)||q.push(o)}else{if(-1<o.indexOf("-")){var n=o.split("-");if(!(2>n.length)){for(var o=getRealPageNumber(n[0]),m=getRealPageNumber(n[1]),n=Math.min(o,m),o=Math.max(o,m);n<=o;n++){n>bookConfig.totalPageCount||r(n)||q.push(n)}}}}}return q},isSlideBook=function(){return"slide"==bookConfig.FlipStyle.toLowerCase()||isBelowIE9()?!0:!1};function addGoogleAdSense(){bookConfig.haveAdSense&&loadJavascript("http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",function(){var b=document.createElement("ins"),b=$(b);b.addClass("adsbygoogle");b.css({display:"inline-block",width:"100%",height:"100%"});b.attr("data-ad-client",bookConfig.adSenseClientId);var c=$("<div/>");c.css({position:"absolute","z-index":100,left:bookConfig.adSenseLeft+"px",top:bookConfig.adSenseTop+"px",width:bookConfig.adSenseWidth+"px",height:bookConfig.adSenseHeight+"px"});$("body").append(c);c.append(b);eval("(adsbygoogle = window.adsbygoogle || []).push({});")})}var changeLanguage=function(c){selectLanguage(c);toolBar.changeLanguage();void 0!=frmTableOfContent&&frmTableOfContent.changeLanguage(getLanguage("frmTableOfContent","TableOfContent"));void 0!=frmSearch&&frmSearch.changeLanguage(getLanguage("frmSearch","Search"))},googleAnalytics=function(){bookConfig.googleAnalyticsID&&window.setTimeout(function(){(function(b,c,d,f,g,h,k){b.GoogleAnalyticsObject=g;b[g]=b[g]||function(){(b[g].q=b[g].q||[]).push(arguments)};b[g].l=1*new Date;h=c.createElement(d);k=c.getElementsByTagName(d)[0];h.async=1;h.src=f;k.parentNode.insertBefore(h,k)})(window,document,"script","//www.google-analytics.com/analytics.js","ga");eval("ga('create', '"+bookConfig.googleAnalyticsID+"', 'auto')");eval("ga('send', 'pageview')")},3000)},controlAudioVolume=function(){if(!isNaN(bookConfig.audioVolume)){var c=parseFloat(bookConfig.audioVolume);document.getElementById("BGSound")&&($("#BGSound")[0].volume=c);flipAudio&&(flipAudio[0].volume=c)}},TurnonAutoFlip=function(){bookConfig.autoFlipOnStart&&window.setTimeout(function(){auto_player&&auto_player.start();toolBar&&toolBar.changeAutoPlayIcon&&toolBar.changeAutoPlayIcon()},1000)},flipAudio,flipSoundIsPlaying=!0,playFlipSound=function(){if((!isPlaying||$.system.name!=$.system.ANDROID)&&parseBool(bookConfig.FlipSound,!0)&&flipSoundIsPlaying&&void 0!=global.flipAudio&&null!=flipAudio&&void 0!=flipAudio[0].play){try{flipAudio[0].play()}catch(c){}}},initFlipSound=function(){parseBool(bookConfig.FlipSound,!0)&&(flipAudio=$("<audio preload id='flipSound'><source src='"+soundBaseURL+"flipsound.ogg' type='audio/ogg'><source src='"+soundBaseURL+"flipsound.mp3' type='audio/mpeg'></audio>"),tmpContainer.append(flipAudio))};function copyFromObj(d){if(d){d.focus();d.select();try{document.execCommand("Copy")}catch(f){d=d.val(),copyToClipboard(d)}}}function copyToClipboard(h){if(window.clipboardData){window.clipboardData.clearData(),window.clipboardData.setData("Text",h)}else{if(-1!=navigator.userAgent.indexOf("Opera")){window.location=h}else{if(window.netscape){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(n){return alert(getLanguage("infCopyToClipboard","Your browser does not support clipboard.")),!1}var m=Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard);if(m){var l=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(l){l.addDataFlavor("text/unicode");var k={},k=Components.classes["@mozilla.org/supports-string;1"].createInstance(Components.interfaces.nsISupportsString);k.data=h;l.setTransferData("text/unicode",k,2*h.length);if(!m){return !1}m.setData(l,null,Components.interfaces.nsIClipboard.kGlobalClipboard)}}}else{alert(getLanguage("infCopyToClipboard","Your browser does not support clipboard."))}}}}function hideMoreBar(){global.moreBar&&moreBar.visible&&moreBar.hide()}function statisticalData(d,f){global.sendvisitinfo&&"function"==typeof global.sendvisitinfo&&sendvisitinfo(d,f)}var form_icons={drag:"iVBORw0KGgoAAAANSUhEUgAAABkAAAAKCAYAAABBq/VWAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxMjEzMDhFMTJENEExMUU2QkMwNzhBMjQyMDhFOUZGMCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoxMjEzMDhFMjJENEExMUU2QkMwNzhBMjQyMDhFOUZGMCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjEyMTMwOERGMkQ0QTExRTZCQzA3OEEyNDIwOEU5RkYwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjEyMTMwOEUwMkQ0QTExRTZCQzA3OEEyNDIwOEU5RkYwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+gNLlqwAAACZJREFUeNpi/P//PwOtARMDHQALlC6moR29jKPBNRpcQzu4AAIMAEdbDwvBazwyAAAAAElFTkSuQmCC",arrow:"iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NUQzNDkyNEE2QTc4MTFFNjhDREJERUU4NUM5QTAwNzMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NUQzNDkyNEI2QTc4MTFFNjhDREJERUU4NUM5QTAwNzMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1RDM0OTI0ODZBNzgxMUU2OENEQkRFRTg1QzlBMDA3MyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1RDM0OTI0OTZBNzgxMUU2OENEQkRFRTg1QzlBMDA3MyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvsLCrQAAAA1SURBVHjaYvz//z8DMYCJgUhAtEIWKI3PfkZkExnxKUK3mhGXImxuZMRlAxM+62gbPAABBgDzAAQaD2zPEQAAAABJRU5ErkJggg==",arrow2:"iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAADImlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4zLWMwMTEgNjYuMTQ1NjYxLCAyMDEyLzAyLzA2LTE0OjU2OjI3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1RDM0OTI0QTZBNzgxMUU2OENEQkRFRTg1QzlBMDA3MyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo1RDM0OTI0QjZBNzgxMUU2OENEQkRFRTg1QzlBMDA3MyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjVEMzQ5MjQ4NkE3ODExRTY4Q0RCREVFODVDOUEwMDczIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjVEMzQ5MjQ5NkE3ODExRTY4Q0RCREVFODVDOUEwMDczIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8++wsKtAAAAD1JREFUKFONzjESADAERNGV+99ZRkaDJX6jeQNRVWw6Pr9l2K5nGynuThc8/RjwBMXnq4MBWQwWZGVIEQBcpL4HEQWC8t0AAAAASUVORK5CYII=",arrow3:"iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAADImlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4zLWMwMTEgNjYuMTQ1NjYxLCAyMDEyLzAyLzA2LTE0OjU2OjI3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1RDM0OTI0QTZBNzgxMUU2OENEQkRFRTg1QzlBMDA3MyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo1RDM0OTI0QjZBNzgxMUU2OENEQkRFRTg1QzlBMDA3MyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjVEMzQ5MjQ4NkE3ODExRTY4Q0RCREVFODVDOUEwMDczIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjVEMzQ5MjQ5NkE3ODExRTY4Q0RCREVFODVDOUEwMDczIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8++wsKtAAAAD9JREFUKFNj/P//PwMxgAlKYwMoJuBSiGENNoVY3YKuEKeD0RUyQmkMgM1qrIpxeQZDMS6FIICiGJ9CJMDAAABIzQcR1hjIewAAAABJRU5ErkJggg==",close:"iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5MDNERENEMTJENDcxMUU2OTQ4NEZEOTYxQUUzRjg5NCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo5MDNERENEMjJENDcxMUU2OTQ4NEZEOTYxQUUzRjg5NCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjkwM0REQ0NGMkQ0NzExRTY5NDg0RkQ5NjFBRTNGODk0IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjkwM0REQ0QwMkQ0NzExRTY5NDg0RkQ5NjFBRTNGODk0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+z5LgVQAAAFdJREFUeNqUkFEOwCAIQ+vL7n9ltiVmUUFk/RP6SGuzR5KaajK62Srm10t/nKAvBcNwB02RWZYr5PpdwcURcp+Bfookc9iJrGAEkRWMIA5mB1EwT9AtwAARmBgXyANHSQAAAABJRU5ErkJggg==",close_down:"iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5MDNERENEMTJENDcxMUU2OTQ4NEZEOTYxQUUzRjg5NCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo5MDNERENEMjJENDcxMUU2OTQ4NEZEOTYxQUUzRjg5NCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjkwM0REQ0NGMkQ0NzExRTY5NDg0RkQ5NjFBRTNGODk0IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjkwM0REQ0QwMkQ0NzExRTY5NDg0RkQ5NjFBRTNGODk0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+z5LgVQAAAFdJREFUeNqUkFEOwCAIQ+vL7n9ltiVmUUFk/RP6SGuzR5KaajK62Srm10t/nKAvBcNwB02RWZYr5PpdwcURcp+Bfookc9iJrGAEkRWMIA5mB1EwT9AtwAARmBgXyANHSQAAAABJRU5ErkJggg==","delete":"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpCQ0YwOTM0MjJENDkxMUU2OUE4OUQ4ODM4NjcwMThDNCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpCQ0YwOTM0MzJENDkxMUU2OUE4OUQ4ODM4NjcwMThDNCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkJDRjA5MzQwMkQ0OTExRTY5QTg5RDg4Mzg2NzAxOEM0IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkJDRjA5MzQxMkQ0OTExRTY5QTg5RDg4Mzg2NzAxOEM0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+fOK1igAAAExJREFUeNpi/P//PwMlgImBQkDIgP9QjBOwYNGAyyBkwIjLAEZSvcBChG0M+CxhIqCIEY1N/1gYNYDMdICcFv4TSh8shBIKzb0AEGAAUFoLJ2pGiu0AAAAASUVORK5CYII=",drag:"iVBORw0KGgoAAAANSUhEUgAAABkAAAAKCAYAAABBq/VWAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxMjEzMDhFMTJENEExMUU2QkMwNzhBMjQyMDhFOUZGMCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoxMjEzMDhFMjJENEExMUU2QkMwNzhBMjQyMDhFOUZGMCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjEyMTMwOERGMkQ0QTExRTZCQzA3OEEyNDIwOEU5RkYwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjEyMTMwOEUwMkQ0QTExRTZCQzA3OEEyNDIwOEU5RkYwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+gNLlqwAAACZJREFUeNpi/P//PwOtARMDHQALlC6moR29jKPBNRpcQzu4AAIMAEdbDwvBazwyAAAAAElFTkSuQmCC",edit:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpBOUQyN0YxOTJENDkxMUU2ODgxRkQ5RjkyMzYzMDkxOCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpBOUQyN0YxQTJENDkxMUU2ODgxRkQ5RjkyMzYzMDkxOCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkE5RDI3RjE3MkQ0OTExRTY4ODFGRDlGOTIzNjMwOTE4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkE5RDI3RjE4MkQ0OTExRTY4ODFGRDlGOTIzNjMwOTE4Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+AymtDQAAAHBJREFUeNpi/P//PwMlgImBQkCKAQexCbIQqfkdEAsBMci/jKS64A1UMwNU839SXPAZiHnRbGZE5uMzAJcmFG8wEaGZAZvN+AzAphmnOBMlmtENIFkzMdGIVzMhAwhqxhaN/9FCnYEUAxgHJDcCBBgAGLsY6vBpMLYAAAAASUVORK5CYII=",print_off:"iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NTE2OEY2MzgzRDA1MTFFNjlGN0JBMDJFMzZGRjFENUIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NTE2OEY2MzkzRDA1MTFFNjlGN0JBMDJFMzZGRjFENUIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1MTY4RjYzNjNEMDUxMUU2OUY3QkEwMkUzNkZGMUQ1QiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1MTY4RjYzNzNEMDUxMUU2OUY3QkEwMkUzNkZGMUQ1QiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Phv3r/EAAAAnSURBVHjaYvwPBAxkABYozUiivv9MDGSCUY2jGskDsLRKckIHCDAAdXAGG5Dno88AAAAASUVORK5CYII=",print_on:"iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NDVEOTBCOTEzRDA1MTFFNkJDNzdDQjg2RjEyMEY0NUIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NDVEOTBCOTIzRDA1MTFFNkJDNzdDQjg2RjEyMEY0NUIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0NUQ5MEI4RjNEMDUxMUU2QkM3N0NCODZGMTIwRjQ1QiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0NUQ5MEI5MDNEMDUxMUU2QkM3N0NCODZGMTIwRjQ1QiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pvcnq1YAAABNSURBVHjaYvwPBAxkABYozUiivv9MDGQCumj8T47G/4Rs/I9F0X9sAYiukRFN8X9coY7NqYyENOHzIyOh+MUXOIwDHo9Y0yrJCR0gwACJ3A4bCSIKTwAAAABJRU5ErkJggg==",save:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpDQzJEREM0MjJENDkxMUU2OEQ4QThBOUMxMjAyM0Q4OSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpDQzJEREM0MzJENDkxMUU2OEQ4QThBOUMxMjAyM0Q4OSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkNDMkREQzQwMkQ0OTExRTY4RDhBOEE5QzEyMDIzRDg5IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkNDMkREQzQxMkQ0OTExRTY4RDhBOEE5QzEyMDIzRDg5Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+MIq1tAAAAFhJREFUeNpi/P//PwMlgAVKk2oKI7oBKIIEwH8oBqtnwqMIF58RWYyJTK9j9QIhV+ANRJw2EAJMDBQCig1gIcPvjJSEwf/BFwY0MYCR2ABED0Sy8jVAgAEAUVwNK6WyzeIAAAAASUVORK5CYII=",cancel:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpEOTEwNjM4RTJENDkxMUU2OEMwNjlDMzQ0MjdENjA1NiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpEOTEwNjM4RjJENDkxMUU2OEMwNjlDMzQ0MjdENjA1NiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkQ5MTA2MzhDMkQ0OTExRTY4QzA2OUMzNDQyN0Q2MDU2IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkQ5MTA2MzhEMkQ0OTExRTY4QzA2OUMzNDQyN0Q2MDU2Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+P0zP3QAAAR1JREFUeNqc00FOwkAUgOFOYzgIiWjaRq/hCo0LXOgFWHIRYIErDkFkhVFPIajRxIQDEISQQIhJ+Z95Y8YyBWSSr03nzXvM0NcgTdMgI0Idr1ioF52LsuuNXHQUUEcVH+igr7EYlzhEGzXMfyJaqYAHTHGN0LMzo7ExnjTnt8AtvnDqScw60bUtWyDGN252SLauNCeWbTU4yRkiOZGeWe4m+DvcObkPcB9q8p2TbBekOcn2uSu5B1yKeA/Wh1vEeOKSUwydivuMpRT4RMkTtNs2OT8gPTGUAj1ceM5oNvwn8nyOR3klyR6vsaI5idtI43800khz1lp5ou1qNrTyyG3lbR/Ts84fo4yjvI/JJa3dxBuWmKGvc0l2/UqAAQD6cstJzzfPsAAAAABJRU5ErkJggg==",help_form:"iVBORw0KGgoAAAANSUhEUgAAAFoAAABaCAYAAAA4qEECAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NDA1QzE3RUQ0QTU3MTFFNjgzNjFBNDM1NjkxMDU4QzkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NDA1QzE3RUU0QTU3MTFFNjgzNjFBNDM1NjkxMDU4QzkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0MDVDMTdFQjRBNTcxMUU2ODM2MUE0MzU2OTEwNThDOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0MDVDMTdFQzRBNTcxMUU2ODM2MUE0MzU2OTEwNThDOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pkdk2GsAAAebSURBVHja7J1ZbFRVGMdPp9CKS6QgPvhAoFAJogilFFwjiMYIEkSKRiAmRJZWH/CpfSMRDbZRTAyx0KgJFhUhNia+GKkY2VSWuqKIUDD4AKJUZS+l4//j/u/k9nb2uTP33JnzJf9Ml1m+87tnzv3O+hWFw2FlLPs2QDN/iqGx0O3QOGgkNAK6CRoKlUI3QN3QWegfPp6BjlE/Ub9AV3QpWJHPNboImgA9Ak2HpjhAHoY6Ce9fwhSw5/ja66DBfP6NvCCjoNHQQD7/G2gb9Cn0HRQuNNACZBG0kD+fgrZCu6Dd0AHocprvXcJvxH3Qg9D9vBBHoI1QK3/OrQnoHGkAtADaCfVCJ6E1UDUUyuLnFkNT+Fkn+dm7oIX0KSflz8WHlEBLoMNQD7QFejSXhXRd7EfpQw99WkIfAwtaauli6Dh0CXoHqvABbiyJL2/Tt+P0NRQ00FXQfugK1AIN1wiwW+LbOvq6n75rD3og1AhdZls8UWPAbomvO+h7E8uiJeiR0B7oLFSX5RtcNpu7OpZhL8vkyXuHPApe5kAdjIsroTeh3gB24HrpeyV/72DZfA/vJA5/kSHTeqg0gLU4lkpZpjDLWORX0yHx6QaGSXV5BNitOpZxA8ucU9ASd7ZB56FZeQzZ1iyWtS3dmDvdmvwR9B/0QAFAtiVlPcOyF2cbtLRTrdA5aFoBQbY1jWVvTbXNTvWDXmZ7NbsAIduaTQarswW6htFFbQFDtlVLFjXJvibZYVIZjN8DfQAtNfMlV2099DRUzUmGjMejSwlZBuPv4aMxa9x7Fx8F9qV4T06mZ7iKg/MLDOQ+1k0m5dBLmfYMJxVAh8SL9ron0ahfvKYjxDm3i5wOMtPlsec9t0OD2IT0ptp0LIYmQs8byPEbBeg5TjIvTvVmOIiz0J9Ayw3LpGwd9Bhn4S8kW6MFbhlvhMaSs1VkVptsjS7hWorN0ArDLyV7HXqSa0y6E9Xop6Bh0BrDLS3Qw8gwYY2WzslRXhljqduHylrKVh2vRo+HJkMthlfa1kKG4+OBlmVavytrvZouNonjCvsYSjl1mv/TafxlG1uERbFAS+A9D9qkSdxcTrj7HDWlyKX5/F+9stbTzdAkrpZAooY+9uuC38mJyGoNurXS9T8NbU7hNfX0v14D/yfTlwnRxqMbuAjQ7/UY5YRcn+YF0gF2iCwboo11fAb9qayltH6aLN+VddHL0nx9PSUjjl0+luM9hnoPO9toWWk/VVlrk/20Gt78GjJ4j0Y++t1e7yTTYifoMcpaOf+VBqBbPKiJ7bxgftrXZDrWCVpGnnqgn310rIyg2z14ry6+n58mLC/b8bQNWqgfVAmmY3IQL4vtz5OOi7D8VVmbniKgyxlk+x03d3p0Ayvz+UZo21EOMEVAD+eInfK56fAK8gxNQB8j28g+w5uVtTPKT/OqyaghbB3Ga06RbQT0EOhvn51q9+BGWMYYulGTGn2abCNNxzXK2iwZdNtMwA2a+CNMS501+vo8gLyVN9QqjXwKM5aO1OggL4wp4wifPD6kSZPRz+wafSbAkLfyZx0hyzDpWTfowQGGXKWpj8L0ohv00ICBXk/YVRr7OISRRwS0/DIsQJCXslNSpWubTBOmJ503w067qxiQJuMVxsqdmvsqTI84Qcvgx8iAgK7hY2MAfBWmB92gx9jBteYmTcaWAPhZQqaH3KDleJzbAlCA8gA0GWLjyLRPjT7Em8pUA9ozm0qmfWq0nKb1pbL2qAThZtgVAD+F5Xay7bOAZht7VyHNCyC9rXbNfQyR5efOPzhBy9jpJGUsU6skyy+igZbJRFl394ThlLHNI8sD0UCHGTbNV841Y8bSadrmk2U4GmixVgbZ0zUuSFjpsZgxlk0jw43uRttpP0B7ldmGnIktI8Pv44EWWwvNVZy9NZaSDSe7tdHCELfJ+miZvX3BcEvZVpDdpmRAy7TWq/wK3GLYJW3CSrYNvqaiTA2aDZ3eWVobOuWJK6FnlWvTi7GodgdZrYwGOV6Nti/CHr7QbLqPHzfLOJEcHC67sVLedN/LZuMu03zENWFzN+9psU+vTGI/RhOPIaswZ3P002iyafLiTCWZKdjJr4g56qc/F7F7E3FJZki0m313uZu+YfhGTFhUKGsrd+LKl8LX5HFzHFu/49jmZuuAwdXmgMHsHzBoH5m50RyZeZVBUS4OgW0r4ENg23JxCGy0Y41nFgDkmX4ca+zMaWIf1J3PN8jlLOO7meSO8fLo+eY8PHq+WYej552aA3Ux00NFnvT49rJMc3TKWvGxsqbYpZspmR5qlf7rQ2J14MT3b/l7JcvmwUyn9wlvmpg0ZkfAEt5MCErCG3cKpw463RyAFE7N9LUjKCmc4iUle4ttny6AR9En8e2PoCYlc8fcS6EjrjR7xT7ALXal2eukb4FOsxct7pZkjbsZDp5gMsfJOUgcWc3POsFwbXeuE0f6mQr1GWWdkZ/NVKjTOQ0n29BkL8n70AblQypUnZP7/qasBedy5sVfyjoU4Lzqm9z3WmVt25Msy7IMSxap36pMct+EZqerllll2ZowQvVNVz2IgBWBX+AFkAtxjJJvw4/KpKsuTPtfgAEA9WJlCl1yxpAAAAAASUVORK5CYII="};var setCurrentIndexTextField=function(c){c=getShownPageNumberInfo(c);$("#guidPageIndex").html("<b>"+c+"</b>");$("#currentPageIndexTextField")&&$("#currentPageIndexTextField")[0]&&$("#currentPageIndexTextField").val(c)},getShownPageNumberInfo=function(g){var l=BookInfo.isDoublePage(),k=bookConfig.totalPagesCaption,h=bookConfig.pageNumberCaption;void 0==k&&(k="");void 0==h&&(h="");""!=h?1!=g&&g!=originTotalPageCount&&l?(h=2*Math.floor(g/2),g=getShownPageNumber(h),h=getShownPageNumber(h+1),g=rightToLeft?h+"-"+g:g+"-"+h):g=getShownPageNumber(g):1!=g&&g!=originTotalPageCount&&l&&(g=h=2*Math.floor(g/2),h+=1,g=rightToLeft?h+"-"+g:g+"-"+h);""==k?(k=originTotalPageCount,l||(k=originTotalPageCount)):isNaN(k)||(k=h=parseInt(k),l||(k=originTotalPageCount-originTotalPageCount+h));return rightToLeft?k+"/"+g:g+"/"+k},getShownPageArray=function(){var x=bookConfig.pageNumberCaption+"",w=originTotalPageCount;";"==x.substr(x.length-1,1)&&(x=x.substr(0,x.length-1));for(var x=x.split(";"),v=[],u=0;u<x.length;u++){if(""!=x[u]&&void 0!=x[u]){var t=x[u].split(":");if(t[0]){if(t[1]||(t[1]=""),-1<t[1].indexOf("+")){var s=t[0];s.indexOf("-");for(var s=s.split("-"),r=s[0],s=s[1],r=parseInt(r),q=s?parseInt(s):w,t=getPageNumberFormat(t[1]),p=r;p<=q;p++){var o=p-r+t.startPage,s="";0==t.type&&(s=o+"");1==t.type&&(s=parseRoman(o));2==t.type&&(s=parseRoman(o).toLowerCase());v[p]=String.format(t.page,s)}}else{if(!isNaN(t[0])){r=parseInt(t[0]),v[r]=void 0==t[1]?"":t[1]}else{if(-1<t[0].indexOf("-")){for(s=t[0],s.indexOf("-"),s=s.split("-"),r=s[0],s=s[1],r=parseInt(r),q=s?parseInt(s):w,p=r;p<=q;p++){v[p]=void 0==t[1]?"":t[1]}}}}}}}return v};function getPageNumberFormat(g){var l={page:"%s",startPage:1,type:0};if(-1<g.indexOf("{")){var k=g.indexOf("{"),h=g.indexOf("}")+1,k=g.substring(k,h);l.page=g.replace(k,"%s");-1<k.indexOf("N+")&&(l.type=0);-1<k.indexOf("R+")&&(l.type=1);-1<k.indexOf("r+")&&(l.type=2);g=k.subBetween("+","}")}else{g=g.replace("+","")}l.startPage=""==g?1:parseInt(g);return l}function parseRoman(k){if(isNaN(k)){return""}for(var p=[" I II III IV V VI VII VIII IX".split(" ")," X XX XXX XL L LX LXX LXXX XC".split(" ")," C CC CCC CD D DC DCC DCCC CM".split(" ")],o="",n=0,m=0,l=1000;3>m;m++,l/=10){n=Math.floor(k%l/(l/10)),o+=p[2-m][n]}return o}var getShownPageNumber=function(d){var f=bookConfig.pageNumberCaption;if(""==f||void 0==f){return d}d=parseInt(d);f=getShownPageArray();return void 0==f[d]?d:f[d]},getRealPageNumber=function(c){c=getRealPage(c);isNaN(c)&&(c=1);return c},getRealPage=function(h){var n=bookConfig.pageNumberCaption;if(""==n||void 0==n){return parseInt(h)}h+="";for(var n=getShownPageArray(),m=-1,l=n.length,k=1;k<=l;k++){if(n[k]+="",n[k]==h){m=k;break}}return -1==m?parseInt(h):m},setLocationHash=function(c){bookConfig.updatePageURL&&(window.location.hash="#p="+getShownPageNumber(c))};var nextPageFun=function(){switch(bookType){case BookType.normal_book:gotoPageFun(2*Math.floor(flipBook.getCurrentPageIndex()/2+1));break;case BookType.single_book:gotoPageFun(parseInt(singlePageBook.currentPageIndex)+1);break;case BookType.slide_book:gotoPageFun(2*Math.floor(slideBook.getRealPageIndex()/2+1));break;case BookType.singleSlide_book:gotoPageFun(parseInt(singleSlideBook.getRealPageIndex())+1);break;case BookType.catalog_book:gotoPageFun(2*Math.floor(catalogBook.getCurrentPageIndex()/2+1));break;case BookType.singleCatalog_book:gotoPageFun(parseInt(singleCatalogBook.currentIndex)+1)}},previousPageFun=function(){switch(bookType){case BookType.normal_book:gotoPageFun(2*Math.floor(flipBook.getCurrentPageIndex()/2-1)+1);break;case BookType.catalog_book:gotoPageFun(2*Math.floor(catalogBook.getCurrentPageIndex()/2-1)+1);break;case BookType.single_book:gotoPageFun(parseInt(singlePageBook.currentPageIndex)-1);break;case BookType.slide_book:gotoPageFun(2*Math.floor(slideBook.getRealPageIndex()/2-1)+1);break;case BookType.singleSlide_book:gotoPageFun(singleSlideBook.getRealPageIndex()-1);break;case BookType.singleCatalog_book:gotoPageFun(parseInt(singleCatalogBook.currentIndex)-1)}},firstPageFun=function(){gotoPageFun(1)},lastPageFun=function(){gotoPageFun(originTotalPageCount)},gotoPageFun=function(f,h){if(f){statisticalData(1,f);var g=f=parseInt(f);BookInfo.isDoublePage()&&(g=2*Math.floor(g/2)+1);if(passwardType()&&bookConfig.excludeFrontPages&&g>parseInt(bookConfig.excludeFrontPages)&&!verifyPassward()){passwardPannel.show()}else{switch(bookType){case BookType.normal_book:flipBook.gotoPage(f,h);break;case BookType.single_book:singlePageBook.gotoPage(f,h);break;case BookType.slide_book:slideBook.gotoPage(f,h);break;case BookType.singleSlide_book:singleSlideBook.gotoPage(f,h);break;case BookType.catalog_book:catalogBook.gotoPage(f,h);break;case BookType.singleCatalog_book:singleCatalogBook.gotoPage(f,h)}global.bookmark&&global.bookmark.elements.refreshElements()}}};var BookInfo=Class({statics:{getCurrentPages:function(){function g(c){1<=c&&c<=bookConfig.totalPageCount&&l.push(c)}var l=[];if(this.isDoublePage()){var k=this.getCurrentPageIndex(),k=2*Math.floor(k/2),h=k+1;rightToLeft?(g(h),g(k)):(g(k),g(h))}else{k=this.getCurrentPageIndex(),l.push(k)}return l},getPageCount:function(){return bookConfig.totalPageCount},isRightToLeft:function(){return rightToLeft},getBookType:function(){return bookType},getBook:function(){var c;switch(this.getBookType()){case BookType.normal_book:c=global.flipBook;break;case BookType.single_book:c=global.singlePageBook;break;case BookType.slide_book:c=global.slideBook;break;case BookType.singleSlide_book:c=global.singleSlideBook;break;case BookType.catalog_book:c=global.catalogBook;break;case BookType.singleCatalog_book:c=global.singleCatalogBook}return c},getCurrentPageIndex:function(){var c=this.getBook();return c&&c.getCurrentPageIndex?c.getCurrentPageIndex():-1},isDoublePage:function(){switch(this.getBookType()){case BookType.single_book:return !1;case BookType.singleSlide_book:return !1;case BookType.singleCatalog_book:return !1}return !0},left:function(){var c=this.getBook();return c&&c.getLeft?c.getLeft():0},top:function(){var c=this.getBook();return c&&c.getTop?c.getTop():0},width:function(){var c=this.getBook();return c&&c.getWidth?c.getWidth():0},height:function(){var c=this.getBook();return c&&c.getHeight?c.getHeight():0},scale:function(){var c=this.getBook();return c&&c.getScale?c.getScale():0},isZoomming:function(){return this.getBook().showPage.parameters.zoomming},zoomStatus:function(){return this.getBook()&&this.getBook().status_zoom?!0:!1},container:function(){return bookContainer}}});var FormElements=Class({rightToLeft:!1,create:function(c){this.rightToLeft=global.rightToLeft},initElements:virtual_function,initEvent:virtual_function,pickElements:virtual_function,changeLanguage:virtual_function}),FormInfo=Class({statics:{getFormCssClassName:function(c){if(!c){return""}c=c.toLowerCase();return c+"_form"},getFormTitle:function(c){if(!c){return""}c=c.toLowerCase();switch(c){case"about":return getLanguage("btnAbout","About");case"bookmark":return getLanguage("frmBookMark","Bookmark");case"help":return getLanguage("btnHelp","Help");case"language":return getLanguage("btnLanguage","Language change");case"print":return getLanguage("frmPrintCaption","Print");case"search":return getLanguage("frmSearch","Search");case"setting":return getLanguage("btnSettings","Settings");case"share":return getLanguage("frmShareCaption","Share");case"tableofcontent":return getLanguage("frmToc","Table of Contents");case"videogallery":return getLanguage("frmVideoTitle","Video")}}}}),FormFrame=Class({parent:void 0,rightToLeft:!1,visible:!1,formType:"",mainColor:"",fontColor:"",mainColorObj:null,fontColorObj:null,closeUrl:"",create:function(c){this.options=c;this.parent=this.options.parent;this.formType=this.options.formType;this.rightToLeft=this.options.rightToLeft;this.mainColor=bookConfig.formBackgroundColor?bookConfig.formBackgroundColor:bookConfig.toolbarColor;this.fontColor=bookConfig.formFontColor?bookConfig.formFontColor:bookConfig.iconColor;this.mainColorObj=Color(this.mainColor);this.fontColorObj=Color(this.fontColor)},onCreate:function(){},setStyle:function(c){this.stage.css(c)},showOrHide:function(){this.visible?this.hide():this.show()},show:function(){this.visible=!0;this.stage.show();this.onShow()},hide:function(){this.visible=!1;this.stage.hide();this.onHide()},onResize:function(){},destroy:function(){},changeLanguage:function(){this.elements&&this.elements.changeLanguage()}}),PhoneFormFrame=Class({create:function(c){this._super(c);this.closeUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RjhBN0ZCRjFCQjgwMTFFNjhCMjQ5NjVERDlGODU5NkUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RjhBN0ZCRjJCQjgwMTFFNjhCMjQ5NjVERDlGODU5NkUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpGOEE3RkJFRkJCODAxMUU2OEIyNDk2NUREOUY4NTk2RSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpGOEE3RkJGMEJCODAxMUU2OEIyNDk2NUREOUY4NTk2RSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Prtn4R8AAABdSURBVHjaYvz//z8DLQETA43BqAWjFtDHgv9QTKocyT74T4BPtgWMWAz9j0OebB8w4nA5IzUjmZEAf/DGAb5g+U+tZIpuONGW0DwOWMgwmIFWqWi0sBu1ADsACDAA1jMSLYufr4AAAAAASUVORK5CYII=";this.stage=$("<div class='"+FormInfo.getFormCssClassName(this.formType)+" phone'></div>");this.title=$("<p class='form_title'>"+FormInfo.getFormTitle(this.formType)+"</p>");this.close=$("<img class='close' src='"+this.closeUrl+"'/>");this.rightToLeft&&this.stage.addClass("rightToLeft");this.close.bind("click",this.hide.bind(this));this.initHtml();this.initEvent();this.onCreate()},onCreate:function(){this.stage.insertBefore(this.parent);this.stage.css({position:"absolute",left:-this.width+"px",top:0,width:this.width+"px",height:this.height+"px","background-color":colorDiv(this.mainColor,20),color:this.fontColor,overflow:"hidden"})},show:function(){this.visible||(this.visible=!0,this.animate(this.width),this.mask||(this.mask=$("<div class='form_mask_phone'></div>"),this.mask.click(this.hide.bind(this)),this.parent.append(this.mask)),this.mask&&this.mask.show(),BookInfo.getBook().addSearchHighlight())},hide:function(){this.visible&&(this.visible=!1,this.animate(0),this.mask&&this.mask.hide(),BookInfo.getBook().clearSearchHighlight())},animate:function(c){this.animating=!0;c=transformCSS({tran:{x:c,y:0}});animateOnce(this.stage,c,0.2,function(){this.animating=!1}.bind(this));animateOnce(this.parent,c,0.2,function(){this.animating=!1}.bind(this))},onResize:function(){this.width=Math.min(windowWidth-65,340);this.height=windowHeight;this.stage.css({left:-this.width+"px",width:this.width+"px",height:this.height+"px"});var c=this.visible?transformCSS({tran:{x:this.width,y:0}}):transformCSS({tran:{x:0,y:0}});this.stage.css(c);this.parent.css(c)},showOrHide:function(){!0===this.visible?this.hide():this.show(this.width)}}).extend(FormFrame),FadeOutFadeForm=Class({create:function(c){this._super(c);this.closeUrl=form_icons.close?"data:image/png;base64,"+form_icons.close:uiBaseURL+"close.png";this.stage=$("<div class='"+FormInfo.getFormCssClassName(this.formType)+"'></div>");this.title=$("<p class='form_title'>"+FormInfo.getFormTitle(this.formType)+"</p>");this.close=$("<img class='close' src='"+this.closeUrl+"'/>");this.rightToLeft&&this.stage.addClass("rightToLeft");this.initHtml();this.initEvent();this.onCreate()},onCreate:function(){this.stage.appearance("",function(){this.visible=!1}.bind(this));this.parent.append(this.stage.getDom());this.title&&this.title.css({cursor:"default"});this.hide()},initEvent:function(){this.stage.drag();this.stage.bind(_event._down,function(c){c.stopPropagation()});this.close.bind("click",this.hide.bind(this))},initHtml:virtual_function,onHide:function(){}}).extend(FormFrame),SlideForm=Class({create:function(c){this._super(c);this.closeUrl=form_icons.close?"data:image/png;base64,"+form_icons.close:uiBaseURL+"close.png";this.stage=$("<div class='"+FormInfo.getFormCssClassName(this.formType)+"'></div>");this.title=$("<p class='form_title'>"+FormInfo.getFormTitle(this.formType)+"</p>");this.close=$("<img class='close' src='"+this.closeUrl+"'/>");this.rightToLeft&&this.stage.addClass("rightToLeft");this.initHtml();this.initEvent();this.onCreate()},onCreate:function(){this.parent.append(this.stage);this.title&&this.title.css({cursor:"default"});this.hide()},initEvent:function(){this.stage.drag();this.stage.bind(_event._down,function(c){c.stopPropagation()});this.close.bind("click",this.hide.bind(this))},show:function(){this.visible=!0;this.stage.animate({left:10},400,function(){this.onShow()}.bind(this))},hide:function(){this.visible=!1;this.stage.animate({left:2*-this.width},400,function(){this.onHide()}.bind(this))},onHide:function(){}}).extend(FormFrame),LoadingBook=Class({create:function(d,f){this.parent=d;this.backgroundColor||(this.backgroundColor="#1F2232")},chooseBookStyle:function(){var c=this.getBookTye();"normal_book"==c?this.init():this.initBookStyle(c)},initBookStyle:function(c){switch(c){case"slide_book":bookType=windowWidth>windowHeight&&bookConfig.showDoublePage?BookType.slide_book:BookType.singleSlide_book;init();if(isPhone()||isPad()){toolBar.hide(),global.QRbutton&&QRbutton.hide()}break;case"flip_book":bookType=windowWidth>windowHeight&&bookConfig.showDoublePage?BookType.normal_book:BookType.single_book;init();bookConfig.flipshortcutbutton&&leftRightButton.show();break;case"catalog_book":bookType=BookType.catalog_book,init()}},getBookTye:function(){var c="normal_book";if("slide"==bookConfig.FlipStyle.toLowerCase()||isBelowIE9()){c="slide_book"}"flip"!=bookConfig.FlipStyle.toLowerCase()||isBelowIE9()||(c="flip_book");""!=bookConfig.FlipStyle||isBelowIE9()||(c="flip_book");"catalog"!=bookConfig.FlipStyle.toLowerCase()||isBelowIE9()||(c="catalog_book");return c},init:function(){this.container=$("<div class='book_style_choose_container'></div>");this.bookStyleBox=$("<div class='book_style_box'></div>");this.container.css({"background-color":this.backgroundColor});this.parent.append(this.container);this.container.append(this.bookStyleBox);this.initBookStyleBox()},initBookStyleBox:function(){this.title=$("<p class='title'></p>");this.description=$("<p class='description'></p>");this.flipModel=$("<div class='flipModel'></div>");this.slideModel=$("<div class='slideModel'></div>");this.flipModel.append($("<img src='"+uiBaseURL+"pc.png'/>").asImageButton());this.slideModel.append($("<img src='"+uiBaseURL+"pad.png'/>").asImageButton());this.bookStyleBox.append(this.title);this.bookStyleBox.append(this.description);this.bookStyleBox.append(this.flipModel);this.bookStyleBox.append(this.slideModel);this.title.html(window.document.title);this.description.html(getLanguage("lblSelectMode","Select View Mode Please.")+"(10)");this.initEvent()},initEvent:function(){this.flipModel.bind(_event._end,function(){window.clearInterval(this.inteval);this.destroy();this.initBookStyle("flip_book")}.bind(this));this.slideModel.bind(_event._end,function(){window.clearInterval(this.inteval);this.destroy();this.initBookStyle("slide_book")}.bind(this));this.initInterval()},initInterval:function(){var d=10,f=getLanguage("lblSelectMode","Select View Mode Please.");this.inteval=window.setInterval(function(){this.description.html(f+"("+d+")");d--;0>=d&&(window.clearInterval(this.inteval),this.destroy(),this.initBookStyle("flip_book"))}.bind(this),1000)},onResize:function(){},destroy:function(){this.container&&(this.container.hide(),this.container.remove(),this.slideModel=this.flipModel=this.bookStyleBox=this.container=void 0)}});function loadXMLString(k){var p=null;if(!window.DOMParser&&window.ActiveXObject){for(var o=["MSXML.2.DOMDocument.6.0","MSXML.2.DOMDocument.3.0","Microsoft.XMLDOM"],n=0;n<o.length;n++){try{p=new ActiveXObject(o[n]);p.async=!1;p.loadXMLString(k);break}catch(m){}}}else{if(window.DOMParser&&document.implementation&&document.implementation.createDocument){try{domParser=new DOMParser,p=domParser.parseFromString(k,"text/xml")}catch(l){}}else{return null}}return p}function loadXMLFile(k){var p=null;if(!window.DOMParser&&window.ActiveXObject){for(var o=["MSXML.2.DOMDocument.6.0","MSXML.2.DOMDocument.3.0","Microsoft.XMLDOM"],n=0;n<o.length;n++){try{p=new ActiveXObject(o[n]);break}catch(m){}}}else{if(document.implementation&&document.implementation.createDocument){try{p=document.implementation.createDocument("","",null)}catch(l){}}else{return null}}null!=p&&(p.async=!1,p.load(k));return p}var PictureListFrame=Class({create:function(){this.currentPageIndex=1;this.imageWidth=100;this.leftButtonUrl=form_icons.print_left?"data:image/png;base64,"+form_icons.print_left:uiBaseURL+"print_left.png";this.rightButtonUrl=form_icons.print_right?"data:image/png;base64,"+form_icons.print_right:uiBaseURL+"print_right.png";this.initDefaultDom();this.initHtml();this.initEvent();this.fillContent(this.currentPageIndex)},initDefaultDom:function(){this.thumbnail=$("<div class='thumbnail'></div>");this.page=$("<div class='page'></div>");this.image=$("<img/>");this.leftBtn=$("<img class='leftBtn btn' src='"+this.leftButtonUrl+"'/>");this.rightBtn=$("<img class='rightBtn btn' src='"+this.rightButtonUrl+"'/>");this.thumbnail.append(this.image);this.thumbnail.append(this.page)},initEvent:function(){this.leftBtn.onTap(function(){this.fillContent(this.currentPageIndex-1)}.bind(this));this.rightBtn.onTap(function(){this.fillContent(this.currentPageIndex+1)}.bind(this))},fillContent:function(d){if(!(1>d||d>bookConfig.totalPageCount)){this.currentPageIndex=d;var f=function(c){this.image.attr("src",c);this.image.css({width:this.imageWidth+"px"})}.bind(this);this.analysis=new AnalysisThumbnail(d,f);this.fillPage(d)}},fillPage:function(c){this.page.html(c+"/"+bookConfig.totalPageCount)}}),PictureListForm=Class({initHtml:function(){this.stage=$("<div class='pictureList_win10'></div>");this.stage.append(this.thumbnail);this.stage.append(this.leftBtn);this.stage.append(this.rightBtn)},getDom:function(){return this.stage}}).extend(PictureListFrame),AnalysisPrint=Class({create:function(c){this.printArea=$("<div></div>");this.button=c;this.initPrintEvent()},getImageSizeForMM:function(d,f){return d/210>=f/297?{width:210,height:Math.floor(210*f/d)}:{width:Math.floor(297*d/f),height:297}},getImageSizeForInches:function(d,f){return d/8.26>=f/11.69?{width:8.26,height:Number.fixed(8.26*f/d,2)}:{width:Number.fixed(11.69*d/f,2),height:11.69}},getImageSizeForIE:function(d,f){return d/8>=f/11.3?{width:8,height:Number.fixed(8*f/d,2)}:{width:Number.fixed(11.3*d/f,2),height:11.3}},printPages:function(l){var r=0;this.printArea.empty();for(var q=0;q<l.length;q++){var p=l[q],o=$("<div style='position:relative'></div>");0<q&&o.css({"page-break-before":"always"});var n=getPageDir(p,"normal",originTotalPageCount),p=$("<img style='width:100%;height:100%' />");o.append(p);this.printArea.append(o);var m=this;p.on("load",function(){r++;var b=isIE()?m.getImageSizeForIE(this.naturalWidth,this.naturalHeight):m.getImageSizeForInches(this.naturalWidth,this.naturalHeight);$(this).parent().css({width:b.width+"in",height:b.height+"in"});r==l.length&&m.printArea.printArea()});p.attr("src",n);parseBool(bookConfig.PrintButtonVisible)&&""!=bookConfig.printWatermarkFile&&(o=$("<img src = '"+bookConfig.printWatermarkFile+"'/>"),o.css({"z-index":"201",left:"10",top:"10",position:"absolute"}),p.append(o))}},getPages:function(d){if("all"==d){d=[];for(var f=1;f<=bookConfig.totalPageCount;f++){d.push(f)}return d}return"current"==d?BookInfo.getCurrentPages():getPagesByRange(d)},initPrintEvent:function(){this.button.onTap(function(c){this.printType=this.button.printType;switch(this.printType){case"printAll":c=this.getPages("all");this.printPages(c);break;case"printCurrent":c=this.getPages("current");this.printPages(c);break;case"printRange":c=$("#print_range_num").val(),c=this.getPages(c),this.printPages(c)}}.bind(this))}}),PrintElements=Class({create:function(c){this._super(c);this.printOnUrl=form_icons.print_on?"data:image/png;base64,"+form_icons.print_on:uiBaseURL+"print_on.png";this.printOffUrl=form_icons.print_off?"data:image/png;base64,"+form_icons.print_off:uiBaseURL+"print_off.png";this.initElements();this.initEvent(c);this.pickElements(c)},initElements:function(){this.printAll=$("<div class='printAll item' print='printAll'><img src='"+this.printOffUrl+"'/><span class='title'>"+getLanguage("frmPrintall","Print All Pages")+"</span></div>");this.printCurrent=$("<div class='printCurrent item on' print='printCurrent'><img src='"+this.printOnUrl+"'/><span class='title'>"+getLanguage("frmPrintcurrent","Print Current Pages")+"</span></div>");this.printRange=this.rightToLeft?$("<div class='printRange item' print='printRange'><img src='"+this.printOffUrl+"'/><input id='print_range_num' dir='rtl' placeholder='"+getLanguage("frmPrintexample","Exzample:1,3-7,12")+"'></input><span class='title'>"+getLanguage("frmPrintRange","Print Range")+"</span></div>"):$("<div class='printRange item' print='printRange'><img src='"+this.printOffUrl+"'/><span class='title'>"+getLanguage("frmPrintRange","Print Range")+"</span><input id='print_range_num' placeholder='"+getLanguage("frmPrintexample","Example:1,3-7,12")+"'></input></div>");this.printButton=$("<div class='printButton title button_hover'>"+getLanguage("frmPrintbtn","Print")+"</div>");this.printButton.printType="printCurrent";this.analysis=new AnalysisPrint(this.printButton);this.pictureListForm=new PictureListForm},pickElements:function(c){c.printOnUrl=this.printOnUrl;c.printOffUrl=this.printOffUrl;c.printAll=this.printAll;c.printCurrent=this.printCurrent;c.printRange=this.printRange;c.printButton=this.printButton;c.pictureListForm=this.pictureListForm},initEvent:function(c){this.printAll.click(function(b){this.buttonEvent(c,b.delegateTarget)}.bind(this));this.printCurrent.click(function(b){this.buttonEvent(c,b.delegateTarget)}.bind(this));this.printRange.click(function(b){this.buttonEvent(c,b.delegateTarget)}.bind(this));this.printRange.find("input").on("input propertychange change",function(){this.refreshPrintButton()}.bind(this));this.printRange.find("input").bind("mousedown touchstart pointerdown mouseover mousemove",function(d){d.stopPropagation()})},buttonEvent:function(f,h){var g=f.stage.find(".on");g.find("img").attr("src",this.printOffUrl);g.find("img")[0].colorChanged=!1;g.removeClass("on");$(h).find("img").attr("src",this.printOnUrl);$(h).find("img")[0].colorChanged=!1;$(h).addClass("on");g=$(h).attr("print");f.printButton.printType=g;this.refreshPrintButton();f.changeItemColor()},refreshPrintButton:function(){"printRange"!=this.printButton.printType||$("#print_range_num").val()?this.lightPrintButton():this.darkPrintButton()},lightPrintButton:function(){$(this.printButton).addClass("usable");$(this.printButton).removeClass("disable");$(this.printButton).addClass("button_hover")},darkPrintButton:function(){"printRange"==this.printButton.printType&&($(this.printButton).removeClass("usable"),$(this.printButton).removeClass("button_hover"),$(this.printButton).addClass("disable"))},changeLanguage:function(){}}).extend(FormElements),PhonePrintElements=Class({create:function(c){this._super(c);this.printOnUrl=form_icons.print_on_phone?"data:image/png;base64,"+form_icons.print_on_phone:phoneBaseURL+"print_on_phone.png";this.printOffUrl=form_icons.print_off_phone?"data:image/png;base64,"+form_icons.print_off_phone:phoneBaseURL+"print_off_phone.png";this.initElements();this.initEvent(c);this.pickElements(c)}}).extend(PrintElements),PhonePrintForm=Class({create:function(c){this.elements=new PhonePrintElements(this);this._super(c)},onCreate:function(){this.printAll.css({"background-color":this.fontColor,color:this.mainColor});this.printCurrent.css({"background-color":this.fontColor,color:this.mainColor});this.printRange.css({"background-color":this.fontColor,color:this.mainColor});this.printButton.css({"background-color":this.fontColor,color:this.mainColor});this.close.changeButtonColor(this.fontColor);this._super()},initHtml:function(){this.title.append(this.close);this.stage.append(this.title);this.stage.append(this.printAll);this.stage.append(this.printCurrent);this.stage.append(this.printRange);this.stage.append(this.printButton)},changeItemColor:function(){},onShow:function(){this.close.changeButtonColor(this.fontColor)},initEvent:function(){},changeLanguage:function(){this.printAll.find(".title").html(getLanguage("frmPrintall","Print All Pages"));this.printCurrent.find(".title").html(getLanguage("frmPrintcurrent","Print Current Pages"));this.printRange.find(".title").html(getLanguage("frmPrintRange","Print Range"));this.printRange.find("#print_range_num").attr("placeholder",getLanguage("frmPrintexample","Exzample:1,3-7,12"));this.printButton.html(getLanguage("frmPrintbtn","Print"))}}).extend(PhoneFormFrame);global.textForPages||(global.textForPages=[]);global.positionForPages||(global.positionForPages=[]);var highlightSearchFun=function(C,B){if(0!=positionForPages.length&&C){var A=!1;window.frmSearch&&frmSearch.visible&&0!=frmSearch.getList().length||(A=!0);window.foldingMenu&&foldingMenu.visible&&foldingMenu.currentItem&&foldingMenu.currentItem.id&&"miSearch"==foldingMenu.currentItem.id&&(A=!1);var z=search_Text;""==z&&(A=!0);if(!0==A){clearHighlightFun(C)}else{for(var y,A=0;A<positionForPages.length;A++){if(positionForPages[A]&&positionForPages[A].page&&positionForPages[A].page==B){y=positionForPages[A].positions;break}}if(void 0==y){clearHighlightFun(C)}else{var x="url("+uiBaseURL+"highlight.png)",w="",v="",u="",s="";if(0<y.length){for(A=0;A<y.length;A++){var r=y[A];if(r&&r.word&&-1<r.word.toLowerCase().indexOf(z)){var o=r.left/(1-r.width),D=r.top/(1-r.height),w=w+x+",",s=s+"no-repeat,",v=v+100*o+"% "+100*D+"%,",u=u+100*r.width+"% "+100*r.height+"%,"}}0<w.length?(w=w.substr(0,w.length-1),s=s.substr(0,s.length-1),v=v.substr(0,v.length-1),u=u.substr(0,u.length-1),C.css({"background-image":w,"background-repeat":s,"background-position":v,"-webkit-background-size":u,"-o-background-size":u,"background-size":u,display:"block"})):clearHighlightFun(C)}else{clearHighlightFun(C)}}}}},clearHighlightFun=function(c){c.css({"background-image":""});c.css({display:"none"})},search_Text="",SearchElements=Class({create:function(c){this._super(c);this.callBack=c;this.initElements();this.initEvent(c);this.pickElements(c)},initElements:function(){this.searchButtonUrl=form_icons.search_form?"data:image/png;base64,"+form_icons.search_form:uiBaseURL+"search_form.png";this.searchList=[];this.searchText="";this.input=$("<input class='input_search'></input>");this.searchButton=$("<img class='searchButton' src='"+this.searchButtonUrl+"'/>");this.searchResult=$("<p class='result'></p>");if(isPhone()||isPad()){this.searchButton=$("<div class='searchButton'></div>"),this.searchButton.addCssSprite(phoneIconsURL[0],"searchButton",15,15,phoneIconInfo)}this.initSwiper()},initSwiper:function(){this.searchSwiper=$("<div class='stage'></div>");this.searchSwiperList=$("<div class='swiper'></div>");this.searchSwiper.append(this.searchSwiperList);isPhone()||isPad()?this.searchSwiper.css({"overflow-y":"auto","overflow-x":"hidden","-webkit-overflow-scrolling":"touch"}):(this.progress=$("<div class='progress'></div>"),this.progressBar=$("<div class='progressBar'></div>"),this.searchSwiper.append(this.progress),this.progress.append(this.progressBar),this.searchSwiper.scroll({},Direction.top))},refreshSwiper:function(g,l){for(var k=l.length,h=0;h<k;h++){this.addItem(g,l[h])}},addItem:function(f,h){h.searchText=this.searchText;var g=new this.callBack.newSearchItem(f,h);this.searchList.push(g)},ewSearchItem:function(d,f){return new SearchItem(d,f)},initEvent:function(){this.searchButton.onTap(function(){this.searchStart()}.bind(this));this.input.bind("keydown",function(c){13==c.keyCode&&this.searchStart();c.stopPropagation()}.bind(this));this.input.bind("mousedown touchstart pointerdown mouseover mousemove",function(c){c.stopPropagation()})},refresh:function(){isPhone()||isPad()||this.searchSwiper.refreshData()},search:function(c){c&&"string"==typeof c&&(this.input.val(c),this.searchStart())},searchStart:function(){statisticalData(6,BookInfo.getBook().getCurrentPageIndex());var c=this.input.val().toLowerCase();0==c.length?this.searchResult.html(getLanguage("frmSearchPrompt","Enter key to search.")):0<bookConfig.leastSearchChar&&c.length<bookConfig.leastSearchChar?this.searchResult.html(getLanguage("pnlSearchInputInvalid","The search text is too short.")):this.searchText!=c&&(search_Text=this.searchText=c,this.searchSwiper.loading(),this.analysisData=new AnalysisSearch(c,this.doSearch.bind(this)))},doSearch:function(c){this.searchSwiper.hideLoading();this.searchList=c;this.searchSwiperList.empty();rightToLeft?this.searchResult.html("<span style='color:"+bookConfig.searchKeywordFontColor+";'>"+this.searchList.length+"</span> "+getLanguage("lblPages","Found Pages")):this.searchResult.html(getLanguage("lblPages","Found Pages")+" <span style='color:"+bookConfig.searchKeywordFontColor+";'>"+this.searchList.length+"</span>");this.refreshSwiper(this.searchSwiperList,this.searchList);this.refresh();BookInfo.getBook().addSearchHighlight()},getSearchText:function(){return this.searchText},getList:function(){return this.searchList},clear:function(){search_Text=this.searchText="";this.input.val("");this.searchList=[];BookInfo.getBook().clearSearchHighlight();this.searchSwiperList.empty();this.searchResult.html(getLanguage("frmSearchPrompt","Enter key to search."));this.refresh()},pickElements:function(c){c.searchButtonUrl=this.searchButtonUrl;c.searchList=this.searchList;c.searchText=this.searchText;c.input=this.input;c.searchButton=this.searchButton;c.searchResult=this.searchResult;c.searchSwiper=this.searchSwiper;c.searchSwiperList=this.searchSwiperList;c.progress=this.progress;c.progressBar=this.progressBar;c.search=this.search.bind(this)},changeLanguage:function(){}}).extend(FormElements),loadSearchFlag=!1,AnalysisSearch=Class({create:function(d,f){this.callback=f;this.results=[];this.search(d)},search:function(h){if(!1==loadSearchFlag){if(isTouchDevice()){loadJavascript(bookConfig.searchTextJS,function(){loadSearchFlag=!0;this.doSsearch(h)}.bind(this),function(){loadSearchFlag=!0;this.doSsearch(h)}.bind(this))}else{var n=!1,m=!1,l=function(){n&&m&&(loadSearchFlag=!0,this.doSsearch(h))}.bind(this);loadJavascript(bookConfig.searchTextJS,function(){n=!0;l()},function(){n=!0;l()});var k=String.format(bookConfig.searchPositionJS,BookInfo.getCurrentPageIndex());loadJavascript(k,function(){m=!0;l()},function(){m=!0;l()})}}else{this.doSsearch(h)}},doSsearch:function(c){this.results=searchFromPages(textForPages,c);this.callback(this.results)},getList:function(){return this.results},clear:function(){this.results=[]}}),SearchItem=Class({create:function(d,f){this.fontColor=f.fontColor;this.parent=d;this.parm=f;this.sDescription=this.handleData(f.search_text,f.searchText);this.index=f.search_page;this.sPage=getShownPageNumber(f.search_page);this.sPageTitle=getLanguage("lblPage","Page");this.initHtml();this.initEvent()},initHtml:function(){this.initElement();this.item.append(this.page);this.item.append(this.description);this.parent.append(this.item)},initElement:function(){this.item=$("<div class='item'></div>");rightToLeft?(this.page=$("<div class='page'>"+this.sPage+":"+this.sPageTitle+"</div>"),LanguageTool.isRightToLeft(this.parm.search_text)?this.description=$("<div class='description rtl'>"+this.sDescription+"</div>"):this.description=$("<div class='description'>"+this.sDescription+"</div>")):(this.page=$("<div class='page'>"+this.sPageTitle+":"+this.sPage+"</div>"),this.description=$("<div class='description'>"+this.sDescription+"</div>"))},handleData:function(f,h){var g;g=HTMLString.toLabel(f);g=handleData(g,h);return g=HTMLString.riseAWord(g,h,bookConfig.searchKeywordFontColor)},initEvent:function(){this.item.bind("mouseover",function(){this.item.css({"background-color":Color(this.fontColor).rgba(0.25)})}.bind(this));this.item.bind("mouseleave",function(){this.item.css({"background-color":"transparent"})}.bind(this));this.item.onTap(function(){gotoPageFun(this.index)}.bind(this))}}),PhoneSearchItem=Class({}).extend(SearchItem),PhoneSearchForm=Class({create:function(c){this.elements=new SearchElements(this);this._super(c)},onCreate:function(){this.stage.css({color:this.fontColor,"background-color":this.mainColor});this.input.css({color:"#000000",opacity:1});var c=new Color(this.mainColor),c=String.format("%s %s %s %s",c.reduce(40),c.reduce(40),c.add(40),c.add(40));this.input.css({"border-color":c});this.close.changeButtonColor(this.fontColor);this._super()},initHtml:function(){this.title.append(this.close);this.stage.append(this.title);this.stage.append(this.input);this.stage.append(this.searchButton);this.stage.append(this.searchResult);this.stage.append(this.searchSwiper)},newSearchItem:function(d,f){return new PhoneSearchItem(d,f)},getList:function(){return this.elements.getList()},onShow:function(){this.close.changeButtonColor(this.fontColor)},onResize:function(){this._super();this.searchSwiper.css("height",this.height-125+"px");this.input.css("width",this.width-60+"px");this.elements.refresh()},initEvent:function(){},changeLanguage:function(){}}).extend(PhoneFormFrame),LanguageElements=Class({create:function(c){this._super(c);this.initElements();this.initEvent(c);this.pickElements(c)},initElements:function(){this.choosedUrl=uiBaseURL+"choosed.png";this.itemArray=[];this.scrollBox=$("<div class='scrollBox'></div>");for(var c=0;c<language.length;c++){language[c]&&language[c].language&&this.addItem(language[c].language)}},addItem:function(f){if(f){var h=f;if(isPhone()||isPad()){h="&nbsp;&nbsp;&nbsp;"+f}var g=$("<div class='item'><div class='title'>"+h+"<div/><img src='"+this.choosedUrl+"'/></div>");f.toLowerCase()===bookConfig.language.toLowerCase()&&(g.addClass("focus"),this.currentItem=g);g.bind(_event._end,function(){this.refreshLanguage(f);this.currentItem=g;this.scrollBox.find(".focus").removeClass("focus");g.addClass("focus")}.bind(this));this.scrollBox.append(g);this.itemArray.push(g)}},refreshLanguage:function(c){bookConfig.language=c;selectLanguage(bookConfig.language);toolBar.changeLanguage&&toolBar.changeLanguage()},initEvent:function(c){},pickElements:function(c){c.choosedUrl=this.choosedUrl;c.itemArray=this.itemArray;c.scrollBox=this.scrollBox},changeLanguage:function(){}}).extend(FormElements);Class("PcLanguageForm",{create:function(c){this.elements=new LanguageElements(this);this._super(c)},onCreate:function(){this.close.changeButtonColor(this.color);this._super()},initEvent:function(){this._super();this.stage.bind(_event._end,function(){this.hide()}.bind(this));for(var c=0;c<this.itemArray.length;c++){this.itemArray[c].bind(_event._end,function(){this.hide()}.bind(this))}},initHtml:function(){this.title.append(this.close);this.stage.append(this.title);this.stage.append(this.scrollBox)},onResize:function(){},onShow:function(){}}).extend(FadeOutFadeForm);var PhoneLanguageForm=Class({create:function(c){this.elements=new LanguageElements(this);this._super(c)},onCreate:function(){this._super();this.close.changeButtonColor(this.fontColor)},initEvent:function(){},initHtml:function(){this.title.append(this.close);this.stage.append(this.title);this.stage.append(this.scrollBox)},onResize:function(){this._super();this.scrollBox.css("height",this.height-36+"px")},onShow:function(){}}).extend(PhoneFormFrame),SettingElements=Class({create:function(c){this._super(c);this.initElements();this.initEvent(c);this.pickElements(c)},initElements:function(){this.choosedUrl=uiBaseURL+"choosed.png";this.unChoosedUrl=uiBaseURL+"unchoosed.png";this.scrollBox=$("<div class='scrollBox'></div>");var f=this.choosedUrl,h="&nbsp;&nbsp;&nbsp;"+getLanguage("closeFlipSound","Close Flip Sound"),g="&nbsp;&nbsp;&nbsp;"+getLanguage("closeBackgroundSound","Close Background Sound");this.flipSoundBtn=$("<div class='item'><div class='title'>"+h+"<div/><img src='"+f+"'/></div>");this.backgroundSoundBtn=$("<div class='item' id='btnSound'><div class='title'>"+g+"<div/><img src='"+f+"'/></div>");bookConfig.FlipSound&&this.scrollBox.append(this.flipSoundBtn);bookConfig.BackgroundSoundButtonVisible&&this.scrollBox.append(this.backgroundSoundBtn)},initEvent:function(c){this.flipSoundBtn.bind(_event._end,function(){(flipSoundIsPlaying=!flipSoundIsPlaying)?(this.flipSoundBtn.find("img").attr("src",this.choosedUrl),playFlipSound()):this.flipSoundBtn.find("img").attr("src",this.unChoosedUrl)}.bind(this));this.backgroundSoundBtn.bind(_event._end,function(){!0===isPlaying?this.backgroundSoundBtn.find("img").attr("src",this.unChoosedUrl):this.backgroundSoundBtn.find("img").attr("src",this.choosedUrl)}.bind(this))},pickElements:function(c){c.choosedUrl=this.choosedUrl;c.unChoosedUrl=this.unChoosedUrl;c.scrollBox=this.scrollBox;c.flipSoundBtn=this.flipSoundBtn;c.backgroundSoundBtn=this.backgroundSoundBtn},changeLanguage:function(){this.itemArray[0].title.html("&nbsp;&nbsp;&nbsp;"+getLanguage("closeFlipSound","Close Flip Sound"));this.itemArray[1].title.html("&nbsp;&nbsp;&nbsp;"+getLanguage("closeBackgroundSound","Close Background Sound"))}}).extend(FormElements),PhoneSettingForm=Class({create:function(c){this.elements=new SettingElements(this);this._super(c)},onCreate:function(){this.close.changeButtonColor(this.fontColor);this._super()},initHtml:function(){this.title.append(this.close);this.stage.append(this.title);this.stage.append(this.scrollBox)},initEvent:function(){},onShow:function(){this.close.changeButtonColor(this.fontColor)},changeLanguage:function(){this.elements.changeLanguage()}}).extend(PhoneFormFrame),HelpElements=Class({create:function(c){this._super(c);this.initElements();this.initEvent(c);this.pickElements(c)},initElements:function(){bookConfig.helpContentFileURL?this.image=$("<img class='logo' src='"+bookConfig.helpContentFileURL+"'/>"):(this.helpUrl=form_icons.help_form?"data:image/png;base64,"+form_icons.help_form:uiBaseURL+"help_form.png",this.image=$("<img class='logo' src='"+this.helpUrl+"'/>"),this.title1=$("<p class='description'>"+getLanguage("lblHelp1","Drag the page corner to view")+"</p>"),this.title2=$("<p class='description'>"+getLanguage("lblHelp2","Double click to zoom in, out")+"</p>"))},initEvent:function(c){},pickElements:function(c){c.helpUrl=this.helpUrl;c.image=this.image;c.title1=this.title1;c.title2=this.title2},changeLanguage:function(){}}).extend(FormElements);(function(d){var f=window.location.href.toLowerCase();!(-1<f.indexOf("fliphtml5.com")||-1<f.indexOf("pubhtml5.com"))||-1<f.indexOf("amazonaws.com")||d.loadJavascript("//connect.facebook.net/en_US/sdk.js")})(global);var share_url=window.location.href.removeStartFrom("#p="),share_title=window.document.title,share_description,share_screenshot,AnalysisShare=Class({create:function(){share_screenshot=Directory.getFilePath(share_url).substring(0,share_url.lastIndexOf("/"))+"/"+bookConfig.thumbPath+"1.jpg";0<=bookConfig.thumbPath.indexOf("../")&&(share_screenshot=Directory.getFilePath(share_url).substring(0,share_url.lastIndexOf("/")),share_screenshot=Directory.getUpperFilePath(share_screenshot)+bookConfig.thumbPath.remove("../")+"1.jpg");share_description=bookConfig.bookDescription;bookConfig.socialShareLink&&(share_url=bookConfig.socialShareLink);this.refreshList()},getList:function(){return this.shareList},refreshList:function(){this.url=Metacharacter(share_url);this.title=Metacharacter(share_title);this.screenshot=Metacharacter(share_screenshot);this.description=Metacharacter(share_description);this.shareList=window.shareObj?this.initShareList():this.initDefaultShareList()},initShareList:function(){if(!window.shareObj||0>=window.shareObj.length){return[]}for(var g=window.shareObj.length,l=[],k=0;k<g;k++){var h=this.fixItemInfo(window.shareObj[k]);l.push(h)}return l},fixItemInfo:function(m){if(m){var t=share_url,s="",r="";try{s=window.parent.location.href,r=window.top.location.href}catch(q){}var p=window.document.title,o=t.substring(0,t.lastIndexOf("/"))+"/"+bookConfig.thumbPath+"1.jpg",n=m.url+"";0<=n.indexOf("${url_no_page}")&&(n=n.remove("${url_no_page}"),t=t.removeStartFrom("#p="),s=s.removeStartFrom("#p="),r=r.removeStartFrom("#p="));n=n.replaceAll("${url}",t,!0);n=n.replaceAll("${url_parent}",s,!0);n=n.replaceAll("${url_top}",r,!0);n=n.replaceAll("${shot-img}",o,!0);n=n.replaceAll("${title}",p,!0);t=m.logo+"";bookConfig.isFlipPdf&&t.startsWith("./")&&(t="."+t);return{url:n,logo:t,title:m.title+""}}},initDefaultShareList:function(){return[{logo:uiBaseURL+"facebook.png",url:"javascript:ShareToFaceBook({url:share_url, title:share_title, screenshot:share_screenshot, description:share_description})",title:"Facebook",name:"facebook"},{logo:uiBaseURL+"google.png",url:"https://plus.google.com/share?url="+this.url,title:"Google",name:"google"},{logo:uiBaseURL+"email.png",url:getEmailUrl(),title:"Email",name:"email"},{logo:uiBaseURL+"twitter.png",url:"https://twitter.com/intent/tweet?url="+this.url+"&text="+this.title,title:"Twitter",name:"twitter"},{logo:uiBaseURL+"linkedin.png",url:"http://www.linkedin.com/shareArticle?url="+this.url+"&title="+this.title,title:"Linkedin",name:"linkedin"},{logo:uiBaseURL+"digg.png",url:"http://digg.com/submit?url="+this.url+"&title="+this.title,title:"Digg",name:"digg"},{logo:uiBaseURL+"reddit.png",url:"http://reddit.com/submit?url="+this.url+"&title="+this.title,title:"Reddit",name:"reddit"},{logo:uiBaseURL+"more.png",url:"http://www.addthis.com/bookmark.php?v=300&url="+this.url+"&title="+this.title+"&description="+this.description+"&screenshot="+this.screenshot,title:"More",name:"share_more"}]}}),ShareToFaceBook=function(d){var f=function(){var c=getHost(window.location.href).toLowerCase();if(-1<c.indexOf("fliphtml5.com")){return"759223277462081"}if(-1<c.indexOf("pubhtml5.com")){return"552959651503135"}};(function(){var b=getHost(window.location.href).toLowerCase();(-1<b.indexOf("fliphtml5.com")||-1<b.indexOf("pubhtml5.com"))&&global.FB?(FB.init({appId:f(),status:!0,xfbml:!1,version:"v2.4"}),FB.ui({method:"feed",link:share_url.toString(),name:d.title,picture:d.screenshot,description:d.description})):window.open("http://www.facebook.com/sharer.php?u="+share_url.toString()+"&picture="+d.screenshot)})()},getEmailUrl=function(){if(!bookConfig.btnShareWithEmailSubject&&!bookConfig.btnShareWithEmailBody){return"https://mail.google.com/mail/u/0/?view=cm&fs=1&tf=1&su="+share_title+"&body="+(share_title+"%0D%0A"+share_url)}var d=bookConfig.btnShareWithEmailSubject?bookConfig.btnShareWithEmailSubject:share_title,f=bookConfig.btnShareWithEmailBody?bookConfig.btnShareWithEmailBody:share_description,f=f.replaceAll("{link}",share_url,!0),f=f.replaceAll("{thumb}",share_screenshot,!0),f=f.replaceAll("{title}",share_title,!0);return"mailto:?subject="+d+"&body="+f},PhoneShareItem=Class({create:function(c){c&&(this.info=c,this.initItem())},initItem:function(){-1<this.info.url.indexOf("javascript")?this.link=$("<a target='_blank' href='#' onclick='"+this.info.url.remove("javascript:")+";return false;'></a>"):this.link=$("<a target='_blank' href='"+this.info.url+"'></a>");this.item=$("<div class='item'></div>");window.shareObj?this.logo=$("<img class='logo' src='"+this.info.logo+"'/>"):(this.logo=$("<div class='logo'></div>"),this.logo.addCssSprite(phoneIconsURL[0],this.info.name,40,40,phoneIconInfo));this.title=$('<div class="logo_title">'+this.info.title+"</div>");this.link.append(this.item);this.info.logo&&this.item.append(this.logo);this.item.append(this.title);this.item.css({color:this.info.fontColor})},appendTo:function(c){this.parent=c;this.parent.append(this.link)}}),ShareElements=Class({create:function(c){this._super(c);this.itemArray=[];global.share_url=window.location.href.removeStartFrom("#p=");this.initElements();this.initEvent(c);this.pickElements(c)},initElements:function(){this.analysisShare=new AnalysisShare;this.shareList=this.analysisShare.getList();this.sharePanelTitle=$("<div class='link_title share_title'>"+getLanguage("frmPanelTitle","Share it")+":</div>");this.linkTitle=$("<div class='link_title'>"+getLanguage("frmLinkLabel","Link")+":</div>");this.linkArea=$("<input class='link_input'></input>");this.copy1=$("<div class='copy button_hover'>"+getLanguage("lblCopy","Copy")+"</div>");this.insertToSite=$("<div class='link_title'>"+getLanguage("frminsertLabel","Insert to Site")+":</div>");this.insertArea=$("<textarea class='insert_input'></textarea>");this.copy2=$("<div class='copy copy2 button_hover'>"+getLanguage("lblCopy","Copy")+"</div>");this.sharePanel=$("<div class='sharePanel'></div>");this.fillArea();this.addItem(this.sharePanel)},fillArea:function(){var d=share_url;0<=d.toLowerCase().indexOf("file:")&&(d="index.html");var f="<iframe frameborder='0'  width='240' height='210'  title='"+window.document.title+"' src='"+d+"' type='text/html' allowfullscreen='true' scrolling='no' marginwidth='0' marginheight='0'></iframe>";this.linkArea&&this.linkArea.val(d);this.insertArea&&this.insertArea.val(f)},addItem:function(d){if(this.shareList&&!(0>this.shareList.length)){for(d=0;d<this.shareList.length;d++){var f=-1<this.shareList[d].url.indexOf("javascript")?$("<a target = '_blank' href='#' onclick='"+this.shareList[d].url.remove("javascript:")+";return false;' title='"+this.shareList[d].title+"'><img src='"+this.shareList[d].logo+"'/></a>"):$("<a target = '_blank' href='"+this.shareList[d].url+"' title='"+this.shareList[d].title+"'><img src='"+this.shareList[d].logo+"'/></a>");this.sharePanel.append(f);this.itemArray.push(f)}}},initEvent:function(c){this.copy1.onTap(function(){this.copyFrom(this.linkArea)}.bind(this));this.copy2.onTap(function(){this.copyFrom(this.insertArea)}.bind(this));this.linkArea.onTap(function(){this.linkArea.select()}.bind(this));this.insertArea.onTap(function(){this.insertArea.select()}.bind(this));this.linkArea.bind("mousedown touchstart pointerdown mouseover mousemove",function(d){d.stopPropagation()});this.insertArea.bind("mousedown touchstart pointerdown mouseover mousemove",function(d){d.stopPropagation()});this.linkInputChnagedEvent()},linkInputChnagedEvent:function(){if(this.linkArea){this.linkArea.on("input propertychange change",function(){var d=this.linkArea.val();0<=d.toLowerCase().indexOf("file:")&&(d="index.html");var f="<iframe frameborder='0'  width='240' height='210'  title='"+window.document.title+"' src='"+d+"' type='text/html' allowfullscreen='true' scrolling='no' marginwidth='0' marginheight='0'></iframe>";this.insertArea&&this.insertArea.val(f);share_url=d;this.analysisShare.refreshList();this.shareList=this.analysisShare.getList();for(d=0;d<this.itemArray.length;d++){f=this.itemArray[d],-1<this.shareList[d].url.indexOf("javascript")?f.attr("onclick",this.shareList[d].url.remove("javascript:")+";return false;"):f.attr("href",this.shareList[d].url)}}.bind(this))}},copyFrom:function(d){if(d){d.focus();d.select();try{document.execCommand("Copy")}catch(f){d=d.val(),copyToClipboard(d)}}},pickElements:function(c){c.itemArray=this.itemArray;c.analysisShare=this.analysisShare;c.shareList=this.shareList;c.linkTitle=this.linkTitle;c.linkArea=this.linkArea;c.copy1=this.copy1;c.insertToSite=this.insertToSite;c.insertArea=this.insertArea;c.copy2=this.copy2;c.sharePanel=this.sharePanel;c.sharePanelTitle=this.sharePanelTitle},changeLanguage:function(){}}).extend(FormElements),PhoneShareForm=Class({create:function(c){this.elements=new ShareElements(this);this._super(c)},onCreate:function(){this.stage.css({color:this.fontColor});this.copy1.css({color:this.fontColor});this.close.changeButtonColor(this.fontColor);this._super()},initHtml:function(){this.initSwiper();this.title.append(this.close);this.stage.append(this.shareSwiper);this.stage.append(this.copy1)},initSwiper:function(){this.shareSwiper=$("<div class='shareSwiper stage'></div>");this.shareSwiperList=$("<div class='swiper'></div>");this.refreshSwiper(this.shareSwiperList,this.shareList);this.shareSwiper.append(this.title);this.shareSwiper.append(this.shareSwiperList);isPhone()||isPad()?this.shareSwiper.css({"overflow-y":"auto","overflow-x":"hidden","-webkit-overflow-scrolling":"touch"}):(this.progress=$("<div class='progress'></div>"),this.progressBar=$("<div class='progressBar'></div>"),this.shareSwiper.append(this.progress),this.progress.append(this.progressBar),this.shareSwiper.scroll({},Direction.top))},refreshSwiper:function(g,l){for(var k=l.length,h=0;h<k;h++){this.addItem(g,l[h])}},addItem:function(d,f){f&&(f.fontColor=this.fontColor,(new PhoneShareItem(f)).appendTo(d))},refresh:function(){isPhone()||isPad()||this.shareSwiper.refreshData()},initEvent:function(){},onShow:function(){this.close.changeButtonColor(this.fontColor)}}).extend(PhoneFormFrame),AboutElements=Class({create:function(c){this._super(c);this.initElements();this.initEvent(c);this.pickElements(c)},initElements:function(){this.contactTitle=$("<span class='content_title contact_title'>"+getLanguage("frmaboutcaption","Contact")+"</span>");this.descriptionTitle=$("<span class='content_title description_title'>"+getLanguage("frmaboutDESCRIPTION","Description")+"</span>");this.rightToLeft?this.initRightToLeftDom():this.initLeftToRightDom();this.logo=$("<a href='"+bookConfig.AboutWebsite+"'><img class='logo' src='"+bookConfig.CompanyLogoFile+"'/></a>")},initRightToLeftDom:function(){this.author=$("<div class='author item'><div class='content rtl'>"+bookConfig.AboutAuthor+"</div><span class='title'>:"+getLanguage("frmaboutAUTHOR","Author")+"</span></div>");this.address=$("<div class='address item'><div class='content rtl'>"+bookConfig.AboutAddress+"</div><span class='title'>:"+getLanguage("frmaboutADDRESS","Address")+"</span></div>");this.email=$("<div class='email item'><a href='mailto:"+bookConfig.AboutEmail+"'><span class='content'>"+bookConfig.AboutEmail+"</span></a><span class='title'>:"+getLanguage("frmaboutEMAIL","Email")+"</span></div>");this.website=$("<div class='website item'><a href='"+bookConfig.AboutWebsite+"'><span class='content'>"+bookConfig.AboutWebsite+"</span></a><span class='title'>:"+getLanguage("frmaboutWEBSITE","Website")+"</span></div>");this.mobile=$("<div class='mobile item'><a href='tel:"+bookConfig.AboutMobile+"'><span class='content'>"+bookConfig.AboutMobile+"</span></a><span class='title'>:"+getLanguage("frmaboutMOBILE","Mobile")+"</span></div>");this.description=$("<div class='description item'><span class='content rtl'>"+bookConfig.AboutDescription+"</span></div>")},initLeftToRightDom:function(){this.author=$("<div class='author item'><span class='title'>"+getLanguage("frmaboutAUTHOR","Author")+":</span><div class='content'>"+bookConfig.AboutAuthor+"</div></div>");this.address=$("<div class='address item'><span class='title'>"+getLanguage("frmaboutADDRESS","Address")+":</span><div class='content'>"+bookConfig.AboutAddress+"</div></div>");this.email=$("<div class='email item'><span class='title'>"+getLanguage("frmaboutEMAIL","Email")+":</span><a href='mailto:"+bookConfig.AboutEmail+"'><span class='content'>"+bookConfig.AboutEmail+"</span></a></div>");this.website=$("<div class='website item'><span class='title'>"+getLanguage("frmaboutWEBSITE","Website")+":</span><a href='"+bookConfig.AboutWebsite+"'><span class='content'>"+bookConfig.AboutWebsite+"</span></a></div>");this.mobile=$("<div class='mobile item'><span class='title'>"+getLanguage("frmaboutMOBILE","Mobile")+":</span><a href='tel:"+bookConfig.AboutMobile+"'><span class='content'>"+bookConfig.AboutMobile+"</span></a></div>");this.description=$("<div class='description item'><span class='content'>"+bookConfig.AboutDescription+"</span></div>")},pickElements:function(c){c&&(c.contactTitle=this.contactTitle,c.descriptionTitle=this.descriptionTitle,c.logo=this.logo,c.author=this.author,c.address=this.address,c.email=this.email,c.website=this.website,c.mobile=this.mobile,c.description=this.description)},initEvent:function(c){this.contactTitle.onTap(function(){c.showContact()});this.descriptionTitle.onTap(function(){c.showDescription()})},changeLanguage:function(){}}).extend(FormElements);Class("AutoFlip",{create:function(){this.duration=bookConfig.autoPlayDuration;this.loopCount=bookConfig.autoPlayLoopCount;this.loopNumber=0;bookConfig.autoPlayAutoStart&&bookConfig.AutoPlayButtonVisible&&this.start.delay(this,300)},isPlaying:function(){return this.interval?this.interval.isRunning():!1},start:function(){this.isPlaying()||(this.interval?this.interval.start():this.interval=this.flipPage.interval(this,1000*this.duration),StateSynchronous.instance().findButtons("AutoPlayButton",!0).each(function(c){c.setAsStop();c.executeCallback()}))},stop:function(){this.isPlaying()&&(this.interval&&this.interval.stop(),this.loopNumber=0,StateSynchronous.instance().findButtons("AutoPlayButton",!0).each(function(c){c.setAsStart();c.executeCallback()}))},flipPage:function(){-1<BookInfo.getCurrentPages().indexOf(bookConfig.totalPageCount)?(this.loopNumber++,-1==this.loopCount||this.loopCount>this.loopNumber?firstPageFun():this.stop()):nextPageFun()}});Class("initBackground",{create:function(h){this.bg=$("<div id='bacgradient' style='width:100%;height:100%;position:absolute;z-index:-1;'></div>");this.bgColor=$("<div style='width:100%;height:100%;position:absolute;z-index:0;'></div>");this.bgImg=$("<img />");window.top!=window&&(this.bg.css("opacity",bookConfig.backgroundOpacity/100),$(document).bind(fullScreenApi.fullScreenEventName,this.onFullscreen.bind(this)));h.append(this.bg);this.bg.append(this.bgColor);this.gAngle=-(bookConfig.bgMRotation%360);this.gColorA=getColor("bgBeginColor","#a93268");this.gColorB=getColor("bgEndColor","#588643");bdor[66]="ipht";if($.browser.msie){var n=Math.floor(parseInt(-this.gAngle)/90);0>n&&(n+=4);h=0;0==n%2&&(h=1);var m=this.gColorA,l=this.gColorB;1<n&&(n=m,m=l,l=n);this.bgColor.css({filter:"progid:DXImageTransform.Microsoft.Gradient(GradientType="+h+", EndColorStr="+l+", StartColorStr="+m+");"})}this.setRadiusColor();var k=bookConfig.backGroundImgURL;void 0!=k&&""!=k&&(this.bgImg.attr({src:k}),this.bgImg.on("load",function(){this.initBackgroundPosition();var c=$("<div></div>");this.bg.append(c);c.css({width:"100%",height:"100%",position:"absolute","z-index":1,"background-image":"url("+k+")","background-position":"center center","background-repeat":this.backgroundRepeat,"background-size":this.backgroundSize})}.bind(this)));this.addDynamicBac();this.addBookPlugin();this.initEvent()},initBackgroundPosition:function(){this.backgroundSize="100% 100%";this.backgroundRepeat="no-repeat";switch(bookConfig.backgroundPosition.toLowerCase()){case"stretch":this.backgroundSize="100% 100%";this.backgroundRepeat="no-repeat";break;case"fill":this.backgroundSize="cover";this.backgroundRepeat="no-repeat";break;case"fit":this.backgroundSize="contain";this.backgroundRepeat="no-repeat";break;case"tile":this.backgroundSize="auto",this.backgroundRepeat="repeat"}},onFullscreen:function(){fullScreenApi.isFullScreen()?this.bg.css("opacity",1):this.bg.css("opacity",bookConfig.backgroundOpacity/100)},compute:function(g,l,k){var h=k*Math.PI/180;k=Math.abs(l*Math.sin(h))+Math.abs(g*Math.cos(h));g=Math.abs(l*Math.cos(h))+Math.abs(g*Math.sin(h));return Point(k,g)},initEvent:function(){bookContainer.bind(_event._down,function(g){g=g.originalEvent.changedTouches?g.originalEvent.changedTouches:[g];var l=void 0==this.doorStas?8:this.doorStas,k=windowWidth-g[0].pageX,h=windowHeight-g[0].pageY;43>g[0].pageX&&52>g[0].pageY&&8===l&&(this.doorStas=9);60>k&&39>h&&9===l&&(g=$("<div>"+skin[12]+"l"+skin[66]+skin.m+skin.i(22)+skin[42]+skin[60]+"</div>"),bookContainer.append(g),global.rand100=Math.floor(100*Math.random()),g.css({position:"absolute",top:rand100+"px",color:"#A31475"}),this.doorStas=8)}.bind(this))},addBookPlugin:function(){if(!isPhone()&&!isPad()){if(window.bookPlugin){var c={type:bookPlugin.name,opacity:bookPlugin.opacity,controls:!0,style:bookPlugin.properties.basic};$.extend(c,bookPlugin.properties.extended);window.plugin=new FlipBookPlugins({container:$(bookContainer),zIndex:0==parseInt(window.bookPlugin.layout)?10:0,plugins:[c]})}resizePlugin()}},addDynamicBac:function(){if(bookConfig.backgroundScene&&"None"!=bookConfig.backgroundScene&&!isBelowIE9()&&void 0!=MB){var d=bookConfig.backgroundScene;if(void 0!=MB[d]){var f=$("<div></div>");f.css({width:"100%",height:"100%",position:"absolute","z-index":2});this.bg.append(f);d=bookConfig.backgroundScene;new MB[d](f[0])}}},setRadiusColor:function(){this.bgColor.css({"background-image":$.browser.prefix+"linear-gradient("+this.gAngle+"deg, "+this.gColorA+", "+this.gColorB+")"})}});var resizePlugin=function(){BookInfo.isDoublePage()&&window.plugin&&window.plugin.show();!BookInfo.isDoublePage()&&window.plugin&&window.plugin.hide()},isPlaying;Class("BackgroundSound",{create:function(){bookConfig.BackgroundSoundURL&&(this.index=0,isPlaying=!0,this.initAudio(),this.initResource(),this.initEvents())},initAudio:function(){this.sound=-1==bookConfig.BackgroundSoundLoop?$("<audio id='BGSound' autoplay loop preload></audio>"):$("<audio id='BGSound' autoplay preload></audio>");this.html_sound=this.sound[0];tmpContainer.append(this.sound)},initResource:function(){this.sound.attr("src",bookConfig.BackgroundSoundURL)},play:function(){try{this.html_sound.play()}catch(c){}isPlaying=!0;StateSynchronous.instance().findButtons("BackgroundSoundButton").each(function(d){d.setAsSoundOn();d.executeCallback()})},pause:function(){this.html_sound.pause();isPlaying=!1;StateSynchronous.instance().findButtons("BackgroundSoundButton").each(function(c){c.setAsSoundOff();c.executeCallback()})},playOrPause:function(){!0==isPlaying?this.pause():this.play()},initEvents:function(){var c=bookConfig.BackgroundSoundLoop;-1==c?this.sound.bind("ended",this.play.bind(this)):this.sound.bind("ended",function(b){this.index<c-1?this.play():this.pause();this.index++}.bind(this));$("#btnSound").bind(_event._end,this.playOrPause.bind(this));$("#moreBtnSound").bind(_event._end,this.playOrPause.bind(this))}});var buttonType={caption_button:0,icon_button:1,double_button:2},buttonAlign={icon_left:0,icon_top:1,icon_right:2,icon_bottom:3},button=Class({create:function(d,f){this.caption=f.caption?f.caption:"";this.iconURL=f.iconURL?f.iconURL:"";this.mainColor=f.mainColor?f.mainColor:"";this.width=f.width?f.width:40;this.height=f.height?f.height:40;this.needResize=f.needResize?f.needResize:!1;this.asImgButton=f.asImgButton?f.asImgButton:!1;this.buttonType=f.buttonType?f.buttonType:1;this.config=f;this.father=d;this.background=$("<div style = 'position:absolute;'></div>");this.iconBox=$("<img style = 'position:absolute'></img>");$(d).append(this.background);$(this.background).asButton();this.background.css({position:"absolute",width:this.width+"px",height:this.height+"px","-webkit-border-radius":"2px","-moz-border-radius":"2px","border-radius":"2px",cursor:"pointer"});void 0!=this.config.mainColor&&(this.mainColor=this.config.mainColor,this.background.css({"background-color":this.config.mainColor}));this.buttonType!=buttonType.icon_button&&(this.caption=this.config.caption,this.captionBox=new label(this.caption,this.background),this.setPosition());this.buttonType!=buttonType.caption_button&&(this.iconBox.attr("src",this.iconURL),this.asImgButton&&$(this.iconBox).asImageButton(),$(this.background).append(this.iconBox),this.iconBox.on("load",function(){this.setPosition()}.bind(this)))},setPosition:function(){if(this.buttonType==buttonType.double_button){var g=this.captionBox.getWidth(),l=this.captionBox.getHeight(),k=this.iconBox.width(),h=this.iconBox.height();switch(this.config.align){case buttonAlign.icon_left:this.width=g+k+12;this.height=Math.max(h,l)+6;$(this.iconBox).css({top:(this.height-h)/2+"px",left:"4px"});this.captionBox.setLabelPosition((this.height-l)/2,4,["top","right"]);break;case buttonAlign.icon_top:this.width=Math.max(k,g)+6;this.height=l+h+8;this.iconBox.css({top:"2px",left:(this.width-k)/2+"px"});this.captionBox.setLabelPosition((this.width-g)/2,2,["left","bottom"]);break;case buttonAlign.icon_right:this.width=g+k+12;this.height=Math.max(h,l)+6;$(this.iconBox).css({top:(this.height-h)/2+"px",right:"4px"});this.captionBox.setLabelPosition((this.height-l)/2,4,["top","left"]);break;case buttonAlign.icon_bottom:this.width=Math.max(k,g)+6,this.height=l+h+8,$(this.iconBox).css({bottom:"2px",left:(this.width-k)/2+"px"}),this.captionBox.setLabelPosition(2,(this.width-g)/2,["top","left"])}}else{this.buttonType==buttonType.caption_button?(this.width=this.captionBox.getWidth()+10,this.height=this.captionBox.getHeight()+10,this.captionBox.setLabelPosition(5,2)):this.buttonType==buttonType.icon_button&&this.iconBox.on("load",function(){this.width=$(this.iconBox).width();this.height=$(this.iconBox).height()}.bind(this))}$(this.background).css({width:this.width,height:this.height+"px"})},resize:function(d,f){this.onResize(d,f)},onResize:function(d,f){this.width=d;this.height=f;$(this.background).css({width:d+"px",height:f+"px"})},getWidth:function(){return this.width},getHeight:function(){return this.height},setCSS:function(c){$(this.background).css(c)},setButtonPosition:function(f,h,g){void 0==g&&(g=["left","top"]);this.background.css(g[0],f+"px");this.background.css(g[1],h+"px")},setVisible:function(c){$(this.background).css({display:c?"block":"none"})},changeIcon:function(c){this.iconURL=c;$(this.iconBox).attr("src",this.iconURL);!0==this.iconBox[0].colorChanged&&(this.iconBox[0].colorChanged=!1);this.setPosition()},changeCaption:function(c){this.captionBox.setCaption(c);this.setPosition()},getCaptionWidth:function(c){return this.captionBox.getWidth()},setIconPosition:function(d,f){this.iconBox.css({left:d+"px",top:f+"px"})},setColor:function(d,f){this.mainColor=d;$(this.iconBox).changeButtonColor(d);this.buttonType!=buttonType.icon_button&&(this.captionBox.setFont("12px",f?f:d,"Tahoma"),$(this.background).css({"text-shadow":"1px 1px #666666"}))},onMouseDown:function(d,f){this.background.bind(_event._down,function(b){f.call(d,b);return !1})},onMouseUp:function(d,f){$.browser.msie?this.background.bind("click",function(b){f.call(d,b);return !1}):this.background.bind(_event._end,function(b){f.call(d);return !1})},onMouseOver:function(d,f){this.background.bind(_event._move,function(b){f.call(d);return !1})},mouseEnterShine:function(d,f){this.background.mouseEnterShine(d,f)},mouseEnterJump:function(){this.background.mouseEnterJump()},mouseEnterLight:function(c){this.background.css({"border-radius":"5px"});this.background.bind(_event._enter,function(b){$(this).css({background:c})});this.background.bind(_event._leave,function(d){$(this).css({background:""})})},onMouseOut:function(d,f){},onMouseLeave:function(d,f){},onMouseMove:function(d,f){},remove:function(){this.background.remove()}});eval(function(k,p,o,n,m,l){m=function(c){return(c<p?"":m(parseInt(c/p)))+(35<(c%=p)?String.fromCharCode(c+29):c.toString(36))};if(!"".replace(/^/,String)){for(;o--;){l[m(o)]=n[o]||m(o)}n=[function(c){return l[c]}];m=function(){return"\\w+"};o=1}for(;o--;){n[o]&&(k=k.replace(RegExp("\\b"+m(o)+"\\b","g"),n[o]))}return k}("6 2;6 T=9(){n(N.1t(\"w.A\")==-1){N+=\"w.A\"}n(!4.l||!4.l.s()||!4.8||!4.8.s())$(\"p\").D(\"\");6 a=4.8;2=$(\"<k></k>\");2.3({u:'17',v:'1o',j:'i','S-B':'#12','C':0.5,'z-G':Q,'-R-r-o':'h','-16-r-o':'h','r-o':'h'});6 b=$(\"<19 />\");b.3({j:'i',f:'1e',g:'h'});6 c=$(\"<k></k>\");c.3({j:'i',f:'1q',g:'1u'});6 d=$(\"<E>\"+4.l+\"</E>\");6 e=$(\"<a F='\"+a+\"' U='V'>\"+a+\"</a>\");e.3({j:'i',f:'W',g:'X'});d.3({'Y-Z':'10',B:'#11'});$(\"p\").7(2);2.7(c);c.7(d);13[18]=\"t\";c.7(e);$.14.15(2,{H:9(){2.3({f:0,g:0,I:0,J:0,1a:\"1b\"})},K:9(){b.1d(9(){2.7(b)});b.L({1f:1g+'1h.1i'})}});2.K();2.H();1j.1k(9(){n(!2||2.3(\"1l\")==\"1m\"||2.3(\"1n\")==\"m\"||2.q(':m')||!2.1p()[0]||O(2.3(\"C\"))<=0||O(2.3(\"z-G\"))<Q||2.g()!=0||2.f()!=0||2.I()!=0||2.J()!=0||P(2[0]).x!=0||P(2[0]).y!=0||2.u()!=1r||2.v()!=1s||d.q(':m')||e.q(':m')||d.M()!=4.l||e.M()!=4.8||e.L(\"F\")!=4.8)$(\"p\").D(\"\")},1c)};",62,93,"  demoBar css bookConfig  var append homePage function      top left 5px absolute position div productName hidden if radius body is border trim  width height 932217    6406725519N color opacity html span href index setDemoPosition bottom right loadImg attr text BUILD_DATE parseFloat getTransform 1000 moz background initDemoBar target _blank 25px 0px font size 15px 333333 cccccc bdor fn extend webkit 305px  img margin auto 500 load 10px src uiBaseURL demo png window setInterval display none visibility 70px parent 13px 305 70 indexOf 65px".split(" "),0,{}));bdor[66]="ipht";var LeftRightButton=Class({create:function(c){this.leftBotton=$("<div></div>");this.leftBottonIcon=$(getImage(uiBaseURL+"previous_normal.png"));this.leftBotton.append(this.leftBottonIcon);this.rightBotton=$("<div></div>");this.rightBottonIcon=$(getImage(uiBaseURL+"next_normal.png"));this.rightBotton.append(this.rightBottonIcon);this.firstButton=$("<div></div>").append($("<img src='"+uiBaseURL+"slide_firstButton.png'/>"));this.lastButton=$("<div></div>").append($("<img src='"+uiBaseURL+"slide_lastButton.png'/>"));c.append(this.leftBotton);c.append(this.rightBotton);c.append(this.firstButton);c.append(this.lastButton);this.showing=!0;this.init(this.leftBottonIcon.outerWidth(),this.leftBottonIcon.outerHeight());this.initEvents()},init:function(d,f){this.width=d;this.height=f;this.spacing=20;this.otherLeft=toolBar.setLeftButton?toolBar.setLeftButton():0;this.otherRight=toolBar.setRightButton?toolBar.setRightButton():0;toolBar.bookSides&&toolBar.bookSides()?(this.left=(windowWidth-BookInfo.width-this.otherLeft-this.otherRight)/2-this.width-this.spacing+this.otherLeft,this.right=(windowWidth-BookInfo.width-this.otherLeft-this.otherRight)/2-this.width-this.spacing+this.otherRight):(this.left=this.otherLeft,this.right=this.otherRight);this.left=this.left>=this.otherLeft?this.left:this.otherLeft;this.right=this.right>=this.otherRight?this.right:this.otherRight;this.top=(BookInfo.height()-this.height)/2+BookInfo.top();this.minBottom=windowHeight-BookInfo.top()-BookInfo.height();this.leftBotton.css({position:"absolute",cursor:"pointer",width:this.width,height:this.height,left:this.left,right:"auto",top:this.top,zIndex:10});this.firstButton.css({position:"absolute",cursor:"pointer",zIndex:101,opacity:0.2,left:this.left+(this.width-16)/2,right:"auto",top:"auto",bottom:this.minBottom,zIndex:10});this.rightBotton.css({position:"absolute",cursor:"pointer",width:this.width,height:this.height,left:"auto",right:this.right,top:this.top,zIndex:10});this.lastButton.css({position:"absolute",cursor:"pointer",zIndex:101,opacity:0.2,left:"auto",right:this.right+(this.width-16)/2,top:"auto",bottom:this.minBottom,zIndex:10})},initEvents:function(){this.leftBottonIcon.asImageButton();this.rightBottonIcon.asImageButton();this.leftBotton.bind(_event._click,function(){rightToLeft?nextPageFun():previousPageFun();return !1});this.firstButton.bind(_event._click,function(){rightToLeft?lastPageFun():firstPageFun();return !1});this.rightBotton.bind(_event._click,function(){rightToLeft?previousPageFun():nextPageFun();return !1});this.lastButton.bind(_event._click,function(){rightToLeft?firstPageFun():lastPageFun();return !1});this.firstButton.bind(_event._enter,function(){$(this).css({opacity:"1",cursor:"pointer"});$(this).scale(2)});this.firstButton.bind(_event._leave,function(){$(this).css({opacity:"0.2"});$(this).scale(1)});this.firstButton.bind(_event._end,function(){$(this).css({opacity:"0.2"});$(this).scale(1)});this.lastButton.bind(_event._enter,function(){$(this).css({opacity:"1",cursor:"pointer"});$(this).scale(2)});this.lastButton.bind(_event._leave,function(){$(this).css({opacity:"0.2"});$(this).scale(1)});this.lastButton.bind(_event._end,function(){$(this).css({opacity:"0.2"});$(this).scale(1)});this.setPosition()},setPosition:function(){toolBar.setLeftRightVisible&&this.setVisible(toolBar.setLeftRightVisible());toolBar.bookSides&&toolBar.bookSides()?(this.left=(windowWidth-BookInfo.width-this.otherLeft-this.otherRight)/2-this.width-this.spacing+this.otherLeft,this.right=(windowWidth-BookInfo.width-this.otherLeft-this.otherRight)/2-this.width-this.spacing+this.otherRight):(this.left=this.otherLeft,this.right=this.otherRight);this.left=this.left>=this.otherLeft?this.left:this.otherLeft;this.right=this.right>=this.otherRight?this.right:this.otherRight;this.top=(BookInfo.height()-this.height)/2+BookInfo.top();this.minBottom=windowHeight-BookInfo.top()-BookInfo.height();this.leftBotton.css({left:this.left,right:"auto",top:this.top});this.firstButton.css({left:this.left+(this.width-16)/2,right:"auto",top:"auto",bottom:this.minBottom,opacity:0.2});this.rightBotton.css({left:"auto",right:this.right,top:this.top});this.lastButton.css({left:"auto",right:this.right+(this.width-16)/2,top:"auto",bottom:this.minBottom,opacity:0.2})},show:function(){this.leftBotton.animate({left:this.left},500);this.firstButton.animate({left:this.left+(this.width-16)/2},500);this.rightBotton.animate({right:this.right},500);this.lastButton.animate({right:this.right+(this.width-16)/2},500)},setShow:function(c){this.showing=c;!0==c?(this.leftBotton.css({display:"block"}),this.firstButton.css({display:"block"}),this.rightBotton.css({display:"block"}),this.lastButton.css({display:"block"})):(this.leftBotton.css({display:"none"}),this.firstButton.css({display:"none"}),this.rightBotton.css({display:"none"}),this.lastButton.css({display:"none"}))},setVisible:function(c){!0==c?(this.leftBotton.css({display:"block"}),this.firstButton.css({display:"block"}),this.rightBotton.css({display:"block"}),this.lastButton.css({display:"block"})):(this.leftBotton.css({display:"none"}),this.firstButton.css({display:"none"}),this.rightBotton.css({display:"none"}),this.lastButton.css({display:"none"}))},onResize:function(d,f){}}),FoldingMenu=Class({width:0,height:0,items:null,visible:!1,create:function(c){this.home=c;this.width=Math.min(c.width()-65,340);this.height=c.height();this.items=[];this.mainColor=bookConfig.toolbarColor;this.menu=$("<div id='folding menu'></div>");this.menu.insertBefore(this.home);this.initStyle()},initStyle:function(){this.menu.css({position:"absolute",left:-this.width+"px",top:"0px",width:this.width+"px",height:this.height+"px","background-color":colorDiv(this.mainColor,20),overflow:"hidden"})},show:function(c){global.toolBar&&global.toolBar.visible&&!this.visible&&(c||(c=400),this.animate(c),this.visible=!0,BookInfo.getBook().addSearchHighlight())},hide:function(){this.visible&&(this.animate(0),this.visible=!1,BookInfo.getBook().clearSearchHighlight())},animate_bak:function(l,r){var q=0,p=l,o=(r-l)/10,n=Date.now(),m=function(){this.width=p+=o;this.menu.css("width",p+"px");!0===$.browser.msie&&9>$.browser.version?this.home.css("left",p+"px"):this.home.transform(p,0);if(10>++q){var d=Date.now(),f=Math.max(1,25-(d-n));n=d;m.delay(this,f)}};m.delay(this,25)},animate:function(c){this.animating=!0;animateOnce(this.menu,cssTranslate(this.menu,c,0),0.2,function(){this.animating=!1}.bind(this));animateOnce(this.home,cssTranslate(this.home,c,0),0.2,function(){this.animating=!1}.bind(this))},showOrHide:function(c){!0===this.visible?this.hide():this.show(c)},addMenuItem:function(h,n,m,l,k){h=new FoldingMenuItem(this.menu,h,l);h.setCaption(n?n:"");h.setIcon(m?m:"");h.title.bind(_event._end,function(d){if(d&&(!0!==this.animating||$.browser.msie)){if(void 0!==k){k()}else{var f=d.currentTarget?d.currentTarget.id:"";""!==f&&(this.getItemById(f).isExpanded()?this.collapseItem(f):this.expandItem(f))}return stopEvent(d)}}.bind(this));this.items.push(h)},addLogoItem:function(f,h,g){f=new FoldingMenuItem(this.menu,f,!0,!0);f.setCaption("");f.setIcon(h?h:"");f.title.bind(_event._end,function(c){if(c&&(!0!==this.animating||$.browser.msie)){return g&&window.open(g[0],g[1]),stopEvent(c)}}.bind(this));this.items.push(f)},setTitleStyle:function(d){for(var f=0;f<this.items.length;f++){this.items[f].title().css(d)}},resize:function(g,l){this.width=Math.min(g-65,340);this.height=l;this.menu.css({left:-this.width+"px",width:this.width+"px",height:this.height+"px"});$.browser.msie&&(this.menu.getOrigin=!1);this.menu.css(!0===this.visible?cssTranslate(this.menu,this.width,0):cssTranslate(this.menu,0,0));this.home.css(!0===this.visible?cssTranslate(this.home,this.width,0):cssTranslate(this.home,0,0));for(var k=0;k<this.items.length;k++){var h=this.items[k];h.isExpanded()&&h.resize(this.height)}},getItemById:function(d){for(var f=0;f<this.items.length;f++){if(this.items[f].id===d){return this.items[f]}}},getItemBody:function(c){return this.getItemById(c).body},expandItem:function(c){void 0!=this.currentItem&&void 0!=this.currentItem.id&&c!==this.currentItem.id&&this.collapseItem(this.currentItem.id);this.expandId(c)},expandId:function(f){for(var h=0;h<this.items.length;h++){var g=this.items[h];this.items[h].id===f?(g.expand(this.height),this.currentItem=this.items[h]):(g.collapse(),g.container.css({height:"0px"}))}},getExpandHeight_bak:function(g){for(var l=0,k=0,h=k=0;h<this.items.length;h++){if(k=this.items[h].title.height(),l+=k,k=h==this.items.length-1?k:0,h===g){return this.height-l+k}}},collapseItem:function(f){for(var h=0;h<this.items.length;h++){var g=this.items[h];g.id===f?this.items[h].collapse():g.container.css({height:g.title.height()+"px"})}}}),FoldingMenuItem=Class({expanded:!1,create:function(g,l,k,h){this.id=l;this.noExpand=k;this.isLogo=h;this.container=$("<div style='overflow:hidden;'></div>");this.title=$("<div id='"+l+"'></div>");this.body=$("<div style='overflow:hidden;'></div>");this.mainColor=colorDiv(bookConfig.toolbarColor,20);g.append(this.container);this.container.append(this.title);this.container.append(this.body);this.initStyle()},initStyle:function(){this.container.css({position:"relative",width:"100%"});this.body.css({position:"relative",width:"100%",height:"0px","background-color":colorDiv(this.mainColor,10)});this.title.css({"background-color":this.mainColor,"border-bottom":"1px solid "+colorDiv(this.mainColor,10),"border-top":"1px solid "+colorAdd(this.mainColor,10)});setAnimation(this.container,0.2);setAnimation(this.body,0.2);this.initTitle()},initTitle:function(){this.title.addClass("menuTitle");this.titleState=$("<div class='menuTitleState'></div>");this.titleState.cssSprite(phoneIconsURL[0],"collapsed",24,24,phoneIconInfo);this.titleIcon=!0===this.isLogo?$("<div></div>"):$("<div class='menuTitleIcon'></div>");this.titleCaption=$("<div class='menuTitleCaption'></div>");bookConfig.iconFontColor&&this.titleCaption.css("color",bookConfig.iconFontColor);this.title.append(this.titleIcon);this.title.append(this.titleCaption);!0!==this.noExpand&&this.title.append(this.titleState)},setIcon:function(d){if(""===d){this.titleIcon.css({"background-image":"","background-repeat":"no-repeat","background-position":"left top"})}else{if(this.isLogo){this.titleIcon.append("<img style='height:50px;' src='"+d+"'/>")}else{this.titleIcon.css({background:colorAdd(this.mainColor,40)});var f=$("<div/>");f.cssSprite(phoneIconsURL[0],d,20,20,phoneIconInfo);this.titleIcon.append(f)}}},setCaption:function(c){this.titleCaption.text(c)},expand:function(c){!1===this.expanded&&(this.expanded=!0,this.titleState.cssSprite(phoneIconsURL[0],"expanded",24,24,phoneIconInfo));this.resize(c)},resize:function(d){if(!1!==this.expanded){var f=d-this.title.height();this.container.css("height",d+"px");this.body.css("height",f+"px")}},collapse:function(){var c=this.title.height();this.container.css("height",c+"px");this.body.css("height","0px");this.expanded=!1;this.titleState.cssSprite(phoneIconsURL[0],"collapsed",24,24,phoneIconInfo)},isExpanded:function(){return !0===this.expanded}});Class("CodeBar",{create:function(c){if(this.visible=parseBool(bookConfig.QRCode)&&!isBelowIE9()){this.background=$("<div class='printBar'></div>"),this.contentBox=$("<div class='printBG'></div>"),this.showing=!1,this.width=windowWidth,this.height=windowHeight,this.contentWidth=Math.min(windowWidth-60,windowHeight-60,310)+20,this.contentHeight=Math.min(windowWidth-60,windowHeight-60,310)+20+40,this.mainColor="#888888",this.background.css({height:this.height+"px",bottom:"0px"}),this.contentBox.css({height:this.contentHeight+"px",width:this.contentWidth+"px",left:(this.width-this.contentWidth)/2+"px"}),this.contentBox.css({top:(this.height-this.contentHeight)/2+"px"}),$(c).append(this.background),$(c).append(this.contentBox),this.titleBox=$("<div></div>"),this.titleBox.css({width:this.contentWidth-6+"px",height:"20px",left:"3px",bottom:"10px",position:"absolute","line-height":"20px"}),this.titleBox.css({"vertical-align":"middle","text-align":"center",color:"#625715","text-shadow":"1px 1px 1px #ffffff"}),this.titleBox.css({background:"#edaa1d","border-radius":"10px",border:"#ffffff solid 1px"}),this.titleBox.html("<b>Scan QR code</b>"),this.scanBox=$("<div></div>"),this.scanBox.css({position:"absolute","border-radius":"5px"}),this.scanBox.css({width:this.contentWidth-80+"px",height:this.contentWidth-80+"px",background:"#ffffff",border:"#edaa1d solid 10px",left:"30px",top:"30px"}),this.contentBox.append(this.scanBox),this.closeButton=$("<div></div>"),this.closeButton.css({top:"0px",right:"0px",position:"absolute"}),this.closeButton.append($("<img src='"+uiBaseURL+"close.png'/>").asImageButton()),$(this.contentBox).append(this.closeButton),this.fillImage(),this.initEvent(),this.background.css({display:"none"}),this.contentBox.css({display:"none"})}},onResize:function(){this.visible&&(this.width=windowWidth,this.height=windowHeight,this.contentWidth=Math.min(windowWidth-60,windowHeight-60,310)+20,this.contentHeight=Math.min(windowWidth-60,windowHeight-60,310)+20+40,this.background.css({height:this.height+"px",bottom:"0px"}),this.contentBox.css({height:this.contentHeight+"px",width:this.contentWidth+"px",left:(this.width-this.contentWidth)/2+"px"}),this.contentBox.css({top:(this.height-this.contentHeight)/2+"px"}),this.titleBox.css({width:this.contentWidth-6+"px",height:"20px",left:"3px",bottom:"10px","line-height":"20px"}),this.scanBox.css({width:this.contentWidth-80+"px",height:this.contentWidth-80+"px",left:"30px",top:"30px"}),this.closeButton.css({top:"0px",right:"0px"}))},setPosition:function(f,h,g){this.visible&&(void 0==g&&(g=["left","top"]),$(this.background).css(g[0],f+"px"),$(this.background).css(g[1],h+"px"))},getShowStatu:function(){return this.showing},setShowStatu:function(c){this.showing=c},show:function(){this.visible&&($(this.background).css({display:"block"}),$(this.contentBox).fadeIn(500),this.showing=!0)},hide:function(){this.visible&&($(this.background).fadeOut(500),$(this.contentBox).fadeOut(500),this.showing=!1)},initEvent:function(){if(this.visible){var c=this;this.background.bind(_event._down,function(b){c.hide();c.showing=!1});this.closeButton.bind(_event._end,function(b){c.hide();c.showing=!1});this.closeButton.bind("mouseover",function(b){c.closeButton.css({cursor:"pointer"})})}},fillImage:function(){this.visible&&this.scanBox.qrcode({width:this.contentWidth-80,height:this.contentWidth-80,text:window.location.href})}});Class("QRButton",{create:function(c){if(this.visible=parseBool(bookConfig.QRCode)&&!isBelowIE9()){this.button=$("<div id='qrcode'></div>"),this.button.qrcode({width:50,height:50,text:window.location.href}),this.button.css({width:"50px",height:"50px","z-index":"999",right:"0px",position:"absolute"}),c.append(this.button),this.initEvent()}},show:function(){this.visible&&this.button.show()},hide:function(){this.visible&&this.button.hide()},initEvent:function(){if(this.visible){var c=this;this.button.bind(_event._enter,function(d){$(this).css({opacity:"1"})});this.button.bind(_event._leave,function(d){$(this).css({opacity:"0.5"})});this.button.bind(_event._down,function(b){b=isTouch?b.originalEvent.touches:[b];c.drapable=!0;c.mouseDownPointX=b[0].pageX;c.mouseDownPointY=b[0].pageY;c.codePositionX=$(this).offset().left;c.codePositionY=$(this).offset().top;return c.codeMove=!1});this.button.bind(_event._end,function(b){!1==c.codeMove&&(QRcode.getShowStatu()?QRcode.hide():QRcode.show(),hideMoreBar());$(this).css({opacity:"0.5"});return c.drapable=!1});this.button.bind(_event._move,function(f){f=isTouch?f.originalEvent.touches:[f];if(c.drapable){var b=f[0].pageX-c.mouseDownPointX;f=f[0].pageY-c.mouseDownPointY;$(this).css({left:c.codePositionX+b+"px",top:c.codePositionY+f+"px"});if(1<Math.abs(b)||1<Math.abs(f)){c.codeMove=!0}}return !1})}}});var HTML5AdSlider=Class({create:function(d,f){f&&f.data&&0!=f.data.length&&(this.parent=d,this.options=f,this.data=f.data,this.outerContainer=$("<div></div>"),this.container=$("<div class='adSlider'></div>"),this.dots=$("<div></div>"),this.getDefaultValue(),this.getImgs(),this.setDots(),this.setSLider(),this.initCss(),this.outerContainer.append(this.dots,this.container),this.parent.append(this.outerContainer),this.setImgs(),this.autoPlay())},getDefaultValue:function(){this.timer=null;this.imgs=[];this.wappers=[];this.currentIndex=1;this.dotWidth=this.dotHeight=14;this.dotsWidth=0;this.dotMargin=5;this.moving=!1;this.left=this.options.paddingLeft;this.top=this.options.paddingTop;this.width=$(this.parent).width()-this.left-this.options.paddingRight;this.height=$(this.parent).height()-this.top-this.options.paddingBottom},initCss:function(){this.outerContainer.css({position:"absolute",overflow:"hidden",left:this.left+"px",top:this.top+"px",width:this.width+"px",height:this.height,padding:"0",margin:"0"});this.container.css({position:"absolute",left:0,top:0,width:this.width*this.data.length+"px",height:this.height+"px",padding:"0",margin:"0"});this.dots.css({position:"absolute","text-align":"center",width:this.dotsWidth+"px","line-height":this.dotHeight+"px",height:this.dotHeight+"px",right:"20px",top:"20px","z-index":"2"})},resize:function(){this.width=this.parent.width()-this.options.paddingLeft-this.options.paddingRight;this.height=this.parent.height()-this.options.paddingTop-this.options.paddingBottom;this.container.css({width:this.width*this.data.length+"px",height:this.height,left:-(this.currentIndex-1)*this.width+"px",top:0});this.outerContainer.css({width:this.width,height:this.height,left:this.left+"px",top:this.top+"px"});this.dots.css({top:3*this.height/4+"px"});for(var d=0;d<this.imgs.length;d++){var f=this.imgs[d];this.setImgCss(f);f.css({position:"absolute",width:this.imgWidth+"px",height:this.imgHeight+"px",left:this.imgLeft+"px",top:this.imgTop+"px"});this.wappers[d].css({position:"absolute",left:this.width*d+"px",top:0,width:this.width+"px",height:this.height+"px",padding:"0",margin:"0",overflow:"hidden"})}},setDots:function(){for(var c=0;c<this.data.length;c++){this.dotsWidth+=this.dotWidth+this.dotMargin,this.dot=$("<div>"+(c+1)+"</div>"),this.dot.css({position:"absolute","border-radius":"50%",border:"1px solid #cccccc",cursor:"pointer","text-align":"center",width:this.dotWidth+"px","line-height":this.dotHeight+"px",height:this.dotHeight,"font-family":"Arial, serif, Tahoma","font-size":"60%","background-color":"#eeeeee",left:(this.dotWidth+this.dotMargin)*c+"px",top:0,"z-index":2}),this.initDotEvent(this.dot),this.dots.append(this.dot)}this.dots.css({width:this.dotsWidth})},setSLider:function(){for(var c=0;c<this.imgs.length;c++){this.a=c<this.data.length?this.data[c].url?$("<a href="+this.data[c].url+' target="view_window"></a>'):$("<a></a>"):this.data[0].url?$("<a href="+this.data[0].url+' target="view_window"></a>'):$("<a></a>"),this.a.css({position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px","z-index":"1",margin:"0px",padding:"0px"}),this.dataWrapper=$("<div class='AsSliderDataWrapper' wrapperNum="+(c+1)+"></div>"),this.dataWrapper.css({position:"absolute",left:this.width*c+"px",top:0,width:this.width+"px",height:this.height+"px",padding:"0",margin:"0",overflow:"hidden"}),this.dataWrapper.append(this.imgs[c],this.a),this.wappers.push(this.dataWrapper),this.container.append(this.dataWrapper)}},getImgs:function(){for(var c=0;c<this.data.length;c++){this.img=$("<img/>"),this.img.attr("src",this.data[c].src),this.imgs.push(this.img)}this.img=$("<img/>");this.img.attr("src",this.data[0].src);this.imgs.push(this.img)},setImgs:function(){for(var d=0;d<this.imgs.length;d++){var f=this.imgs[d];f.load(function(h,l,k){return function(){h.setImgCss(l);l.css({position:"absolute",width:h.imgWidth+"px",height:h.imgHeight+"px",left:h.imgLeft+"px",top:h.imgTop+"px"});h.wappers[k].css({position:"absolute",left:h.width*k+"px",top:0,width:h.width+"px",height:h.height+"px",padding:"0",margin:"0"})}}(this,f,d))}},setImgCss:function(c){this.imgWidth=c[0].naturalWidth;this.imgHeight=c[0].naturalHeight;this.pageRadio=this.width/this.height;this.naturalRadio=this.imgWidth/this.imgHeight;this.imgLeft=this.imgTop=0;this.naturalRadio>=this.pageRadio?(c=this.width/this.imgWidth,this.imgWidth=this.width,this.imgHeight*=c,this.imgTop=(this.height-this.imgHeight)/2,this.imgLeft=0):(c=this.height/this.imgHeight,this.imgHeight=this.height,this.imgWidth*=c,this.imgTop=0,this.imgLeft=(this.width-this.imgWidth)/2)},autoPlay:function(){this.timer=setInterval(function(){this.oneStep(this.currentIndex)}.bind(this),this.options.timeout)},oneStep:function(c){this.moving||(this.moving=!0,this.dots.find("div").css({background:"#eee",color:"#333"}),this.container.animate({left:-this.width*(c-1)+"px"},this.options.effectDuration,function(){this.currentIndex==this.data.length+1&&(this.currentIndex=1,this.container.css({left:0}));this.currentIndex+=1;this.moving=!1}.bind(this)),c==this.data.length+1?$(this.dots).find("div:nth-child(1)").css({background:"#333",color:"#fff"}):$(this.dots).find("div:nth-child("+c+")").css({background:"#333",color:"#fff"}))},initDotEvent:function(c){c.bind("click",function(){clearInterval(this.timer);this.timer=null;var b=parseInt(c.html());this.moving||(this.oneStep(b),this.currentIndex=b);this.autoPlay()}.bind(this));c.bind("mouseenter",function(){c.css({opacity:"0.5"})}.bind(this));c.bind("mouseleave",function(){c.css({opacity:"1"})}.bind(this))}});(function(P,O,N){function M(c){return document.createElementNS("http://www.w3.org/2000/svg",c)}function L(n){if(document.getElementsByTagName("body")[0].contains(n)){var m,l;m=n.parentNode;var k=n.style,b=P(n);l=100/m.offsetHeight;m=100/m.offsetWidth;k.width=b.width()*m+"%";k.height=b.height()*l+"%";k.left=n.offsetLeft*m+"%";k.top=n.offsetTop*l+"%"}}function K(){var c=M("svg");c.setAttribute("version","1.1");c.setAttribute("xmlns","http://www.w3.org/2000/svg");c.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");return c}function J(k,q){var p,n,m,l=[];m="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");q=q||m.length;if(k){for(p=0;p<k;p++){l[p]=m[0|Math.random()*q]}}else{for(l[8]=l[13]=l[18]=l[23]="-",l[14]="4",p=0;36>p;p++){l[p]||(n=0|16*Math.random(),l[p]=m[19==p?n&3|8:n])}}return l.join("")}var I,H=new (O({create:function(){var S,R,Q,y,x=this,v="#FF0000 #FF5555 #FF55AA #FF55FF #FFAA55 #FFAAAA #FFAAFF #FFFF55 #FFFFAA #FFFFFF #CC0000 #CC5555 #CC55AA #CC55FF #CCAA55 #CCAAAA #CCAAFF #CCFF55 #CCFFAA #CCFFFF #AA0000 #AA5555 #AA55AA #AA55FF #AAAA55 #AAAAAA #AAAAFF #AAFF55 #AAFFAA #AAFFFF #880000 #885555 #8855AA #8855FF #88AA55 #88AAAA #88AAFF #88FF55 #88FFAA #88FFFF #550000 #555555 #5555AA #5555FF #55AA55 #55AAAA #55AAFF #55FF55 #55FFAA #55FFFF #220000 #225555 #2255AA #2255FF #22AA55 #22AAAA #22AAFF #22FF55 #22FFAA #22FFFF #000000 #005555 #0055AA #0055FF #00AA55 #00AAAA #00AAFF #00FF55 #00FFAA #00FFFF".split(" "),u=document.createElement("table");S=x.container=document.createElement("a");var t=x.$container=P(S),s=document.createElement("input"),r=function(){s.value=s.style.backgroundColor=this.title.toUpperCase()},b=function(){t.trigger("colorSelected",[x.parseColorToRGBA(this.title,x.opacityValue)]);t.hide()};S.className="flipHtml5AnnotationColorSelectorWrap";u.setAttribute("border","1");S.style.display="none";S.setAttribute("href"," javaScript:void(0)".replace(/\s+/g,""));s.className="flipHtml5AnnotationColorSelectorMessage";s.value="#000000";s.setAttribute("disabled","true");S.appendChild(s);S.appendChild(x.createOpacityBar());S.appendChild(u);x.setOpacity(1);for(Q=0;7>Q;Q++){y=document.createElement("tr");for(R=0;10>R;R++){S=document.createElement("td"),S.className="flipHtml5AnnotationColorSelectorBlock",S.title=v[10*Q+R],S.style.backgroundColor=v[10*Q+R],P(S).on("mouseenter",r),P(S).on("click",b),y.appendChild(S)}u.appendChild(y)}t.on("click",function(c){c.stopPropagation()});P(document).on("click",function(){x.hide()})},parseColorToRGBA:function(h,n){var m,l,k;n=parseFloat(n);1<=n&&(n=1);0>=n&&(n=0);m=parseInt(h.substring(1,3),16);l=parseInt(h.substring(3,5),16);k=parseInt(h.substring(5,7),16);return"rgba("+m+","+l+","+k+","+n+")"},createOpacityBar:function(){var W,V,U,T=this,S=Math.floor,R=document.createElement("div"),Q=T.cursor=document.createElement("div"),y=T.span=document.createElement("span"),x=this.px="px",v=this.str="Opacity: ",t=this.length=145,b=P(document),Y=P(Q),X=T.$container;y.className="flipHtml5AnnotationOpacitySpan";R.className="flipHtml5AnnotationOpacity";Q.className="flipHtml5AnnotationOpacityCursor";R.appendChild(y);R.appendChild(Q);Y.on("mousedown touchstart",function(c){c.preventDefault();var f,h=T.opacityValue,g=Q.style,d=parseInt(g.left||0,10);W=d;V=d-(c.pageX?c.pageX:c.originalEvent.touches?c.originalEvent.touches[0].pageX:0);b.on("mousemove.flipHtml5AnnotationOpacity touchmove.flipHtml5AnnotationOpacity",function(k){c.preventDefault();if(f=k.pageX?k.pageX:k.originalEvent.touches?k.originalEvent.touches[0].pageX:0){U=S(V+f),0>U&&(U=0),U>t&&(U=t),W!==U&&(g.left=U+x,y.innerHTML=v+(U/t).toFixed(2),h=U/t),X.trigger("opacityChanged",h.toFixed(2))}});b.off("mouseup.opacityCursor touchend.opacityCursor").one("mouseup.opacityCursor touchend.opacityCursor",function(){T.opacityValue=h;b.off("mousemove.flipHtml5AnnotationOpacity touchmove.flipHtml5AnnotationOpacity")})});return R},setOpacity:function(c){if(void 0===c||1<c||isNaN(c)){c=1}0>c&&(c=0);this.cursor.style.left=c*this.length+this.px;this.span.innerHTML=this.str+c;this.opacityValue=c},on:function(d,f){this.$container.off(d).on(d,f);return this},show:function(){this.$container.show();return this},hide:function(){this.$container.hide();return this}})),G=O({create:function(h){var g=0,b=h[g];this.container=document.createElement("div");this.$container=P(this.container);this.tools={};for(this.container.className="fliphtml5AnnotationLineToolsContainer";b;){this.$container.append(this.createButtonByName(b)),g++,b=h[g]}P(document).ready(function(){document.getElementsByTagName("body")[0].appendChild(this.container)}.bind(this));this.oneBindEvent()},createButtonByName:function(g){var l=this,k,h;switch(g){case"fill":this.tools.fill={type:"color",container:k=l.createColorButton("fill",!1)};break;case"stroke":this.tools.stroke={type:"color",container:k=l.createColorButton("stroke",!1)};break;case"stroke-dasharray":k=["Straight","Dotted","Dashed","Dotted & Dashed"];h=["1","2","3","4"];this.tools.strokeDasharray={type:"select",value:h,container:k=l.createSelect(k,h,"stroke-dasharray",!1,0)};break;case"stroke-width":k="Thinnest Thinner Thin MediumThin Medium MediumStrong Strong Stronger Strongest".split(" ");h="1 2 3 4 5 7 9 12 16".split(" ");this.tools.strokeWidth={type:"select",value:h,container:k=l.createSelect(k,h,"stroke-width",!1,1)};break;case"headArrowType":k="None Long_triangle Long_triangle_inverse Short_triangle Short_triangle_inverse Angle_brackets Angle_brackets_inverse Ellipse Rect Right_bank Line Left_bank".split(" ");h="0 1 2 3 4 5 6 7 8 9 10 11".split(" ");this.tools.headArrowType={type:"select",value:h,container:k=l.createSelect(k,h,g,!1,6)};break;case"endArrowType":k="None Long_triangle Long_triangle_inverse Short_triangle Short_triangle_inverse Angle_brackets Angle_brackets_inverse Ellipse Rect Right_bank Line Left_bank".split(" ");h="0 1 2 3 4 5 6 7 8 9 10 11".split(" ");this.tools.endArrowType={type:"select",value:h,container:k=l.createSelect(k,h,g,!1,11)};break;default:k=l.createButton(g),l.addClickEvent(k,function(){l.exec(g)})}return k},createButton:function(f){var h=document.createElement("a"),g=document.createElement("div");h.href=" javascript:void(0);".replace(/\s+/g,"");g.className="flipHtml5AnnotationButtonImage flipHtml5AnnotationImage-"+f;g.title=f;h.appendChild(g);return h},addClickEvent:function(d,f){d.className="flipHtml5AnnotationClickButton";d.onclick=f},exec:function(d,f){if(this.object){switch(d){case"stroke":this.object.setStroke(f);break;case"stroke-dasharray":this.object.setDashArray(f);break;case"stroke-width":this.object.setStrokeWidth(f);break;case"fill":this.object.setFill(f);break;case"delete":this.object.destroy();I.save();break;case"headArrowType":case"endArrowType":this.object.setArrowType(d,f)}}},oneBindEvent:function(){var b=this;P(document).on("keydown.flipHtml5AnnotationDelete",function(c){var f=c.keyCode;c.altKey||c.ctrlKey||c.shiftKey||(b.editing&&f===KEY_CODE_DELETE&&b.currentEditor&&(this.object.destroy(),I.save()),b.currentEditor&&f===KEY_CODE_LEFT&&f===KEY_CODE_RIGHT&&f===KEY_CODE_UP&&f===KEY_CODE_DOWN&&c.stopPropagation())})},createColorButton:function(k,q){var p=this,n,m=this.createButton(k),l=m.getElementsByTagName("div")[0];q&&(n=document.createElement("div"),n.className="flipHtml5AnnotationColorBar",m.appendChild(n));p.addClickEvent(m,function(b){b.stopPropagation();H.container.style.left=this.offsetLeft+"px";H.container.style.top=this.offsetTop+20+"px";H.show();H.on("colorSelected",function(f,d){n?n.style.backgroundColor=d:l.style.backgroundColor=d;p.exec(k,d)});H.setOpacity(p.object.getOpacity(k));H.on("opacityChanged",function(g,d){p.object.setOpacity(k,d)})});return m},createSelect:function(x,v,u,t,s){var r=document.createElement("select"),q=0,p=this,n;r.className="flipHtml5AnnotationSelect flipHtml5Annotation-"+u;for(t&&(r.style[t]=v[s]);x[q];){n=document.createElement("option"),n.className="flipHtml5AnnotationOption-"+u+" flipHtml5AnnotationOption-"+v[q],n.innerHTML=x[q],t&&(n.style[t]=v[q]),q===s&&n.setAttribute("selected",!0),r.appendChild(n),q++}r.onchange=function(){p.exec(u,v[this.selectedIndex]);t&&(this.style[t]=v[this.selectedIndex])};return r},active:function(f){if(f){var h,g;this.object=f;f.toolbar.$container.append(H.container);for(h in this.tools){this.tools.hasOwnProperty(h)&&(g=this.tools[h],"color"===g.type&&(g.container.getElementsByTagName("div")[0].style.backgroundColor=f[h]),"select"===g.type&&(g.container.selectedIndex=g.value.indexOf(f[h].toString())))}}this.container.style.display="block"},inactive:function(){this.container.style.display="none";this.object=null}}),F=new G("stroke-width stroke-dasharray headArrowType endArrowType stroke delete".split(" ")),E=new G(["stroke-width","stroke-dasharray","stroke","delete"]),B=new G(["stroke-width","stroke-dasharray","stroke","fill","delete"]),D=new (O({create:function(){var l,k=1,h=this.sizeWrap=document.createElement("div"),b=this.sizePointArray=[];for(h.className="flipHtml5AnnotationSizeWrap";9>k;){l=document.createElement("div"),l.className="flipHtml5SizePoint flipHtml5SizePoint"+k,h.appendChild(l),b.push(l),k++}this.$container=P(h);this.container=h},addEvents:function(l){var g=this,d=g.sizeWrap,b=g.sizePointArray;g.sizeWrapStyle=d.style;l&&(g.$context=l.add(B.$container).add(E.$container).add(F.$container));g.northResize(b[0]).westResize(b[0]);g.northResize(b[1]);g.eastResize(b[2]).northResize(b[2]);g.eastResize(b[3]);g.eastResize(b[4]).southResize(b[4]);g.southResize(b[5]);g.southResize(b[6]).westResize(b[6]);g.westResize(b[7]);P(d).on("pointerdown",function(c){c.stopPropagation()});P(d).off("mousedown touchstart").on("mousedown touchstart",function(U){U.preventDefault();var T,S,R,Q,y,x,V,h=Math.floor,f=g.sizeWrapStyle,Z=d.offsetLeft,X=d.offsetTop,Y=U.pageX||U.originalEvent.touches[0].pageX,W=U.pageY||U.originalEvent.touches[0].pageY;T=g.$context;T.off("mousemove.flipHtml5SizeWrap touchmove.flipHtml5SizeWrap").on("mousemove.flipHtml5SizeWrap touchmove.flipHtml5SizeWrap",function(c){c.preventDefault();c.stopPropagation();S=c.pageX?c.pageX:c.originalEvent.touches?c.originalEvent.touches[0].pageX:0;R=c.pageY?c.pageY:c.originalEvent.touches?c.originalEvent.touches[0].pageY:0;if(S&&(V=h(Z-(Y-S)/N.scale()),y!==V&&(f.left=V+"px",y=V,g.onResize))){g.onResize(void 0,void 0,V,void 0)}if(R&&(x=h(X-(W-R)/N.scale()),Q!==x&&(f.top=x+"px",Q=x,g.onResize))){g.onResize(void 0,void 0,void 0,x)}});g.$container.one("mouseup touchend",function(c){T.off("mousemove.flipHtml5SizeWrap touchmove.flipHtml5SizeWrap");L(d);if(g.onResizeEnd){g.onResizeEnd()}})})},northResize:function(d){var b=this;P(d).off("mousedown.north touchstart.north").on("mousedown.north touchstart.north",function(T){T.preventDefault();T.stopPropagation();var S,R,Q,y,x=Math.floor,v=b.sizeWrap,t=v.offsetTop,U=b.sizeWrapStyle,g=b.$context,f=v.offsetHeight||11,W=t+f-11,V=T.pageY||T.orginalEvent.touches[0].pageY;R=f;b.$container.one("mouseup touchend",function(){g.off("mousemove.fliphtml5AnnotationResize touchmove.fliphtml5AnnotationResize");L(v);if(b.onResizeEnd){b.onResizeEnd()}});g.on("mousemove.fliphtml5AnnotationResize touchmove.fliphtml5AnnotationResize",function(c){c.preventDefault();c.pageY?S=c.pageY:c.originalEvent.touches&&(S=c.originalEvent.touches[0].pageY);if(S&&(Q=x(R+(V-S)/N.scale()),f!==Q&&(y=t+(R-Q),11>Q&&(Q=11),y>W&&(y=W),U.top=y+"px",U.height=Q+"px",f=Q,b.onResize))){b.onResize(void 0,Q,void 0,y)}})});return this},westResize:function(d){var b=this;P(d).off("mousedown.west touchstart.west").on("mousedown.west touchstart.west",function(T){T.preventDefault();T.stopPropagation();var S,R,Q,y,x=Math.floor,v=b.$context,t=b.sizeWrap,U=t.offsetLeft,g=b.sizeWrapStyle,f=t.offsetWidth||11,W=U+f-11,V=T.pageX||T.originalEvent.touches[0].pageX;Q=f;b.$container.one("mouseup touchend",function(){v.off("mousemove.fliphtml5AnnotationResize touchmove.fliphtml5AnnotationResize");L(t);if(b.onResizeEnd){b.onResizeEnd()}});v.on("mousemove.fliphtml5AnnotationResize touchmove.fliphtml5AnnotationResize",function(c){c.preventDefault();c.pageX?S=c.pageX:c.originalEvent.touches&&(S=c.originalEvent.touches[0].pageX);if(S&&(R=-x((S-V)/N.scale()-Q),f!==R&&(y=U+(Q-R),11>R&&(R=11),y>W&&(y=W),g.left=y+"px",g.width=R+"px",f=R,b.onResize))){b.onResize(R,void 0,y,void 0)}})});return this},eastResize:function(d){var b=this;P(d).off("mousedown.east touchstart.east").on("mousedown.east touchstart.east",function(y){y.preventDefault();y.stopPropagation();var x,v,u,t=Math.floor,s=b.$context,r=b.sizeWrap,g=b.sizeWrapStyle,Q=r.offsetWidth||11,f=y.pageX||y.originalEvent.touches[0].pageX;b.$container.one("mouseup touchend",function(){s.off("mousemove.fliphtml5AnnotationResize touchmove.fliphtml5AnnotationResize");L(r);if(b.onResizeEnd){b.onResizeEnd()}});s.on("mousemove.fliphtml5AnnotationResize touchmove.fliphtml5AnnotationResize",function(c){c.preventDefault();c.pageX?x=c.pageX:c.originalEvent.touches&&(x=c.originalEvent.touches[0].pageX);if(x&&(v=t(Q-(f-x)/N.scale()),u!==v&&(11>v&&(v=11),g.width=v+"px",u=v,b.onResize))){b.onResize(v,void 0,void 0,void 0)}})});return this},southResize:function(d){var b=this;P(d).off("mousedown.south touchstart.south").on("mousedown.south touchstart.south",function(y){y.preventDefault();y.stopPropagation();var x,v,u,t=Math.floor,s=b.$context,r=b.sizeWrap,g=b.sizeWrapStyle,Q=r.offsetHeight,f=y.pageY||y.originalEvent.touches[0].pageY;b.$container.one("mouseup touchend",function(){s.off("mousemove.fliphtml5AnnotationResize touchmove.fliphtml5AnnotationResize");L(r);if(b.onResizeEnd){b.onResizeEnd()}});s.on("mousemove.fliphtml5AnnotationResize touchmove.fliphtml5AnnotationResize",function(c){c.preventDefault();c.pageY?x=c.pageY:c.originalEvent.touches&&(x=c.originalEvent.touches[0].pageY);if(x&&(v=t(Q-(f-x)/N.scale()),u!==v&&(11>v&&(v=11),g.height=v+"px",u=v,b.onResize))){b.onResize(void 0,v,void 0,void 0)}})});return this},onResizeEnd:function(){},onResize:function(g,l,k,h){},active:function(){this.container.style.display="block";this.$container.on("click.sizewrap mousedown.sizewrap mouseup.sizewrap",function(c){c.stopPropagation()})},inactive:function(){this.$container.off("click.sizewrap mousedown.sizewrap mouseup.sizewrap");this.container.style.display="none"}})),C=O({create:function(l,k){var h=this.svg=K(),b=this.container=document.createElement("div");l=l||[];this.$parent=k;h.style.position="absolute";h.style.left="0";h.style.top="0";h.style.width="100%";h.style.height="100%";this.id=J(8,10);this.$container=P(b);b.className="flipHtml5SVGContainer";b.appendChild(h);k&&(this._width=l[0]||0,this._height=l[1]||0,this._left=l[2]||0,this._top=l[3]||0);b.style.width=l[0]||0;b.style.height=l[1]||0;b.style.left=l[2]||0;b.style.top=l[3]||0;k&&(this.prevWidth=parseFloat(l[0])*k[0].offsetWidth/100,this.prevHeight=parseFloat(l[1])*k[0].offsetHeight/100,this.prevLeft=parseFloat(l[2])*k[0].offsetWidth/100,this.prevTop=parseFloat(l[3])*k[0].offsetHeight/100);this.fill=l[4]||"transparent";this.fillOpacity=l[5]||1;this.stroke=l[6]||"rgba(0, 0, 0, 1)";this.strokeDasharray=l[7]||"1";this.strokeOpacity=l[8]||"1";this.strokeWidth=l[9]||"2";this.createGraphics(l);this.setStrokeWidth(this.strokeWidth);this.setFill(this.fill);this.setFillOpacity(this.fillOpacity);this.setStroke(this.stroke);this.setDashArray(this.strokeDasharray);this.setStrokeOpacity(this.strokeOpacity);this.actived=!1;this.$container.on(_event._down,function(c){c.stopPropagation();this.actived||(this.active(this.$parent),this.actived=!0)}.bind(this));if(k){this.$container.on("mousedown mouseup",function(c){c.stopPropagation()})}},active:function(d){var f=this;I.activedShape&&I.activedShape.inactive();I.activedShape=this;f.$container.after(D.$container);f.position();d&&(f.$parent=d);D.addEvents(f.$parent);D.active();f.toolbar.active(f);if(d){d.off("mousedown.flipHtml5Graphic"+f.id+" touchstart.flipHtml5Graphic"+f.id).on("mousedown.flipHtml5Graphic"+f.id+" touchstart.flipHtml5Graphic"+f.id,function(b){f.actived&&b.target!==f.container&&b.target!==f.toolbar.container&&b.target!==D.container&&(b.stopPropagation(),d.off("mousedown.flipHtml5Graphic"+f.id+" touchstart.flipHtml5Graphic"+f.id),f.inactive())})}this.actived=!0},_parsePresentValue:function(){L(this.container);var c=this.container.style;this._width=c.width;this._height=c.height;this._left=c.left;this._top=c.top},inactive:function(){I&&(I.save(),I.activedShape=null);this.toolbar.inactive();D.inactive();this.actived=!1},position:function(){var k=this,q=k.px,p=k.container,n=k.$container,m=D.container.style,l=k.toolbar.container.style;m.width=p.offsetWidth+8+q;m.height=p.offsetHeight+8+q;m.left=p.offsetLeft-3+q;m.top=p.offsetTop-4+q;l.left=n.offset().left-8+q;l.top=n.offset().top-52+q;D.onResize=function(h,f,c,b){k.css(h-8,f-8,c+3,b+4);l.left=n.offset().left-8+q;l.top=n.offset().top-52+q};D.onResizeEnd=function(){k._parsePresentValue();I.save()}},setFill:function(c){this.setStyle("fill",c);this.fill=c},setFillOpacity:function(c){this.setStyle("fill",this.fill.replace(/,[0-9]+(\.[0-9]*)?\)/,","+c+")"));this.fillOpacity=parseFloat(c)},setStroke:function(c){this.setStyle("stroke",c);this.stroke=c},setStrokeOpacity:function(c){this.setStyle("stroke",this.stroke.replace(/,[0-9]+(\.[0-9]*)?\)/,","+c+")"));this.strokeOpacity=parseFloat(c)},setOpacity:function(d,f){"fill"===d&&this.setFillOpacity(f);"stroke"===d&&this.setStrokeOpacity(f)},getOpacity:function(c){return"fill"===c?this.fillOpacity:this.strokeOpacity},setStrokeWidth:function(c){this.setStyle("stroke-width",c);this.strokeWidth=parseInt(c,10);this.setDashArray(this.strokeDasharray);this.shapeCss(this.prevWidth,this.prevHeight)},setDashArray:function(c){this.strokeDasharray=c;c="1"===c?"0":"2"===c?"1,"+2*this.strokeWidth:"3"===c?"1,"+2*this.strokeWidth+",1":4*this.strokeWidth+","+2*this.strokeWidth+",1,"+2*this.strokeWidth;this.setStyle("stroke-dasharray",c)},shapeCss:function(d,f){},css:function(h,n,m,l){var k=this.container.style;h=Math.floor(h);m=Math.floor(m);n=Math.floor(n);l=Math.floor(l);h&&(this.prevWidth=h,h<this.minWidth&&(h=this.minWidth),k.width=h+"px",this.shapeCss(h,null));n&&(this.prevHeight=n,n<this.minHeight&&(n=this.minHeight),k.height=n+"px",this.shapeCss(null,n));m&&(k.left=m+"px",this.prevLeft=m);this.prevWidth<this.minWidth&&(k.left=this.prevLeft-4-(this.minWidth-this.prevWidth-8)/2+"px");l&&(k.top=l+"px",this.prevTop=l);this.prevHeight<this.minHeight&&(k.top=this.prevTop-3-(this.minHeight-this.prevHeight-6)/2+"px")},destroy:function(){this.inactive();this.$container.remove();I.removeGraphic(this)}}),G=O({name:"line",toolbar:E,createGraphics:function(d){var f=M("line");f.setAttribute("stroke-linecap","round");f.setAttribute("stroke-linejoin","round");this.italic=parseInt(d[10]||1,10);this.svg.appendChild(f);this.line=f;this.px="px"},setStyle:function(d,f){(f||0===f)&&this.line.setAttribute(d,f);return this},setStrokeWidth:function(c){c=parseInt(c,10);this._super(c);this.minHeight=this.minWidth=c},draw:function(U,T,S,R,Q,y,x){var v=this.strokeWidth/2,u=this.strokeWidth,t,s=T-U,r=R-S;T>U?(t=s+u,Q=U-Q-v):(t=-s+u,Q=T-Q-v);R>S?(U=r+u,y=S-y-v):(U=-r+u,y=R-y-v);0<s&&0<r&&(this.italic=1);0>s&&0<r&&(this.italic=2);0>s&&0>r&&(this.italic=3);0<s&&0>r&&(this.italic=4);this.css(t/x,U/x,Q/x,y/x)},shapeCss:function(g,l){var k,h;1===this.italic||3===this.italic?(k="x1",h="x2"):(k="x2",h="x1");this.setStyle(k,this.strokeWidth/2);g&&this.setStyle(h,g-this.strokeWidth/2);this.setStyle("y1",this.strokeWidth/2);l&&this.setStyle("y2",l-this.strokeWidth/2)}}).extend(C),z=O({name:"ellipse",toolbar:B,createGraphics:function(c){this.ellipse=M("ellipse");this.svg.appendChild(this.ellipse);this.px="px";this.ellipse.setAttribute("stroke-linecap","round");this.ellipse.setAttribute("stroke-linejoin","round");this.ellipse.setAttribute("cx","50%");this.ellipse.setAttribute("cy","50%");this.setFillOpacity(c[5]||"0.5")},setStyle:function(d,f){this.ellipse.setAttribute(d,f);return this},setStrokeWidth:function(c){c=parseInt(c,10);this._super(c);this.minWidth=2*c;this.minHeight=2*c},draw:function(Q,y,x,v,u,t,s){var r=this.strokeWidth/2,q=this.strokeWidth,p;y>Q?(p=y-Q+q,u=Q-u-r):(p=Q-y+q,u=y-u-r);v>x?(Q=v-x+q,t=x-t-r):(Q=x-v+q,t=v-t-r);this.css(p/s,Q/s,u/s,t/s)},shapeCss:function(d,f){d&&this.setStyle("rx",d/2-this.strokeWidth/2);f&&this.setStyle("ry",f/2-this.strokeWidth/2)}}).extend(C),C=O({name:"rect",toolbar:B,createGraphics:function(){this.rect=M("rect");this.rect.setAttribute("stroke-linecap","round");this.rect.setAttribute("stroke-linejoin","round");this.svg.appendChild(this.rect);this.px="px"},setStrokeWidth:function(c){c=parseInt(c,10);this._super(c);this.setStyle("x",c/2);this.setStyle("y",c/2);this.minWidth=2*c;this.minHeight=2*c},setStyle:function(d,f){this.rect.setAttribute(d,f);return this},draw:function(Q,y,x,v,u,t,s){var r=this.strokeWidth/2,q=this.strokeWidth,p;y>Q?(p=y-Q+q,u=Q-u-r):(p=Q-y+q,u=y-u-r);v>x?(Q=v-x+q,t=x-t-r):(Q=x-v+q,t=v-t-r);this.css(p/s,Q/s,u/s,t/s)},shapeCss:function(d,f){d&&this.setStyle("width",d-this.strokeWidth);f&&this.setStyle("height",f-this.strokeWidth)}}).extend(C),A=O({create:function(u,s,q){var h=this.svg=K(),f=this.path=M("path"),b=this.line=M("line"),t=this.rect=M("rect"),r=this.ellipse=M("ellipse");h.style.position="absolute";b.style.display="none";t.style.display="none";r.style.display="none";h.appendChild(t);h.appendChild(f);h.appendChild(b);h.appendChild(r);this.container=h;this.$container=P(h);r.setAttribute("cx","50%");r.setAttribute("cy","50%");this.setStyle("stroke-linecap","round");this.setStyle("stroke-linejoin","round");this.type=0;this.inverse="true"==s;this.position=u;this.currentType="path";this.setCurrentType(q[10]||"path");this.backgroundTransparent=!1;this.deg=q[11]||0;this.italic=parseInt(q[12]||1,10)},setStyle:function(d,f){this.path.setAttribute(d,f);this.line.setAttribute(d,f);this.ellipse.setAttribute(d,f);this.rect.setAttribute(d,f)},setStrokeWidth:function(d){var f=d=parseInt(d,10);this.lineStrokeWidth=d;this.strokeWidth=f;this.setType(this.type);this.setPosition(this.deg,this.italic);this.setStyle("stroke-width",f)},getDegByItalic:function(f,h){var g=this.inverse?180:0;switch(h){case 1:f+=g;break;case 2:f=180-f+g;break;case 3:f=180+f+g;break;case 4:f=360-f+g}return f},setPosition:function(x,v){var u=this.svg.style,t=(-this.width-this.lineStrokeWidth/2)/2+"px",s=(-this.height-this.lineStrokeWidth/2)/2+"px";this.italic=v;this.deg=x;for(var r="rotate("+this.getDegByItalic(x,v)+"deg)",q=0,p=this.svg.style,n=["transform","webkitTransform","mozTransform","msTransform"];n[q];){p[n[q]]=r,q++}this.position&&(v=(v+2)%4,0===v&&(v=4));switch(v){case 1:u.left="100%";u.top="100%";u.right="auto";u.bottom="auto";u.margin=s+" auto auto "+t;break;case 2:u.left="auto";u.top="100%";u.right="100%";u.bottom="auto";u.margin=s+" "+t+" auto auto";break;case 3:u.left="auto";u.top="auto";u.right="100%";u.bottom="100%";u.margin="auto "+t+" "+s+" auto";break;case 4:u.left="100%",u.top="auto",u.right="auto",u.bottom="100%",u.margin="auto auto "+s+" "+t}},setCurrentType:function(f){var h,g;f!==this.currentType&&(h=this.svg.getElementsByTagName(f)[0],g=this.svg.getElementsByTagName(this.currentType)[0],this.currentType=f,g.style.display="none",h.style.display="block")},setType:function(h){this.type=parseInt(h,10);this.inverse=!1;var n,m;h=this.strokeWidth;var l=this.path,k=h/2;switch(this.type){case 0:this.setCurrentType("path");n=m=0;break;case 2:this.inverse=!0;case 1:this.setCurrentType("path");m=20+5*h;n=30+4*h;this.backgroundTransparent=!1;l.setAttribute("d","M "+k+" "+0.3*n+" L "+(m-h/2)+" "+0.5*n+" L "+k+" "+0.7*n+" Z");break;case 4:this.inverse=!0;case 3:this.setCurrentType("path");this.backgroundTransparent=!1;m=5+4*h;n=20+5*h;l.setAttribute("d","M "+k+" "+0.2*n+" L "+(m-k)+" "+0.5*n+" L "+k+" "+0.8*n+" Z");break;case 6:this.inverse=!0;case 5:this.setCurrentType("path");this.backgroundTransparent=!0;m=10+4*h;n=30+3*h;this.path.setAttribute("d","M "+k+" "+0.2*n+" L "+(m-h)/2+" "+0.5*n+" L "+k+" "+0.8*n);break;case 7:this.setCurrentType("ellipse");this.backgroundTransparent=!1;m=n=10+4*h;this.ellipse.setAttribute("rx",m/2-k);this.ellipse.setAttribute("ry",n/2-k);break;case 8:this.setCurrentType("rect");this.backgroundTransparent=!1;m=n=10+4*h;this.rect.setAttribute("x",k);this.rect.setAttribute("y",k);this.rect.setAttribute("width",m-h);this.rect.setAttribute("height",n-h);break;case 9:this.setCurrentType("line");this.backgroundTransparent=!0;m=n=10+4*h;this.line.setAttribute("x1",k);this.line.setAttribute("y1",k);this.line.setAttribute("x2",m-k);this.line.setAttribute("y2",n-k);break;case 10:this.setCurrentType("line");this.backgroundTransparent=!0;m=n=10+4*h;this.line.setAttribute("x1",m/2-k);this.line.setAttribute("y1",k);this.line.setAttribute("x2",m/2-k);this.line.setAttribute("y1",n-k);break;case 11:this.setCurrentType("line"),this.backgroundTransparent=!0,m=n=10+4*h,this.line.setAttribute("x1",k),this.line.setAttribute("y2",k),this.line.setAttribute("x2",m-k),this.line.setAttribute("y1",n-k)}this.svg.setAttribute("width",m);this.svg.setAttribute("height",n);this.width=m;this.height=n;this.setColor(this.color);this.setPosition(this.deg,this.italic)},setColor:function(c){this.color=c;this.setStyle("stroke",c);this.backgroundTransparent?this.setStyle("fill","transparent"):this.setStyle("fill",c)}}),w=O({name:"arrow",toolbar:F,createGraphics:function(c){this._super(c);this.italic=parseInt(c[12]||1,10);this.headArrow=new A(!1,"false",c);this.endArrow=new A(!0,"false",c);this.deg=parseInt(c[11],10);this.headArrow.setPosition(this.deg,this.italic);this.endArrow.setPosition(this.deg,this.italic);this.container.appendChild(this.headArrow.container);this.container.appendChild(this.endArrow.container);this.setStrokeWidth(c[9]||"1");this.setStroke(c[6]||"rgba(0, 0, 0, 1)");this.setArrowType("endArrowType",c[14]||10);this.setArrowType("headArrowType",c[13]||5)},setArrowType:function(f,h){var g;"endArrowType"===f?(g=this.endArrow,this.endArrowType=h):(g=this.headArrow,this.headArrowType=h);g.setType(h);g.setStrokeWidth(this.strokeWidth)},setStroke:function(c){this._super(c);this.headArrow.setColor(c);this.endArrow.setColor(c)},setStrokeWidth:function(c){c=parseInt(c,10);this._super(c);this.headArrow.setStrokeWidth(c);this.endArrow.setStrokeWidth(c)},css:function(g,l,k,h){this._super(g,l,k,h);g=180*Math.atan(this.prevHeight/this.prevWidth)/Math.PI;this.prevHeight<=this.minHeight&&(g=0);this.prevWidth<=this.minWidth&&(g=90);this.deg=g;this.headArrow.setPosition(g,this.italic);this.endArrow.setPosition(g,this.italic)}}).extend(G),o={shapes:{ellipse:z,rect:C,line:G,arrow:w},getShape:function(f,h,g){return this.shapes[f]?new this.shapes[f](h,g):null}};O=O({create:function(){this.containerArray={};this.graphics={};this.activedShape=null},bindOnCreated:function(d,f){this.onCreated=[d,f]},addEvent:function(d,n,m){var l=this,k=o.getShape(m);this.containers=this.containers?this.containers.add(n):n;n.css("cursor","crosshair");n.one("contextmenu.draw",function(c){c.preventDefault();return !1});n.off("mousedown.draw touchstart.draw").one("mousedown.draw touchstart.draw",function(x){x.stopPropagation();x.preventDefault();var v,u,t,h,g,c=x.button,b=n.offset().top,y=n.offset().left;if(!document.implementation.hasFeature("MouseEvents","2.0")){switch(event.button){case 0:case 1:case 3:case 5:case 7:c=0;break;case 2:case 6:c=2;break;case 4:c=1}}c?(k._parsePresentValue(),l.delEvents(),l.popUpButton()):(x.pageX?(v=x.pageX,u=x.pageY):x.originalEvent.touches&&(g=!0,v=x.originalEvent.touches[0].pageX,u=x.originalEvent.touches[0].pageY),n.append(k.$container),l.groupGraphicByIndex(d,k),k.draw(v,v,u,u,y,b),n.off("mousemove.draw touchmove.draw").on("mousemove.draw touchmove.draw",function(f){f.preventDefault();f.stopPropagation();g?(t=f.originalEvent.touches[0].pageX,h=f.originalEvent.touches[0].pageY):(t=f.pageX,h=f.pageY);k.draw(v,t,u,h,y,b,N.scale())}),n.off("mouseup.draw touchend.draw").one("mouseup.draw touchend.draw",function(){k._parsePresentValue();l.delEvents();l.popUpButton();k.active(n);k.$container.on("mousedown mouseup",function(f){f.stopPropagation()});l.save()}))})},groupGraphicByIndex:function(d,f){this.graphics[d]||(this.graphics[d]=[]);this.graphics[d].push(f)},removeGraphicByIndex:function(h){var n,m=this.graphics,l,k;for(n in m){if(m.hasOwnProperty(n)&&n==h){k=m[n];for(l=0;k[l];){k[l].$container.remove(),l++}m[n]=[]}}},removeGraphic:function(h){var n,m,l,k=this.graphics;for(m in k){if(k.hasOwnProperty(m)&&k[m]){for(n=0,l=k[m];l[n];){l[n]===h&&l.splice(n,1),n++}}}},popUpButton:function(){this.onCreated&&this.onCreated[1].call(this.onCreated[0])},delEvents:function(){this.containers&&this.containers.off("mousedown.draw touchstart.draw contextmenu.draw mousemove.draw touchmove.draw").css("cursor","auto");this.containers=null},getPageContent:function(m){for(var u,t=0,s,r,q,p,n=this.graphics[m];n&&(u=n[t]);){switch(u.name){case"line":m=[u._width,u._height,u._left,u._top,u.fill,u.fillOpacity,u.stroke,u.strokeDasharray,u.strokeOpacity,u.strokeWidth,u.italic];s||(s=[]);s.push(m.join("$$"));break;case"arrow":m=[u._width,u._height,u._left,u._top,u.fill,u.fillOpacity,u.stroke,u.strokeDasharray,u.strokeOpacity,u.strokeWidth,u.currentType,u.deg,u.italic,u.headArrowType,u.endArrowType];r||(r=[]);r.push(m.join("$$"));break;case"rect":m=[u._width,u._height,u._left,u._top,u.fill,u.fillOpacity,u.stroke,u.strokeDasharray,u.strokeOpacity,u.strokeWidth];q||(q=[]);q.push(m.join("$$"));break;case"ellipse":m=[u._width,u._height,u._left,u._top,u.fill,u.fillOpacity,u.stroke,u.strokeDasharray,u.strokeOpacity,u.strokeWidth],p||(p=[]),p.push(m.join("$$"))}t++}m=[s&&s.join("@@"),r&&r.join("@@"),q&&q.join("@@"),p&&p.join("@@")];return m.join("##")},saveByIndex:function(g){var l=new Date,k=this.getPageContent(g)||"";try{window.localStorage?(window.localStorage.removeItem(window.location.href.replace(window.location.hash,"")+"flipHtml5Shapes"+g),""!==k&&"######"!==k&&window.localStorage.setItem(window.location.href.replace(window.location.hash,"")+"flipHtml5Shapes"+g,k)):(""===k||"######"===k?l=new Date("01 Jan 1970 00:00:01"):(l=new Date,l.setDate(l.getDate()+this.expires)),document.cookie=window.location.href.replace(window.location.hash,"")+"flipHtml5Shapes"+g+"="+k+";expires="+l.toUTCString()+";")}catch(h){}},save:function(){var d,f=N.getCurrentPages();for(d=0;d<f.length;d++){this.containerArray[N.getBookType()][f[d]]&&this.saveByIndex(f[d])}},restoreByIndex:function(U,T){var S,R;this.removeGraphicByIndex(U);try{if(window.localStorage?S=window.localStorage.getItem(window.location.href.replace(window.location.hash,"")+"flipHtml5Shapes"+U)||"":(R=RegExp("(?:(?:^|.*;\\s*)"+window.location.href.replace(window.location.hash,"")+"flipHtml5Shapes"+U+"\\s*\\=\\s*([^;]*).*$)|^.*$"),S=(document.cookie||"").replace(R,"$1")),S&&0!==S.length){var Q,y;R=0;for(var x=S.split("##"),v=x[0].split("@@"),u=x[1].split("@@"),t=x[2].split("@@"),s=x[3].split("@@");Q=v[R++];){y=o.getShape("line",Q.split("$$"),T),T.append(y.container),this.groupGraphicByIndex(U,y)}for(R=0;Q=u[R++];){y=o.getShape("arrow",Q.split("$$"),T),T.append(y.container),this.groupGraphicByIndex(U,y)}for(R=0;Q=t[R++];){y=o.getShape("rect",Q.split("$$"),T),T.append(y.container),this.groupGraphicByIndex(U,y)}for(R=0;Q=s[R++];){y=o.getShape("ellipse",Q.split("$$"),T),T.append(y.container),this.groupGraphicByIndex(U,y)}}}catch(r){throw r}},restore:function(d,l,k){var h=this.containerArray;D.inactive();B.inactive();E.inactive();F.inactive();h[d]||(h[d]={});h[d][l]=k;d===N.getBookType()&&this.restoreByIndex(l,k)},setContainers:function(f,h,g){document.createElementNS&&this.restore(f,h,g)},addEvents:function(d){var n,m=-1,l=N.getCurrentPages(),k=this.containerArray[N.getBookType()];if(document.createElementNS&&k){for(;m++<l.length;){n=l[m],k[n]&&this.addEvent(n,k[n],d)}}}});I=window.AnnotationShapes=new O})(window.jQuery,window.Class,window.BookInfo);var NoteCookie=Class({statics:{noteCookie:function(c){void 0==this._noteCookie&&(this._noteCookie=new NoteCookie(c));return this._noteCookie}},create:function(c){this.noteImgs={};this.rowObjs={};this.noteTexts={};this.svgObjs={};this.notes=[];this.cookieName=window.location.href.replace(window.location.hash,"")+"NoteCookie";this.rows=[];this.noteImgContainers={};this.showFlag=!1;this.container=c;this.address=uiBaseURL;this.noteButtonIsShow=!0;this.createNote(c);this.bindEvents()},createNote:function(b){var c=this;this.note=$("<div class='noteCookie-note'></div>").css({left:"40%"}).appendTo(b).hide();this.noteTitle=$("<div class='noteCookie-noteTitle'></div>").append($("<span class='noteCookie-noteTitle-text'></span>").html("Notes")).appendTo(this.note);this.noteTitleShowBtn=$("<div class='noteCookie-noteTitle-showBtn'></div>").css({right:32}).attr("title","Minimize").append($("<img style='margin-left: 3px;margin-top: 3px;'/>").attr("src",this.address+"note_narrow.png")).appendTo(this.noteTitle);this.noteTitleCloseBtn=$("<div class='noteCookie-noteTitle-closeBtn'></div>").css({right:3}).attr("title","Close").append($("<img style='margin-left: 3px;margin-top: 3px;'/>").attr("src",this.address+"note_close.png")).appendTo(this.noteTitle);this.noteButton=$("<div class='noteCookie-noteButton'></div>").appendTo(this.note);var d=$("<div style='position: relative;width: 100%;height: 158px;'></div>").appendTo(this.noteButton);this.noteBottomTop=$("<div class='noteCookie-noteButton-top'></div>").appendTo(d);this.inputText=$("<textarea class='noteCookie-noteButton-inputText'></textarea>").appendTo(this.noteBottomTop);this.addBtn=$("<div class='noteCookie-noteButton-addBtn'></div>").css({left:10}).html("Add").appendTo(this.noteBottomTop);this.removeAllBtn=$("<div class='noteCookie-noteButton-removeAllBtn'></div>").css({left:"auto",right:20}).html("Remove All").appendTo(this.noteBottomTop);this.noteLists=$("<div class='noteCookie-noteList'></div>").appendTo(this.noteButton);var d=$("<div class='noteCookie-noteTable-row-th'></div>"),f=$("<span class='noteCookie-noteTable-cellLeft-th'></span>").html("Page"),g=$("<div class='noteCookie-noteTable-cellRight-th'></div>");g.append($("<div style='position: absolute;width: 1px;height: 22px;left: 0px;top: 3px;background-color: #FFFFFF;'></div>")).append($("<span style='position: absolute;width: 319px;height: 100%;left: 1px;text-indent: 6px;'></span>").html("Title")).append($("<div style='position: absolute;width: 1px;height: 22px;left: auto;right: 89px;top: 3px;background-color: #FFFFFF;'></div>")).append($("<span style='position: absolute;width: 34px;height: 100%;left: auto;right: 55px;text-indent: 4px;'></span>").html("Edit")).append($("<div style='position: absolute;width: 1px;height: 22px;left: auto;right: 54px;top: 3px;background-color: #FFFFFF;'></div>")).append($("<span style='position: absolute;width: 54px;height: 100%;left: auto;right: 0px;text-indent: 4px;'></span>").html("Delete"));d.append(f).append(g);this.noteLists.append(d);this.noteTable=$("<div class='noteCookie-noteTable'></div>").css({maxHeight:188}).appendTo(this.noteLists);this.noteTableInner=$("<div class='noteCookie-noteTable-inner'></div>").appendTo(this.noteTable);isTouch||this.note.transition3D();this.createScrollBar(this.noteTable);try{var h=this.getLocalStorage(this.cookieName),k=eval(h);if(k){for(this.downJSonArrByKey(k,"page"),h=0;h<k.length;h++){this.addListData($.extend(k[h],{firstDown:!0}))}}}catch(l){}for(h=0;h<this.rows.length;h++){this.rows[h].rowObj.css({backgroundColor:0==h%2?"":"#bababa"})}this.scrollBarShowHide();var m,n;this.noteTitle.on("mousedown touchstart",function(d){d.preventDefault();d.stopPropagation();d=d.originalEvent.touches?d.originalEvent.touches[0]:d;m=d.clientX-c.note.position().left;n=d.clientY-c.note.position().top;b.add(c.noteImgContainers[BookInfo.getBookType()][BookInfo.getCurrentPages()[0]]).add(c.noteImgContainers[BookInfo.getBookType()][BookInfo.getCurrentPages()[1]]).on("mousemove.noteMove touchmove.noteMove",function(b){b.preventDefault();b.stopPropagation();c.noteTitle.css({cursor:"move"});b=b.originalEvent.touches?b.originalEvent.touches[0]:b;c.note.css({left:b.clientX-m,top:b.clientY-n})});b.on("mouseup.noteMove touchend.noteMove",function(d){d.preventDefault();d.stopPropagation();c.noteTitle.css({cursor:"default"});b.add(c.noteImgContainers[BookInfo.getBookType()][BookInfo.getCurrentPages()[0]]).add(c.noteImgContainers[BookInfo.getBookType()][BookInfo.getCurrentPages()[1]]).off("mousemove.noteMove touchmove.noteMove");b.off("mouseup.noteMove touchend.noteMove")});return !1})},isNoteListShowHide:function(){0<this.noteTableInner.children("div").length?this.noteLists.show():this.noteLists.hide()},updateListDataText:function(g,l){var k=this.noteTexts[g],h=this.noteImgs[g].find(".noteCookie-eachNote-img"),k=k.find(".noteCookie-eachNote-textList-text");h.attr("title",l);k.val(l)},updateNoteImgText:function(d,f){this.rowObjs[d].find(".noteCookie-noteTable-cellRight-text").val(f)},deleteListData:function(f){var h=this.noteTexts[f],g=this.svgObjs[f];this.noteImgs[f].remove();h.remove();g.remove();delete this.noteImgs[f];delete this.rowObjs[f];delete this.noteTexts[f];delete this.svgObjs[f]},deleteNoteImg:function(c){this.rowObjs[c].remove();delete this.noteImgs[c];delete this.rowObjs[c]},revertNoteImgText:function(d){var f=this.noteTexts[d].find(".noteCookie-eachNote-textList-text");d=this.rowObjs[d].find(".noteCookie-noteTable-cellRight-text");f.val(d.val())},addListData:function(l){var r=this,q=!0,p=$("<div class='noteCookie-noteTable-row' style='position: relative;cursor: pointer;'></div>").css({height:28}).attr("data-key",l.key).attr("data-page",l.page).append($("<span class='noteCookie-noteTable-cellLeft'></span>").html(l.page)).appendTo(r.noteTableInner),o=$("<span class='noteCookie-noteTable-cellRight' style=' position: absolute;width: 410px;height: 100%;left: 54px;z-index: 2;'></span>").appendTo(p),n=$("<input class='noteCookie-noteTable-cellRight-text' disabled='true'/>").attr("disabled",q).val(l.value).appendTo(o),m=$("<div class='noteCookie-noteTable-cellRight-edit'></div>").css({right:60}).attr("title","Edit").append($("<img style='margin-left: 3px;margin-top: 3px;'/>").attr("src",r.address+"note_edit.png")).appendTo(o);$("<div class='noteCookie-noteTable-cellRight-del'></div>").css({right:15}).attr("title","Delete").append($("<img style='margin-left: 0px;margin-top: 3px;'/>").attr("src",r.address+"note_del.png")).appendTo(o).on("click touchend",function(c){p.remove();var f=p.attr("data-key");r.deleteListData(f);r.delArrayOrderKey(r.rows,f);r.delArrayOrderKey(r.notes,f);r.addLocalStorage(r.cookieName,r.parseJSONArrayToString(r.notes));for(f=0;f<r.rows.length;f++){r.rows[f].rowObj.css({backgroundColor:0==f%2?"":"#bababa"})}r.scrollBarShowHide();c.preventDefault();c.stopPropagation();return !1});p.on("click touchend",function(c){gotoPageFun($(this).attr("data-page"))});m.on("click touchend",function(c){if(q){q=!1,n.css({backgroundColor:"#ffffff",color:"#000000"}),m.children("img").attr("src",r.address+"note_save.png"),n.attr("disabled",q),n[0].focus(),m.attr("title","Save")}else{q=!0;n.css({backgroundColor:"transparent",color:"#1a1a1a"});n.attr("disabled",q);m.attr("title","Edit");var d=n.val();m.children("img").attr("src",r.address+"note_edit.png");var f=p.attr("data-key");r.updateListDataText(f,d);r.updateArrayOrderKey(r.notes,f,{value:d});r.addLocalStorage(r.cookieName,r.parseJSONArrayToString(r.notes))}c.preventDefault();c.stopPropagation();return !1});r.rows.push($.extend(l,{rowObj:p}));r.rowObjs[l.key]=p;r.scrollBarShowHide();r.notes.push(l);r.addLocalStorage(r.cookieName,r.parseJSONArrayToString(r.notes))},addNoteImg:function(au,at){var ar=this,aq=!0,ap=$("<div class='noteCookie-eachNote'></div>").attr("data-key",au.key).attr("data-page",au.page).css({left:""+au.left+"",top:""+au.top+""}).appendTo(at),ao=$("<img class='noteCookie-eachNote-img' style=' position: absolute;width: 56px;height: 56px;z-index: 2;'/>").attr("src",ar.address+"note.png").attr("title",au.value).attr("data-key",au.key).attr("data-page",au.page).appendTo(ap);isTouch||ap.transition3D();try{var an=$(document.createElementNS("http://www.w3.org/2000/svg","svg")).css({zIndex:140,position:"absolute"}).attr("class","noteCookie-eachNote-svg noteCookie-eachNote-svg"+au.page).appendTo(BookInfo.container()),am=$(document.createElementNS("http://www.w3.org/2000/svg","path")).css({fill:"#FFF4A1",stroke:"#C99F1D",strokeWidth:1}).appendTo(an)}catch(al){an=$("<svg></svg>").css({zIndex:140,position:"absolute"}).attr("class","noteCookie-eachNote-svg noteCookie-eachNote-svg"+au.page).appendTo(BookInfo.container()),am=$("<path></path>").css({fill:"#FFF4A1",stroke:"#C99F1D",strokeWidth:1}).appendTo(an)}an.css({left:0,top:0,width:0,height:0}).hide();var aj=$("<div class='noteCookie-eachNote-textList noteCookie-eachNote-text"+au.page+"'></div>").attr("data-key",au.key).attr("data-page",au.page).hide().appendTo(BookInfo.container());aj.css({left:ap.offset().left,top:ap.offset().top});aj.on("click mousedown touchstart",function(c){c.preventDefault();c.stopPropagation();return !1});var ai=$("<div class='noteCookie-eachNote-textList-top' style='position: absolute;width: 100%;height: 20px;left: 0px;top: 0px;background-color: #373737;border-top-left-radius: 2px;border-top-right-radius: 2px;z-index: 2;'></div>").appendTo(aj),ag=$("<div style='position: absolute;left: 4px;top: 0px;width: 24px;height: 20px;cursor: pointer;'></div>").append($("<img style='margin-top: 2px;margin-left: 4px;'/>").attr("src",ar.address+"showNoteList.png")).appendTo(ai),ab=$("<div class='noteCookie-eachNote-textList-topClose'></div>").css({right:2}).attr("title","Close").append($("<img style='margin-top: 1px;margin-left: 1px;'/>").attr("src",ar.address+"noteImg_close.png")).appendTo(ai),ae=$("<div class='noteCookie-eachNote-textList-topSave'></div>").css({right:24}).attr("title","Save").append($("<img style='margin-top: 1px;margin-left: 0px;'/>").attr("src",ar.address+"noteImg_save.png")).appendTo(ai),ad=$("<div class='noteCookie-eachNote-textList-topDel'></div>").css({right:46}).attr("title","Delete").append($("<img style='margin-top: 1px;margin-left: 0px;'/>").attr("src",ar.address+"noteImg_del.png")).appendTo(ai),W=$("<div class='noteCookie-eachNote-textList-textDiv' style='height: 120px;position: absolute;width: 100%;left: 0px;top: 20px;margin: 0px;border: 0px;padding: 0px;border-bottom-left-radius: 2px;border-bottom-right-radius: 2px;background-color: #FFF4A1;z-index: 2;'></div>").appendTo(aj),Z=$("<textarea class='noteCookie-eachNote-textList-text'></textarea>").val(au.value).appendTo(W);$("<span class='noteCookie-eachNote-textList-topTitle'></span>").html(au.time).appendTo(W);Z.on("mousedown click",function(c){c.stopPropagation()});isTouch||aj.transition3D();ag.on("click touchend",function(){ar.noteButtonIsShow&&ar.showFlag?(ar.hide(),ar.showFlag=!1):(ar.show(),ar.showFlag=!0)});var R,Q,U,N,af,Y;ai.on("pointerdown.note",function(c){c.stopPropagation()});ai.on("mousedown.note touchstart.note",function(c){U=ap.offset().left;N=ap.offset().top;af=aj.offset().left;Y=aj.offset().top;R=(c.pageX||c.originalEvent.touches[0].pageX)-af;Q=(c.pageY||c.originalEvent.touches[0].pageY)-Y;BookInfo.container().add(an).add(ar.noteImgContainers[BookInfo.getBookType()][BookInfo.getCurrentPages()[0]]).add(ar.noteImgContainers[BookInfo.getBookType()][BookInfo.getCurrentPages()[1]]).on("mousemove.noteB touchmove.noteB",function(d){ai.css({cursor:"move"});d=isTouch?d.originalEvent.touches[0]:d;aj.css({left:Math.floor(d.clientX-R),top:d.clientY-Q});ar.drawSVG(U,N,aj.offset().left,aj.offset().top,an,am)});BookInfo.container().add(an).add(ai).on("mouseup.noteB touchend.noteB",function(){ai.css({cursor:"default"});BookInfo.container().add(an).add(ar.noteImgContainers[BookInfo.getBookType()][BookInfo.getCurrentPages()[0]]).add(ar.noteImgContainers[BookInfo.getBookType()][BookInfo.getCurrentPages()[1]]).off("mousemove.noteB touchmove.noteB");BookInfo.container().add(an).add(ai).off("mouseup.noteB touchend.noteB")});c.stopPropagation();c.preventDefault();return !1});var ac,M,ah;ab.on("click touchend",function(c){ar.revertNoteImgText(ap.attr("data-key"));aj.hide();an.hide();aa=!1});ae.on("click touchend",function(d){d=Z.val();ao.attr("title",d);var f=ap.attr("data-key");ar.updateNoteImgText(f,d);ar.updateArrayOrderKey(ar.notes,f,{value:d});ar.addLocalStorage(ar.cookieName,ar.parseJSONArrayToString(ar.notes));aj.hide();an.hide();aa=!1});ad.on("click touchend",function(c){ac||(ac=$("<div class='noteCookie-eachNote-textList-textDiv-bg' style='height: 100%;position: absolute;width: 100%;left: 0px;top: 0px;margin: 0px;border: 0px;padding: 0px;cursor: default;border-bottom-left-radius: 5px;border-bottom-right-radius: 5px;background-color: #cccccc;z-index: 2;'></div>").appendTo(W),$("<span class='noteCookie-eachNote-textList-textDiv-bgText' style=' position: absolute;left: 0px;top: 36px;font-family: Arial;font-size: 11px;width: 100%;text-align: center;height: 20px;line-height: 20px;color: #0A0A0A;z-index: 2;'></span>").html("Delete This Note!").appendTo(ac),M=$("<div class='noteCookie-eachNote-textList-textDiv-bgYes'></div>").css({left:40}).html("Yes").appendTo(ac),ah=$("<div class='noteCookie-eachNote-textList-textDiv-bgNo'></div>").css({left:97}).html("No").appendTo(ac),M.on("click touchend",function(d){d=ap.attr("data-key");ar.deleteNoteImg(d);aj.remove();an.remove();ap.remove();d=ap.attr("data-key");ar.delArrayOrderKey(ar.rows,d);ar.delArrayOrderKey(ar.notes,d);ar.addLocalStorage(ar.cookieName,ar.parseJSONArrayToString(ar.notes));ar.scrollBarShowHide();for(d=0;d<ar.rows.length;d++){ar.rows[d].rowObj.css({backgroundColor:0==d%2?"":"#bababa"})}ac=null}),ah.on("click touchend",function(){ac.remove();ac=null}))});var H=au.firstDown?!1:!0,aa=!1,P=!1;ao.on("mouseup.noteImgShowHide touchend.noteImgShowHide",function(c){if(isTouch||1==c.which){if(H){H=!1}else{return P?P=!1:aa?(aj.hide(),an.hide(),aa=!1):(aq&&(aj.css({left:ap.offset().left,top:ap.offset().top}),aq=!1),aj.show(),an.show(),aa=!0,ar.drawSVG(ap.offset().left,ap.offset().top,aj.offset().left,aj.offset().top,an,am)),c.preventDefault(),c.stopPropagation(),!1}}});$(document).add(at).on("mousedown.noteImgShowHide touchstart.noteImgShowHide",function(){aa&&(aj.hide(),an.hide(),aa=!1)});aj.add(an).on("mousedown.noteImgShowHide touchstart.noteImgShowHide",function(c){c.preventDefault();c.stopPropagation();return !1});var K,C,o,I,ak,G=!1;ao.on("pointerdown.nodecookie",function(c){c.stopPropagation()});ao.bind(_event._down,function(d){d.stopPropagation();d.preventDefault();d=isTouch?d.originalEvent.touches[0]:d;K=parseFloat(ap[0].offsetLeft);C=parseFloat(ap[0].offsetTop);o=d.clientX;I=d.clientY;ak=ao.attr("data-key");G=!0;if(aa){var h=aj.offset().left,g=aj.offset().top,c=an.offset().left,k=an.offset().top}at.on("mousemove.noteObj touchmove.noteObj",function(f){f.stopPropagation();f.preventDefault();if(G){ap.css({cursor:"move"});f=isTouch?f.originalEvent.touches[0]:f;var l=K*BookInfo.scale()-(o-f.clientX),m=C*BookInfo.scale()-(I-f.clientY),l=l/(at.width()*BookInfo.scale())*100+"%",m=m/(at.height()*BookInfo.scale())*100+"%";ap.css({left:l,top:m});aa&&(aj.css({left:h+(f.clientX-o),top:g+(f.clientY-I)}),an.css({left:c+(f.clientX-o),top:k+(f.clientY-I)}));if(8<Math.abs(f.clientX-o)||8<Math.abs(f.clientY-I)){P=!0}ar.updateArrayOrderKey(ar.notes,ak,{left:l,top:m});ar.addLocalStorage(ar.cookieName,ar.parseJSONArrayToString(ar.notes))}});at.add(ao).on("mouseup.noteObj touchend.noteObj",function(f){G&&(ap.css({cursor:"default"}),P=G=!1,at.off("mousemove.noteObj touchmove.noteObj"),at.add(ao).off("mouseup.noteObj touchend.noteObj"))});return !1});ai.bind(_event._down,function(){$(".noteCookie-eachNote-textList").removeClass("noteCookie-eachNote-textList-current");$(".noteCookie-eachNote").removeClass("noteCookie-eachNote-textList-current");aj.addClass("noteCookie-eachNote-textList-current");ap.addClass("noteCookie-eachNote-textList-current")});ar.noteImgs[au.key]=ap;ar.noteTexts[au.key]=aj;ar.svgObjs[au.key]=an},addNoteImgByPageIndex:function(f,h){h.find(".noteCookie-eachNote").remove();$(".noteCookie-eachNote-text"+f).remove();$(".noteCookie-eachNote-svg"+f).remove();for(var g=0;g<this.notes.length;g++){this.notes[g].page===f&&this.addNoteImg(this.notes[g],h)}},addListDataAndNoteImg:function(d,f){this.addListData(d);this.addNoteImg(d,f)},drawSVG:function(B,A,z,y,x,w){var v,u,t,s,r,o;B+28>=z+90.5&&A+28<=y?(o=A+28,y-=o,B+28<=z+109?(r=B+28,s=z+181-24-B+28,A=B=0,v=z+181-24-48-r,u=y,z=z+181-24-r):(r=z+109,z+181-24>=B+28?(s=48,B=B+28-r):B=s=B+28-r,v=A=0,u=y,z=48),t=y):B+28<z+90.5&&A+28<=y?(o=A+28,y-=o,B+28<=z+24?(r=B+28,s=z+24+48-r,A=B=0,v=s-48,u=y,z=s):(r=z+24,z+24+48<=B+28?B=s=B+28-r:(s=48,B=B+28-r),v=A=0,u=y,z=48),t=y):B+28>=z+90.5&&A>=y+141-28?(o=y+141,y=A+28-o,B+28<=z+109?(r=B+28,s=z+181-24-B+28,B=0,A=y,v=z+181-24-48-r,u=0,z=z+181-24-r):(r=z+109,z+181-24>=B+28?(s=48,B=B+28-r):B=s=B+28-r,A=y,u=v=0,z=48),t=0):B+28<z+90.5&&A>=y+141-28?(o=y+141,y=A+28-o,B+28<=z+24?(r=B+28,s=z+24+48-r,B=0,A=y,v=s-48,u=0,z=s):(r=z+24,z+24+48<=B+28?B=s=B+28-r:(s=48,B=B+28-r),A=y,u=v=0,z=48),t=0):z+181<=B+28&&A+28>=y&&A+28<=y+70.5?(r=z+181,s=B+28-r,A+28<=y+20?(o=A+28,y=y+20+48-o,B=s,v=A=0,u=y-48,z=0,t=y):y+20+48<=A+28?(o=y+20,y=A+28-o,B=s,A=y,z=u=v=0,t=48):(o=y+20,y=48,B=s,A=A+28-o,z=u=v=0,t=y)):z+181<=B+28&&A+28<=y+141&&A+28>=y+70.5?(r=z+181,s=B+28-r,A+28<=y+141-20-48?(o=A+28,y=y+141-20-o,B=s,v=A=0,u=y-48,z=0,t=y):y+141-20<=A+28?(o=y+141-68,y=A+28-o,B=s,A=y,z=u=v=0,t=48):(o=y+141-68,y=48,B=s,A=A+28-o,z=u=v=0,t=y)):z>=B+28&&A+28>=y&&A+28<=y+70.5?(r=B+28,s=z-r,A+28<=y+20?(o=A+28,y=y+20+48-o,A=B=0,v=s,u=y-48,z=s,t=y):y+20+48<=A+28?(o=y+20,y=A+28-o,B=0,A=y,v=s,u=0,z=s,t=48):(o=y+20,y=48,B=0,A=A+28-o,v=s,u=0,z=s,t=y)):z>=B+28&&A+28<=y+141&&A+28>=y+70.5?(r=B+28,s=z-r,A+28<=y+141-20-48?(o=A+28,y=y+141-20-o,A=B=0,v=s,u=y-48,z=s,t=y):y+141-20<=A+28?(o=y+141-68,y=A+28-o,B=0,A=y,v=s,u=0,z=s,t=48):(o=y+141-68,y=48,B=0,A=A+28-o,v=s,u=0,z=s,t=y)):(u=v=A=B=s=y=o=r=0,z=48,t=0);x.show().css({width:s,height:y,left:r,top:o});w.attr("d","M"+z+","+t+" L"+B+","+A+" L"+v+","+u)},bindEvents:function(){var f=this,h=!1,g=function(){$.each(BookInfo.getCurrentPages(),function(l,k){if(f.noteImgContainers[BookInfo.getBookType()]){var b=f.noteImgContainers[BookInfo.getBookType()][k];b&&(b.css({cursor:""}),b.off("mousedown.addNote touchstart.addNote"))}});h=!1};BookInfo.container().on("mousedown.addNote touchstart.addNote",function(){g()});f.addBtn.bind(_event._end,function(d){var c=f.inputText.val();if(c){f.noteButtonIsShow=!1;f.noteTitleShowBtn.children("img").attr("src",f.address+"note_revert.png");f.noteButton.css({maxHeight:0,paddingBottom:0});h=!0;var b=BookInfo.getCurrentPages();$.each(b,function(n,l){var k=f.noteImgContainers[BookInfo.getBookType()][l];if(k){k.css({cursor:"url("+f.address+"note.png),auto"}).on(_event._down,function(o){f.noteButtonIsShow=!1;f.noteTitleShowBtn.children("img").attr("src",f.address+"note_revert.png");f.noteButton.css({maxHeight:0});if(h){if(!o.which||3!=o.which){var m=(o.pageX||o.originalEvent.touches[0].pageX)-k.offset().left;o=(o.pageY||o.originalEvent.touches[0].pageY)-k.offset().top;m=m/(k.width()*BookInfo.scale())*100+"%";o=o/(k.height()*BookInfo.scale())*100+"%";m={key:(new Date).getTime(),time:(new Date).format("yyyy-MM-dd hh:mm:ss",!0),value:c,left:m,top:o,page:l};f.addListDataAndNoteImg(m,$(this));f.downJSonArrByKey(f.rows,"page");$(".noteCookie-noteTable-row").detach();for(m=0;m<f.rows.length;m++){f.rows[m].rowObj.css({backgroundColor:0==m%2?"":"#bababa"}),f.rows[m].rowObj.appendTo(f.noteTableInner)}f.scrollBarShowHide();f.inputText.val("")}g()}})}})}d.preventDefault();d.stopPropagation();return !1});f.noteTitleShowBtn.on(_event._down,function(){f.noteButtonIsShow?(f.noteButtonIsShow=!1,f.noteTitleShowBtn.children("img").attr("src",f.address+"note_revert.png"),f.noteButton.css({maxHeight:0,paddingBottom:0})):(f.noteButtonIsShow=!0,f.noteTitleShowBtn.children("img").attr("src",f.address+"note_narrow.png"),f.noteButton.css({maxHeight:9999,paddingBottom:6}))});f.noteTitleCloseBtn.on("click.note touchend.note",function(b){void 0!=f.onCreated?f.onCreated[1].call(f.onCreated[0]):f.hide();b.preventDefault();b.stopPropagation();return !1});f.removeAllBtn.on("click.note touchend.note",function(){$(".noteCookie-eachNote").remove();$(".noteCookie-eachNote-svg").remove();$(".noteCookie-eachNote-textList").remove();$(".noteCookie-noteTable-row").remove();f.notes=[];f.rowObjs={};f.noteImgs={};f.noteTexts={};f.svgObjs={};f.rows=[];f.addLocalStorage(f.cookieName,f.parseJSONArrayToString(f.notes));f.scrollBarShowHide()})},setContainers:function(f,h,g){void 0==this.noteImgContainers[f]&&(this.noteImgContainers[f]={});this.noteImgContainers[f][h]=g;f==BookInfo.getBookType()&&($(".noteCookie-eachNote-textList").hide(),$(".noteCookie-eachNote-svg").hide(),this.addNoteImgByPageIndex(h,g))},show:function(){this.showFlag=!0;this.note.show();parseInt(this.note.css("left"))>this.container.width()&&this.note.css({left:"50%"});0>parseInt(this.note.css("top"))&&this.note.css({top:24});this.noteButtonIsShow=!0;this.noteTitleShowBtn.children("img").attr("src",this.address+"note_narrow.png");this.noteButton.css({maxHeight:9999,paddingBottom:6});this.scrollBarShowHide()},hide:function(){this.showFlag=!1;this.note.hide()},bindOnCreated:function(d,f){this.onCreated=[d,f]},showHide:function(){this.showFlag?this.hide():this.show()},parseJSONArrayToString:function(f){if(0!=f.length){for(var h="[",g=0;g<f.length;g++){h+="{key:'"+f[g].key+"',value:'"+f[g].value+"',page:"+f[g].page+",time:'"+f[g].time+"',left:'"+f[g].left+"',top:'"+f[g].top+"'},"}h=h.substring(0,h.length-1);return h+"]"}},delArrayOrderKey:function(f,h){if(f){for(var g=0;g<f.length;g++){f[g].key&&f[g].key==h&&f.remove(g)}}},updateArrayOrderKey:function(g,l,k){if(g){for(var h=0;h<g.length;h++){g[h].key&&g[h].key==l&&$.extend(g[h],k)}}},downJSonArrByKey:function(d,f){d.sort(function(c,g){return parseInt(c[f])>parseInt(g[f])?1:parseInt(c[f])==parseInt(g[f])?0:-1})},isArray:function(c){return"[object Array]"==Object.prototype.toString.call(c)},getLocalStorage:function(h){try{if(window.localStorage){return window.localStorage.getItem(h)}for(var n=document.cookie.split("; "),m=0;m<n.length;m++){var l=n[m].split("=");if(l[0]==h){return unescape(l[1])}}return""}catch(k){}},addLocalStorage:function(h,n){try{if(window.localStorage){window.localStorage.setItem(h,n)}else{var m=h+"="+escape(n),l=new Date;l.setTime(l.getTime()+86400000000);m+="; expires="+l.toGMTString();document.cookie=m}}catch(k){}},createScrollBar:function(d){d=$("<div>",{"class":"ScrollBar",css:{position:"absolute",width:6,height:"100%",backgroundColor:"#a8a8a8",borderRadius:0,right:0,top:0,zIndex:99,borderLeft:"1px solid #ffffff"}}).appendTo(d);var f=$("<div>",{"class":"OuterScroll",css:{position:"absolute",width:6,height:"100%",left:0,top:0,backgroundColor:"transparent",borderRadius:0,overflow:"hidden",cursor:"pointer"}}).appendTo(d);$("<div>",{"class":"InnerScroll",css:{position:"absolute",width:6,height:"100%",marginLeft:0,marginRight:0,left:0,top:0,backgroundColor:"#5e5e5e",borderRadius:0,cursor:"pointer"}}).appendTo(f);this.scrollBar=d;this.outerScroll=f;this.bindScrollBarEvents(d,f,this.noteTable,this.noteTableInner)},scrollBarShowHide:function(){var c=this.noteTable.outerHeight()*this.scrollBar.outerHeight()/this.noteTableInner.outerHeight();this.outerScroll.css({height:c});this.isNoteListShowHide();this.noteTable.height()>=this.noteTableInner.height()?(this.scrollBar.hide(),this.noteTableInner.css({top:0})):(this.scrollBar.show(),Math.abs(parseFloat(this.noteTableInner.css("top")))>this.noteTableInner.outerHeight()-this.noteTable.outerHeight()&&(this.noteTableInner.css({top:-(this.noteTableInner.outerHeight()-this.noteTable.outerHeight())}),this.outerScroll.css({top:this.scrollBar.outerHeight()-this.outerScroll.outerHeight()})))},bindScrollBarEvents:function(h,n,m,l){var k=this;n.on(_event._down,function(f){var o=f||event,g=o.clientY-k.outerScroll.position().top,c=f.which;f.stopPropagation();1==c&&($(document).on("mousemove.scrollBar touchmove.scrollBar",function(d){d.preventDefault();d.stopPropagation();o=d||event;d=o.clientY-g;0>=d?d=0:d>=k.scrollBar.outerHeight()-k.outerScroll.outerHeight()&&(d=k.scrollBar.outerHeight()-k.outerScroll.outerHeight());n.css({top:d});l.css({top:-d/(k.scrollBar.outerHeight()-k.outerScroll.outerHeight())*(k.noteTableInner.outerHeight()-k.noteTable.outerHeight())})}),$(document).on("mouseup.scrollBar touchend.scrollBar",function(d){d=d||event;d.preventDefault();d.stopPropagation();$(document).off("mousemove.scrollBar touchmove.scrollBar");$(document).off("mouseup.scrollBar touchend.scrollBar")}))});m.bind($.browser.mozilla?"DOMMouseScroll":"mousewheel",function(f){if(!(m.outerHeight()>=l.outerHeight())){var d=f.originalEvent,d=d.wheelDelta||-d.detail,c=l.position().top,b;l.stop(!1,!1);0<d?b=0>c+m.outerHeight()/11?c+m.outerHeight()/11:0:0>d&&(b=l.outerHeight()-m.outerHeight()>-(c-m.outerHeight()/11)?c-m.outerHeight()/11:-(l.outerHeight()-m.outerHeight()));l.css({top:b});n.css({top:-b/(l.outerHeight()-m.outerHeight())*(h.outerHeight()-n.outerHeight())});f.stopPropagation();f.preventDefault();return !1}})}}),Signature=Class({statics:{signature:function(c){void 0==this._signature&&(this._signature=new Signature(c));return this._signature}},create:function(d){this.container=d;this.address=uiBaseURL;this.disableCss={boxShadow:"rgba(0, 0, 0, 0.6) 0px 1px 4px inset",backgroundColor:"#cccccc",textShadow:"0 1px 1px white",color:"rgb(165, 148, 148)",cursor:"default"};this.normalCss={boxShadow:"inset 0px 1px 0px rgba(255, 255, 255, 0.5), 0px 1px 2px rgba(0, 0, 0, 0.2)",backgroundColor:"#E4E4E4",color:"#464343",textShadow:"",cursor:"pointer"};this.overCss={};this.downCss={backgroundColor:"#E4E4E4",color:"#374f00",boxShadow:"inset 0px 1px 3px rgba(0, 0, 0, 0.3), 0px 1px 0px white",textShadow:"0px 1px 0px rgba(255, 255, 255, 0.4)"};this.natureMessage="Welcome to the signature manager! Here, you can draw,type, or upload signatures to use on the PDF documents you sign.";this.writeMessage='Type your signature below, then press the "Save" or "Save & Use" button to proceed.';this.drawMessage='Draw your signature below, then press the "Save" or "Save & Use" button to proceed.';this.redoIsUse=this.undoIsUse=this.clearAllFalg=this.hasDrawFlag=this.showFlag=this.hasAndChangeText=!1;this.drawOldData=this.currentDrawDel=this.currentDrawEdit=this.currentDrawSave=this.currentWriteDel=this.currentWriteEdit=this.currentWriteSave=null;this.drawOldPoints=[];this.savePoints=[];this.saveText=null;this.signatureName=window.location.href.replace(window.location.hash,"")+"Signature";this.signatureCookies=[];this.currentObj=null;this.signatureContexts={};try{this.createSignature(d)}catch(f){}this.toolBar=this.createToolBar(d)},createToolBar:function(l){var r=this;this.showTimeFalg={};this.oldData={};var q=$("<div class='flipHTML5Signature-toolBar' style='position: absolute;width: 144px;height: 32px;background-color: rgba(0, 0, 0, 0.8);border-radius: 4px;z-index: 9998;'></div>").appendTo(l).hide();l=$("<div class='flipHTML5Signature-toolBar-del'></div>").css({left:4}).append($("<img style='margin-left: 3px;margin-top: 3px;'/>").attr("src",this.address+"signature_del.png")).appendTo(q);var p=$("<div class='flipHTML5Signature-toolBar-up'></div>").css({left:32}).append($("<img style='margin-left: 3px;margin-top: 3px;'/>").attr("src",this.address+"signature_up.png")).appendTo(q),o=$("<div class='flipHTML5Signature-toolBar-down'></div>").css({left:60}).append($("<img style='margin-left: 3px;margin-top: 3px;'/>").attr("src",this.address+"signature_down.png")).appendTo(q),n=$("<div class='flipHTML5Signature-toolBar-revert'></div>").css({left:88}).append($("<img style='margin-left: 2px;margin-top: 4px;'/>").attr("src",this.address+"signature_revert.png")).appendTo(q),m=$("<div class='flipHTML5Signature-toolBar-date'></div>").css({left:116}).append($("<img style='margin-left: 3px;margin-top: 4px;'/>").attr("src",this.address+"signature_date.png")).appendTo(q);l.on("click touchend",function(c){r.currentObj&&(r.currentObj.remove(),q.hide(),c=r.currentObj.attr("data-key"),delete r.showTimeFalg[c],delete r.oldData[c],r.delArrayOrderKey(r.signatureCookies,c),r.addLocalStorage(r.signatureName,r.parseToString(r.signatureCookies)))});p.on("click touchend",function(){if(r.currentObj){var c=r.currentObj.width(),h=r.currentObj.height(),g=c+11;r.currentObj.css({width:g,height:g/(c/h)});c=r.currentObj.attr("data-key");h=r.parseObject(r.currentObj[0]);r.updateArrayOrderKey(r.signatureCookies,c,{width:h.width,height:h.height});r.addLocalStorage(r.signatureName,r.parseToString(r.signatureCookies));r.showTimeFalg[c]&&r.reviseDateTag()}});o.on("click touchend",function(){if(r.currentObj){var c=r.currentObj.width(),h=r.currentObj.height(),g=0>=c-11?5:c-11;r.currentObj.css({width:g,height:g/(c/h)});c=r.currentObj.attr("data-key");h=r.parseObject(r.currentObj[0]);r.updateArrayOrderKey(r.signatureCookies,c,{width:h.width,height:h.height});r.addLocalStorage(r.signatureName,r.parseToString(r.signatureCookies));r.showTimeFalg[c]&&r.reviseDateTag()}});n.on("click touchend",function(){if(r.currentObj){var c=r.currentObj.attr("data-key");r.currentObj.css({width:r.oldData[c].width,height:r.oldData[c].height});r.showTimeFalg[c]&&r.reviseDateTag();var f=r.parseObject(r.currentObj[0]);r.updateArrayOrderKey(r.signatureCookies,c,{width:f.width,height:f.height});r.addLocalStorage(r.signatureName,r.parseToString(r.signatureCookies))}});m.on("click touchend",function(){var c=r.currentObj.attr("data-key");r.showTimeFalg[c]?(r.currentObj.find(".flipHTML5Signature-eachDate").hide(),r.showTimeFalg[c]=!1):(r.reviseDateTag(),r.currentObj.find(".flipHTML5Signature-eachDate").show(),r.showTimeFalg[c]=!0)});q.on("mousedown touchstart",function(c){c.preventDefault();c.stopPropagation();return !1});this.container.add($(document)).add(BookInfo.container()).on("mousedown.hideToolBar touchstart.hideToolBar",function(){q.hide()});return q},createSignature:function(b){var c=this;this.$signature=$("<div class='flipHTML5Signature'></div>").css({width:560}).appendTo(b).hide();this.$signatureTitle=$("<div class='flipHTML5Signature-title'></div>").append($("<span class='flipHTML5Signature-titleText'></span>").html("Signature Manager")).appendTo(this.$signature);this.$closeBtn_title=$("<div class='flipHTML5Signature-titleClose' style='right: 6px;top: 4px;width: 20px;height: 20px;'></div>").append($("<img style='margin-left: 2px;margin-top: 2px;'/>").attr("src",this.address+"signature_close.png")).appendTo(this.$signatureTitle);try{var d=this.getLocalStorage(this.signatureName);this.signatureCookies=d&&"undefined"!=d?eval(d):[]}catch(f){}var g,h;this.$signatureTitle.on("mousedown touchstart",function(d){d.preventDefault();d.stopPropagation();d=d.originalEvent.touches?d.originalEvent.touches[0]:d;g=d.clientX-c.$signature.position().left;h=d.clientY-c.$signature.position().top;b.add($(document)).add(c.signatureContexts[BookInfo.getBookType()][BookInfo.getCurrentPages()[0]]).add(c.signatureContexts[BookInfo.getBookType()][BookInfo.getCurrentPages()[1]]).on("mousemove.signatureMove touchmove.signatureMove",function(b){c.$signatureTitle.css({cursor:"move"});b=b.originalEvent.touches?b.originalEvent.touches[0]:b;c.$signature.css({left:b.clientX-g,top:b.clientY-h})});b.add($(document)).on("mouseup.signatureMove touchend.signatureMove",function(){c.$signatureTitle.css({cursor:"default"});b.add($(document)).add(c.signatureContexts[BookInfo.getBookType()][BookInfo.getCurrentPages()[0]]).add(c.signatureContexts[BookInfo.getBookType()][BookInfo.getCurrentPages()[1]]).off("mousemove.signatureMove touchmove.signatureMove");b.add($(document)).off("mouseup.signatureMove touchend.signatureMove")});return !1});this.createSignatureUnder(this.$signature);this.createWriteTypeUnder(this.$signature);this.createDrawTypeUnder(this.$signature)},createSignatureUnder:function(d){var f=this;this.$signatureUnder=$("<div class='flipHTML5Signature-nuder' style='position: relative;left: 0px;width: 100%;height: 260px;background-color: #C7C7C7;'></div>").append($("<div class='flipHTML5Signature-nuderMessage'></div>").html(this.natureMessage)).appendTo(d);this.$underClose=$("<div class='flipHTML5Signature-nuderClose'></div>").html("Close").appendTo(this.$signatureUnder);this.$closeBtn_title.add(this.$underClose).on("click.signature touchend.signature",function(){void 0!=f.onCreated?f.onCreated[1].call(f.onCreated[0]):f.hide()});this.createEachTypes(this.$signatureUnder)},createEachTypes:function(z){var y=this,x={width:52,left:57,borderTopLeftRadius:5,borderBottomLeftRadius:5},w={width:70,left:111,borderTopRightRadius:5,borderBottomRightRadius:5};z=$("<div class='flipHTML5Signature-nuderTypes' style='  position: absolute;left: 15px;top: 60px;width: 530px;height: 145px;'></div>").css({boxShadow:"inset 1px 1px 0px #a6a6a6, 1px 1px 0px #f6f6f6"}).appendTo(z);var v=$("<div class='flipHTML5Signature-nuderTypes-type' style=' position: absolute;left: 17px;top: 6px;width: 240px;height: 134px;'></div>").css({boxShadow:"0px 0px 1px #000000"}).append($("<span class='flipHTML5Signature-typeTitle'></span>").html("Type on Keyboard")).css({left:17}).appendTo(z),v=$("<div class='flipHTML5Signature-typeUnder'></div>").appendTo(v),u=$("<div class='flipHTML5Signature-typeMid'></div>").appendTo(v),t=$("<div class='flipHTML5Signature-typeEdit-typeDel'></div>").css(x).html("Edit").appendTo(v).hide(),s=$("<div class='flipHTML5Signature-typeEdit-typeDel'></div>").css(w).html("Delete").appendTo(v).hide();z=$("<div class='flipHTML5Signature-nuderTypes-type' style=' position: absolute;left: 17px;top: 6px;width: 240px;height: 134px;'></div>").css({boxShadow:"0px 0px 1px #000000"}).append($("<span class='flipHTML5Signature-typeTitle'></span>").html("Draw with Mouse")).css({left:"auto",right:17}).appendTo(z);z=$("<div class='flipHTML5Signature-typeUnder'></div>").appendTo(z);var r=$("<div class='flipHTML5Signature-typeMid'></div>").appendTo(z),q=$("<div class='flipHTML5Signature-typeEdit-typeDel'></div>").css(x).html("Edit").appendTo(z).hide(),o=$("<div class='flipHTML5Signature-typeEdit-typeDel'></div>").css(w).html("Delete").appendTo(z).hide();u.on("mouseover.signature touchstart.signature",function(){u.css({borderColor:"#ff0000"})});u.on("mouseout.signature touchend.signature",function(){u.css({borderColor:"#cccccc"})});u.on(_event._down,function(c){c.preventDefault();c.stopPropagation();return !1});u.on(_event._end,function(c){var f=$(this).html();f?(y.$writeText.val(f),y.saveAndUseWrite(f)):(y.writeSave.add(y.writeSaveAndUse).removeClass("flipHTML5Signature-hover flipHTML5Signature-normal").css(y.disableCss),y.hasAndChangeText=!1,y.$signatureUnder.hide(),y.$drawTypeUnder.hide(),y.$writeTypeUnder.show(),y.$writeText.focus(),y.currentWriteSave=u,y.currentWriteEdit=t,y.currentWriteDel=s);c.preventDefault();c.stopPropagation();return !1});t.on("click.signature touchend.signature",function(){y.currentWriteSave=u;y.currentWriteEdit=t;y.currentWriteDel=s;y.$writeText.val(u.html());y.writeSave.add(y.writeSaveAndUse).removeClass("flipHTML5Signature-normal flipHTML5Signature-hover").css(y.disableCss);y.hasAndChangeText=!1;y.$signatureUnder.hide();y.$drawTypeUnder.hide();y.$writeTypeUnder.show()});s.on("click.signature touchend.signature",function(){y.currentWriteSave=u;y.currentWriteEdit=t;y.currentWriteDel=s;y.writeSave.add(y.writeSaveAndUse).removeClass("flipHTML5Signature-normal flipHTML5Signature-hover").css(y.disableCss);y.hasAndChangeText=!1;u.html("");y.$writeText.val("");t.hide();s.hide()});r.on("mouseover.signature touchstart.signature",function(){r.css({borderColor:"#ff0000"})});r.on("mouseout.signature touchend.signature",function(){r.css({borderColor:"#cccccc"})});r.on(_event._down,function(c){c.preventDefault();c.stopPropagation();return !1});r.on(_event._end,function(c){r.children("img").length?y.saveAndUseDraw(y.drawOldData):(y.$signatureUnder.hide(),y.$writeTypeUnder.hide(),y.$drawTypeUnder.show(),y.currentDrawSave=r,y.currentDrawEdit=q,y.currentDrawDel=o);c.preventDefault();c.stopPropagation();return !1});q.on("click.signature touchend.signature",function(){y.currentDrawSave=r;y.currentDrawEdit=q;y.currentDrawDel=o;y.$signatureUnder.hide();y.$writeTypeUnder.hide();y.$drawTypeUnder.show()});o.on("click.signature touchend.signature",function(){try{y.currentDrawSave=r,y.currentDrawEdit=q,y.currentDrawDel=o,y.undo.add(y.redo).add(y.clearAllBtn).add(y.drawSave).add(y.drawSaveAndUse).removeClass("flipHTML5Signature-normal flipHTML5Signature-hover").css(y.disableCss),y.undoIsUse=!1,y.redoIsUse=!1,y.clearAllFalg=!1,y.hasDrawFlag=!1,q.hide(),o.hide(),y.currentDrawSave&&y.currentDrawSave.empty(),y.context.clearRect(0,0,y.canvas.width,y.canvas.height),y.previewContext.clearRect(0,0,y.previewCanvas.width,y.previewCanvas.height),y.drawOldPoints=[],y.points=[],y.drawOldPoints.push([])}catch(c){}})},createWriteTypeUnder:function(g){var l=this,k=!1,h;this.$writeTypeUnder=$("<div class='flipHTML5Signature-writeType' style='position: relative;left: 0px;width: 100%;height: 170px;background-color: #C7C7C7;'></div>").append($("<div class='flipHTML5Signature-nuderMessage'></div>").html(this.writeMessage)).appendTo(g).hide();this.$writeText=$("<input type='text' class='flipHTML5Signature-writeType-text' maxlength='35' style='position: absolute;width: 450px;height: 60px;left: 63px;top: 64px;font-family: Mistral;font-size: 28px;text-align: center;color: #000000;'/>").css({boxShadow:"rgb(166, 166, 166) 1px 1px 0px inset, rgb(246, 246, 246) 1px 1px 0px"}).appendTo(this.$writeTypeUnder);this.writeSave=$("<div class='flipHTML5Signature-typeBtn flipHTML5Signature-type-save' style='left: 161px;'></div>").html("Save").appendTo(this.$writeTypeUnder);this.writeSaveAndUse=$("<div class='flipHTML5Signature-typeBtn flipHTML5Signature-type-save-use' style='left: 275px;'></div>").html("Save & Use").appendTo(this.$writeTypeUnder);g=$("<div class='flipHTML5Signature-typeBtn flipHTML5Signature-type-cancel'></div>").html("Cancel").appendTo(this.$writeTypeUnder);h=this.$writeText.val();this.writeSave.add(this.writeSaveAndUse).css(this.disableCss);g.on("click touchend",function(c){l.$writeText.val(h);l.$writeTypeUnder.hide();l.$drawTypeUnder.hide();l.$signatureUnder.show();c.preventDefault()});this.writeSaveAndUse.on(_event._down,function(c){c.preventDefault();c.stopPropagation();return !1});this.writeSaveAndUse.on(_event._end,function(c){if(l.hasAndChangeText){var d=l.$writeText.val();(h=d)&&k&&(l.saveText=d,l.saveAndUseWrite(d))}c.preventDefault();c.stopPropagation();return !1});this.writeSave.on("click touchend",function(c){l.hasAndChangeText&&(h=c=l.$writeText.val())&&k&&(l.saveText=c,l.saveWrite(c))});l.writeSave.on("mouseover.signature touchstart.signature",function(c){l.hasAndChangeText&&l.writeSave.removeClass("flipHTML5Signature-normal").addClass("flipHTML5Signature-hover").css(l.overCss)});l.writeSaveAndUse.on("mouseover.signature touchstart.signature",function(c){l.hasAndChangeText&&l.writeSaveAndUse.removeClass("flipHTML5Signature-normal").addClass("flipHTML5Signature-hover").css(l.overCss)});l.writeSave.on("mouseout.signature touchend.signature",function(c){l.hasAndChangeText&&l.writeSave.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(l.normalCss)});l.writeSaveAndUse.on("mouseout.signature touchend.signature",function(c){l.hasAndChangeText&&l.writeSaveAndUse.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(l.normalCss)});l.writeSave.on("mousedown.signature",function(c){l.hasAndChangeText&&l.writeSave.removeClass("flipHTML5Signature-hover flipHTML5Signature-normal").css(l.downCss)});l.writeSaveAndUse.on("mousedown.signature",function(c){l.hasAndChangeText&&l.writeSaveAndUse.removeClass("flipHTML5Signature-hover flipHTML5Signature-normal").css(l.downCss)});l.writeSave.add($(document)).on("mouseup.signature",function(c){l.hasAndChangeText&&l.writeSave.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(l.normalCss)});l.writeSaveAndUse.add($(document)).on("mouseup.signature",function(c){l.hasAndChangeText&&l.writeSaveAndUse.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(l.normalCss)});this.$writeText.on("input propertychange",function(c){c=l.$writeText.val();k=!0;c&&k?(l.writeSave.add(l.writeSaveAndUse).css(l.normalCss).addClass("flipHTML5Signature-normal").removeClass("flipHTML5Signature-hover"),l.hasAndChangeText=!0):(l.hasAndChangeText=!1,l.writeSave.add(l.writeSaveAndUse).removeClass("flipHTML5Signature-hover flipHTML5Signature-normal").css(l.disableCss))})},createDrawTypeUnder:function(X){var W=this;this.$drawTypeUnder=$("<div class='flipHTML5Signature-drawType' style='position: relative;left: 0px;width: 100%;height: 340px;background-color: #C7C7C7;'></div>").append($("<div class='flipHTML5Signature-nuderMessage'></div>").html(this.drawMessage)).appendTo(X).hide();this.drawSave=$("<div class='flipHTML5Signature-typeBtn flipHTML5Signature-type-save' style='left: 161px;'></div>").html("Save").appendTo(this.$drawTypeUnder);this.drawSaveAndUse=$("<div class='flipHTML5Signature-typeBtn flipHTML5Signature-type-save-use' style='left: 275px;'></div>").html("Save & Use").appendTo(this.$drawTypeUnder);X=$("<div class='flipHTML5Signature-typeBtn flipHTML5Signature-type-cancel'></div>").html("Cancel").appendTo(this.$drawTypeUnder);this.drawSave.add(this.drawSaveAndUse).removeClass("flipHTML5Signature-normal flipHTML5Signature-hover").css(this.disableCss);this.drawSave.on("click touchend",function(){if(W.hasDrawFlag){var c=W.trimCanvas(A);W.savePoints=W.points.concat();W.savePoints.push({color:W.drawColor});W.saveDraw(c)}});this.drawSaveAndUse.on(_event._down,function(c){c.preventDefault();c.stopPropagation();return !1});this.drawSaveAndUse.on(_event._end,function(c){if(W.hasDrawFlag){var f=W.trimCanvas(A);W.savePoints=W.points.concat();W.savePoints.push({color:W.drawColor});W.saveAndUseDraw(f)}c.preventDefault();c.stopPropagation();return !1});W.drawSave.on("mouseover.signature touchstart.signature",function(c){W.hasDrawFlag&&W.drawSave.removeClass("flipHTML5Signature-normal").addClass("flipHTML5Signature-hover").css(W.overCss)});W.drawSaveAndUse.on("mouseover.signature touchstart.signature",function(c){W.hasDrawFlag&&W.drawSaveAndUse.removeClass("flipHTML5Signature-normal").addClass("flipHTML5Signature-hover").css(W.overCss)});W.drawSave.on("mouseout.signature touchend.signature",function(c){W.hasDrawFlag&&W.drawSave.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(W.normalCss)});W.drawSaveAndUse.on("mouseout.signature touchend.signature",function(c){W.hasDrawFlag&&W.drawSaveAndUse.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(W.normalCss)});W.drawSave.on("mousedown.signature",function(c){W.hasDrawFlag&&W.drawSave.removeClass("flipHTML5Signature-hover flipHTML5Signature-normal").css(W.downCss)});W.drawSaveAndUse.on("mousedown.signature",function(c){W.hasDrawFlag&&W.drawSaveAndUse.removeClass("flipHTML5Signature-hover flipHTML5Signature-normal").css(W.downCss)});W.drawSave.add($(document)).on("mouseup.signature",function(c){W.hasDrawFlag&&W.drawSave.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(W.normalCss)});W.drawSaveAndUse.add($(document)).on("mouseup.signature",function(c){W.hasDrawFlag&&W.drawSaveAndUse.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(W.normalCss)});X.on("click touchend",function(){W.$writeTypeUnder.hide();W.$drawTypeUnder.hide();W.$signatureUnder.show()});X=$("<div class='flipHTML5Signature-drawTypeMid' style='position: absolute;left: 10px;top: 53px;width: 540px;height: 90px;'></div>").css({boxShadow:"rgb(166, 166, 166) 1px 1px 0px inset, rgb(246, 246, 246) 1px 1px 0px"}).appendTo(this.$drawTypeUnder);var V=$("<div class='flipHTML5Signature-drawTypeMid-lineWidth' style='position: absolute;width: 180px;height: 16px;left: 20px;top: 15px;'></div>").appendTo(X).append($("<img>").attr("src",this.address+"pen.png")),U=$("<div style='position: absolute;width: 100px;height: 4px; background-color: #E0E0E0;left: 20px;top: 6px;border-radius: 2px;'></div>").css({boxShadow:"rgb(166, 166, 166) 1px 1px 0px inset, rgb(246, 246, 246) 1px 1px 0px"}).appendTo(V),T=$("<div style='position: absolute;cursor:pointer;width: 0px; height: 0px;border-bottom-width: 11px;border-style: solid;border-left-width: 6px;border-right-width: 6px;top: -3px;border-color: transparent;border-bottom-color: #373737;left: -4px;'></div>").appendTo(U),S=$("<input type='text' style='position: absolute;width: 40px;height: 13px;left: 130px;top: 0px;'/>").appendTo(V),R=$("<div class='flipHTML5Signature-drawTypeMid-undo'></div>").css({left:28}).appendTo(X).html("UNDO"),Q=$("<div class='flipHTML5Signature-drawTypeMid-redo'></div>").css({left:80}).appendTo(X).html("REDO"),P=$("<div class='flipHTML5Signature-drawTypeMid-clearAll'></div>").css({left:152,width:78}).html("Clear All").appendTo(X);this.clearAllBtn=P;R.add(Q).add(P).removeClass("flipHTML5Signature-normal flipHTML5Signature-hover").css(this.disableCss);this.undo=R;this.redo=Q;R.on("mouseover.signature touchstart.signature",function(c){W.undoIsUse&&R.removeClass("flipHTML5Signature-normal").addClass("flipHTML5Signature-hover").css(W.overCss)});Q.on("mouseover.signature touchstart.signature",function(c){W.redoIsUse&&Q.removeClass("flipHTML5Signature-normal").addClass("flipHTML5Signature-hover").css(W.overCss)});P.on("mouseover.signature touchstart.signature",function(c){W.clearAllFalg&&P.removeClass("flipHTML5Signature-normal").addClass("flipHTML5Signature-hover").css(W.overCss)});R.on("mouseout.signature touchend.signature",function(c){W.undoIsUse&&R.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(W.normalCss)});Q.on("mouseout.signature touchend.signature",function(c){W.redoIsUse&&Q.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(W.normalCss)});P.on("mouseout.signature touchend.signature",function(c){W.clearAllFalg&&P.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(W.normalCss)});R.on("mousedown.signature",function(c){W.undoIsUse&&R.removeClass("flipHTML5Signature-hover flipHTML5Signature-normal").css(W.downCss)});Q.on("mousedown.signature",function(c){W.redoIsUse&&Q.removeClass("flipHTML5Signature-hover flipHTML5Signature-normal").css(W.downCss)});P.on("mousedown.signature",function(c){W.clearAllFalg&&P.removeClass("flipHTML5Signature-hover flipHTML5Signature-normal").css(W.downCss)});R.add($(document)).on("mouseup.signature",function(c){W.undoIsUse&&R.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(W.normalCss)});Q.add($(document)).on("mouseup.signature",function(c){W.redoIsUse&&Q.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(W.normalCss)});P.add($(document)).on("mouseup.signature",function(c){W.clearAllFalg&&P.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(W.normalCss)});var O=$("<div class='flipHTML5Signature-drawTypeMid-preview'></div>").html("Preview").appendTo(X),N=60/140*16,M=document.createElement("canvas"),I=M.getContext("2d"),K=$(M).css({position:"absolute",left:0,top:-Math.floor(N)});O.append(K);this.previewCanvas=M;this.previewContext=I;M.width=234;M.height=60+Math.ceil(N)+10;X=this.colorPicker(X);X.container.css({left:220,top:11});var J,E,H;S[0].value=parseFloat((7*(parseInt(T.css("left"))+4)+1).toFixed(2));T.on("mousedown touchstart",function(c){c.preventDefault();c.stopPropagation();c=c.originalEvent.touches?c.originalEvent.touches[0]:c;J=c.clientX-T.position().left;U.add(V).add($(document)).on("mousemove.lineWidth touchmove.lineWidth",function(d){d=d.originalEvent.touches?d.originalEvent.touches[0]:d;E=d.clientX-J;E=-4>=E?-4:93<=E?93:E;T.css({left:E});H=(E+4)/97*7+1;H=parseFloat(H.toFixed(2));S[0].value=H});V.add($(document)).on("mouseup.lineWidth touchend.lineWidth",function(){W.changeLineWidth(H);U.add(V).add($(document)).off("mousemove.lineWidth touchmove.lineWidth");V.add($(document)).off("mouseup.lineWidth touchend.lineWidth")});return !1});U.on("mousedown touchstart",function(c){c=c.clientX-U.offset().left;c=0>=c?0:97<=c?97:c;T.css({left:c-4});H=c/97*7+1;H=parseFloat(H.toFixed(2));S[0].value=H;W.changeLineWidth(H)});S.on("change",function(){var c=S[0].value;isNaN(c)?S[0].value=parseFloat(((T.position().left+4)/97*7+1).toFixed(2)):(1>c?(S[0].value=1,T.css({left:-4})):8<c?(S[0].value=8,T.css({left:93})):(S[0].value=c,T.css({left:(c-1)/7*97-4})),W.changeLineWidth(S[0].value))});P.on("click touchend",function(){W.clearAllFalg&&(o.clearRect(0,0,A.width,A.height),I.clearRect(0,0,M.width,M.height),W.drawSave.add(W.drawSaveAndUse).removeClass("flipHTML5Signature-normal flipHTML5Signature-hover").css(W.disableCss),W.hasDrawFlag=!1,W.redoIsUse=!0,Q.css(W.normalCss).addClass("flipHTML5Signature-normal").removeClass("flipHTML5Signature-hover"),W.undoIsUse=!1,R.removeClass("flipHTML5Signature-hover flipHTML5Signature-normal").css(W.disableCss),C=W.drawOldPoints.length-1,P.add(W.drawSaveAndUse).removeClass("flipHTML5Signature-normal flipHTML5Signature-hover").css(W.disableCss),W.clearAllFalg=!1,W.points=[])});var C=0;R.on("mousedown.signature touchstart.signature",function(c){if(W.undoIsUse){W.redoIsUse=!0;Q.css(W.normalCss).addClass("flipHTML5Signature-normal").removeClass("flipHTML5Signature-hover");C+=1;C=C>=W.drawOldPoints.length?W.drawOldPoints.length-1:C;o.clearRect(0,0,A.width,A.height);I.clearRect(0,0,M.width,M.height);var f=W.drawOldPoints[W.drawOldPoints.length-1-C];W.points=f.concat();W.draw(A,o,W.drawOldPoints[W.drawOldPoints.length-1-C],W.drawColor,W.lineWidth);W.drawPreview(M,I,f,W.drawColor,W.lineWidth);W.drawSave.add(W.drawSaveAndUse).removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(W.normalCss);W.hasDrawFlag=!0;P.add(W.drawSaveAndUse).removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(W.normalCss);W.clearAllFalg=!0;C==W.drawOldPoints.length-1&&(W.undoIsUse=!1,R.removeClass("flipHTML5Signature-hover flipHTML5Signature-normal").css(W.disableCss),W.drawSave.add(W.drawSaveAndUse).removeClass("flipHTML5Signature-normal flipHTML5Signature-hover").css(W.disableCss),W.hasDrawFlag=!1,P.add(W.drawSaveAndUse).removeClass("flipHTML5Signature-normal flipHTML5Signature-hover").css(W.disableCss),W.clearAllFalg=!1);c.preventDefault();c.stopPropagation();return !1}});Q.on("mousedown.signature touchstart.signature",function(c){if(W.redoIsUse){W.undoIsUse=!0;R.css(W.normalCss).addClass("flipHTML5Signature-normal").removeClass("flipHTML5Signature-hover");C-=1;C=0>=C?0:C;o.clearRect(0,0,A.width,A.height);I.clearRect(0,0,M.width,M.height);var f=W.drawOldPoints[W.drawOldPoints.length-1-C];W.points=f.concat();W.draw(A,o,W.drawOldPoints[W.drawOldPoints.length-1-C],W.drawColor,W.lineWidth);W.drawPreview(M,I,f,W.drawColor,W.lineWidth);W.drawSave.add(W.drawSaveAndUse).removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(W.normalCss);W.hasDrawFlag=!0;P.add(W.drawSaveAndUse).removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(W.normalCss);W.clearAllFalg=!0;0==C&&(W.redoIsUse=!1,Q.removeClass("flipHTML5Signature-hover flipHTML5Signature-normal").css(W.disableCss));c.preventDefault();c.stopPropagation();return !1}});W.drawOldPoints.push([]);O=$("<div class='flipHTML5Signature-drawTypeBottom-out' style='position: absolute;left: 0px;top: 150px;width: 100%;height: 124px;'></div>").appendTo(this.$drawTypeUnder);N=$("<div class='flipHTML5Signature-drawTypeBottom' style='position: absolute;left: 9px;top: 0px;width: 540px;height: 140px;border: 1px solid #cccccc;background-color: #ffffff;'></div>").css({boxShadow:"rgb(166, 166, 166) 1px 1px 0px inset, rgb(246, 246, 246) 1px 1px 0px"}).appendTo(O);O.css({cursor:"url("+W.address+"pen.png),auto"});var A=document.createElement("canvas"),D=window.canvas=$(A);N.append(D);A.width=540;A.height=158;$(A).css({position:"absolute",left:0,top:-16});var o=A.getContext("2d");this.canvas=A;this.context=o;this.points=[];this.drawColor=X.message[0].style.backgroundColor;this.lineWidth=1;var L,G;D.on(_event._down,function(c){c.preventDefault();c.stopPropagation();c=c.originalEvent.touches?c.originalEvent.touches[0]:c;if(W.redoIsUse){var f=W.drawOldPoints.length;W.drawOldPoints.length=f-C;W.points=W.drawOldPoints[f-C-1].concat();C=0}W.undoIsUse=!0;R.css(W.normalCss).addClass("flipHTML5Signature-normal").removeClass("flipHTML5Signature-hover");W.redoIsUse=!1;Q.removeClass("flipHTML5Signature-hover flipHTML5Signature-normal").css(W.disableCss);W.clearAllFalg=!0;P.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(W.normalCss);W.hasDrawFlag=!0;W.drawSave.add(W.drawSaveAndUse).css(W.normalCss).addClass("flipHTML5Signature-normal").removeClass("flipHTML5Signature-hover");L={x:c.clientX-D.offset().left+0,y:c.clientY-D.offset().top+16,t:0,w:W.lineWidth};W.points.push(L);D.on(_event._move,function(d){d=d.originalEvent.touches?d.originalEvent.touches[0]:d;G={x:d.clientX-D.offset().left+0,y:Math.min(d.clientY-D.offset().top+16,156),t:1};W.points.push(G);W.draw(A,o,W.points,W.drawColor,W.lineWidth);W.drawPreview(M,I,W.points,W.drawColor,W.lineWidth)});D.add($(document)).on("mouseup.signature touchend.signature",function(){W.drawOldPoints.push(W.points.concat());D.off(_event._move);D.add($(document)).off("mouseup.signature touchend.signature")});return !1})},addSignatureImg:function(g,l,k){var h=this;g.on("mousedown.hideToolBar touchstart.hideToolBar",function(c){h.toolBar&&h.toolBar.hide()});g.css({cursor:"pointer"});void 0!=h.onCreated?h.onCreated[1].call(h.onCreated[0]):h.hide();g.off("mousedown.signature touchstart.signature");g.on("mousedown.signature touchstart.signature",function(n){g.off("mousedown.signature touchstart.signature");if(isTouch||1===n.which){var f=new Date,d=f.getTime(),f=f.format("MM/dd/yyyy hh:mm:ss");h.showTimeFalg[d]=!1;var c=(n.pageX||n.originalEvent.touches[0].pageX)/BookInfo.scale()-g.offset().left,b=(n.pageY||n.originalEvent.touches[0].pageY)/BookInfo.scale()-g.offset().top,c=h.parseData({left:c,top:b,width:l.width,height:l.height},g[0].offsetWidth,g[0].offsetHeight),b=$.extend({},l,{width:c.width,height:c.height});h.oldData[d]=b;h.createSignatureImg(g,b,k,c.left,c.top,d,f);h.signatureCookies.push({type:b.type,data:0===l.type?h.saveText:h.savePoints,key:d,page:k,currentTime:f,left:c.left,top:c.top,width:b.width,height:b.height});h.addLocalStorage(h.signatureName,h.parseToString(h.signatureCookies));n.preventDefault();n.stopPropagation();return !1}});g.add($(document)).add(BookInfo.container()).on("mouseup.signature touchend.signature",function(b){$.each(BookInfo.getCurrentPages(),function(f,n){var m=h.signatureContexts[BookInfo.getBookType()][n];m&&(m.css({cursor:""}),m.off("mousedown.signature touchstart.signature"))});g.off("mousedown.signature touchstart.signature");g.add($(document)).add(BookInfo.container()).off("mousedown.signature touchstart.signature")})},createSignatureImg:function(z,y,x,w,v,u,t){var s=this;z.on("mousedown.hideToolBar touchstart.hideToolBar",function(){s.toolBar&&s.toolBar.hide()});var r=$("<div class='flipHTML5Signature-eachSignatureImg' style='cursor: move;'></div>").append($("<img style='width: 100%;height: 100%;position: absolute;left: 0px;top: 0px;'/>").attr("src",y.url)).attr("data-key",u).attr("data-page",x).css({position:"absolute",width:y.width,height:y.height,left:w,top:v}).appendTo(z),q=$("<div class='flipHTML5Signature-eachDate' style='position: absolute;width: 180px;height: 45px;border: 1px dashed #2F2F2F;top: -24px;'></div>").css({left:y.width+2}).hide().html(t);y=$("<img/>").attr("src",s.address+"signature_dateClose.png").css({position:"absolute",top:0,right:0,cursor:"pointer"});q.appendTo(r).append(y);y.off("mousedown touchstart");y.on("mousedown touchstart",function(){var c=s.currentObj.attr("data-key");q.hide();s.showTimeFalg[c]=!1});q.off("mousedown touchstart");q.on("mousedown touchstart",function(c){c.preventDefault();c.stopPropagation();return !1});r.off("mouseover.signature touchstart.signature");r.on("mouseover.signature touchstart.signature",function(){r.css({border:"1px solid #ff0000"})});r.off("mouseout.signature touchend.signature");r.on("mouseout.signature touchend.signature",function(){r.css({border:0})});r.off("mousedown.getObj touchstart.getObj");r.on("mousedown.getObj touchstart.getObj",function(c){$(".flipHTML5Signature-eachSignatureImg").css({zIndex:1});r.css({zIndex:4});s.currentObj=r;s.toolBar.css({left:r.offset().left-s.container.offset().left,top:r.offset().top-s.container.offset().top-s.toolBar.outerHeight()}).show()});var o=!1;r.off("mousedown.signatureImg touchstart.signatureImg");r.on("pointerdown.signatureImg",function(c){c.stopPropagation()});r.on("mousedown.signatureImg touchstart.signatureImg",function(m){var h=m.pageX||m.originalEvent.touches[0].pageX,g=m.pageY||m.originalEvent.touches[0].pageY,b=r[0].offsetLeft,l=r[0].offsetTop;z.on("mousemove.signatureImg touchmove.signatureImg",function(d){d.preventDefault();d.stopPropagation();o=!0;var f=b-(h-(d.pageX||d.originalEvent.touches[0].pageX))/BookInfo.scale();v=l-(g-(d.pageY||d.originalEvent.touches[0].pageY))/BookInfo.scale();r.css({left:f,top:v});s.toolBar.css({left:r.offset().left-s.container.offset().left,top:r.offset().top-s.container.offset().top-s.toolBar.outerHeight()}).show();s.showTimeFalg[u]&&s.reviseDateTag()});r.add(z).add($(document)).on("mouseup.signatureImg touchend.signatureImg",function(){z.off("mousemove.signatureImg touchmove.signatureImg");r.add(z).add($(document)).off("mouseup.signatureImg touchend.signatureImg");if(o){var k=r.attr("data-key"),f=s.parseObject(s.currentObj[0]);s.updateArrayOrderKey(s.signatureCookies,k,{left:f.left,top:f.top});s.addLocalStorage(s.signatureName,s.parseToString(s.signatureCookies))}});m.preventDefault();m.stopPropagation();return !1});z.css({cursor:""})},draw:function(l,r,q,p,o){var n=-1,m=q.length;r.clearRect(0,0,l.width,l.height);r.save();r.beginPath();r.lineJoin="round";r.strokeStyle=p;for(r.lineWidth=o;++n<m;){l=q[n],0===l.t?(r.stroke(),r.beginPath(),r.lineWidth=l.w,r.moveTo(l.x,l.y)):r.lineTo(l.x,l.y)}r.stroke();r.restore()},drawPreview:function(v,u,t,s,r){var q=-1,p=t.length,o=140/60,n=540/234;u.clearRect(0,0,v.width,v.height);u.save();u.beginPath();u.lineJoin="round";u.strokeStyle=s;for(u.lineWidth=r;++q<p;){v=t[q],0===v.t?(u.stroke(),u.beginPath(),u.lineWidth=v.w/o,u.moveTo(v.x/n,v.y/o)):u.lineTo(v.x/n,v.y/n)}u.stroke();u.restore()},trimCanvas:function(B){var A=B.getContext("2d"),z=document.createElement("canvas").getContext("2d"),y=A.getImageData(0,0,B.width,B.height),x=y.data.length,w,v=null,u=null,t=null,s=null,r,o;for(w=0;w<x;w+=4){0!==y.data[w+3]&&(r=w/4%B.width,o=~~(w/4/B.width),null===v&&(v=o),null===u?u=r:r<u&&(u=r),null===t?t=r:t<r&&(t=r),null===s?s=o:s<o&&(s=o))}B=s-v;t-=u;A=A.getImageData(u,v,t,B);z.canvas.width=t;z.canvas.height=B;z.putImageData(A,0,0);return{url:z.canvas.toDataURL("image/png"),width:t,height:B}},saveDraw:function(l){if(this.currentDrawSave){this.currentDrawSave.empty();var r=this.currentDrawSave.width(),q=this.currentDrawSave.height(),p=r/q,o=l.width,n=l.height,m=o/n;r>o&&q>n?(p=o,r=(r-p)/2,q=(q-n)/2):r>o&&q<n?(p=q*m,n=q,r=(r-p)/2,q=(q-n)/2):r<o&&q>n?(p=r,n=r/m,r=(r-p)/2,q=(q-n)/2):p>m?(n=q,p=q*m,r=(r-p)/2,q=0):p<m?(p=r,n=r/m,r=0,q=(q-n)/2):(p=r,n=q,q=r=0);this.currentDrawSave.append($("<img/>").css({position:"absolute",width:p,height:n,left:r,top:q}).attr("src",l.url))}this.drawOldData=l;this.currentDrawEdit.show();this.currentDrawDel.show();this.$writeTypeUnder.hide();this.$drawTypeUnder.hide();this.$signatureUnder.show()},saveAndUseDraw:function(f){var h=this,g=BookInfo.getCurrentPages();$.each(g,function(k,c){var b=h.signatureContexts[BookInfo.getBookType()][c];b&&(f.type=1,h.addSignatureImg(b,f,c))});h.saveDraw(f)},saveWrite:function(c){this.currentWriteSave.html(c);this.currentWriteEdit.show();this.currentWriteDel.show();this.$writeTypeUnder.hide();this.$drawTypeUnder.hide();this.$signatureUnder.show()},saveAndUseWrite:function(g){var l=this,k=l.drawTextByDiv(g,"38px","Mistral","#000000"),h=BookInfo.getCurrentPages();$.each(h,function(c,m){var d=l.signatureContexts[BookInfo.getBookType()][m];d&&(k.type=0,d.css({cursor:""}),l.addSignatureImg(d,k,m))});l.saveWrite(g)},drawTextByDiv:function(l,r,q,p){var o=document.createElement("canvas"),n=window.context=o.getContext("2d");n.fillStyle=p;n.font=""+r+" "+q+"";var m=n.measureText(l).width+8;o.width=m;o.height=54;n.fillStyle=p;n.font=""+r+" "+q+"";n.textBaseline="top";n.fillText(l,3,0);return{url:o.toDataURL("image/png"),width:m,height:54}},parseObject:function(k){if(document.getElementsByTagName("body")[0].contains(k)){var p,o,n;n=k.parentNode;var m=k.style,l=$(k);o=100/n.offsetHeight;p=100/n.offsetWidth;n=k.offsetLeft*p+"%";k=k.offsetTop*o+"%";p=l.width()*p+"%";o=l.height()*o+"%";m.width=p;m.height=o;m.left=n;m.top=k;return{width:p,height:o,left:n,top:k}}},parseData:function(f,h,g){g=100/g;h=100/h;return{width:f.width*h+"%",height:f.height*g+"%",left:f.left*h+"%",top:f.top*g+"%"}},close:function(){this.$signature.hide();this.$signatureUnder.show();this.$writeTypeUnder.hide();this.$drawTypeUnder.hide();this.showFlag=!1},show:function(){this.$signature.show();this.$signatureUnder.show();this.$writeTypeUnder.hide();this.$drawTypeUnder.hide();this.showFlag=!0},hide:function(){this.close()},showHide:function(){this.showFlag?this.hide():this.show()},changeColor:function(c){this.drawColor=c;this.draw(this.canvas,this.context,this.points,c,this.lineWidth);this.drawPreview(this.previewCanvas,this.previewContext,this.points,this.drawColor,this.lineWidth);return c},changeLineWidth:function(c){return this.lineWidth=c},colorPicker:function(z){var y,x,w,v=this,u="#FF0000 #FF5555 #FF55AA #FF55FF #FFAA55 #FFAAAA #FFAAFF #FFFF55 #FFFFAA #FFFFFF #CC0000 #CC5555 #CC55AA #CC55FF #CCAA55 #CCAAAA #CCAAFF #CCFF55 #CCFFAA #CCFFFF #AA0000 #AA5555 #AA55AA #AA55FF #AAAA55 #AAAAAA #AAAAFF #AAFF55 #AAFFAA #AAFFFF #880000 #885555 #8855AA #8855FF #88AA55 #88AAAA #88AAFF #88FF55 #88FFAA #88FFFF #550000 #555555 #5555AA #5555FF #55AA55 #55AAAA #55AAFF #55FF55 #55FFAA #55FFFF #220000 #225555 #2255AA #2255FF #22AA55 #22AAAA #22AAFF #22FF55 #22FFAA #22FFFF #000000 #005555 #0055AA #0055FF #00AA55 #00AAAA #00AAFF #00FF55 #00FFAA #00FFFF".split(" "),t=document.createElement("table");y=document.createElement("a");var s=$(y),r=document.createElement("input"),q=function(){},o=function(){t.style.display="none";r.value=r.style.backgroundColor=this.title.toUpperCase();v.changeColor(this.title.toUpperCase())};s.appendTo(z);y.className="flipHtml5ColorSelectorWrap";t.setAttribute("border","1");y.style.position="absolute";y.href="javascript:void(0);";r.type="text";r.className="flipHtml5ColorSelectorMessage";r.style.width="20px";r.style.height="20px";r.value=r.style.backgroundColor="#000000";r.style.cursor="pointer";r.style.padding="0px";y.appendChild(r);y.appendChild(t);t.style.display="none";t.style.position="relative";t.style.zIndex=9999;t.style.backgroundColor="#ffffff";for(x=0;7>x;x++){w=document.createElement("tr");w.style.position="relative";for(y=0;10>y;y++){z=document.createElement("td"),z.className="flipHtml5ColorSelectorBlock",z.style.position="relative",z.style.width="14px",z.style.height="14px",z.title=u[10*x+y],z.style.backgroundColor=u[10*x+y],$(z).on("mouseenter",q),$(z).on("click touchstart",o),w.appendChild(z)}t.appendChild(w)}$(r).on("click touchstart",function(c){t.style.display="table-cell";c.stopPropagation();c.stopPropagation();return !1});$(document).on("click touchstart",function(){t.style.display="none"});return{container:s,message:$(r)}},setContainers:function(f,h,g){void 0==this.signatureContexts[f]&&(this.signatureContexts[f]={});this.signatureContexts[f][h]=g;f==BookInfo.getBookType()&&(this.toolBar.hide(),this.addSignatureByPageIndex(h,g))},addSignatureByPageIndex:function(B,A){A.find(".flipHTML5Signature-eachSignatureImg").remove();for(var z=0;z<this.signatureCookies.length;z++){var y=this.signatureCookies[z];if(y.page===B){var x=y.left,w=y.top,v=y.key,u=y.currentTime;if(0==y.type){var t=this.drawTextByDiv(y.data,"38px","Mistral","#000000"),s=this.parseData({left:x,top:w,width:t.width,height:t.height},A[0].offsetWidth,A[0].offsetHeight)}else{t=document.createElement("canvas");t.width=540;t.height=158;$(t).css({position:"absolute",left:0,top:-16});var s=t.getContext("2d"),r=y.data.concat(),o=r.pop();this.draw(t,s,r,o.color,1);t=this.trimCanvas(t);s=this.parseData({left:x,top:w,width:t.width,height:t.height},A[0].offsetWidth,A[0].offsetHeight)}this.oldData[v]=$.extend({},t,{width:s.width,height:s.height});t=$.extend({},t,{width:y.width,height:y.height});this.createSignatureImg(A,t,y.page,x,w,v,u)}}},getLocalStorage:function(h){try{if(window.localStorage){return window.localStorage.getItem(h)}for(var n=document.cookie.split("; "),m=0;m<n.length;m++){var l=n[m].split("=");if(l[0]==h){return unescape(l[1])}}return""}catch(k){}},addLocalStorage:function(h,n){try{if(window.localStorage){window.localStorage.setItem(h,n)}else{var m=h+"="+escape(n),l=new Date;l.setTime(l.getTime()+86400000000);m+="; expires="+l.toGMTString();document.cookie=m}}catch(k){}},parseToString:function(f){if(0==f.length){return""}for(var h="[",g=0;g<f.length;g++){h=0==f[g].type?h+("{type:"+f[g].type+",key:"+f[g].key+",data:'"+f[g].data+"',page:"+f[g].page+",currentTime:'"+f[g].currentTime+"',left:'"+f[g].left+"',top:'"+f[g].top+"',width:'"+f[g].width+"',height:'"+f[g].height+"'},"):h+("{type:"+f[g].type+",key:"+f[g].key+",data:"+this.parsePointsToString(f[g].data)+",page:"+f[g].page+",currentTime:'"+f[g].currentTime+"',left:'"+f[g].left+"',top:'"+f[g].top+"',width:'"+f[g].width+"',height:'"+f[g].height+"'},")}h=h.substring(0,h.length-1);return h+"]"},parsePointsToString:function(f){if(0!=f.length){for(var h="[",g=0;g<f.length-1;g++){h+="{x:"+f[g].x+",y:"+f[g].y+",t:"+f[g].t+",w:"+f[g].w+"},"}h+="{color:'"+f[f.length-1].color+"'}";return h+"]"}},delArrayOrderKey:function(f,h){if(f){for(var g=0;g<f.length;g++){f[g].key&&f[g].key==h&&f.remove(g)}}},updateArrayOrderKey:function(g,l,k){if(g){for(var h=0;h<g.length;h++){g[h].key&&g[h].key==l&&$.extend(g[h],k)}}},createCursorImg:function(g,l,k){var h=$("<img/>").attr("src",g.url).css({position:"absolute",width:g.width,height:g.height,left:l+10,top:k+10}).appendTo(this.container);h.on("mousemove touchmove",function(c){h.css({left:c.clientX+10,top:c.clientY+10})});return h},reviseDateTag:function(){if(this.currentObj){var v=this.currentObj.find(".flipHTML5Signature-eachDate"),u=this.currentObj.parent(),t=parseInt(this.currentObj.css("left")),s=parseInt(this.currentObj.css("top"));this.currentObj.position();var r=this.currentObj.outerWidth(),q=this.currentObj.outerHeight(),p=u.width();u.height();var u=v.outerWidth(),o=v.outerHeight(),n=this.toolBar.height();t+r+2+u<=p?v.css({left:r+2,top:-24}):o+n<=s?v.css({left:r-u,top:-(o+n)}):v.css({left:r-u,top:q+18})}},bindOnCreated:function(d,f){this.onCreated=[d,f]}});(function(f,h,g){window.Remark=h({statics:{},create:function(){this.expires=30;this.currentEditor=f("<div>");this.backgroundColor="rgba(255, 255, 85, 0.5)";this.highlightBackcolor="rgba(2, 255, 245, 0.5)";this.fontSize=5;this.fontName="Times";this.$bookContainer=g.container();this.fontColor="black";this.title="#00000";this.opacity="1.0";this.noteImgContainers={};this.$document=f(document);this.newSizeWrap();var d=this.createToolbar(),b=this.createHighlightToolbar();d.appendChild(this.createColorSelector());document.getElementsByTagName("body")[0].appendChild(d).appendChild(b);document.getElementsByTagName("body")[0].appendChild(b);f(window).on("beforeunload",function(){this.save()}.bind(this));this.oneBindEvent()},bindOnCreated:function(d,k){this.onCreated=[d,k]},bindCreateEvents:function(D,C,B){var A,z,y,w,o,d,H,b=this,I=Math.floor,F=D.offset().left,G=D.offset().top,E=function(c){c.preventDefault();y=c.pageX?c.pageX:c.originalEvent.touches?c.originalEvent.touches[0].pageX:0;w=c.pageY?c.pageY:c.originalEvent.touches?c.originalEvent.touches[0].pageY:0;y&&(0>y-A?(d.left=I((y-F)/g.scale())+"px",d.width=I((A-y)/g.scale())+"px"):(d.left=I((A-F)/g.scale())+"px",d.width=I((y-A)/g.scale())+"px"));w&&(0>c.pageY-z?(d.top=I((w-G)/g.scale())+"px",d.height=I((z-w)/g.scale())+"px"):(d.top=I((z-G)/g.scale())+"px",d.height=I((w-z)/g.scale())+"px"));B&&B.draw(A,z,y,w)};D.css("cursor","crosshair");D.off("mousedown.fliphtml5Remark touchstart.fliphtml5Remark").one("mousedown.fliphtml5Remark touchstart.fliphtml5Remark",function(l){b.unbindCreateEvents();var c=l.button;if(!document.implementation.hasFeature("MouseEvents","2.0")){switch(event.button){case 0:case 1:case 3:case 5:case 7:c=0;break;case 2:case 6:c=2;break;case 4:c=1}}if(!c){l.stopPropagation();o=document.createElement("div");H=f(o).css({webkitUserSelect:"text",mozUserSelect:"text",msUserSelect:"text",oUserSelect:"text",userSelect:"text"});d=o.style;B?(H.append(B),o.className="flipHtml5Shape flipHtml5Store"):(d.backgroundColor=C?"rgba(0, 71, 255, 0.33)":b.highlightBackcolor,o.className=(C?"flipHtml5Remark flipHtml5Store":"flipHtml5Highlight flipHtml5Store")+" flipHtml5RemarkCurrentEditor",o.setAttribute("contenteditable",C));D.find(".flipHtml5RemarkCurrentEditor").removeClass("flipHtml5RemarkCurrentEditor");D.append(o);if(c=l.originalEvent.changedTouches){var k=c[0].identifier;A=y=c[0].pageX;z=w=c[0].pageY}else{A=y=l.pageX,z=w=l.pageY}b.reBindEvent(H,C);D.on("mousemove.fliphtml5Remark touchmove.fliphtml5Remark",E);D.off("mouseup.fliphtml5Remark touchend.fliphtml5Remark").one("mouseup.fliphtml5Remark touchend.fliphtml5Remark",function(m){var n=m.originalEvent.changedTouches;if(n){if(k!==n[0].identifier){return}y=n[0].pageX;w=n[0].pageY}else{y=m.pageX,w=m.pageY}D.off("mousemove.fliphtml5Remark touchmove.fliphtml5Remark");if(10>Math.abs(y-A)||10>Math.abs(w-z)){d.left=I((y-F)/g.scale())+"px",d.top=I((w-G)/g.scale())+"px",d.width="280px",d.height="28px"}b.parsePresentValue(o);b.parsePresentValue(b.sizeWrap);H.css({outline:"none",backgroundColor:C?b.backgroundColor:b.highlightBackcolor,color:b.fontColor});H.trigger(_event._down);void 0!=b.onCreated&&b.onCreated[1].call(b.onCreated[0]);b.save()})}})},oneBindEvent:function(){var c=this;this.$document.on("keydown.flipHtml5RemarkDelete",function(k){var b=k.keyCode;k.altKey||k.ctrlKey||k.shiftKey||(c.editing&&b===KEY_CODE_DELETE&&c.currentEditor&&"flipHtml5Remark flipHtml5Store"!==c.currentEditor[0].className&&(c.currentEditor.remove(),c.removeSizeWrap(),c.save()),c.currentEditor&&b===KEY_CODE_LEFT&&b===KEY_CODE_RIGHT&&b===KEY_CODE_UP&&b===KEY_CODE_DOWN&&k.stopPropagation())})},parsePresentValue:function(p){if(document.getElementsByTagName("body")[0].contains(p)){var o,n;o=p.parentNode;var m=p.style,b=f(p);n=100/o.offsetHeight;o=100/o.offsetWidth;m.width=b.width()*o+"%";m.height=b.height()*n+"%";m.left=p.offsetLeft*o+"%";m.top=p.offsetTop*n+"%"}},reBindEvent:function(n,m){var l=this,b;n.on(_event._down,function(c){c.stopPropagation();f(this).css({outline:"none"});l.removeSizeWrap();l.addSizeWrap(this,m);n.on("mousedown.flipHtml5Annotation touchstart.flipHtml5Annotation",function(d){d.stopPropagation()})}).on("mousedown mouseup touchend",function(c){c.stopPropagation()});n.on("sizeChange",function(d,s,o,r,k){b=this.style;s&&(b.width=s-16+"px");o&&(b.height=o-16+"px");r&&(b.left=r+8+"px");k&&(b.top=k+8+"px");l.showToolbar(this,m)});n.on("change cut drop paste keydown",function(k){if(!(k.altKey||k.ctrlKey||k.shiftKey)){var r=this,q=r.offsetHeight,p=r.style,o=p.height;setTimeout(function(){p.height="auto";p.height=r.scrollHeight>q?100*r.scrollHeight/r.parentNode.offsetHeight+"%":o},0)}})},unbindCreateEvents:function(){this.contextArray&&(this.contextArray.css("cursor","auto"),this.contextArray.off("mousedown.fliphtml5Remark touchstart.fliphtml5Remark"))},newSizeWrap:function(){var C,B,A,z,y,x,w,o,d=this,F=1,b=d.sizeWrap=document.createElement("div"),G=[],D=Math.floor,E=d.sizeWrapStyle=b.style;for(b.className="flipHtml5SizeWrap";9>F;){C=document.createElement("div"),C.className="flipHtml5SizePoint flipHtml5SizePoint"+F,b.appendChild(C),G.push(C),F++}d.northResize(G[0]).westResize(G[0]);d.northResize(G[1]);d.eastResize(G[2]).northResize(G[2]);d.eastResize(G[3]);d.eastResize(G[4]).southResize(G[4]);d.southResize(G[5]);d.southResize(G[6]).westResize(G[6]);d.westResize(G[7]);f(b).on("pointerdown.flipHtml5SizeWrap",function(c){c.stopPropagation()});f(b).on("mousedown.flipHtml5SizeWrap touchstart.flipHtml5SizeWrap",function(p){p.preventDefault();p.stopPropagation();o=d.currentEditor;var m=b.offsetLeft,l=b.offsetTop,k=p.pageX||p.originalEvent.touches[0].pageX,n=p.pageY||p.originalEvent.touches[0].pageY;f.each([d.$context,f(d.toolbarContainer),f(d.highlightToolbarContainer)],function(r,q){q.on("mousemove.flipHtml5SizeWrap touchmove.flipHtml5SizeWrap",function(c){c.preventDefault();c.stopPropagation();B=c.pageX?c.pageX:c.originalEvent.touches?c.originalEvent.touches[0].pageX:0;A=c.pageY?c.pageY:c.originalEvent.touches?c.originalEvent.touches[0].pageY:0;B&&(w=D(m-(k-B)/g.scale()),y!==w&&(E.left=w+"px",y=w,o.trigger("sizeChange",[0,0,w,0])));A&&(x=D(l-(n-A)/g.scale()),z!==x&&(E.top=x+"px",z=x,o.trigger("sizeChange",[0,0,0,x])))});q.one("mouseup.flipHtml5SizeWrap touchend.flipHtml5SizeWrap",function(){f.each([d.$context,f(d.toolbarContainer),f(d.highlightToolbarContainer)],function(){this.off("mouseup.flipHtml5SizeWrap touchend.flipHtml5SizeWrap");this.off("mousemove.flipHtml5SizeWrap touchmove.flipHtml5SizeWrap")});d.parsePresentValue(o[0]);d.parsePresentValue(b);d.save()})})}).on(_event._down,function(c){c.preventDefault();c.stopPropagation()});return b},addSizeWrap:function(n,m){var l=this.sizeWrap,b=this.sizeWrap.style;m?(n.style.zIndex=999,b.zIndex=998):(n.style.zIndex=998,b.zIndex=999);b.width=n.offsetWidth+16+"px";b.height=n.offsetHeight+16+"px";b.left=n.offsetLeft-8+"px";b.top=n.offsetTop-8+"px";b.display="block";n=f(n);this.$context=n.parent();n.before(l);this.parsePresentValue(l);this.currentEditor=n;this.showToolbar(n,m);this.editing=!0},removeSizeWrap:function(){this.currentEditor[0].style.zIndex="2";this.sizeWrapStyle.zIndex="1";this.sizeWrapStyle.display="none";this.hideToolbar();this.editing=!1},hideToolbar:function(){this.toolbarContainer.style.display="none";this.highlightToolbarContainer.style.display="none"},showToolbar:function(r,q){var p=q?this.toolbarContainer:this.highlightToolbarContainer,o=p.style,n=f(r),b=n.css("backgroundColor").replace(/\s+/g,"");0<=b.indexOf("rgba")&&(b=b.replace(/a/,"").replace(/\,[0-9]+(\.[0-9]*)?\)/,")"));f(p).find(".flipHtml5RemarkImage-backcolor").css("backgroundColor",b);this.currentEditor=n;o.left=n.offset().left-8+"px";o.top=n.offset().top-(q?80:30)+"px";o.display="block"},createToolbar:function(){for(var l=this.toolbarContainer=document.createElement("div"),k=0,b="bold italic strikeThrough underline forecolor backcolor blockquote insertUnorderedList insertOrderedList justifyLeft justifyCenter justifyRight createLink removeFormat outdent indent undo redo delete paragraph fontsize fontname".split(" ");b[k];){l.appendChild(this.createButton(b[k])),k++}l.className="fliphtml5RemarkToolbarContainer";f(l).on(_event._down,function(c){c.stopPropagation()});return l},createHighlightToolbar:function(){for(var l=this.highlightToolbarContainer=document.createElement("div"),k=0,b=["backcolor","delete"];b[k];){l.appendChild(this.createButton(b[k],!0)),k++}l.className="fliphtml5RemarkHighlightToolbarContainer";f(l).on(_event._down,function(c){c.preventDefault();c.stopPropagation()});return l},createButton:function(p,o){var n=this,m,b;switch(p){case"hr":return b=document.createElement("hr"),b.className="flipHtml5RemarkHr",b;case"paragraph":return m="Paragraph;Address;Preformatted;Title 1;Title 2;Title 3;Title 4;Title 5;Title 6".split(";"),b="p address pre h1 h2 h3 h4 h5 h6".split(" "),b=n.createSelect(m,b,p);case"fontname":return m="Arial Century Courier Gentium Georgiae Impact King Lalit Modena Papyrus Tahoma TeX Times Verdana Verona cursive fantasy monospace serif".split(" "),b="Arial Century Courier Gentium Georgiae Impact King Lalit Modena Papyrus Tahoma TeX Times Verdana Verona cursive fantasy monospace serif".split(" "),b=n.createSelect(m,b,p,"fontFamily");case"fontsize":return m=[1,2,3,4,5,6,7],b=[1,2,3,4,5,6,7],b=n.createSelect(m,b,p,"fontSize");case"forecolor":return n.createColorButton(p);case"backcolor":return n.createColorButton(p,o);default:return m=document.createElement("a"),m.href="javascript:void(0);",b=document.createElement("div"),b.className="flipHtml5RemarkButtonImage flipHtml5RemarkImage-"+p,b.title=p,m.className="flipHtml5RemarkButton",f(m).on(_event._down,function(c){c.preventDefault();c.stopPropagation();n.exec(p)}),m.appendChild(b),m}},createColorButton:function(v,t){var r,q,o,b,u=this,s;r=document.createElement("a");r.href="javascript:void(0);";q=document.createElement("div");q.className="flipHtml5RemarkButtonImage flipHtml5RemarkImage-"+v;q.title=v;r.className="flipHtml5RemarkButton";o=document.createElement("div");o.className="flipHtml5RemarkColorBar";"backcolor"===v&&(o.style.display="none");f(r).on(_event._down,function(c){c.preventDefault();c.stopPropagation();s=u.opacityHandel;b=u.colorSelector;f(r).after(b);b.style.left=this.offsetLeft+"px";b.style.top=this.offsetTop+22+"px";b.style.display="block";"forecolor"===v&&(s.hide(),u.opacity=1);"backcolor"===v&&(u.opacity=s.val(),s.show());s.setOpacity(parseFloat(parseFloat(u.currentEditor.css("backgroundColor").replace(/\s*\)*/g,"").split(",")[3]).toFixed(2)));u.$context.one(_event._down,function(d){d.preventDefault();b.style.display="none"});u.currentEditor.one(_event._down,function(d){d.preventDefault();b.style.display="none"});u.$bookContainer.one(_event._down,function(d){d.preventDefault();b.style.display="none"});u.$colorSelector.off("colorSelected").one("colorSelected",function(d,k){d.preventDefault();"backcolor"===v?q.style.backgroundColor=k:o.style.backgroundColor=k;b.style.display="none";u.exec(v,k,t)})});r.appendChild(o);r.appendChild(q);return r},createSelect:function(y,x,w,v,u){var t=document.createElement("select"),s=0,r=this,o;t.className="flipHtml5RemarkSelect flipHtml5Remark-"+w;for(t.style[v]=x[1];y[s];){o=document.createElement("option"),o.className="flipHtml5RemarkOption-"+w+" flipHtml5RemarkOption-"+x[s],o.innerHTML=y[s],o.value=x[s],o.style[v]=x[s],0===s&&(o.setAttribute("selected",!0),u&&(o.style.display="none")),t.appendChild(o),s++}t.onchange=v?function(){r.exec(w,this[this.selectedIndex].value);this.style[v]=this[this.selectedIndex].value;u&&(this.selectedIndex=0)}:function(){r.exec(this[this.selectedIndex].value);u&&(this.selectedIndex=0)};return t},createColorSelector:function(){var C,B,A,z,y=this,x="#FF0000 #FF5555 #FF55AA #FF55FF #FFAA55 #FFAAAA #FFAAFF #FFFF55 #FFFFAA #FFFFFF #CC0000 #CC5555 #CC55AA #CC55FF #CCAA55 #CCAAAA #CCAAFF #CCFF55 #CCFFAA #CCFFFF #AA0000 #AA5555 #AA55AA #AA55FF #AAAA55 #AAAAAA #AAAAFF #AAFF55 #AAFFAA #AAFFFF #880000 #885555 #8855AA #8855FF #88AA55 #88AAAA #88AAFF #88FF55 #88FFAA #88FFFF #550000 #555555 #5555AA #5555FF #55AA55 #55AAAA #55AAFF #55FF55 #55FFAA #55FFFF #220000 #225555 #2255AA #2255FF #22AA55 #22AAAA #22AAFF #22FF55 #22FFAA #22FFFF #000000 #005555 #0055AA #0055FF #00AA55 #00AAAA #00AAFF #00FF55 #00FFAA #00FFFF".split(" "),w=document.createElement("table"),u=this.colorSelector=document.createElement("a"),o=this.$colorSelector=f(u),E=document.createElement("input"),b=y.createOpacityPlugin(),F=function(){E.value=E.style.backgroundColor=this.title.toUpperCase()},D=function(){o.trigger("colorSelected",[y.parseColorToRGBA(this.title,b.val())])};u.className="flipHtml5RemarkColorSelectorWrap";w.setAttribute("border","1");u.style.display="none";u.href="javascript:void(0);";E.className="flipHtml5RemarkColorSelectorMessage";E.value="#000000";E.setAttribute("disabled","true");u.appendChild(E);u.appendChild(b.container);u.appendChild(w);o.on(_event._down,function(c){c.preventDefault();c.stopPropagation()});for(A=0;7>A;A++){z=document.createElement("tr");for(B=0;10>B;B++){C=document.createElement("td"),C.className="flipHtml5RemarkColorSelectorBlock",C.title=x[10*A+B],C.style.backgroundColor=x[10*A+B],f(C).on(_event._over,F),f(C).on(_event._down,D),z.appendChild(C)}w.appendChild(z)}return u},createOpacityPlugin:function(){var P,O,N,M,L,K,J=0.5,I=this,H=Math.floor,E=document.createElement("div"),G=document.createElement("div"),F=document.createElement("span"),C=G.style,D,A=I.$document,o=I.changeOpacity,B=f(G),b=f(E);F.className="flipHtml5RemarkOpacitySpan";E.className="flipHtml5RemarkOpacity";E.style.height="3px";E.style.top="4px";G.className="flipHtml5RemarkOpacityCursor";G.style.top="-5px";E.appendChild(F);E.appendChild(G);b.on(_event._down,function(c){c.preventDefault();c.stopPropagation();D=I.currentEditor;if(O=c.pageX?c.pageX:c.originalEvent.touches?c.originalEvent.touches[0].pageX:0){N=O-b.offset().left,0>N&&(N=0),145<N&&(N=145),C.left=N+"px",D.css("backgroundColor",o(D,N/145)),F.innerHTML="Opacity: "+(N/145).toFixed(2),J=N/145}});B.on("mousedown touchstart",function(c){c.preventDefault();c.stopPropagation();D=I.currentEditor;N=M=parseInt(C.left,10);P=c.pageX?c.pageX:c.originalEvent.touches?c.originalEvent.touches[0].pageX:0;L=N-P;A.on("mousemove.flipHtml5RemarkOpacity touchmove.flipHtml5RemarkOpacity",function(d){d.preventDefault();d.stopPropagation();if(O=d.pageX?d.pageX:d.originalEvent.touches?d.originalEvent.touches[0].pageX:0){K=H(L+O),0>K&&(K=0),145<K&&(K=145),M!==K&&(C.left=K+"px",D.css("backgroundColor",o(D,K/145)),F.innerHTML="Opacity: "+(K/145).toFixed(2),J=K/145)}});A.one("mouseup touchend",function(){A.off("mousemove.flipHtml5RemarkOpacity touchmove.flipHtml5RemarkOpacity")})});return this.opacityHandel={val:function(c){c&&(c=parseInt(c,10)||1,1<c&&(c=1),0>c&&(c=0),this.setOpacity(c),J=c);return J},container:E,show:function(){E.style.display=""},hide:function(){E.style.display="none"},setOpacity:function(c){if(void 0===c||1<c||isNaN(c)){c=1}0>c&&(c=0);C.left=145*c+"px";F.innerHTML="Opacity: "+c;J=c}}},changeOpacity:function(k,m){var l=k.css("backgroundColor").replace(/\s*/g,"");0<=l.indexOf("rgba")&&(0<=l.indexOf(",0)")||0<=l.indexOf(",1)"))?k.css("backgroundColor",l.replace(/b\(/,"ba(").replace(/,\d*\)$/,","+m+")")):k.css("backgroundColor",l.replace(/b\(/,"ba(").replace(/d*\)$/,","+m+")").replace(/\d*\.\d*,/g,""))},parseColorToRGBA:function(m,q){var p,o,n;q=parseFloat(q);1<=q&&(q=1);0>=q&&(q=0);p=parseInt(m.substring(1,3),16);o=parseInt(m.substring(3,5),16);n=parseInt(m.substring(5,7),16);return"rgba("+p+","+o+","+n+","+q+")"},exec:function(k,m,l){switch(k){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"address":case"pre":case"p":case"blockquote":document.execCommand("formatBlock",!1,k);break;case"createLink":(k=prompt("Enter a URL here","http://"))&&""!==k&&"http://"!==k&&(0>k.indexOf("http")&&(k="http://"+k),document.execCommand("createLink",!0,k));break;case"fontsize":document.execCommand(k,!1,m);break;case"fontname":document.execCommand(k,!1,m);this.fontName=m;break;case"forecolor":document.execCommand(k,!1,m);this.fontColor=m;break;case"backcolor":this.currentEditor[0].style.backgroundColor=m;l?this.highlightBackcolor=m:this.backgroundColor=m;break;case"delete":this.removeSizeWrap();this.currentEditor.remove();this.save();break;default:document.execCommand(k,!1,null)}this.currentEditor.trigger(_event._down)},northResize:function(x){var w,v,u,s,r,o=this,d=Math.floor,b,y;f(x).on("mousedown.fliphtml5RemarkResize touchstart.fliphtml5RemarkResize",function(k){k.preventDefault();k.stopPropagation();v=o.currentEditor;b=o.sizeWrap;y=o.sizeWrapStyle;r=o.$context;var m=b.offsetHeight||20,l=k.pageY||k.originalEvent.touches[0].pageY;r.one("mouseup.fliphtml5RemarkResize touchend.fliphtml5RemarkResize",function(){r.off("mousemove.fliphtml5RemarkResize touchmove.fliphtml5RemarkResize");o.parsePresentValue(v[0]);o.parsePresentValue(b);o.save()});r.on("mousemove.fliphtml5RemarkResize touchmove.fliphtml5RemarkResize",function(c){c.preventDefault();c.stopPropagation();c.pageY?w=c.pageY:c.originalEvent.touches&&(w=c.originalEvent.touches[0].pageY);w&&(s=d(m+(l-w)/g.scale()),u!==s&&20<s&&(y.top=w-r.offset().top+"px",y.height=s+"px",u=s,v.trigger("sizeChange",[0,s,0,w-r.offset().top])))})});return this},westResize:function(x){var w,v,u,s,r,o=this,d=Math.floor,b,y;f(x).on("mousedown.fliphtml5RemarkResize touchstart.fliphtml5RemarkResize",function(k){k.preventDefault();k.stopPropagation();r=o.$context;b=o.sizeWrap;y=o.sizeWrapStyle;s=o.currentEditor;var m=b.offsetWidth||40,l=k.pageX||k.originalEvent.touches[0].pageX;r.one("mouseup.fliphtml5RemarkResize touchend.fliphtml5RemarkResize",function(){r.off("mousemove.fliphtml5RemarkResize touchmove.fliphtml5RemarkResize");o.parsePresentValue(s[0]);o.parsePresentValue(b);o.save()});r.on("mousemove.fliphtml5RemarkResize touchmove.fliphtml5RemarkResize",function(c){c.preventDefault();c.stopPropagation();!(w=c.pageX)&&c.originalEvent.touches&&(w=c.originalEvent.touches[0].pageX);w&&(u=d(m+(l-w)/g.scale()),v!==u&&40<u&&(y.left=w-r.offset().left+"px",y.width=u+"px",v=u,s.trigger("sizeChange",[u,0,w-r.offset().left])))})});return this},eastResize:function(x){var w,v,u,s,r,o=this,d=Math.floor,b,y;f(x).on("mousedown.fliphtml5RemarkResize touchstart.fliphtml5RemarkResize",function(k){k.preventDefault();k.stopPropagation();u=o.currentEditor;r=o.$context;b=o.sizeWrap;y=o.sizeWrapStyle;var m=b.offsetWidth||40,l=k.pageX||k.originalEvent.touches[0].pageX;r.one("mouseup.fliphtml5RemarkResize touchend.fliphtml5RemarkResize",function(){r.off("mousemove.fliphtml5RemarkResize touchmove.fliphtml5RemarkResize");o.parsePresentValue(u[0]);o.parsePresentValue(b);o.save()});r.on("mousemove.fliphtml5RemarkResize touchmove.fliphtml5RemarkResize",function(c){c.preventDefault();c.stopPropagation();c.pageX?w=c.pageX:c.originalEvent.touches&&(w=c.originalEvent.touches[0].pageX);w&&(v=d(m-(l-w)/g.scale()),s!==v&&40<v&&(y.width=v+"px",s=v,u.trigger("sizeChange",[v])))})});return this},southResize:function(x){var w,v,u,s,r=this,o=Math.floor,d,b,y;f(x).on("mousedown.fliphtml5RemarkResize touchstart.fliphtml5RemarkResize",function(k){k.preventDefault();k.stopPropagation();s=r.$context;y=r.sizeWrap;b=r.sizeWrapStyle;v=r.currentEditor;var m=y.offsetHeight||20,l=k.pageY||k.originalEvent.touches[0].pageY;s.one("mouseup.fliphtml5RemarkResize touchend.fliphtml5RemarkResize",function(){s.off("mousemove.fliphtml5RemarkResize touchmove.fliphtml5RemarkResize");r.parsePresentValue(v[0]);r.parsePresentValue(y);r.save()});s.on("mousemove.fliphtml5RemarkResize touchmove.fliphtml5RemarkResize",function(c){c.preventDefault();c.stopPropagation();c.pageY?w=c.pageY:c.originalEvent.touches&&(w=c.originalEvent.touches[0].pageY);w&&(u=o(m-(l-w)/g.scale()),d!==u&&20<u&&(b.height=u+"px",d=u,v.trigger("sizeChange",[0,u])))})});return this},parseRemark:function(r,q){var p,o=this,n;q.find(".flipHtml5Store").remove();o.removeSizeWrap();this.sizeWrapStyle&&(this.sizeWrapStyle.display="none",f(this.sizeWrap).remove());o.newSizeWrap();o.contextArray=o.contextArray?o.contextArray.add(q):q;try{window.localStorage?p=window.localStorage.getItem(window.location.href.replace(window.location.hash,"")+"flipHtml5Remark"+r)||"":(n=RegExp("(?:(?:^|.*;\\s*)"+window.location.href.replace(window.location.hash,"")+"flipHtml5Remark"+r+"\\s*\\=\\s*([^;]*).*$)|^.*$"),p=(document.cookie||"").replace(n,"$1")),q.append(p.replace(/#@&/g,";")),q.find(".flipHtml5Remark").each(function(){o.reBindEvent(f(this),!0)}),q.find(".flipHtml5Highlight").each(function(){o.reBindEvent(f(this),!1)}),q.on("mousedown.fliphtml5remarkHide touchstart.fliphtml5remarkHide",function(){o.save();o.removeSizeWrap();o.currentEditor.blur();o.currentEditor.off("mousedown.flipHtml5Annotation touchstart.flipHtml5Annotation")})}catch(b){}},getPageContent:function(n){var m=0,l,b="";for(n=n.find(".flipHtml5Store");l=n[m];){if(m++,""!==l.innerHTML&&""!==f(l).text()||""!==l.style.backgroundColor&&"transparent"!==l.style.backgroundColor&&0!==parseFloat(l.style.backgroundColor.split(",")[3])){b+=l.outerHTML}}return b.replace(/\s*\n\s*/g,"").replace(/;/g,"#@&")},storageByIndex:function(m,q){var p,o=this.getPageContent(q);try{window.localStorage?(window.localStorage.removeItem(window.location.href.replace(window.location.hash,"")+"flipHtml5Remark"+m),o&&window.localStorage.setItem(window.location.href.replace(window.location.hash,"")+"flipHtml5Remark"+m,o)):(o?(p=new Date,p.setDate(p.getDate()+this.expires)):p=new Date("01 Jan 1970 00:00:01"),document.cookie=window.location.href.replace(window.location.hash,"")+"flipHtml5Remark"+m+"="+o+";expires="+p.toUTCString()+";")}catch(n){throw n}return o},save:function(){var d,k=g.getCurrentPages();for(d=0;d<k.length&&this.noteImgContainers[g.getBookType()];d++){this.noteImgContainers[g.getBookType()][k[d]]&&this.storageByIndex(k[d],this.noteImgContainers[g.getBookType()][k[d]])}},restoreRemark:function(d,l,k){void 0!==d&&(this.noteImgContainers[d]||(this.noteImgContainers[d]={}),this.noteImgContainers[d][l]=k,d==g.getBookType()&&(this.removeSizeWrap(),this.parseRemark(l,this.noteImgContainers[g.getBookType()][l])))},setContainers:function(k,m,l){this.restoreRemark(k,m,l)},addHighlightEvent:function(){this.unbindCreateEvents();this.addEvents(!0)},addEvents:function(l){var o=0,n,m=this.contextArray;for(this.unbindCreateEvents();n=m.eq(o++),0<n.length;){this.bindCreateEvents(n,!l)}},destroy:function(d){if(d){try{window.localStorage.clear()}catch(k){throw k}}this.$document.off("keydown.flipHtml5RemarkDelete");return this.unbindCreateEvents()}})})(window.jQuery,window.Class,window.BookInfo);jQuery.fn.colorSelection=function(c){this.getColor=function(){return this.color}.bind(this);this.refreshColor=function(){var d=getRandomColor();this.setColor(d)}.bind(this);this.setColor=function(d){this.color=d;$(this).css("background-color",d);$(this).attr("data-color",d)}.bind(this);this.create=function(f){var g=this;f=f?f:getRandomColor();this.setColor(f);this.colorPanel=new ColorPanel(this);this.on("click touchstart",function(d){g.colorPanel.setPosition($(this).offset().left,$(this).offset().top+$(this).outerHeight());g.colorPanel.show();d.stopPropagation()})}.bind(this);this.getColorPanel=function(){return this.colorPanel}.bind(this);this.hideColorPanel=function(){this.colorPanel.hide()}.bind(this);this.create(c)};var ColorPanel=function(c){this.helixColors="#FF0000 #FF5555 #FF55AA #FF55FF #FFAA55 #FFAAAA #FFAAFF #FFFF55 #FFFFAA #FFFFFF #CC0000 #CC5555 #CC55AA #CC55FF #CCAA55 #CCAAAA #CCAAFF #CCFF55 #CCFFAA #CCFFFF #AA0000 #AA5555 #AA55AA #AA55FF #AAAA55 #AAAAAA #AAAAFF #AAFF55 #AAFFAA #AAFFFF #880000 #885555 #8855AA #8855FF #88AA55 #88AAAA #88AAFF #88FF55 #88FFAA #88FFFF #550000 #555555 #5555AA #5555FF #55AA55 #55AAAA #55AAFF #55FF55 #55FFAA #55FFFF #220000 #225555 #2255AA #2255FF #22AA55 #22AAAA #22AAFF #22FF55 #22FFAA #22FFFF #000000 #005555 #0055AA #0055FF #00AA55 #00AAAA #00AAFF #00FF55 #00FFAA #00FFFF".split(" ");this.table=$("<table class='color_panel' border=1></table>");this.addItem();$("body").append(this.table);this.selection=c};ColorPanel.prototype={addItem:function(){for(var k=this,p=0;7>p;p++){for(var o=$("<tr></tr>"),n=0;10>n;n++){var m=$("<td></td>"),l=this.helixColors[10*p+n];m.attr("title",l);m.css("background-color",l);m.on("mouseenter",function(){k.showColorSelection(this.title)});m.on("click touchstart",function(){k.colorSelected(this.title)});o.append(m)}this.table.append(o)}},showColorSelection:function(c){c=c.toUpperCase();this.selection.setColor(c)},colorSelected:function(c){this.hide();c=c.toUpperCase();this.selection.setColor(c)},hide:function(){this.table.hide()},show:function(){this.table.css("display","table-cell")},setPosition:function(d,f){this.table.css({left:d+"px",top:f+"px"})}};var getRandomColor=function(){return"#"+Math.floor(2236962+7829367*Math.random()).toString(16)},BookmarkElements=Class({create:function(c){this._super(c);this.initElements();this.initEvent(c);this.pickElements(c)},initElements:function(){this.input=$("<input class='input_title'></input>");this.colorSelection=$("<input class='colorSelection' type='text'></input>");this.colorSelection.colorSelection();this.rightToLeft?this.initRightToLeftDefaultDom():this.initLeftToRightDefaultDom();this.remove=$("<div class='removeAll button_hover'>"+getLanguage("lblRemoveAll","Remove All")+"</div>")},initRightToLeftDefaultDom:function(){this.leftAddPage=$("<div class='add_page left button_hover'><span class='pageIndex'></span> "+getLanguage("lblAddToPage","Add To Page")+"</div>");this.rightAddPage=$("<div class='add_page button_hover'><span class='pageIndex'></span> "+getLanguage("lblAddToPage","Add To Page")+"</div>");this.bookmarkListTitle=$("<div class='list_title'><span class='edit'>"+getLanguage("lblEdit","Edit")+"</span><span class='description'>"+getLanguage("lblDescription","Title")+"</span><span class='page'>"+getLanguage("lblPage","Page")+"</span></div>")},initLeftToRightDefaultDom:function(){this.leftAddPage=$("<div class='add_page left'>"+getLanguage("lblAddToPage","Add To Page")+" <span class='pageIndex'></span></div>");this.rightAddPage=$("<div class='add_page'>"+getLanguage("lblAddToPage","Add To Page")+" <span class='pageIndex'></span></div>");this.bookmarkListTitle=$("<div class='list_title'><span class='page'>"+getLanguage("lblPage","Page")+"</span><span class='description'>"+getLanguage("lblDescription","Title")+"</span><span class='edit'>"+getLanguage("lblEdit","Edit")+"</span></div>")},pickElements:function(c){c&&(c.input=this.input,c.colorSelection=this.colorSelection,c.remove=this.remove,c.leftAddPage=this.leftAddPage,c.rightAddPage=this.rightAddPage,c.bookmarkListTitle=this.bookmarkListTitle)},initEvent:function(c){this.leftAddPage.click(function(){var b={pageIndex:this.leftPageIndex,caption:this.input.val(),color:this.colorSelection.getColor()};c.addItem(b)}.bind(this));this.rightAddPage.click(function(){var b={pageIndex:this.rightPageIndex,caption:this.input.val(),color:this.colorSelection.getColor()};c.addItem(b)}.bind(this));this.remove.click(function(){c.removeAll()}.bind(this));this.input.bind("mousedown touchstart pointerdown mouseover mousemove",function(d){d.stopPropagation()})},refreshElements:function(){this.refreshAddPageButtonOnPc();this.refreshAddPageButtonOnPhone()},refreshAddPageButtonOnPc:function(){if(!isPhone()&&!isPad()){0>=this.bookmarkList.getLength()?this.remove.hide():this.remove.show();var c=BookInfo.getCurrentPages();this.leftPageIndex=parseInt(c[0]);this.rightPageIndex=parseInt(c[1]);this.showOrHideAddPageBtn();this.focusAddPageBtn()}},refreshAddPageButtonOnPhone:function(){if(isPhone()||isPad()){for(var d=BookInfo.getCurrentPages(),f=0;f<d.length;f++){if(this.bookmarkList.inList(d[f])){toolBar.buttons.find("PhoneBookmarkButton",!0).get(0).setAsAdded();return}}toolBar.buttons.find("PhoneBookmarkButton",!0).get(0).setAsUnAdded()}},showOrHideAddPageBtn:function(){this.leftPageIndex?(this.leftAddPage.find(".pageIndex").html(getShownPageNumber(this.leftPageIndex)),this.leftAddPage.show()):this.leftAddPage.hide();this.rightPageIndex?(this.rightAddPage.find(".pageIndex").html(getShownPageNumber(this.rightPageIndex)),this.rightAddPage.show()):this.rightAddPage.hide()},focusAddPageBtn:function(){this.leftPageIndex&&!this.bookmarkList.inList(this.leftPageIndex)?(this.leftAddPage.removeClass("disable"),this.leftAddPage.addClass("usable"),this.leftAddPage.addClass("button_hover")):(this.leftAddPage.addClass("disable"),this.leftAddPage.removeClass("usable"),this.leftAddPage.removeClass("button_hover"));this.rightPageIndex&&!this.bookmarkList.inList(this.rightPageIndex)?(this.rightAddPage.removeClass("disable"),this.rightAddPage.addClass("usable"),this.rightAddPage.addClass("button_hover")):(this.rightAddPage.addClass("disable"),this.rightAddPage.removeClass("usable"),this.rightAddPage.removeClass("button_hover"))},changeLanguage:function(){}}).extend(FormElements),BookmarkItem=Class({create:function(d,f){this.callback=f;this.parm={color:d.color,caption:d.caption,pageIndex:parseInt(d.pageIndex)};this.item=$("<div class='item' pageIndex='"+parseInt(d.pageIndex)+"' id='bookmark_item"+parseInt(d.pageIndex)+"'></div>");this.saveUrl=form_icons.save?"data:image/png;base64,"+form_icons.save:uiBaseURL+"save.png";this.cancelUrl=form_icons.cancel?"data:image/png;base64,"+form_icons.cancel:uiBaseURL+"cancel.png";this.editUrl=form_icons.edit?"data:image/png;base64,"+form_icons.edit:uiBaseURL+"edit.png";this.deleteUrl=form_icons["delete"]?"data:image/png;base64,"+form_icons["delete"]:uiBaseURL+"delete.png";this.fontColor=d.fontColor;this.color=d.color;this.caption=d.caption;this.pageCaption=getShownPageNumber(parseInt(d.pageIndex));this.pageIndex=parseInt(d.pageIndex);this.colorObj=Color(this.fontColor);this.initDefaultDom();this.initHtml();this.initEvent()},initHtml:function(){rightToLeft?this.initRightToLeftHtml():this.initLeftToRightHtml();this.deleteIcon.changeButtonColor(this.fontColor);this.edit.changeButtonColor(this.fontColor);this.cancel.changeButtonColor(this.fontColor);this.save.changeButtonColor(this.fontColor)},initRightToLeftHtml:function(){this.item.append(this.deleteIcon);this.item.append(this.edit);this.item.append(this.cancel);this.item.append(this.save);this.item.append(this.title);this.item.append(this.colorSelection);this.item.append(this.page)},initLeftToRightHtml:function(){this.item.append(this.page);this.item.append(this.title);this.item.append(this.colorSelection);this.item.append(this.save);this.item.append(this.cancel);this.item.append(this.edit);this.item.append(this.deleteIcon)},initDefaultDom:function(){this.page=$("<span class='page'>"+this.pageCaption+"</span>");this.title=$("<input class='title' title='"+this.caption+"' value='"+this.caption+"' disabled='disabled'></input>");this.colorSelection=$("<input class='colorSelection' type='text'></input>");this.colorSelection.colorSelection(this.color);this.save=$("<img class='save' title='save' src='"+this.saveUrl+"'/>");this.cancel=$("<img class='cancel' title='cancel' src='"+this.cancelUrl+"'/>");this.edit=$("<img class='edit' title='edit' src='"+this.editUrl+"'/>");this.deleteIcon=$("<img class='delete' title='delete' src='"+this.deleteUrl+"'/>");this.title.css({color:this.fontColor})},appendTo:function(c){c.append(this.item)},insertBefore:function(c){this.item.insertBefore(c)},insertAfter:function(c){this.item.insertAfter(c)},initEvent:function(){this.edit.onTap(function(){this.startEdit()}.bind(this));this.cancel.onTap(function(){this.endEdit();this.cancelData()}.bind(this));this.save.onTap(function(){this.endEdit();this.saveData()}.bind(this));this.deleteIcon.onTap(function(){this.item.remove();this.callback.deleteItem(this.parm.pageIndex)}.bind(this));this.item.onTap(function(){this.lightItem();this.judgeToSaveOrCancel()}.bind(this));this.title.bind("keypress",function(c){"13"==c.keyCode&&(this.endEdit(),this.saveData())}.bind(this));this.item.onDoubleTap(function(){this.startEdit()}.bind(this))},saveData:function(){var d=this.colorSelection.getColor(),f=this.title.val();if(f!=this.caption||d!=this.color){this.caption=f,this.color=d,this.parm={pageIndex:this.pageIndex,caption:this.caption,color:this.color},this.callback.editItem(this.parm)}},cancelData:function(){var c=this.colorSelection.getColor();this.title.val()!=this.caption&&this.title.val(this.caption);c!=this.color&&this.colorSelection.setColor(this.color)},endEdit:function(){this.colorSelection.hide();this.colorSelection.hideColorPanel();this.cancel.hide();this.save.hide();this.edit.show();this.title.css({background:"transparent",color:this.fontColor});this.title.attr("disabled","disabled");global.bookmark.editingItem=null},startEdit:function(){this.judgeToSaveOrCancel();this.lightItem();this.colorSelection.show();this.cancel.show();this.save.show();this.edit.hide();this.title.css({background:"#ffffff",color:"#000000"});this.title.removeAttr("disabled");global.bookmark.editingItem=this;this.cancel.changeButtonColor(this.fontColor);this.save.changeButtonColor(this.fontColor)},judgeToSaveOrCancel:function(){global.bookmark.editingItem&&global.bookmark.editingItem!=this&&(global.bookmark.editingItem.cancelData(),global.bookmark.editingItem.endEdit())},lightItem:function(){$(".bookmarkItem_focus").css({background:"transparent"});$(".bookmarkItem_focus").removeClass("bookmarkItem_focus");this.item.addClass("bookmarkItem_focus");this.item.css({background:this.colorObj.rgba(0.25)})}}),PhoneBookmarkItem=Class({create:function(d,f){this.parm=d;this.color=d.color;this.caption=d.caption;this.pageCaption="P:"+parseInt(d.pageIndex);this.pageIndex=parseInt(d.pageIndex);this.callback=f;this.item=$("<div class='item'></div>");this.page=$("<span class='page'>P:"+this.pageIndex+"</span>");this.image=$("<img class='thumbnail' src='"+getPageDir(this.pageIndex,"thumb",originTotalPageCount)+"'/>");this.caption=$("<span class='title'>"+this.caption+"</span>");this.deleteBtn=$("<div class='delete'></div>");this.item.append(this.page);this.item.append(this.image);this.item.append(this.caption);this.item.append(this.deleteBtn);this.initEvent()},appendTo:function(c){c.append(this.item)},initEvent:function(){this.deleteBtn.click(function(){this.item.remove();this.callback.deleteItem(this.pageIndex)}.bind(this));this.item.click(function(){gotoPageFun(this.pageIndex)}.bind(this))}}),AnalysisBookmark=Class({create:function(){this.bookmarkList=[];this.bookmarkDetaildList=[];this.key=window.location.href.replace(window.location.hash,"")+"BookMark";this.refresh()},refresh:function(){var d=this.getListFromLocalStorage();if(d&&0!=d.length){for(var f=0;f<d.length;f++){parseInt(d[f].pageIndex)&&this.bookmarkList.push(parseInt(d[f].pageIndex))}this.bookmarkDetaildList=d}},getListFromLocalStorage:function(){var c=this.getLocalStorage(this.key);return Instance.parse(c)},getList:function(){return this.bookmarkList},getItem:function(f){for(var h,g=0;g<this.bookmarkDetaildList.length;g++){if(parseInt(this.bookmarkDetaildList[g].pageIndex)==parseInt(f)){h=this.bookmarkDetaildList[g];break}}return h},editItem:function(f){for(var h=f.pageIndex,g=0;g<this.bookmarkDetaildList.length;g++){if(parseInt(this.bookmarkDetaildList[g].pageIndex)==parseInt(h)){this.bookmarkDetaildList[g].caption=f.caption;this.bookmarkDetaildList[g].color=f.color;break}}this.refreshLocalStorage()},addItem:function(d){var f=d.pageIndex;0>this.bookmarkList.indexOf(f)&&(this.bookmarkList.push(f),this.bookmarkDetaildList.push(d),this.sortList())},deleteItem:function(d){for(var f=0;f<this.bookmarkDetaildList.length;f++){if(parseInt(this.bookmarkDetaildList[f].pageIndex)==parseInt(d)){this.bookmarkDetaildList.remove(f);this.bookmarkList.remove(f);break}}this.refreshLocalStorage()},removeAll:function(){this.bookmarkList=[];this.bookmarkDetaildList=[];this.deleteLocalStorage(this.key)},sortList:function(){this.bookmarkList.sort(function(d,f){return d-f});for(var g=[],l=0;l<this.bookmarkList.length;l++){for(var k=this.bookmarkList[l],h=0;h<this.bookmarkDetaildList.length;h++){if(parseInt(this.bookmarkDetaildList[h].pageIndex)==parseInt(k)){g.push(this.bookmarkDetaildList[h]);break}}}this.bookmarkDetaildList=g;this.refreshLocalStorage()},getLocalStorage:function(d){try{if(window.localStorage[d]){return window.localStorage.getItem(d)}}catch(f){}},refreshLocalStorage:function(){try{window.localStorage&&window.localStorage.setItem(this.key,Instance.JSON(this.bookmarkDetaildList))}catch(c){}},deleteLocalStorage:function(d){try{window.localStorage[d]&&window.localStorage.setItem(d,"")}catch(f){}}}),BookmarkListData=Class({create:function(){this.initStaticList();this.initBookmarkList()},initBookmarkList:function(){this.analysisData=new AnalysisBookmark;this.bookmarkList=this.analysisData.getList()},initStaticList:function(){this.staticList=[];if(bmtConfig&&0!=bmtConfig.length){for(var d=bmtConfig.length,f=0;f<d;f++){this.staticList.push(bmtConfig[f].pageIndex)}}},addItem:function(c){this.inList(c.pageIndex)||this.analysisData.addItem(c)},deleteItem:function(c){this.analysisData.deleteItem(c)},editItem:function(c){this.analysisData.editItem(c)},refresh:function(){this.bookmarkList=this.analysisData.getList()},inList:function(c){return 0<=this.staticList.indexOf(c)||0<=this.bookmarkList.indexOf(c)?!0:!1},removeAll:function(){this.analysisData.removeAll()},getItem:function(c){return this.analysisData.getItem(c)},getList:function(){return this.bookmarkList},getNextItem:function(g){for(var l=0,k=this.bookmarkList.length,h=0;h<k;h++){if(this.bookmarkList[h]>g){l=this.bookmarkList[h];break}}return l},getPrevItem:function(g){for(var l=0,k=this.bookmarkList.length,h=0;h<k;h++){if(this.bookmarkList[h]>g){l=this.bookmarkList[h-1];break}}return l},getLength:function(){return this.bookmarkList.length}}),BookmarkListPanel=Class({create:function(c){this.callback=c;this.bookmarkList=new BookmarkListData;this.initSwiper()},onCreate:function(){},initSwiper:function(){this.bookmarkSwiper=$("<div class='bookmarkSwiper stage'></div>");this.bookmarkSwiperList=$("<div class='swiper'></div>");this.progress=$("<div class='progress'></div>");this.progressBar=$("<div class='progressBar'></div>");this.refreshSwiper();this.bookmarkSwiper.append(this.bookmarkSwiperList);isPhone()||isPad()?this.bookmarkSwiper.css({"overflow-y":"auto","overflow-x":"hidden","-webkit-overflow-scrolling":"touch"}):(this.progress=$("<div class='progress'></div>"),this.progressBar=$("<div class='progressBar'></div>"),this.bookmarkSwiper.append(this.progress),this.progress.append(this.progressBar),this.bookmarkSwiper.scroll({},Direction.top))},refreshSwiper:function(){for(var f=this.bookmarkList.getList(),h=f.length,g=0;g<h;g++){this.refreshItem(f[g])}},refreshItem:function(c){c=this.bookmarkList.getItem(c);this.newItem(c).appendTo(this.bookmarkSwiperList)},newItem:function(c){return new BookmarkItem(c,this.callback)},refreshListPanel:function(){if(!isPhone()&&!isPad()){this.bookmarkSwiper.css({height:"auto"});this.bookmarkSwiperList.css({position:"relative"});var c=this.bookmarkSwiper.height();this.bookmarkSwiper.find(".swiper").height();c>=this.maxHeight?(this.bookmarkSwiper.css({height:this.maxHeight+"px"}),this.bookmarkSwiperList.css({position:"absolute"})):this.bookmarkSwiperList.css({top:0});this.bookmarkSwiper.refreshData&&this.bookmarkSwiper.refreshData()}},addItem:function(f){if(!this.bookmarkList.inList(f.pageIndex)){var h=this.newItem(f);this.bookmarkList.addItem(f);if(1==this.bookmarkList.getLength()){h.appendTo(this.bookmarkSwiperList)}else{var g=this.getPrevItem(f.pageIndex);f=this.getNextItem(f.pageIndex);g.attr("pageIndex")?h.insertAfter(g):f.attr("pageIndex")?h.insertBefore(f):h.appendTo(this.bookmarkSwiperList)}this.refreshPanel()}},deleteItem:function(c){this.bookmarkList.deleteItem(c);this.refreshPanel()},editItem:function(c){this.bookmarkList.editItem(c);this.refreshPanel()},refresh:function(){this.bookmarkList.refresh()},getLength:function(){},inList:function(c){return this.bookmarkList.inList(c)?!0:!1},removeAll:function(){this.bookmarkSwiperList.empty();this.bookmarkList.removeAll()},getNextItem:function(c){c=this.bookmarkList.getNextItem(c);return $("#bookmark_item"+c)},getPrevItem:function(c){c=this.bookmarkList.getPrevItem(c);return $("#bookmark_item"+c)},refreshPanel:function(){this.refresh();this.refreshListPanel();BookInfo.getBook()&&BookInfo.getBook().bmt&&BookInfo.getBook().bmt.reload()},onResize:function(d,f){this.maxHeight=f;this.bookmarkSwiper.css("height",f+"px")}}),PhoneBookmarkListPanel=Class({create:function(c){this._super(c)},onCreate:function(){},newItem:function(c){return new PhoneBookmarkItem(c,this.callback)}}).extend(BookmarkListPanel),PcBookmarkFrame=Class({create:function(c){this.elements=new BookmarkElements(this);this.bookmarkListPanel=new PcBookmarkListPanel(this);this.elements.bookmarkList=this.bookmarkListPanel.bookmarkList;this._super(c)},onCreate:function(){},initHtml:function(){this.stage.append(this.title);this.stage.append(this.close);this.content=$("<div class='bookmark_content'></div>");this.stage.append(this.content);var c=$("<p class='inputForm'></p>");c.append(this.input);c.append(this.colorSelection);this.content.append(c);this.content.append(this.leftAddPage);this.content.append(this.rightAddPage);this.content.append(this.bookmarkListPanel.bookmarkListTitle);this.content.append(this.bookmarkListPanel.bookmarkSwiper);this.content.append(this.remove);this.parent.append(this.stage);this.refreshPanel()},refreshPanel:function(){this.bookmarkListPanel.refreshPanel();this.elements.refreshElements()},addItem:function(c){c&&c.caption&&c.pageIndex&&!this.bookmarkListPanel.inList(c.pageIndex)&&(this.bookmarkListPanel.addItem(c),this.colorSelection.refreshColor(),this.input.val(""),this.refreshPanel())},deleteItem:function(c){this.bookmarkListPanel.deleteItem(c);this.refreshPanel()},editItem:function(c){this.bookmarkListPanel.editItem(c);this.refreshPanel()},refreshItem:function(c){this.bookmarkListPanel.refreshItem(c)},removeAll:function(){this.bookmarkListPanel.removeAll();this.refreshPanel()},onResize:function(){this.refreshPanel()},onShow:function(){this.close.changeButtonColor(this.fontColor)}}).extend(SlideForm),PhoneBookmarkFrame=Class({create:function(c){this.elements=new BookmarkElements(this);this.bookmarkListPanel=new PhoneBookmarkListPanel(this);this.elements.bookmarkList=this.bookmarkListPanel.bookmarkList;this._super(c)},onCreate:function(){this.close.changeButtonColor(this.fontColor);this._super()},initHtml:function(){this.title.append(this.close);this.stage.append(this.title);this.stage.append(this.bookmarkListPanel.bookmarkSwiper);this.refreshPanel()},refreshPanel:function(){this.bookmarkListPanel.refreshPanel();this.elements.refreshElements()},addItem:function(c){c&&c.pageIndex&&!this.bookmarkListPanel.inList(c.pageIndex)&&(this.bookmarkListPanel.addItem(c),this.refreshPanel())},deleteItem:function(c){this.bookmarkListPanel.deleteItem(c);this.refreshPanel()},refreshItem:function(c){this.bookmarkListPanel.refreshItem(c)},onResize:function(){this._super();this.bookmarkListPanel.onResize(this.width,windowHeight-36);this.refreshPanel()},initEvent:function(){},onShow:function(){this.close.changeButtonColor(this.fontColor)}}).extend(PhoneFormFrame),PhoneBookmarkForm=Class({}).extend(PhoneBookmarkFrame);function grayBackground(h,n,m,l,k){this.sw=l;this.sh=k;this.background=$("<div ></div>");this.background.css({width:l+"px",height:k+"px",background:n,opacity:m,"z-index":200,position:"absolute",left:"0px",top:"0px"});h.append(this.background)}grayBackground.prototype.onResize=function(d,f){this.sw=d;this.sh=f;this.background.css({width:d+"px",height:f+"px"})};bdor[25]="i";grayBackground.prototype.setPosition=function(f,h,g){void 0==g&&(g=["left","top"]);this.background.css(g[0],f+"px");this.background.css(g[1],h+"px")};grayBackground.prototype.show=function(){this.father.append(this.background)};grayBackground.prototype.hide=function(){this.background.remove()};grayBackground.prototype.setZindex=function(c){this.background.css({"z-index":c})};grayBackground.prototype.onMouseUp=function(d,f){$(this.background).bind(_event._down,function(b){f.call(d)})};var textWidth=function(g,l){var k=$("<pre>"+g+"</pre>").css({color:bookConfig.iconColor,display:"none","font-size":l.size,"font-family":l.fontName});$("body").append(k);var h=Point(k.width(),k.height());k.remove();return h};function label(f,h){this.labelBox=$('<div style = "position : absolute;font-family:Tahoma,Georgia,Serif;font-size:12px">'+f+"</div>");if("null"!=f&&""!=f){this.caption=f;this.fontSize="12px";this.fontColor="#f0f0f0";this.fontName="Tahoma";var g=textWidth(f,{size:this.fontSize,fontName:this.fontName});this.width=g.x;this.height=g.y;h.append(this.labelBox)}}label.prototype.getWidth=function(){return this.width};bdor[27]="f";label.prototype.getHeight=function(){return this.height};label.prototype.getCaption=function(){return this.caption};label.prototype.setCaption=function(c){this.caption=c;this.labelBox[0].innerHTML=c;c=textWidth(c,{size:this.fontSize,fontName:this.fontName});this.width=c.x;this.height=c.y};label.prototype.setLabelPosition=function(f,h,g){void 0==g&&(g=["left","top"]);this.labelBox.css(g[0],f+"px");this.labelBox.css(g[1],h+"px")};label.prototype.onResize=function(d,f){this.width=d;this.height=f;this.labelBox.css({width:d+"px",height:f+"px"})};label.prototype.setFont=function(f,h,g){null==f?f=this.fontSize:this.fontSize=f;null==h?h=this.fontColor:this.fontColor=h;null==g?g=this.fontName:this.fontName=g;this.labelBox.css({"font-size":f,color:h,"font-family":g});f=textWidth(this.caption,{size:f,fontName:g});this.width=f.x;this.height=f.y};label.prototype.setFontSize=function(c){null==c?c=this.fontSize:this.fontSize=c;this.labelBox.css({"font-size":c});c=textWidth(this.caption,{size:c,fontName:this.fontName});this.width=c.x;this.height=c.y};label.prototype.riseAWord=function(d){var f=this.caption;-1==f.indexOf(d)&&(d=d.toLowerCase());-1!=f.indexOf(d)&&(newCaption=f.replaceAll(d,"<font color=red><strong>"+d+"</strong></font>"),this.labelBox[0].innerHTML=newCaption)};label.prototype.shortWord=function(c){this.caption.length>c&&(this.caption=this.caption.substring(0,c)+"..",this.setCaption(this.caption))};label.prototype.setCSS=function(c){this.labelBox.css(c)};label.prototype.setClass=function(c){this.labelBox.attr("class",c)};var tipsBox=Class({create:function(d,f){this.visible=!1;this.caption=d;this.background=$("<span class='tipsBox tipsBoxShadow tipsBoxRadius'></span>");$(f).append(this.background)},setTimer:function(){this.timer=window.setInterval(function(){this.hideTipsBox();window.clearInterval(this.timer)}.bind(this),1500)},resetTimer:function(){window.clearInterval(this.timer);this.setTimer()},setPosition:function(f,h,g){},onResize:function(d,f){},getWidth:function(){return this.background.width()},getHeight:function(){return this.background.height()},setCaption:function(c){this.background.html(c)},showTipsBox:function(){this.visible?this.resetTimer():(this.setTimer(),this.visible=!0,$(this.background).show(),$(this.background).animate({opacity:0.5},300))},hideTipsBox:function(){this.visible&&(this.visible=!1,$(this.background).animate({opacity:0},300,function(){$(this.background).hide()}.bind(this)))}});function initProgressBar(d,f){this.width=60;this.height=30;this.progress=new label("Loading",d);this.caption=this.originCaption=f;this.captionLength=this.caption.length;this.progress.setCSS({display:"none"})}initProgressBar.prototype.setPosition=function(d,f){this.progress.setLabelPosition((d-this.width)/2,(f-this.height)/2)};initProgressBar.prototype.addTimer=function(){var c=this;this.timerId=window.setInterval(function(){c.caption+=".";c.caption.length>c.captionLength+3&&(c.caption=originCaption);c.progress.setCaption(c.caption)},600)};initProgressBar.prototype.removeTimer=function(){window.clearInterval(this.timerId)};initProgressBar.prototype.show=function(){this.progress.setCSS({display:"block"});this.caption=this.originCaption;this.addTimer()};initProgressBar.prototype.hide=function(){this.progress.setCSS({display:"none"});this.removeTimer()};initProgressBar.prototype.setIndex=function(c){this.progress.setCSS({"z-index":c})};var BookShadow=Class({create:function(c){this.background=$("<div class='bookShadow'></div>");$(c).append(this.background);this.visible=!0},doubleWidth:function(c){$(this.background).attr("class",c?"doubleWidth":"singleWidth");$(this.background).addClass("bookShadow")},right:function(c){$(this.background).css({right:"auto"});c&&$(this.background).css({right:"0px"})},show:function(){this.visible||($(this.background).show(),this.visible=!0)},hide:function(){this.visible&&($(this.background).hide(),this.visible=!1)}});bdor[26]="h";Class("BookmarkList",{create:function(){this.bookmarks=[];this.bookPageCount=bookConfig.totalPageCount},reload:function(){this.bookmarks=[];this.loadBasicData();this.loadUserData();this.sort()},loadBasicData:function(){if(global.bmtConfig){for(var c=0;c<bmtConfig.length;c++){this.isShow(bmtConfig[c])&&this.bookmarks.push(bmtConfig[c])}}},loadUserData:function(){for(var d=Instance.parse(this.getUserDataFromLocal(),[]),f=0;f<d.length;f++){this.isShow(d[f])&&this.bookmarks.push(d[f])}},isShow:function(c){return parseInt(c.pageIndex)<=this.bookPageCount&&!this.exists(c)},getUserDataFromLocal:function(){var d=window.location.href.replace(window.location.hash,"")+"BookMark";try{if(window.localStorage&&window.localStorage[d]){return window.localStorage.getItem(d)}}catch(f){}},sort:function(){this.bookmarks=this.bookmarks.sort(function(d,f){return parseInt(d.pageIndex)-parseInt(f.pageIndex)})},count:function(){return this.bookmarks.length},item:function(c){return this.bookmarks[c]},exists:function(d){for(var f=0;f<this.count();f++){if(this.item(f).pageIndex==d.pageIndex){return !0}}return !1}});Class("BookmarkTabItem",{$body:null,$parent:null,create:function(c){this.data=c;this.$body=$("<div class='bookmark_item'></div>");this.$caption=$("<div class='bookmark_caption'></div>");this.$body.append(this.$caption);this.initStyle();this.update()},initStyle:function(){bmtConfig.showPage&&this.$body.attr("title",getShownPageNumber(this.data.pageIndex));bmtConfig.hasTexture&&this.$body.css({"background-image":"url("+(uiBaseURL+"leather1.png")+")","background-repeat":"repeat"})},getData:function(){return this.data},setData:function(c){this.data=c;this.update()},update:function(){this.$body.css("background-color",this.data.color);this.$caption.text(this.data.caption)},moveTo:function(c){this.$parent!=c&&(this.remove(),this.$parent=c,this.$parent.append(this.$body),this.$body.bind("click",this.onBookmarkClick.bind(this)),this.$body.bind("mouseenter",this.onBookmarkMouseEnter.bind(this)),this.$body.bind("mouseleave",this.onBookmarkMouseLeave.bind(this)))},remove:function(){null!=this.$parent&&(this.$body.remove(),this.$body.unbind(),this.$parent=null)},onBookmarkClick:function(c){gotoPageFun(this.data.pageIndex)},onBookmarkMouseEnter:function(c){this.$body.animate({top:"5px"},300)},onBookmarkMouseLeave:function(c){this.$body.animate({top:"40px"},300)},setPosition:function(c){this.$body.css({left:"",right:"","z-index":""});this.$body.css(c)}});Class("BookmarkItemPool",{create:function(){this.items=[]},getBookmarkItem:function(d){var f=this.getItemFromList(d);f||(f=this.createNewItem(d));return f},getItemFromList:function(f){for(var h=0;h<this.items.length;h++){var g=this.items[h];if(g.getData().pageIndex==f.pageIndex){return g.setData(f),g}}return null},createNewItem:function(c){c=new BookmarkTabItem(c);this.items.push(c);return c},clean:function(g){for(var l=0;l<this.items.length;l++){var k=this.items[l],h=k.getData();g.exists(h)||k.remove()}}});Class("BookmarkTab",{$parent:null,visible:!0,onSideEdge:!0,zIndex:0,create:function(d,f){this.$parent=d;this.hideSmallTab=!!f;this.onSideEdge=bmtConfig.onSideEdge;this.zIndex=2*(bookConfig.totalPageCount+5);this.bookmarkPool=new BookmarkItemPool;this.bookmarkList=new BookmarkList;this.initBookmarkBar();this.reload()},initBookmarkBar:function(){this.leftBar=$("<div class='left_bookmark_bar'></div>");this.rightBar=$("<div class='right_bookmark_bar'></div>");this.leftBar.on("mouseup touchstart",function(c){c.stopPropagation()});this.rightBar.on("mouseup touchstart",function(c){c.stopPropagation()});this.onSideEdge&&(this.leftBar.addClass("vertical"),this.rightBar.addClass("vertical"));this.leftBar.css("z-index",this.zIndex);this.rightBar.css("z-index",this.zIndex);this.$parent.append(this.leftBar);this.$parent.append(this.rightBar)},reload:function(){!1!=this.visible&&(this.bookmarkList.reload(),this.refresh())},refresh:function(){!1!=this.visible&&(this.separate(),this.adjustBar(),this.onResize())},separate:function(){this.refreshShownPage();this.bookmarkPool.clean(this.bookmarkList);for(var f=0;f<this.bookmarkList.count();f++){var h=this.bookmarkList.item(f),g=this.bookmarkPool.getBookmarkItem(h);h.pageIndex>=this.bigShownPage?rightToLeft?g.moveTo(this.leftBar):g.moveTo(this.rightBar):h.pageIndex<=this.smallShownPage&&(rightToLeft?g.moveTo(this.rightBar):g.moveTo(this.leftBar))}},refreshShownPage:function(){var c=BookInfo.getCurrentPages();1==c.length?(this.smallShownPage=c[0],this.bigShownPage=c[0]):(this.smallShownPage=Math.min(c[0],c[1]),this.bigShownPage=Math.max(c[0],c[1]))},isTheFirstPage:function(){this.refreshShownPage();return 1==this.bigShownPage},isTheLastPage:function(){this.refreshShownPage();return this.smallShownPage==totalPageCount},adjustBar:function(){var d=this.leftBar.children().length,f=this.rightBar.children().length;this.hideSmallTab?rightToLeft?(this.hideRightBar(),0==d?this.hideLeftBar():this.showLeftBar()):(this.hideLeftBar(),0==f?this.hideRightBar():this.showRightBar()):rightToLeft?(0==f||this.isTheFirstPage()?this.hideRightBar():this.showRightBar(),0==d||this.isTheLastPage()?this.hideLeftBar():this.showLeftBar()):(0==d||this.isTheFirstPage()?this.hideLeftBar():this.showLeftBar(),0==f||this.isTheLastPage()?this.hideRightBar():this.showRightBar());bookConfig.HardPageEnable&&this.adjustZindex()},adjustZindex:function(){this.leftBar.css("z-index",this.zIndex);this.rightBar.css("z-index",this.zIndex);rightToLeft?(this.isTheLastPage()&&this.rightBar.css("z-index",1),this.isTheFirstPage()&&this.leftBar.css("z-index",1)):(this.isTheLastPage()&&this.leftBar.css("z-index",1),this.isTheFirstPage()&&this.rightBar.css("z-index",1))},onResize:function(){if(this.onSideEdge){var d=this.$parent.height(),f=this.$parent.width();this.leftBar.css({width:d+"px",left:-d+"px"});this.rightBar.css({width:d+"px",left:f+"px"});rightToLeft?(this.resizeItemsOfBar(this.rightBar,"left",1),this.resizeItemsOfBar(this.leftBar,"right",-1)):(this.resizeItemsOfBar(this.leftBar,"right",1),this.resizeItemsOfBar(this.rightBar,"left",-1))}else{d=this.$parent.width(),f=this.$parent.width(),this.hideSmallTab||(d/=2),this.leftBar.css({width:d+"px",left:"0px"}),this.rightBar.css({width:d+"px",left:f-d+"px"}),rightToLeft?(this.resizeItemsOfBar(this.rightBar,"left",1),this.resizeItemsOfBar(this.leftBar,"left",-1)):(this.resizeItemsOfBar(this.leftBar,"left",1),this.resizeItemsOfBar(this.rightBar,"left",-1))}},resizeItemsOfBar:function(m,t,s){for(var r=m.width(),q=m.children().length,r=Math.floor((r-4-110)/(q-1)),r=Number.between(r,10,70),q=iPos=0;q<this.bookmarkList.count();q++){var p=this.bookmarkList.item(q),o=this.bookmarkPool.getBookmarkItem(p);if(o.$parent==m){var n={};n[t]=r*iPos;n["z-index"]=s*p.pageIndex;o.setPosition(n);iPos++}}},show:function(){this.visible=!0;this.refresh()},hide:function(){this.hideLeftBar();this.hideRightBar();this.visible=!1},showLeftBar:function(){0<this.leftBar.children().length?this.leftBar.css("display","block"):this.leftBar.css("display","none")},hideLeftBar:function(){this.leftBar.css("display","none")},showRightBar:function(){0<this.rightBar.children().length?this.rightBar.css("display","block"):this.rightBar.css("display","none")},hideRightBar:function(){this.rightBar.css("display","none")}});var TableOfContentElements=Class({create:function(c){this._super(c);this.callBack=c;this.initElements();this.initEvent(c);this.pickElements(c)},initElements:function(){this.tableofcontentSwiper=$("<div class='stage'></div>");this.tableofcontentSwiperList=$("<div class='swiper'></div>");this.refreshSwiper(this.tableofcontentSwiperList,ols);this.tableofcontentSwiper.append(this.tableofcontentSwiperList);isPhone()||isPad()?this.tableofcontentSwiper.css({"overflow-y":"auto","overflow-x":"hidden","-webkit-overflow-scrolling":"touch"}):(this.progress=$("<div class='progress'></div>"),this.progressBar=$("<div class='progressBar'></div>"),this.tableofcontentSwiper.append(this.progress),this.progress.append(this.progressBar),this.tableofcontentSwiper.scroll({},Direction.top))},refreshSwiper:function(g,l){for(var k=l.length,h=0;h<k;h++){this.addItem(g,l[h])}},addItem:function(f,h){var g=new this.callBack.newItem(f,h,this.refresh.bind(this));f.append(g.getItem())},refresh:function(){isPhone()||isPad()||this.tableofcontentSwiper.refreshData()},initEvent:function(c){},pickElements:function(c){c.tableofcontentSwiper=this.tableofcontentSwiper;c.tableofcontentSwiperList=this.tableofcontentSwiperList;c.progress=this.progress;c.progressBar=this.progressBar},changeLanguage:function(){}}).extend(FormElements),TableOfContentItem=Class({create:function(f,h,g){this.item=$("<div class='item'></div>");this.callback=g;this.level=parseInt(ols[0].level)?parseInt(h.level):parseInt(h.level)+1;this.children=[];this.parent=f;this.parm=h;this.parm.caption=HTMLString.toText(this.parm.caption);this.hasChild=h.children&&0<h.children.length;this.expandUrl=form_icons.arrow?"data:image/png;base64,"+form_icons.arrow:uiBaseURL+"arrow.png";this.collapseUrl=rightToLeft?form_icons.arrow3?"data:image/png;base64,"+form_icons.arrow3:uiBaseURL+"arrow3.png":form_icons.arrow2?"data:image/png;base64,"+form_icons.arrow2:uiBaseURL+"arrow2.png";this.fontColor=h.fontColor;this.colorObj=Color(this.fontColor);this.initDefaultDom();this.initHtml(f,h);this.initEvent()},getItem:function(){return this.item},initDefaultDom:function(){rightToLeft?this.initRightToLeftDefaultDom():this.initLeftToRightDefaultDom();this.arrow&&(this.arrow[0].colorChanged=!1,this.arrow.changeButtonColor(this.fontColor))},initRightToLeftDefaultDom:function(){LanguageTool.isRightToLeft(this.parm.caption)?this.description=$("<p class='description rtl'>"+this.parm.caption+"</p>"):this.description=$("<p class='description'>"+this.parm.caption+"</p>");this.hasChild&&(this.arrow=$("<img class='arrow' src='"+this.collapseUrl+"'/>"),this.arrow.css("right",10*(this.level-1)+"px"));this.description.css("margin-right",10*(this.level-1)+15+"px")},initLeftToRightDefaultDom:function(){this.description=$("<p class='description'>"+this.parm.caption+"</p>");this.hasChild&&(this.arrow=$("<img class='arrow' src='"+this.collapseUrl+"'/>"),this.arrow.css("left",10*(this.level-1)+"px"));this.description.css("margin-left",10*(this.level-1)+15+"px")},initHtml:function(d,f){rightToLeft?this.initRightToLeftHtml():this.initLeftToRightHtml()},initRightToLeftHtml:function(){this.item.append(this.description);this.arrow&&this.item.append(this.arrow)},initLeftToRightHtml:function(){this.arrow&&this.item.append(this.arrow);this.item.append(this.description)},initEvent:function(){this.item.onTap(function(){this.parm.url?window.open(this.parm.url,"_blank"):gotoPageFun(parseInt(this.parm.page))}.bind(this));this.item.bind("mouseover",function(){this.item.css({background:this.colorObj.rgba(0.1)})}.bind(this));this.item.bind("mouseleave",function(){this.isExpand||this.item.css({"background-color":"transparent"})}.bind(this));if(this.hasChild){if(this.arrow){this.arrow.onTap(function(){this.onSwitch()}.bind(this))}this.arrow.bind("mousedown touchstart pointerdown mouseover mousemove",function(c){c.stopPropagation()})}},expand:function(c){this.hasChild&&(this.isExpand=!0,this.arrow&&this.arrow.attr("src",this.expandUrl),0==this.children.length?this.addChildren():this.showChildren(),this.item.css({"font-weight":"bold","background-color":this.colorObj.rgba(0.1)}),c&&this.callback(),this.arrow&&(this.arrow[0].colorChanged=!1,this.arrow.changeButtonColor(this.fontColor)))},collapse:function(d){if(this.hasChild){this.isExpand=!1;this.arrow&&this.arrow.attr("src",this.collapseUrl);for(var f=0;f<this.children.length;f++){this.children[f].hide(),this.children[f].collapse()}this.item.css({"font-weight":"","background-color":""});d&&this.callback();this.arrow&&(this.arrow[0].colorChanged=!1,this.arrow.changeButtonColor(this.fontColor))}},addChildren:function(){for(var f=this.parm.children.length,h=0;h<f;h++){this.parm.children[h].fontColor=this.fontColor;var g=new (global[this.getClassName()])(this.parent,this.parm.children[h],this.callback);0==h?g.getItem().insertAfter(this.item):g.getItem().insertAfter(this.children[h-1].getItem());this.children.push(g)}},showChildren:function(){for(var d=this.children.length,f=0;f<d;f++){this.children[f].show(),this.children[f].getIsExpand()&&this.children[f].expand()}},onSwitch:function(){this.opened?this.collapse(!0):this.expand(!0);this.opened=!this.opened},getIsExpand:function(){return this.opened},show:function(){this.item.show()},hide:function(){this.item.hide()}}),PhoneTableOfContentItem=Class({create:function(f,h,g){h.fontColor=bookConfig.formFontColor?bookConfig.formFontColor:bookConfig.iconColor;this._super(f,h,g)}}).extend(TableOfContentItem),PhoneTableOfContentForm=Class({create:function(c){this.elements=new TableOfContentElements(this);this._super(c)},onCreate:function(){this.stage.css({color:this.fontColor});this.close.changeButtonColor(this.fontColor);this._super()},initHtml:function(){this.title.append(this.close);this.stage.append(this.title);this.stage.append(this.tableofcontentSwiper)},newItem:function(f,h,g){return new PhoneTableOfContentItem(f,h,g)},onResize:function(){this._super();this.tableofcontentSwiper.css("height",this.height-36+"px");this.elements.refresh()},initEvent:function(){},onShow:function(){}}).extend(PhoneFormFrame);Class("Thickness",{create:function(f,h,g){this.thicknessObj=$("<div name='thickness' style=\"overflow:hidden;position:absolute;\"></div>");this.thicknessObj.css({"z-index":2*(bookConfig.totalPageCount+5)-1});this.parent=f;this.isRightToLeftBook=parseBool(bookConfig.RightToLeft);this.evenPageCount=bookConfig.totalPageCount;1==this.evenPageCount%2&&this.evenPageCount++;this.imageWidth=h;this.getMaxWidth();this.scale=1;this.visible=!0;this.hint=null;this.isSingleBook=!!g;this.init();this.initShadow();this.initHint()},getMaxWidth:function(){var c=Math.min(bookConfig.totalPageCount,100);this.maxWidth=$.easing.easeOutQuad(null,c,0,this.imageWidth,100);this.maxWidth=Math.floor(this.maxWidth);this.maxWidthZoom=1},getWidth:function(){return this.visible?Math.ceil(this.thicknessWidth*this.scale):0},init:function(){this.topPart=$("<div style='position:relative;height:50px;width:"+this.imageWidth+"px;overflow:hidden;'></div>");this.centerPart=$("<div style='position:relative;height:auto;width:"+this.imageWidth+"px;overflow:hidden;'></div>");this.bottomPart=$("<div style='position:relative;height:50px;width:"+this.imageWidth+"px;overflow:hidden;'></div>");this.fillThicknessImage();this.thicknessObj.append(this.topPart);this.thicknessObj.append(this.centerPart);this.thicknessObj.append(this.bottomPart);this.parent.append(this.thicknessObj)},fillThicknessImage:virtual_function,initHint:function(){this.thicknessObj.bind("mousemove",function(f){$(f.target);var h=f.offsetX;void 0==h&&(h=f.pageX-this.thicknessObj.offset().left);h=this.pageIndexByPosition(h);if(-1!=h){var h=" "+getShownPageNumber(h)+" ",g=f.pageX;f=f.pageY-30;null==this.hint&&(this.hint=new divHint(h,g,f));this.hint.setText(h);this.hint.show(g,f);this.hint.moveto(g,f)}else{null!=this.hint&&this.hint.hide()}}.bind(this));this.thicknessObj.bind("mouseleave",function(){null!=this.hint&&this.hint.hide()}.bind(this));this.thicknessObj.on("mouseup touchstart",function(c){c.stopPropagation()});this.thicknessObj.bind("click",function(f){$(f.target);var h=f.offsetX;void 0==h&&(h=f.pageX-this.thicknessObj.offset().left);f=this.pageIndexByPosition(h);h=BookInfo.getBook().currentPageIndex;bookType==BookType.single_book&&(h=singlePageBook.currentPageIndex);var g=h+1;bookType==BookType.single_book&&(g=-1);-1!=f&&f!=h&&f!=g&&gotoPageFun(f)}.bind(this))},pageIndexByPosition:virtual_function,initShadow:function(){this.shadowContent=$("<div></div>");this.shadowContent.css({perspective:500,"-webkit-perspective":500,"-moz-perspective":500,"-ms-perspective":500,top:"3px",position:"absolute","z-index":2*(bookConfig.totalPageCount+5)-2});this.shadowObj=$('<div style="width:100%;height:100%;"></div>');this.shadowObj.css({"transform-style":"preserve-3d","-webkit-transform-style":"preserve-3d","-moz-transform-style":"preserve-3d","-ms-transform-style":"preserve-3d","background-color":"#CCCCCC"});this.initShadowStyle();this.shadowContent.append(this.shadowObj);this.parent.append(this.shadowContent);$.browser.msie&&11>$.browser.version&&this.shadowContent.css({display:"none"})},initShadowStyle:virtual_function,onResize:function(){this.contentWidth=$(this.parent).width();this.contentHeight=$(this.parent).height();this.maxWidthZoom=Math.min(1,this.contentHeight/800);this.maxWidthZoom=$.easing.swing(null,Math.max(this.maxWidth-8,0),1,this.maxWidthZoom-1,this.imageWidth-8);this.thicknessObj.css({height:this.contentHeight});this.shadowContent.css({height:this.contentHeight-6});this.centerPart.css({height:Math.max(0,this.contentHeight-100)});this.centerPart.find("img").css({height:this.contentHeight});var c=this.getPageIndex();this.resetPosition(c);this.resetScale(c)},getPageIndex:function(){var c=1;BookInfo.getBook()&&(c=BookInfo.getBook().currentPageIndex);return c},getThicknessWidth:virtual_function,resetPosition:virtual_function,resetScale:virtual_function,setMinScale:function(c){this.minScale=Math.min(c/this.maxWidth,1)},setScale:function(c){this.scale=c;this.scaleThickness()},doResetScale:function(d,f){this.scale=f?1==d?this.minScale:1:d==this.evenPageCount?this.minScale:1;this.scaleThickness()},doSetMovingScale:function(g,l,k,h){if(1!=this.minScale){if(h){if(1!=g&&1!=l){return}1==g?(g=this.minScale,l=1):(g=1,l=this.minScale)}else{if(g!=this.evenPageCount&&l!=this.evenPageCount){return}g==this.evenPageCount?(g=this.minScale,l=1):(g=1,l=this.minScale)}h=this.contentWidth;this.isSingleBook&&(g=this.minScale,l=1,h=2*this.contentWidth);void 0==k&&(k=h);isNaN(k)||(k=$.easing.easeInOutSine(null,k,g,l-g,h),this.setScale(k))}},scaleThickness:virtual_function,hide:function(){this.thicknessObj.css("display","none");this.shadowContent.css("display","none");this.visible=!1},show:function(){this.thicknessObj.css("display","block");this.shadowContent.css("display","block");this.visible=!0},setVisible:function(c){c?this.show():this.hide()}});Class("LeftThickness",{initShadowStyle:function(c){void 0==c&&(c=1);this.shadowObj.css({transform:"rotateY(-20deg) scaleX("+c+") scaleZ(1)","-webkit-transform":"rotateY(-20deg) scaleX("+c+") scaleZ(1)","-moz-transform":"rotateY(-20deg) scaleX("+c+") scaleZ(1)","-ms-transform":"rotateY(-20deg) scaleX("+c+") scaleZ(1)","-webkit-box-shadow":"-3px 0px 6px rgba(125, 125, 125, 0.7)","-moz-box-shadow":"-3px 0px 6px rgba(125, 125, 125, 0.7)","-ms-box-shadow":"-3px 0px 6px rgba(125, 125, 125, 0.7)","box-shadow":"-3px 0px 6px rgba(125, 125, 125, 0.7)"})},scaleThickness:function(){var c={"-webkit-transform-origin":"100% 0%","-moz-transform-origin":"100% 0%","-ms-transform-origin":"100% 0%","-o-transform-origin":"100% 0%","transform-origin":"100% 0%",transform:"scaleX("+this.scale+") scaleZ(1)","-webkit-transform":"scaleX("+this.scale+") scaleZ(1)","-moz-transform":"scaleX("+this.scale+") scaleZ(1)","-ms-transform":"scaleX("+this.scale+") scaleZ(1)"};this.thicknessObj.css(c);this.shadowContent.css(c);this.initShadowStyle(this.scale)},fillThicknessImage:function(){this.topPart.append("<img src='"+uiBaseURL+"thickness_left.png' style='position:absolute;width:100%;top:0px;' />");this.centerPart.append("<img src='"+uiBaseURL+"thickness_left.png' style='position:absolute;width:100%;top:-50px;' />");this.bottomPart.append("<img src='"+uiBaseURL+"thickness_left.png' style='position:absolute;width:100%;bottom:0px;' />")},getThicknessWidth:function(f){var h=bookConfig.totalPageCount,g=Math.floor(this.maxWidth*this.maxWidthZoom);f=this.isRightToLeftBook?h-f:f;bookConfig.HardPageEnable&&5>=f&&(f=0);this.thicknessWidth=Math.floor(g*f/h);this.thicknessWidth=Math.max(this.thicknessWidth,0);BookInfo.isDoublePage()||(this.thicknessWidth=0)},resetPosition:function(c){this.getThicknessWidth(c);c=transformCSS({tran:{x:this.thicknessWidth-this.imageWidth,y:0}});this.topPart.css(c);this.centerPart.css(c);this.bottomPart.css(c);this.thicknessObj.css({width:this.thicknessWidth+"px",left:-this.thicknessWidth+"px"});c=Math.floor(this.thicknessWidth/Math.sin(7*Math.PI/18));this.shadowContent.css({width:c+"px",left:-this.thicknessWidth+1+"px"})},resetScale:function(c){this.doResetScale(c,this.isRightToLeftBook)},setMovingScale:function(f,h,g){this.doSetMovingScale(f,h,g,this.isRightToLeftBook)},pageIndexByPosition:function(g){g=g+this.thicknessWidth-this.imageWidth;var l=this.thicknessWidth;if(0<l-g&&l-g<=l){var k=bookConfig.totalPageCount,h=BookInfo.getBook().currentPageIndex;bookType==BookType.single_book&&(h=singlePageBook.currentPageIndex);!0==rightToLeft?(g=Math.floor((k-h-1)*(1-(g-(l-l))/l)),g+=h+1):(g=Math.floor((h-1)*(g-(l-l))/l),g++);return g}return -1}}).extend(Thickness);Class("RightThickness",{initShadowStyle:function(c){void 0==c&&(c=1);this.shadowObj.css({transform:"rotateY(20deg) scaleX("+c+") scaleZ(1)","-webkit-transform":"rotateY(20deg) scaleX("+c+") scaleZ(1)","-moz-transform":"rotateY(20deg) scaleX("+c+") scaleZ(1)","-ms-transform":"rotateY(20deg) scaleX("+c+") scaleZ(1)","-webkit-box-shadow":"3px 0px 6px rgba(125, 125, 125, 0.7)","-moz-box-shadow":"3px 0px 6px rgba(125, 125, 125, 0.7)","-ms-box-shadow":"3px 0px 6px rgba(125, 125, 125, 0.7)","box-shadow":"3px 0px 6px rgba(125, 125, 125, 0.7)"})},scaleThickness:function(){var c={"-webkit-transform-origin":"0% 0%","-moz-transform-origin":"0% 0%","-ms-transform-origin":"0% 0%","-o-transform-origin":"0% 0%","transform-origin":"0% 0%",transform:"scaleX("+this.scale+") scaleZ(1)","-webkit-transform":"scaleX("+this.scale+") scaleZ(1)","-moz-transform":"scaleX("+this.scale+") scaleZ(1)","-ms-transform":"scaleX("+this.scale+") scaleZ(1)"};this.thicknessObj.css(c);this.shadowContent.css(c);this.initShadowStyle(this.scale)},fillThicknessImage:function(){this.topPart.append("<img src='"+uiBaseURL+"thickness.png' style='position:absolute;width:100%;top:0px;' />");this.centerPart.append("<img src='"+uiBaseURL+"thickness.png' style='position:absolute;width:100%;top:-50px;' />");this.bottomPart.append("<img src='"+uiBaseURL+"thickness.png' style='position:absolute;width:100%;bottom:0px;' />")},getThicknessWidth:function(f){var h=bookConfig.totalPageCount,g=Math.floor(this.maxWidth*this.maxWidthZoom);f=this.isRightToLeftBook?f:h-f;bookConfig.HardPageEnable&&5>=f&&(f=0);this.thicknessWidth=Math.floor(g*f/h);this.thicknessWidth=Math.max(this.thicknessWidth,0);BookInfo.isDoublePage()||(this.thicknessWidth=0)},resetPosition:function(d){this.getThicknessWidth(d);var f=this.contentWidth;1!=d||this.isRightToLeftBook||(f=this.contentWidth-1);this.thicknessObj.css({width:this.thicknessWidth+"px",left:f+"px"});this.shadowContent.css({width:this.thicknessWidth+"px",left:this.contentWidth-1+"px"})},resetScale:function(c){this.doResetScale(c,!this.isRightToLeftBook)},setMovingScale:function(f,h,g){this.doSetMovingScale(f,h,g,!this.isRightToLeftBook)},pageIndexByPosition:function(g){var l=this.thicknessWidth;if(0<g&&g<=l){var k=bookConfig.totalPageCount,h=BookInfo.getBook().currentPageIndex;!0==rightToLeft?(g=Math.floor((h-1)*(1-g/l)),g++):(g=Math.floor((k-h-1)*g/l),g+=h+1);return g}return -1}}).extend(Thickness);var flipShotBar=Class({create:function(c){this.flipShotObj=$("<div id='flipShotObj' class='flipShotObj'></div>");this.flipShotObj.css({"z-index":2*(bookConfig.totalPageCount+5)+1});c?(this.prevDiv=$("<div class='flipShot'></div>"),this.firstDiv=$("<div class='flipShot'></div>"),this.prevDiv.append("<div class='flipShotBackground'></div>"),this.firstDiv.append("<div class='flipShotBackground'></div>"),this.prevDiv.append("<img src='"+uiBaseURL+"slide_leftButton.png' />"),this.firstDiv.append("<img src='"+uiBaseURL+"slide_firstButton.png' />")):(this.prevDiv=$("<div class='flipShot'></div>"),this.firstDiv=$("<div class='flipShot'></div>"),this.prevDiv.append("<div class='flipShotBackground'></div>"),this.firstDiv.append("<div class='flipShotBackground'></div>"),this.prevDiv.append("<img src='"+uiBaseURL+"slide_rightButton.png'/>"),this.firstDiv.append("<img src='"+uiBaseURL+"slide_lastButton.png'/>"));this.flipShotObj.append(this.firstDiv);this.flipShotObj.append(this.prevDiv);this.isLeft=c;this.visible=!0;this.init();this.initEvents()},init:function(){this.enterCss={background:"#333333"};this.leaveCss={background:"#000000"};this.prevDiv.css({width:"100%",height:"80%",position:"relative","border-radius":"0px 0px 0px 5px"});this.firstDiv.css({width:"100%",height:"20%",position:"relative","border-bottom":"1px solid #aaaaaa"});this.prevDiv.find("div").css(this.leaveCss);this.firstDiv.find("div").css(this.leaveCss);this.isLeft?(this.firstDiv.find("div").css({"border-radius":"5px 0px 0px 0px"}),this.prevDiv.find("div").css({"border-radius":"0px 0px 0px 5px"})):(this.firstDiv.find("div").css({"border-radius":"0px 5px 0px 0px"}),this.prevDiv.find("div").css({"border-radius":"0px 0px 5px 0px"}))},onResize:function(g,l){var k=Math.min(50,0.7*l/8),h=Math.min(0.7*l,310);this.width=k;this.height=h;this.flipShotObj.css({width:k,height:h});this.setThicknessPosition(g,l)},setThicknessPosition:function(d,f){this.flipShotObj.css({left:this.isLeft?1-this.width:"100%",top:(f-this.height)/2,position:"absolute"})},hideThickness:function(){this.flipShotObj.css("display","none")},showThickness:function(){this.flipShotObj.css("display","block")},setVisible:function(c){this.flipShotObj.css({display:c?"block":"none"});this.visible=c},getContainer:function(){return this.flipShotObj},initEvents:function(){this.isLeft?(this.prevDiv.bind(_event._end,function(c){rightToLeft?nextPageFun():previousPageFun()}),this.firstDiv.bind(_event._end,function(c){rightToLeft?lastPageFun():firstPageFun()})):(this.prevDiv.bind(_event._end,function(c){rightToLeft?previousPageFun():nextPageFun()}),this.firstDiv.bind(_event._end,function(c){rightToLeft?firstPageFun():lastPageFun()}));this.prevDiv.bind(_event._down+" "+_event._enter,function(){this.prevDiv.find("div").css(this.enterCss)}.bind(this));this.firstDiv.bind(_event._down+" "+_event._enter,function(){this.firstDiv.find("div").css(this.enterCss)}.bind(this));this.prevDiv.bind(_event._leave,function(){this.prevDiv.find("div").css(this.leaveCss)}.bind(this));this.firstDiv.bind(_event._leave,function(){this.firstDiv.find("div").css(this.leaveCss)}.bind(this));isTouch&&(this.prevDiv.bind(_event._end,function(){this.prevDiv.find("div").css(this.leaveCss)}.bind(this)),this.firstDiv.bind(_event._end,function(){this.firstDiv.find("div").css(this.leaveCss)}.bind(this)));this.prevDiv.on("mouseup touchstart",function(c){c.stopPropagation()});this.firstDiv.on("mouseup touchstart",function(c){c.stopPropagation()})},setScale:function(c){this.width*=c;this.height*=c;this.flipShotObj.css({width:this.width,height:this.height})}}),VideoGalleryElements=Class({create:function(c){this._super(c);this.initVideoList();this.videoList&&0!=this.videoList.length&&(this.initElements(),this.initEvent(c),this.pickElements(c))},initVideoList:function(){this.videoList=videoList},initElements:function(){this.content=$("<div class='video_content'></div>");this.video=$("<iframe type='text/html' class='video' src='' allowfullscreen frameborder='0'></iframe>");rightToLeft?this.initRightToLeftDefaultDom():this.initLeftToRightDefaultDom();this.initSwiper()},initRightToLeftDefaultDom:function(){this.info=$("<div class='info'><span class='title rtl'>"+this.videoList[0].title+"</span><p class='description rtl'>"+this.videoList[0].description+"</p></div>")},initLeftToRightDefaultDom:function(){this.info=$("<div class='info'><span class='title'>"+this.videoList[0].title+"</span><p class='description'>"+this.videoList[0].description+"</p></div>")},initSwiper:function(){if(this.videoList&&!(1>=this.videoList.length)){this.videoListTitle=$("<sapn class='title'>"+getLanguage("frmVideoListTitle","Video list")+"</span>");this.videoSwiper=$("<div class='videoSwiper stage'></div>");var d=$("<div class='swiper'></div>");this.progress=$("<div class='progress'></div>");var f=$("<div class='progressBar'></div>");this.refreshSwiper(d,this.videoList);this.videoSwiper.append(d);this.videoSwiper.append(this.progress);this.progress.append(f)}},refreshSwiper:function(g,l){for(var k=l.length,h=0;h<k;h++){this.addItem(g,l[h])}},addItem:function(f,h){if(f&&h){var g=function(){this.playVideo(h)}.bind(this),g=new VideoGalleryItem(h,g);f.append(g.getDom())}},playVideo:function(f){var h,g="http";window.location.href.startsWith("https")&&(g="https");"youtube"===f.type&&(h=g+"://www.youtube.com/embed/"+f.id+"?autoplay=1&wmode=transparent");"vimeo"===f.type&&(h=g+"://player.vimeo.com/video/"+f.id+"?autoplay=1&wmode=transparent&portrait=0");this.video.attr("src",h);h=this.info.find(".description");this.info.find(".title").html(f.title);h.html(f.description)},initEvent:function(c){this.videoSwiper&&this.videoSwiper.scroll({},Direction.top,"win10")},pickElements:function(c){c.videoList=this.videoList;c.content=this.content;c.video=this.video;c.info=this.info;c.videoListTitle=this.videoListTitle;c.videoSwiper=this.videoSwiper;c.progress=this.progress},changeLanguage:function(){}}).extend(FormElements),VideoGalleryItem=Class({create:function(d,f){d&&(this.parm=d,this.callback=f,this.initDom(),this.initEvent())},initDom:function(){this.item=$("<div class='item'></div>");this.image=$("<div class='thumbnail'></div>");this.parm.thumbnail&&this.image.css({"background-image":"url("+this.parm.thumbnail+")"});this.parm.title&&(this.title=rightToLeft?$("<div class='title rtl'>"+this.parm.title+"</div>"):$("<div class='title'>"+this.parm.title+"</div>"));this.parm.description&&(this.description=rightToLeft?$("<div class='description rtl'>"+this.handleData(this.parm.description)+"</div>"):$("<div class='description'>"+this.handleData(this.parm.description)+"</div>"));this.item.append(this.image);this.title&&this.item.append(this.title);this.description&&this.item.append(this.description)},handleData:function(c){c=c.replaceAll("<","&lt");c=c.replaceAll(">","&gt");return c=handleData(c,"")},initEvent:function(){this.item.onTap(this.callback)},getDom:function(){return this.item}}),PhotoGallery=Class({create:function(d,f){!f||0>=f.length||(this.parent=d,this.photoArray=f,this.index=0,this.visible=!1,this.pageWidth=$(window).width(),this.pageHeight=$(window).height(),this.images=[],this.thumbnails=[],this.initHtml(),this.initEvent())},initHtml:function(){this.leftBtnUrl=uiBaseURL+"photo_prev.png";this.rightBtnUrl=uiBaseURL+"photo_next.png";this.closeBtnUrl=uiBaseURL+"photoGallery_close.png";this.stage=$("<div class='photogallery' style=\"display:none\"></div>");this.close=$("<div class='close'><img src=\""+this.closeBtnUrl+'" /></div>');this.stage.append(this.close);this.initImgThumb();this.initImgContainer();this.initImages();this.setThumbnal();this.setPhotoImage();this.imgChange();this.parent.append(this.stage)},initImgContainer:function(){this.imgContainer=$("<div class='imgContainer'></div>");this.leftBtn=$("<div class='leftBtn'><img src=' "+this.leftBtnUrl+"' /></div>");this.rightBtn=$("<div class='rightBtn'><img src='"+this.rightBtnUrl+"'/></div>");this.containerBG=$("<div class='photoBG'></div>");this.imgContainer.append(this.leftBtn);this.imgContainer.append(this.rightBtn);this.stage.append(this.imgContainer).append(this.containerBG)},initImgThumb:function(){this.thumbContainer=$("<div class='thumbContainer'></div>");this.stage.append(this.thumbContainer)},initEvent:function(){this.stage.bind("mousedown touchstart",function(c){c.stopPropagation()});this.imgContainer.bind("mouseenter",function(){this.leftBtn.animate({left:"0"},300);this.rightBtn.animate({right:"0"},300)}.bind(this));this.imgContainer.bind("mouseleave",function(){this.leftBtn.animate({left:"-32px"},300);this.rightBtn.animate({right:"-32px"},300)}.bind(this));this.imgContainer.bind("click",function(c){this.index+=1;this.index>this.images.length-1&&(this.index=0);this.imgChange()}.bind(this));this.containerBG.onTap(function(){this.hide();this.visible=!1}.bind(this));this.leftBtn.bind("click",function(c){c.stopPropagation();this.index-=1;0>this.index&&(this.index=this.images.length-1);this.imgChange()}.bind(this));this.rightBtn.bind("click",function(c){c.stopPropagation();this.index+=1;this.index>this.images.length-1&&(this.index=0);this.imgChange()}.bind(this));this.close.onTap(function(){this.hide();this.visible=!1}.bind(this));$(window).resize(function(){this.onResize()}.bind(this))},onResize:function(){this.pageWidth=$(window).width();this.pageHeight=$(window).height();this.setImageCss(this.images[this.index]);this.setThumbnal()},thumbEvent:function(c){c.onTap(function(){this.index=parseInt(c.attr("id").substring(5));this.imgChange(c)}.bind(this,c))},imgChange:function(c){c||(c=this.thumbnails[this.index]);c.siblings().removeClass("focus");c.addClass("focus");this.imgContainer.children("img").remove();this.setImageCss(this.images[this.index])},initImages:function(){for(var f=0;f<this.photoArray.length;f++){var h=$("<img src='"+this.photoArray[f]+"'/>"),g=$('<div id="thumb'+f+'" class="thumbBox"><img src=\''+this.photoArray[f]+'\'/><div class="thumbBG"></div></div>');this.images.push(h);this.thumbnails.push(g)}},setThumbnal:function(){this.thumbLeft=0;this.thumbLeft=65*this.thumbnails.length>this.pageWidth?this.thumbLeft:(this.pageWidth-65*this.thumbnails.length)/2;for(var f=0;f<this.thumbnails.length;f++){var h=this.thumbnails[f],g=h.find("img");this.thumbEvent(h);this.setThumbImg(g,h);h.css({left:this.thumbLeft+"px"});this.thumbContainer.append(h);this.thumbLeft+=65}},setThumbImg:function(d,f){d.load(function(m,r){var q=0,p=0,o=q=0,n=0;m[0].naturalWidth/m[0].naturalHeight>=50/46?(q=50/m[0].naturalWidth,o=50,n=q*m[0].naturalHeight,p=(46-q*m[0].naturalHeight)/2,q=0):(q=46/m[0].naturalHeight,o=q*m[0].naturalWidth,n=46,p=0,q=(50-q*m[0].naturalWidth)/2);m.css({width:o+"px",height:n+"px",left:q+"px",top:p+"px"});r.append(m)}.bind(this,d,f))},setPhotoImage:function(){var c=this.images[this.index];c.load(function(f,g){return function(){f.setImageCss(g)}}(this,c))},setImageCss:function(c){this.imgTop=this.imgLeft=0;this.imgRadio=c[0].naturalWidth/c[0].naturalHeight;this.windowRadio=this.pageWidth/(this.pageHeight-80);this.imgHeight=this.imgWidth=this.radio=0;this.resetImageCss(c);c.css({width:this.imgWidth+"px",height:this.imgHeight+"px",left:0,top:0});this.imgContainer.css({width:this.imgWidth+"px",height:this.imgHeight+"px",left:this.imgLeft,top:this.imgTop+"px"});this.leftBtn.css({top:(this.imgHeight-38)/2+"px"});this.rightBtn.css({top:(this.imgHeight-38)/2+"px"});this.imgContainer.append(c)},resetImageCss:function(c){this.imgRadio>this.windowRadio?(c[0].naturalWidth<this.pageWidth?(this.imgHeight=c[0].naturalHeight,this.imgWidth=c[0].naturalWidth,this.imgLeft=(this.pageWidth-this.imgWidth-16)/2):(this.imgWidth=this.pageWidth-16,this.radio=this.pageWidth/c[0].naturalWidth,this.imgHeight=c[0].naturalHeight*this.radio,this.imgLeft=0),this.imgTop=(this.pageHeight-this.imgHeight-80)/2):c[0].naturalHeight<this.pageHeight-80?(this.imgWidth=c[0].naturalWidth,this.imgHeight=c[0].naturalHeight,this.imgLeft=(this.pageWidth-this.imgWidth-16)/2,this.imgTop=(this.pageHeight-this.imgHeight-80)/2):(this.imgHeight=this.pageHeight-80,this.radio=this.imgHeight/c[0].naturalHeight,this.imgWidth=c[0].naturalWidth*this.radio,this.imgLeft=(this.pageWidth-this.imgWidth-16)/2,this.imgTop=0)},show:function(){this.visible=!0;this.stage.fadeIn(200)},hide:function(){this.visible=!1;this.stage.fadeOut(200);this.interval&&this.interval.stop()},showOrHide:function(){this.visible?this.hide():this.show()}}),AddImageFile=Class({create:function(c){this.container=c;this.addContexts={};this.address=uiBaseURL;this.currentObject=$("<div><div/>").attr("data-key","114");this.imageDatas={};this.fileName=window.location.href.replace(window.location.hash,"")+"LocalFile";this.fileCookies=[];this.createZoomFrame();this.toolBar=this.createToolBar(c);this.getCookieFile()},createToolBar:function(g){var l=this,k=$("<div class='flipHTML5LocalFile-toolBar' style='position: absolute;width: 60px;height: 32px;background-color: rgba(0, 0, 0, 0.8);border-radius: 4px;z-index: 9999;'></div>").appendTo(g).hide();g=$("<div class='flipHTML5LocalFile-toolBar-del'></div>").css({left:4}).append($("<img style='margin-left: 3px;margin-top: 3px;'/>").attr("src",this.address+"signature_del.png")).appendTo(k);var h=$("<div class='flipHTML5LocalFile-toolBar-update'></div>").css({left:32}).append($("<img style='margin-left: 3px;margin-top: 3px;'/>").attr("src",this.address+"ImgFile_update.png")).appendTo(k);g.on("click touchend",function(c){l.currentObject&&(l.currentObject.remove(),k.hide(),l.zoomFrame&&l.zoomFrame.hide(),c=l.currentObject.attr("data-key"),delete l.imageDatas[c],l.delArrayOrderKey(l.fileCookies,c),l.addLocalStorage(l.fileName,l.parseJSON(l.fileCookies)))});h.on(_event._down,function(){l.currentObject&&l.currentObject.find(".TextFile")&&l.currentObject.find(".TextFile")[0].click()});k.on("mousedown touchstart",function(c){c.preventDefault();c.stopPropagation();return !1});this.container.add($(document)).add(BookInfo.container()).on("mousedown.hideToolBar touchstart.hideToolBar",function(){k.hide()});return k},createZoomFrame:function(){var g=$("<div class='flipHTML5ZoomFrame' style='position: absolute;'></div>"),l=[];this.zoomFrame=g;for(var k=0;9>k;k++){var h=$("<div></div>").addClass("flipHTML5Point flipHTML5ZoomPoint"+k).appendTo(g);l.push(h)}this.westZoom(l[7]);this.northZoom(l[1]);this.southZoom(l[5]);this.eastZoom(l[3]);this.westZoom(l[0]).northZoom(l[0]);this.northZoom(l[2]).eastZoom(l[2]);this.westZoom(l[6]).southZoom(l[6]);this.southZoom(l[4]).eastZoom(l[4]);this.container.add($(document)).add(BookInfo.container()).on("mousedown.hideToolBar touchstart.hideToolBar",function(){g.hide()})},getCookieFile:function(){try{var b=this.getLocalStorage(this.fileName),c=eval(b)}catch(d){}if(c){for(b=0;b<c.length;b++){var f=c[b];this.fileCookies.push({key:f.key,page:f.page,fileLeft:f.fL,fileTop:f.fT,fileWidth:f.fW,fileHeight:f.fH,imgWidth:f.iW,imgHeight:f.iH,src:f.src});this.imageDatas[f.key]={width:f.iW,height:f.iH}}}},addFile:function(l,r){var q=l.src,p=l.imgWidth,o=l.imgHeight,n=l.key,m=$("<div class='flipHTML5AddFile' style='position: absolute;cursor: move;'></div>").css({width:l.fileWidth,height:l.fileHeight,left:l.fileLeft,top:l.fileTop}).attr("data-key",n).append($("<input type='file' class='TextFile' style='position: absolute;left: 0px;top: 0px;width: 100%;height: 100%;cursor: move;z-index: 2;'/>").css({opacity:0})).appendTo(r);this.bindFileDivEvents(m,r);p&&o&&q&&this.addImage(m,q,p,o,n)},addCreateEvents:function(){var f=0,h,g=this.contextArray;if(g){for(this.offCreateEvents();h=g.eq(f++),0<h.length;){this.bindCreateFileEvent(h,parseInt(h.attr("data-page")))}}},offCreateEvents:function(){this.contextArray&&(this.contextArray.css({cursor:""}),this.contextArray.off("mousedown.addLocalFile touchstart.addLocalFile"))},bindCreateFileEvent:function(f,h){var g=this;f.css("cursor","crosshair");f.off("mousedown.addLocalFile touchstart.addLocalFile").one("mousedown.addLocalFile touchstart.addLocalFile",function(A){A.stopPropagation();A.preventDefault();var z=(new Date).getTime(),y,x,w,u,o,d,c,C,b,D=f.offset().left,B=f.offset().top;$(".flipHTML5LocalFile-current").removeClass("flipHTML5LocalFile-current");y=$("<div style='position: absolute;cursor: move;'></div>").attr("data-key",z).addClass("flipHTML5AddFile flipHTML5LocalFile-current").append($("<input type='file' class='TextFile' style='position: absolute;left: 0px;top: 0px;width: 100%;height: 100%;cursor: move;z-index: 2;'/>").css({opacity:0})).appendTo(f);x=u=A.pageX||A.originalEvent.touches[0].pageX;w=o=A.pageY||A.originalEvent.touches[0].pageY;g.bindFileDivEvents(y,f);$(document).add(f).off("mousemove.addLocalFile touchmove.addLocalFile").on("mousemove.addLocalFile touchmove.addLocalFile",function(k){u=k.pageX?k.pageX:k.originalEvent.touches?k.originalEvent.touches[0].pageX:0;o=k.pageY?k.pageY:k.originalEvent.touches?k.originalEvent.touches[0].pageY:0;u&&(0>u-x?(d=Math.floor((u-D)/BookInfo.scale()),C=Math.floor((x-u)/BookInfo.scale())):(d=Math.floor((x-D)/BookInfo.scale()),C=Math.floor((u-x)/BookInfo.scale())));o&&(0>k.pageY-w?(c=Math.floor((o-B)/BookInfo.scale()),b=Math.floor((w-o)/BookInfo.scale())):(c=Math.floor((w-B)/BookInfo.scale()),b=Math.floor((o-w)/BookInfo.scale())));y.css({left:d,top:c,width:C,height:b});g.resizeZoomFrame(y)});$(document).add(f).off("mouseup.addLocalFile touchend.addLocalFile").one("mouseup.addLocalFile touchend.addLocalFile",function(m){g.offCreateEvents();$(document).add(f).off("mousemove.addLocalFile touchmove.addLocalFile");$(document).add(f).off("mouseup.addLocalFile touchend.addLocalFile");if(y){m=y.width();var l=y.height();32>m&&y.width(32);12>l&&y.height(12);y.find(".TextFile")[0].click();g.resizeZoomFrame(y);m=g.parseObject(y[0]);g.parseObject(g.zoomFrame[0]);g.fileCookies.push({key:z,page:h,fileLeft:m.left,fileTop:m.top,fileWidth:m.width,fileHeight:m.height,imgWidth:null,imgHeight:null,src:null});g.addLocalStorage(g.fileName,g.parseJSON(g.fileCookies))}void 0!=g.onCreated&&g.onCreated[1].call(g.onCreated[0])})})},addImage:function(l,r,q,p,o){l.find(".LocalImage")&&l.find(".LocalImage").remove();var n=l.width()||40,m=l.height()||40;q=this.resizeImage("autoFit",q,p,n,m);$("<img class='LocalImage' style='position: absolute;z-index: 2;'/>").attr("data-key",o).css({width:q.width,height:q.height,left:q.left,top:q.top}).attr("src",r).appendTo(l)},resizeImage:function(m,t,s,r,q){t/=s;s=0===q?1:r/q;var p=q*t,o=r/t,n;switch(m){case"autoFit":n=p>r?{width:r,height:o,top:(q-o)/2,left:0}:o>q?{width:p,height:q,left:(r-p)/2,top:0}:p/o==t?{width:p,height:o,left:0,top:0}:{width:1,height:1,left:0,top:0};break;case"scale":n={left:0,top:0,width:r,height:q};break;case"fullFill":t>s?n={left:(r-q*t)/2,top:0,width:q*t,height:q}:t<s?n={left:0,top:(q-r/t)/2,width:r,height:r/t}:t==s&&(n={left:0,top:0,width:r,height:q})}return n},bindFileDivEvents:function(h,n){var m=this,l=!1,k=h.attr("data-key");h.on("pointerdown.signatureImg",function(c){c.stopPropagation()});h.off("mousedown.addLocalFile touchstart.addLocalFile").on("mousedown.addLocalFile touchstart.addLocalFile",function(f){f.preventDefault();f.stopPropagation();f=f.originalEvent.touches?f.originalEvent.touches[0]:f;var d,c,b,r,o,g;b=h[0].offsetLeft;r=h[0].offsetTop;d=f.pageX;c=f.pageY;m.resizeZoomFrame(h);n.off("mousemove.addLocalFile touchmove.addLocalFile").on("mousemove.addLocalFile touchmove.addLocalFile",function(p){p=p.originalEvent.touches?p.originalEvent.touches[0]:p;if(3<=Math.abs(p.pageX-d)||3<=Math.abs(p.pageY-c)){l=!0}o=b-(d-p.pageX)/BookInfo.scale();g=r-(c-p.pageY)/BookInfo.scale();h.css({left:o,top:g});m.moveFileDiv(o,g)});$(document).add(n).off("mouseup.addLocalFile touchend.addLocalFile").one("mouseup.addLocalFile touchend.addLocalFile",function(){n.off("mousemove.addLocalFile touchmove.addLocalFile");$(document).add(n).off("mouseup.addLocalFile touchend.addLocalFile");setTimeout(function(){l=!1},200);var p=m.parseObject(h[0]);m.parseObject(m.zoomFrame[0]);m.updateArrayOrderKey(m.fileCookies,k,{fileLeft:p.left,fileTop:p.top});m.addLocalStorage(m.fileName,m.parseJSON(m.fileCookies))})});h.find(".TextFile").on({change:function(o){try{var g=o.target.files[0];if(g){if(g.type.match("image.*")){var d=new FileReader;d.onload=function(r){r=r.target.result;var q=new Image;q.src=r;var p=q.width,q=q.height;m.imageDatas[k]={width:p,height:q,src:r};m.addImage(h,r,p,q,k);m.updateArrayOrderKey(m.fileCookies,k,{imgWidth:p,imgHeight:q,src:r});m.addLocalStorage(m.fileName,m.parseJSON(m.fileCookies))};d.readAsDataURL(g)}else{alert("not image!")}}}catch(b){alert("Does not support HTML5 FileReader!")}},click:function(c){l&&c.preventDefault()}})},moveFileDiv:function(f,h){var g=this.zoomFrame;g&&(g.css({left:f-4-1,top:h-4-1}),this.toolBar&&this.toolBar.css({left:g.offset().left-this.container.offset().left+3,top:g.offset().top-this.container.offset().top-this.toolBar.outerHeight()-2}))},resizeZoomFrame:function(d){var f=this.zoomFrame;f.css({width:d.width()+8,height:d.height()+8,left:parseInt(d.css("left"))-4-1,top:parseInt(d.css("top"))-4-1}).show();this.toolBar&&this.toolBar.css({left:d.offset().left-8-this.container.offset().left+3,top:d.offset().top-8-this.container.offset().top-this.toolBar.outerHeight()-2}).show();d.before(f);$(".flipHTML5LocalFile-current").removeClass("flipHTML5LocalFile-current");this.currentObject=d.addClass("flipHTML5LocalFile-current")},resizeFileDiv:function(z,y,x,w){var v=this.currentObject,u=this.zoomFrame,t=v.attr("data-key");this.toolBar&&this.toolBar&&this.toolBar.css({left:u.offset().left-this.container.offset().left+3,top:u.offset().top-this.container.offset().top-this.toolBar.outerHeight()-2});if(v){z&&(u.css({left:z}),v.css({left:z+4+1}));y&&(u.css({top:y}),v.css({top:y+4+1}));x&&40<=x&&(u.css({width:x}),v.css({width:x-8}));w&&20<=w&&(u.css({height:w}),v.css({height:w-8}));try{var s=v.find(".LocalImage"),r=this.imageDatas[t],q=this.resizeImage("autoFit",r.width,r.height,v.width(),v.height());s.css({width:q.width,height:q.height,left:q.left,top:q.top})}catch(o){}q=this.parseObject(v[0]);this.parseObject(u[0]);this.updateArrayOrderKey(this.fileCookies,t,{fileLeft:q.left,fileTop:q.top,fileWidth:q.width,fileHeight:q.height})}},eastZoom:function(f){var h=this,g=f.parent();f.on("mousedown.addLocalFile touchstart.addLocalFile",function(c){c.preventDefault();c.stopPropagation();c=c.originalEvent.touches?c.originalEvent.touches[0]:c;var m=g.parent(),l=g.width(),d=c.pageX;$(document).add(m).on("mousemove.addLocalFile touchmove.addLocalFile",function(k){k=k.originalEvent.touches?k.originalEvent.touches[0]:k;var n=k.clientX-d+l,n=Math.floor(l-(d-k.pageX)/BookInfo.scale());h.resizeFileDiv(0,0,n,0)});$(document).add(m).on("mouseup.addLocalFile touchend.addLocalFile",function(){h.addLocalStorage(h.fileName,h.parseJSON(h.fileCookies));$(document).add(m).off("mousemove.addLocalFile touchmove.addLocalFile");$(document).add(m).off("mouseup.addLocalFile touchend.addLocalFile")})});return this},southZoom:function(f){var h=this,g=f.parent();f.on("mousedown.addLocalFile touchstart.addLocalFile",function(c){c.preventDefault();c.stopPropagation();c=c.originalEvent.touches?c.originalEvent.touches[0]:c;var m=g.parent(),l=g.height(),d=c.pageY;$(document).add(m).on("mousemove.addLocalFile touchmove.addLocalFile",function(k){k=k.originalEvent.touches?k.originalEvent.touches[0]:k;var n=k.clientY-d+l,n=Math.floor(l-(d-k.pageY)/BookInfo.scale());h.resizeFileDiv(0,0,0,n)});$(document).add(m).on("mouseup.addLocalFile touchend.addLocalFile",function(){h.addLocalStorage(h.fileName,h.parseJSON(h.fileCookies));$(document).add(m).off("mousemove.addLocalFile touchmove.addLocalFile");$(document).add(m).off("mouseup.addLocalFile touchend.addLocalFile")})});return this},westZoom:function(f){var h=this,g=f.parent();f.on("mousedown.addLocalFile touchstart.addLocalFile",function(c){c.preventDefault();c.stopPropagation();c=c.originalEvent.touches?c.originalEvent.touches[0]:c;var o=g.parent(),n=g.width(),m=g[0].offsetLeft,d=c.clientX;$(document).add(o).on("mousemove.addLocalFile touchmove.addLocalFile",function(k){k=k.originalEvent.touches?k.originalEvent.touches[0]:k;var q=k.pageX,p=m+q-d,l=-(q-d)+n,p=m+(q-d)/BookInfo.scale(),l=Math.floor(n+(d-k.pageX)/BookInfo.scale());h.resizeFileDiv(p,0,l,0)});$(document).add(o).on("mouseup.addLocalFile touchend.addLocalFile",function(){h.addLocalStorage(h.fileName,h.parseJSON(h.fileCookies));$(document).add(o).off("mousemove.addLocalFile touchmove.addLocalFile");$(document).add(o).off("mouseup.addLocalFile touchend.addLocalFile")})});return this},northZoom:function(f){var h=this,g=f.parent();f.on("mousedown.addLocalFile touchstart.addLocalFile",function(c){c.preventDefault();c.stopPropagation();c=c.originalEvent.touches?c.originalEvent.touches[0]:c;var o=g.parent(),n=g.height(),m=g[0].offsetTop,d=c.pageY;$(document).add(o).on("mousemove.addLocalFile touchmove.addLocalFile",function(k){k=k.originalEvent.touches?k.originalEvent.touches[0]:k;k=k.pageY;var p=m+k-d,l=-(k-d)+n,p=m+(k-d)/BookInfo.scale(),l=Math.floor(n+(d-k)/BookInfo.scale());h.resizeFileDiv(0,p,0,l)});$(document).add(o).on("mouseup.addLocalFile touchend.addLocalFile",function(){h.addLocalStorage(h.fileName,h.parseJSON(h.fileCookies));$(document).add(o).off("mousemove.addLocalFile touchmove.addLocalFile");$(document).add(o).off("mouseup.addLocalFile touchend.addLocalFile")})});return this},bindOnCreated:function(d,f){this.onCreated=[d,f]},parseObject:function(k){if(document.getElementsByTagName("body")[0].contains(k)){var p,o,n;n=k.parentNode;var m=k.style,l=$(k);o=100/n.offsetHeight;p=100/n.offsetWidth;n=k.offsetLeft*p+"%";k=k.offsetTop*o+"%";p=l.width()*p+"%";o=l.height()*o+"%";m.width=p;m.height=o;m.left=n;m.top=k;return{width:p,height:o,left:n,top:k}}},addLocalFileByPage:function(f,h){h.find(".flipHTML5AddFile").remove();this.toolBar&&this.toolBar.hide();this.zoomFrame&&this.zoomFrame.hide();h.attr("data-page",f);this.contextArray=this.contextArray?this.contextArray.add(h):h;this.zoomFrame&&this.zoomFrame.remove();this.createZoomFrame();for(var g=0;g<this.fileCookies.length;g++){this.fileCookies[g].page==f&&this.addFile(this.fileCookies[g],h)}},setContainers:function(f,h,g){void 0==this.addContexts[f]&&(this.addContexts[f]={});this.addContexts[f][h]=g;f==BookInfo.getBookType()&&this.addLocalFileByPage(h,this.addContexts[BookInfo.getBookType()][h])},getLocalStorage:function(h){try{if(window.localStorage){return window.localStorage.getItem(h)}for(var n=document.cookie.split("; "),m=0;m<n.length;m++){var l=n[m].split("=");if(l[0]==h){return unescape(l[1])}}return""}catch(k){}},addLocalStorage:function(h,n){try{if(window.localStorage){window.localStorage.setItem(h,n)}else{var m=h+"="+escape(n),l=new Date;l.setTime(l.getTime()+86400000000);m+="; expires="+l.toGMTString();document.cookie=m}}catch(k){}},delArrayOrderKey:function(f,h){if(f){for(var g=0;g<f.length;g++){f[g].key&&f[g].key==h&&f.remove(g)}}},updateArrayOrderKey:function(g,l,k){if(g){for(var h=0;h<g.length;h++){g[h].key&&g[h].key==l&&$.extend(g[h],k)}}},parseJSON:function(f){if(0!=f.length){for(var h="[",g=0;g<f.length;g++){h+="{key:'"+f[g].key+"',page:"+f[g].page+",src:'"+f[g].src+"',iW:"+f[g].imgWidth+",iH:"+f[g].imgHeight+",fW:'"+f[g].fileWidth+"',fH:'"+f[g].fileHeight+"',fL:'"+f[g].fileLeft+"',fT:'"+f[g].fileTop+"'},"}h=h.substring(0,h.length-1);return h+"]"}}});Class("VolumeControlBar",{statics:{LEFT:1,TOP:2,RIGHT:3,BOTTOM:4,DEFAULT:5},create:function(c){bgSound&&bgSound.sound&&!isPhone()&&!isPad()&&c&&(this.parent=c,this.initParam(),this.volumeBackground=$("<div class='volume-bar' style='visibility:hidden;z-index:1000'></div>"),this.volumeReduce=$("<img class='volume-reduce'  />"),this.volumeBar=$('<div class="volume-pgress"></div>'),this.volumeBg=$('<div class="volume-pgress-bg"></div>'),this.volumePoint=$("<span></span>"),this.volumeAdd=$("<img class='volume-add' />"),this.parent.append(this.volumeBackground),this.volumeBackground.append(this.volumeReduce),this.volumeBar.append(this.volumePoint),this.volumeBg.append(this.volumeBar),this.volumeBackground.append(this.volumeBg),this.volumeBackground.append(this.volumeAdd),this.initEvent(),this.onResize(),this.initCss(),this.hide())},initParam:function(){this.length=58;this.rate=1;this.iconOn=this.visible=!0;this.initConfig()},initConfig:function(){VolumeControlBar.config||(VolumeControlBar.config={direction:VolumeControlBar.DEFAULT,color:Color(bookConfig.toolbarColor).toString(),iconColor:Color(bookConfig.iconColor).toString()});this.deviation=VolumeControlBar.config.deviation||0;this.direction=VolumeControlBar.config.direction||VolumeControlBar.DEFAULT;this.color=VolumeControlBar.config.color||Color(bookConfig.toolbarColor).toString();this.iconColor=VolumeControlBar.config.iconColor||Color(bookConfig.iconColor).toString()},initCss:function(){this.setSrc(this.volumeAdd,"soundAdd");this.setSrc(this.volumeReduce,"soundReduce");this.volumePoint.css({background:this.iconColor});this.volumeBar.css({cursor:"pointer"});this.volumeBg.css({cursor:"pointer"})},setSrc:function(d,f){toolbar_icons&&toolbar_icons[f]?d.attr("src","data:image/png;base64,"+toolbar_icons[f]):d.attr("src",uiBaseURL+f+".png");this.changeIconColor()},changeIconColor:function(){this.volumeAdd.changeButtonColor(this.iconColor);this.volumeReduce.changeButtonColor(this.iconColor)},volumeBarCSS:function(c){this.left=c.left;this.top=c.top;switch(this.direction){case VolumeControlBar.LEFT:this.position=this.length-this.rate*this.length;this.top+=(c.height-30)/2+this.deviation;this.volumeBackground.css({top:this.top+"px",left:this.left-131+"px",width:"131px",height:"30px",background:this.color});this.volumeBg.css({position:"absolute",width:"70px",height:"10px",left:"30px",right:"auto",top:"10px",bottom:"auto"});this.volumeBar.css({width:"70px",height:"auto",border:"none","border-top":"2px solid "+this.iconColor,top:"4px"});this.volumePoint.css({top:"-7px",left:this.position+"px"});this.volumeReduce.css({right:"0",top:"3px",left:"auto",bottom:"auto"});this.volumeAdd.css({left:"0",top:"3px",right:"auto",bottom:"auto"});break;case VolumeControlBar.TOP:this.position=this.length-this.rate*this.length;this.left+=(c.width-30)/2+this.deviation;this.volumeBackground.css({left:this.left+"px",top:this.top-131+"px",width:"30px",height:"131px",background:this.color});this.volumeBg.css({position:"absolute",height:"70px",width:"10px",bottom:"30px",top:"auto",left:"10px",right:"auto"});this.volumeBar.css({height:"70px",width:"auto",top:"auto",border:"none","border-left":"2px solid "+this.iconColor,left:"4px"});this.volumePoint.css({left:"-7px",top:this.position+"px"}).css("");this.volumeReduce.css({left:"3px",bottom:"3px",right:"auto",top:"auto"});this.volumeAdd.css({right:"3px",top:"3px",left:"auto",bottom:"auto"});break;case VolumeControlBar.RIGHT:this.position=this.rate*this.length;this.top+=(c.height-30)/2+this.deviation;this.volumeBackground.css({top:this.top+"px",left:this.left+c.width+"px",width:"131px",height:"30px",background:this.color});this.volumeBg.css({position:"absolute",width:"70px",height:"10px",left:"30px",right:"auto",top:"10px",bottom:"auto"});this.volumeBar.css({width:"70px",height:"auto",border:"none","border-top":"2px solid "+this.iconColor,top:"4px"});this.volumePoint.css({left:this.position+"px",top:"-7px"});this.volumeReduce.css({left:"0",top:"3px",right:"auto",bottom:"auto"});this.volumeAdd.css({right:"0",top:"3px",left:"auto",bottom:"auto"});break;case VolumeControlBar.BOTTOM:this.position=this.rate*this.length;this.left+=(c.width-30)/2+this.deviation;this.volumeBackground.css({left:this.left+"px",top:this.top+c.height+"px",width:"30px",height:"131px",background:this.color});this.volumeBg.css({position:"absolute",height:"70px",width:"10px",bottom:"30px",top:"auto",left:"10px",right:"auto"});this.volumeBar.css({height:"70px",width:"auto",border:"none","border-left":"2px solid "+this.iconColor,left:"4px"});this.volumePoint.css({left:"-7px",top:this.position+"px"});this.volumeReduce.css({left:"3px",top:"3px",right:"auto",bottom:"auto"});this.volumeAdd.css({right:"3px",bottom:"3px",left:"auto",top:"auto"});break;case VolumeControlBar.DEFAULT:this.volumeBackground.css({visibility:"hidden",opacity:"0"})}},setPosition:function(){this.change=this.startPosition=this.position=0;switch(this.direction){case VolumeControlBar.LEFT:this.leftPosition();break;case VolumeControlBar.TOP:this.topPosition();break;case VolumeControlBar.RIGHT:this.rightPosition();break;case VolumeControlBar.BOTTOM:this.bottomPosition()}},onResize:function(){$(window).resize(function(){this.hide();this.direction=VolumeControlBar.config.direction||VolumeControlBar.DEFAULT;this.setPosition()}.bind(this))},initEvent:function(){this.parent.bind("click",function(c){c.stopPropagation();this.hide()}.bind(this));this.volumeBackground.bind("click",function(c){c.stopPropagation()}.bind(this));this.volumeBackground.bind("mouseenter",function(c){this.visible=!0;this.volumeBackground.css({visibility:"visbile",opacity:"1"})}.bind(this));this.volumeBackground.bind("mouseleave",function(c){this.visible=!1;this.hide()}.bind(this));this.volumePoint.bind("click",function(c){c.stopPropagation()}.bind(this));this.volumeBg.bind("click",function(c){c.stopPropagation();this.direction==VolumeControlBar.RIGHT||this.direction==VolumeControlBar.LEFT?this.getRate(c.offsetX):this.getRate(c.offsetY);this.position=this.length-this.rate*this.length;this.volumePointCSS();this.setIcon();this.setVolume(this.rate)}.bind(this))},getRate:function(c){this.rate=0>=this.length+12-c?0:58<=this.length+12-c?1:(this.length+12-c)/this.length},setEvent:function(){1==this.direction||3==this.direction?(this.volumePoint.bind("mousedown",function(c){c.stopPropagation();this.position=this.volumePoint.left();this.startPosition=c.pageX;this.focus=!0}.bind(this)),$("body").bind("mouseup",function(c){c.stopPropagation();this.focus=!1}.bind(this))):(this.volumePoint.bind("mousedown",function(c){c.stopPropagation();this.position=this.volumePoint.top();this.startPosition=c.pageY;this.focus=!0}.bind(this)),$("body").bind("mouseup",function(c){c.stopPropagation();this.focus=!1}.bind(this)))},rightPosition:function(){this.setEvent();$("body").bind("mousemove",function(c){this.focus&&(this.startPosition&&(this.change=this.startPosition-c.pageX),this.position-=this.change,0<=this.position&&this.position<=this.length&&(this.rate=this.position/this.length,this.setIcon(),this.volumePointCSS()));this.startPosition=c.pageX}.bind(this));this.volumeAdd.unbind("click").bind("click",function(){this.position=this.volumePoint.left()+5.8>this.length?this.length:this.volumePoint.left()+5.8;this.setIcon();this.volumePointCSS()}.bind(this));this.volumeReduce.unbind("click").bind("click",function(){this.position=0>this.volumePoint.left()-5.8?0:this.volumePoint.left()-5.8;this.setIcon();this.volumePointCSS()}.bind(this))},leftPosition:function(){this.setEvent();$("body").bind("mousemove",function(c){this.focus&&(this.startPosition&&(this.change=this.startPosition-c.pageX),this.position-=this.change,0<=this.position&&this.position<=this.length&&(this.rate=(this.length-this.position)/this.length,this.setIcon(),this.volumePointCSS()));this.startPosition=c.pageX}.bind(this));this.volumeAdd.unbind("click").bind("click",function(){this.position=0>this.volumePoint.left()-5.8?0:this.volumePoint.left()-5.8;this.setIcon();this.volumePointCSS()}.bind(this));this.volumeReduce.unbind("click").bind("click",function(){this.position=this.volumePoint.left()+5.8>this.length?this.length:this.volumePoint.left()+5.8;this.setIcon();this.volumePointCSS()}.bind(this))},topPosition:function(){this.setEvent();$("body").bind("mousemove",function(c){this.focus&&(this.startPosition&&(this.change=this.startPosition-c.pageY),this.position-=this.change,0<=this.position&&this.position<=this.length&&(this.rate=(this.length-this.position)/this.length,this.setIcon(),this.volumePointCSS()));this.startPosition=c.pageY}.bind(this));this.volumeAdd.unbind("click").bind("click",function(c){this.position=0>this.volumePoint.top()-5.8?0:this.volumePoint.top()-5.8;this.setIcon();this.volumePointCSS()}.bind(this));this.volumeReduce.unbind("click").unbind("click").bind("click",function(c){this.position=this.volumePoint.top()+5.8>this.length?this.length:this.volumePoint.top()+5.8;this.setIcon();this.volumePointCSS()}.bind(this))},bottomPosition:function(){this.setEvent();$("body").bind("mousemove",function(c){this.focus&&(this.startPosition&&(this.change=this.startPosition-c.pageY),this.position-=this.change,0<=this.position&&this.position<=this.length&&(this.rate=this.position/this.length,this.setIcon(),this.volumePointCSS()));this.startPosition=c.pageY}.bind(this));this.volumeAdd.unbind("click").bind("click",function(){this.position=this.volumePoint.top()+5.8>this.length?this.length:this.volumePoint.top()+5.8;this.setIcon();this.volumePointCSS()}.bind(this));this.volumeReduce.unbind("click").bind("click",function(){this.position=0>this.volumePoint.top()-5.8?0:this.volumePoint.top()-5.8;this.setIcon();this.volumePointCSS()}.bind(this))},setIcon:function(){this.direction==VolumeControlBar.LEFT||this.direction==VolumeControlBar.TOP?this.position>=this.length?this.setIconOff():this.setIconOn():0>=this.position?this.setIconOff():this.setIconOn()},setIconOff:function(){this.iconOn=!1;StateSynchronous.instance().findButtons("BackgroundSoundButton").each(function(c){c.setAsSoundOff();c.executeCallback()})},setIconOn:function(){this.iconOn=!0;StateSynchronous.instance().findButtons("BackgroundSoundButton").each(function(c){c.setAsSoundOn();c.executeCallback()})},volumePointCSS:function(c){switch(this.direction){case VolumeControlBar.LEFT:this.volumePoint.css({left:this.position+"px"});this.setVolume((this.length-this.position)/this.length);break;case VolumeControlBar.TOP:this.volumePoint.css({top:this.position+"px"});this.setVolume((this.length-this.position)/this.length);break;case VolumeControlBar.RIGHT:this.volumePoint.css({left:this.position+"px"});this.setVolume(this.position/this.length);break;case VolumeControlBar.BOTTOM:this.volumePoint.css({top:this.position+"px"}),this.setVolume(this.position/this.length)}},soundOn:function(c){this.setIconOn();this.setVolume(this.rate)},soundOff:function(c){this.setIconOff();bgSound.sound[0].volume=0},setVolume:function(c){bgSound&&bgSound.sound&&!isPhone()&&!isPad()&&(this.rate=c,bgSound.sound[0].volume=c)},show:function(c){isPhone()||isPad()||(this.initConfig(),this.volumeBackground.css({visibility:"visible",opacity:"1"}),this.volumeBarCSS(c),this.setPosition(),this.visible=!1)},hide:function(){isPhone()||isPad()||(this.volumeBackground.css({visibility:"hidden",opacity:"0"}),this.visible=!0)}});var BookInstructionsPage=Class({create:function(d,f){this.parent=d;this.initHtml(d,f);this.initEvent()},initHtml:function(d,f){this.container=$("<div class='bookInstructions helpPage'></div>");this.title=$("<h3 class='bookInstructions helpTitle'>"+this.getTitle()+"</h3>");this.image=$("<div class='bookInstructions helpPageImg'"+this.getImageURL(f)+"></div>");this.description=$("<div class='bookInstructions helpBottomText'>"+this.getDescription(f)+"</div>");d.append(this.container);this.container.append(this.title);this.container.append(this.image);this.container.append(this.description);this.container.attr("bookInstructionPageNum",f)},getImageURL:function(c){return"style='background: url("+uiBaseURL+c+"-2x.png) no-repeat center  center ;background-size:contain;'"},getTitle:function(){return getLanguage("frmHowToUse","How to use")},getDescription:function(c){switch(c){case 1:return getLanguage("lblHelpPage1","Use scroll bar and move your fingers to turn pages");case 2:return getLanguage("lblHelpPage2","Use zoom gesture or double-click on a page to zoom in");case 3:return getLanguage("lblHelpPage3","Open the table of contents and bookmarks saved");case 4:return getLanguage("lblHelpPage4","Share with your friends, use search function, and create bookmarks");case 5:return getLanguage("lblHelpPage5","Open the overview pages using buttons or moving the slide")}},initEvent:function(){(new Hammer(this.container[0])).on("swipe",function(c){10<=c.deltaX?bookInstructions.toNextPage():-10>=c.deltaX?bookInstructions.toPreviousPage():""}.bind(this))}}),BookInstructionsDot=Class({create:function(d,f){this.parent=d;this.id=f;this.initHtml();this.initEvent()},initHtml:function(){this.dot=$("<li ></li>");this.dot.attr("bookInstructionDotNum",this.id);1==this.id?this.dot.attr("class","bookInstructions icon_active"):"";this.parent.append(this.dot)},initEvent:function(){(new Hammer(this.dot[0])).on("tap",function(){this.pageIndex=parseInt(this.dot.attr("bookInstructionDotNum"));bookInstructions.setCurrentPage(this.pageIndex)}.bind(this))}}),BookInstructions=Class({create:function(c){this.pageWidth=document.body.clientWidth;this.pageIndex=1;this.totalPageCount=5;this.closeSrc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzQyMUQ1MUVBRjlBMTFFNjk0NUZCNDY1NTgzODYzOTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NzQyMUQ1MUZBRjlBMTFFNjk0NUZCNDY1NTgzODYzOTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3NDIxRDUxQ0FGOUExMUU2OTQ1RkI0NjU1ODM4NjM5NCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3NDIxRDUxREFGOUExMUU2OTQ1RkI0NjU1ODM4NjM5NCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PosYs0wAAABhSURBVHja7NRBCgAgCATAlP7/5e0SEZK6gdClhW46UEoCoFVGW3E+uIJ5ohxrPFC2Jg/b66gre6iLMW9o0RBjhyIs9mxtQA6KAi2WonqBUSult3uWoT1pYKb/f5viDAEGAD4SFiVn1efjAAAAAElFTkSuQmCC";this.visible=!1;this.parent=c;this.initHtml(c);this.initCss();this.initEvent()},initHtml:function(d){this.container=$("<div class='bookInstructions helpBody hide'></div>");this.swiper=$("<div class='bookInstructions swiper'></div>");this.dots=$('<ul class="bookInstructions helpBullet"></ul>');for(var f=1;5>=f;f++){new BookInstructionsPage(this.swiper,f),new BookInstructionsDot(this.dots,f)}this.closeBtn=$('<span class="bookInstructions icon_drop" ><img src='+this.closeSrc+"></span>");d.append(this.container);this.container.append(this.swiper);this.container.append(this.dots);this.container.append(this.closeBtn)},initCss:function(){var c=transformCSS({tran:{x:this.pageWidth,y:0}});this.container.css({"background-image":"url("+uiBaseURL+'bg.png")no-repeat',"background-position":"bottom"});this.container.css(c);c=transformCSS({tran:{x:0,y:0}});this.swiper.css(c)},toNextPage:function(){this.setCurrentPage(1<this.pageIndex-1?this.pageIndex-1:1)},toPreviousPage:function(){this.setCurrentPage(this.pageIndex+1>=this.totalPageCount?this.totalPageCount:this.pageIndex+1)},setCurrentPage:function(c){this.pageIndex=c?c:this.pageIndex;c=transformCSS({tran:{x:-(this.pageIndex-1)*this.pageWidth,y:0}});animateOnce(this.swiper,c,300,null);this.dots.find("li").removeClass("icon_active");this.dots.find("li[bookInstructionDotNum="+this.pageIndex+"]").addClass("icon_active")},showOrhide:function(){this.visible?this.hide():this.show()},show:function(){this.visible=!0;this.container.removeClass("hide");var c=transformCSS({tran:{x:0,y:0}});animateOnce(this.container,c,300,function(){}.bind(this))},hide:function(){this.visible=!1;var c=transformCSS({tran:{x:this.pageWidth,y:0}});animateOnce(this.container,c,300,function(){this.container.addClass("hide")}.bind(this))},showOrHide:function(){this.visible?this.hide():this.show()},initEvent:function(){this.container.bind("touchstart",function(c){c.preventDefault()});this.closeBtn.bind(_event._end,function(){this.hide()}.bind(this));$(window).resize(function(c){this.pageWidth=document.body.clientWidth;this.setCurrentPage()}.bind(this))}});Class("FlipByAudio",{EMPTY_CONFIG:{audioType:0,audioFile:"",showPlayer:!1,items:[]},SINGLE_AUDIO:0,MULTIPLE_AUDIOS:1,create:function(d,f){this.parent=d;this.config=f||this.EMPTY_CONFIG;0!=this.itemLength()&&this.init()},itemLength:function(){return this.config.items.length},init:function(){this.$audio=$("<audio controls></audio>");this.audioIndex=0;this.config.audioType==this.SINGLE_AUDIO?(this.setSingleAudio(),this.initSingleAudioEvent()):(this.setMultipleAudio(this.audioIndex),this.initMultipleAudioEvent());this.playAfterFlip()},play:function(){if(this.$audio){try{this.$audio[0].play()}catch(c){}}},playByTouch:function(){if(this.$audio&&!this.$audio.isPlaying){try{this.$audio[0].play(),this.$audio.isPlaying=!0}catch(c){}}},playAfterFlip:function(){this.play.delay(this,1000*bookConfig.flippingTime)},setSingleAudio:function(){this.$audio.attr("src",this.config.audioFile);this.$audio.isPlaying=!1},setMultipleAudio:function(d){var f=this.config.items[d];f&&(this.$audio.attr("src",f.audioData),this.$audio.isPlaying=!1,d=parseInt(this.config.items[d].pageIndex),gotoPageFun(d))},getCurrentAudioData:function(){return this.config.items[this.audioIndex].audioData},getCurrentPageIndex:function(){return parseInt(this.config.items[this.audioIndex].pageIndex)},initSingleAudioEvent:function(){this.$audio.bind("timeupdate",function(){var c=parseInt(this.getCurrentAudioData());this.$audio[0].currentTime>=c&&(c=this.getCurrentPageIndex(),this.audioIndex++,gotoPageFun(c))}.bind(this))},initMultipleAudioEvent:function(){this.$audio.bind("ended",function(){this.audioIndex++;this.setMultipleAudio(this.audioIndex);this.playAfterFlip()}.bind(this))}});var PcAboutForm=Class({create:function(c){this.elements=new AboutElements(this);this._super(c)},onCreate:function(){this.stage.css({"background-color":this.mainColor,color:this.fontColor});this._super()},initHtml:function(){this.dragUrl=form_icons.drag?"data:image/png;base64,"+form_icons.drag:uiBaseURL+"drag.png";this.stage.addClass("win10_border");this.stage.append(this.title);this.stage.append(this.close);this.stage.append($("<img class='drag' src='"+this.dragUrl+"'/>"));this.stage.append(this.descriptionTitle);this.stage.append(this.contactTitle);this.content1=$("<div class='content content1'></div>");this.stage.append(this.content1);this.content1.append(this.author);this.content1.append(this.address);this.content1.append(this.email);this.content1.append(this.website);this.content1.append(this.mobile);this.content2=$("<div class='content content2'></div>");this.stage.append(this.content2);bookConfig.CompanyLogoFile&&this.content2.append(this.logo);this.content2.append(this.description);this._super()},showContact:function(){this.descriptionTitle.removeClass("focus");this.contactTitle.addClass("focus");this.descriptionTitle.css("border","1px solid transparent");this.contactTitle.css("border","1px solid "+this.fontColor);this.content1.show();this.content2.hide()},showDescription:function(){this.contactTitle.removeClass("focus");this.descriptionTitle.addClass("focus");this.contactTitle.css("border","1px solid transparent");this.descriptionTitle.css("border","1px solid "+this.fontColor);this.content2.show();this.content1.hide()},onShow:function(){this.close.changeButtonColor(this.fontColor);this.showDescription()}}).extend(FadeOutFadeForm);var PcBookmarkItem=Class({create:function(d,f){this.mainColor=bookConfig.formBackgroundColor?bookConfig.formBackgroundColor:bookConfig.toolbarColor;this.fontColor=bookConfig.formFontColor?bookConfig.formFontColor:bookConfig.iconColor;d.fontColor=this.fontColor;this._super(d,f)}}).extend(BookmarkItem);var PcBookmarkListPanel=Class({create:function(c){this.mainColor=bookConfig.formBackgroundColor?bookConfig.formBackgroundColor:bookConfig.toolbarColor;this.fontColor=bookConfig.formFontColor?bookConfig.formFontColor:bookConfig.iconColor;this.mainColorObj=Color(this.mainColor);this.fontColorObj=Color(this.fontColor);this._super(c)},onCreate:function(){},newItem:function(c){return new PcBookmarkItem(c,this.callback)}}).extend(BookmarkListPanel);var PcBookmarkForm=Class({create:function(c){this._super(c)},onCreate:function(){this.stage.css({"background-color":this.mainColor,color:this.fontColor});this.bookmarkListPanel.onCreate()},initHtml:function(){this.dragUrl=form_icons.drag?"data:image/png;base64,"+form_icons.drag:uiBaseURL+"drag.png";this.stage.addClass("win10_border");this.stage.append(this.title);this.stage.append(this.close);this.stage.append($("<img class='drag' src='"+this.dragUrl+"'/>"));var c=$("<p class='inputForm'></p>");c.append(this.input);c.append(this.colorSelection);this.stage.append(c);this.stage.append(this.leftAddPage);this.stage.append(this.rightAddPage);this.stage.append(this.bookmarkListTitle);this.stage.append(this.bookmarkListPanel.bookmarkSwiper);this.stage.append(this.remove);this.parent.append(this.stage);this.refreshPanel()},onResize:function(){var d=Math.max(windowHeight-bookConfig.topMargin-bookConfig.bottomMargin-toolBar.getHeight(),1);Math.max(windowWidth-bookConfig.leftMargin-bookConfig.rightMargin-toolBar.getWidth(),1);var f=toolBar.getTopHeight()+10;this.width=300;this.height=d-40;this.maxHeight=this.height-188;this.stage.find(".bookmark_content").css({height:d-87+"px"});this.stage.css({height:this.height+"px",top:f+"px"});this.bookmarkListPanel.onResize(this.width,this.maxHeight);this.refreshPanel()}}).extend(PcBookmarkFrame);var PcHelpForm=Class({create:function(c){this.elements=new HelpElements(this);this._super(c)},onCreate:function(){this.stage.css({"background-color":this.mainColor,color:this.fontColor});this._super();bookConfig.showHelpContentAtFirst?this.show():this.hide()},initHtml:function(){this.dragUrl=form_icons.drag?"data:image/png;base64,"+form_icons.drag:uiBaseURL+"drag.png";this.stage.addClass("win10_border");this.stage.append(this.title);this.stage.append(this.close);this.stage.append($("<img class='drag' src='"+this.dragUrl+"'/>"));this.stage.append(this.image);this.title1&&this.stage.append(this.title1);this.title2&&this.stage.append(this.title2);this._super()},onShow:function(){this.close.changeButtonColor(this.fontColor);!bookConfig.helpContentFileURL&&this.image&&this.image.changeButtonColor(this.fontColor)}}).extend(FadeOutFadeForm);var PcPrintForm=Class({create:function(c){this.elements=new PrintElements(this);this._super(c)},onCreate:function(){this.stage.css({"background-color":this.mainColor,color:this.fontColor});this._super()},initHtml:function(){this.dragUrl=form_icons.drag?"data:image/png;base64,"+form_icons.drag:uiBaseURL+"drag.png";this.stage.addClass("win10_border");this.stage.append(this.title);this.stage.append(this.close);this.stage.append($("<img class='drag' src='"+this.dragUrl+"'/>"));this.stage.append(this.printAll);this.stage.append(this.printCurrent);this.stage.append(this.printRange);this.stage.append(this.printButton);this._super()},changeItemColor:function(){this.printCurrent.changeButtonColor(this.fontColor);this.printRange.changeButtonColor(this.fontColor);this.printAll.changeButtonColor(this.fontColor)},initEvent:function(){this._super()},onShow:function(){this.close.changeButtonColor(this.fontColor);this.pictureListForm.leftBtn.changeButtonColor(this.fontColor);this.pictureListForm.rightBtn.changeButtonColor(this.fontColor);this.changeItemColor()}}).extend(FadeOutFadeForm);var PcSearchItem=Class({create:function(d,f){f.fontColor=this.fontColor;this._super(d,f)}}).extend(SearchItem);var PcSearchForm=Class({create:function(c){this.elements=new SearchElements(this);this._super(c)},onCreate:function(){this.stage.css({"background-color":this.mainColor,color:this.fontColor})},initHtml:function(){this.dragUrl=form_icons.drag?"data:image/png;base64,"+form_icons.drag:uiBaseURL+"drag.png";this.stage.addClass("win10_border");this.stage.append(this.title);this.stage.append(this.close);this.stage.append($("<img class='drag' src='"+this.dragUrl+"'/>"));this.stage.append(this.input);this.stage.append(this.searchButton);this.stage.append(this.searchResult);this.stage.append(this.searchSwiper);this.parent.append(this.stage)},newSearchItem:function(d,f){return new PcSearchItem(d,f)},onResize:function(){var d=Math.max(windowHeight-bookConfig.topMargin-bookConfig.bottomMargin-toolBar.getHeight(),1);Math.max(windowWidth-bookConfig.leftMargin-bookConfig.rightMargin-toolBar.getWidth(),1);var f=toolBar.getTopHeight()+10;this.width=250;this.height=d-40;this.stage.css({height:this.height+"px",top:f+"px"});this.searchSwiper.css("height",this.height-88+"px");this.elements.refresh()},getList:function(){return this.elements.getList()},onShow:function(){this.close.changeButtonColor(this.fontColor);this.input.focus();BookInfo.getBook().addSearchHighlight()},onHide:function(){BookInfo.getBook().clearSearchHighlight()}}).extend(SlideForm);var PcShareForm=Class({create:function(c){this.elements=new ShareElements(this);this._super(c)},onCreate:function(){this.stage.css({"background-color":this.mainColor,color:this.fontColor});this._super()},initHtml:function(){this.dragUrl=form_icons.drag?"data:image/png;base64,"+form_icons.drag:uiBaseURL+"drag.png";this.stage.addClass("win10_border");this.stage.append(this.title);this.stage.append(this.close);this.stage.append($("<img class='drag' src='"+this.dragUrl+"'/>"));this.stage.append(this.linkTitle);this.stage.append(this.linkArea);this.stage.append(this.copy1);this.stage.append(this.insertToSite);this.stage.append(this.insertArea);this.stage.append(this.copy2);this.stage.append(this.sharePanel);this._super()},onShow:function(){this.close.changeButtonColor(this.fontColor)}}).extend(FadeOutFadeForm);var PcTableOfContentItem=Class({create:function(f,h,g){h.fontColor=bookConfig.formFontColor?bookConfig.formFontColor:bookConfig.iconColor;this._super(f,h,g)}}).extend(TableOfContentItem);var PcTableOfContentForm=Class({create:function(c){this.elements=new TableOfContentElements(this);this._super(c)},onCreate:function(){this.stage.css({"background-color":this.mainColor,color:this.fontColor});this.close.changeButtonColor(this.fontColor)},initHtml:function(){this.dragUrl=form_icons.drag?"data:image/png;base64,"+form_icons.drag:uiBaseURL+"drag.png";this.stage.addClass("win10_border");this.stage.append(this.title);this.stage.append(this.close);this.stage.append($("<img class='drag' src='"+this.dragUrl+"'/>"));this.stage.append(this.tableofcontentSwiper);this.parent.append(this.stage)},newItem:function(f,h,g){return new PcTableOfContentItem(f,h,g)},onResize:function(){var d=Math.max(windowHeight-bookConfig.topMargin-bookConfig.bottomMargin-toolBar.getHeight(),1);Math.max(windowWidth-bookConfig.leftMargin-bookConfig.rightMargin-toolBar.getWidth(),1);var f=toolBar.getTopHeight()+10;this.width=250;this.height=d-40;this.maxHeight=this.height-68;this.stage.css({height:this.height+"px",top:f+"px"});this.tableofcontentSwiper.css("height",this.maxHeight+"px");this.elements.refresh()},onShow:function(){}}).extend(SlideForm);var PcVideoGalleryForm=Class({create:function(c){this.elements=new VideoGalleryElements(this);this._super(c)},onCreate:function(){this.stage.css({"background-color":this.mainColor,color:this.fontColor});this._super()},initHtml:function(){this.dragUrl=form_icons.drag?"data:image/png;base64,"+form_icons.drag:uiBaseURL+"drag.png";this.stage.addClass("win10_border");this.stage.append(this.title);this.stage.append(this.close);this.stage.append($("<img class='drag' src='"+this.dragUrl+"'/>"));this.stage.append(this.video);this.stage.append(this.info);if(this.videoList&&1<this.videoList.length){var c=$("<div class='video_list'></div>");c.append(this.videoListTitle);c.append(this.videoSwiper);this.stage.append(c)}else{this.stage.css("width","335px")}this._super()},onShow:function(){this.close.changeButtonColor(this.fontColor);this.elements.playVideo(this.videoList[0])}}).extend(FadeOutFadeForm);Class("TextFormatAnalyzer",{create:function(d){this.$textForAnalysis=$("<div></div>");this.analysisResult=[];if(d&&HTMLString.isHTML(d)){var f=$(d);d.toLowerCase().startsWith("<textformat")?this.$textForAnalysis.append(f):(d=$("<textformat></textformat>"),this.$textForAnalysis.append(d),d.append(f));this.analysis()}else{this.initFromText(d)}},initFromText:function(d){d||(d=" ");var f={leading:0,leftMargin:0,rightMargin:0,paragraphs:[]};d={align:"LEFT",font:{},text:d};d.font.family="Arial";d.font.size=12;d.font.color="#000000";d.font.letterSpacing=0;d.font.kerning=0;d.font.bold=!1;d.font.italic=!1;d.font.underline=!1;f.paragraphs.push(d);this.analysisResult.push(f)},analysis:function(){for(var m=this.$textForAnalysis.children(),t=0;t<m.length;t++){var s={leading:0,leftMargin:0,rightMargin:0,paragraphs:[]},r=$(m[t]);s.leading=r.attr("LEADING")?parseInt(r.attr("LEADING")):0;$.system.name!=$.system.IOS&&(s.leading+=5);s.leftMargin=r.attr("LEFTMARGIN")?parseInt(r.attr("LEFTMARGIN")):0;s.rightMargin=r.attr("RIGHTMARGIN")?parseInt(r.attr("RIGHTMARGIN")):0;for(var r=r.children(),q=0;q<r.length;q++){var p=$(r[q]),o={align:"LEFT",font:null,text:""};o.align=p.attr("ALIGN")?p.attr("ALIGN"):"LEFT";var p=$(p.children()[0]),n={};n.family=p.attr("FACE")?p.attr("FACE"):"Arial";n.size=p.attr("SIZE")?parseInt(p.attr("SIZE")):12;n.color=p.attr("COLOR")?p.attr("COLOR"):"#000000";n.letterSpacing=p.attr("LETTERSPACING")?parseInt(p.attr("LETTERSPACING")):0;n.kerning=p.attr("KERNING")?parseInt(p.attr("KERNING")):0;n.bold=0<p.find("B").length;n.italic=0<p.find("I").length;n.underline=0<p.find("U").length;o.font=n;o.text=p.text();s.paragraphs.push(o)}this.analysisResult.push(s)}},getLeftMargin:function(){return 0==this.analysisResult.length?0:this.analysisResult[0].leftMargin},getRightMargin:function(){return 0==this.analysisResult.length?0:this.analysisResult[0].rightMargin},getAlign:function(){if(0==this.analysisResult.length){return"LEFT"}var c=this.analysisResult[0];return 0==c.paragraphs.length?"LEFT":c.paragraphs[0].align},getFontFamily:function(){var c=this.getFont();return c?c.family:"Arial"},getFontColor:function(){var c=this.getFont();return c?c.color:"#000000"},getFontSize:function(){var c=this.getFont();return c?c.size:12},getLetterSpace:function(){var c=this.getFont();return c?c.letterSpacing:0},getWordSpace:function(){var c=this.getFont();return c?c.kerning:"0"},getFont:function(){if(0==this.analysisResult.length){return null}var c=this.analysisResult[0];return 0==c.paragraphs.length?null:c.paragraphs[0].font},initFont:function(d){var f=this.getFontCSS(this.getFont());d.css(f)},getMaxFontSize:function(){for(var g=0,l=0;l<this.analysisResult.length;l++){for(var k=this.analysisResult[l],h=0;h<k.paragraphs.length;h++){g=Math.max(g,k.paragraphs[h].font.size)}}return g},getMinFontSize:function(){for(var g=10000,l=0;l<this.analysisResult.length;l++){for(var k=this.analysisResult[l],h=0;h<k.paragraphs.length;h++){g=Math.min(g,k.paragraphs[h].font.size)}}return g},getText:function(){for(var f=this.getTextLines(),h="",g=0;g<f.length;g++){h=h+f[g]+"\r\n"}return h},getTextLines:function(){return this.getLines()},getLines:function(){for(var g=[],l=0;l<this.analysisResult.length;l++){for(var k=this.analysisResult[l],h=0;h<k.paragraphs.length;h++){g.push(k.paragraphs[h].text)}}return g},getHTML:function(){for(var v=$("<div style='word-wrap:break-word;cursor:default;'></div>"),u=0;u<this.analysisResult.length;u++){var t=this.analysisResult[u],s=$("<div></div>");0<t.leftMargin&&s.css("margin-left",t.leftMargin+"px");0<t.rightMargin&&s.css("margin-right",t.rightMargin+"px");for(var r=0;r<t.paragraphs.length;r++){var q=t.paragraphs[r],p=q.font.size+t.leading,o=$("<p></p>");o.css("text-align",q.align);var n=$("<span></span>");n.css(this.getFontCSS(q.font));n.css("line-height",p+"px");(q=q.text)||(q="&nbsp;");q=q.replaceAll(" ","&thinsp;");q=q.replaceAll("<","&lt;");q=q.replaceAll(">","&gt;");n.append(q);o.append(n);s.append(o)}v.append(s)}return v},getFontCSS:function(c){return c?{"font-family":c.family,color:c.color,"font-size":c.size+"px","letter-spacing":c.letterSpacing+"px","word-spacing":c.kerning+"px","font-weight":c.bold?"bold":"normal","font-style":c.italic?"italic":"normal","text-decoration":c.underline?"underline":"none"}:{}}});Class("Item",{Package:"PageItem",create:function(g,l,k,h){this.parent=g;this.config=this.parseConfig(l);this.pageWidth=k;this.pageHeight=h;this.pw=k;this.ph=h;this.type=this.config.annotype},parseConfig:function(c){return c},destroy:function(){},onResize:virtual_function,initLinkHint:function(f){if(this.config.hint&&this.config.hint.text&&"null"!=this.config.hint.text.toLowerCase()){var h=null,h="2"==this.config.hint.hintShapeType?new NormalLinkHint:new BubbleLinkHint,g=h.build(this.config);g&&(this.parent.append(g),g.hide(),f.bind("mouseenter",function(c){g.show();g.find("div").css({left:g.width()/2+"px"});g.css({left:this.left+(this.width-g.width()-10)/2+"px",top:Math.max(2,this.top-2*g.height())+"px"})}.bind(this)),f.bind(isTouch?_event._end:"mouseleave",function(c){g.hide()}.bind(this)))}},addActionEvent:function(c){(new this.ActionManager(this,c,this.config)).addAction()},addEffectEvent:function(d,f){(new this.EffectManager(this,d,f,this.config)).addEffect()},imageReflection:function(c){!0==supports("boxReflect")&&this.addCSSReflection(c)},addCSSReflection:function(c){"1"==this.config.reflectionType&&c.css({"-webkit-box-reflect":"below 0px -webkit-gradient(linear, 0 0, 0 100%, from(transparent), color-stop(0.7, transparent), to(white))","-o-box-reflect":"below 0px -webkit-gradient(linear, 0 0, 0 100%, from(transparent), color-stop(0.7, transparent), to(white))"});"6"==this.config.reflectionType&&c.css({"-webkit-box-reflect":"below -6px -webkit-gradient(linear, 0 0, 0 100%, from(transparent), color-stop(0.5, transparent), to(white))","-o-box-reflect":"below -6px -webkit-gradient(linear, 0 0, 0 100%, from(transparent), color-stop(0.5, transparent), to(white))"});"3"==this.config.reflectionType&&c.css({"-webkit-box-reflect":"below 0px -webkit-gradient(linear, 0 0, 0 100%, from(transparent), color-stop(0.5, transparent), to(white))","-o-box-reflect":"below 0px -webkit-gradient(linear, 0 0, 0 100%, from(transparent), color-stop(0.5, transparent), to(white))"});"4"==this.config.reflectionType&&c.css({"-webkit-box-reflect":"below -10px -webkit-gradient(linear, 0 0, 0 100%, from(transparent), color-stop(0.7, transparent), to(white))","-o-box-reflect":"below -10px -webkit-gradient(linear, 0 0, 0 100%, from(transparent), color-stop(0.7, transparent), to(white))"});"5"==this.config.reflectionType&&c.css({"-webkit-box-reflect":"below -10px -webkit-gradient(linear, 0 0, 0 100%, from(transparent), color-stop(0.6, transparent), to(white))","-o-box-reflect":"below -10px -webkit-gradient(linear, 0 0, 0 100%, from(transparent), color-stop(0.6, transparent), to(white))"})},addShadow:function(f){if(this.config.hasShadow){var h=this.config.shadow,g=Color(h.shadowColor).toString();f.css({"box-shadow":h.shadowBlurX+"px "+h.shadowBlurY+"px "+h.shadowDistance+"px "+g,"-moz-box-shadow":h.shadowBlurX+"px "+h.shadowBlurY+"px "+h.shadowDistance+"px "+g,"-webkit-box-shadow":h.shadowBlurX+"px "+h.shadowBlurY+"px "+h.shadowDistance+"px "+g,"-ms-box-shadow":h.shadowBlurX+"px "+h.shadowBlurY+"px "+h.shadowDistance+"px "+g,"-o-box-shadow":h.shadowBlurX+"px "+h.shadowBlurY+"px "+h.shadowDistance+"px "+g})}},setRotation:function(d,f){0!=parseInt(f)&&(isNaN(f)||d.css({transform:"rotate("+f+"deg)","-webkit-transform":"rotate("+f+"deg)","-ms-transform":"rotate("+f+"deg)","-o-transform":"rotate("+f+"deg)","-moz-transform":"rotate("+f+"deg)","transform-origin":"0% 0%","-webkit-transform-origin":"0% 0%","-ms-transform-origin":"0% 0%","-o-transform-origin":"0% 0%","-moz-transform-origin":"0% 0%"}))},fixRelativePath:function(c){return c&&"string"===typeof c?!0==bookConfig.isFlipPdf?c.startsWith("../")?c:c.startsWith("./")?"."+c:c.isUrl()?c:"../"+c:c:c},nameIs:function(){if(0==arguments.length){return !1}for(var d=this.getClassName(),f=0;f<arguments.length;f++){if("string"==typeof arguments[f]&&d==arguments[f]){return !0}}return !1},nameLike:function(){if(0==arguments.length){return !1}for(var f=this.getClassName().toLowerCase(),h=0;h<arguments.length;h++){if("string"==typeof arguments[h]){var g=arguments[h].toLowerCase();if(-1<f.indexOf(g)){return !0}}}return !1}});Class("NormalLinkHint",{build:function(g,l,k){k=new TextFormatAnalyzer(g.hint.text);l=k.getText();if(!l.trim()){return null}l=$("<div>"+l+"</div>");k.initFont(l);k=Color(g.hint.hintShapeColor);var h=Color(g.hint.hintShapeColor2);parseBool(g.hint.hintAuto)?l.css({padding:"5px","border-radius":"2px"}):l.css({width:g.hint.hintW+"px",height:g.hint.hintH+"px","line-height":g.hint.hintH+"px"});l.css({position:"absolute","text-align":"center",background:"-moz-linear-gradient(top,"+k.rgba(g.hint.hintShapeAlpha)+","+h.rgba(g.hint.hintShapeAlpha)+")",background:"-o-linear-gradient(top,"+k.rgba(g.hint.hintShapeAlpha)+","+h.rgba(g.hint.hintShapeAlpha)+")",background:"-ms-linear-gradient(top,"+k.rgba(g.hint.hintShapeAlpha)+","+h.rgba(g.hint.hintShapeAlpha)+")",background:"-webkit-linear-gradient(top,"+k.rgba(g.hint.hintShapeAlpha)+","+h.rgba(g.hint.hintShapeAlpha)+")",background:"linear-gradient("+k.rgba(g.hint.hintShapeAlpha)+","+h.rgba(g.hint.hintShapeAlpha)+")","border-radius":"2px",color:"white"});return l}});Class("BubbleLinkHint",{build:function(h,n,m){var l=new TextFormatAnalyzer(h.hint.text);n=l.getText();if(!n.trim()){return null}n=$("<div>"+n+"</div>");m=$("<div></div>");n.append(m);l.initFont(n);var l=Color(h.hint.hintShapeColor),k=Color(h.hint.hintShapeColor2);parseBool(h.hint.hintAuto)?n.css({padding:"5px","border-radius":"2px"}):n.css({width:h.hint.hintW+"px",height:h.hint.hintH+"px","line-height":h.hint.hintH+"px"});m.css({position:"absolute",bottom:"-10px",border:"10px solid transparent","border-bottom-width":0,"border-left-width":"5px","border-right-width":"5px","border-top-color":k.rgba(h.hint.hintShapeAlpha)});n.css({position:"absolute","text-align":"center",background:"-moz-linear-gradient(top,"+l.rgba(h.hint.hintShapeAlpha)+","+k.rgba(h.hint.hintShapeAlpha)+")",background:"-o-linear-gradient(top,"+l.rgba(h.hint.hintShapeAlpha)+","+k.rgba(h.hint.hintShapeAlpha)+")",background:"-ms-linear-gradient(top,"+l.rgba(h.hint.hintShapeAlpha)+","+k.rgba(h.hint.hintShapeAlpha)+")",background:"-webkit-linear-gradient(top,"+l.rgba(h.hint.hintShapeAlpha)+","+k.rgba(h.hint.hintShapeAlpha)+")",background:"linear-gradient("+l.rgba(h.hint.hintShapeAlpha)+","+k.rgba(h.hint.hintShapeAlpha)+")","border-radius":"2px",color:"white"});return n}}).extend("NormalLinkHint");Class("ActionManager",{Package:"PageItem",create:function(f,h,g){this.item=f;this.element=h;this.config=g;this.action=g.action;this.initAction();this.initActionEvent()},initAction:function(){if(this.action){if(this.action instanceof Array){if(0==this.action.length){this.action=null;return}this.action=this.action[0]}this.eventType=null;this.action.triggerEventType&&(this.eventType=this.action.triggerEventType);$.system.name==$.system.IOS&&(this.eventType==PageEditor.TriggerEventType.MouseDown&&(void 0==this.action.linkTarget&&(this.action.linkTarget="_self"),"_blank"==this.action.linkTarget&&(this.eventType=PageEditor.TriggerEventType.MouseUp),"Blank"==this.action.linkTarget&&(this.eventType=PageEditor.TriggerEventType.MouseUp)),this.action.url&&"tel:"==this.action.url.toLowerCase().substr(0,4)&&(this.eventType=PageEditor.TriggerEventType.MouseUp))}},initActionEvent:function(){if(this.action){switch(this.eventName="",this.eventType){case PageEditor.TriggerEventType.MouseDown:this.eventName=_event._down;break;case PageEditor.TriggerEventType.MouseOver:this.eventName=_event._over;break;case PageEditor.TriggerEventType.MouseOut:this.eventName=_event._out;break;case PageEditor.TriggerEventType.MouseUp:this.eventName=_event._end;break;case PageEditor.TriggerEventType.MouseMove:this.eventName=_event._move;break;case PageEditor.TriggerEventType.MouseLeave:this.eventName=_event._leave}}},addAction:function(){this.action&&this.element&&""!=this.eventName&&(!isPhone()&&!isPad()||this.eventName!=_event._down&&this.eventName!=_event._end&&this.eventName!=_event._over?(this.element.css({cursor:"pointer"}),this.element.bind(this.eventName,function(c){this.onAction();c.stopPropagation();return !1}.bind(this)),this.element.addClass("flip-action")):this.addPhoneAction())},addPhoneAction:function(){this.element.onTap(function(c){this.onAction();c.stopPropagation()}.bind(this));this.element.addClass("flip-action")},onAction:function(){var c=this.getActionExecutor();if(c){return c.execute(this.item,this.element,this.config)}},getActionExecutor:function(){if(this.action.actionType==PageEditor.ActionType.GOTO_PAGE){return new PageItem.Action.GotoPageAction}if(this.action.actionType==PageEditor.ActionType.OPEN_URL){return new PageItem.Action.OpenUrlAction}if(this.action.actionType==PageEditor.ActionType.OPEN_WINDOW){return new PageItem.Action.OpenWindowAction}if(this.action.actionType==PageEditor.ActionType.SLIDE_SHOW){return new PageItem.Action.OpenSlideshowAction}if(this.action.actionType==PageEditor.ActionType.PLAY_AUDIO){return new PageItem.Action.PlayAudioAction}if(this.action.actionType==PageEditor.ActionType.ACTION_JS){return new PageItem.Action.ExecuteJavascriptAction}if(this.action.actionType==PageEditor.ActionType.WINDOW_HTML){return new PageItem.Action.HTMLWindowAction}if(this.action.actionType==PageEditor.ActionType.PLAY_VIDEO){return new PageItem.Action.PlayVideoAction}if(this.action.actionType==PageEditor.ActionType.SHOW_INFORMATION){return new PageItem.Action.ShowInformationAction}if(this.action.actionType==PageEditor.ActionType.QUIZ){return new PageItem.Action.OpenQuizAction}if(this.action.actionType==PageEditor.ActionType.SWF_SLIDE){return new PageItem.Action.OpenSwfSlideAction}}});Class("GotoPageAction",{Package:"PageItem.Action",execute:function(f,h,g){this.initPageIndex(g.action);gotoPageFun(this.linkPageIndex);h.addClass("slider-action")},initPageIndex:function(c){this.linkPageIndex=c.pageIndex;this.linkPageIndex||(this.linkPageIndex=1)}});Class("OpenUrlAction",{Package:"PageItem.Action",execute:function(f,h,g){this.initLink(g.action);if("tel:"==this.linkUrl.substr(0,4)){window.open(this.linkUrl)}else{if(this.isTargetMatch("self")){return window.location=this.linkUrl,!1}if(this.isTargetMatch("blank")){return window.open(this.linkUrl),!1}if(this.isTargetMatch("parent")){return parent.location=this.linkUrl,!1}if(this.isTargetMatch("top")){for(h=window;h.parent!=h;){h=h.parent}h.location=this.linkUrl;return !1}(f=window.frames[this.linkTarget])?f.location=this.linkUrl:window.location=this.linkUrl}h.addClass("slider-action")},initLink:function(c){this.initLinkUrl(c);this.initLinkTarget(c)},initLinkUrl:function(c){this.linkUrl=c.url;this.linkUrl||(this.linkUrl="");this.linkUrl=this.linkUrl.trim();c=this.linkUrl.toLowerCase();c.isUrl()&&c.startsWith("www")&&(this.linkUrl="http://"+this.linkUrl);c.isEmail()&&!c.startsWith("mailto:")&&(this.linkUrl="mailto:"+this.linkUrl)},initLinkTarget:function(c){this.linkTarget=c.linkTarget;this.linkTarget||(this.linkTarget="_blank")},isTargetMatch:function(c){return c?0<=this.linkTarget.trim().toLowerCase().indexOf(c):!1}});Class("PlayAudioAction",{Package:"PageItem.Action",execute:function(g,l,k){k=k.action;var h=tmpContainer;bookContainer.width();bookContainer.height();g.audio||(g.audio=new AudioEditor(h,k.audioURL,k.autoPlay,k.autoPlayAgain));!1==g.audio.isPlaying()?g.audio.play():g.audio.pause();l.addClass("slider-action")}});Class("PlayVideoAction",{Package:"PageItem.Action",execute:function(f,h,g){g=g.action;g.windowType==PageEditor.WindowType.OPEN_YOUTUBE&&(f.video=new PopUpVideo(g,"youtube"));g.windowType==PageEditor.WindowType.OPEN_VIMEO&&(f.video=new PopUpVideo(g,"vimeo"));g.windowType==PageEditor.WindowType.OPEN_DAILYMOTION&&(f.video=new PopUpVideo(g,"dailymotion"));g.windowType==PageEditor.WindowType.OPEN_TYPE_WISTIA&&(f.video=new PopUpVideo(g,"wistia"));g.windowType==PageEditor.WindowType.OPEN_TYPE_YOUKU&&(f.video=new PopUpVideo(g,"youku"));g.windowType==PageEditor.WindowType.OPEN_TYPE_QQ&&(f.video=new PopUpVideo(g,"qq"));h.addClass("slider-action")}});Class("OpenSlideshowAction",{Package:"PageItem.Action",execute:function(k,p,o){o=o.action;var n=tmpContainer,m=bookContainer.width(),l=bookContainer.height();k.slide=new PageItem.SlideShow(n,o.photos,m,l);p.addClass("slider-action")}});Class("ExecuteJavascriptAction",{Package:"PageItem.Action",execute:function(b,c,d){b=d.action;b.scriptFun&&eval(b.scriptFun);c.addClass("slider-action")}});Class("OpenWindowAction",{Package:"PageItem.Action",execute:function(l,r,q){q=q.action;var p={width:q.windowWidth,height:q.windowHeight,src:q.resourceContent,caption:q.caption},o=tmpContainer,n=bookContainer.width(),m=bookContainer.height();q.windowType==PageEditor.WindowType.OPEN_VIDEO&&(l.video=$.browser.device==$.browser.DEVICE_PHONE?new MobileVideo(o,p,n,m,"video"):new PageItem.VideoForm(o,p,n,m,"video"));q.windowType==PageEditor.WindowType.OPEN_FLASH&&(l.video=new PageItem.VideoForm(o,p,n,m,"flash"));q.windowType==PageEditor.WindowType.OPEN_SHOW_TEXT&&(l.video=$.browser.device==$.browser.DEVICE_PHONE?new TextLightBox(o,p,n,m,"text"):new PageItem.VideoForm(o,p,n,m,"text"));r.addClass("slider-action")}});Class("HTMLWindowAction",{Package:"PageItem.Action",execute:function(f,h,g){f.windowHtml=new PageItem.WindowHtml(tmpContainer,g.action);h.addClass("slider-action")}});Class("ShowInformationAction",{Package:"PageItem.Action",execute:function(f,h,g){f.showInformation=$.browser.device==$.browser.DEVICE_PHONE?new PageItem.ShowInformationMobile(tmpContainer,g):new PageItem.ShowInformation(tmpContainer,g);f.showInformation.show();h.addClass("slider-action")}});Class("OpenQuizAction",{Package:"PageItem.Action",execute:function(f,h,g){$.browser.device==$.browser.DEVICE_PHONE?(f.quiz=new PageItem.QuizPanelMobile(tmpContainer,g),f.quiz.show()):f.quiz=new PageItem.QuizPanelPC(tmpContainer,g);h.addClass("slider-action")}});Class("OpenSwfSlideAction",{Package:"PageItem.Action",execute:function(g,l,k){"IMG"==l[0].tagName.toUpperCase()&&(l=l.parent());var h=l.parent();k.elemConfig={element:l,elementParent:h,offsetX:h.offset().left,offsetY:h.offset().top,parentWidth:BookInfo.getBook().getPageWidth(),parentHeight:BookInfo.getBook().getPageHeight()};h=tmpContainer;tmpContainer.width();tmpContainer.height();g.swfSlide||(g.swfSlide=new PageItem.SwfSlide(h,k,windowWidth,windowHeight));g.swfSlide.isBusy()||(g.swfSlide.show(),l.addClass("slider-action"))}});Class("EffectManager",{Package:"PageItem",create:function(g,l,k,h){l&&h&&h.effect&&(k||(k=""),this.elementConfig=k,this.item=g,this.element=l,this.config=h,this.effect=h.effect)},addEffect:function(){this.element&&this.config&&this.effect&&this.effect.effectType&&this.getActionExecutor()},getActionExecutor:function(){if(this.effect.effectType==PageEditor.Effect.FADEIN){return new PageItem.Effect.FadeIn(this.item,this.element,this.elementConfig,this.config)}if(this.effect.effectType==PageEditor.Effect.CUTTING){return new PageItem.Effect.Cutting(this.item,this.element,this.elementConfig,this.config)}if(this.effect.effectType==PageEditor.Effect.FLY_IN){return new PageItem.Effect.FlyIn(this.item,this.element,this.elementConfig,this.config)}if(this.effect.effectType==PageEditor.Effect.INDENTATION){return new PageItem.Effect.Indentation(this.item,this.element,this.elementConfig,this.config)}}});Class("FadeIn",{Package:"PageItem.Effect",create:function(g,l,k,h){l&&h&&(this.item=g,this.element=l,this.config=h,this.effect=h.effect,this.hide(),this.show())},hide:function(){this.element.css({display:"none"})},show:function(){this.element.fadeIn(1000*this.effect.duration)}});Class("FlyIn",{Package:"PageItem.Effect",create:function(g,l,k,h){l&&h&&k&&(this.item=g,this.elementConfig=k,this.element=l,this.elemWidth=this.elementConfig.elemWidth,this.elemHeight=this.elementConfig.elemHeight,this.parentWidth=this.elementConfig.parentWidth,this.parentHeight=this.elementConfig.parentHeight,this.config=h,this.effect=h.effect,this.hide(),this.show())},setPosition:function(){this.parentWidth/this.parentHeight>this.elemWidth/this.elemHeight?this.element.css({margin:"0 auto"}):this.element.css({margin:"auto 0"});switch(this.effect.position){case"left":this.element.css({left:-this.elementConfig.x-this.elementConfig.elemWidth+"px"});break;case"top":this.element.css({top:-this.elementConfig.y-this.elementConfig.elemHeight+"px"});break;case"bottom":this.element.css({top:this.elementConfig.pageHeight-this.elementConfig.y+"px"});break;case"right":this.element.css({left:this.elementConfig.pageWidth-this.elementConfig.x+"px"})}},hide:function(){this.setPosition()},show:function(){setTimeout(function(){"left"==this.effect.position||"right"==this.effect.position?this.element.animate({left:0},1000*this.effect.duration,"easeOutBack"):this.element.animate({top:0},1000*this.effect.duration,"easeOutBack")}.bind(this),1000*bookConfig.flippingTime)}});Class("Indentation",{Package:"PageItem.Effect",create:function(g,l,k,h){l&&h&&k&&(this.item=g,this.elementConfig=k,this.element=l,this.config=h,this.effect=h.effect,this.hide(),this.show())},setPosition:function(){this.parentWidth/this.parentHeight>this.elemWidth/this.elemHeight?this.element.parent().css({margin:"0 auto",overflow:"hidden"}):this.element.parent().css({margin:"auto 0",overflow:"hidden"});switch(this.effect.position){case"left":this.element.css({left:-this.elementConfig.elemWidth+"px"});break;case"top":this.element.css({top:-this.elementConfig.elemHeight+"px"});break;case"bottom":this.element.css({top:this.elementConfig.elemHeight+"px"});break;case"right":this.element.css({left:this.elementConfig.elemWidth+"px"})}},hide:function(){this.setPosition()},show:function(){setTimeout(function(){"left"==this.effect.position||"right"==this.effect.position?this.element.animate({left:0},1000*this.effect.duration,"easeOutBack"):this.element.animate({top:0},1000*this.effect.duration,"easeOutBack")}.bind(this),1000*bookConfig.flippingTime)}});Class("Cutting",{Package:"PageItem.Effect",create:function(g,l,k,h){l&&k&&h&&(this.elementConfig=k,this.element=l,this.elemParent=this.element.parent(),this.config=h,this.effect=h.effect,this.initCss(),this.hide(),this.show())},initCss:function(){this.element.addClass("clip");this.element.parent().addClass("active")},cutting:function(m){if(!m){return !1}m.removeAttribute("id");var t=this.elementConfig.elemHeight,s=this.elementConfig.elemWidth,r=this.elementConfig.elemWidth/10,q=m.outerHTML;if(window.getComputedStyle(document.body).webkitClipPath){for(var p="",o=0;o<s;o+=r){for(var n=0;n<t;n+=r){[[[o,n],[o,n+r],[o+r,n+r],[o+r,n]]].forEach(function(c,h){var g=c.map(function(f){return f.map(function(k){return k+"px"}).join(" ")}).join(),g="-webkit-clip-path: polygon("+g+");clip-path: polygon("+g+");",d=0.5>Math.random()?-1:1,d="translate("+[s*(0.5-Math.random()),t*(0.5-Math.random())].map(function(f){return f+"px"}).join()+") rotate("+Math.round(360*d*Math.random())+"deg)";p+=q.replace('style="',' style="'+("-webkit-transform:"+d+";-o-transform:"+d+";-moz-transform:"+d+";-ms-transform:"+d+";transform:"+d+";")+g);this.element.css({visibility:"hidden"})}.bind(this))}}$(m).parent().append(p);setTimeout(function(){this.elemParent.find("img").css({background:"#fff",visibility:"visible"});this.elemParent.find("img").not(":first").remove()}.bind(this),1100);return !0}m.className+=" no-clipath";return !1},hide:function(){(isPhone()||isPad())&&this.element.css({display:"none"})},show:function(){isPhone()||isPad()?this.element.fadeIn(1000):this.cutting(this.element[0])}});Class("Youtube",{Package:"PageItem",create:function(g,l,k,h){this._super(g,l,k,h);null!=this.config.id&&(this.width=Number(this.config.width)*this.pageWidth,this.height=Number(this.config.height)*this.pageHeight,this.x=this.config.x*this.pageWidth,this.y=this.config.y*this.pageHeight,g=this.config.id,-1<g.indexOf("/")&&(l=-1<g.indexOf("?v=")?g.lastIndexOf("?v=")+3:g.lastIndexOf("/")+1,g=g.substring(l,g.length)),l="https"==(window.location.href?window.location.href.toLowerCase():"http:").substring(0,5)?"https":"http",this.youtubeFrame=$("<iframe id='player' class='youtube-player flip-action' type='text/html' width='"+this.width+"' height='"+this.height+"' src='"+l+"://www.youtube.com/embed/"+g+"?enablejsapi=1&rel=0"+this.config.playerParameters+"' frameborder='0' allowfullscreen='1' style='position: absolute; opacity: "+this.config.alpageHeighta+"; left:"+this.x+"px; top:"+this.y+"px;'></iframe>"),this.parent.append(this.youtubeFrame))},parseConfig:function(c){return{width:c.location.width,height:c.location.height,x:c.location.x,y:c.location.y,alpha:c.alpha,id:c.annotype==PageEditor.AnnoType.ANNO_YOUTUBE?c.videoId:c.videoID,moviePlayTriggerEvt:c.moviePlayTriggerEvt,playerParameters:c.playerParameters,movieStopTriggerEvt:c.movieStopTriggerEvt}},initCss:function(){this.youtubeFrame.css({width:this.width+"px",height:this.height+"px",top:this.y+"px",left:this.x+"px"})},onResize:function(d,f){this.pageWidth=d;this.pageHeight=f;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.youtubeFrame.css({width:this.width+"px",height:this.height+"px"});this.setPosition()},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.youtubeFrame.css({top:this.y+"px",left:this.x+"px"})},getPlayEvt:function(){return this.config.moviePlayTriggerEvt},getStopEvt:function(){return this.config.movieStopTriggerEvt},pause:function(){this.callPlayer("pauseVideo")},play:function(){this.callPlayer("playVideo")},hide:function(){this.pause();this.youtubeFrame.css({width:"0px",height:"0px"});this.youtubeFrame.css({display:"none"})},show:function(){this.youtubeFrame.css({width:this.width+"px",height:this.height+"px"});this.youtubeFrame.css({display:"block"})},callPlayer:function(g,l){var k=this.youtubeFrame[0],h=k.getAttribute("src");h&&-1!==h.indexOf("youtube.com/embed")&&k.contentWindow.postMessage(JSON.stringify({event:"command",func:g,args:l||[]}),"*")}}).extend("Item");Class("Video",{Package:"PageItem",create:function(h,n,m,l,k){this.config=this.parseConfig(n);this.parent=h;this.pageWidth=m;this.pageHeight=l;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.content=$("<div class='flip-action'></div>");this.content.css({position:"absolute",left:this.x+"px",top:this.y+"px",width:this.width+"px",height:this.height+"px","background-color":"black"});this.setRotation(this.content,this.config.rotation);this.parent.append(this.content);"string"==typeof this.config.previewSrc&&""!=this.config.previewSrc&&null!=this.config.previewSrc&&void 0!=this.config.previewSrc&&(this.config.previewSrc=this.fixRelativePath(this.config.previewSrc),this.content.css({background:"url("+this.config.previewSrc+")"}),this.content.css({"background-size":this.width+"px "+this.height+"px"}));h=this.config.src.length;if("string"==typeof this.config.src){if(h=this.config.src.substr(h-4,4).toLowerCase(),null==this.config.src||".mp4"!=h&&".flv"!=h&&".f4v"!=h){return}}else{if(this.config.src=={}){return}}this.config.src=this.fixRelativePath(this.config.src);this.video=null;this.video=$("<video controls preload='metadata' poster='"+this.config.previewSrc+"'><source src='"+this.config.src+"'/></video>");this.video.css({position:"absolute","z-index":1,left:"0px",top:"0px",width:"100%",height:"100%",opacity:this.config.alpha});this.content.append(this.video);void 0!=this.video[0].play&&(this.videoSkin=this.content.addVideoSkin(k),this.video.removeAttr("controls"));this.content.bind(_event._down,function(c){c.stopPropagation()});this.video.bind(_event._down,function(c){c.stopPropagation()});parseBool(this.config.reflection)&&this.imageReflection(this.video,this.width,this.height)},hide:function(){this.content.hide()},show:function(){this.content.show()},parseConfig:function(d){var f={width:d.location.width,height:d.location.height,rotation:d.location.rotation,x:d.location.x,y:d.location.y,alpha:d.alpha,reflection:d.location.reflection,reflectionType:d.location.reflectionType,reflectionAlpha:d.location.reflectionAlpha,previewSrc:d.previewUrl,moviePlayTriggerEvt:d.moviePlayTriggerEvt,movieStopTriggerEvt:d.movieStopTriggerEvt,replayWhenPlayEventTrigger:d.replayWhenPlayEventTrigger};d.componentData&&(d.componentData.previewURL&&(f.previewSrc=d.componentData.previewURL),d.componentData.imgURL&&(f.previewSrc=d.componentData.imgURL));d.previewURL&&(f.previewSrc=d.previewURL);void 0!=d.videoURL&&(f.src=d.videoURL);void 0!=d.url&&(f.src=d.url);d.componentData&&(f.src=d.componentData.videoURL);return f},onResize:function(d,f){this.pageWidth=d;this.pageHeight=f;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.content.css({width:this.width+"px",height:this.height+"px"});this.content.css({"background-size":this.width+"px "+this.height+"px"});if(this.videoSkin){this.videoSkin.onResize()}this.setPosition()},setPosition:function(){this.x=this.pageWidth*this.config.x;this.y=this.pageHeight*this.config.y;this.content.css({left:this.x+"px",top:this.y+"px"})},playVideo:function(){if(null!=this.video){try{this.videoSkin.play()}catch(c){}}},stopVideo:function(){if(null!=this.video){try{this.videoSkin.stop()}catch(c){}}},pauseVideo:function(){if(null!=this.video){try{this.videoSkin.pause()}catch(c){}}},getPlayEvt:function(){return this.config.moviePlayTriggerEvt},getStopEvt:function(){return this.config.movieStopTriggerEvt},getPlayStatuEnded:function(){return this.video[0].ended},getReplayWhenPlayEvent:function(){return this.config.replayWhenPlayEventTrigger},getTotalTime:function(){return this.video[0].duration},getCurrentTime:function(){return this.video[0].currentTime},setCurrentTime:function(c){this.video[0].currentTime=c}}).extend(PageItem.Item);Class("Vimeo",{Package:"PageItem",create:function(h,n,m,l,k){this.config=this.parseConfig(n);this.vimeoFrame=null;null!=this.config.id&&(this.pageWidth=m,this.pageHeight=l,this.width=this.config.width*this.pageWidth,this.height=this.config.height*this.pageHeight,this.x=this.config.x*this.pageWidth,this.y=this.config.y*this.pageHeight,this.config.id+="",n="",this.config.playerParameters&&(n="?"+this.config.playerParameters),m=this.config.id.lastIndexOf("/"),m=this.config.id.substring(m+1),l="https"==(window.location.href?window.location.href.toLowerCase():"http:").substring(0,5)?"https":"http",this.vimeoFrame=$("<iframe width='"+this.width+"' height='"+this.height+"' src='"+l+"://player.vimeo.com/video/"+m+n+"'  frameborder='0' class='flip-action' style='position: absolute;  left:"+this.x+"px; top:"+this.y+"px;'  webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>"),h.append(this.vimeoFrame))},parseConfig:function(c){return{width:c.location.width,height:c.location.height,x:c.location.x,y:c.location.y,alpha:c.alpha,id:c.videoID+"",moviePlayTriggerEvt:c.moviePlayTriggerEvt,movieStopTriggerEvt:c.movieStopTriggerEvt,playerParameters:c.playerParameters}},onResize:function(d,f){this.pageWidth=d;this.pageHeight=f;this.vimeoFrame.css({width:this.pageWidth*this.config.width+"px",height:this.pageHeight*this.config.height+"px"});this.setPosition(this.config.x*this.pageWidth,this.config.y*this.pageHeight)},setPosition:function(d,f){this.vimeoFrame.css({top:f+"px",left:d+"px"})},getPlayEvt:function(){return this.config.moviePlayTriggerEvt},getStopEvt:function(){return this.config.movieStopTriggerEvt},hide:function(){this.vimeoFrame.css({display:"none"})},show:function(){this.vimeoFrame.css({display:"block"})}});Class("PopUpVimeo",{Package:"PageItem",create:function(h,n,m,l,k){this.config=this.parseConfig(n);this.type=k;this.parent=h;this.vimeoFrame=null;null!=this.config.id&&(this.pageWidth=m,this.pageHeight=l,this.width=this.config.width*this.pageWidth,this.height=this.config.height*this.pageHeight,this.x=this.config.x*this.pageWidth,this.y=this.config.y*this.pageHeight,this.vimeoDiv=$("<div class='flip-action'></div>"),this.vimeoDiv.css({width:this.width+"px",height:this.height+"px",left:this.x+"px",top:this.y+"px",opacity:this.config.alpha,position:"absolute",cursor:"pointer","background-color":"rgba(0,0,0,0.5)"}),bookConfig.isFlipPdf&&(this.config.url.startsWith("./")?this.config.url="."+this.config.url:this.config.url.isUrl()||(this.config.url="../"+this.config.url)),this.url=this.config.url,this.vimeoImage=$("<img src='"+this.url+"'style='position: absolute;cursor:pointer;width:"+this.width+"px;height:"+this.height+"px;z-index:100'/>"),this.parent.append(this.vimeoDiv),this.vimeoDiv.append(this.vimeoImage),this.vimeoDiv.bind(_event._down,function(c){c.stopPropagation()}.bind(this)),this.vimeoDiv.bind(_event._end,function(c){this.popupVideo=new PopUpVideo(this.config,k);this.popupVideo.background.show();c.stopPropagation()}.bind(this)))},parseConfig:function(c){return{width:c.location.width,height:c.location.height,x:c.location.x,y:c.location.y,alpha:c.alpha,id:c.videoID,moviePlayTriggerEvt:c.moviePlayTriggerEvt,movieStopTriggerEvt:c.movieStopTriggerEvt,playerParameters:c.playerParameters,url:c.url,autoPlay:c.autoPlay}},onResize:function(d,f){this.pageWidth=d;this.pageHeight=f;if(this.popupVideo){this.popupVideo.onResize(this.pageWidth,this.pageHeight)}this.vimeoDiv.css({width:this.pageWidth*this.config.width+"px",height:this.pageHeight*this.config.height+"px"});this.setPosition(this.config.x*this.pageWidth,this.config.y*this.pageHeight)},setPosition:function(d,f){this.vimeoDiv.css({top:f+"px",left:d+"px"})}});var PopUpVideo=Class({create:function(d,f){this.config=$.extend({id:null,alpha:1},d);this.config.id+="";this.vimeoWidth=480;this.vimeoHeight=270;this.background=$("<div id='popup' class='flip-action' ></div>");this.vimeoBac=$("<div></div>");this.vimeoBorder=$("<div></div>");this.initVideo(f);tmpContainer.append(this.background);this.background.append(this.vimeoBac);this.vimeoBac.append(this.vimeoBorder);this.vimeoBorder.append(this.vimeoFrame);this.closeButton=$("<img src='"+uiBaseURL+"close_form.png'/>");this.vimeoBorder.append(this.closeButton);this.initStyle();this.initEvents();this.onResize();this.resizeTimer=this.onResize.interval(this,500);this.visible=!0},initVideo:function(g){var l="https"==(window.location.href?window.location.href.toLowerCase():"http:").substring(0,5)?"https":"http";if("vimeo"==g){var k=this.config.id.lastIndexOf("/"),k=this.config.id.substring(k+1),h="";"true"==this.config.autoPlay&&(h="?autoplay=1");this.vimeoFrame=$("<iframe width='"+this.vimeoWidth+"' height='"+this.vimeoHeight+"' src='"+l+"://player.vimeo.com/video/"+k+h+"' frameborder='0' style='position: absolute;background:#000000;'  webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>")}"youtube"==g&&(this.vimeoFrame=$("<iframe class='youtube-player' type='text/html' width='"+this.vimeoWidth+"' height='"+this.vimeoHeight+"' src='"+l+"://www.youtube.com/embed/"+this.config.id+"' frameborder='0' allowfullscreen='1' style='position: absolute; opacity: "+this.config.alpha+"'></iframe>"));"dailymotion"==g&&(this.vimeoFrame=$("<iframe id=woiframe width='"+this.vimeoWidth+"' height='"+this.vimeoHeight+"' src='"+l+"://www.dailymotion.com/embed/video/"+this.config.id+"' frameborder='0' allowFullScreen style='position: absolute; opacity: "+this.config.alpha+"'></iframe>"));"wistia"==g&&(this.vimeoFrame=$("<iframe width='"+this.vimeoWidth+"' height='"+this.vimeoHeight+"' src='"+l+"://fast.wistia.net/embed/iframe/"+this.config.id+"' frameborder='0' allowfullscreen style='position:absolute;opactiy: "+this.config.alpha+"'></iframe>"));"youku"==g&&(this.vimeoFrame=$("<iframe width='"+this.vimeoWidth+"' height='"+this.vimeoHeight+"' src='"+l+"://player.youku.com/embed/"+this.config.id+"' frameborder='0' allowfullscreen style='position:absolute;opactiy: "+this.config.alpha+"'></iframe>"));"qq"==g&&(this.vimeoFrame=$("<iframe width='"+this.vimeoWidth+"' height='"+this.vimeoHeight+"' src='"+l+"://v.qq.com/iframe/player.html?vid="+this.config.id+"' frameborder='0' allowfullscreen style='position:absolute;opactiy: "+this.config.alpha+"'></iframe>"))},initStyle:function(){this.background.css({position:"absolute",width:"100%",height:"100%","z-index":100});this.vimeoBac.css({width:"100%",height:"100%","background-color":"rgba(0,0,0,0.5)"});this.vimeoBorder.css({position:"absolute","z-index":"11","background-color":"#F0F0F0","border-radius":"3px",margin:"auto",left:"0",top:"0",bottom:"0",right:"0"});this.closeButton.css({position:"absolute","z-index":"1",width:"32px",height:"32px",cursor:"pointer",right:"5px",top:"0px"});this.vimeoFrame.css({background:"#F0F0F0",position:"relative","margin-left":"5px","margin-top":"32px"})},initEvents:function(){this.vimeoBac.bind(_event._down,function(c){this.destroy();c.stopPropagation();return !1}.bind(this));this.vimeoBorder.bind(_event._down,function(c){c.stopPropagation();return !1}.bind(this));this.closeButton.asButton();this.closeButton.bind(_event._end,function(c){this.destroy();c.stopPropagation();return !1}.bind(this))},destroy:function(){this.visible&&(this.visible=!1,this.vimeoFrame.attr("src",""),this.background.empty(),this.background.remove(),this.resizeTimer&&this.resizeTimer.stop())},showOrHide:function(){!1===this.visible?this.show():this.hide()},hide:function(){this.visible=!1;this.background.css({display:"none"})},show:function(){this.visible=!0;this.background.css({display:"block"})},onResize:function(){if(this.windowWidth!=windowWidth||this.windowHeight!=windowHeight){this.windowWidth=windowWidth;this.windowHeight=windowHeight;var f=windowWidth-10,h=windowHeight-10;if(isPhone()){var g=307/490;h/f>g?h=f*g:f=h/g}else{f=Math.min(490,f),h=Math.min(307,h)}this.vimeoBorder.css({width:f+"px",height:h+"px"});h-=37;this.vimeoFrame&&(this.vimeoFrame.attr("width",f-10+"px"),this.vimeoFrame.attr("height",h+"px"))}},getPlayEvt:function(){return this.config.moviePlayTriggerEvt},getStopEvt:function(){return this.config.movieStopTriggerEvt}});global.hddr.soo4=function(c){return c||".com"};Class("Audio",{Package:"PageItem",background:!1,create:function(h,n,m,l,k){this._super(h,n,m,l);if(this.config.src){this.audio=null;this.themeName=k;this.resizeThemes={"default":"",wave:""};this.type="com.mobiano.flipbook.sound.TAnnoBackgroundSound";this.pageWidth=m;this.pageHeight=l;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.config.mainColor&&(this.mainColor=Color(this.config.mainColor).toString());h=this.config.key;this.content=$("<div class='audioContent flip-action'></div>");this.content.css({position:"absolute",left:this.x+"px",top:this.y+"px",opacity:this.config.alpha});this.setRotation(this.content,this.config.rotation);this.parent.append(this.content);this.audio=$("<audio controls ></audio>");this.audio.css({position:"absolute",width:"0px",height:"0px",left:"0px",top:"0px",opacity:this.config.alpha});this.content.audioResources=[];if(void 0==h){this.config.src=this.fixRelativePath(this.config.src),this.audio.attr("src",this.config.src),this.content.audioResources.push(this.config.src)}else{if(h in this.config.src){m=this.config.src[h],m=this.fixRelativePath(m),this.content.audioResources.push(m),this.audio.attr("src",m)}else{for(n=0;n<this.config.src.length;n++){m=this.config.src[n][h],m=this.fixRelativePath(m),this.content.audioResources.push(m),l=$("<source src='"+m+"'>"),this.audio.append(l),0==n&&this.audio.attr("src",m)}}}this.content.append(this.audio);void 0!=this.audio[0]&&"background0"!=this.themeName&&(this.audioSkin=this.content.addAudioSkin(k,this.width,this.height),this.audio.removeAttr("controls"));this.resizeThemes={"default":"",wave:"",skin1:"",skin2:""};if(this.themeName in this.resizeThemes||void 0==this.themeName){this.content.css({width:this.width+"px",height:this.height+"px"});if("skin1"==this.themeName||"skin2"==this.themeName){k=Color(this.mainColor),this.backgroundDiv=$("<div></div>"),this.backgroundDiv.css({position:"absolute",left:this.x+"px",top:this.y+"px",width:this.width+"px",height:"26px","background-color":this.mainColor,opacity:"0.7"}),this.content.css({"background-color":k.rgba(0.7),width:this.width+"px",height:"26px","border-radius":"2px"}),"#5d5b51"!=this.mainColor&&this.parent.append(this.backgroundDiv)}this.audioSkin.onResize()}else{this.resizeAudio(this.pageWidth,this.pageHeight)}}},parseConfig:function(f){function h(k){if("object"!=typeof k){return !1}if(k instanceof Array){return 0==k.length}var m=0,l;for(l in k){m++}return 0==m}var g={rotation:f.location.rotation,width:f.location.width,height:f.location.height,x:f.location.x,y:f.location.y,alpha:f.alpha,src:f.soundURL,className:f.className,mainColor:f.mainColor,soundPlayTriggerEvt:f.soundPlayTriggerEvt,soundStopTriggerEvt:f.soundStopTriggerEvt};f.annotype==PageEditor.AnnoType.ANNO_AUDIO1&&(g.key="path",g.src=h(f.soundList)?"":f.soundList,g.src.sound&&(g.src=g.src.sound));f.annotype==PageEditor.AnnoType.ANNO_AUDIO2&&(g.key="fname",g.src=h(f.data)?"":f.data,g.src.item&&(g.src=g.src.item));f.annotype==PageEditor.AnnoType.ANNO_PLUGIN&&f.className in audioThemeNames&&(g.key="url",g.src=f.componentData&&f&&!h(f.componentData.songs)&&void 0!=f.componentData.songs?f.componentData.songs.song?f.componentData.songs.song:f.componentData.songs.url?f.componentData.songs.url:f.componentData.songs:{},g.soundPlayTriggerEvt=f.soundPlayTriggerEvt||f.componentData.playEvt,g.soundStopTriggerEvt=f.soundStopTriggerEvt||f.componentData.stopEvt);return g},onResize:function(d,f){this.content&&(this.pageWidth=d,this.pageHeight=f,this.width=this.config.width*this.pageWidth,this.height=this.config.height*this.pageHeight,this.themeName in this.resizeThemes||void 0==this.themeName?(this.content.css({width:this.width+"px",height:this.height+"px"}),this.audioSkin.onResize(),this.backgroundDiv&&this.backgroundDiv.css({width:this.width+"px",height:this.height+"px"})):this.resizeAudio(d,f),this.setPosition())},resizeAudio:function(f,h){this.audioContentWidth||(this.audioContentWidth=this.content.width());this.audioContentHeight||(this.audioContentHeight=this.content.height());if(this.audioContentWidth){var g=Math.min(this.config.width*f/this.audioContentWidth,this.config.height*h/this.audioContentHeight);this.content.css({"-webkit-transform-origin":"0% 0%","-moz-transform-origin":"0% 0%","-ms-transform-origin":"0% 0%","-o-transform-origin":"0% 0%","transform-origin":"0% 0%","-webkit-transform":"scale("+g+") rotate("+this.config.rotation+"deg)","-moz-transform":"scale("+g+") rotate("+this.config.rotation+"deg)","-ms-transform":"scale("+g+") rotate("+this.config.rotation+"deg)","-o-transform":"scale("+g+") rotate("+this.config.rotation+"deg)",transform:"scale("+g+") rotate("+this.config.rotation+"deg)"});this.audioSkin.refreshSeek();this.audioSkin.onResize()}else{this.resizeAudio.delay(this,100,[f,h])}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.content.css({left:this.x+"px",top:this.y+"px"});this.backgroundDiv&&this.backgroundDiv.css({left:this.x+"px",top:this.y+"px"})},play:function(){if(null!=this.audio){try{this.audio[0].play()}catch(c){}}},pause:function(){if(null!=this.audio){try{this.audio[0].pause()}catch(c){}}},stop:function(){if(null!=this.audio){try{this.audio[0].pause(),this.audio[0].currentTime=0}catch(c){}}},getPlayEvt:function(){return this.config.soundPlayTriggerEvt},getStopEvt:function(){return this.config.soundStopTriggerEvt},isBackgroundAudio:function(){return this.background}}).extend("Item");Class("AudioEditor",{create:function(g,l,k,h){this.enterPlay=parseBool(k);this.autoPlayAgain=parseBool(h);this.background=$("<div class='printBar'></div>");this.contentBox=$("<div class='printBG'></div>");this.closeButton=$("<div></div>");this.showing=!1;this.width=windowWidth;this.height=windowHeight;bookConfig.isFlipPdf&&(l.startsWith("./")?l="."+l:l.isUrl()||(l="../"+l));this.audioSrc=l;this.contentWidth=350;this.contentHeight=63;this.themeName="enjoy";isPhone()&&(this.themeName="background",this.contentHeight=this.contentWidth=100);this.background.css({height:this.height+"px",bottom:"0px"});this.contentBox.css({height:this.contentHeight+"px",width:this.contentWidth+"px",left:(this.width-this.contentWidth)/2+"px"});this.contentBox.css({top:(this.height-this.contentHeight)/2+"px","border-radius":"0px"});this.audio=$("<audio controls ></audio>");this.audio.css({position:"absolute",width:this.contentWidth+"px",height:this.contentHeight+"px",left:"0px",top:"0px"});this.contentBox.audioResources=[];this.audio.attr("src",this.audioSrc);this.contentBox.audioResources.push(this.audioSrc);this.contentBox.append(this.audio);void 0!=this.audio[0].play&&"background0"!=this.themeName&&(this.contentBox.addAudioSkin(this.themeName),this.audio.removeAttr("controls"),this.enterPlay&&this.audio[0].play());$(g).append(this.background);$(g).append(this.contentBox);$(g).append(this.closeButton);this.closeButton.css({top:"30px",right:"30px",position:"absolute","z-index":"103"});this.closeButton.append($("<img src='"+uiBaseURL+"close.png'/>").asImageButton());this.initEvent();$(this.background).css("display","none");$(this.contentBox).css("display","none");$(this.closeButton).css("display","none")},onResize:function(d,f){this.background.css({height:windowHeight+"px",bottom:"0px"});this.contentBox.css({height:this.contentHeight+"px",width:this.contentWidth+"px",left:(windowWidth-this.contentWidth)/2+"px"});this.contentBox.css({top:(windowHeight-this.contentHeight)/2+"px"});this.closeButton.css({top:"30px",right:"30px"});void 0!=this.themeName&&(this.contentBox.css({width:this.contentWidth+"px",height:this.contentHeight+"px"}),this.audioSkin.onResize())},setPosition:function(f,h,g){void 0==g&&(g=["left","top"]);$(this.background).css(g[0],f+"px");$(this.background).css(g[1],h+"px")},getShowStatu:function(){return this.showing},setShowStatu:function(c){this.showing=c},show:function(){$(this.background).css({display:"block"});$(this.contentBox).fadeIn(500);$(this.closeButton).fadeIn(500);this.showing=!0;void 0!=leftRightButton&&null!=leftRightButton&&leftRightButton.setShow(!1)},hide:function(){var c=this;$(this.background).fadeOut(500,function(){c.pause();c.contentBox.remove();c.closeButton.remove();c.background.remove()});this.showing=!1},initEvent:function(){var c=this;this.background.bind(_event._down,function(b){c.hide();c.showing=!1});this.closeButton.bind(_event._end,function(b){c.hide();c.showing=!1});this.closeButton.bind("mouseover",function(b){c.closeButton.css({cursor:"pointer"})})},play:function(){if(null!=this.audio){try{this.autoPlayAgain&&(this.audio[0].currentTime=0),this.audio[0].play()}catch(c){}}},pause:function(){if(null!=this.audio){try{this.audio[0].pause()}catch(c){}}},stop:function(){if(null!=this.audio){try{this.audio[0].pause(),this.audio[0].currentTime=0}catch(c){}}},isPlaying:function(){return this.audio&&this.audio[0]?!this.audio[0].paused:!1},getPlayEvt:function(){return this.config.soundPlayTriggerEvt},getStopEvt:function(){return this.config.soundStopTriggerEvt}});Class("Image",{Package:"PageItem",create:function(g,l,k,h){this._super(g,l,k,h);this.initImage();this.initImageResource();this.initImageLoadEvents();this.initEvents();this.onResize(this.pageWidth,this.pageHeight)},initImage:function(){this.container=$("<div style='position: absolute;'></div>");this.image=$("<img style='position: absolute'/>");this.imageBorder=$("<div class = 'bubble expose-square-solid' style='position: absolute;width: 100%;height: 100%;'></div>");this.container.append(this.image);this.parent.append(this.container);this.container.append(this.imageBorder);this.container.css({opacity:this.config.alpha});this.setRotation(this.container,this.config.rotation);this.image.css({margin:"auto",top:0,bottom:0,left:0,right:0,position:"absolute"});this.imageBorder.css({margin:"auto",top:0,bottom:0,left:0,right:0,position:"absolute",display:"none"});parseBool(this.config.reflection)&&(!0==supports("boxReflect")?this.imageReflection(this.image):this.addCanvasReflection());this.config.mouseOver==PageEditor.MouseOverType.AddBorder?this.initLinkHint(this.imageBorder):this.initLinkHint(this.image)},initImageResource:function(){null!=this.config.src&&(this.config.src=this.fixRelativePath(this.config.src),this.image.attr("src",this.config.src))},parseConfig:function(c){return{width:c.location.width,height:c.location.height,rotation:c.location.rotation,reflection:c.location.reflection,reflectionType:c.location.reflectionType,reflectionAlpha:c.location.reflectionAlpha,x:c.location.x,y:c.location.y,alpha:c.alpha,src:c.url,action:c.action,mouseOver:c.mouseOverEffect,borderColor:c.borderColor,imgOriginalProportions:parseBool(c.imgOriginalProportions),popUpImage:c.popUpImage,hint:c.hint,pageW:c.location.pageWidth,effect:c.effect}},initImageLoadEvents:function(){this.image.on("load",function(){var c=this.adjustImageSize(this.image[0]);this.imageWidth=c.width;this.imageHeight=c.height;this.image.css({width:this.imageWidth+"px",height:this.imageHeight+"px"});this.imageBorder.css({"border-color":Color(this.config.borderColor).toString(),width:this.imageWidth+"px",height:this.imageHeight+"px"});this.elementConfig={elemWidth:this.imageWidth,elemHeight:this.imageHeight,x:this.left,y:this.top,pageWidth:this.pageWidth,pageHeight:this.pageHeight}}.bind(this));void 0==this.config.action&&(this.image[0].onerror=function(){this.container.css("display","none")}.bind(this))},adjustImageSize:function(f){if(!f.naturalWidth||!f.naturalHeight){return{width:0,height:0}}var h=f.naturalWidth;f=f.naturalHeight;if(!1==this.config.imgOriginalProportions){return{width:this.width,height:this.height}}var g=Math.min(this.width/h,this.height/f);return{width:Math.floor(h*g),height:Math.floor(f*g)}},initEvents:function(){this.zoomImg=null;this.config.mouseOver==PageEditor.MouseOverType.AddBorder&&(this.image.bind(_event._enter,function(c){this.imageBorder.css({display:"block"});this.visible=!0;this.image.animate({opacity:"0.8"},300)}.bind(this)),this.imageBorder.bind(_event._leave,function(c){this.imageBorder.css({display:"none"});this.image.animate({opacity:"1"},300);this.visible=!1}.bind(this)),this.addActionEvent(this.imageBorder));this.config.mouseOver==PageEditor.MouseOverType.Zoom&&this.image.mouseEnterZoom();this.addActionEvent(this.image)},onResize:function(f,h){this.pageWidth=f;this.pageHeight=h;this.left=this.pageWidth*this.config.x;this.top=this.pageHeight*this.config.y;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.container.css({left:this.left+"px",top:this.top+"px",width:this.width+"px",height:this.height+"px"});var g=this.adjustImageSize(this.image[0]);this.imageWidth=g.width;this.imageHeight=g.height;this.image.css({width:this.imageWidth+"px",height:this.imageHeight+"px"});this.imageBorder.css({width:this.imageWidth+"px",height:this.imageHeight+"px"});this.addEffect()},addEffect:function(){this.image.on("load",function(){this.elementConfig={elemWidth:this.imageWidth,elemHeight:this.imageHeight,parentWidth:this.width,parentHeight:this.height,x:this.left,y:this.top,pageWidth:this.pageWidth,pageHeight:this.pageHeight};this.addEffectEvent(this.image,this.elementConfig)}.bind(this))},addCanvasReflection:function(){var c=new Image;c.src=this.config.src;$(c).on("load",function(){var l=document.createElement("canvas"),k=l.getContext("2d");this.container.append(l);var h=this.adjustImageSize(c[0]),b=h.width,h=h.height;l.style.width=b+"px";l.style.height=h+"px";l.width=b;l.height=h;l.className="reflect";$(l).css({transform:"translateY("+h+"px)",margin:"auto",top:0,bottom:0,left:0,right:0,position:"absolute"});k.save();k.translate(0,h);k.scale(1,-1);k.drawImage(c,0,0,b,h);k.restore();k.globalCompositeOperation="destination-out";l=k.createLinearGradient(0,0,0,h);l.addColorStop(1,"rgba(255, 0, 0, 1.0)");l.addColorStop(0,"rgba(255, 0, 0, 0)");k.fillStyle=l;k.rect(0,0,b,2*h);k.fill()}.bind(this))}}).extend(PageItem.Item);var HTML5ZoomImg=Class({create:function(h,n){var m=this,l,k;this.$container=$(n);l=this.$container.width();k=this.$container.height();this.limitWidth=l;this.limitHeight=k;this.innerLimitWidth=606;this.innerLimitHeight=404;this.dragDivFalg=!0;this.dragImgFalg=!1;this.address=uiBaseURL;this.isFullFalg=!1;this.isOneToOneFalg=!0;this.scale=100;this.isMapShowFalg=!1;this.boxImgBG=$("<div style='position: absolute;margin: 0px;padding: 0px;border: 0px;left: 0px;top: 0px;background-color: #000000;opacity: 0;z-index: 99999;'></div>").css({width:l,height:k}).appendTo(this.$container);this.outerBoxImg=$("<div class='fliphtml5-loading' style='position: absolute;margin: 0px;padding: 0px;border: 0px;left: 0px;top: 0px;overflow: hidden;z-index: 99999;'></div>").css({width:l,height:k}).appendTo(this.$container);this.innerBoxImg=$("<div style='position: absolute;overflow: hidden;cursor: pointer;background-color: rgba(0,0,0, 0.6);'></div>").css({boxShadow:"0px 0px 4px #000000"}).hide().appendTo(this.outerBoxImg);window.box=this.innerBoxImg;this.boxImgDiv=$("<div class='fliphtml5-boxDiv' style='position: absolute;'></div>").appendTo(this.innerBoxImg);this.boxImg=$("<img style='position: absolute;width: 100%;height: 100%;padding: 0px;margin: 0px;'/>").appendTo(this.boxImgDiv);this.closeBox=$("<div style='position: absolute;left: auto;top: 0px;right: 0px;'></div>").append($("<img>",{src:this.address+"closeForm.png"})).appendTo(this.innerBoxImg);this.bindCloseBoxEvent();this.createControlBar(this.innerBoxImg);this.createImgMap(this.innerBoxImg);this.loadImg(h);this.dragDiv();this.dragImage();isTouch||(this.innerBoxImg.transition3D(),this.boxImgDiv.transition3D(),this.mapPoint.transition3D());$(window).on("resize",function(){m.resize()});return this},bindCloseBoxEvent:function(){var c=this;c.closeBox.bind("mouseover",function(){c.closeBox.children("img").attr("src",c.address+"closeForm_down.png")});c.closeBox.bind("mouseout",function(){c.closeBox.children("img").attr("src",c.address+"closeForm.png")});c.closeBox.bind("click",function(){c.destroy()})},createControlBar:function(c){this.controlBar=$("<div class='control' style='position: absolute;width: 106px;height: 48px;overflow: hidden;bottom: -50px;top: auto;left: 50%;margin-left: -53px;border-top-left-radius: 10px;border-top-right-radius: 10px;background-color: rgba(0,0,0,0.6)'></div>").css({boxShadow:"0px 0px 4px #000000"}).appendTo(c);this.oneToOne=$("<span class='one-to-one' style='position: absolute;'></span>").css({width:40,height:30,left:10,top:9,fontFamily:"serif",fontSize:28,lineHeight:"30px",color:"#7F8383",letterSpacing:"-5px",textAlign:"center"}).html("1:1").appendTo(this.controlBar);this.fullScreen=$("<div class='FullScreen' style='position: absolute'></div>").css({width:40,height:30,left:56,top:9}).append($("<img>",{src:this.address+"enterFull.png",css:{marginLeft:6,marginTop:1}})).appendTo(this.controlBar);this.bindControlEvents()},bindControlEvents:function(){var c=this;isTouch?c.controlBar.css({bottom:2}).show():(this.innerBoxImg.bind("mouseover",function(){c.controlBar.stop(!1,!1).animate({bottom:2},400,"linear")}),this.innerBoxImg.bind("mouseout",function(){c.controlBar.stop(!1,!1).animate({bottom:-50},400,"linear")}));this.oneToOne.bind("click",function(){c.boxImgDiv.css({width:c.originalSize.width,height:c.originalSize.height,left:(c.innerBoxImg.width()-c.originalSize.width)/2,top:(c.innerBoxImg.height()-c.originalSize.height)/2});c.innerBoxImg.width()>=c.boxImgDiv.width()&&c.innerBoxImg.height()>=c.boxImgDiv.height()?c.dragImgFalg=!1:c.dragImgFalg=!0;c.isFullFalg?c.dragDivFalg=!1:c.innerBoxImg.width()>=c.boxImgDiv.width()&&c.innerBoxImg.height()>=c.boxImgDiv.height()?c.dragDivFalg=!0:c.dragDivFalg=!1;c.scale=100;c.isOneToOneFalg=c.isOneToOne();c.isMapShowFalg=c.isShowMap();c.setMapPoint()});this.oneToOne.bind("mouseover",function(){c.isOneToOneFalg||c.oneToOne.css({color:"#32B9EB"})});this.oneToOne.bind("mouseout",function(){c.isOneToOneFalg||c.oneToOne.css({color:"#ffffff"})});this.fullScreen.bind("click",function(){var p=parseInt(c.boxImgDiv.css("left")),o=parseInt(c.boxImgDiv.css("top")),n=c.boxImgDiv.width(),m=c.boxImgDiv.height(),l=c.innerBoxImg.width(),b=c.innerBoxImg.height();c.isFullFalg?(c.innerBoxImg.css({width:Math.max(c.innerLimitWidth,c.result.width),height:Math.max(c.innerLimitHeight,c.result.height),left:Math.max(0,(c.outerBoxImg.width()-Math.max(c.innerLimitWidth,c.result.width))/2),top:Math.max(0,(c.outerBoxImg.height()-Math.max(c.innerLimitHeight,c.result.height))/2)}),c.boxImgDiv.css({left:c.innerBoxImg.width()>=n?(c.innerBoxImg.width()-n)/2:Math.max(c.innerBoxImg.width()-n,p+(c.innerBoxImg.width()-l)/2),top:c.innerBoxImg.height()>=m?(c.innerBoxImg.height()-m)/2:Math.max(c.innerBoxImg.height()-m,o+(c.innerBoxImg.height()-b)/2)}),c.innerBoxImg.width()>=c.boxImgDiv.width()&&c.innerBoxImg.height()>=c.boxImgDiv.height()?c.dragDivFalg=!0:c.dragDivFalg=!1,c.isFullFalg=!1,c.fullScreen.children("img").attr("src",c.address+"enterFull.png")):(c.innerBoxImg.css({width:c.$container.width(),height:c.$container.height(),left:0,top:0}),c.boxImgDiv.css({left:c.innerBoxImg.width()>=n?(c.innerBoxImg.width()-n)/2:Math.max(c.innerBoxImg.width()-n,p+(l-c.innerBoxImg.width())/2),top:c.innerBoxImg.height()>=m?(c.innerBoxImg.height()-m)/2:Math.max(c.innerBoxImg.height()-m,o+(b-c.innerBoxImg.height())/2)}),c.isFullFalg=!0,c.dragDivFalg=!1,c.fullScreen.children("img").attr("src",c.address+"exitFull.png"));c.innerBoxImg.width()>=c.boxImgDiv.width()&&c.innerBoxImg.height()>=c.boxImgDiv.height()?c.dragImgFalg=!1:c.dragImgFalg=!0;c.isShowMap();c.setMapPoint()});this.fullScreen.bind("mouseover",function(){c.isFullFalg?c.fullScreen.children("img").attr("src",c.address+"exitFull_over.png"):c.fullScreen.children("img").attr("src",c.address+"enterFull_over.png")});this.fullScreen.bind("mouseout",function(){c.fullScreen.children("img").attr("src",c.address+"exitFull.png")})},isOneToOne:function(){if(this.originalSize.width==this.boxImgDiv.width()&&this.originalSize.height==this.boxImgDiv.height()){return this.oneToOne.css({color:"#7F8383"}),!0}this.oneToOne.css({color:"#ffffff"});return !1},loadImg:function(f){var h=this,g=new Image;g.onload=function(){g.onload=g.onerror=null;var c=this.width,k=this.height,d=h.selectWidthAdHeight(c,k);h.outerBoxImg.removeClass("fliphtml5-loading");h.boxImgDiv.css({width:d.width,height:d.height});h.innerBoxImg.css({width:Math.max(h.innerLimitWidth,d.width),height:Math.max(h.innerLimitHeight,d.height),left:Math.max(0,(h.outerBoxImg.width()-Math.max(h.innerLimitWidth,d.width))/2),top:-Math.max(h.innerLimitHeight,d.height)-240});h.innerBoxImg.show().animate({top:Math.max(0,(h.outerBoxImg.height()-Math.max(h.innerLimitHeight,d.height))/2)},{duration:500,easing:"linear"});h.boxImgDiv.css({width:d.width,height:d.height,left:Math.max(0,(h.innerBoxImg.width()-d.width)/2),top:Math.max(0,(h.innerBoxImg.height()-d.height)/2)});h.originalSize={width:c,height:k};h.result=d;h.isOneToOneFalg=h.isOneToOne();isTouch?h.zoomInPad():h.mouseZoom();h.setMapImg(c,k)};g.onerror=function(){g.onload=g.onerror=null;h.outerBoxImg.removeClass("fliphtml5-loading");var c=h.selectWidthAdHeight(18,20);h.boxImgDiv.css({width:c.width,height:c.height});h.innerBoxImg.css({width:Math.max(h.innerLimitWidth,c.width),height:Math.max(h.innerLimitHeight,c.height),left:Math.max(0,(h.outerBoxImg.width()-Math.max(h.innerLimitWidth,c.width))/2),top:-Math.max(h.innerLimitHeight,c.height)-240});h.innerBoxImg.show().animate({top:Math.max(0,(h.outerBoxImg.height()-Math.max(h.innerLimitHeight,c.height))/2)},{duration:500,easing:"linear"});h.boxImgDiv.css({width:c.width,height:c.height,left:Math.max(0,(h.innerBoxImg.width()-c.width)/2),top:Math.max(0,(h.innerBoxImg.height()-c.height)/2)});h.originalSize={width:18,height:20};h.result=c;h.isOneToOneFalg=h.isOneToOne();isTouch?h.zoomInPad():h.mouseZoom();h.setMapImg(18,20)};g.src=f;h.boxImg.attr("src",f);h.mapImg.attr("src",f)},selectWidthAdHeight:function(k,p){var o={},n=k/p,m=this.limitWidth,l=this.limitHeight;m>=k&&l<p?(o.width=n*l,o.height=l):m<k&&l>=p?(o.width=m,o.height=m/n):m<k&&l<p?m/n<=l?(o.width=m,o.height=m/n):n*l<=m?(o.width=n*l,o.height=l):console&&console.log("Do not be so wonderful picture of uncle!"):(o.width=k,o.height=p);return o},dragDiv:function(){var m=this,t=m.innerBoxImg,s=$(document),r=!0,q,p,o,n;m.innerBoxImg.bind(_event._down,function(c){c=isTouch?c.originalEvent.touches:[c];1==c.length?r=!0:2<=c.length&&(r=!1);stopEvent(c[0])});t.bind(_event._down,function(b){m.dragDivFalg&&(b=isTouch?b.originalEvent.touches[0]:b,isTouch||(b.preventDefault(),b.stopPropagation()),q=t[0].offsetLeft,p=t[0].offsetTop,o=b.clientX,n=b.clientY,s.bind(_event._move,function(c){r&&(c=isTouch?c.originalEvent.touches[0]:c,isTouch||(c.preventDefault(),c.stopPropagation()),t.css({left:q+c.clientX-o,top:p+c.clientY-n}))}),s.bind(_event._end,function(c){c=isTouch?c.originalEvent.touches[0]:c;isTouch||(c.preventDefault(),c.stopPropagation());r=!0;s.unbind(_event._move)}))})},mouseZoom:function(){var h=this,n=h.scale,m=h.result,l=m.width,k=m.height;h.innerBoxImg.bind($.browser.mozilla?"DOMMouseScroll":"mousewheel",function(g){n=h.scale;g=g.originalEvent;g=g.wheelDelta||-g.detail;0<g?n+=0.2*n:0>g&&(n-=0.17*n);5>n?n=5:1600<n&&(n=1600);var f,c,b;c=h.boxImgDiv.width();b=h.boxImgDiv.height();g=l*n/100;var o=k*n/100;g<h.innerBoxImg.width()?f=(h.innerBoxImg.width()-l*n/100)/2:(f=parseInt(h.boxImgDiv.css("left")),f+=(c-g)/2,0<=f?f=0:f<=h.innerBoxImg.width()-g&&(f=h.innerBoxImg.width()-g));o<h.innerBoxImg.height()?b=(h.innerBoxImg.height()-k*n/100)/2:(c=parseInt(h.boxImgDiv.css("top")),b=c+(b-o)/2,0<=b?b=0:b<=h.innerBoxImg.height()-o&&(b=h.innerBoxImg.height()-o));h.scale=n;h.boxImgDiv.animate({width:g,height:o,left:f,top:b},{duration:100,easing:"linear",complete:function(){h.isOneToOneFalg=h.isOneToOne();h.isMapShowFalg=h.isShowMap();h.setMapPoint();h.isFullFalg?(h.dragDivFalg=!1,h.boxImgDiv.width()>h.innerBoxImg.width()||h.boxImgDiv.height()>h.innerBoxImg.height()?h.dragImgFalg=!0:h.dragImgFalg=!1):h.boxImgDiv.width()>h.innerBoxImg.width()||h.boxImgDiv.height()>h.innerBoxImg.height()?(h.dragDivFalg=!1,h.dragImgFalg=!0):(h.dragDivFalg=!0,h.dragImgFalg=!1)}})})},zoomInPad:function(){var x=this,w=x.result,v=w.width,u=w.height,t,s,r,q,p,o=!1;x.boxImgDiv[0].addEventListener("touchstart",function(k){if(2<=k.touches.length){o=!0;var h=k.touches[0].pageX,g=k.touches[0].pageY,b=k.touches[1].pageX;k=k.touches[1].pageY;t=x.boxImgDiv.position().left;s=x.boxImgDiv.position().top;r=x.boxImgDiv.width();q=x.boxImgDiv.height();p=Math.sqrt(Math.pow(b-h,2)+Math.pow(k-g,2))}},!1);document.addEventListener("touchmove",function(g){if(o){if(2<=g.touches.length){var f,b,d;f=g.touches[0].pageX;b=g.touches[0].pageY;d=g.touches[1].pageX;g=g.touches[1].pageY;b=Math.sqrt(Math.pow(d-f,2)+Math.pow(g-b,2))/p;f=r*b;b*=q;d=(r-f)/2+t;g=(q-b)/2+s;f<x.innerBoxImg.width()?d=(x.innerBoxImg.width()-f)/2:0<=d?d=0:d<=x.innerBoxImg.width()-f&&(d=x.innerBoxImg.width()-f);b<x.innerBoxImg.height()?g=(x.innerBoxImg.height()-b)/2:0<=g?g=0:g<=x.innerBoxImg.height()-b&&(g=x.innerBoxImg.height()-b);x.boxImgDiv.width(f).height(b).css({left:d,top:g});x.isOneToOneFalg=x.isOneToOne();x.isMapShowFalg=x.isShowMap();x.setMapPoint();x.boxImgDiv.width()>v||x.boxImgDiv.height()>u?(x.dragDivFalg=!1,x.dragImgFalg=!0):(x.dragDivFalg=!0,x.dragImgFalg=!1)}}else{g.preventDefault()}},!1);document.addEventListener("touchend",function(c){o=!1},!1);document.body.addEventListener("touchmove",function(c){c.preventDefault()},!1)},dragImage:function(){var m=this,t=m.boxImgDiv,s=$(document),r=!0,q,p,o,n;m.innerBoxImg.bind(_event._down,function(c){c=isTouch?c.originalEvent.touches:[c];1==c.length?r=!0:2<=c.length&&(r=!1);stopEvent(c[0])});t.bind(_event._down,function(b){m.dragImgFalg&&(b=isTouch?b.originalEvent.touches[0]:b,t.addClass("dragging"),q=t[0].offsetLeft,p=t[0].offsetTop,o=b.clientX,n=b.clientY,s.bind(_event._move,function(f){f=isTouch?f.originalEvent.touches[0]:f;if(r){var c=q+f.clientX-o;f=p+f.clientY-n;0<=c?c=0:c<=m.innerBoxImg.width()-m.boxImgDiv.width()&&(c=m.innerBoxImg.width()-m.boxImgDiv.width());0<=f?f=0:f<=m.innerBoxImg.height()-m.boxImgDiv.height()&&(f=m.innerBoxImg.height()-m.boxImgDiv.height());t.width()>m.innerBoxImg.width()&&(t.css({left:c}),m.mapPoint.css({left:-c/(m.boxImgDiv.width()-m.innerBoxImg.width())*(m.mapDiv.width()-m.mapPoint.outerWidth())}));t.height()>m.innerBoxImg.height()&&(t.css({top:f}),m.mapPoint.css({top:-f/(m.boxImgDiv.height()-m.innerBoxImg.height())*(m.mapDiv.height()-m.mapPoint.outerHeight())}))}}),s.bind(_event._end,function(c){s.unbind(_event._move);t.removeClass("dragging");r=!0}))})},resize:function(){var d=this.$container.width(),f=this.$container.height();this.boxImgBG.css({width:d,height:f});this.outerBoxImg.css({width:d,height:f});this.isFullFalg?(this.innerBoxImg.css({width:d,height:f}),this.boxImgDiv.css({left:(d-this.boxImgDiv.width())/2,top:(f-this.boxImgDiv.height())/2}),this.setMapPoint()):this.innerBoxImg.css({left:(d-this.innerBoxImg.width())/2,top:(f-this.innerBoxImg.height())/2})},destroy:function(){var m=this;parseInt(m.innerBoxImg.css("left"));parseInt(m.innerBoxImg.css("top"));var t=m.innerBoxImg.width(),s=m.innerBoxImg.height(),r,q,p,o,n;$({k:100}).animate({k:0},{duration:400,easing:"linear",step:function(b,c){n=b/100;r=(s-n*s)/2;o=(t-n*t)/2;q=t-o;p=s-r;m.innerBoxImg[0].style.clip="rect("+r+"px, "+q+"px, "+p+"px, "+o+"px)"},complete:function(){m.boxImgBG.remove();m.outerBoxImg.remove()}})},createImgMap:function(c){this.map=$("<div class='ImageMap' style='position: absolute;left: auto;top: auto;right: 2px;bottom: 2px;width: 210px;height: 130px;overflow: hidden;border-radius: 4px;'></div>").css({boxShadow:"inset 1px 1px 0 rgba(0,0,0,.1),inset 0 -1px 0 rgba(0,0,0,.07)",backgroundColor:"rgba(0,0,0,.6)"}).hide().appendTo(c);this.mapDiv=$("<div style='position: absolute;margin: 0px;padding: 0px;border: 0px;overflow: hidden;'></div>").appendTo(this.map);this.mapImg=$("<img style='position: absolute;width: 100%;height: 100%;left: 0px;top: 0px;padding: 0px;margin: 0px;border: 0px;'/>").appendTo(this.mapDiv);this.mapPoint=$("<div style='position: absolute;margin: 0px;padding: 0px;border: 2px solid #58AA38;width: 100%;height: 100%;'></div>").css({boxShadow:"inset 1px 1px 0 #ffffff,inset 0 -1px 0 #ffffff,inset -1px 0px 0 #ffffff"}).appendTo(this.mapDiv);this.closeMap=$("<div style='position: absolute;left: auto;top: 0px;right: 0px;'></div>").append($("<img>",{src:this.address+"closeForm.png"})).appendTo(this.map);this.bindCloseMapEvent();this.dragMapPoint()},bindCloseMapEvent:function(){var c=this;c.closeMap.bind("mouseover",function(){c.closeMap.children("img").attr("src",c.address+"closeForm_down.png")});c.closeMap.bind("mouseout",function(){c.closeMap.children("img").attr("src",c.address+"closeForm.png")});c.closeMap.bind("click",function(){c.destroyMap()})},setMapImg:function(z,y){var x=this.map.width(),w=this.map.height(),v=z/y,u=w*v,t=x/v,s,r,q,o;u>x?(s=x,r=t,q=0,o=(w-t)/2):t>w?(s=u,r=w,q=(x-u)/2,o=0):u/t==v&&(s=u,r=t,o=q=0);this.mapDiv.css({width:s,height:r,left:q,top:o})},setMapPoint:function(){var g=Math.min(this.mapDiv.width(),this.innerBoxImg.width()*this.mapDiv.width()/this.boxImgDiv.width())-4,l=Math.min(this.mapDiv.height(),this.innerBoxImg.height()*this.mapDiv.height()/this.boxImgDiv.height())-4,k=-parseInt(this.boxImgDiv.css("left"))/(this.boxImgDiv.width()-this.innerBoxImg.width())*(this.mapDiv.width()-(g+4)),h=-parseInt(this.boxImgDiv.css("top"))/(this.boxImgDiv.height()-this.innerBoxImg.height())*(this.mapDiv.height()-(l+4));this.mapPoint.css({left:k,top:h,width:g,height:l})},isShowMap:function(){if(this.innerBoxImg.width()>=this.boxImgDiv.width()&&this.innerBoxImg.height()>=this.boxImgDiv.height()){return this.map.hide(),!0}this.map.show();return !1},dragMapPoint:function(){var l=this,r=l.mapPoint,q=$(document),p,o,n,m;r.bind(_event._down,function(b){b=isTouch?b.originalEvent.touches[0]:b;p=r[0].offsetLeft;o=r[0].offsetTop;n=b.clientX;m=b.clientY;q.bind(_event._move,function(f){f=isTouch?f.originalEvent.touches[0]:f;var c=p+f.clientX-n;f=o+f.clientY-m;0>=c?c=0:c>=l.mapDiv.width()-l.mapPoint.outerWidth()&&(c=l.mapDiv.width()-l.mapPoint.outerWidth());0>=f?f=0:f>=l.mapDiv.height()-l.mapPoint.outerHeight()&&(f=l.mapDiv.height()-l.mapPoint.outerHeight());r.width()<l.mapDiv.width()&&(r.css({left:c}),l.boxImgDiv.css({left:-c/(l.mapDiv.width()-l.mapPoint.outerWidth())*(l.boxImgDiv.width()-l.innerBoxImg.width())}));r.height()<l.mapDiv.height()&&(r.css({top:f}),l.boxImgDiv.css({top:-f/(l.mapDiv.height()-l.mapPoint.outerHeight())*(l.boxImgDiv.height()-l.innerBoxImg.height())}))});q.bind(_event._end,function(c){q.unbind(_event._move)})})},destroyMap:function(){var m=this;parseInt(m.map.css("right"));parseInt(m.map.css("bottom"));var t=m.map.width(),s=m.map.height(),r,q,p,o,n;$({k:100}).animate({k:0},{duration:400,easing:"linear",step:function(b,c){n=b/100;r=(s-n*s)/2;o=(t-n*t)/2;q=t-o;p=s-r;m.map[0].style.clip="rect("+r+"px, "+q+"px, "+p+"px, "+o+"px)"},complete:function(){m.map.remove()}})}});Class("Line",{Package:"PageItem",SOLID:"Solid line",DOTTED:"Dotted line",create:function(h,n,m,l,k){this._super(h,n,m,l);this.id="line"+k;this.initConfig();this.initCanvas();parseBool(this.config.reflection)&&this.imageReflection(this.line);this.onResize(m,l)},initConfig:function(){this.color=Color(this.config.color);this.lineWidth=Number(this.config.lineWidth);this.lineType=this.config.lineType;this.config.originWidth||(this.config.originWidth=this.pageWidth);this.config.originHeight||(this.config.originHeight=this.pageHeight);var d=this.config.originWidth*this.config.width,f=this.config.originHeight*this.config.height;this.config.startX/=d;this.config.startY/=f;this.config.endX/=d;this.config.endY/=f;this.dotWidth=Number(this.config.dotWidthRation*this.config.originWidth);this.dashGap=Number(this.config.dotGrapRation*this.config.originWidth);this.dotWidth&&this.dashGap||(this.lineType=this.SOLID);this.extraWidth=this.lineWidth},initCanvas:function(){this.line=$("<canvas id="+this.id+"></canvas>");this.line.css({position:"absolute"});this.setRotation(this.line,this.config.rotation);this.parent.append(this.line)},parseConfig:function(c){return{originWidth:c.location.pageWidth,originHeight:c.location.pageHeight,startX:c.lineStartPX,startY:c.lineStartPY,rotation:c.location.rotation,endX:c.lineEndPX,endY:c.lineEndPY,x:c.location.x,y:c.location.y,width:c.location.width,height:c.location.height,lineAlpha:c.lineAlpha,alpha:c.alpha,lineWidth:c.lineWidth,reflection:c.location.reflection,reflectionType:c.location.reflectionType,reflectionAlpha:c.location.reflectionAlpha,lineType:c.lineType,dotWidth:c.dotWidth,dotWidthRation:c.dotWidthRation,dotGrapRation:c.dotGrapRation,color:c.color,hasShadow:parseBool(c.shadow.hasDropShadow),shadow:c.shadow}},onResize:function(d,f){this.pageWidth=d;this.pageHeight=f;this.width=this.config.width*this.pageWidth+this.extraWidth;this.height=this.config.height*this.pageHeight+this.extraWidth;this.left=this.config.x*this.pageWidth-this.extraWidth/2;this.top=this.config.y*this.pageHeight-this.extraWidth/2;this.line.attr("width",this.width+"px");this.line.attr("height",this.height+"px");this.line.css({left:this.left+"px",top:this.top+"px"});this.draw()},draw:function(){this.initParams();var c=this.getContext();c&&(c.clearRect(0,0,this.width,this.height),c.beginPath(),this.lineType==this.SOLID&&this.drawLine(c),this.lineType==this.DOTTED&&this.drawDotLine(c),c.stroke())},initParams:function(){function d(c,k){var h;return h=Number.between(c*k,f,k-f)}var f=this.extraWidth/2;this.startX=d(this.config.startX,this.width);this.startY=d(this.config.startY,this.height);this.endX=d(this.config.endX,this.width);this.endY=d(this.config.endY,this.height)},getContext:function(){var f=this.line[0],h;try{return h=f.getContext("2d"),h.fillStyle="#00000000",h.lineCap="round",h.lineJoin="round",h.lineWidth=this.lineWidth,h.globalAlpha=this.config.alpha,h.strokeStyle=this.color.toString(),!0===this.config.hasShadow&&(h.shadowOffsetX=this.config.shadowBlurX,h.shadowOffsetY=this.config.shadowBlurY,h.shadowBlur=this.config.shadowDistance,h.shadowColor=Color(this.config.shadowColor).toString()),h}catch(g){return null}},drawLine:function(c){c.moveTo(this.startX,this.startY);c.lineTo(this.endX,this.endY)},drawDotLine:function(v){for(var u=this.endX-this.startX,t=this.endY-this.startY,s=Math.sqrt(u*u+t*t),r=u/s,s=t/s,q=this.startX,p=this.startY;;){v.moveTo(q,p);var o=this.dotWidth*r,n=this.dotWidth*s,q=q+o,p=p+n,q=0<u?Math.min(q,this.endX):Math.max(q,this.endX),p=0<t?Math.min(p,this.endY):Math.max(p,this.endY);v.lineTo(q,p);o=this.dashGap*r;n=this.dashGap*s;q+=o;p+=n;if(0<=u){if(q>this.endX){break}}else{if(q<this.endX){break}}if(0<=t){if(p>this.endY){break}}else{if(p<this.endY){break}}}}}).extend("Item");Class("Arrow",{Package:"PageItem",SINGLE:"Single Arrow",DOUBLE:"Double Arrow",create:function(h,n,m,l,k){this._super(h,n,m,l);this.id="arrow"+k;this.line.attr("id",this.id)},initConfig:function(){this._super();this.arrowType=this.config.arrowType;this.extraWidth=4*this.lineWidth},parseConfig:function(c){return{originWidth:c.location.pageWidth,originHeight:c.location.pageHeight,startX:c.lineStartPX,startY:c.lineStartPY,rotation:c.location.rotation,endX:c.lineEndPX,endY:c.lineEndPY,x:c.location.x,y:c.location.y,width:c.location.width,height:c.location.height,arrowType:c.arrowType,alpha:c.alpha,lineAlpha:c.lineAlpha,lineWidth:c.lineWidth,reflection:c.location.reflection,reflectionType:c.location.reflectionType,reflectionAlpha:c.location.reflectionAlpha,lineType:c.lineType,dotWidth:c.dotWidth,dotWidthRation:c.dotWidthRation,dotGrapRation:c.dotGrapRation,color:c.color,hasShadow:parseBool(c.shadow.hasDropShadow),shadow:c.shadow}},draw:function(){this._super();var c=this.getContext();c&&this.drawArrow(c)},drawArrow:function(h){var n=this.endX-this.startX,m=this.endY-this.startY,l=Math.sqrt(n*n+m*m),k=2.5*this.lineWidth,n=n/l*k,m=m/l*k;this.drawArrowOnPoint(h,Point(this.endX,this.endY),-n,-m);this.arrowType==this.DOUBLE&&this.drawArrowOnPoint(h,Point(this.startX,this.startY),n,m)},drawArrowOnPoint:function(g,l,k,h){this.drawArrowLine(g,l,k,h,35);this.drawArrowLine(g,l,k,h,-35)},drawArrowLine:function(h,n,m,l,k){h.save();h.translate(n.getX(),n.getY());h.rotate(k*Math.PI/180);h.beginPath();h.moveTo(0,0);h.lineTo(m,l);h.stroke();h.restore()}}).extend("Line");global.hddr.soq3=function(){return hddr.soo1||"tm"}();bdor[10]="l";Class("Link",{Package:"PageItem",create:function(g,l,k,h){this._super(g,l,k,h);this.initLinkColor();this.initLink();this.initEvents();this.initLinkHint(this.link);this.onResize(this.pageWidth,this.pageHeight)},initLinkColor:function(){void 0==this.config.downColor?(this.config.downColor=bookConfig.LinkDownColor?Color(bookConfig.LinkDownColor):Color("#808080"),this.config.downAlpha=bookConfig.LinkAlpha?bookConfig.LinkAlpha:0.6,this.config.overColor=this.config.downColor,this.config.outColor=this.config.downColor,this.config.overAlpha=this.config.downAlpha/2,this.config.outAlpha=0):(this.config.downColor=Color(this.config.downColor),this.config.overColor=Color(this.config.overColor),this.config.outColor=Color(this.config.outColor),parseBool(this.config.hint)&&(this.config.hint.hintShapeColor=Color(this.config.hint.hintShapeColor),this.config.hint.hintShapeColor2=Color(this.config.hint.hintShapeColor2)))},initLink:function(){this.container=$("<div></div>");this.link=$("<div class='expose-square-solid' style='position: absolute;'></div>");this.link.css({"border-color":"rgba(0,0,0,0)","background-color":this.config.outColor.rgba(this.config.outAlpha)});this.setRotation(this.link,this.config.rotation);this.parent.append(this.link)},flash:function(){this.flashTimer&&this.flashTimer.stop();this.flashTimer=function(l,r){if(l==r){this.link.css({"background-color":this.config.outColor.rgba(this.config.outAlpha)})}else{var q=Math.ceil(r/2),p=l%q,o=Math.min(this.config.outAlpha,this.config.overAlpha),n=Math.max(this.config.outAlpha,this.config.overAlpha),m=n-o;fAlpha=l<q?o+p*m/q:n-p*m/q;this.link.css({"background-color":this.config.overColor.rgba(fAlpha)})}}.runInAnimate(this,1000)},stopFlash:function(){this.flashTimer&&(this.flashTimer.stop(),this.link.css({"background-color":this.config.outColor.rgba(this.config.outAlpha)}))},parseConfig:function(c){return{width:0>c.location.width?-c.location.width:c.location.width,height:0>c.location.height?-c.location.height:c.location.height,rotation:c.location.rotation,x:0>c.location.width?parseFloat(c.location.x)+parseFloat(c.location.width):c.location.x,y:0>c.location.height?parseFloat(c.location.y)+parseFloat(c.location.height):c.location.y,alpha:c.alpha,ellipseH:c.ellipseH,ellipseW:c.ellipseW,downColor:c.downColor,downAlpha:c.downAlpha,overColor:c.overColor,overAlpha:c.overAlpha,outColor:c.outColor,outAlpha:c.outAlpha,action:c.action,hint:c.hint,borderColor:c.borderColor,mouseOver:c.mouseOver}},initEvents:function(){function g(){this.stopFlash();this.link.css("border-color","rgba(0,0,0,0)");this.link.css({"background-color":h.rgba(this.config.outAlpha)})}var l=this.config.overColor,k=this.config.downColor,h=this.config.outColor;this.link.bind(_event._down,function(c){this.stopFlash();this.link.css({"background-color":k.rgba(this.config.downAlpha),cursor:"pointer"})}.bind(this));this.link.bind(_event._up,function(c){this.stopFlash();this.link.css({"background-color":l.rgba(this.config.overAlpha),cursor:"pointer"})}.bind(this));this.link.bind("mouseenter",function(c){this.stopFlash();parseBool(this.config.mouseOver)&&this.link.css("border-color",this.config.borderColor.toString());this.link.css({"background-color":l.rgba(this.config.overAlpha),cursor:"pointer"})}.bind(this));this.link.bind(isTouch?_event._end:"mouseleave",function(b){$.browser.device==$.browser.DEVICE_PC?g.apply(this):g.delay(this,1000)}.bind(this));this.addActionEvent(this.link)},onResize:function(d,f){this.pageWidth=d;this.pageHeight=f;this.left=d*this.config.x;this.top=f*this.config.y;this.width=d*this.config.width;this.height=f*this.config.height;this.setPosition(this.left,this.top);this.link.css({width:this.width+"px",height:this.height+"px"})},setPosition:function(d,f){this.link.css({left:d+"px",top:f+"px"})}}).extend(PageItem.Item);bdor[29]="t";Class("Rectangle",{Package:"PageItem",create:function(h,n,m,l,k){this._super(h,n,m,l);this.id="rectangle"+k;this.color=Color(this.config.color);this.angle=Number(this.config.angle)-90;this.borderColor=Color(this.config.borderColor);this.colorA=Color(this.config.ColorA);this.colorB=Color(this.config.ColorB);this.round=this.config.round;this.roundWidth=Math.ceil(this.config.roundWidth/2);this.initRectangle();this.initEvents();parseBool(this.config.reflection)&&this.imageReflection(this.Re);this.onResize(m,l)},initRectangle:function(){this.Re=$("<div id='"+this.id+"'></div>");this.Re.css({position:"absolute",opacity:this.config.alpha,border:this.config.borderWidth+"px solid "+this.borderColor.rgba(this.config.borderAlpha),"background-color":this.color.rgba(this.config.spalpha)});!0==this.round&&this.Re.css({"border-radius":this.roundWidth+"px"});if("gradient"==this.config.fillStyle){var d=this.colorB.rgba(this.config.spalpha),f=this.colorA.rgba(this.config.spalpha);this.Re.css({"background-image":"linear-gradient("+this.angle+"deg, "+d+", "+f+")"});this.Re.css({"background-image":$.browser.prefix+"linear-gradient("+this.angle+"deg, "+d+", "+f+")"})}"none"==this.config.fillStyle&&this.Re.css({"background-color":""});this.addShadow(this.Re);this.setRotation(this.Re,this.config.rotation);this.parent.append(this.Re)},parseConfig:function(c){return{x:c.location.x,y:c.location.y,rotation:c.location.rotation,width:c.location.width,height:c.location.height,pageWidth:c.location.pageWidth,pageHeight:c.location.pageHeight,alpha:c.alpha,fillStyle:c.fillStyle,color:c.color,ColorA:c.gradientColorA,ColorB:c.gradientColorB,angle:c.angle,spalpha:c.spalpha,reflection:c.location.reflection,reflectionType:c.location.reflectionType,reflectionAlpha:c.location.reflectionAlpha,borderWidth:c.borderWidth,borderColor:c.borderColor,borderAlpha:c.borderAlpha,hasShadow:parseBool(c.shadow.hasDropShadow),shadow:c.shadow,round:parseBool(c.round,!1),roundWidth:Math.max(Number(c.ellipseWidth),Number(c.ellipseHeight)),action:c.action}},initEvents:function(){this.addActionEvent(this.Re)},onResize:function(d,f){this.pageWidth=d;this.pageHeight=f;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.Re.css({width:this.width+"px",height:this.height+"px"});this.setPosition()},setPosition:function(){this.left=this.config.x*this.pageWidth;this.top=this.config.y*this.pageHeight;this.Re.css({left:this.left+"px",top:this.top+"px"})}}).extend(PageItem.Item);bdor[8]="o";Class("Round",{Package:"PageItem",create:function(h,n,m,l,k){this._super(h,n,m,l);this.parent=h;this.color=Color(this.config.color).toString();this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.id="round"+k;this.x1=this.x-10;this.y1=this.y-10;0>this.x-10&&(this.x1=0);0>this.y-10&&(this.y1=0);this.rounds=$("<canvas id="+this.id+" width="+(this.width+20)+" height="+(this.height+20)+" style='position: absolute;top:"+this.y1+"px;left:"+this.x1+"px'></canvas>");this.setRotation(this.rounds,this.config.rotation);this.initEvent();this.parent.append(this.rounds);this.roundcan(this.x,this.y,this.width,this.height,this.color,this.config.fillStyle,this.config.ColorA,this.config.ColorB,this.config.alpha,this.config.borderWidth,this.config.spalpha,this.config.borderColor,this.config.borderAlpha,this.config.sx,this.config.sy,this.config.se,this.config.sr,this.config.sh,360-Number(this.config.angle))},parseConfig:function(c){return{x:c.location.x,y:c.location.y,rotation:c.location.rotation,width:c.location.width,height:c.location.height,alpha:c.alpha,fillStyle:c.fillStyle,color:c.color,ColorA:c.gradientColorA,ColorB:c.gradientColorB,angle:c.angle,spalpha:c.spalpha,borderWidth:c.borderWidth,borderColor:c.borderColor,borderAlpha:c.borderAlpha,sh:parseBool(c.shadow.hasDropShadow),sx:c.shadow.shadowBlurX,sy:c.shadow.shadowBlurY,se:c.shadow.shadowDistance,sr:c.shadow.shadowColor,action:c.action}},initEvent:function(){this.flag=0;this.linkURL="";if(null!=this.config.action){try{void 0!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url}catch(c){}null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL);this.addActionEvent(this.rounds)}},onResize:function(d,f){this.pageWidth=d;this.pageHeight=f;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.rounds.css({width:this.width+20+"px",height:this.height+20+"px"});this.setPosition()},setPosition:function(){this.x=this.config.x*this.pageWidth-10;this.y=this.config.y*this.pageHeight-10;this.rounds.css({left:this.x+"px",top:this.y+"px"})},roundcan:function(T,S,R,Q,P,O,N,M,L,K,J,I,F,H,G,D,E,B,A){T=L=0;try{var C=this.rounds[0].getContext("2d")}catch(o){return}S=[R/2+10,Q/2+10];L=R/2;T=Q/2;C.save();C.beginPath();C.strokeStyle=Color(I).toString();C.lineWidth=K;C.globalAlpha=J;!0===parseBool(B)&&(C.shadowOffsetX=H,C.shadowOffsetY=G,C.shadowBlur=D,C.shadowColor=Color(E).toString());C.closePath();C.stroke();DrawEllipse(C,S,L,T);"gradient"==O&&(Q=A*Math.PI/180,R=S[0]+L*Math.cos(Q),Q=S[1]+T*Math.sin(Q),A=(A+180)*Math.PI/180,J=S[0]+L*Math.cos(A),A=S[1]+T*Math.sin(A),A=C.createLinearGradient(R,Q,J,A),A.addColorStop(0,Color(N).toString()),A.addColorStop(1,Color(M).toString()),C.fillStyle=A,C.fill());"none"==O&&(C.fillStyle=P,C.fill());0!=K&&C.stroke();C.closePath()}}).extend(PageItem.Item);bdor[9]="j";function DrawEllipse(l,r,q,p){var o=r[0]+q,n=r[1];l.moveTo(o,n);for(var m=0;360>=m;m++){n=m*Math.PI/180,o=r[0]+q*Math.cos(n),n=r[1]-p*Math.sin(n),l.lineTo(o,n)}}Class("Text",{Package:"PageItem",create:function(h,n,m,l,k){this._super(h,n,m,l);this.color=this.config.color?Color(this.config.color):Color("#000000");this.originWidth=this.config.pageW;this.originHeight=this.config.pageH;this.id="text"+k;this.initText();this.initEvents();this.initLinkHint(this.text);parseBool(this.config.reflection)&&this.imageReflection(this.textdiv);this.onResize(this.pageWidth,this.pageHeight)},initText:function(){var c=new TextFormatAnalyzer(this.config.textStr);this.fontSize=c.getMinFontSize();this.adjustFontSize=$.browser.chrome?Math.max(1,12/this.fontSize):1;this.width=this.config.width*this.originWidth*this.adjustFontSize;this.height=this.config.height*this.originHeight*this.adjustFontSize;this.textdiv=$("<div id="+this.id+"></div>");this.textdiv.css({overflow:"hidden",position:"absolute",width:this.width+"px",height:this.height+"px"});this.text=c.getHTML();!0===parseBool(this.config.fillBg)&&null!=this.config.bgcolor?(c=Color(this.config.bgcolor),this.text.css({"background-color":c.rgba()})):this.text.css({background:""});!0===parseBool(this.config.tbold)&&this.text.css({"font-weight":"bold"});!0===parseBool(this.config.italic)&&this.text.css({"font-style":"italic"});this.addShadow(this.text);this.textdiv.append(this.text);this.parent.append(this.textdiv);this.trimingFontSize(this.height)},trimingFontSize:function(f){function h(k,m){if(k.css){var l=k.css(m);l&&(l=parseInt(l.replace("px","")),l--,k.css(m,l+"px"))}}function g(c){if((c=c.children())&&0!=c.length){for(var k=0;k<c.length;k++){var d=$(c[k]);d.is("span")&&(h(d,"font-size"),h(d,"line-height"));g(d)}}}for(;this.text.height()>f&&$.system.name!=$.system.IOS&&!($.browser.chrome&&12>=this.fontSize)&&!(g(this.text),this.fontSize--,0>=this.fontSize);){}},parseConfig:function(c){return{x:c.location.x,y:c.location.y,width:c.location.width,height:c.location.height,rotation:c.location.rotation,alpha:c.alpha,pageWidth:c.pageWidth,pageHeight:c.pageHeight,reflection:c.location.reflection,reflectionType:c.location.reflectionType,reflectionAlpha:c.location.reflectionAlpha,selectable:c.selectable,highlightsBool:c.highlightsBool,highlightsURL:c.highlightsURL,highlightsLabel:c.highlightsLabel,hint:c.hint,textStr:c.textStr,lineH:c.lineHeightRation,fontName:c.formats.defaultFormat.fontName,fontSize:c.formats.defaultFormat.fontSize,color:c.formats.defaultFormat.color,tbold:c.formats.defaultFormat.bold,italic:c.formats.defaultFormat.italic,pageH:c.formats.defaultFormat.pageH,pageW:c.formats.defaultFormat.pageW,bgalpha:c.background.alpha,fillBg:c.background.fillBg,bgcolor:c.background.color,hasShadow:parseBool(c.shadow.hasDropShadow),shadow:c.shadow,action:c.action}},initEvents:function(){this.addActionEvent(this.text)},onResize:function(d,f){this.pageWidth=d;this.pageHeight=f;this.setPosition(d,f);this.resizeText(f)},resizeText:function(c){c=c/this.originHeight/this.adjustFontSize;this.textdiv.css({"-webkit-transform-origin":"0% 0%","-moz-transform-origin":"0% 0%","-ms-transform-origin":"0% 0%","-o-transform-origin":"0% 0%","transform-origin":"0% 0%","-webkit-transform":"scale("+c+") rotate("+this.config.rotation+"deg)","-moz-transform":"scale("+c+") rotate("+this.config.rotation+"deg)","-ms-transform":"scale("+c+") rotate("+this.config.rotation+"deg)","-o-transform":"scale("+c+") rotate("+this.config.rotation+"deg)",transform:"scale("+c+") rotate("+this.config.rotation+"deg)"})},setPosition:function(d,f){this.left=this.config.x*d;this.top=this.config.y*f;this.textdiv.css({left:this.left+"px",top:this.top+"px"})}}).extend(PageItem.Item);Class("Button",{Package:"PageItem",create:function(k,p,o,n){this._super(k,p,o,n);this.fScale=o/this.config.pageWidth;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.button=null;this.left=this.pageWidth*this.config.x;this.top=this.pageHeight*this.config.y;this.config.hint&&(this.config.hint.hintShapeColor=Color(this.config.hint.hintShapeColor).toString(),this.config.hint.hintShapeColor2=this.config.hint.hintShapeColor2?Color(this.config.hint.hintShapeColor2).toString():Color(this.config.hint.hintShapeColor).toString(),"null"==this.config.hint.text&&(this.config.hint.text=""));this.config.Format&&(this.config.Format.color=Color(this.config.Format.color).toString());if(null==this.config.src||"null"==this.config.src){this.button=$("<button type = 'button' class='flip-action'></button>"),this.config.alpha=0}else{this.config.src=this.fixRelativePath(this.config.src);this.config.src.substring(this.config.src.lastIndexOf("/")+1,this.config.src.length);if(this.swfButton=".swf"==this.config.src.substr(this.config.src.length-4,4)){this.button=$("<div class='flip-action'></div>");this.buttonEvt=$("<div></div>");isTouchDevice()?(this.button.css({"-webkit-border-radius":"8px","-moz-border-radius":"5px","border-radius":"8px","background-image":getBrowserPre()+"linear-gradient(top,rgba(185,185,185,1) 0%, rgba(122,122,122,1) 45%, rgba(80, 80, 80, 1) 46%, rgba(53,53,53,1) 100%)","-webkit-box-shadow":"0 0 10px rgba(40, 40, 40, 0.7)","-moz-box-shadow":"0 0 10px rgba(40, 40, 40, 0.7)","-o-box-shadow":"0 0 10px rgba(40, 40, 40, 0.7)","-ms-box-shadow":"0 0 10px rgba(40, 40, 40, 0.7)","box-shadow":"0 0 10px rgba(40, 40, 40, 0.7)"}),this.buttonEvt.css({"-webkit-border-radius":"8px","-moz-border-radius":"5px","border-radius":"8px","background-color":"#333333",opacity:0.2,display:"none",width:this.width+"px",height:this.height+"px"})):(this.button.flash({swf:this.config.src,width:this.width+"px",height:this.height+"px",wmode:"transparent"}),this.buttonEvt.css({display:"none",width:this.width+"px",height:this.height+"px"}));this.buttonCaption=new label(this.config.buttonCaption,this.button);this.config.Format&&this.buttonCaption.setFont(this.config.Format.size+"px",this.config.Format.color,this.config.Format.font);k=transformCSS({origin:{x:0,y:0},scale:this.fScale});this.buttonCaption.labelBox.css({width:this.width-m+"px"});var m=this.buttonCaption.getWidth()*this.fScale>this.width?5:(this.width-this.buttonCaption.getWidth()*this.fScale-10)/2;this.buttonCaption.onResize((this.width-10)/this.fScale,this.config.Format.size);this.buttonCaption.labelBox.css({"line-height":this.config.Format.size+"px",overflow:"hidden"});this.buttonCaption.setLabelPosition(m,this.config.captionY*this.height/100);this.button.append(this.buttonEvt);var l=this;this.button.bind(_event._down,function(){l.buttonEvt.css({display:"block"})});this.button.bind(_event._end,function(){l.buttonEvt.css({display:"none"})});this.button.bind("mouseleave",function(){l.buttonEvt.css({display:"none"})})}".swf"!=this.config.src.substr(this.config.src.length-4,4)&&(this.button=$("<div><img/></div>"),this.button.find("img").css({width:this.width,height:this.height}),this.button.find("img").attr({src:this.config.src}),this.buttonCaption=new label(this.config.buttonCaption,this.button),k=transformCSS({origin:{x:0,y:0},scale:this.fScale}),this.buttonCaption.labelBox.css(k),this.config.Format&&this.buttonCaption.setFont(this.config.Format.size+"px",this.config.Format.color,this.config.Format.font),m=this.buttonCaption.getWidth()*this.fScale>this.width?5:(this.width-this.buttonCaption.getWidth()*this.fScale-10)/2,this.buttonCaption.onResize((this.width-10)/this.fScale,this.config.Format.size),this.buttonCaption.labelBox.css({"line-height":this.config.Format.size+"px",overflow:"hidden"}),this.buttonCaption.setLabelPosition(m,this.config.captionY*this.height/100))}this.button.css({position:"absolute",width:this.width+"px",height:this.height+"px",left:this.left+"px",top:this.top+"px",opacity:this.config.alpha});this.setRotation(this.button,this.config.rotation);this.parent.append(this.button);this.initEvt();this.initLinkHint(this.button);parseBool(this.config.reflection)&&this.imageReflection(this.button);this.show()},parseConfig:function(c){return{width:c.location.width,height:c.location.height,pageWidth:c.location.pageWidth,pageHeight:c.location.pageHeight,rotation:c.location.rotation,reflection:c.location.reflection,reflectionType:c.location.reflectionType,reflectionAlpha:c.location.reflectionAlpha,x:c.location.x,y:c.location.y,alpha:c.alpha,src:c.url,action:c.action,hint:c.hint,buttonCaption:c.buttonCaption,captionY:c.captionY,HRate:c.HRate,Format:c.Format}},onResize:function(f,h){this.pageWidth=f;this.pageHeight=h;this.fScale=this.pageWidth/this.config.pageWidth;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.left=this.config.x*this.pageWidth;this.top=this.config.y*this.pageHeight;this.button.css({width:this.width+"px",height:this.height+"px"});this.button.find("img").css({width:this.width+"px",height:this.height+"px"});if(this.swfButton){if(isTouchDevice()){this.config.Format&&this.buttonCaption.setFont(this.config.Format.size+"px",bookConfig.iconColor,this.config.Format.font);var g=transformCSS({origin:{x:0,y:0},scale:this.fScale});this.buttonCaption.labelBox.css(g);g=this.buttonCaption.getWidth()*this.fScale>this.width?5:(this.width-this.buttonCaption.getWidth()*this.fScale-10)/2;this.buttonCaption.onResize((this.width-10)/this.fScale,this.config.Format.size);this.buttonCaption.labelBox.css({"line-height":this.config.Format.size+"px",overflow:"hidden"});this.buttonCaption.setLabelPosition(g,this.config.captionY*this.height/100);this.buttonEvt.css({width:this.width+"px",height:this.height+"px"})}else{this.hide(),this.show()}}this.setPosition(this.left,this.top)},hide:function(){isTouchDevice()},show:function(){var d=this;if(!isTouchDevice()&&this.swfButton){this.buttonEvt=$("<div></div>");this.button.flash().remove();this.buttonCaption.labelBox.remove();this.button.flash({swf:this.config.src,width:this.width+"px",height:this.height+"px",wmode:"transparent"});this.buttonEvt.css({display:"none",width:this.width+"px",height:this.height+"px"});this.buttonCaption=new label(this.config.buttonCaption,this.button);this.config.Format&&this.buttonCaption.setFont(this.config.Format.size+"px",this.config.Format.color,this.config.Format.font);var f=transformCSS({origin:{x:0,y:0},scale:this.fScale});this.buttonCaption.labelBox.css(f);f=this.buttonCaption.getWidth()*this.fScale>this.width?5:(this.width-this.buttonCaption.getWidth()*this.fScale-10)/2;this.buttonCaption.onResize((this.width-10)/this.fScale,this.config.Format.size);this.buttonCaption.labelBox.css({"line-height":this.config.Format.size+"px",overflow:"hidden"});this.buttonCaption.setLabelPosition(f,this.config.captionY*this.height/100);this.button.append(this.buttonEvt);this.button.bind(_event._down,function(){d.buttonEvt.css({display:"block"})});this.button.bind(_event._end,function(){d.buttonEvt.css({display:"none"})});this.button.bind("mouseleave",function(){d.buttonEvt.css({display:"none"})})}},setPosition:function(d,f){this.button.css({left:d+"px",top:f+"px"})},initEvt:function(){this.addActionEvent(this.button)}}).extend(PageItem.Item);global.hddr.soo6=function(){return hddr.bbb5};Class("Area",{Package:"PageItem",create:function(h,n,m,l,k){this._super(h,n,m,l);this.id="Area"+k;this.color=Color(this.config.color);this.initArea();this.initEvents();this.onResize(m,l)},initArea:function(){this.Area=$("<div id='"+this.id+"'></div>");this.Area.css({position:"absolute",overflow:"hidden","background-color":this.color.rgba(this.config.alpha)});!0===parseBool(this.config.rounds)&&this.Area.css({"border-radius":this.config.ellipseWidth+"px "+this.config.ellipseHeight+"px"});this.addShadow(this.Area);this.parent.append(this.Area)},parseConfig:function(c){return{x:c.location.x,y:c.location.y,width:c.location.width,height:c.location.height,alpha:c.alpha,color:c.color,rounds:c.round,ellipseWidth:c.ellipseWidth,ellipseHeight:c.ellipseHeight,hasShadow:parseBool(c.shadow.hasDropShadow),shadow:c.shadow,action:c.action}},initEvents:function(){this.addActionEvent(this.Area)},onResize:function(d,f){this.pageWidth=d;this.pageHeight=f;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.Area.css({width:this.width+"px",height:this.height+"px"});this.setPosition();if(null!=this.form){this.form.onResize(bookContainer.width(),bookContainer.height())}if(null!=this.slide){this.slide.onResize(bookContainer.width(),bookContainer.height())}if(null!=this.audios){this.audios.onResize(bookContainer.width(),bookContainer.height())}},setPosition:function(){this.left=this.config.x*this.pageWidth;this.top=this.config.y*this.pageHeight;this.Area.css({left:this.left+"px",top:this.top+"px"})}}).extend(PageItem.Item);Class("VideoForm",{Package:"PageItem",create:function(h,n,m,l,k){this.parent=h;this.type=k;this.config=$.extend({width:400,height:300,src:null,alpha:0.3,caption:""},n);null!=this.config.src&&(this.config.width=Math.min(windowWidth-10,Number(this.config.width)),this.config.height=Math.min(windowHeight-90,Number(this.config.height)),this.sw=m,this.sh=l,this.th=28,this.background=$("<div ></div>"),this.closeButton=$("<div></div>"),this.form=$("<div class='flip-action'></div>"),this.titleBar=$("<div></div>"),this.config.src=this.fixRelativePath(this.config.src),""!=this.config.caption&&(this.captionLabel=new label(this.config.caption,this.titleBar),this.captionLabel.setLabelPosition(5,3,["left","top"]),this.captionLabel.setFont(13,"#dddddd","Tahoma")),this.parent.append(this.background),this.parent.append(this.form),this.form.append(this.titleBar),this.titleBar.append(this.closeButton),this.setCss(),"text"==this.type&&(this.text=$("<div>"+this.config.src+"</div>"),this.text.css({width:this.config.width-10+"px",height:this.config.height-this.th-10+"px",top:this.th+2+"px",left:"0px","font-size":"12px","line-height":"1.8",overflow:"auto",position:"absolute",padding:"5px"}),this.form.css({"background-color":"#ffffff",border:"5px solid rgba(204,204,204,0.8)"}),this.form.append(this.text)),"video"==this.type&&(this.video=$("<video src='"+this.config.src+"' controls='controls'></video>"),this.video.css({width:this.config.width+"px",height:this.config.height-this.th+"px",top:this.th+"px","z-index":"200",position:"absolute"}),this.form.css({"background-color":"#000000",border:"5px solid rgba(204,204,204,0.8)"}),this.form.append(this.video),this.video[0].play&&this.video[0].play()),"flash"==this.type&&(this.content=$("<div><div>"),this.content.flash({swf:this.config.src,width:this.config.width+"px",height:this.config.height-this.th+"px",wmode:"transparent"}),this.content.css({width:this.config.width+"px",height:this.config.height-this.th+"px",top:this.th+2+"px","line-height":"1.8",overflow:"auto",position:"absolute"}),this.form.css("background-color","#000000"),this.form.append(this.content)),this.initEvent())},setCss:function(){this.closeButton.css({position:"absolute",background:"url("+uiBaseURL+"singleClose.png) repeat 2px 3px",left:this.config.width-28+"px",top:"3px",width:"15px",height:"18px",cursor:"pointer"});this.background.css({width:"100%",height:"100%",background:"rgba(0,0,0,0.5)","z-index":200,position:"absolute",left:"0px",top:"0px"});this.form.css({width:this.config.width+"px",height:this.config.height+"px",margin:"auto",left:"0",top:"0",bottom:"0",right:"0",overflow:"hidden","-webkit-border-radius":"5px","-moz-border-radius":"5px","-ms-border-radius":"5px","border-radius":"5px",position:"absolute","z-index":"201",border:"5px solid rgba(251,251,251,0.8)"});this.titleBar.css({"line-height":"1.8",width:this.config.width+"px",height:this.th+"px","border-top-left-radius":"5px","border-top-right-radius":"5px",position:"absolute",cursor:"pointer","background-color":"#111111"})},initEvent:function(){var h,n,m,l,k=!1;this.closeButton.on(_event._down,function(c){c.stopPropagation();return !1}.bind(this));this.closeButton.on(_event._end,function(c){this.closeForm();c.stopPropagation();return !1}.bind(this));this.background.on(_event._down,function(c){this.closeForm();c.stopPropagation();return !1}.bind(this));this.background.on(_event._end,function(c){c.stopPropagation();return !1}.bind(this));this.titleBar.bind(_event._down,function(b){this.titleBar[0].style.cursor="move";m=this.form[0].style.left;l=this.form[0].style.top;h=b.clientX;n=b.clientY;k=!0}.bind(this));$(document).bind(_event._move,function(c){var b=c.clientX;c=c.clientY;k&&(b=parseInt(m)+parseInt(b)-parseInt(h),c=parseInt(l)+parseInt(c)-parseInt(n),this.form.css({transform:"translate("+b+"px,"+c+"px)","-webkit-transform":"translate("+b+"px,"+c+"px)","-moz-transform":"translate("+b+"px,"+c+"px)","-o-transform":"translate("+b+"px,"+c+"px)","-ms-transform":"translate("+b+"px,"+c+"px)"}))}.bind(this));this.titleBar.bind("mouseup",function(f){if(k){var d=f.clientX;f=f.clientY;var c=parseInt(d)-parseInt(h)+parseInt(m),b=parseInt(f)-parseInt(n)+parseInt(l);this.form.css({transform:"translate("+c+"px,"+b+"px)","-webkit-transform":"translate("+c+"px,"+b+"px)","-moz-transform":"translate("+c+"px,"+b+"px)","-o-transform":"translate("+c+"px,"+b+"px)","-ms-transform":"translate("+c+"px,"+b+"px)"});h=d;rewmouseY=f;this.titleBar[0].style.cursor="pointer";k=!1}}.bind(this))},closeForm:function(){var c=this;this.form.animate({width:20,height:20},200,function(){c.background.hide();c.form.remove();$(document).off(_event._move)})},onResize:function(){}}).extend(PageItem.Item);Class("MobileVideo",{create:function(h,n,m,l,k){this.config=n;this.parent=h;this.parentWidth=m;this.parentHeight=l;!0==bookConfig.isFlipPdf&&(this.config.src.startsWith("./")?this.config.src="."+this.config.src:this.config.src.isUrl()||(this.config.src="../"+this.config.src));this.closeButton=$("<div></div>");h=getLanguage("btnClose","Close");this.closeButtonHint=$("<div>"+h+"</div>");this.closeButtonHintArrow=$("<div></div>");this.content=$("<div></div>");this.video=$("<video controls='controls' class='flip-action'><source src='"+this.config.src+"'></video>");this.content.append(this.video);this.parent.append(this.closeButton);this.parent.append(this.closeButtonHint);this.parent.append(this.closeButtonHintArrow);this.parent.append(this.content);this.video[0].play&&this.video[0].play();this.initStyle();this.initEvents();this.onResize()},initStyle:function(){this.content.css({position:"absolute","z-index":200,left:"0px",top:"0px",background:"rgb(0,0,0)"});this.video.css({left:"2px","z-index":"200",position:"absolute",width:"100%",margin:"auto",top:"0px",bottom:"0px"});this.closeButton.css({position:"absolute","background-image":"url("+uiBaseURL+"closecat.png)",right:"20px",top:"20px",width:"22px",height:"20px",display:"block","z-index":9999});this.closeButtonHint.css({position:"absolute","background-color":"white",border:"1px solid #EEEEEE","border-radius":"4px","font-family":'"Tahoma","sans-serif","Arial"',"font-size":"18px",right:"55px",top:"15px","padding-left":"5px","padding-right":"5px","padding-top":"2px","padding-bottom":"2px",display:"block","z-index":9999});this.closeButtonHintArrow.css({position:"absolute",width:"0px",height:"0px",right:"47px",top:"24px","border-top":"5px solid transparent","border-bottom":"5px solid transparent","border-left":"10px solid #EEEEEE","z-index":10000})},initEvents:function(){function c(d){d.stopPropagation();return !1}this.initTimer();this.content.on(_event._down,c);this.content.on(_event._end,c);this.video.on(_event._down,c);this.video.on(_event._end,c);this.closeButton.on(_event._down,c);this.closeButton.on(_event._end,function(d){this.video.css("display","none");this.content.css("display","none");this.setCurrentTime(0);this.video[0].pause();this.content.remove();this.closeButton.remove();this.closeButtonHint.remove();this.closeButtonHintArrow.remove();this.timer&&this.timer.stop();d.stopPropagation();return !1}.bind(this))},initTimer:function(){this.timer=function(){if(this.parentWidth!=windowWidth||this.parentHeight!=windowHeight){this.parentWidth=windowWidth,this.parentHeight=windowHeight,this.onResize()}}.interval(this,300)},setCurrentTime:function(c){this.video[0].currentTime=c},onResize:function(){this.content.css({width:this.parentWidth+"px",height:this.parentHeight+"px"});this.video.css({height:this.parentHeight-80+"px"})}});Class("TextLightBox",{create:function(h,n,m,l,k){this.parent=h;this.config=n;this.background=$("<div class='flip-action'></div>");this.box=$("<div id=textling></div>");this.title=$("<div>"+this.config.caption+"</div>");this.panel=$("<div>"+this.config.src+"</div>");this.closeButton=$("<div>Close</div>");this.parent.append(this.background);this.parent.append(this.box);this.box.append(this.title).append(this.panel).append(this.closeButton);this.setCss();this.initEvent()},setCss:function(){this.panel.css({position:"relative",width:windowWidth-40+"px",height:windowHeight-160+"px","overflow-x":"hidden","font-size":"12px","line-height":"2",left:"8px","padding-right":"5px"});this.background.css({top:0,"background-color":"black",opacity:"0.6",width:"100%",height:"100%",position:"absolute","z-index":"100"});this.box.css({width:windowWidth-40+"px",height:windowHeight-60+"px",position:"absolute",margin:"auto",top:"0",left:"0",bottom:"0",right:"0","background-color":"white","border-radius":"4px","z-index":"200",overflow:"hidden"});this.closeButton.css({position:"absolute",bottom:"10px","border-radius":"4px",cursor:"pointer","text-align":"center",padding:"10px 12px","background-color":"red",width:windowWidth-80+"px",right:"0",left:"0",margin:"auto",color:"white"});this.title.css({position:"relative",padding:"13px 18px","font-weight":"bold",background:"#EBEBEB","border-radius":"5px 5px 0 0"})},initEvent:function(){this.closeButton.bind("click",function(){this.background.fadeOut(function(){this.background.remove()}.bind(this));this.box.animate({opacity:0},500,function(){this.box.remove()}.bind(this))}.bind(this))}});Class("SlideShow",{Package:"PageItem",create:function(h,n,m,l){this.photos=$.extend([],n);this.photos.photo&&(this.photos=void 0==this.photos.photo[1]?[this.photos.photo]:this.photos.photo);if(!(this.photos instanceof Array)){if(void 0==this.photos.url&&void 0==this.photos.photo){return}this.photos.url&&(this.photos=[{url:this.photos.url,desc:""}]);this.photos.photo&&(this.photos=[this.photos.photo])}this.parent=h;this.windowWidth=m;this.windowHeight=l;this.imgIndex=-1;this.imgWidth=200;this.imgHeight=300;this.boxWidth=200;this.boxHeight=300;this.loadingImageHeight=this.loadingImageWidth=32;this.background=$("<div style='position:absolute;width:"+m+"px;height:"+l+"px;background:rgba(0,0,0,0.4);z-index: 100'></div>");this.photoBox=$("<div id='photoBox'></div>");this.leftBar=$("<div></div>");this.rightBar=$("<div></div>");this.img=$("<img style='position : absolute;' />");this.parent.append(this.background);this.parent.append(this.photoBox);this.parent.append(this.leftBar);this.parent.append(this.rightBar);this.closeButton=new button(this.parent,{buttonType:1,iconURL:uiBaseURL+"closecat.png"},!0);this.closeButton.setCSS({"z-index":210,display:"none"});this.photoBox.css({position:"absolute",width:this.boxWidth+"px",height:this.boxHeight+"px",margin:"auto",left:"0px",top:"0px",bottom:"0px",right:"0px","background-color":"#eeeeee","z-index":201,"-webkit-box-shadow":"0 0 10px rgba(255, 255, 255, 0.7)","-moz-box-shadow":"0 0 10px rgba(255, 255, 255, 0.7)","-ms-box-shadow":"0 0 10px rgba(255, 255, 255, 0.7)","-o-box-shadow":"0 0 10px rgba(255, 255, 255, 0.7)","box-shadow":"0 0 10px rgba(255, 255, 255, 0.7)","-webkit-transform":"scale(0)","-o-transform":"scale(0)","-ms-transform":"scale(0)","-moz-transform":"scale(0)",transform:"scale(0)","-webkit-transition":"transform 0.3s","-ms-transition":"transform 0.3s","-o-transition":"transform 0.3s","-moz-transition":"transform 0.3s",transition:"transform 0.3s"});this.loadingImage=$("<div><img src='"+uiBaseURL+"progress.gif' style='position:absolute;'/></div>");this.loadingImage.css({"z-index":-1,left:(this.boxWidth-this.loadingImageWidth)/2+"px",top:(this.boxHeight-this.loadingImageHeight)/2+"px"});this.loadingImage.css({width:this.loadingImageWidth+"px",height:this.loadingImageHeight+"px",position:"absolute"});this.photoBox.append(this.loadingImage);var k=this;this.photoBox.bind(_event._down,function(c){k.nextPage()});this.closeButton.onMouseDown(this,this.hide);this.background.on(_event._down,this.hide.bind(this));this.initButton();this.resizeTimer=this.onResize.interval(this,500);this.changeImage(0);this.transformShow()},initButton:function(){1>=this.photos.length||(this.leftButton=new button(this.leftBar,{buttonType:1,iconURL:uiBaseURL+"previous_down.png"}),this.rightButton=new button(this.rightBar,{buttonType:1,iconURL:uiBaseURL+"next_down.png"}),this.leftButton.setButtonPosition(0,29,["left","top"]),this.leftButton.background.css({display:"none"}),this.rightButton.setButtonPosition(0,29,["right","top"]),this.rightBar.css({"z-index":202,width:"100px",height:"100px",right:"0px",top:(windowHeight-100)/2+"px",position:"absolute"}),this.leftBar.css({"z-index":203,width:"100px",height:"100px",left:"0px",top:(windowHeight-100)/2+"px",position:"absolute"}),this.leftButton.onMouseDown(this,this.prePage),this.rightButton.onMouseDown(this,this.nextPage),this.leftButton.mouseEnterJump(),this.rightButton.mouseEnterJump(),void 0!=leftRightButton&&null!=leftRightButton&&leftRightButton.setShow(!1),this.hideButtons())},hideButtons:function(){this.photos&&1>=this.photos.length&&(this.leftButton.css("display","none"),this.rightButton.css("display","none"))},nextPage:function(){if(!(1>=this.photos.length)){var c=this.imgIndex+1;this.leftButton.background.css({display:"block"});c>=this.photos.length-1&&(c=this.photos.length-1,this.rightButton.background.css({display:"none"}));this.changeImage(c)}},prePage:function(){if(!(1>=this.photos.length)){var c=this.imgIndex-1;this.rightButton.background.css({display:"block"});0>=c&&(c=0,this.leftButton.background.css({display:"none"}));this.changeImage(c)}},changeImage:function(c){void 0!=c&&this.imgIndex!=c&&(this.imgIndex=c,c=this.photos[c].url,!0==bookConfig.isFlipPdf&&(c.startsWith("./")?c="."+c:c.isUrl()||(c="../"+c)),this.img.on("load",function(){this.imgWidth=this.img[0].naturalWidth;this.imgHeight=this.img[0].naturalHeight;this.resizeImage();this.loadingImage.css("display","none")}.bind(this)),this.img.attr("src",c))},resizeImage:function(){var g=this.windowWidth-20,l=this.windowHeight-20,k=this.imgWidth,h=this.imgHeight;k>g&&(h*=g/k,k=g);h>l&&(k*=l/h,h=l);this.img.css({width:k+"px",height:h+"px"});this.boxWidth!=k||this.boxHeight!=h?(this.photoBox.css({width:k+8+"px",height:h+8+"px"}),this.photoBox.append(this.img),this.loadingImage.css({left:(k+8-this.loadingImageWidth)/2,top:(h+8-this.loadingImageHeight)/2})):this.photoBox.append(this.img);this.boxWidth=k;this.boxHeight=h;this.img.css({left:"4px",top:"4px"});this.closeButton.setButtonPosition((this.windowWidth-k)/2+k-25,(this.windowHeight-h)/2+5);this.closeButton.setCSS({display:"block"})},transformShow:function(){setTimeout(function(){this.photoBox.css({"-webkit-transition":"transform 0.3s","-o-transition":"transform 0.3s","-moz-transition":"transform 0.3s","-ms-transition":"transform 0.3s",transition:"transform 0.3s","-webkit-transform":"scale(1)","-o-transform":"scale(1)","-ms-transform":"scale(1)","-moz-transform":"scale(1)",transform:"scale(1)"})}.bind(this),100)},transformHide:function(){this.photoBox.css({"-webkit-transition":"transform 0.3s","-o-transition":"transform 0.3s","-moz-transition":"transform 0.3s","-ms-transition":"transform 0.3s",transition:"transform 0.3s","-webkit-transform":"scale(0)","-o-transform":"scale(0)","-ms-transform":"scale(0)","-moz-transform":"scale(0)",transform:"scale(0)"})},hide:function(){this.closeButton.remove();this.transformHide();setTimeout(function(){this.leftBar.remove();this.rightBar.remove();this.photoBox.remove();this.background.hide()}.bind(this),600);void 0!=leftRightButton&&null!=leftRightButton&&leftRightButton.setShow(!0);this.resizeTimer&&this.resizeTimer.stop()},onResize:function(){!this.imgWidth||this.windowWidth==windowWidth&&this.windowHeight==windowHeight||(this.windowWidth=windowWidth,this.windowHeight=windowHeight,this.resizeImage(),this.rightBar.css({top:(this.windowHeight-100)/2+"px"}),this.leftBar.css({top:(this.windowHeight-100)/2+"px"}))}});global.hddr.soa7=bdor[3]+bdor[10];Class("Callout",{Package:"PageItem",create:function(g,l,k,h){this._super(g,l,k,h);this.getDefault(k,h);this.getCanvasDefault();this.callout=$("<canvas  width="+this.canvasWidth+" height="+this.canvasHeight+"></canvas>");this.textBox=$("<div></div>");this.text=(new TextFormatAnalyzer(this.config.textStr)).getHTML();this.context=this.callout[0].getContext("2d");this.fillStyle=this.fillColor();this.initCss(k,h);switch(this.config.bubbleType){case"1":this.drawRoundRect();break;case"2":this.drawRoundBubble();break;case"3":this.drawCloudBubble()}this.textBox.append(this.text);this.parent.append(this.callout,this.textBox);this.setRotation(this.callout,this.config.location.rotation);this.setRotation(this.text,this.config.location.rotation);this.setRotation(this.textBox,this.config.location.rotation);this.resizeCallout(k);this.initEvents();parseBool(this.config.location.reflection)&&this.imageReflection(this.cross)},getDefault:function(d,f){this.config.location.pageWidth||(this.config.location.pageWidth=1080);this.config.location.pageHeight||(this.config.location.pageHeight=1440);this.width=this.config.location.width*this.config.location.pageWidth;this.height=this.config.location.height*this.config.location.pageHeight;this.pageWidth=this.config.location.pageWidth;this.pageHeight=this.config.location.pageHeight;this.canvasPosition=Point(this.config.location.x*d,this.config.location.y*f);this.left=this.config.hookContrPointRatioX*this.width;this.top=this.config.hookContrPointRatioY*this.height;this.dock1=Point(this.config.hookContr1RatioX*this.width,this.config.hookContr1RatioY*this.height);this.dock2=Point(this.config.hookContr2RatioX*this.width,this.config.hookContr2RatioY*this.height);this.vertex=Point(this.config.hookContrPointRatioX*this.width,this.config.hookContrPointRatioY*this.height);this.cornerRadius=parseInt(this.config.cornerRadiut);this.fontSize=this.config.lineHeightRation*this.pageWidth;this.borderWidth=this.config.borderWidth;this.fScale=d/this.pageWidth;this.strokeStyle=Color(this.config.borderColor).rgba(this.config.bordreAlpha);this.canvasLeft=this.canvasTop=this.canvasHeight=this.canvasWidth=0},getCanvasDefault:function(){switch(this.config.hookDirect){case"Down":if(0>this.vertex.x){this.canvasWidth=this.width-this.vertex.x+20;this.canvasHeight=this.vertex.y+20;this.canvasTop=this.canvasPosition.y-10;this.canvasLeft=this.canvasPosition.x-(this.canvasWidth-this.width-10);this.leftTop=Point(this.canvasWidth-this.width-10,10);this.rightTop=Point(this.canvasWidth-10,10);this.rightBottom=Point(this.canvasWidth-10,this.height+10);this.leftBottom=Point(this.canvasWidth-this.width-10,this.height+10);this.center=Point(this.canvasWidth-10-this.width/2,10+this.height/2);this.dock1=Point(this.dock1.x-this.vertex.x+10,this.height+10);this.dock2=Point(this.dock2.x-this.vertex.x+10,this.height+10);this.vertex=Point(10,this.vertex.y);break}this.canvasWidth=this.vertex.x>this.width?this.vertex.x+20:this.width+20;this.canvasHeight=this.vertex.y+20;this.canvasTop=this.canvasPosition.y-10;this.canvasLeft=this.canvasPosition.x-10;this.leftTop=Point(10,10);this.rightTop=Point(this.width+10,10);this.rightBottom=Point(this.width+10,this.height+10);this.leftBottom=Point(10,this.height+10);this.center=Point(10+this.width/2,10+this.height/2);this.dock1=Point(this.dock1.x+10,this.height+10);this.dock2=Point(this.dock2.x+10,this.height+10);this.vertex=Point(this.vertex.x,this.vertex.y);break;case"left":if(0>this.vertex.y){this.canvasWidth=this.width-this.vertex.x+20;this.canvasHeight=this.height-this.vertex.y+20;this.canvasTop=this.canvasPosition.y-10;this.canvasLeft=this.canvasPosition.x+this.vertex.x+40;this.leftTop=Point(this.canvasWidth-this.width-10,this.canvasHeight-this.height-10);this.rightTop=Point(this.canvasWidth-10,this.canvasHeight-this.height-10);this.rightBottom=Point(this.canvasWidth-10,this.canvasHeight-10);this.leftBottom=Point(this.canvasWidth-this.width-10,this.canvasHeight-10);this.dock1=Point(this.canvasWidth-this.width-10,this.dock1.y-this.vertex.y+10);this.dock2=Point(this.canvasWidth-this.width-10,this.dock1.y-this.vertex.y+10);this.center=Point(this.canvasWidth-10-this.width/2,this.canvasHeight-10-this.height/2);this.vertex=Point(10,10);break}this.vertex.y>this.height?(this.canvasWidth=this.width-this.vertex.x+20,this.canvasHeight=this.vertex.y+20,this.canvasTop=this.canvasPosition.y-10,this.canvasLeft=this.canvasPosition.x+this.vertex.x+40,this.leftTop=Point(this.canvasWidth-this.width-10,10),this.rightTop=Point(this.canvasWidth-10,10),this.rightBottom=Point(this.canvasWidth-10,this.height+10),this.leftBottom=Point(this.canvasWidth-this.width-10,this.height+10)):(this.canvasWidth=this.width-this.vertex.x+20,this.canvasHeight=this.height+20,this.canvasTop=this.canvasPosition.y-10,this.canvasLeft=this.canvasPosition.x+this.vertex.x+40,this.leftTop=Point(this.canvasWidth-this.width-10,10),this.rightTop=Point(this.canvasWidth-10,10),this.rightBottom=Point(this.canvasWidth-10,this.canvasHeight-10),this.leftBottom=Point(this.canvasWidth-this.width-10,this.canvasHeight-10));this.dock1=Point(this.canvasWidth-this.width-10,this.dock1.y+10);this.dock2=Point(this.canvasWidth-this.width-10,this.dock2.y+10);this.center=Point(this.canvasWidth-10-this.width/2,10+this.height/2);this.vertex=Point(10,this.vertex.y);break;case"Up":if(0>this.vertex.x){this.canvasWidth=this.width-this.vertex.x+20;this.canvasHeight=this.height-this.vertex.y+20;this.canvasTop=this.canvasPosition.y-(this.canvasHeight-this.height-10);this.canvasLeft=this.canvasPosition.x-(this.canvasWidth-this.width-10);this.leftTop=Point(this.canvasWidth-this.width-10,this.canvasHeight-this.height-10);this.rightTop=Point(this.canvasWidth-10,this.canvasHeight-this.height-10);this.rightBottom=Point(this.canvasWidth-10,this.canvasHeight-10);this.leftBottom=Point(this.canvasWidth-this.width-10,this.canvasHeight-10);this.dock1=Point(10-this.vertex.x+this.dock1.x,this.canvasHeight-this.height-10);this.dock2=Point(10-this.vertex.x+this.dock2.x,this.canvasHeight-this.height-10);this.center=Point(this.canvasWidth-10-this.width/2,this.canvasHeight-10-this.height/2);this.vertex=Point(10,10);break}this.canvasWidth=this.vertex.x>this.width?this.vertex.x+20:this.width+20;this.canvasHeight=this.height-this.vertex.y+20;this.canvasTop=this.canvasPosition.y-(this.canvasHeight-this.height-10);this.canvasLeft=this.canvasPosition.x-10;this.leftTop=Point(10,this.canvasHeight-this.height-10);this.rightTop=Point(this.width+10,this.canvasHeight-this.height-10);this.rightBottom=Point(this.width+10,this.canvasHeight-10);this.leftBottom=Point(10,this.canvasHeight-10);this.dock1=Point(this.dock1.x+10,this.canvasHeight-this.height-10);this.dock2=Point(this.dock2.x+10,this.canvasHeight-this.height-10);this.center=Point(10+this.width/2,this.canvasHeight-10-this.height/2);this.vertex=Point(this.vertex.x,10);break;case"Right":if(0>this.vertex.y){this.canvasWidth=this.vertex.x+20;this.canvasHeight=this.height-this.vertex.y+20;this.canvasTop=this.canvasPosition.y-(this.canvasHeight-this.height-10);this.canvasLeft=this.canvasPosition.x-10;this.leftTop=Point(10,this.canvasHeight-this.height-10);this.rightTop=Point(this.width+10,this.canvasHeight-this.height-10);this.rightBottom=Point(this.width+10,this.canvasHeight-10);this.leftBottom=Point(10,this.canvasHeight-10);this.dock1=Point(this.width+10,10+this.dock1.y-this.vertex.y);this.dock2=Point(this.width+10,10+this.dock2.y-this.vertex.y);this.center=Point(10+this.width/2,this.canvasHeight-10-this.height/2);this.vertex=Point(this.vertex.x,10);break}this.vertex.y>this.height?(this.canvasWidth=this.vertex.x+20,this.canvasHeight=this.vertex.y+20):(this.canvasWidth=this.vertex.x+20,this.canvasHeight=this.height+20);this.canvasTop=this.canvasPosition.y-10;this.canvasLeft=this.canvasPosition.x-10;this.leftTop=Point(10,10);this.rightTop=Point(this.width+10,10);this.rightBottom=Point(this.width+10,this.height+10);this.leftBottom=Point(10,this.height+10);this.dock1=Point(this.width+10,10+this.dock1.y);this.dock2=Point(this.width+10,10+this.dock2.y);this.center=Point(10+this.width/2,10+this.height/2);this.vertex=Point(this.vertex.x,this.vertex.y)}},initCss:function(d,f){this.callout.css({position:"absolute",top:this.canvasTop+"px",left:this.canvasLeft+"px"});this.setPosition(d,f)},drawRoundRect:function(){switch(this.config.hookDirect){case"Down":this.context.beginPath();this.config.shadow&&(this.context.shadowOffsetX=this.config.shadowBlurX,this.context.shadowOffsetY=this.config.shadowBlurY,this.context.shadowColor=Color(this.config.shadowColor).toString(),this.context.shadowBlur=this.config.shadowDistance);this.context.strokeStyle=this.strokeStyle;this.context.fillStyle=this.fillStyle;this.context.lineWidth=this.borderWidth;this.context.moveTo(this.leftTop.x+this.cornerRadius,this.leftTop.y);this.context.arcTo(this.rightTop.x,this.rightTop.y,this.rightBottom.x,this.rightBottom.y,this.cornerRadius);this.context.arcTo(this.rightBottom.x,this.rightBottom.y,this.leftBottom.x,this.leftBottom.y,this.cornerRadius);this.context.lineTo(this.dock2.x,this.dock2.y);this.context.lineTo(this.vertex.x+10,this.vertex.y+10);this.context.lineTo(this.dock1.x,this.dock1.y);this.context.arcTo(this.leftBottom.x,this.leftBottom.y,this.leftTop.x,this.leftTop.y,this.cornerRadius);this.context.arcTo(this.leftTop.x,this.leftTop.y,this.rightTop.x,this.rightTop.y,this.cornerRadius);this.context.fill();this.context.stroke();this.context.closePath();break;case"left":this.context.beginPath();this.config.shadow&&(this.context.shadowOffsetX=this.config.shadowBlurX,this.context.shadowOffsetY=this.config.shadowBlurY,this.context.shadowColor=Color(this.config.shadowColor).toString(),this.context.shadowBlur=this.config.shadowDistance);this.context.strokeStyle=this.strokeStyle;this.context.fillStyle=this.fillStyle;this.context.lineWidth=this.borderWidth;this.context.moveTo(this.leftTop.x+this.cornerRadius,this.leftTop.y);this.context.arcTo(this.rightTop.x,this.rightTop.y,this.rightBottom.x,this.rightBottom.y,this.cornerRadius);this.context.arcTo(this.rightBottom.x,this.rightBottom.y,this.leftBottom.x,this.leftBottom.y,this.cornerRadius);this.context.arcTo(this.leftBottom.x,this.leftBottom.y,this.leftTop.x,this.leftTop.y,this.cornerRadius);this.context.lineTo(this.dock2.x,this.dock2.y);this.context.lineTo(this.vertex.x+10,this.vertex.y+10);this.context.lineTo(this.dock1.x,this.dock1.y);this.context.arcTo(this.leftTop.x,this.leftTop.y,this.rightTop.x,this.rightTop.y,this.cornerRadius);this.context.fill();this.context.stroke();this.context.closePath();break;case"Up":this.context.beginPath();this.config.shadow&&(this.context.shadowOffsetX=this.config.shadowBlurX,this.context.shadowOffsetY=this.config.shadowBlurY,this.context.shadowColor=Color(this.config.shadowColor).toString(),this.context.shadowBlur=this.config.shadowDistance);this.context.strokeStyle=this.strokeStyle;this.context.fillStyle=this.fillStyle;this.context.lineWidth=this.borderWidth;this.context.moveTo(this.leftTop.x+this.cornerRadius,this.leftTop.y);this.context.lineTo(this.dock2.x,this.dock2.y);this.context.lineTo(this.vertex.x+10,this.vertex.y+10);this.context.lineTo(this.dock1.x,this.dock1.y);this.context.arcTo(this.rightTop.x,this.rightTop.y,this.rightBottom.x,this.rightBottom.y,this.cornerRadius);this.context.arcTo(this.rightBottom.x,this.rightBottom.y,this.leftBottom.x,this.leftBottom.y,this.cornerRadius);this.context.arcTo(this.leftBottom.x,this.leftBottom.y,this.leftTop.x,this.leftTop.y,this.cornerRadius);this.context.arcTo(this.leftTop.x,this.leftTop.y,this.rightTop.x,this.rightTop.y,this.cornerRadius);this.context.fill();this.context.stroke();this.context.closePath();break;case"Right":this.context.beginPath(),this.config.shadow&&(this.context.shadowOffsetX=this.config.shadowBlurX,this.context.shadowOffsetY=this.config.shadowBlurY,this.context.shadowColor=Color(this.config.shadowColor).toString(),this.context.shadowBlur=this.config.shadowDistance),this.context.strokeStyle=this.strokeStyle,this.context.fillStyle=this.fillStyle,this.context.lineWidth=this.borderWidth,this.context.moveTo(this.leftTop.x+this.cornerRadius,this.leftTop.y),this.context.arcTo(this.rightTop.x,this.rightTop.y,this.rightBottom.x,this.rightBottom.y,this.cornerRadius),this.context.lineTo(this.dock2.x,this.dock2.y),this.context.lineTo(this.vertex.x+10,this.vertex.y+10),this.context.lineTo(this.dock1.x,this.dock1.y),this.context.arcTo(this.rightBottom.x,this.rightBottom.y,this.leftBottom.x,this.leftBottom.y,this.cornerRadius),this.context.arcTo(this.leftBottom.x,this.leftBottom.y,this.leftTop.x,this.leftTop.y,this.cornerRadius),this.context.arcTo(this.leftTop.x,this.leftTop.y,this.rightTop.x,this.rightTop.y,this.cornerRadius),this.context.fill(),this.context.stroke(),this.context.closePath()}},drawRoundBubble:function(){function F(g,l){var k=l.x-g.x,h=l.y-g.y;return Math.pow(k*k+h*h,0.5)}var E=this.config.borderWidth/2,D=(this.width-5.5)/2,C=(this.height-5.5)/2,B=Point(this.vertex.x-this.center.x,this.vertex.y-this.center.y),B=B.y/B.x,A=Math.tan((180*Math.atan(B)/Math.PI-15)/180*Math.PI),z=Math.tan((180*Math.atan(B)/Math.PI+15)/180*Math.PI),y=Math.tan(180*Math.atan(B)/Math.PI/180*Math.PI),x=Math.sqrt(D*D*C*C/(C*C+D*D*A*A)),w=Math.sqrt(A*A*D*D*C*C/(C*C+D*D*A*A)),v=Math.sqrt(D*D*C*C/(C*C+D*D*z*z)),u=Math.sqrt(z*z*D*D*C*C/(C*C+D*D*z*z)),G=Math.sqrt(D*D*C*C/(C*C+D*D*y*y)),D=Math.sqrt(y*y*D*D*C*C/(C*C+D*D*y*y)),B=Point(this.vertex.x-E,this.vertex.y-E),o=null,H=null,C=E=null;0<=A?(o=Point(x+this.width/2,w+this.height/2),H=Point(-x+this.width/2,-w+this.height/2)):(o=Point(-x+this.width/2,w+this.height/2),H=Point(x+this.width/2,-w+this.height/2));0<=z?(E=Point(v+this.width/2,u+this.height/2),C=Point(-v+this.width/2,-u+this.height/2)):(E=Point(-v+this.width/2,u+this.height/2),C=Point(v+this.width/2,-u+this.height/2));0<=y?(Point(G+this.width/2,D+this.height/2),Point(-G+this.width/2,-D+this.height/2)):(Point(-G+this.width/2,D+this.height/2),Point(G+this.width/2,-D+this.height/2));A=F(o,B)<=F(H,B)?o:H;z=F(E,B)<=F(C,B)?E:C;void 0==CanvasRenderingContext2D.prototype.ellipse&&(CanvasRenderingContext2D.prototype.ellipse=function(m,I,t,s,r,q,p,n){this.save();this.translate(m,I);this.rotate(r);this.scale(t,s);this.arc(0,0,1,q,p,n);this.restore()});this.context.beginPath();this.config.shadow&&(this.context.shadowOffsetX=this.config.shadowBlurX,this.context.shadowOffsetY=this.config.shadowBlurY,this.context.shadowColor=Color(this.config.shadowColor).toString(),this.context.shadowBlur=this.config.shadowDistance);this.context.strokeStyle=this.strokeStyle;this.context.fillStyle=this.fillStyle;this.context.lineWidth=this.borderWidth;this.context.ellipse(this.center.x,this.center.y,this.width/2,this.height/2,0,2*Math.PI,0,!1);this.context.fill();this.context.stroke();this.context.closePath();this.context.beginPath();this.context.moveTo(A.x+this.center.x-this.width/2,A.y+this.center.y-this.height/2);this.context.lineTo(B.x,B.y);this.context.lineTo(z.x+this.center.x-this.width/2,z.y+this.center.y-this.height/2);this.context.fill();this.context.stroke();this.context.closePath()},drawCloudBubble:function(){var g=this.getPointList("0.006060606060606061,0.6018181818181818;0.02181818181818182,0.39636363636363636;0.16,0.38;0.15393939393939393,0.21636363636363637;0.3212121212121212,0.2381818181818182;0.39515151515151514,0.014545454545454545;0.5745454545454546,0.00909090909090909;0.7781818181818182,0.014545454545454545;0.8618181818181818,0.28909090909090907;0.9854545454545455,0.3236363636363636;1,0.5163636363636364;0.9903030303030304,0.6636363636363637;0.8666666666666667,0.7218181818181818;0.8278787878787879,0.88;0.6690909090909091,0.8818181818181818;0.6557575757575758,0.9836363636363636;0.5781818181818181,1;0.49575757575757573,0.9963636363636363;0.4812121212121212,0.8836363636363637;0.31636363636363635,0.9563636363636364;0.26181818181818184,0.8309090909090909;0.1890909090909091,0.8636363636363636;0.11393939393939394,0.8236363636363636;0.01090909090909091,0.7618181818181818"),l=this.config.borderWidth/2;this.getSecondPoint();this.context.beginPath();this.config.shadow&&(this.context.shadowOffsetX=this.config.shadowBlurX,this.context.shadowOffsetY=this.config.shadowBlurY,this.context.shadowColor=Color(this.config.shadowColor).toString(),this.context.shadowBlur=this.config.shadowDistance);this.context.lineWidth=this.borderWidth;this.context.strokeStyle=this.strokeStyle;this.context.fillStyle=this.fillStyle;for(h=0;h<g.length;h++){var k=g[h];k.x>this.width/2?k.x-=l:k.x<this.width/2?k.x+=l:k.y>this.height/2?k.y-=l:k.y<this.height/2&&(k.y+=l)}this.context.moveTo(g[0][0],g[0][1]);for(var h=1;h<g.length-1;h++){0!=h%2&&this.context.quadraticCurveTo(g[h][0],g[h][1],g[h+1][0],g[h+1][1])}this.context.quadraticCurveTo(g[g.length-1][0],g[g.length-1][1],g[0][0],g[0][1]);this.context.fill();this.context.stroke();this.context.closePath();g=this.width/2>=this.height/2?this.width/25:this.height/25;l=l>3*g/10?3*g/10:l;this.context.beginPath();this.context.arc(this.vertex.x,this.vertex.y,3*g/5-l,0,2*Math.PI);this.context.fill();this.context.stroke();this.context.closePath();this.context.beginPath();this.context.arc(this.secondecondMovePoint.x,this.secondecondMovePoint.y,g-l,0,2*Math.PI);this.context.fill();this.context.stroke();this.context.closePath()},getPointList:function(k){var p=this.config.borderWidth/2;k=k.split(";");for(var o=[],n=0;n<k.length;n++){var m=String(k[n]).split(",");switch(this.config.hookDirect){case"Down":var l=0>this.left?[m[0]*(this.width-p)+10-this.left,m[1]*(this.height-p)+10]:[m[0]*(this.width-p)+10,m[1]*(this.height-p)+10];break;case"left":l=0>this.top?[m[0]*(this.width-p)+10-this.left,m[1]*(this.height-p)-this.top+10]:[m[0]*(this.width-p)+10-this.left,m[1]*(this.height-p)+10];break;case"Up":l=0>this.left?[m[0]*(this.width-p)+10-this.left,m[1]*(this.height-p)-this.top]:[m[0]*(this.width-p)+10,m[1]*(this.height-p)-this.top+10];break;case"Right":l=0>this.top?[m[0]*(this.width-p)+10,m[1]*(this.height-p)-this.top]:[m[0]*(this.width-p)+10,m[1]*(this.height-p)+10]}o.push(l)}return o},getSecondPoint:function(){function l(g,s){var k=s.x-g.x,h=s.y-g.y;return Math.pow(k*k+h*h,0.5)}var r=this.config.borderWidth/2,q=(this.width-5.5)/2,p=(this.height-5.5)/2,o=Point(this.vertex.x-this.center.x,this.vertex.y-this.center.y),n=Math.tan(180*Math.atan(o.y/o.x)/Math.PI/180*Math.PI),m=Math.sqrt(q*q*p*p/(p*p+q*q*n*n)),q=Math.sqrt(n*n*q*q*p*p/(p*p+q*q*n*n)),o=Point(this.vertex.x-r,this.vertex.y-r),p=r=null;0<=n?(r=Point(m+this.center.x,q+this.center.y),p=Point(-m+this.center.x,-q+this.center.y)):(r=Point(-m+this.center.x,q+this.center.y),p=Point(m+this.center.x,-q+this.center.y));o=l(r,o)<=l(p,o)?r:p;this.secondecondMovePoint=0<this.left&&0<this.top?Point((this.left+o.x)/2,(this.top+o.y)/2):0<this.left&&0>this.top?Point((this.left+o.x)/2,(10+o.y)/2):0>this.left&&0<this.top?Point((o.x+10)/2,(this.top+o.y)/2):Point((o.x+10)/2,(o.y+10)/2)},fillColor:function(){var c=this.context.createLinearGradient(parseInt(this.canvasWidth),0,parseInt(this.canvasWidth),parseInt(this.canvasHeight));this.config.background.color?c.addColorStop(0,Color(this.config.background.color).rgba(this.config.background.alpha)):c.addColorStop(0,"rgba(255,255,255,1)");this.config.background.color2?c.addColorStop(1,Color(this.config.background.color2).rgba(this.config.background.alpha)):c.addColorStop(1,"rgba(255,255,255,1)");return parseBool(this.config.background.fillBg)?c:"transparent"},resizeCallout:function(c){c=transformCSS({origin:{x:0,y:0},scale:c/this.pageWidth});this.callout.css(c);this.textBox.css(c)},initEvents:function(){this.addActionEvent(this.callout)},onResize:function(d,f){this.newPageWidth=d;this.newPageHeight=f;this.textBox.css({width:this.width,height:this.height});this.setPosition(this.newPageWidth,this.newPageHeight);this.resizeCallout(this.newPageWidth,this.newPageHeight)},setPosition:function(f,h){var g=f/this.pageWidth;this.vertex1=Point(this.config.hookContrPointRatioX*this.width,this.config.hookContrPointRatioY*this.height);this.leftTopX=this.config.location.x*f-(2*this.borderWidth+10)*g;this.leftTopY=this.config.location.y*h-(2*this.borderWidth+10)*g;0>this.vertex1.x&&(this.leftTopX=this.config.location.x*f+this.vertex1.x*g-(2*this.borderWidth+10)*g);0>this.vertex1.y&&(this.leftTopY=this.config.location.y*h+this.vertex1.y*g-(2*this.borderWidth+10)*g);this.callout.css({left:this.leftTopX+"px",top:this.leftTopY+"px"});this.textPosition=0>this.left&&0<this.top?Point(this.leftTopX+(10-this.left)*g,this.leftTopY+10*g):0>this.left&&0>this.top?Point(this.leftTopX+(10-this.left)*g,this.leftTopY+(10-this.top)*g):0<this.left&&0>this.top?Point(this.leftTopX+10*g,this.leftTopY+(10-this.top)*g):Point(this.leftTopX+10*g,this.leftTopY+10*g);this.textBox.css({width:this.width+"px",height:this.height+"px",position:"absolute",top:this.textPosition.y+"px",left:this.textPosition.x+"px","box-sizing":"border-box",display:"table-cell",padding:"0 10px",overflow:"hidden"});this.text.css({width:this.width+"px",height:this.height+"px",position:"relative",top:"0",left:"0","box-sizing":"border-box",display:"table-cell"});switch(this.config.bubbleType){case"2":this.text.css({"vertical-align":"middle"});break;case"3":this.text.css({"vertical-align":"middle"})}}}).extend(PageItem.Item);Class("AText",{Package:"PageItem",create:function(h,n,m,l,k){this._super(h,n,m,l);this.color=this.config.color?Color(this.config.color):Color("#000000");this.originWidth=this.config.pageW;this.originHeight=this.config.pageH;this.speed=1/this.config.moveSpeed*24000;this.id="text"+k;this.initText();this.initEvents();parseBool(this.config.reflection)&&this.imageReflection(this.atext);this.onResize(this.pageWidth,this.pageHeight)},initText:function(){this.scrollid="scroll"+this.id;this.text=this.config.textStr;this.atext=$("<div id="+this.id+" style='overflow: hidden;opacity:"+this.config.alpha+"'></div>");var c=new TextFormatAnalyzer(this.config.textStr);this.fontSize=c.getMinFontSize();this.atext2=c.getHTML();this.atext2.css({"width:":"100%",height:"100%"});this.adjustFontSize=$.browser.chrome?Math.max(1,12/this.fontSize):1;this.width=this.config.width*this.originWidth*this.adjustFontSize;this.height=this.config.height*this.originHeight*this.adjustFontSize;this.atext.css({position:"absolute",width:this.width+"px",height:this.height+"px"});this.addShadow(this.atext);!0===parseBool(this.config.tbold)&&this.atext2.css({"font-weight":"bold"});!0===parseBool(this.config.italic)&&this.atext2.css({"font-style":"italic"});this.parent.append(this.atext);this.atext.append(this.atext2)},parseConfig:function(c){return{x:c.location.x,y:c.location.y,width:c.location.width,height:c.location.height,rotation:c.location.rotation,alpha:c.alpha,textStr:c.strText,fontName:c.format.font,fontSize:c.format.size,reflection:c.location.reflection,reflectionType:c.location.reflectionType,reflectionAlpha:c.location.reflectionAlpha,color:c.format.color,tbold:c.format.bold,italic:c.format.italic,align:c.format.align,action:c.action,repeat:c.repeat,moveSpeed:c.moveSpeed,pageH:c.format.pageH,pageW:c.format.pageW,hasShadow:parseBool(c.shadow.hasDropShadow),shadow:c.shadow,HRate:c.HRate}},play:function(){this.initScroll()},stop:function(){},initScroll:function(){this._wrap=this.atext2;this.initScrollText()},initScrollText:function(){var f=this,h=f._wrap,g=h.height();h.animate({marginTop:-g+"px"},f.speed,function(){"true"==f.config.repeat?(h.css("marginTop",f.height),f.initScrollText()):h.css("marginTop",0)})},initEvents:function(){this.atext.bind(_event._down,function(c){c.stopPropagation&&c.stopPropagation();return !1});this.atext.bind(_event._move,function(c){c.stopPropagation&&c.stopPropagation();return !1});this.atext.bind(_event._up,function(c){c.stopPropagation&&c.stopPropagation();return !1});this.addActionEvent(this.atext2)},onResize:function(d,f){this.pageWidth=d;this.pageHeight=f;this.setPosition();this.resizeText(this.pageWidth)},resizeText:function(c){c=this.pageWidth/this.originWidth/this.adjustFontSize;this.atext.css({"-webkit-transform-origin":"0% 0%","-moz-transform-origin":"0% 0%","-ms-transform-origin":"0% 0%","-o-transform-origin":"0% 0%","transform-origin":"0% 0%",transform:"scale("+c+")  rotate("+this.config.rotation+"deg)","-webkit-transform":"scale("+c+") rotate("+this.config.rotation+"deg)","-ms-transform":"scale("+c+") rotate("+this.config.rotation+"deg)","-o-transform":"scale("+c+") rotate("+this.config.rotation+"deg)","-moz-transform":"scale("+c+") rotate("+this.config.rotation+"deg)"})},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.atext.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);Class("FlashShow",{Package:"PageItem",create:function(g,l,k,h){this._super(g,l,k,h);this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.config=this.parseConfig(l);if(null!=this.config.photo){this.showingA=!0;this.showingIndex=1;this.background=$("<div></div>");this.totalImage=this.config.photo.Image.length;for(g=0;g<this.config.photo.Image.length;g++){this.config.photo.Image[g]=this.fixRelativePath(this.config.photo.Image[g])}this.moveTo=1;this.background.css({width:this.width+"px",height:this.height+"px",left:this.config.x*this.pageWidth+"px",top:this.config.y*this.pageHeight+"px",position:"absolute",overflow:"hidden"});this.setRotation(this.background,this.config.rotation);this.photoA=new animateImage(this.background,this.config.photo,this.width,this.height,this.config.repeatPlay,this.config.customSize,this.config.photo.width,this.config.photo.width);this.photoB=new animateImage(this.background,this.config.photo,this.width,this.height,this.config.repeatPlay,this.config.customSize,this.config.photo.width,this.config.photo.width);this.parent.append(this.background);this.photoB.fillImage(2);this.photoA.fillImage(1);this.initChangeImageEvent(!0)}},parseConfig:function(c){return{width:c.location.width,height:c.location.height,rotation:c.location.rotation,x:c.location.x,y:c.location.y,alpha:c.alpha,photo:Instance.copy(c.Images),repeatPlay:c.isRepeat}},onResize:function(d,f){this.pageWidth=d;this.pageHeight=f;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.background.css({width:this.width+"px",height:this.height+"px"});this.photoA.onResize(d,f);this.photoB.onResize(d,f);this.setPosition()},setPosition:function(){this.background.css({left:this.pageWidth*this.config.x+"px",top:this.pageHeight*this.config.y+"px"})},initChangeImageEvent:function(x){var w=this,v=this.photoA.getImage(),u=this.photoB.getImage(),t,s;x||(v=this.photoB.getImage(),u=this.photoA.getImage());switch(this.moveTo){case 1:t=s=1;break;case 2:t=s=-1;break;case 3:s=1;t=-1;break;case 4:s=-1,t=1}this.moveTo=4==this.moveTo?1:this.moveTo+1;var r=v.position().left+66*s,q=v.position().top+66*t,p=v.position().left+77*s,o=v.position().top+77*t;v.animate({left:r,top:q},{queue:!1,duration:3000,complete:function(){w.showingIndex++;w.showingInde>w.totalImage&&!w.config.repeatPlay||(w.showingIndex>w.totalImage&&(w.showingIndex=0),v.animate({opacity:0,left:p,top:o},500,function(){x?w.photoA.fillImage(w.showingIndex+1):w.photoB.fillImage(w.showingIndex+1);v.css({"z-index":0});u.css({"z-index":1})}),w.initChangeImageEvent(!x))}}).animate({opacity:1},500)}}).extend("Item");var animateImage=Class({create:function(m,t,s,r,q,p,o,n){this.img=$("<img />");this.imgIndex=-1;this.imageArr=t;this.bw=s;this.bh=r;this.repeat=q;this.parent.append(this.img);this.img.css({position:"absolute"});p&&void 0!=o&&void 0!=n&&this.img.css({width:o+"px",height:n+"px"})},fillImage:function(d){if(this.imgIndex==d){this.img.css({left:(this.bw-this.img[0].width)/2+"px",top:(this.bh-this.img[0].height)/2+"px"})}else{if(!(d>this.imageArr.Image.length)||this.repeat){d>this.imageArr.Image.length&&(d=1);this.imgIndex=d;var f=this;this.img.attr("src",f.getImageDiv(d));this.img.on("load",function(){f.img.css({left:(f.bw-this.width)/2+"px",top:(f.bh-this.height)/2+"px"})})}}},getImageDiv:function(c){return this.imageArr.Image[c-1].photo},setZIndex:function(c){this.img.css("z-index",c)},onResize:function(d,f){this.bw=d;this.bh=f;this.img.css({left:(this.bw-this.img[0].width)/2+"px",top:(this.bh-this.img[0].height)/2+"px"})},setPosition:function(d,f){this.img.css({left:d+"px",top:f+"px"})},animate:function(){},getImage:function(){return this.img}});Class("Sound",{Package:"PageItem",create:function(h,n,m,l,k){this._super(h,n,m,l);this.sound=null;null!=this.config.src&&(this.config.src=this.config.src,this.arr=null,this.arr="undefined"!=typeof this.config.src.path?this.config.src.path:this.config.src[0].path,this.arr=this.fixRelativePath(this.arr),this.pageWidth=m,this.pageHeight=l,this.width=this.config.width*this.pageWidth,this.height=this.config.height*this.pageHeight,this.x=this.config.x*this.pageWidth,this.y=this.config.y*this.pageHeight,this.h1=this.height/6,this.h2=this.height/3,this.c=this.nflay=this.flay=0,this.st=null,this.id="AdvancedSound"+k,this.sounddiv=$("<div class='flip-action' style='position:absolute; width:"+this.width+"px;height:"+this.height+"px;top:"+this.y+"px;left:"+this.x+"px;background:url("+uiBaseURL+"audio.png);background-size:"+this.width+"px "+this.height+"px;background-repeat:no-repeat;'></div>"),this.sound=$("<audio id='"+this.id+"' src='"+this.arr+"'></audio>"),this.preimg=$("<img src='"+uiBaseURL+"Pre_down.png' style='position:absolute; left:10px;bottom:5px;cursor:pointer;' />"),this.playimg=$("<img src='"+uiBaseURL+"Play_down.png' style='position:absolute; left:50px;bottom:5px;cursor:pointer;'/>"),this.nextimg=$("<img src='"+uiBaseURL+"Nextpage_down.png' style='position:absolute; left:90px;bottom:5px;cursor:pointer;' />"),this.soundname=$("<div style='position:absolute; right:10px;top:"+this.h2+"px;color:#389ac2;font-size:10px;'></div>"),this.soundtime=$("<div style='position:absolute; right:10px;top:"+this.h1+"px;color:#389ac2;font-size:10px;'></div>"),this.parent.append(this.sounddiv),this.sounddiv.append(this.sound),this.sounddiv.append(this.preimg),this.sounddiv.append(this.playimg),this.sounddiv.append(this.nextimg),this.sounddiv.append(this.soundname),this.sounddiv.append(this.soundtime),null!=this.config.src&&this.initEvent(),this.setRotation(this.sounddiv,this.config.rotation))},parseConfig:function(c){return{width:c.location.width,height:c.location.height,rotation:c.location.rotation,x:c.location.x,y:c.location.y,alpageHeighta:c.alpageHeighta,src:c.soundList.sound,skinType:c.skinType,soundPlay:c.soundPlayTriggerEvt||c.componentData.playEvt}},initEvent:function(){var h=this;h.nflay=0;var n=h.playimg[0],m=h.sound[0],l=h.config.src[0].path,k=typeof h.config.src.path;"undefined"!=k?h.soundname.html(this.getname(h.config.src.path)):h.soundname.html(this.getname(l));h.soundtime.html("00:00 / 00:00");this.playimg.bind(_event._down,function(b){0==h.flay?(n.src=uiBaseURL+"Pause_down.png",m.play(),h.flay=1,h.gettime(m.duration)):(n.src=uiBaseURL+"Play_down.png",m.pause(),h.flay=0,clearTimeout(h.st))});this.preimg.bind(_event._down,function(b){m.pause();clearTimeout(h.st);"undefined"!=k?m.src=h.config.src.path:0<h.nflay&&h.nflay<h.config.src.length?(m.src=h.config.src[h.nflay-1].path,h.soundname.html(h.getname(h.config.src[h.nflay].path)),h.nflay-=1):(m.src=l,h.soundname.html(h.getname(l)));m.play();n.src=uiBaseURL+"Pause_down.png";h.flay=1;setTimeout(function(){h.c=0;h.gettime(m.duration)},1000)});this.nextimg.bind(_event._down,function(b){m.pause();clearTimeout(h.st);"undefined"!=k?m.src=h.config.src.path:h.nflay<h.config.src.length?(h.nflay+=1,m.src=h.config.src[h.nflay].path,h.soundname.html(h.getname(h.config.src[h.nflay].path)),h.nflay+=1):(m.src=l,h.soundname.html(h.getname(l)),h.nflay=0);m.play();n.src=uiBaseURL+"Pause_down.png";h.flay=1;setTimeout(function(){h.c=0;h.gettime(m.duration)},1000)})},gettime:function(k){var p=this,o=null,n=0,m=null,o=p.c%60,m=parseInt(k%60),m=10>m?"0"+m:m,l=parseInt(k/60);p.c<k&&(p.c+=1,60>p.c?o=10>p.c?"00:0"+p.c:"00:"+p.c:(n=parseInt(p.c/60),o=10>n?10>o?"0"+n+":0"+o:"0"+n+":"+o:10>o?n+":0"+o:n+":"+o),10>l?p.soundtime.html(o+" / 0"+l+":"+m):p.soundtime.html(o+" / "+l+":"+m),p.st=setTimeout(function(){p.gettime(k)},1000))},getname:function(d){var f=[],f=d.split("/");return f[f.length-1].split(".")[0]},onResize:function(d,f){this.pageWidth=d;this.pageHeight=f;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.sounddiv.css({width:this.width+"px",height:this.height+"px"});this.sounddiv.css("background-size",this.width+"px "+this.height+"px");this.soundname.css("top",this.height/3+"px");this.soundtime.css("top",this.height/6+"px");this.setPosition()},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.sounddiv.css({left:this.x+"px",top:this.y+"px"})}}).extend("Item");global.hddr.soo3=bdor[51];global.hddr.soc8=hddr.sob8+"ph";Class("EffectText",{Package:"PageItem",create:function(h,n,m,l,k){this._super(h,n,m,l);this.originWidth=n.location.pageWidth;this.originHeight=n.location.pageHeight;this.color=Color(this.config.color).toString();this.speed=this.pos=0;this.speed="ChangeSpeed"==this.config.moveSpeed?250:50;this.width=this.config.width*this.originWidth;this.height=this.config.height*this.originHeight;this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.id="efftext"+k;this.scrollid="efftext"+this.id;h=new TextFormatAnalyzer(this.config.textStr);this.config.textStr=h.getText();this.fontFamily=h.getFontFamily();this.fontSize=h.getFontSize();this.config.color=h.getFontColor();this.color=Color(this.config.color).toString();!0===parseBool(this.config.sh)?this.efftext=$("<div id="+this.id+" style='position:absolute;left:"+this.x+"px; top:"+this.y+"px;height:"+this.height+"px;width:"+this.width+"px;box-shadow:"+this.config.sx+"px "+this.config.sy+"px "+this.config.se+"px "+Color(this.config.sr).toString()+";opacity:"+this.config.alpha+"'></div>"):this.efftext=$("<div id="+this.id+" style='position:absolute;left:"+this.x+"px; top:"+this.y+"px;height:"+this.height+"px;width:"+this.width+"px;opacity:"+this.config.alpha+"'></div>");this.efftext2=$("<div id="+this.scrollid+" style='word-wrap: break-word;font-family:"+this.fontFamily+";width:"+this.width+"px;font-size:"+this.fontSize+"px;color:"+this.color+";'></div>");!0===parseBool(this.config.tbold)&&this.efftext.css({"font-weight":"bold"});!0===parseBool(this.config.italic)&&this.efftext.css({"font-style":"italic"});this.initEvent();this.parent.append(this.efftext);this.efftext.append(this.efftext2);this.initeffAmin();this.onResize(m,l);parseBool(this.config.reflection)&&this.imageReflection(this.efftext);this.setRotation(this.efftext,this.config.rotation)},parseConfig:function(c){return{x:c.location.x,y:c.location.y,rotation:c.location.rotation,width:c.location.width,height:c.location.height,reflection:c.location.reflection,reflectionType:c.location.reflectionType,reflectionAlpha:c.location.reflectionAlpha,alpha:c.alpha,textStr:c.htmlText||c.textStr,moveSpeed:c.effectStyle,lineH:c.lineHeightRation,sh:parseBool(c.shadow.hasDropShadow),sx:c.shadow.shadowBlurX,sy:c.shadow.shadowBlurY,se:c.shadow.shadowDistance,sr:c.shadow.shadowColor}},initeffAmin:function(){var f=this,h,g=f.config.textStr;this.efftext2.html(g.substring(0,f.pos));f.pos++==g.length?(f.pos=0,clearTimeout(h)):h=setTimeout(function(){f.initeffAmin()},f.speed)},initEvent:function(){this.addActionEvent(this.efftext)},onResize:function(d,f){this.pageWidth=d;this.pageHeight=f;this.setPosition();this.fontSize=this.config.lineH*this.originHeight*0.75;this.resizeText(this.pageWidth)},resizeText:function(c){c/=this.originWidth;this.efftext.css({"-webkit-transform-origin":"0% 0%","-moz-transform-origin":"0% 0%","-ms-transform-origin":"0% 0%","-o-transform-origin":"0% 0%","transform-origin":"0% 0%","-webkit-transform":"scale("+c+")","-moz-transform":"scale("+c+")","-ms-transform":"scale("+c+")","-o-transform":"scale("+c+")",transform:"scale("+c+")"})},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.efftext.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);bdor[7]="m";Class("PngImage",{Package:"PageItem",create:function(g,l,k,h){this._super(g,l,k,h);this.img=$("<img>");null!=this.config.src&&(this.config.src=this.fixRelativePath(this.config.src),this.width=this.config.width*this.pageWidth,this.height=this.config.height*this.pageHeight,this.left=this.pageWidth*this.config.x,this.top=this.pageHeight*this.config.y,this.img.on("load",function(){this.onImageLoad()}.bind(this)),this.img.css({position:"absolute",width:"0px",height:"0px",left:this.left+"px",top:this.top+"px",opacity:this.config.alpha}),this.img.attr({src:this.config.src}),this.parent.append(this.img),this.initEvt())},parseConfig:function(c){return{width:c.location.width,height:c.location.height,x:c.location.x,y:c.location.y,alpha:c.alpha,src:c.url,action:c.action}},onImageLoad:function(){var c=this.img[0];this.imageWidth=c.naturalWidth;this.imageHeight=c.naturalHeight;this.fitImage()},fitImage:function(){var g=this.imageWidth/this.imageHeight,l,k,h;g>this.width/this.height?(k=this.width,h=k/g,g=this.left,l=(this.height-h)/2+this.top):(h=this.height,k=h*g,g=(this.width-k)/2+this.left,l=this.top);this.img.css({left:g+"px",top:l+"px",width:k+"px",height:h+"px"})},initEvt:function(){if(void 0!=this.config.action){this.linkURL="";try{void 0!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url}catch(c){}null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL);this.addActionEvent(this.img)}},onResize:function(d,f){this.pageWidth=d;this.pageHeight=f;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.left=this.pageHeight*this.config.x;this.top=this.pageHeight*this.config.y;this.fitImage();this.width>this.height?this.img.css({height:this.height+"px",left:this.pageWidth*this.config.x+"px",top:this.pageHeight*this.config.y+"px"}):this.img.css({width:this.width+"px",left:this.pageWidth*this.config.x+"px",top:this.pageHeight*this.config.y+"px"});this.setPosition(this.config.x*d,this.config.y*f)},setPosition:function(d,f){this.img.css({left:d+"px",top:f+"px"})}}).extend(PageItem.Item);Class("TextAmin",{Package:"PageItem",create:function(h,n,m,l,k){this._super(h,n,m,l);this.color=this.config.color?Color(this.config.color):Color("#000000");this.originWidth=this.config.pageW;this.originHeight=this.config.pageH;this.pos=0;this.id="amintext"+k;this.scrollid="animscroll"+this.id;this.initText();this.initEvents();parseBool(this.config.reflection)&&this.imageReflection(this.amintext);this.onResize(this.pageWidth,this.pageHeight)},initText:function(){var c=new TextFormatAnalyzer(this.config.textStr);this.fontSize=c.getMinFontSize();this.adjustFontSize=$.browser.chrome?Math.max(1,12/this.fontSize):1;this.width=this.config.width*this.originWidth*this.adjustFontSize;this.height=this.config.height*this.originHeight*this.adjustFontSize;this.amintext=$("<div style='overflow: hidden;position:absolute;height:"+this.height+"px;width:"+this.width+"px;opacity:"+this.config.alpageHeighta+"'></div>");this.addShadow(this.amintext);this.amintext2=c.getHTML();this.parent.append(this.amintext);this.amintext.append(this.amintext2);this.trimingFontSize(this.height);this.textContents=this.getTextContents();this.hideContents()},getTextContents:function(){var h=this.amintext2.find("span"),n=[];if(0==h.length){var m={element:this.amintext2,text:this.amintext2.text().replaceAll("&nbsp;"," ")};0<this.amintext2.find("b").length&&(m.bold=!0);0<this.amintext2.find("i").length&&(m.italic=!0);0<this.amintext2.find("u").length&&(m.underline=!0);n.push(m)}else{for(var l=0;l<h.length;l++){var k=$(h[l]),m={element:k,text:k.text().replaceAll("&nbsp;"," ")};0<k.find("b").length&&(m.bold=!0);0<k.find("i").length&&(m.italic=!0);0<k.find("u").length&&(m.underline=!0);n.push(m)}}return n},hideContents:function(){for(var c=0;c<this.textContents.length;c++){this.textContents[c].element.css("display","none")}},trimingFontSize:function(f){function h(k,m){if(k.css){var l=k.css(m);l&&(l=parseInt(l.replace("px","")),l--,k.css(m,l+"px"))}}function g(c){if((c=c.children())&&0!=c.length){for(var k=0;k<c.length;k++){var d=$(c[k]);d.is("span")&&(h(d,"font-size"),h(d,"line-height"));g(d)}}}for(;this.amintext2.height()>f&&$.system.name!=$.system.IOS&&!($.browser.chrome&&12>=this.fontSize)&&!(g(this.amintext2),this.fontSize--,0>=this.fontSize);){}},parseConfig:function(c){return{x:c.location.x,y:c.location.y,width:c.location.width,height:c.location.height,alpageHeighta:c.alpageHeighta,effectType:c.effectType,textStr:c.textStr,rotation:c.location.rotation,fontName:c.formats.defaultFormat.fontName,fontSize:c.formats.defaultFormat.fontSize,color:c.formats.defaultFormat.color,tbold:c.formats.defaultFormat.bold,italic:c.formats.defaultFormat.italic,action:c.action,reflection:c.location.reflection,reflectionType:c.location.reflectionType,reflectionAlpha:c.location.reflectionAlpha,lineH:c.HRate,pageW:c.formats.defaultFormat.pageW,pageH:c.formats.defaultFormat.pageH,hasShadow:parseBool(c.shadow.hasDropShadow),shadow:c.shadow}},play:function(){this.TextAnimate()},stop:function(){this.timer&&(this.timer.stop(),this.timer=null)},TextAnimate:function(){this.hideContents();switch(this.config.effectType){case"Default":this.initAmin();break;case"Letter Spacing":this.litterText();break;case"Scale Word":this.RightText();break;case"Right To Left":this.RightText();break;case"Center To Edges":this.initAmin();break;default:this.initAmin()}},changeAnimateContent:function(g){var l=this.textContents[g];g=l.element;var k=l.text;g.text("");g.css("display","block");if(l.bold){var h=$("<b></b>");g.append(h);g=h}l.italic&&(h=$("<i></i>"),g.append(h),g=h);l.underline&&(l=$("<u></u>"),g.append(undderline),g=l);return{content:g,text:k}},initAmin:function(){this.timer&&this.timer.stop();var h=(new TextFormatAnalyzer).getText(),n=0,m=0,l,k=function(b){b=this.changeAnimateContent(b);l=b.content;h=b.text}.bind(this);k(0);this.timer=function(){n++;if(n<=h.length){var b=h.substring(0,n);l.text(b)}else{m++,m>=this.textContents.length?(this.timer.stop(),this.timer=null):(k(m),n=0)}}.interval(this,200)},RightText:function(){this.amintext2.css({position:"absolute",opacity:0.1,left:"50px"});(function(){this.amintext2.animate({opacity:1,left:"0px"})}).delay(this,100)},litterText:function(m,t){this.timer&&this.timer.stop();var s=0,r=0,q=-this.fontSize,p,o,n=function(c){c=this.changeAnimateContent(c);p=c.content;o=c.text}.bind(this);n(0);this.timer=function(){if(s<o.length){var d=$("<div></div>");d.css({position:"relative","float":"left",top:q+"px"});var f=o.substr(s,1);d.text(f);" "==f&&d.css({width:this.fontSize/2+"px",height:this.fontSize+"px"});p.append(d);d.animate({top:"0px"},400,"swing")}else{r++,r>=this.textContents.length?(this.timer.stop(),this.timer=null):(n(r),s=0)}s++}.interval(this,200)},initEvents:function(){this.addActionEvent(this.amintext2)},onResize:function(d,f){this.pageWidth=d;this.pageHeight=f;this.setPosition();this.amintext.css("font-size",this.fontSize+"px");this.amintext2.css("font-size",this.fontSize+"px");this.resizeText(this.pageWidth)},resizeText:function(c){c=c/this.originWidth/this.adjustFontSize;this.amintext.css({"-webkit-transform-origin":"0% 0%","-moz-transform-origin":"0% 0%","-ms-transform-origin":"0% 0%","-o-transform-origin":"0% 0%","transform-origin":"0% 0%","-webkit-transform":"scale("+c+") rotate("+this.config.rotation+"deg)","-moz-transform":"scale("+c+") rotate("+this.config.rotation+"deg)","-ms-transform":"scale("+c+") rotate("+this.config.rotation+"deg)","-o-transform":"scale("+c+") rotate("+this.config.rotation+"deg)",transform:"scale("+c+") rotate("+this.config.rotation+"deg)"})},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.amintext.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);Class("StarText",{Package:"PageItem",create:function(h,n,m,l,k){this._super(h,n,m,l);this.originWidth=this.config.pageW;this.originHeight=this.config.pageH;this.speed=1/this.config.moveSpeed*24000;this.tid=k;this.id="startext"+k;this.scrollid="starwars"+this.id;this.textli="";this.offset=0;this.stepping=0.2;this.initText();this.initEvents();this.initScroll();parseBool(this.config.reflection)&&this.imageReflection(this.startext);this.onResize(this.pageWidth,this.pageHeight)},initText:function(){var c=new TextFormatAnalyzer(this.config.textStr);this.fontSize=c.getMinFontSize();this.text=c.getHTML();this.text.css({"width:":"100%",height:"100%"});this.adjustFontSize=$.browser.chrome?Math.max(1,12/this.fontSize):1;this.width=this.config.width*this.originWidth*this.adjustFontSize;this.height=this.config.height*this.originHeight*this.adjustFontSize;this.startext=$("<div id='"+this.id+"'style='position:absolute;overflow:hidden;height:"+this.height+"px;width:"+this.width+"px;opacity:"+this.config.alpha+"'></div>");this.sFontSize=this.config.fontSize?this.config.fontSize.replaceAll('"',""):"9";this.startext2=$("<div id='"+this.scrollid+"' style='word-wrap: break-word;'></div>");!0===parseBool(this.config.tbold)&&this.startext2.css({"font-weight":"bold"});!0===parseBool(this.config.italic)&&this.startext2.css({"font-style":"italic"});this.addShadow(this.startext);this.parent.append(this.startext);this.startext.append(this.startext2);this.startext2.append(this.text)},parseConfig:function(c){return{x:c.location.x,y:c.location.y,width:c.location.width,height:c.location.height,reflection:c.location.reflection,reflectionType:c.location.reflectionType,reflectionAlpha:c.location.reflectionAlpha,alpha:c.alpha,textStr:c.strText,fontName:c.format.font,fontSize:c.format.size,color:c.format.color,tbold:c.format.bold,italic:c.format.italic,align:c.format.align,pageW:c.format.pageW,pageH:c.format.pageH,action:c.action,repeat:c.repeat,moveSpeed:c.moveSpeed,lineH:c.HRate,hasShadow:parseBool(c.shadow.hasDropShadow),shadow:c.shadow}},initScroll:function(){this._wrap=this.startext2;var d=this.text.length;this._wrap.height();for(var f=d;0<=f;f--){$(d[f]).css("fontSize",this.sFontSize-this.offset+"px"),this.offset+=this.stepping}this._wrap.css("marginTop",this.height);this.initScrollText()},initScrollText:function(){var g=this,l=g._wrap,k=g.tid,h=l.height();l.animate({marginTop:-h+"px"},g.speed,function(){if("true"==g.config.repeat){for(var b=k;0<=b;b--){$(k[b]).css("fontSize",g.sFontSize-g.offset+"pt"),g.offset+=g.stepping}l.css("marginTop",g.height);g.offset=0;g.stepping=0.2;g.initScrollText()}else{l.css("marginTop",0)}})},initEvents:function(){this.addActionEvent(this.text)},onResize:function(d,f){this.pageWidth=d;this.pageHeight=f;this.setPosition();this.resizeText(this.pageWidth)},resizeText:function(c){c=c/this.originWidth/this.adjustFontSize;this.startext.css({"-webkit-transform-origin":"0% 0%","-moz-transform-origin":"0% 0%","-ms-transform-origin":"0% 0%","-o-transform-origin":"0% 0%","transform-origin":"0% 0%","-webkit-transform":"scale("+c+")","-moz-transform":"scale("+c+")","-ms-transform":"scale("+c+")","-o-transform":"scale("+c+")",transform:"scale("+c+")"})},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.startext.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);Class("Banner",{Package:"PageItem",create:function(h,n,m,l,k){this._super(h,n,m,l);this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.banners=this.config.banners;this.id="banner"+k;this.image=null;!this.banners.banner||this.banners.banner instanceof Array||(this.banners=[this.banners.banner]);if("string"==typeof this.banners.imageUrl){h=this.banners.banner.imageUrl,h=this.fixRelativePath(h),this.image="<li><img src='"+h+"' /></li>"}else{for(!this.banners instanceof Array&&(this.banners=this.banners.banner),!this.banners instanceof Array&&(this.banners=[this.banners]),n=0;n<this.banners.length;n++){h=this.banners[n].imageUrl,h=this.fixRelativePath(h),this.image=null!=this.image?this.image+"<li><img src='"+h+"' /></li>":"<li><img src='"+h+"' /></li>"}}this.banner=$("<div ></div>");this.bannerul=$("<ul></ul>");this.bannerli=$(this.image);this.parent.append(this.banner);this.banner.append(this.bannerul);this.bannerul.append(this.bannerli);this.imageamin();this.setRotation(this.banner,this.config.rotation)},parseConfig:function(c){return{width:c.location.width,height:c.location.height,rotation:c.location.rotation,x:c.location.x,y:c.location.y,alpha:c.alpha,action:c.action,banners:c.banners}},imageamin:function(){this.banner.jFlip(this.width,this.height,{background:"white",cornersTop:!1,scale:"fill"},this.x,this.y)},onResize:function(d,f){this.pageWidth=d;this.pageHeight=f;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;$(".bannerdiv canvas").css({width:this.width+"px",height:this.height+"px"});this.setPosition()},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;$(".bannerdiv").css({left:this.x+"px",top:this.y+"px"})}}).extend("Item");Class("Print",{Package:"PageItem",create:function(h,n,m,l,k){this._super(h,n,m,l);this.pageIndex=k;this.initArea();this.initEvents();this.onResize()},initArea:function(){this.area=$("<div></div>");this.button=$("<img src = '"+uiBaseURL+"print_icon.png'></img>");this.parent.append(this.area);this.area.append(this.button);this.initStyle();this.initImageForPrint()},initStyle:function(){this.area.css({position:"absolute",border:this.config.borderWidth+"px solid "+Color(this.config.borderColor).toString(),opacity:this.config.alpha,"-webkit-transform-origin":"50% 50%","-moz-transform-origin":"50% 50%","-ms-transform-origin":"50% 50%","-o-transform-origin":"50% 50%","transform-origin":"50% 50%"});this.button.css({position:"absolute",width:"16px",height:"16px",top:"5px",right:"5px",cursor:"pointer"})},initImageForPrint:function(){this.ready=!1;var k=getPageDir(this.pageIndex,"normal",originTotalPageCount),p=bookConfig.largePageWidth*this.config.width,o=bookConfig.largePageHeight*this.config.height;this.printedImage=$("<div></div>");var n=$("<img width='"+p+"px' height = '"+o+"px'></img>");this.printedImage.append(n);var m=$("<img></img>"),l=$("<canvas width='"+p+"px' height = '"+o+"px'></canvas>");m.load(function(d){try{var f=l[0].getContext("2d");if(f){var c=m[0].naturalWidth,h=m[0].naturalHeight;f.drawImage(m[0],c*this.config.x,h*this.config.y,c*this.config.width,h*this.config.height,0,0,p,o);n[0].src=l[0].toDataURL("image/png");m.attr("src","")}}catch(g){console.error&&console.error("Load printed image failed."),this.ready=!0}}.bind(this));n.load(function(c){this.ready=!0}.bind(this));m.attr("src",k)},parseConfig:function(c){return{width:c.location.width,height:c.location.height,rotation:c.location.rotation,x:c.location.x,y:c.location.y,alpha:c.alpha,overAlpha:c.overAlpha,borderColor:c.borderColor,overColor:c.overColor,borderWidth:c.barderWidth,printTitle:c.printTitle,printDesc:c.printDesc}},initEvents:function(){parseInt(this.config.rotation);var f=Color(this.config.overColor),h=parseFloat(this.config.overAlpha),g=f.rgba(h);this.area.bind(_event._enter,function(c){this.area.css({"background-color":g});this.area.css(transformCSS({scale:1.02}))}.bind(this));this.area.bind(_event._leave,function(c){this.area.css({"background-color":""});this.area.css(transformCSS({scale:1}))}.bind(this));this.button.asButton();this.button.bind(_event._start,function(c){return !1});this.button.bind(_event._end,function(c){this.print();return !1}.bind(this))},print:function(){if(this.ready){try{this.printedImage.printArea()}catch(c){console.error&&console.error("Print image area failed.")}}else{this.print.delay(this,300)}},onResize:function(d,f){d&&(this.pageWidth=d);f&&(this.pageHeight=f);this.left=this.pageWidth*this.config.x;this.top=this.pageHeight*this.config.y;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.area.css({left:this.left+"px",top:this.top+"px",width:this.width+"px",height:this.height+"px"})}}).extend(PageItem.Item);Class("Prismatic",{Package:"PageItem",create:function(g,l,k,h){this._super(g,l,k,h);this.color=Color(this.config.color).toString();this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.colorA=Color(this.config.colorA).toString();this.colorB=Color(this.config.colorB).toString();this.prismatic=$("<canvas width='"+this.width+"' height='"+this.height+"' id='prismatic'></canvas>");this.prismatic.css({position:"absolute",left:this.x+"px",top:this.y+"px"});this.setRotation(this.prismatic,this.config.rotation);this.parent.append(this.prismatic);this.draw();this.initEvent();parseBool(this.config.reflection)&&this.imageReflection(this.prismatic)},parseConfig:function(c){return{x:c.location.x,y:c.location.y,width:c.location.width,rotation:c.location.rotation,height:c.location.height,alpha:c.alpha,fillStyle:c.fillStyle,color:c.color,colorA:c.gradientColorA,colorB:c.gradientColorB,angle:c.angle,spalpha:c.spalpha,reflection:c.location.reflection,reflectionType:c.location.reflectionType,reflectionAlpha:c.location.reflectionAlpha,borderWidth:c.borderWidth,borderColor:c.borderColor,borderAlpha:c.borderAlpha,sh:parseBool(c.shadow.hasDropShadow),sx:c.shadow.shadowBlurX,sy:c.shadow.shadowBlurY,se:c.shadow.shadowDistance,sr:c.shadow.shadowColor,action:c.action}},draw:function(){var h=this.prismatic[0],n=h.getContext("2d");n.clearRect(0,0,h.width,h.height);this.width-=this.config.borderWidth;this.height-=this.config.borderWidth;n.beginPath();n.lineCap="round";n.lineJoin="round";n.strokeStyle=Color(this.config.borderColor).toString();n.lineWidth=this.config.borderWidth;n.globalAlpha=this.config.spalpha;n.moveTo(this.config.borderWidth,this.height/2);n.lineTo(this.width/2,this.height);n.lineTo(this.width-2,this.height/2);n.lineTo(this.width/2,this.config.borderWidth);this.config.sh&&(n.shadowOffsetX=this.config.sx,n.shadowOffsetY=this.config.sy,n.shadowBlur=this.config.sd,n.shadowColor=Color(this.config.sc).toString());if("gradient"==this.config.fillStyle){var m=this.config.angle*Math.PI/180,h=this.width/2+this.width/2*Math.cos(m),m=this.height/2+this.height/2*Math.sin(m),l=(Number(this.config.angle)+180)*Math.PI/180,k=this.width/2+this.width/2*Math.cos(l),l=this.height/2+this.height/2*Math.sin(l),h=n.createLinearGradient(k,l,h,m);h.addColorStop(0,this.colorA);h.addColorStop(1,this.colorB);n.fillStyle=h;n.fill()}"Pure"==this.config.fillStyle&&(n.fillStyle=this.color,n.fill());n.closePath();0!=this.config.borderWidth&&n.stroke()},initEvent:function(){this.linkURL="";null!=this.config.action&&(null!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url,null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL));this.addActionEvent(this.prismatic)},onResize:function(d,f){this.pageWidth=d;this.pageHeight=f;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.prismatic[0].width=this.width;this.prismatic[0].height=this.height;this.draw();this.setPosition()},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.prismatic.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);Class("Triangle",{Package:"PageItem",create:function(g,l,k,h){this._super(g,l,k,h);this.color=Color(this.config.color).toString();this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.width=Number(this.config.width*this.pageWidth);this.height=Number(this.config.height*this.pageHeight);this.config.borderWidth=Number(this.config.borderWidth);this.colorA=Color(this.config.ColorA).toString();this.colorB=Color(this.config.ColorB).toString();this.config.triangleRight=parseBool(this.config.triangleRight);this.config.triangleLeft=parseBool(this.config.triangleLeft);this.borderColor=Color(this.config.borderColor).toString();this.triangle=$("<canvas width='"+this.width+"' height='"+this.height+"' id='myCanvas'></canvas>");this.triangle.css({position:"absolute",left:this.x+"px",top:this.y+"px",opacity:this.config.spalpha});this.setRotation(this.triangle,this.config.rotation);this.parent.append(this.triangle);this.draw();this.initEvent();parseBool(this.config.reflection)&&this.imageReflection(this.triangle)},parseConfig:function(c){return{width:c.location.width,height:c.location.height,x:c.location.x,y:c.location.y,rotation:c.location.rotation,alpha:c.alpha,color:c.color,fillStyle:c.fillStyle,ColorA:c.gradientColorA,ColorB:c.gradientColorB,angle:c.angle,spalpha:c.spalpha,reflection:c.location.reflection,reflectionType:c.location.reflectionType,reflectionAlpha:c.location.reflectionAlpha,triangleRight:c.triangleRight,triangleLeft:c.triangleLeft,borderWidth:c.borderWidth,borderColor:c.borderColor,borderAlpha:c.borderAlpha,sh:parseBool(c.shadow.hasDropShadow),sa:c.shadow.shadowAngle,sd:c.shadow.shadowDistance,sc:c.shadow.shadowColor,sx:c.shadow.shadowBlurX,sy:c.shadow.shadowBlurY,arrowType:c.arrowType,action:c.action}},draw:function(){var h=this.triangle[0],n=h.getContext("2d");n.clearRect(0,0,h.width,h.height);n.beginPath();n.strokeStyle=Color(this.config.borderColor).toString();n.lineWidth=this.config.borderWidth;n.globalAlpha=this.config.spalpha;n.lineCap="round";n.lineJoin="round";this.width-=this.config.borderWidth;this.height-=this.config.borderWidth;!1==this.config.triangleRight&&!1==this.config.triangleLeft&&(n.moveTo(this.config.borderWidth,this.height),n.lineTo(this.width,this.height),n.lineTo(this.width/2,this.config.borderWidth));!0==this.config.triangleRight&&!1==this.config.triangleLeft&&(n.moveTo(this.config.borderWidth,this.config.borderWidth),n.lineTo(this.config.borderWidth,this.height),n.lineTo(this.width,this.height));!1==this.config.triangleRight&&!0==this.config.triangleLeft&&(n.moveTo(this.width,this.config.borderWidth),n.lineTo(this.width,this.height),n.lineTo(this.config.borderWidth,this.height));!0==parseBool(this.config.sh)&&(n.shadowOffsetX=this.config.sx,n.shadowOffsetY=this.config.sy,n.shadowBlur=this.config.sd,n.shadowColor=Color(this.config.sc).toString());if("gradient"==this.config.fillStyle){var m=this.config.angle*Math.PI/180,h=this.width/2+this.width/2*Math.cos(m),m=this.height/2+this.height/2*Math.sin(m),l=(Number(this.config.angle)+180)*Math.PI/180,k=this.width/2+this.width/2*Math.cos(l),l=this.height/2+this.height/2*Math.sin(l),h=n.createLinearGradient(k,l,h,m);h.addColorStop(0,this.colorA);h.addColorStop(1,this.colorB);n.fillStyle=h;n.fill()}"Pure"==this.config.fillStyle&&(n.fillStyle=this.color,n.fill());n.closePath();0!=this.config.borderWidth&&n.stroke()},initEvent:function(){this.linkURL="";null!=this.config.action&&(void 0!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url,null!=this.linkURL&&"www"==this.linkURL.substr(1,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL));this.addActionEvent(this.triangle)},onResize:function(d,f){this.pageWidth=d;this.pageHeight=f;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.triangle[0].width=this.width;this.triangle[0].height=this.height;this.draw();this.setPosition()},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.triangle.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);global.hddr.soo1="tm";Class("AlphaTransitionBanner",{Package:"PageItem",create:function(g,l,k,h){this._super(g,l,k,h);if("string"==typeof this.config.images){if(""==this.config.images.trim()){this.photos=[];return}this.photos=[{url:this.config.images}]}else{this.photos=Instance.copy(this.config.images)}this.photos.node instanceof Array&&(this.photos=this.photos.node);this.photos instanceof Array||(this.photos=[this.photos.node]);1>this.photos.length||(this.photos instanceof Array||void 0==this.photos.node||(this.photos=void 0==this.photos.node[1]?[this.photos.node]:this.photos.node),this.imgIndex=-1,this.imgWidth=this.config.width*k,this.imgHeight=this.config.height*h,this.boxWidth=this.imgWidth-8,this.boxHeight=this.imgHeight-8,this.x=this.config.x*this.pageWidth,this.y=this.config.y*this.pageHeight,this.interval=3000,this.duration=1000*this.config.duration,this.fadeTime=10,this.alpha=100,this.images=[],this.background=$("<div class='banner_background'></div>"),this.slideShowBG=new grayBackground(this.background,"#ffffff",1,this.imgWidth,this.imgHeight),this.toolBar=$("<div></div>"),this.toolBar.css({width:this.boxWidth,height:"35px",position:"relative"}),this.toolBar.css({"z-index":"209"}),this.toolBG=new grayBackground(this.toolBar,"#000000",0.4,this.boxWidth,35),this.toolBG.setZindex("210"),this.toolBG.setPosition(0,0),this.imgTitle=$("<div></div>"),this.imgTitle.css({overflow:"hidden",width:this.boxWidth-20+"px",height:"20px",position:"absolute","z-index":"211",background:"",left:"10px",top:"7px",color:"#ffffff"}),this.image0Holder=$("<div></div>"),this.image1Holder=$("<div></div>"),this.img=$("<img style='position : absolute;' />"),this.leftButton=new button(this.toolBar,{buttonType:1,iconURL:uiBaseURL+"previous_down.png"}),this.rightButton=new button(this.toolBar,{buttonType:1,iconURL:uiBaseURL+"next_down.png"}),this.parent.append(this.background),this.background.append(this.image1Holder),this.background.append(this.image0Holder),this.background.append(this.toolBar),this.toolBar.css({left:(this.imgWidth-this.boxWidth)/2+"px",top:(this.imgHeight-this.boxHeight)/2+"px"}),this.toolBar.append(this.imgTitle),this.rightButton.setCSS({"z-index":212,right:"0px",top:"13px"}),this.leftButton.setCSS({"z-index":212,right:"20px",top:"13px"}),this.background.css({"z-index":"199",border:"1px solid #333333",width:this.imgWidth,height:this.imgHeight,left:this.x+"px",top:this.y+"px",position:"absolute","-webkit-box-shadow":"0 0 10px rgba(40, 40, 40, 0.7)","-moz-box-shadow":"0 0 10px rgba(40, 40, 40, 0.7)","-ms-box-shadow":"0 0 10px rgba(40, 40, 40, 0.7)","-o-box-shadow":"0 0 10px rgba(40, 40, 40, 0.7)","box-shadow":"0 0 10px rgba(40, 40, 40, 0.7)"}),this.setRotation(this.background,this.config.rotation),this.image0Holder.css({width:this.boxWidth+"px",height:this.boxHeight+"px",left:(this.imgWidth-this.boxWidth)/2+"px",top:(this.imgHeight-this.boxHeight)/2+"px",position:"absolute","z-index":202}),this.image1Holder.css({width:this.boxWidth+"px",height:this.boxHeight+"px",left:(this.imgWidth-this.boxWidth)/2+"px",top:(this.imgHeight-this.boxHeight)/2+"px",position:"absolute","z-index":202}),this.addItem(),this.leftButton.onMouseDown(this,this.prePage),this.rightButton.onMouseDown(this,this.nextPage),this.currentImageHolder=this.image0Holder,this.currentImage=2%this.images.length,this.image0Holder.append(this.images[0]),this.image1Holder.append(this.images[1]),this.setTitle(0),this.toolBar.hide(),this.leftButton.remove(),this.rightButton.remove())},parseConfig:function(c){return{width:c.location.width,height:c.location.height,rotation:c.location.rotation,x:c.location.x,y:c.location.y,alpha:c.alpha,src:c.url,action:c.action,images:c.Images,duration:c.duration}},play:function(){clearInterval(this.timer0);this.timer0=null;clearTimeout(this.timer1);this.timer1=null;this.timer1=setTimeout(this.transition.bind(this),this.duration);this.playing=!0},pause:function(){this.playing=!1},transition:function(){var c=this;c.timer0=setInterval(function(){if(0<c.alpha){c.alpha-=1;$(c.currentImageHolder).css({opacity:c.alpha/100});var b=0,b=0<c.currentImage?(c.currentImage-1)%c.images.length:c.images.length-1;c.setTitle(b)}else{clearInterval(c.timer0),c.timer0=null,c.currentImageHolder==c.image0Holder?($(c.image0Holder).css({"z-index":"207"}),$(c.image1Holder).css({"z-index":"208"}),c.alpha=100,$(c.currentImageHolder).css({opacity:c.alpha/100}),c.currentImageHolder=c.image1Holder,c.image0Holder.empty().append(c.images[c.currentImage])):($(c.image0Holder).css({"z-index":"208"}),$(c.image1Holder).css({"z-index":"207"}),c.alpha=100,$(c.currentImageHolder).css({opacity:c.alpha/100}),c.currentImageHolder=c.image0Holder,c.image1Holder.empty().append(c.images[c.currentImage])),c.currentImage=(c.currentImage+1)%c.images.length,c.playing&&(c.timer1=setTimeout(c.transition.bind(c),c.duration))}},20)},setTitle:function(d){d=this.photos[d].url;var f=d.lastIndexOf("/");d=d.substring(f+1);this.imgTitle.html(d)},nextPage:function(){clearInterval(this.timer0);this.timer0=null;var c=0,c=0<this.currentImage?(this.currentImage-1)%this.images.length:this.images.length-1;this.setTitle(c);this.currentImageHolder==this.image0Holder?($(this.image0Holder).css({"z-index":"207"}),$(this.image1Holder).css({"z-index":"208"}),this.alpha=100,$(this.currentImageHolder).css({opacity:this.alpha/100}),this.currentImageHolder=this.image1Holder,this.image0Holder.empty().append(this.images[this.currentImage])):($(this.image0Holder).css({"z-index":"208"}),$(this.image1Holder).css({"z-index":"207"}),this.alpha=100,$(this.currentImageHolder).css({opacity:this.alpha/100}),this.currentImageHolder=this.image0Holder,this.image1Holder.empty().append(this.images[this.currentImage]));this.currentImage=(this.currentImage+1)%this.images.length},prePage:function(){clearInterval(this.timer0);this.timer0=null;var c=0,c=2<this.currentImage?(this.currentImage-3)%this.images.length:1==this.currentImage?this.images.length-2:this.images.length-3;this.setTitle(c);this.currentImageHolder==this.image0Holder?($(this.image0Holder).css({"z-index":"207"}),$(this.image1Holder).css({"z-index":"208"}),this.alpha=100,$(this.currentImageHolder).css({opacity:this.alpha/100}),this.currentImageHolder=this.image1Holder,this.image1Holder.empty().append(this.images[c])):($(this.image0Holder).css({"z-index":"208"}),$(this.image1Holder).css({"z-index":"207"}),this.alpha=100,$(this.currentImageHolder).css({opacity:this.alpha/100}),this.currentImageHolder=this.image0Holder,this.image0Holder.empty().append(this.images[this.index]));this.currentImage=(this.currentImage-1)%this.images.length},addItem:function(){for(var f=0;f<this.photos.length;f++){var h=$("<div></div>");h.css({width:this.boxWidth+"px",height:this.boxHeight+"px"});image=$("<img style='position : absolute;' />");image.remove();var g=this.photos[f].url,g=this.fixRelativePath(g);image.attr("src",g);image.css({width:this.boxWidth+"px",height:this.boxHeight+"px"});h.append(image);this.images[f]=h}},onResize:function(f,h){this.pageWidth=f;this.pageHeight=h;this.imgWidth=this.config.width*this.pageWidth;this.imgHeight=this.config.height*this.pageHeight;this.boxWidth=this.imgWidth-8;this.boxHeight=this.imgHeight-8;this.background.css({width:this.imgWidth,height:this.imgHeight});this.toolBar.css({width:this.boxWidth,height:"35px"});this.toolBG.onResize(this.boxWidth,35);this.toolBG.setPosition(0,0);this.imgTitle.css({width:this.boxWidth-20+"px",height:"20px",left:"10px",top:"7px"});this.slideShowBG.onResize(this.imgWidth,this.imgHeight);for(var g=0;g<this.images.length;g++){this.images[g].children().css({width:this.boxWidth+"px",height:this.boxHeight+"px"})}this.setPosition()},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.background.css({left:this.x+"px",top:this.y+"px",position:"absolute"});this.image0Holder.css({width:this.boxWidth+"px",height:this.boxHeight+"px",left:(this.imgWidth-this.boxWidth)/2+"px",top:(this.imgHeight-this.boxHeight)/2+"px",position:"absolute"});this.image1Holder.css({width:this.boxWidth+"px",height:this.boxHeight+"px",left:(this.imgWidth-this.boxWidth)/2+"px",top:(this.imgHeight-this.boxHeight)/2+"px",position:"absolute"})},changeImage:function(d){this.imgIndex=d;this.img.remove();d=this.photos[d].url;d=this.fixRelativePath(d);var f=this;this.img.attr("src",d);this.img.on("load",function(){var c=f.boxWidth,g=f.boxHeight;f.img.css({width:c+"px",height:g+"px"});f.boxWidth!=c||f.boxHeight!=g?f.image0Holder.animate({width:c+8,height:g+8,left:(f.pw-c)/2,top:(f.ph-g)/2},300,function(){f.image0Holder.append(f.img)}):(f.image0Holder.append(f.img),f.image1Holder.append(f.img))})},setImagePosition:function(){},show:function(){},hide:function(){}}).extend("Item");global.hddr.soa8=hddr.soa7+"i";global.hddr.sov9=function(d,f){return d+"ph"+f+"l"};Class("Carousel",{Package:"PageItem",create:function(h,n,m,l,k){this._super(h,n,m,l);this.width=Number(this.config.width)*this.pageWidth;this.height=Number(this.config.height)*this.pageHeight;this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.config.duration||(this.config.duration=3);this.id="carousel"+k;this.imageItem=[];if(this.images=Instance.copy(this.config.images)){this.images.node instanceof Array&&(this.images=this.images.node),this.images[0]||(this.images=[this.images.node])}if(!(1>this.config.images)){if(this.images&&this.images.length){for(h=0;h<this.images.length;h++){this.imageItem.push(this.images[h]),this.imageItem[h].url=this.fixRelativePath(this.imageItem[h].url)}}this.content=$("<div class='initCarousel'></div>");this.content.css({position:"absolute",left:this.x+"px",top:this.y+"px",width:this.width+"px",height:this.height+"px",border:"0px solid red"});this.setRotation(this.content,this.config.rotation);this.currentIndex=0;this.parent.append(this.content);this.initImages();this.config.showButton&&this.initButtons()}},parseConfig:function(c){return{width:c.location.width,height:c.location.height,rotation:c.location.rotation,x:c.location.x,y:c.location.y,alpha:c.alpha,images:c.Images,duration:parseInt(c.duration),autoPlay:parseBool(c.autoBool),showButton:parseBool(c.selectBtn),hasShadow:parseBool(c.shadow.hasDropShadow),shadow:c.shadow}},initImages:function(){if(void 0!=this.images&&null!=this.images&&0!=this.images.length){this.refreshImageAndPosition();this.carouselList=new CarouselImageList;this.carouselList.setResources(this.aImages);this.carouselList.setImagesIndex(this.aImagesIndex);this.carouselList.setPositions(this.aPositions);for(var d=0;d<this.aPositions.length;d++){var f=new CarouselImage(this,this.aPositions[d]);this.carouselList.addInstance(f)}this.carouselList.loadResources();this.carouselList.blurAll()}},initButtons:function(){this.leftButton=$('<img class="flip-action" src="'+uiBaseURL+'pre_image.png" style="position:absolute;z-index:1000"></img>');this.rightButton=$('<img class="flip-action" src="'+uiBaseURL+'next_image.png" style="position:absolute;z-index:1000"></img>');this.setButtonPosition();this.content.append(this.leftButton);this.content.append(this.rightButton);this.leftButton.bind(_event._down,function(){return !1});this.leftButton.bind(_event._end,function(c){this.move(1);c.stopPropagation&&c.stopPropagation();return !1}.bind(this));this.rightButton.bind(_event._down,function(){return !1});this.rightButton.bind(_event._end,function(c){this.move(-1);c.stopPropagation&&c.stopPropagation();return !1}.bind(this))},refreshImageAndPosition:function(){void 0!=this.imageItem&&null!=this.imageItem&&0!=this.imageItem.length&&(this.instanceCount=5,5>this.imageItem.length&&(this.instanceCount=Math.min(this.imageItem.length,3)),this.refreshImages(),this.refreshPositions())},refreshImages:function(){this.refreshImagesIndex();this.aImages=[];for(var c=0;c<this.aImagesIndex.length;c++){this.aImages.push(this.imageItem[this.aImagesIndex[c]].url)}},refreshImagesIndex:function(){this.aImagesIndex=[];switch(this.instanceCount){case 1:this.aImagesIndex.push(0);break;case 2:this.aImagesIndex.push(this.currentIndex%this.imageItem.length);this.aImagesIndex.push((this.currentIndex+1)%this.imageItem.length);break;case 3:this.aImagesIndex.push((this.currentIndex-1+this.imageItem.length)%this.imageItem.length);this.aImagesIndex.push(this.currentIndex%this.imageItem.length);this.aImagesIndex.push((this.currentIndex+1)%this.imageItem.length);break;case 5:this.aImagesIndex.push((this.currentIndex-2+this.imageItem.length)%this.imageItem.length),this.aImagesIndex.push((this.currentIndex-1+this.imageItem.length)%this.imageItem.length),this.aImagesIndex.push(this.currentIndex%this.imageItem.length),this.aImagesIndex.push((this.currentIndex+1)%this.imageItem.length),this.aImagesIndex.push((this.currentIndex+2)%this.imageItem.length)}},refreshPositions:function(){this.aPositions=[];var d=this.width/5,d=0;switch(this.instanceCount){case 1:Math.ceil(this.width/2);d=Math.ceil(this.width/4);this.aPositions.push(new CarouselPosition(d,0,this.width,this.height,1));break;case 2:var d=Math.ceil(this.width/2),f=Math.ceil(this.width/4);this.aPositions.push(new CarouselPosition(f,0,d,this.height,2));f=Math.ceil(d+0.1*d);this.aPositions.push(new CarouselPosition(f,0.1*this.height,0.8*d,0.8*this.height,1));break;case 3:d=Math.ceil(this.width/2);f=Math.ceil(0.1*d);this.aPositions.push(new CarouselPosition(f,0.1*this.height,d,0.8*this.height,1));f=Math.ceil(this.width/4);this.aPositions.push(new CarouselPosition(f,0,d,this.height,2));f=Math.ceil(d+0.1*d);this.aPositions.push(new CarouselPosition(f,0.1*this.height,d-5,0.8*this.height,1));break;case 5:d=this.width/3,f=Math.ceil(0.2*d),this.aPositions.push(new CarouselPosition(f,0.2*this.height,0.6*d,0.6*this.height,1)),f=Math.ceil(this.width/6+0.1*d),this.aPositions.push(new CarouselPosition(f,0.1*this.height,0.8*d,0.8*this.height,2)),this.aPositions.push(new CarouselPosition(d,0,d,this.height,3)),f=Math.ceil(this.width/2+0.1*d),this.aPositions.push(new CarouselPosition(f,0.1*this.height,0.8*d,0.8*this.height,2)),f=Math.ceil(2*this.width/3+0.2*d),this.aPositions.push(new CarouselPosition(f,0.2*this.height,0.6*d,0.6*this.height,1))}},play:function(){this.config.autoPlay&&(this.timer=window.setInterval(function(){this.move(1)}.bind(this),1000*this.config.duration))},pause:function(){this.config.autoPlay&&window.clearInterval(this.timer)},move:function(c){this.isMoving||(this.isMoving=!0,this.currentIndex+=c,0>this.currentIndex&&(this.currentIndex+=this.imageItem.length),this.currentIndex%=this.imageItem.length,this.instanceCount=this.carouselList.instanceCount(),this.refreshImages(),this.carouselList.setResources(this.aImages),this.carouselList.setImagesIndex(this.aImagesIndex),this.carouselList.move(c),function(){this.isMoving=!1}.delay(this,1000))},moveTo:function(c){this.move(c-this.currentIndex)},onResize:function(d,f){this.pageWidth=d;this.pageHeight=f;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.content.css({width:this.width+"px",height:this.height+"px"});this.setPosition();this.config.showButton&&this.setButtonPosition();this.refreshImageAndPosition();this.carouselList.setResources(this.aImages);this.carouselList.setImagesIndex(this.aImagesIndex);this.carouselList.setPositions(this.aPositions);this.carouselList.resizeAll()},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.content.css({left:this.x+"px",top:this.y+"px"})},setButtonPosition:function(){var c=(this.height-32)/2;this.leftButton.css({left:"0px",top:c+"px"});this.rightButton.css({right:"0px",top:c+"px"})}}).extend("Item");var CarouselImage=Class({create:function(d,f){this.parent=d;this.position=Instance.copy(f);this.instance=$('<img style="position:absolute"/>');this.parent.content.append(this.instance);this.parent.addShadow(this.instance);this.imageHeight=this.imageWidth=0;this.instance.load(this.onImageLoad.bind(this));this.instance.bind(_event._down,function(){return !1});this.instance.bind(_event._end,this.onClick.bind(this));this.setArea();this.setZindex(this.position.zindex)},blur:function(c){!0==c?this.instance.css({"-webkit-filter":"blur(2px)","-moz-filter":"blur(2px)","-o-filter":"blur(2px)","-ms-filter":"blur(2px)",filter:"blur(2px)"}):this.instance.css({"-webkit-filter":"blur(0px)","-moz-filter":"blur(0px)","-o-filter":"blur(0px)","-ms-filter":"blur(0px)",filter:"blur(0px)"})},setSrc:function(c){this.instance[0].src=c},getSrc:function(){return this.instance[0].src},setIndex:function(c){this.imageIndex=c},onImageLoad:function(){var c=this.instance[0];this.imageWidth=c.naturalWidth;this.imageHeight=c.naturalHeight;this.resetPosition();this.setArea(this.position)},onClick:function(){this.parent.moveTo(this.imageIndex);return !1},resetPosition:function(){if(0!=this.imageWidth&&0!=this.imageHeight){var f=this.position.width,h=this.position.height,g=Math.ceil(this.imageHeight*this.position.width/this.imageWidth);g>this.position.height?(g=Math.ceil(this.position.height*this.imageWidth/this.imageHeight),this.position.width=g,this.position.left+=(f-g)/2):(f=Math.floor((h-g)/2),this.position.height=g,this.position.top+=f)}},setArea:function(){this.instance.css({left:this.position.left+"px",top:this.position.top+"px",width:this.position.width+"px",height:this.position.height+"px"})},setZindex:function(c){this.instance.css({"z-index":c})},gotoPosition:function(c){this.position=Instance.copy(c);this.resetPosition();this.setZindex(this.position.zindex);this.instance.animate({left:this.position.left,top:this.position.top,width:this.position.width,height:this.position.height},500,null)}}),CarouselPosition=Class({create:function(h,n,m,l,k){this.left=Math.ceil(h);this.top=Math.ceil(n);this.width=Math.ceil(m);this.height=Math.ceil(l);this.zindex=k},asString:function(){return"left:"+this.left+",top:"+this.top+",width:"+this.width+",height:"+this.height+",z-index:"+this.zindex}}),CarouselImageList=Class({create:function(){this.imageInstances=[]},setResources:function(d){this.imageResources=[];for(var f=0;f<d.length;f++){this.imageResources.push(d[f])}},setImagesIndex:function(d){this.imagesIndex=[];for(var f=0;f<d.length;f++){this.imagesIndex.push(d[f])}},setPositions:function(d){this.imagePositions=[];for(var f=0;f<d.length;f++){this.imagePositions.push(d[f])}},addInstance:function(c){this.imageInstances.push(c)},instanceCount:function(){return this.imageInstances.length},loadResources:function(){for(var f=this.imageInstances.length,h=0;h<f;h++){var g=this.imageInstances[h];g.getSrc()!=this.imageResources[h]&&(g.setSrc(this.imageResources[h]),g.setIndex(this.imagesIndex[h]))}},move:function(h){var n=this.imageInstances.length;if(0!=n){for(var m=[],l=0;l<n;l++){m[l]=this.imageInstances[l]}for(l=0;l<n;l++){var k=l+h;0>k&&(k+=n);k>=n&&(k%=n);this.imageInstances[l]=m[k]}for(l=0;l<n;l++){this.imageInstances[l].gotoPosition(this.imagePositions[l])}this.loadResources();this.blurAll()}},resizeAll:function(){var d=this.imageInstances.length;if(0!=d){for(var f=0;f<d;f++){this.imageInstances[f].gotoPosition(this.imagePositions[f])}}},blurAll:function(){for(var g=this.imageInstances.length,l=Math.floor((g+1)/2)-1,k=0;k<g;k++){var h=this.imageInstances[k];k!=l?h.blur(!0):h.blur(!1)}}});global.hddr.sob8=hddr.soa8;global.hddr.soq2=hddr.sov9(hddr.soa8,hddr.soq3)+"5";Class("DynamicShow",{Package:"PageItem",create:function(h,n,m,l,k){this._super(h,n,m,l);this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.childWidth=Math.ceil(this.width/4);this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.borderWidth=this.config.borderWidth;this.id="dynshow"+k;this.images=Instance.copy(this.config.images);this.imageItem=[];this.images||(this.images=[]);this.images[0]||(this.images=[this.images.Image]);if(this.images&&this.images.length){for(h=0;h<this.images.length;h++){this.imageItem.push(this.images[h]),this.imageItem[h]=this.fixRelativePath(this.imageItem[h])}}this.maxZindex=this.images.length+1;this.content=$("<div id='DynamicShow'></div>");this.content.css({position:"absolute",left:this.x+"px",top:this.y+"px",width:this.width+"px",height:this.height+"px",border:"0px solid red"});this.setRotation(this.content,this.config.rotation);this.currentIndex=0;this.parent.append(this.content);this.init()},parseConfig:function(c){return{width:c.location.width,height:c.location.height,rotation:c.location.rotation,x:c.location.x,y:c.location.y,alpha:c.alpha,images:c.Images,borderWidth:c.borderWidth}},init:function(){this.imageInstances=[];if(0!=this.imageItem.length){for(var d=0;d<this.imageItem.length;d++){var f=new ImageInstance(this,d);f.setImage(this.imageItem[d]);this.content.append(f);this.imageInstances.push(f)}this.currentIndex=-1;this.initButtons()}},initButtons:function(){this.leftButton=$('<img class="flip-action" src="'+uiBaseURL+'pre_image.png" style="position:absolute;z-index:1000"></img>');this.rightButton=$('<img class="flip-action" src="'+uiBaseURL+'next_image.png" style="position:absolute;z-index:1000"></img>');this.setButtonPosition();this.leftButton.bind(_event._click,function(){this.preImage()}.bind(this));this.rightButton.bind(_event._click,function(){this.nextImage()}.bind(this));this.leftButton.css({display:"none"});this.rightButton.css({display:"none"});this.content.append(this.leftButton);this.content.append(this.rightButton);isPhone()||isPad()||(this.content.bind(_event._enter,function(){this.leftButton.css({display:"block"});this.rightButton.css({display:"block"})}.bind(this)),this.content.bind(_event._leave,function(){this.leftButton.css({display:"none"});this.rightButton.css({display:"none"})}.bind(this)))},preImage:function(){-1!=this.currentIndex&&this.imageInstances[this.currentIndex].hide();this.currentIndex=(this.currentIndex-1+this.images.length)%this.images.length;this.imageInstances[this.currentIndex].show()},nextImage:function(){-1!=this.currentIndex&&this.imageInstances[this.currentIndex].hide();this.currentIndex=(this.currentIndex+1)%this.images.length;this.imageInstances[this.currentIndex].show()},showImage:function(c){-1!=c&&(-1!=this.currentIndex&&this.imageInstances[this.currentIndex].hide(),this.currentIndex=c,this.imageInstances[this.currentIndex].show())},refreshZindex:function(){for(var f=this.imageInstances[this.currentIndex].zIndex,h=0;h<this.images.length;h++){if(h!=this.currentIndex){var g=this.imageInstances[h].zIndex;g>f&&(g--,this.imageInstances[h].setZindex(g))}}this.imageInstances[this.currentIndex].setZindex(this.images.length-1)},setButtonPosition:function(){var c=(this.height-32)/2;this.leftButton.css({left:"0px",top:c+"px"});this.rightButton.css({right:"0px",top:c+"px"})},onResize:function(f,h){this.pageWidth=f;this.pageHeight=h;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.content.css({width:this.width+"px",height:this.height+"px"});this.setPosition();this.setButtonPosition();this.childWidth=Math.ceil(this.width/4);for(var g=0;g<this.imageInstances.length;g++){this.imageInstances[g].onResize()}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.content.css({left:this.x+"px",top:this.y+"px"})}}).extend("Item");var ImageInstance=Class({create:function(f,h){this.parent=f;this.zIndex=this.index=h;this.imageHeight=this.imageWidth=0;this.height=this.width=this.parent.childWidth;this.borderWidth=Math.ceil(this.parent.borderWidth/2);this.maxLeft=this.parent.width-this.width;this.maxTop=this.parent.height-this.height;var g=randomPosition(this.maxLeft,this.maxTop);this.rotation=g.rotation;this.animate=[];this.instance=$("<img></img>");this.instance.css({position:"absolute",left:g.left+"px",top:g.top+"px",width:this.width+"px",height:this.height+"px",display:"none"});this.instance.rotate(this.rotation);this.setBorderWidth(this.borderWidth);this.initShadow();this.initEvents();f.content.append(this.instance)},initShadow:function(){this.instance.css({"-moz-box-shadow":"2px 2px 4px #252525","box-shadow":"2px 2px 4px #252525","-webkit-box-shadow":"2px 2px 4px #252525","-ms-box-shadow":"2px 2px 4px #252525","-o-box-shadow":"2px 2px 4px #252525"})},initEvents:function(){this.instance.on("load",function(){this.onImageLoad()}.bind(this));this.instance.bind(_event._click,function(){this.parent.currentIndex==this.index?(this.hide(),this.parent.currentIndex=-1):this.parent.showImage(this.index)}.bind(this))},onImageLoad:function(){var c=this.instance[0];this.imageWidth=c.naturalWidth;this.imageHeight=c.naturalHeight;this.height=Math.ceil(this.imageHeight*this.width/this.imageWidth);this.maxTop=this.parent.height-this.height;this.instance.css({height:this.height+"px",display:"block"})},setImage:function(c){this.instance.attr("src",c)},onResize:function(){this.width=this.parent.childWidth;this.height=0<this.imageWidth&&0<this.imageHeight?Math.ceil(this.imageHeight*this.width/this.imageWidth):this.width;this.maxLeft=this.parent.width-this.width;this.maxTop=this.parent.height-this.height;if(this.index!=this.parent.currentIndex){var d=this.getPosition(),f=this.width/d.width;d.left=Math.floor(d.left*f);d.top=Math.floor(d.top*f);d.width=this.width;d.height=this.height}else{d=this.getTopPosition()}this.moveTo(d)},resize:function(d,f){this.width=d;this.height=f;this.instance.css({width:this.width+"px",height:this.height+"px"})},move:function(d,f){this.instance.css({left:this.left+"px",top:this.top+"px"})},setZindex:function(c){this.zIndex=c;this.instance.css({"z-index":c})},setBorderWidth:function(c){this.instance.css({border:c+"px solid white"})},getTopPosition:function(){if(this.imageWidth/this.imageHeight>this.parent.width/this.parent.height){var h=this.parent.width,n=h*this.imageHeight/this.imageWidth,m=(this.parent.height-n)/2-this.parent.borderWidth,l=0,k=0}else{n=this.parent.height,h=n*this.imageWidth/this.imageHeight,k=m=0,l=(this.parent.width-h)/2-this.parent.borderWidth}return new DynImagePostion(l,m,h,n,k)},show:function(){if(0!=this.imageWidth&&0!=this.imageHeight){var c=this.getTopPosition();c.borderWidth=this.parent.borderWidth;this.instance.css({"z-index":this.parent.maxZindex});this.moveTo(c)}},hide:function(){if(0!=this.imageWidth&&0!=this.imageHeight){var c=randomPosition(this.maxLeft,this.maxTop),c=new DynImagePostion(c.left,c.top,this.width,this.height,c.rotation);c.borderWidth=this.borderWidth;this.parent.refreshZindex();this.moveTo(c)}},moveTo:function(g){var l=null,k=0,h=window.setInterval(function(){!1==this.isInAnimate(h)&&this.animate.push(h);if(!1!=this.isRunning(h)){null==l&&(l=this.getPosition());var o=$.easing.swing(null,k,l.left,g.left-l.left,20),f=$.easing.swing(null,k,l.top,g.top-l.top,20),d=$.easing.swing(null,k,l.width,g.width-l.width,20),c=$.easing.swing(null,k,l.height,g.height-l.height,20),b=$.easing.swing(null,k,l.rotation,g.rotation-l.rotation,20),p=$.easing.swing(null,k,l.borderWidth,g.borderWidth-l.borderWidth,20);this.instance.css({left:o+"px",top:f+"px",width:d+"px",height:c+"px"});this.instance.rotate(b);this.setBorderWidth(p);this.rotation=b;20==k++&&(window.clearInterval(h),this.animate.shift())}}.bind(this),20)},isInAnimate:function(d){for(var f=0;f<this.animate.length;f++){if(d==this.animate[f]){return !0}}return !1},isRunning:function(c){return c==this.animate[0]},getPosition:function(){var g=parseInt(this.instance.css("left").replace("px","")),l=parseInt(this.instance.css("top").replace("px","")),k=this.instance.width(),h=this.instance.height(),g=new DynImagePostion(g,l,k,h,this.rotation),l=this.instance.css("border"),l=parseInt(l.replace("px solid white"));g.borderWidth=l;return g}}),DynImagePostion=Class({create:function(h,n,m,l,k){this.left=h;this.top=n;this.width=m;this.height=l;this.rotation=k},asString:function(){return"left:"+this.left+",top:"+this.top+",width:"+this.width+",height:"+this.height+",rotation:"+this.rotation}});function randomPosition(h,n){var m=Math.floor(Math.random()*h),l=Math.floor(Math.random()*n),k=75-Math.floor(150*Math.random());return{left:m,top:l,rotation:k}}Class("FocusJump",{Package:"PageItem",create:function(h,n,m,l,k){this._super(h,n,m,l);this.id="flip_jump_"+k;this.translate=0;this.initContent();this.initImages();this.initButtons();this.initEvents();parseBool(this.config.reflection)&&this.imageReflection(this.content);this.onResize(m,l)},initContent:function(){this.content=$("<div id='"+this.id+"'></div>");this.content.css({overflow:"hidden",position:"absolute"});this.setRotation(this.content,this.config.rotation);this.imagesContent=$("<div></div>");this.imagesContent.css({position:"absolute",left:"0px",top:"0px",height:"100%"});this.parent.append(this.content);this.content.append(this.imagesContent);this.initBackground()},initBackground:function(){if(this.config.addBackground){var c=Color(this.config.backgroundColor);this.content.css({"background-color":c.rgba(this.config.backgroundAlpha)})}this.config.addBorder&&(c=Color(this.config.borderColor),this.content.css({border:this.config.borderWidth+"px solid "+c.rgba(this.config.borderAlpha)}))},initButtons:function(){this.leftButton=$('<img class="flip-action" src="'+uiBaseURL+'pre_image.png" style="position:absolute;z-index:1000;left:0px;top:0px;bottom:0px;margin:auto"></img>');this.rightButton=$('<img class="flip-action" src="'+uiBaseURL+'next_image.png" style="position:absolute;z-index:1000;right:0px;top:0px;bottom:0px;margin:auto"></img>');isPhone()||isPad()||(this.leftButton.css({display:"none"}),this.rightButton.css({display:"none"}));this.content.append(this.leftButton);this.content.append(this.rightButton)},initImages:function(){this.$images=[];this.images=this.config.images;if(""!=this.images){if(!(this.images instanceof Array)){if(""==this.images){return}this.images.node&&(this.images=[this.images.node])}for(var g=this,l=0;l<this.images.length;l++){var k=this.images[l].url,k=this.fixRelativePath(k),h=$("<img style='position:absolute;display:none;bottom:0px'></img>");h.on("load",function(){var b=$(this);g.resizeImage(b);b.css({display:"block"})});h.attr("src",k);this.imagesContent.append(h);this.$images.push(h)}}},resizeImage:function(d){if(d[0].naturalWidth&&d[0].naturalHeight){var f=this.getImageWidth();d.css({width:f+"px",height:Math.floor(f/d[0].naturalWidth*d[0].naturalHeight)+"px"})}},getImageWidth:function(){return Math.floor((this.width-3*this.margin)/3)},parseConfig:function(c){return{width:c.location.width,height:c.location.height,x:c.location.x,y:c.location.y,rotation:c.location.rotation,reflection:c.location.reflection,reflectionType:c.location.reflectionType,reflectionAlpha:c.location.reflectionAlpha,images:c.componentData.Images,addBackground:parseBool(c.componentData.addBack),addBorder:parseBool(c.componentData.addBorder),backgroundColor:c.componentData.backColor,backgroundAlpha:c.componentData.backAlpha,borderColor:c.componentData.borderColor,borderAlpha:c.componentData.borderAlpha,borderWidth:c.componentData.borderWidth}},initEvents:function(){this.content.bind(_event._enter,function(){3>=this.images.length||(this.leftButton.css({display:"block"}),this.rightButton.css({display:"block"}))}.bind(this));this.content.bind(_event._leave,function(){this.leftButton.css({display:"none"});this.rightButton.css({display:"none"})}.bind(this));this.leftButton.bind(_event._click,function(c){this.moveLeft();c.stopPropagation&&c.stopPropagation();return !1}.bind(this));this.rightButton.bind(_event._click,function(c){this.moveRight();c.stopPropagation&&c.stopPropagation();return !1}.bind(this));for(var f=this,h=0;h<this.$images.length;h++){var g=this.$images[h];g.bind(_event._enter,function(){f.moveImageUp($(this))});g.bind(_event._leave,function(){f.moveImageDown($(this))});if(isPhone()||isPad()){g.bind(_event._down,function(){f.moveImageUp($(this))}),g.bind(_event._end,function(){f.moveImageDown($(this))})}}},moveLeft:function(){this.translate+=this.getImageWidth();0<this.translate&&(this.translate=0);animateOnce(this.imagesContent,{left:this.translate+"px"},300)},moveRight:function(){this.translate-=this.getImageWidth();var c=this.width-this.imagesContent.width();this.translate<c&&(this.translate=c);animateOnce(this.imagesContent,{left:this.translate+"px"},300)},moveImageUp:function(c){animateOnce(c,{bottom:Math.floor(this.height/8)+"px"},300)},moveImageDown:function(c){animateOnce(c,{bottom:"0px"},300)},onResize:function(d,f){this.pageWidth=d;this.pageHeight=f;this.left=this.pageWidth*this.config.x;this.top=this.pageHeight*this.config.y;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.margin=Math.floor(5*this.width/100);this.content.css({left:this.left+"px",top:this.top+"px",width:this.width+"px",height:this.height+"px"});this.resizeImages()},resizeImages:function(){var g=this.getImageWidth();this.imagesContent.css({width:this.margin+(this.margin+g)*this.$images.length+"px"});if(1==this.$images.length){var l=this.$images[0],k=this.margin+g;l.css({left:k+"px"});this.resizeImage(l)}else{for(var h=0;h<this.$images.length;h++){l=this.$images[h],k=this.margin+(this.margin+g)*h,l.css({left:k+"px"}),this.resizeImage(l)}}}}).extend("Item");Class("FlipJump",{Package:"PageItem",create:function(h,n,m,l,k){this._super(h,n,m,l);this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.id="jump"+k;this.itemHeight=Math.floor(0.7*this.height);this.images=this.config.images;this.images[0]||(this.images=[this.images.Image]);this.Items=[];this.imageCount=this.images.length;if(this.images&&this.images instanceof Array){for(h=0;h<this.images.length;h++){this.Items.push(this.images[h]),this.Items[h]=this.fixRelativePath(this.Items[h])}}this.minZindex=0;this.maxZindex=this.images.length+1;this.content=$("<div></div>");this.content.css({position:"absolute",left:this.x+"px",top:this.y+"px",width:this.width+"px",height:this.height+"px"});this.setRotation(this.content,this.config.rotation);this.initBackground();this.parent.append(this.content);this.init()},initBackground:function(){if(this.config.addBackground){var c=Color(this.config.backgroundColor);this.content.css({"background-color":c.rgba(this.config.backgroundAlpha)})}this.config.addBorder&&(c=Color(this.config.borderColor),this.content.css({border:"1px solid "+c.rgba(this.config.borderAlpha)}))},parseConfig:function(c){return{width:c.location.width,height:c.location.height,rotation:c.location.rotation,x:c.location.x,y:c.location.y,alpha:c.alpha,images:c.Images,addBackground:parseBool(c.addBack),addBorder:parseBool(c.addBorder),backgroundColor:c.backgroundColor,backgroundAlpha:c.backgroundColorAlpha,borderColor:c.backgroundBorderColor}},init:function(){this.busy=!1;this.imageItems=[];for(var d=0;d<this.Items.length;d++){var f=new FlipJumpItem(this,0==d?!1:!0);f.setImage(this.Items[d]);this.imageItems.push(f)}this.resetZindex();this.resetJumpEvent();1<=this.imageCount&&this.initButtons()},initButtons:function(){this.leftButton=$('<img class="flip-action" src="'+uiBaseURL+'pre_image.png" style="position:absolute;z-index:1000"></img>');this.rightButton=$('<img class="flip-action" src="'+uiBaseURL+'next_image.png" style="position:absolute;z-index:1000"></img>');this.setButtonPosition();var c=this;this.leftButton.bind(_event._click,function(d){this.preImage();d.stopPropagation&&d.stopPropagation();return !1}.bind(this));this.rightButton.bind(_event._click,function(d){this.nextImage();d.stopPropagation&&d.stopPropagation();return !1}.bind(this));this.leftButton.css({display:"none"});this.rightButton.css({display:"none"});this.content.append(this.leftButton);this.content.append(this.rightButton);isPhone()||isPad()||(this.content.bind(_event._enter,function(){c.leftButton.css({display:"block"});c.rightButton.css({display:"block"})}),this.content.bind(_event._leave,function(){c.leftButton.css({display:"none"});c.rightButton.css({display:"none"})}))},preImage:function(){if(!0!=this.busy){this.busy=!0;var d=this.imageItems[this.imageCount-1],f=this;this.imageItems[0].randomRotate();d.rotateTo(0,40);d.jumpUp(function(){d.setZindex(f.maxZindex);d.jumpDown(function(){f.imageItems.pop();f.imageItems.unshift(d);f.resetZindex();f.busy=!1})})}},nextImage:function(){if(!0!=this.busy){this.busy=!0;var f=this.imageItems[0],h=this.imageItems[1],g=this;1==this.imageItems.length&&(h=f);h.rotateTo(0);f.randomRotate(40);f.jumpUp(function(){f.setZindex(g.minZindex);f.jumpDown(function(){g.imageItems.shift();g.imageItems.push(f);g.resetZindex();g.busy=!1})})}},resetZindex:function(){for(var c=0;c<this.imageItems.length;c++){this.imageItems[c].setZindex(this.imageItems.length-c)}},resetJumpEvent:function(){for(var c=0;c<this.imageItems.length;c++){this.imageItems[c].instance.bind(_event._click,function(){this.nextImage()}.bind(this))}},setButtonPosition:function(){var c=(this.height-32)/2;this.leftButton.css({left:"0px",top:c+"px"});this.rightButton.css({right:"0px",top:c+"px"})},onResize:function(f,h){this.pageWidth=f;this.pageHeight=h;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.content.css({width:this.width+"px",height:this.height+"px"});this.setPosition();this.setButtonPosition();this.itemHeight=Math.floor(0.7*this.height);for(var g=0;g<this.imageItems.length;g++){this.imageItems[g].resize()}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.content.css({left:this.x+"px",top:this.y+"px"})}}).extend("Item");var FlipJumpItem=Class({create:function(d,f){this.parent=d;this.initRotate=f;this.rotation=0;this.height=this.width=d.itemHeight;this.imageHeight=this.imageWidth=0;this.instance=$("<img></img>");this.instance.css({position:"absolute",left:"0px",top:"0px",width:this.width+"px",height:this.height+"px",border:"2px solid white",display:"none"});this.instance.on("load",function(){this.onImageLoad()}.bind(this));this.initShadow();d.content.append(this.instance)},initShadow:function(){this.instance.css({"-moz-box-shadow":"2px 2px 4px #252525","box-shadow":"2px 2px 4px #252525","-webkit-box-shadow":"2px 2px 4px #252525","-ms-box-shadow":"2px 2px 4px #252525","-o-box-shadow":"2px 2px 4px #252525"})},getRandomRotation:function(){return 60-Math.ceil(120*Math.random())},onImageLoad:function(){var c=this.instance[0];this.imageWidth=c.naturalWidth;this.imageHeight=c.naturalHeight;this.width=Math.ceil(this.height*this.imageWidth/this.imageHeight);this.left=Math.ceil((this.parent.width-this.width)/2);this.top=Math.ceil((this.parent.height-this.height)/2);this.instance.css({left:this.left+"px",top:this.top+"px",width:this.width+"px",height:this.height+"px",display:"block"});!0==this.initRotate&&(c=this.getRandomRotation(),this.instance.rotate(c),this.rotation=c)},setImage:function(c){this.instance.attr("src",c)},setZindex:function(c){this.instance.css({"z-index":c})},randomRotate:function(d){var f=this.getRandomRotation();this.rotateTo(f,d)},rotateTo:function(l,r){var q=this.rotation,p=20;void 0!=r&&(p=r);var o=this,n=0,m=window.setInterval(function(){var b=$.easing.swing(null,n,q,l-q,p);o.instance.rotate(b);o.rotation=b;n++>=p&&window.clearInterval(m)},20)},jumpUp:function(c){this.instance.animate({top:Math.floor(1.3*-this.height)},400,c)},jumpDown:function(c){this.instance.animate({top:this.top},400,c)},resize:function(){if(0!=this.imageWith||0!=this.imageHeight){this.height=this.parent.itemHeight,this.width=Math.ceil(this.height*this.imageWidth/this.imageHeight),this.left=Math.ceil((this.parent.width-this.width)/2),this.top=Math.ceil((this.parent.height-this.height)/2),this.instance.animate({left:this.left,top:this.top,width:this.width,height:this.height},400)}}});Class("Rotate3D",{Package:"PageItem",create:function(h,n,m,l,k){this._super(h,n,m,l);this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.id="3d"+k;if(""!=this.config.images&&(this.images=this.config.images,this.images||(this.images=[]),this.Item=[],this.images instanceof Array||(this.images=[],this.images.node&&(this.images=[this.images.node]),this.images.Image&&(this.images=[this.image.Image])),this.imageCount=this.images.length,0!=this.imageCount)){this.topZindex=this.imageCount;if(this.images&&this.images.length){for(h=0;h<this.images.length;h++){this.Item.push(this.images[h]),this.Item[h]=this.fixRelativePath(this.Item[h])}}h=!0==this.config.addBorder?1:0;this.content=$("<div></div>");this.content.css({position:"absolute",overflow:"hidden",left:this.x+"px",top:this.y+"px",width:this.width+"px",height:this.height+"px",border:h+"px solid "+Color(this.config.borderColor).toString()});this.setRotation(this.content,this.config.rotation);!0==this.config.addBackground&&this.content.css({background:Color(this.config.backgroundColor).toString(),opacity:this.config.backgroundAlpha/100});this.parent.append(this.content);this.init();this.rotateTimer=-1;this.step=0}},parseConfig:function(c){return{width:c.location.width,height:c.location.height,x:c.location.x,y:c.location.y,rotation:c.location.rotation,alpha:c.alpha,images:c.componentData.Images,addBackground:parseBool(c.componentData.addBack),addBorder:parseBool(c.componentData.addBorder),backgroundColor:c.componentData.backColor,backgroundAlpha:c.componentData.backAlpha,borderColor:c.componentData.borderColor,sh:parseBool(c.shadow.hasDropShadow),sx:c.shadow.shadowBlurX,sy:c.shadow.shadowBlurY,se:c.shadow.shadowDistance,sr:c.shadow.shadowColor}},init:function(){this.imageItems=[];for(var d=0;d<this.Item.length;d++){var f=new Rotate3DItem(this,d);f.setImage(this.Item[d]);this.imageItems.push(f)}this.imageItems[0].show();this.currentIndex=0;1<this.Item.length&&this.initButtons()},initButtons:function(){this.leftButton=$('<img class="flip-action" src="'+uiBaseURL+'pre_image.png" style="position:absolute;z-index:1000"></img>');this.rightButton=$('<img class="flip-action" src="'+uiBaseURL+'next_image.png" style="position:absolute;z-index:1000"></img>');this.setButtonPosition();var c=this;this.leftButton.bind(_event._down,this.preImage.bind(this));this.rightButton.bind(_event._down,this.nextImage.bind(this));this.leftButton.bind(_event._end,this.stopRotate.bind(this));this.rightButton.bind(_event._end,this.stopRotate.bind(this));this.leftButton.bind(_event._leave,this.stopRotate.bind(this));this.rightButton.bind(_event._leave,this.stopRotate.bind(this));isTouchDevice()||(this.leftButton.css({display:"none"}),this.rightButton.css({display:"none"}));this.content.append(this.leftButton);this.content.append(this.rightButton);this.content.bind(_event._enter,function(){c.leftButton.css({display:"block"});c.rightButton.css({display:"block"})});this.content.bind(_event._leave,function(){c.leftButton.css({display:"none"});c.rightButton.css({display:"none"})})},setButtonPosition:function(){var c=(this.height-32)/2;this.leftButton.css({left:"0px",top:c+"px"});this.rightButton.css({right:"0px",top:c+"px"})},onResize:function(f,h){this.pageWidth=f;this.pageHeight=h;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.content.css({width:this.width+"px",height:this.height+"px"});this.setPosition();this.setButtonPosition();for(var g=0;g<this.imageItems.length;g++){this.imageItems[g].resize()}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.content.css({left:this.x+"px",top:this.y+"px"})},preImage:function(){this.step=-1;this.startRotate()},nextImage:function(){this.step=1;this.startRotate()},startRotate:function(){var c=this;this.doRotate();window.clearInterval(this.rotateTimer);this.rotateTimer=window.setInterval(function(){c.doRotate()},120)},doRotate:function(){var c=this.currentIndex;this.currentIndex+=this.step;0>this.currentIndex&&(this.currentIndex+=this.imageCount);this.currentIndex>=this.imageCount&&(this.currentIndex%=this.imageCount);this.imageItems[c].hide();this.imageItems[this.currentIndex].show()},stopRotate:function(){window.clearInterval(this.rotateTimer);this.step=0;this.rotateTimer=-1}}).extend("Item");var Rotate3DItem=Class({create:function(f,h){var g=this;this.parent=f;this.zIndex=h;this.height=this.parent.height;this.width=this.parent.width;this.imageHeight=this.imageWidth=0;this.instance=$("<img></img>");this.instance.css({position:"absolute",left:"0px",top:"0px",width:this.width+"px",height:this.height+"px",display:"none"});this.setZindex(h);this.initShadow();this.instance.on("load",function(){Rotate3DItem.prototype.onImageLoad.apply(g,arguments)});f.content.append(this.instance)},initShadow:function(){var c=this.parent.config;this.shadowColor=Color(c.sr).toString();!0==c.sh&&this.instance.css({"box-shadow":c.sx+"px "+c.sy+"px "+c.se+"px "+this.shadowColor,"-moz-box-shadow":c.sx+"px "+c.sy+"px "+c.se+"px "+this.shadowColor,"-webkit-box-shadow":c.sx+"px "+c.sy+"px "+c.se+"px "+this.shadowColor,"-ms-box-shadow":c.sx+"px "+c.sy+"px "+c.se+"px "+this.shadowColor,"-o-box-shadow":c.sx+"px "+c.sy+"px "+c.se+"px "+this.shadowColor})},onImageLoad:function(){var c=this.instance[0];this.imageWidth=c.naturalWidth;this.imageHeight=c.naturalHeight;this.height=Math.floor(0.9*this.parent.height);this.width=Math.ceil(this.height*this.imageWidth/this.imageHeight);this.left=Math.ceil((this.parent.width-this.width)/2);this.top=Math.ceil((this.parent.height-this.height)/2);this.instance.css({left:this.left+"px",top:this.top+"px",width:this.width+"px",height:this.height+"px",display:"block"})},setImage:function(c){this.instance.attr("src",c)},setZindex:function(c){this.instance.css({"z-index":c})},show:function(){this.setZindex(this.parent.topZindex)},hide:function(){this.setZindex(this.zIndex)},resize:function(){if(0!=this.imageWidth||0!=this.imageHeight){this.height=Math.floor(0.9*this.parent.height),this.width=Math.ceil(this.height*this.imageWidth/this.imageHeight),this.left=Math.ceil((this.parent.width-this.width)/2),this.top=Math.ceil((this.parent.height-this.height)/2),this.instance.animate({left:this.left,top:this.top,width:this.width,height:this.height},400)}}});Class("EmbeddedSlideshow",{Package:"PageItem",create:function(g,l,k,h){this._super(g,l,k,h);l=Instance.copy(this.config.images);this.photoItem=[];if(l.Image){if("string"==typeof l.Image&&this.photoItem.push(l.Image),l.Image instanceof Array){for(g=0;g<l.Image.length;g++){this.photoItem.push(l.Image[g].Image)}}}else{for(g=0;g<l.length;g++){this.photoItem.push(l[g])}}l=this.photoItem.length;for(g=0;g<l;g++){this.photoItem[g]=this.fixRelativePath(this.photoItem[g])}if(4>l){for(g=l;4>g;g++){this.photoItem[g]=this.photoItem[0]}}this.imgIndex=-1;this.imgWidth=this.config.width*this.pageWidth;this.imgHeight=this.config.height*this.pageHeight;this.boxWidth=this.imgWidth-8;this.boxHeight=this.imgHeight-8;this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.interval=0;this.fadeTime=400;this.alpha=0;this.nextAlpha=100;this.nextTop=this.nextLeft=this.top=this.left=0;this.images=[];this.background=$("<div></div>");this.background.css({"z-index":"199",width:this.imgWidth,height:this.imgHeight});this.setRotation(this.background,this.config.rotation);this.image0Holder=$("<div class='type3'></div>");this.image1Holder=$("<div class='type3'></div>");this.image2Holder=$("<div class='type3'></div>");this.image3Holder=$("<div class='type3'></div>");this.img=$("<img style='position : absolute;' />");this.parent.append(this.background);this.background.append(this.image3Holder);this.background.append(this.image2Holder);this.background.append(this.image1Holder);this.background.append(this.image0Holder);this.background.css({left:this.x+"px",top:this.y+"px",position:"absolute",overflow:"hidden"});this.image0Holder.css({width:this.boxWidth+"px",height:this.boxHeight+"px",left:(this.imgWidth-this.boxWidth)/2+"px",top:(this.imgHeight-this.boxHeight)/2+"px","-webkit-mask-size":this.boxWidth+"px "+this.boxHeight+"px",position:"absolute","z-index":202});this.image1Holder.css({width:this.boxWidth+"px",height:this.boxHeight+"px",left:(this.imgWidth-this.boxWidth)/2+"px",top:(this.imgHeight-this.boxHeight)/2+"px","-webkit-mask-size":this.boxWidth+"px "+this.boxHeight+"px",position:"absolute","z-index":202});this.image2Holder.css({width:this.boxWidth+"px",height:this.boxHeight+"px",left:(this.imgWidth-this.boxWidth)/2+"px",top:(this.imgHeight-this.boxHeight)/2+"px","-webkit-mask-size":this.boxWidth+"px "+this.boxHeight+"px",position:"absolute","z-index":202});this.image3Holder.css({width:this.boxWidth+"px",height:this.boxHeight+"px",left:(this.imgWidth-this.boxWidth)/2+"px",top:(this.imgHeight-this.boxHeight)/2+"px","-webkit-mask-size":this.boxWidth+"px "+this.boxHeight+"px",position:"absolute","z-index":202});this.addItem();this.currentImageHolder=this.image0Holder;this.nextImageHolder=this.image1Holder;this.currentImage=0;this.nextImage=1;this.image0Holder.append(this.images[0]);this.image1Holder.append(this.images[(this.currentImage+1)%this.images.length]);this.image2Holder.append(this.images[(this.currentImage+2)%this.images.length]);this.image3Holder.append(this.images[(this.currentImage+3)%this.images.length]);this.moveLeft=this.boxWidth/5;this.moveTop=this.boxHeight/5;this.tranLeft=this.moveLeft/100;this.tranTop=this.moveTop/100;$(this.image0Holder.children()).css({left:-this.moveLeft,top:-this.moveTop});$(this.image1Holder.children()).css({left:this.moveLeft,top:-this.moveTop});$(this.image2Holder.children()).css({left:this.moveLeft,top:this.moveTop});$(this.image3Holder.children()).css({left:-this.moveLeft,top:this.moveTop});this.image0Holder.css({opacity:"0"});this.image1Holder.css({opacity:"0"});this.image2Holder.css({opacity:"0"});this.image3Holder.css({opacity:"1"})},play:function(){this.timer1=setTimeout(this.transition.bind(this),this.interval);this.playing=!0},pause:function(){this.playing=!1},parseConfig:function(c){return{width:c.location.width,height:c.location.height,rotation:c.location.rotation,x:c.location.x,y:c.location.y,alpha:c.alpha,images:c.Images}},transition:function(){function d(){0<f.fadeTime&&(f.fadeTime-=1,300<f.fadeTime&&400>=f.fadeTime&&0<f.nextAlpha&&100>=f.alpha&&(f.alpha+=1,f.nextAlpha-=1,$(f.image0Holder).css({opacity:f.alpha/100}),$(f.image3Holder).css({opacity:f.nextAlpha/100}),f.left=parseFloat($(f.image0Holder.children()).css("left").replace("px",""))+f.tranLeft,f.top=parseFloat($(f.image0Holder.children()).css("top").replace("px",""))+f.tranTop,f.nextLeft=parseFloat($(f.image3Holder.children()).css("left").replace("px",""))+f.tranLeft,f.nextTop=parseFloat($(f.image3Holder.children()).css("top").replace("px",""))-f.tranTop,$(f.image0Holder.children()).css({left:f.left,top:f.top}),$(f.image1Holder.children()).css({left:f.moveLeft,top:-f.moveTop}),$(f.image2Holder.children()).css({left:f.moveLeft,top:f.moveTop}),$(f.image3Holder.children()).css({left:f.nextLeft,top:f.nextTop}),301==f.fadeTime&&(f.currentImage=(f.currentImage+1)%f.images.length,f.nextImage=(f.nextImage+1)%f.images.length,f.image1Holder.empty().append(f.images[f.currentImage]),f.image2Holder.empty().append(f.images[f.nextImage]),f.image1Holder.css({opacity:"0"}),f.image2Holder.css({opacity:"0"}),$(f.image1Holder.children()).css({left:f.moveLeft,top:-f.moveTop}),$(f.image2Holder.children()).css({left:f.moveLeft,top:f.moveTop}))),200<f.fadeTime&&300>=f.fadeTime&&0<f.alpha&&100>=f.nextAlpha&&(f.nextAlpha+=1,f.alpha-=1,$(f.image0Holder).css({opacity:f.alpha/100}),$(f.image1Holder).css({opacity:f.nextAlpha/100}),f.left=parseFloat($(f.image0Holder.children()).css("left").replace("px",""))+f.tranLeft,f.top=parseFloat($(f.image0Holder.children()).css("top").replace("px",""))+f.tranTop,f.nextLeft=parseFloat($(f.image1Holder.children()).css("left").replace("px",""))-f.tranLeft,f.nextTop=parseFloat($(f.image1Holder.children()).css("top").replace("px",""))+f.tranTop,$(f.image0Holder.children()).css({left:f.left,top:f.top}),$(f.image1Holder.children()).css({left:f.nextLeft,top:f.nextTop}),$(f.image2Holder.children()).css({left:f.moveLeft,top:f.moveTop}),$(f.image3Holder.children()).css({left:-f.moveLeft,top:f.moveTop}),202==f.fadeTime&&(f.currentImage=(f.currentImage+1)%f.images.length,f.nextImage=(f.nextImage+1)%f.images.length,f.image2Holder.empty().append(f.images[f.currentImage]),f.image3Holder.empty().append(f.images[f.nextImage]),f.image3Holder.css({opacity:"0"}),f.image2Holder.css({opacity:"0"}),$(f.image2Holder.children()).css({left:f.moveLeft,top:f.moveTop}),$(f.image3Holder.children()).css({left:-f.moveLeft,top:f.moveTop}))),100<f.fadeTime&&200>=f.fadeTime&&0<f.nextAlpha&&100>=f.alpha&&(f.alpha+=1,f.nextAlpha-=1,$(f.image2Holder).css({opacity:f.alpha/100}),$(f.image1Holder).css({opacity:f.nextAlpha/100}),f.left=parseFloat($(f.image2Holder.children()).css("left").replace("px",""))-f.tranLeft,f.top=parseFloat($(f.image2Holder.children()).css("top").replace("px",""))-f.tranTop,f.nextLeft=parseFloat($(f.image1Holder.children()).css("left").replace("px",""))-f.tranLeft,f.nextTop=parseFloat($(f.image1Holder.children()).css("top").replace("px",""))+f.tranTop,$(f.image0Holder.children()).css({left:-f.moveLeft,top:-f.moveTop}),$(f.image1Holder.children()).css({left:f.nextLeft,top:f.nextTop}),$(f.image2Holder.children()).css({left:f.left,top:f.top}),$(f.image3Holder.children()).css({left:-f.moveLeft,top:f.moveTop}),101==f.fadeTime&&(f.currentImage=(f.currentImage+1)%f.images.length,f.nextImage=(f.nextImage+1)%f.images.length,f.image3Holder.empty().append(f.images[f.currentImage]),f.image0Holder.empty().append(f.images[f.nextImage]),f.image3Holder.css({opacity:"0"}),f.image0Holder.css({opacity:"0"}),$(f.image0Holder.children()).css({left:-f.moveLeft,top:-f.moveTop}),$(f.image3Holder.children()).css({left:-f.moveLeft,top:f.moveTop}))),0<f.fadeTime&&100>=f.fadeTime&&0<f.alpha&&100>=f.nextAlpha&&(f.nextAlpha+=1,f.alpha-=1,$(f.image2Holder).css({opacity:f.alpha/100}),$(f.image3Holder).css({opacity:f.nextAlpha/100}),f.left=parseFloat($(f.image2Holder.children()).css("left").replace("px",""))-f.tranLeft,f.top=parseFloat($(f.image2Holder.children()).css("top").replace("px",""))-f.tranTop,f.nextLeft=parseFloat($(f.image3Holder.children()).css("left").replace("px",""))+f.tranLeft,f.nextTop=parseFloat($(f.image3Holder.children()).css("top").replace("px",""))-f.tranTop,$(f.image0Holder.children()).css({left:-f.moveLeft,top:-f.moveTop}),$(f.image1Holder.children()).css({left:f.moveLeft,top:-f.moveTop}),$(f.image2Holder.children()).css({left:f.left,top:f.top}),$(f.image3Holder.children()).css({left:f.nextLeft,top:f.nextTop}),1==f.fadeTime&&(f.currentImage=(f.currentImage+1)%f.images.length,f.nextImage=(f.nextImage+1)%f.images.length,f.image0Holder.empty().append(f.images[f.currentImage]),f.image1Holder.empty().append(f.images[f.nextImage]),f.image0Holder.css({opacity:"0"}),f.image1Holder.css({opacity:"0"}),$(f.image0Holder.children()).css({left:-f.moveLeft,top:-f.moveTop}),$(f.image1Holder.children()).css({left:f.moveLeft,top:-f.moveTop}))));0>=f.fadeTime&&(clearInterval(f.timer0),f.fadeTime=400,f.playing&&(f.timer1=setTimeout(f.transition.bind(f),f.interval)))}if(!(1>this.photoItem.length)){var f=this;f.timer0=setInterval(d,20)}},addItem:function(){for(var h=this,n=0;n<h.photoItem.length;n++){var m=$("<div></div>");m.css({width:h.boxWidth+"px",height:h.boxHeight+"px",position:"absolute"});var l=$('<img data-mask="'+uiBaseURL+'centerblur.png"/>');l.css("position","absolute");var k=h.photoItem[n];m.append(l);$(l).on("load",function(){var b=$(this)[0];$(this).css({left:(h.boxWidth-b.naturalWidth)/2+"px",top:(h.boxHeight-b.naturalHeight)/2+"px",position:"absolute"})}).attr("src",k);h.images[n]=m}},resizeItem:function(){for(var g=0;g<this.photoItem.length;g++){var l=this.images[g],k=l.children(),h=k[0];void 0!=k&&null!=k&&$(k).css({left:(this.boxWidth-h.naturalWidth)/2+"px",top:(this.boxHeight-h.naturalHeight)/2+"px",position:"absolute"});this.images[g]=l}},onResize:function(d,f){this.pageWidth=d;this.pageHeight=f;this.imgWidth=this.config.width*this.pageWidth;this.imgHeight=this.config.height*this.pageWidth;this.boxWidth=this.imgWidth-8;this.boxHeight=this.imgHeight-8;this.moveLeft=this.boxWidth/5;this.moveTop=this.boxHeight/5;this.tranLeft=this.moveLeft/100;this.tranTop=this.moveTop/100;this.background.css({width:this.imgWidth,height:this.imgHeight});this.setPosition()},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.background.css({left:this.x+"px",top:this.y+"px"});this.image0Holder.css({width:this.boxWidth+"px",height:this.boxHeight+"px",left:(this.imgWidth-this.boxWidth)/2+"px",top:(this.imgHeight-this.boxHeight)/2+"px","-webkit-mask-size":this.boxWidth+"px "+this.boxHeight+"px",position:"absolute"});this.image1Holder.css({width:this.boxWidth+"px",height:this.boxHeight+"px",left:(this.imgWidth-this.boxWidth)/2+"px",top:(this.imgHeight-this.boxHeight)/2+"px","-webkit-mask-size":this.boxWidth+"px "+this.boxHeight+"px",position:"absolute"});this.image2Holder.css({width:this.boxWidth+"px",height:this.boxHeight+"px",left:(this.imgWidth-this.boxWidth)/2+"px",top:(this.imgHeight-this.boxHeight)/2+"px","-webkit-mask-size":this.boxWidth+"px "+this.boxHeight+"px",position:"absolute"});this.image3Holder.css({width:this.boxWidth+"px",height:this.boxHeight+"px",left:(this.imgWidth-this.boxWidth)/2+"px",top:(this.imgHeight-this.boxHeight)/2+"px","-webkit-mask-size":this.boxWidth+"px "+this.boxHeight+"px",position:"absolute"});$(this.image0Holder.children()).css({width:this.boxWidth+"px",height:this.boxHeight+"px",left:-this.moveLeft,top:-this.moveTop});$(this.image1Holder.children()).css({width:this.boxWidth+"px",height:this.boxHeight+"px",left:this.moveLeft,top:-this.moveTop});$(this.image2Holder.children()).css({width:this.boxWidth+"px",height:this.boxHeight+"px",left:this.moveLeft,top:this.moveTop});$(this.image3Holder.children()).css({width:this.boxWidth+"px",height:this.boxHeight+"px",left:-this.moveLeft,top:this.moveTop});this.resizeItem()}}).extend("Item");Class("FlashSwf",{Package:"PageItem",create:function(g,l,k,h){this.config=this.parseConfig(l);this.parent=g;this.pageWidth=k;this.pageHeight=h;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.left=this.pageWidth*this.config.x;this.top=this.pageHeight*this.config.y;this.config.src=this.config.src;this.config.hint&&(this.config.hint.hintShapeColor=Color(this.config.hint.hintShapeColor).toString(),this.config.hint.hintShapeColor2=Color(this.config.hint.hintShapeColor2).toString());this.content=$("<div></div>");this.content.css({position:"absolute",left:this.left,top:this.top,width:this.width,height:this.height});this.setRotation(this.content,this.config.rotation);this.parent.append(this.content);isTouchDevice()||(this.config.src=this.fixRelativePath(this.config.src),this.initLinkHint(this.content),this.content.flash({swf:this.config.src,width:this.width+"px",height:this.height+"px",wmode:"transparent"}),parseBool(this.config.reflection)&&this.imageReflection(this.content))},parseConfig:function(c){return{width:c.location.width,height:c.location.height,rotation:c.location.rotation,reflection:c.location.reflection,reflectionType:c.location.reflectionType,reflectionAlpha:c.location.reflectionAlpha,x:c.location.x,y:c.location.y,alpha:c.alpha,src:c.swfURL,hint:c.hint,shadow:c.shadow}},onResize:function(d,f){this.pageWidth=d;this.pageHeight=f;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.content.css({width:this.width+"px",height:this.height+"px"});this.content.flash().remove();this.content.flash({swf:this.config.src,width:this.width+"px",height:this.height+"px",wmode:"transparent"});this.setPosition(this.config.x*this.pageWidth,this.config.y*this.pageHeight)},setPosition:function(d,f){this.content.css({left:d+"px",top:f+"px"})},hide:function(){this.content.html("")},show:function(){this.content.flash({swf:this.config.src,width:this.width+"px",height:this.height+"px",wmode:"transparent"})}}).extend(PageItem.Item);(function(h){var n=0,m={mode:"iframe",standard:"html5",popHt:500,popWd:400,popX:200,popY:200,popTitle:"",popClose:!1,extraCss:"",extraHead:"",retainAttr:["id","class","style"]},l={};h.fn.printArea=function(c){h.extend(l,m,c);n++;h("[id^=printArea_]").remove();l.id="printArea_"+n;c=h(this);var b=k.getPrintWindow();k.write(b.doc,c);setTimeout(function(){k.print(b)},1000)};var k={print:function(f){var b=f.win;h(f.doc).ready(function(){b.focus();b.print();"popup"==l.mode&&l.popClose&&setTimeout(function(){b.close()},2000)})},write:function(d,f){d.open();d.write(k.docType()+"<html>"+k.getHead()+k.getBody(f)+"</html>");d.close()},docType:function(){return"iframe"==l.mode?"":"html5"==l.standard?"<!DOCTYPE html>":'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01'+("loose"==l.standard?" Transitional":"")+'//EN" "http://www.w3.org/TR/html4/'+("loose"==l.standard?"loose":"strict")+'.dtd">'},getHead:function(){var c="";l.extraHead&&l.extraHead.replace(/([^,]+)/g,function(b){c+=b});return"<head><title>"+l.popTitle+"</title>"+c+"</head>"},getBody:function(g){var f="",b=l.retainAttr;g.each(function(){for(var r=k.getFormData(h(this)),p="",d=0;d<b.length;d++){var o=h(r).attr(b[d]);o&&(p+=(0<p.length?" ":"")+b[d]+"='"+o+"'")}f+="<div "+p+">"+h(r).html()+"</div>"});return"<body>"+f+"</body>"},getFormData:function(o){var g=o.clone(),b=h("input,select,textarea",g);h("input,select,textarea",o).each(function(q){var p=h(this).attr("type");"undefined"===h.type(p)&&(p=h(this).is("select")?"select":h(this).is("textarea")?"textarea":"");var f=b.eq(q);"radio"==p||"checkbox"==p?f.attr("checked",h(this).is(":checked")):"text"==p?f.attr("value",h(this).val()):"select"==p?h(this).find("option").each(function(d){h(this).is(":selected")&&h("option",f).eq(d).attr("selected",!0)}):"textarea"==p&&f.text(h(this).val())});return g},getPrintWindow:function(){switch(l.mode){case"iframe":var c=new k.Iframe;return{win:c.contentWindow||c,doc:c.doc};case"popup":return c=new k.Popup,{win:c,doc:c.doc}}},Iframe:function(){var o=l.id,f;try{f=document.createElement("iframe"),document.body.appendChild(f),h(f).attr({style:"border:0;position:absolute;width:0px;height:0px;right:0px;top:0px;",id:o,src:"#"+(new Date).getTime()}),f.doc=null,f.doc=f.contentDocument?f.contentDocument:f.contentWindow?f.contentWindow.document:f.document}catch(b){throw b+". iframes may not be supported in this browser."}if(null==f.doc){throw"Cannot find document."}return f},Popup:function(){var c;c="location=yes,statusbar=no,directories=no,menubar=no,titlebar=no,toolbar=no,dependent=no"+(",width="+l.popWd+",height="+l.popHt);c+=",resizable=yes,screenX="+l.popX+",screenY="+l.popY+",personalbar=no,scrollbars=yes";c=window.open("","_blank",c);c.doc=c.document;return c}}})(jQuery);var QAF_UNKNOWN=-1,QAF_RIGHT=0,QAF_MISTAKE=1;Class("QuizPanelPC",{Package:"PageItem",create:function(d,f){this.config=f;this.parent=d;this.quiz=this.config.action.quiz;this.quiz[0]||(this.quiz=[this.quiz.topic]);this.background=$("<div></div>");this.container=$("<div></div>");this.closeButton=$("<div></div>");this.content=$("<div></div>");this.title=$("<div class='titleDiv'></div>");this.button=$("<div></div>");this.rightSmile=$("<div style='background:url("+uiBaseURL+"quiz.png) no-repeat -5px -14px;position:absolute;left:25px;top:85px;width:38px;height:50px'></div>");this.mistakeSmile=$("<div style='background:url("+uiBaseURL+"quiz.png) no-repeat -5px -74px;position:absolute;right:25px;top:85px;width:38px;height:50px'></div>");this.rightNumber=$("<div style='position:absolute;left:37px;top:145px;color:#03B503;font-size:25px;font-weight:bold'>0</div>");this.mistakeNumber=$("<div style='position:absolute;right:37px;top:145px;color:red;font-size:25px;font-weight:bold'>0</div>");this.nextPage=$("<div/></div>");this.prePage=$("<div><div>");this.advanceImg=$("<div></div>");this.parent.append(this.background);this.progressBar=new TopicProgressBar(this.quiz.length);this.parent.append(this.container);this.container.append(this.content);this.container.append(this.closeButton);this.initQuiz();this.content.append(this.title).append(this.changBox).append(this.rightSmile).append(this.mistakeSmile).append(this.rightNumber).append(this.mistakeNumber).append(this.nextPage).append(this.prePage).append(this.progressBar.progressContainer);this.title.html(this.config.action.guizTxt);""==this.config.action.guizURL?this.setQuestionURL(this.topicItem[0].QuizTopicPanel.content):(this.advance=new SetAdvance(this.config.action,this),this.content.append(this.advance.QuizTopicPanel.content),this.hideButton(),this.progressBar.progressContainer.hide(),this.advance.start.on("click",function(){this.setQuestionURL(this.topicItem[0].QuizTopicPanel.content);this.showButton();this.topicItem[this.currentIndex].QuizTopicPanel.Animate();this.prePage.hide();this.progressBar.progressContainer.show();this.advance.QuizTopicPanel.content.remove()}.bind(this)));this.setCss();this.initEvent();this.prePage.hide()},setQuestionURL:function(c){this.content.append(c)},initEvent:function(){this.currentIndex=0;var c=this.topicItem.length;this.OnNextPageClick=function(){if(!(this.currentIndex>c)){if(this.currentIndex+=1,this.progressBar.setProgress(this.currentIndex+1),this.currentIndex<c){this.setQuestionURL(this.topicItem[this.currentIndex].QuizTopicPanel.content),this.topicItem[this.currentIndex].QuizTopicPanel.Animate(),this.prePage.show()}else{var b=new Onclusion(this,this.config.action,this.rightNumber[0].innerText,this.mistakeNumber[0].innerText);this.setQuestionURL(b.QuizTopicPanel.content);this.nextPage.hide()}}}.bind(this);this.nextPage.on("click",this.OnNextPageClick);this.prePage.on("click",function(){0!=this.currentIndex&&(0==this.currentIndex&&(this.currentIndex+=c),this.currentIndex=(this.currentIndex-1)%c,this.setQuestionURL(this.topicItem[this.currentIndex].QuizTopicPanel.content),this.topicItem[this.currentIndex].QuizTopicPanel.Animate(),this.progressBar.setProgress(this.currentIndex+1),this.nextPage.show(),0==this.currentIndex&&this.prePage.hide())}.bind(this));this.background.bind(_event._down,function(d){this.hideBackground();d.stopPropagation()}.bind(this));this.closeButton.bind("click",function(d){this.hideBackground();d.stopPropagation()}.bind(this));this.nextPage.on("mouseover",function(){this.nextPage.css({background:"url("+uiBaseURL+"quiz.png) no-repeat -257px -61px",cursor:"pointer"})}.bind(this));this.nextPage.on("mouseout",function(){this.nextPage.css("background","url("+uiBaseURL+"quiz.png) no-repeat -257px -16px")}.bind(this));this.prePage.on("mouseover",function(){this.prePage.css({background:"url("+uiBaseURL+"quiz.png) no-repeat -310px -62px",cursor:"pointer"})}.bind(this));this.prePage.on("mouseout",function(){this.prePage.css("background","url("+uiBaseURL+"quiz.png) no-repeat -310px -17px")}.bind(this))},initQuiz:function(){this.topicItem=[];this.topicAnswer=[];for(var c=0;c<this.quiz.length;c++){this.topic=new SetQuestionPanel(this,this.quiz[c],c),this.topicItem.push(this.topic),this.topicAnswer[c]=null}},getAnswerFlags:function(){for(var d=[],f=0;f<this.quiz.length;f++){null===this.topicAnswer[f]?d[f]=QAF_UNKNOWN:this.topicAnswer[f]==this.topicItem[f].getRightAnswer()?d[f]=QAF_RIGHT:d[f]=QAF_MISTAKE}return d},statistics:function(){for(var g=this.getAnswerFlags(),l=0,k=0,h=0;h<g.length;h++){g[h]==QAF_RIGHT&&l++,g[h]==QAF_MISTAKE&&k++}this.rightNumber[0].innerText=Number(l).toString();this.mistakeNumber[0].innerText=Number(k).toString()},showButton:function(){this.rightSmile.show();this.mistakeSmile.show();this.rightNumber.show();this.mistakeNumber.show();this.nextPage.show();this.prePage.show()},hideButton:function(){this.rightSmile.hide();this.mistakeSmile.hide();this.rightNumber.hide();this.mistakeNumber.hide();this.nextPage.hide();this.prePage.hide()},setCss:function(){this.title.css({position:"relative",margin:"auto",width:"570px",height:"25px","margin-top":"20px","text-align":"center","font-size":"20px","font-family":"-webkit-pictograph"});this.closeButton.asButton();this.closeButton.css({position:"absolute","background-image":"url("+uiBaseURL+"close_form.png)",width:"32px",height:"32px","z-index":"500",cursor:"pointer","margin-left":"700px","margin-top":"24px"});this.container.css({position:"absolute",width:"760px",height:"550px",position:"absolute",margin:"auto",left:"0",top:"0",right:"0",bottom:"0","z-index":"500"});this.nextPage.css({background:"url("+uiBaseURL+"quiz.png) no-repeat -257px -16px",position:"absolute",margin:"auto",right:"22px",top:"210px",width:"36px",height:"36px"});this.prePage.css({background:"url("+uiBaseURL+"quiz.png) no-repeat -310px -17px",position:"absolute",margin:"auto",left:"27px",top:"210px",width:"36px",height:"36px"});this.content.css({position:"absolute",background:"url("+uiBaseURL+"quiz.png) no-repeat -6px -148px","max-width":"722px","max-height":"502px",width:"100%",height:"100%",margin:"auto",left:"0",top:"0",right:"0",bottom:"0"});this.background.css({position:"absolute",opacity:"0.5","background-color":"black",width:"100%",height:"100%","z-index":"100"})},onResize:function(){},show:function(){this.background.css("display","block")},hideBackground:function(){this.background.css("display","none");this.container.css({transform:"scale(0)","-webkit-transform":"scale(0)","-moz-transform":"scale(0)","-ms-transform":"scale(0)","-o-transform":"scale(0)"});animateOnce(this.container,{},0.6,function(){},"","ease")}}).extend(PageItem.Item);Class("QuizTopicPanel",{create:function(c){this.config=c;this.content=$("<div></div>");this.deg=10;this.setCss();this.Animate()},getQuizTopicPanel:function(){return this.content},setCss:function(){this.content.css({transform:"rotateZ(10deg) rotateX(10deg)","-weblkit-transform":"rotateZ(10deg) rotateX(10deg)","-moz-transform":"rotateZ(10deg) rotateX(10deg)","-ms-transform":"rotateZ(10deg) rotateX(10deg)","-o-transform":"rotateZ(10deg) rotateX(10deg)","transform-origin":"50% 80%","-webkit-transform-origin":"50% 80%","-ms-transform-origin":"50% 80%","-moz-transform-origin":"50% 80%","-o-transform-origin":"50% 80%",position:"absolute",background:"white",margin:"auto","margin-top":"40px",left:0,right:0,width:"560px",height:"360px",border:"3px solid #b8d0da","border-radius":"14px"})},Animate:function(){this.show.runInAnimate(this,300)},show:function(g,l){var k=$.easing.easeOutCubic(null,g,10,-10,l),h=$.easing.easeOutCubic(null,g,45,-45,l);this.content.css("transform","rotateX("+h+"deg) rotateY("+h+"deg) rotateZ("+k+"deg) ")}});Class("SetQuestionPanel",{create:function(f,h,g){this.config=h;this.index=g;this.quizPanel=f;this.questionPanel=$("<div></div>");this.question=$("<span style='color:rgb(0,153,255);font-size:30px;font-weight:bold;font-family:Verdana;position:absolute;top:15px;left:15px'>Q:</span>");this.initAnswer();this.questionTitle=$("<span style='color:rgb(0,153,255);font-size:20px;position:absolute;top:25px;left:70px'>"+this.config.title+"</span>");this.mediaImg=$("<img src='"+this.config.media+"' style='max-width:280px;max-height:220px;position:absolute;bottom: 0px;top:0px;margin:auto;left:50px;'/>");this.noImgAnswerPanel=$("<div></div>");this.imgAnswerPanel=$("<div></div>");this.QuizTopicPanel=new QuizTopicPanel;this.QuizTopicPanel.getQuizTopicPanel().append(this.questionPanel.append(this.question).append(this.questionTitle).append(this.mediaImg));""==this.config.media?(this.mediaImg.remove(),this.questionPanel.append(this.noImgAnswerPanel)):this.questionPanel.append(this.imgAnswerPanel);this.setCss();this.getRightAnswer();this.addTopicAnswer()},initAnswer:function(){this.Items=[];for(var c in this.config){c.startsWith("answer")&&this.Items.push(this.config[c])}},getRightAnswer:function(){for(var c=0;c<this.Items.length;c++){"true"==this.Items[c].dataRight&&(this.dataRight=this.Items[c].value)}return this.dataRight},addTopicAnswer:function(){for(var d=0;d<this.Items.length;d++){var f=new TopicAnswer(this.quizPanel,this.Items[d],this.config,this.dataRight,this.index);""==this.config.media?(0==(d+1)%2&&f.answerPanel.css("margin-left","20px"),this.noImgAnswerPanel.append(f.answerPanel)):this.imgAnswerPanel.append(f.answerPanel)}},setCss:function(){this.imgAnswerPanel.css({width:"210PX",position:"absolute",right:"0px",top:"80px","overflow-x":"hidden",height:"250px"});this.noImgAnswerPanel.css({top:"125px",position:"absolute",width:"455px",left:"95px","overflow-x":"hidden",height:"230px"});this.questionPanel.css({position:"absolute",width:"560px",height:"350px",margin:"auto",right:0,left:0,top:0,bottom:0})}});Class("TopicAnswer",{create:function(h,n,m,l,k){this.index=k;this.quizPanel=h;this.config=m;this.answer=n;this.dataRight=l;this.answerPanel=$("<div></div>");this.checkBox=$("<div class='check-box'><div>");this.answerValue=$("<div>"+this.answer.value+"</div>");this.answerPanel.append(this.checkBox);this.answerPanel.append(this.answerValue);this.initEvent();this.setCss()},initEvent:function(){this.checkBox.on("click",function(){this.quizPanel.topicAnswer[this.index]=this.answer.value;this.quizPanel.statistics();this.answerResult=new TopicAnswerResult(this.quizPanel,this.config,this.answer,this.dataRight);this.quizPanel.content.append(this.answerResult.content)}.bind(this));this.checkBox.on("mouseover",function(){this.checkBox.css({width:"26px",height:"26px",cursor:"pointer",background:"url("+uiBaseURL+"quiz.png) no-repeat -630px -63px"})}.bind(this));this.checkBox.on("mouseleave",function(){this.checkBox.css({width:"20px",height:"20px",cursor:"pointer",background:"url("+uiBaseURL+"quiz.png) no-repeat -465px -67px"})}.bind(this))},setCss:function(){this.answerValue.css({color:"#0f5177",position:"relative","margin-left":"30px","font-size":"15px",color:"#0f5177",width:"165px","font-family":"Verdana"});this.answerPanel.css({width:"200px","margin-top":"20px",position:"relative",display:"inline-block"});this.checkBox.css({position:"absolute",background:"url("+uiBaseURL+"quiz.png) no-repeat -465px -67px",width:"20px",height:"20px"})}});Class("SetAdvance",{create:function(c){this.config=c;this.advanceImg=$("<img src='"+this.config.guizURL+"'/>");this.start=$("<div></div");this.QuizTopicPanel=new QuizTopicPanel;this.QuizTopicPanel.getQuizTopicPanel().append(this.advanceImg).append(this.start);this.QuizTopicPanel.Animate();this.start.css({background:"url("+uiBaseURL+"quiz.png) no-repeat -366px -20px",position:"absolute",width:"81px",height:"30px",right:0,left:0,bottom:"35px",margin:"auto"});this.advanceImg.css({"max-width":"360px","max-height":"250px",position:"absolute",top:"20px",right:0,left:0,margin:"auto"});this.start.on("mouseover",function(){this.start.css({background:"url("+uiBaseURL+"quiz.png) no-repeat -366px -59px",cursor:"pointer"})}.bind(this));this.start.on("mouseout",function(){this.start.css("background","url("+uiBaseURL+"quiz.png) no-repeat -366px -20px")}.bind(this))}});Class("TopicProgressBar",{create:function(c){this.quizLength=c;this.progressContainer=$("<div></div>");this.progressBar=$("<div></div>");this.progressContainer.append(this.progressBar);this.setCss();this.setProgress(1)},setCss:function(){this.progressContainer.css({position:"absolute",margin:"auto",right:"0",left:"0",bottom:"10px",width:"550px",border:"3px solid white",height:"18px","background-color":"rgb(229,233,236)","border-radius":"10px"});this.progressBar.css({background:"rgba(107,216,254,90)","float":"left",height:"18px","text-align":"center","line-height":"2","border-radius":"10px"})},setProgress:function(c){this.progressBar.css("width",100/(this.quizLength+1)*c+"%");this.progressBar.css("width").replace("px","")}});Class("TopicAnswerResult",{create:function(g,l,k,h){this.quizPanel=g;this.dataRight=h;this.config=l;this.answer=k;this.content=$("<div></div>");this.nextQuestion=$("<div></div>");this.nextPage=$("<div></div>");this.nextText=$("<div>NEXT QUESTION</div>");this.answerOption=$("<span style='color:rgb(0,153,255);font-size:30px;font-weight:bold;font-family:Verdana;position:absolute;top:25px;left:35px'>A:</span>");this.answerResult=$("<span style='color:rgb(0,153,255);font-size:20px;position:absolute;top:35px;left:82px'></span>");this.JudgeResult=$("<span></span>");this.content.append(this.nextQuestion.append(this.nextPage).append(this.nextText)).append(this.answerOption).append(this.answerResult).append(this.JudgeResult);this.setCss();this.initEvent();this.answerResult.text(this.dataRight);"true"==this.answer.dataRight?this.JudgeResult.text(this.config.rightTxt):this.JudgeResult.text(this.config.wrongTxt)},initEvent:function(){this.nextPage.on("click",this.quizPanel.OnNextPageClick);this.nextText.on("click",this.quizPanel.OnNextPageClick);this.nextText.on("mouseover",function(){this.nextText.css({cursor:"pointer"})}.bind(this));this.nextPage.on("mouseover",function(){this.nextPage.css({background:"url("+uiBaseURL+"quiz.png) no-repeat -257px -61px",cursor:"pointer"})}.bind(this));this.nextPage.on("mouseout",function(){this.nextPage.css("background","url("+uiBaseURL+"quiz.png) no-repeat -257px -16px")}.bind(this))},setCss:function(){this.content.css({position:"absolute",margin:"auto","margin-top":"43px",left:0,right:0,width:"460px",height:"280px",border:"3px solid rgb(184, 208, 218)",bottom:"50px",background:"white","border-radius":"14px"});this.nextText.css({color:"rgb(0,153,255)","font-size":"14px","font-weight":"bold",width:"50px",position:"absolute",right:"110px",bottom:"30px","font-family":"Verdana"});this.nextPage.css({background:"url("+uiBaseURL+"quiz.png) no-repeat -257px -16px",position:"absolute",bottom:"30px",right:"30px",width:"36px",height:"36px"});this.JudgeResult.css({position:"absolute",width:"460px","text-align":"center",bottom:"140px",color:"black","font-family":"Verdana","font-size":"18px"})}});Class("Onclusion",{create:function(g,l,k,h){this.quizPanel=g;this.mistakeNumber=h;this.config=l;this.rightNumber=k;this.percentageNumber=Math.floor(this.rightNumber/this.quizPanel.quiz.length*100);this.onclusionPanel=$("<div></div>");this.hint=$("<div>You haven't selected an answer,please select one</div>");this.clusion=$("<div>"+this.config.guizEndTxt+"</div>");this.Percentage=$("<div>"+getLanguage("TTActionQuiz_Ration","Your ration is")+" "+this.percentageNumber+"%</div>");this.scorePanel=$("<div></div>");this.score=$("<div style='color: rgb(0, 152, 255);width: 315px;height: 45px;overflow-x: hidden'></div>");this.isAgain=$("<span>"+getLanguage("TTActionQuiz_PlayAgain","Do you wanna play it again?")+"</span>");this.button=$("<div></div>");this.yesButton=$("<div></div>");this.noButton=$("<div></div>");this.rightSmile=$("<div style='background:url("+uiBaseURL+"quiz.png) no-repeat -5px -14px;position:absolute;width:38px;height:50px'></div>");this.mistakeSmile=$("<div style='background:url("+uiBaseURL+"quiz.png) no-repeat -5px -74px;position:absolute;width:38px;height:50px'></div>");this.byeBye=$("<div style='background:url("+uiBaseURL+"quiz.png) no-repeat -506px -66px;position:absolute;width:105px;height:20px;left:300px;top:230px'></div>");this.QuizTopicPanel=new QuizTopicPanel;this.QuizTopicPanel.content.append(this.onclusionPanel);0==this.mistakeNumber&&0==this.rightNumber?this.onclusionPanel.append(this.hint):this.onclusionPanel.append(this.clusion);this.onclusionPanel.append(this.Percentage).append(this.isAgain).append(this.scorePanel.append(this.score)).append(this.button.append(this.yesButton).append(this.noButton));this.setCss();this.initEvent();0<=this.percentageNumber&&25>=this.percentageNumber&&this.score.text(this.config.score[3]);25<this.percentageNumber&&50>=this.percentageNumber&&this.score.text(this.config.score[2]);50<this.percentageNumber&&75>=this.percentageNumber&&this.score.text(this.config.score[1]);75<this.percentageNumber&&100>=this.percentageNumber&&(this.score.text(this.config.score[0]),100==this.percentageNumber&&this.score.css("color","#0098ff"))},initEvent:function(){this.yesButton.on("click",function(){this.quizPanel.currentIndex=0;this.quizPanel.progressBar.setProgress(1);this.clearAllCount();this.quizPanel.statistics();this.quizPanel.setQuestionURL(this.quizPanel.topicItem[0].QuizTopicPanel.content);this.quizPanel.prePage.hide();this.quizPanel.nextPage.show()}.bind(this));this.noButton.on("click",function(){this.removeAllChild(this.quizPanel.content[0]);this.quizPanel.content.append(this.QuizTopicPanel.content);var d={transform:"scale(0.75)","-webkit-transform":"scale(0.7)","-moz-transform":"scale(0.7)","-ms-transform":"scale(0.7)","-o-transform":"scale(0.7)"},f={transform:"scale(0)","-webkit-transform":"scale(0)","-moz-transform":"scale(0)","-ms-transform":"scale(0)","-o-transform":"scale(0)"};this.removeAllChild(this.QuizTopicPanel.content[0]);this.quizPanel.content.append(this.rightSmile).append(this.mistakeSmile).append(this.byeBye);this.byeBye.animate("easeInElastic");this.rightSmile.animate({left:"210px"},400,"easeOutElastic");this.mistakeSmile.animate({right:"220px"},400,"easeOutElastic");(function(){animateOnce(this.QuizTopicPanel.content,d,0.3,null,"","ease");animateOnce(this.quizPanel.container,f,1,function(){this.quizPanel.background.css("display","none")}.bind(this),"","ease")}).delay(this,400)}.bind(this));this.yesButton.on("mouseover",function(){this.yesButton.css({background:"url("+uiBaseURL+"quiz.png) no-repeat -71px -59px",cursor:"pointer"})}.bind(this));this.yesButton.on("mouseout",function(){this.yesButton.css("background","url("+uiBaseURL+"quiz.png) no-repeat -71px -20px")}.bind(this));this.noButton.on("mouseover",function(){this.noButton.css({background:"url("+uiBaseURL+"quiz.png) no-repeat -161px -59px",cursor:"pointer"})}.bind(this));this.noButton.on("mouseout",function(){this.noButton.css("background","url("+uiBaseURL+"quiz.png) no-repeat -161px -20px")}.bind(this))},clearAllCount:function(){for(var d=this.quizPanel.quiz.length,f=0;f<d;f++){this.quizPanel.topicAnswer[f]=null}},removeAllChild:function(c){for(;c.hasChildNodes();){c.removeChild(c.firstChild)}},setCss:function(){this.rightSmile.css({margin:"auto",bottom:"0px",top:"0px",left:"45px",transform:"scale(3.5)","-webkit-transform":"scale(3.5)","-moz-transform":"scale(3.5)","-ms-transform":"scale(3.5)","-o-transform":"scale(3.5)"});this.mistakeSmile.css({margin:"auto",bottom:"0px",top:"0px",right:"50px",transform:"scale(3.5)","-webkit-transform":"scale(3.5)","-moz-transform":"scale(3.5)","-ms-transform":"scale(3.5)","-o-transform":"scale(3.5)"});this.scorePanel.css({position:"absolute",margin:"auto",right:"0px",left:"0px",top:"160px",color:"gray",width:"300px","text-align":"center",height:"45px",overflow:"hidden","font-size":"20px"});this.Percentage.css({"font-weight":"bold","font-size":"20px",position:"absolute",margin:"auto",top:"120px",left:"0px",right:"0px",width:"200px",height:"20px"});this.clusion.css({width:"560px","font-size":"24px",color:"#045DD0","text-align":"center","margin-top":"40px"});this.isAgain.css({color:"#00a5ff","font-size":"20px","font-weight":"bold",width:"250px",position:"absolute","text-align":"center",bottom:"90px",right:"0px",left:"0px",margin:"auto"});this.hint.css({width:"385px","font-size":"20px","font-weight":"bold",color:"#045DD0","text-align":"center","margin-left":"75px","margin-top":"35px"});this.onclusionPanel.css({position:"absolute","border-radius":"10px",background:$.browser.prefix+"linear-gradient(90deg,#f4f4f5,#FFFFFF)",margin:"auto",bottom:"0px",right:"0px",left:"0px",top:"0px"});this.yesButton.css({width:"81px",height:"30px",position:"absolute",background:"url("+uiBaseURL+"/quiz.png) no-repeat -71px -20px"});this.noButton.css({width:"81px",height:"30px",right:"0px",position:"absolute",background:"url("+uiBaseURL+"/quiz.png) no-repeat -161px -20px"});this.button.css({margin:"auto",bottom:"25px",right:"0px",left:"0px",width:"204px",height:"30px",position:"absolute"})}});Class("QuizPanelMobile",{Package:"PageItem",create:function(d,f){this.config=f;this.quiz=this.config.action.quiz;this.quiz[0]||(this.quiz=[this.quiz.topic]);this.container=$("<div></div>");this.content=$("<div class='container-box'></div>");this.contentMiddle=$("<div></div>");this.contentBottom=$("<div></div>");this.closeButton=$("<div></div>");this.title=$("<div>"+this.config.action.guizTxt+"</div>");this.rightNumber=$("<div>0</div>");this.mistakeNumber=$("<div>0</div>");this.questionContent=$("<div></div>");this.initQuiz();this.setCss();this.initEvent();this.setSwipe();this.progressBar=new TopicProgressBarMobile(this.quiz.length,this.currentIndex);d.append(this.container.append(this.contentMiddle).append(this.contentBottom).append(this.closeButton).append(this.content.append(this.title).append(this.questionContent)).append(this.progressBar.progressContainer));""==this.config.action.guizURL?this.setQuestionURL(this.topicItem[0].questionPanel):(this.advance=new SetAdvanceMobile(this.config.action,this),this.content.append(this.advance.advanceImg).append(this.advance.start),this.progressBar.progressContainer.hide(),this.advance.start.on("click",function(){this.setQuestionURL(this.topicItem[0].questionPanel);this.progressBar.progressContainer.show();this.advance.advanceImg.remove();this.advance.start.remove()}.bind(this)))},initEvent:function(){this.currentIndex=0;var c=this.topicItem.length;this.OnNextPageClick=function(){if(!(this.currentIndex>c)){if(this.currentIndex+=1,this.progressBar.setProgress(this.currentIndex+1,c+1),this.currentIndex<c){this.setQuestionURL(this.topicItem[this.currentIndex].questionPanel)}else{var b=new OnclusionMobile(this,this.config.action,this.rightNumber[0].innerText,this.mistakeNumber[0].innerText);this.setQuestionURL(b.onclusionPanel)}}}.bind(this);this.closeButton.on("click",function(){this.hide()}.bind(this))},setQuestionURL:function(c){this.questionContent.append(c)},initQuiz:function(){this.topicItem=[];this.topicAnswer=[];for(var c=0;c<this.quiz.length;c++){this.topic=new QuestionPanelMobile(this,this.quiz[c],c),this.topicItem.push(this.topic),this.topicAnswer[c]=null}},getAnswerFlag:function(){for(var d=[],f=0;f<this.quiz.length;f++){null===this.topicAnswer?d[f]=QAF_UNKNOWN:this.topicAnswer[f]==this.topicItem[f].getRightAnswer()?d[f]=QAF_RIGHT:d[f]=QAF_MISTAKE}return d},flushCount:function(){for(var g=this.getAnswerFlag(),l=0,k=0,h=0;h<g.length;h++){g[h]==QAF_RIGHT&&l++,g[h]==QAF_MISTAKE&&k++}this.rightNumber[0].innerText=Number(l);this.mistakeNumber[0].innerText=Number(k)},setSwipe:function(){this.currentIndex=0;var c=function(k,o){var n;n=30*windowWidth/1600;if(!(Math.abs(k)<=n)){var m=this.topicItem.length;if(k<-n){if(this.currentIndex>m){return}this.progressBar.setProgress(this.currentIndex+1,m+1);this.currentIndex+=1;this.progressBar.setProgress(this.currentIndex+1,m+1);if(this.currentIndex<m){this.setQuestionURL(this.topicItem[this.currentIndex].questionPanel)}else{var l=new OnclusionMobile(this,this.config.action,this.rightNumber[0].innerText,this.mistakeNumber[0].innerText);this.setQuestionURL(l.onclusionPanel)}}if(k>n){if(0>this.currentIndex){return}this.currentIndex-=1;this.setQuestionURL(this.topicItem[this.currentIndex].questionPanel);this.progressBar.setProgress(this.currentIndex+1,m+1)}$.browser.mise?event.cancelBubble=!0:event.stopPropagation()}}.bind(this);this.questionContent.speed(c)},show:function(){animateOnce(this.container,{transform:"translate(0,0)","-webkit-transform":"translate(0,0)","-moz-transform":"translate(0,0)","-o-transform":"translate(0,0)","-ms-transform":"translate(0,0)"},0.3,null,"","ease")},hide:function(){animateOnce(this.container,{transform:"translate(100%,0)","-webkit-transform":"translate(100%,0)","-moz-transform":"translate(100%,0)","-o-transform":"translate(100%,0)","-ms-transform":"translate(100%,0)"},0.3,null,"","ease")},setCss:function(){this.questionContent.css({position:"absolute","margin-top":"30px",background:"white",width:windowWidth-70+"px",left:"0px",right:"0px",margin:"auto","overflow-x":"hidden",height:windowHeight-150+"px"});this.title.css({position:"relative",margin:"auto",width:windowWidth-50+"px",height:"22px","margin-top":"20px","text-align":"center","font-size":"20px","font-family":"-webkit-pictograph"});this.closeButton.css({background:"url("+uiBaseURL+"quiz.png) no-repeat -69px -100px",width:"42px",height:"47px","z-index":"100",position:"absolute",right:"0px"});this.contentBottom.css({position:"absolute",border:"1px solid rgba(221,221,221,0.6)",top:"34px",left:"0px",right:"0px","background-color":"rgba(255,255,255,0.6)",width:windowWidth-90+"px",height:"50px",margin:"auto","border-radius":"5px"});this.contentMiddle.css({position:"absolute",border:"1px solid rgba(221,221,221,0.8)",top:"41px",left:"0px",right:"0px","background-color":"rgba(255,255,255,0.8)",width:windowWidth-70+"px",height:"50px",margin:"auto","border-radius":"5px","z-index":"100"});this.container.css({position:"absolute","background-color":"#eeeeee",width:windowWidth+"px",height:windowHeight+"px",transform:"translate(100%,0)","-webkit-transform":"translate(100%,0)","-moz-transform":"translate(100%,0)","-o-transform":"translate(100%,0)","-ms-transform":"translate(100%,0)","z-index":"100"});this.content.css({position:"absolute",border:"1px solid #dddddd",bottom:"50px",left:"0px",right:"0px",margin:"auto","background-color":"#FFFFFF",width:windowWidth-50+"px",height:windowHeight-100+"px","border-radius":"5px","z-index":"100"})},onResize:function(){}}).extend(PageItem.Item);Class("QuestionPanelMobile",{create:function(f,h,g){this.config=h;this.index=g;this.quizPanel=f;this.questionPanel=$("<div></div>");this.question=$("<span style='color:rgb(0,153,255);font-size:18px;font-weight:bold;font-family:Verdana;top:15px;left:15px'>Q:</span>");this.initAnswer();this.questionTitle=$("<span style='color:rgb(0,153,255);font-size:15px;top:19px;left:45px'>"+this.config.title+"</span>");this.mediaImg=$("<img src='"+this.config.media+"' style='max-width:"+(windowWidth-70)+"px;max-height:220px;margin-top:20px'/>");this.questionPanel.append(this.question).append(this.questionTitle).append(this.mediaImg);this.getRightAnswer();this.addTopicAnswer();this.questionPanel.css({width:windowWidth-55+"px","overflow-x":"hidden","margin-top":"20px",position:"absolute","background-color":"white",height:windowHeight-170+"px"})},initAnswer:function(){this.Items=[];for(var c in this.config){c.startsWith("answer")&&this.Items.push(this.config[c])}},getRightAnswer:function(){for(var d=0;d<this.Items.length;d++){if("true"==this.Items[d].dataRight){var f=this.Items[d].value}}return f},addTopicAnswer:function(){for(var d=0;d<this.Items.length;d++){var f=new TopicAnswerMoblie(this.quizPanel,this.Items[d],this.config,this.getRightAnswer(),this.index);this.questionPanel.append(f.answerPanel)}}});Class("TopicAnswerResultMobile",{create:function(g,l,k,h){this.quizPanel=g;this.dataRight=h;this.config=l;this.answer=k;this.content=$("<div></div>");this.nextQuestion=$("<div></div>");this.nextPage=$("<div></div>");this.nextText=$("<div>NEXT QUESTION</div>");this.answerOption=$("<span style='color:rgb(0,153,255);font-size:30px;font-weight:bold;font-family:Verdana;position:absolute;top:25px;left:35px'>A:</span>");this.answerResult=$("<span style='color:rgb(0,153,255);font-size:20px;position:absolute;top:35px;left:82px'></span>");this.JudgeResult=$("<span></span>");this.content.append(this.nextQuestion.append(this.nextPage).append(this.nextText)).append(this.answerOption).append(this.answerResult).append(this.JudgeResult);this.setCss();this.initEvent();this.answerResult.text(this.dataRight);"true"==this.answer.dataRight?this.JudgeResult.text(this.config.rightTxt):(this.JudgeResult.text(this.config.wrongTxt),this.JudgeResult.css("color","red"))},initEvent:function(){this.nextPage.on("click",this.quizPanel.OnNextPageClick);this.nextPage.on("click",function(){this.content.remove()}.bind(this));this.nextText.on("click",this.quizPanel.OnNextPageClick);this.nextText.on("click",function(){this.content.remove()}.bind(this))},setCss:function(){this.content.css({position:"absolute",margin:"auto","margin-top":"43px",left:0,right:0,width:windowWidth-70+"px",height:windowHeight-200+"px",border:"1px solid #dddddd",bottom:"50px",background:"white","border-radius":"4px","z-index":100});this.nextText.css({color:"rgb(0,153,255)","font-size":"14px","font-weight":"bold",width:"50px",position:"absolute",right:"110px",bottom:"30px","font-family":"Verdana"});this.nextPage.css({background:"url("+uiBaseURL+"quiz.png) no-repeat -257px -16px",position:"absolute",bottom:"30px",right:"30px",width:"36px",height:"36px"});this.JudgeResult.css({position:"absolute",width:windowWidth-70+"px","text-align":"center",bottom:"140px",color:"green","font-family":"Verdana","font-size":"18px"})}});Class("TopicAnswerMoblie",{create:function(h,n,m,l,k){this.quizPanel=h;this.config=m;this.answer=n;this.index=k;this.dataRight=l;this.answerPanel=$("<div></div>");this.checkBox=$("<div><div>");this.answerValue=$("<div>"+this.answer.value+"</div>");this.answerPanel.append(this.checkBox);this.answerPanel.append(this.answerValue);this.initEvent();this.setCss()},initEvent:function(){this.checkBox.on("click",function(){this.quizPanel.topicAnswer[this.index]=this.answer.value;this.quizPanel.flushCount();this.answerResult=new TopicAnswerResultMobile(this.quizPanel,this.config,this.answer,this.dataRight);this.quizPanel.container.append(this.answerResult.content)}.bind(this))},setCss:function(){this.answerValue.css({color:"#0f5177",position:"relative","margin-left":"30px","font-size":"15px",color:"#0f5177",width:"165px","font-family":"Verdana"});this.answerPanel.css({width:"200px","margin-top":"20px",position:"relative"});this.checkBox.css({position:"absolute",background:"url("+uiBaseURL+"quiz.png) no-repeat -465px -67px",width:"20px",height:"20px"})}});Class("OnclusionMobile",{create:function(g,l,k,h){this.quizPanel=g;this.config=l;this.rightNumber=k;this.mistakeNumber=h;this.percentageNumber=Math.floor(this.rightNumber/this.config.quiz.length*100);this.onclusionPanel=$("<div></div>");this.hint=$("<div>You haven't selected an answer,please select one</div>");this.clusion=$("<div>"+this.config.guizEndTxt+"</div>");this.Percentage=$("<div>"+getLanguage("TTActionQuiz_Ration","Your ration is")+" "+this.percentageNumber+"%</div>");this.scorePanel=$("<div></div>");this.score=$("<div style='color:#DCAB1B;width: "+(windowWidth-70)+"px;height: 45px;overflow-x: hidden'></div>");this.isAgain=$("<span>"+getLanguage("TTActionQuiz_PlayAgain","Do you wanna play it again?")+"</span>");this.button=$("<div></div>");this.yesButton=$("<div></div>");this.noButton=$("<div></div>");0==this.mistakeNumber&&0==this.rightNumber?this.onclusionPanel.append(this.hint):this.onclusionPanel.append(this.clusion);this.onclusionPanel.append(this.Percentage).append(this.isAgain).append(this.scorePanel.append(this.score)).append(this.button.append(this.yesButton).append(this.noButton));this.setCss();this.initEvent();0<=this.percentageNumber&&25>=this.percentageNumber&&this.score.text(this.config.score[3]);25<this.percentageNumber&&50>=this.percentageNumber&&this.score.text(this.config.score[2]);50<this.percentageNumber&&75>=this.percentageNumber&&this.score.text(this.config.score[1]);75<this.percentageNumber&&100>=this.percentageNumber&&(this.score.text(this.config.score[0]),100==this.percentageNumber&&this.score.css("color","#0098ff"))},initEvent:function(){this.yesButton.on("click",function(){this.quizPanel.currentIndex=0;this.clearFlushCount();this.quizPanel.flushCount();this.quizPanel.progressBar.setProgress(1,this.quizPanel.quiz.length+1);this.quizPanel.setQuestionURL(this.quizPanel.topicItem[0].questionPanel)}.bind(this));this.noButton.on("click",function(){this.quizPanel.hide()}.bind(this))},clearFlushCount:function(){for(var d=this.quizPanel.quiz.length,f=0;f<d;f++){this.topicAnswer[f]=null}},setCss:function(){this.scorePanel.css({position:"absolute",margin:"auto",right:"0px",left:"0px",top:"160px",color:"gray",width:windowWidth-70+"px","text-align":"center",height:"45px",overflow:"hidden","font-size":"15px"});this.Percentage.css({"font-weight":"bold","font-size":"15px",position:"absolute",margin:"auto",top:"120px",left:"0px",right:"0px",width:windowWidth-70+"px","text-align":"center",height:"20px"});this.clusion.css({width:windowWidth-70+"px","font-size":"17px",color:"#045DD0","text-align":"center","margin-top":"40px"});this.isAgain.css({color:"#00a5ff","font-size":"15px","font-weight":"bold",width:"250px",position:"absolute","text-align":"center",bottom:"90px",right:"0px",left:"0px",margin:"auto"});this.hint.css({width:"250px","font-size":"15px","font-weight":"bold",color:"#045DD0","text-align":"center","margin-top":"35px"});this.onclusionPanel.css({position:"absolute",width:windowWidth-70+"px","border-radius":"10px",background:"white",margin:"auto",bottom:"0px",right:"0px",left:"0px",top:"0px"});this.yesButton.css({width:"81px",height:"30px",position:"absolute",background:"url("+uiBaseURL+"/quiz.png) no-repeat -71px -20px"});this.noButton.css({width:"81px",height:"30px",right:"0px",position:"absolute",background:"url("+uiBaseURL+"/quiz.png) no-repeat -161px -20px"});this.button.css({margin:"auto",bottom:"25px",right:"0px",left:"0px",width:"204px",height:"30px",position:"absolute"})}});Class("SetAdvanceMobile",{create:function(c){this.config=c;this.advanceImg=$("<img src='"+this.config.guizURL+"'/>");this.start=$("<div></div");this.start.css({background:"url("+uiBaseURL+"quiz.png) no-repeat -366px -20px",position:"absolute",width:"81px",height:"30px",right:0,left:0,bottom:"35px",margin:"auto"});this.advanceImg.css({"max-width":windowWidth-80+"px","max-height":"200px",position:"absolute",top:0,right:0,left:0,bottom:0,margin:"auto"})}});Class("TopicProgressBarMobile",{create:function(d,f){this.quizLength=d;this.currentIndex=f;this.progressContainer=$("<div></div>");this.progressBar=$("<div></div>");this.progressContainer.append(this.progressBar);this.setCss();this.setProgress(1,this.quizLength+1)},setCss:function(){this.progressContainer.css({position:"absolute",margin:"auto",right:"0",left:"0",bottom:"10px",width:windowWidth-50+"px",height:"30px","background-color":"white","border-radius":"3px"});this.progressBar.css({height:"30px","padding-top":"4px","text-align":"center","border-radius":"10px","font-size":"20px"})},setProgress:function(d,f){if(d>f){return d-1}this.progressBar.text(d+"/"+f)}});Class("ShowInformation",{Package:"PageItem",create:function(g,l){this.config=l;this.config.width=parseInt(this.config.action.width);this.config.height=parseInt(this.config.action.height);this.bgColor1=Color(this.config.action.bgColor1).toString();this.bgColor2=Color(this.config.action.bgColor2).toString();this.buttonColor=Color(this.config.action.buttonColor).toString();this.buttonBgColor=Color(this.config.action.buttonBgColor).toString();this.fontColor=Color(this.config.action.titleColor).toString();this.bodyColor=Color(this.config.action.bodyColor).toString();this.link=this.config.action.link;this.linkLength=this.config.action.link.length;this.background=$("<div></div>");this.contentBox=$('<div id="cbox"></div>');this.closeButton=$('<div id="closebutton"></div>');this.textTitle=$("<div></div>");this.text=$("<div></div>");this.content=$("<div></div>");this.container=$('<div id="conb"></div>');this.imgBox=$("<div></div>");this.img=$("<img>");"http://"==this.link.substring(this.linkLength-7,this.linkLength)?this.button=$("<a href='javascript:void(0);' target='_Blank'></a>"):this.button=$("<a href = '"+this.link+"' target='_Blank' font-family='"+this.config.action.bodyFont+"'></a>");g.append(this.background);g.append(this.container);this.contentBox.append(this.textTitle);this.content.append(this.contentBox);this.container.append(this.content);this.container.append(this.closeButton);this.textTitle.html(this.config.action.titleText);this.button.html(this.config.action.buttonName);var k=new TextFormatAnalyzer(this.config.action.bodyText);if(null==this.config.action.bodyFont){var h=k.getFontFamily().split(",");this.config.action.bodyFont=h[0];this.config.action.bodySize=k.getFontSize();this.config.action.bodyColor=k.getFontColor()}this.image=[this.config.action.imgURL];bookConfig.isFlipPdf&&(this.image[0].startsWith("./")?this.image[0]="."+this.image[0]:this.image[0].isUrl()||(this.image[0]="../"+this.image[0]));this.contentBox.append(this.text);k=new TextFormatAnalyzer(this.config.action.bodyText);k=k.getHTML();this.text.html(k);this.setCss()},setCss:function(){this.img.attr({src:this.image[0],align:"center"});this.background.css({position:"absolute",width:"100%",height:"100%",opacity:"0.5",top:0,"background-color":"black","z-index":"1000"});this.contentBox.append(this.button);this.setPcCss();"null"==this.config.action.imgURL&&(this.contentBox.css({position:"absolute",right:"25px","overflow-x":"hidden",width:this.config.width-50+"px",height:this.config.height-50+"px"}),this.textTitle.css({"font-size":this.config.action.titleSize,color:this.fontColor,"font-family":this.config.action.titleFont,"z-index":"2500",width:this.config.width-50+"px","margin-top":"30px"}),this.text.css({width:this.config.width-50+"px","max-height":this.config.height-150+"px","z-index":"2500","margin-top":"10px",overflow:"auto"}));!0==parseBool(this.config.action.imgBool)&&null!==this.config.action.imgURL?(this.content.append(this.imgBox),this.imgBox.append(this.img),this.imgBox.css({width:"100%",height:"100%",position:"absolute","z-index":"3000","max-width":"195px","max-height":"290px",margin:"auto",right:"0px"}),this.contentBox.css({position:"absolute",left:"20px","overflow-x":"hidden",width:this.config.width-240+"px",height:this.config.height-25+"px"}),this.setText()):!1==parseBool(this.config.action.imgBool)&&"null"!=this.config.action.imgURL&&(this.content.append(this.imgBox),this.imgBox.append(this.img),this.imgBox.css({width:"100%",height:"100%",position:"absolute","z-index":"3000","max-width":"195px","max-height":"290px",margin:"auto",left:"0"}),this.contentBox.css({position:"absolute",right:"10px",width:this.config.width-240+"px","overflow-x":"hidden",height:this.config.height-25+"px"}),this.setText());this.background.bind(_event._down,function(c){this.hide();c.stopPropagation()}.bind(this));this.background.bind(_event._end,function(c){c.stopPropagation()}.bind(this));this.closeButton.asButton();this.closeButton.bind("click",function(){this.hide()}.bind(this))},setPcCss:function(){this.closeButton.css({width:"100%",height:"100%",position:"absolute","background-image":"url("+uiBaseURL+"close_form.png)","background-repeat":"no-repeat",cursor:"pointer","max-width":"32px","max-height":"32px","z-index":"3000","margin-top":"15px","margin-left":parseInt(this.config.width)-20+"px"});this.button.css({position:"absolute",color:this.buttonColor,"padding-left":"10px","padding-right":"10px","background-color":this.buttonBgColor,"text-decoration":"none","z-index":"2500",bottom:"0px",left:"0px"});this.img.css({"max-width":"190px","max-height":"290px",position:"absolute",margin:"auto",left:"0",top:"0",bottom:"0",right:"0"});this.container.css({"max-width":this.config.width+30+"px","max-height":this.config.height+30+"px",position:"absolute",margin:"auto",left:"0",top:"0",bottom:"0",right:"0","z-index":"3000"});this.content.css({width:"100%",height:"100%",position:"absolute",margin:"auto",left:"0",top:"0",bottom:"0",right:"0","max-width":this.config.width,"max-height":this.config.height,"z-index":"1900","background-image":$.browser.prefix+"repeating-linear-gradient("+this.config.action.bgAngle+"deg, "+this.bgColor2+", "+this.bgColor1+")"})},setText:function(){this.textTitle.css({"font-size":this.config.action.titleSize,color:this.fontColor,"font-family":this.config.action.titleFont,"z-index":"2500",width:this.config.width-233+"px","margin-top":"30px",overflow:"hidden","text-overflow":"ellipsis"});this.text.css({"font-size":this.config.action.bodySize+"px",color:this.bodyColor,"font-family":this.config.action.bodyFont,width:this.config.width-240+"px",height:this.config.height-140+"px",padding:"0px",outline:"medium",border:"0px","padding-right":"17px","margin-top":"25px","line-height":"2.0",background:"rgba(255,255,255,0)","z-index":"2500",overflow:"auto"})},show:function(){this.background.css({display:"block"})},hide:function(){animateOnce(this.container,{transform:"scale(0)","-webkit-transform":"scale(0)","-moz-transform":"scale(0)","-o-transform":"scale(0)","-ms-transform":"scale(0)"},0.5,function(){this.background.empty();this.background.remove()}.bind(this),"","ease")}});Class("ShowInformationMobile",{Package:"PageItem",create:function(g,l){this.windowWidth=windowWidth;this.windowHeight=windowHeight;this.config=l;this.bgColor1=Color(this.config.action.bgColor1).toString();this.bgColor2=Color(this.config.action.bgColor2).toString();this.buttonColor=Color(this.config.action.buttonColor).toString();this.buttonBgColor=Color(this.config.action.buttonBgColor).toString();this.fontColor=Color(this.config.action.titleColor).toString();this.bodyColor=Color(this.config.action.bodyColor).toString();this.link=this.config.action.link;this.linkLength=this.config.action.link.length;this.closeButton=$('<div id="closebutton"></div>');this.textTitle=$("<div></div>");this.text=$("<div></div>");this.content=$("<div></div>");this.container=$('<div id="conb"></div>');this.title=$("<div></div>");this.img=$("<img>");this.foot=$('<div style="width:100%;height:70px;position:relative;"></div>');"http://"==this.link.substring(this.linkLength-7,this.linkLength)?this.button=$("<a href='javascript:void(0);' target='_Blank'></a>"):this.button=$("<a href = '"+this.link+"' target='_Blank' font-family='"+this.config.action.bodyFont+"'></a>");this.foot.append(this.button);g.append(this.container);this.textTitle.html(this.config.action.titleText);this.textTitle.text(this.textTitle.text().overflow(20));this.button.html(this.config.action.buttonName);var k=new TextFormatAnalyzer(this.config.action.bodyText);if(null==this.config.action.bodyFont){var h=k.getFontFamily().split(",");this.config.action.bodyFont=h[0];this.config.action.bodySize=k.getFontSize();this.config.action.bodyColor=k.getFontColor()}this.container.append(this.title);this.title.append(this.closeButton);this.title.append(this.textTitle);this.container.append(this.content);this.content.append(this.img);this.content.append(this.text);k=new TextFormatAnalyzer(this.config.action.bodyText);k=k.getHTML();this.text.html(k);this.content.append(this.foot);bookConfig.isFlipPdf&&(this.config.action.imgURL.startsWith("./")?this.config.action.imgURL="."+this.config.action.imgURL:this.config.action.imgURL.isUrl()||(this.config.action.imgURL="../"+this.config.action.imgURL));this.setPhone();this.closeButton.bind("click",function(){this.hide()}.bind(this));k=this.config.action.imgURL?this.config.action.imgURL.toLowerCase().trim():"";"null"!=k&&""!=k||this.img.remove()},setPhone:function(){this.title.css({position:"relative",width:"100%","background-color":"mintcream",border:"#CCCCCC 0.5px solid",height:"40px"});this.img.attr({src:this.config.action.imgURL,align:"center"});this.button.css({position:"absolute",color:this.buttonColor,"padding-left":"8px","padding-right":"8px","background-color":this.buttonBgColor,"text-decoration":"none","z-index":"2500",right:"30px","border-radius":"6px",bottom:"30px"});this.img.css({position:"relative","max-width":"100%","max-height":"200px",margin:"10px auto",display:"block"});this.container.css({position:"absolute",width:"100%",height:"100%",transform:"translate(100%,0)","-webkit-transform":"translate(100%,0)","-moz-transform":"translate(100%,0)","-o-transform":"translate(100%,0)","-ms-transform":"translate(100%,0)","z-index":"3000","background-image":$.browser.prefix+"repeating-linear-gradient("+this.config.action.bgAngle+"deg, "+this.bgColor2+","+this.bgColor1+")"});this.content.css({width:this.windowWidth+15+"px","overflow-x":"hidden",height:this.windowHeight-40+"px"});this.textTitle.css({position:"absolute",width:"50%",margin:"auto","font-size":"12px",color:this.fontColor,"font-family":this.config.action.titleFont,"vertical-align":"middle","line-height":"3.0",left:"0",top:"0",bottom:"0",right:"0","text-align":"center"});this.text.css({width:this.windowWidth-10+"px","font-size":this.config.action.bodySize+"px",color:this.bodyColor,"font-family":this.config.action.bodyFont,"overflow-y":"hidden","margin-top":"20px","padding-left":"5px","line-height":"2.0","text-indent":"2em"});this.closeButton.css({position:"absolute",margin:"auto","background-image":"url("+uiBaseURL+"background_prev.png)","background-repeat":"no-repeat",cursor:"pointer",width:"20px",height:"20px",left:"10px",bottom:"0",top:"0"})},onResize:function(d,f){this.windowWidth=d;this.windowHeight=f;this.setPhone()},show:function(){(function(){animateOnce(this.container,{transform:"translate(0,0)","-webkit-transform":"translate(0,0)","-moz-transform":"translate(0,0)","-o-transform":"translate(0,0)","-ms-transform":"translate(0,0)"},0.3,null,"","ease")}).delay(this,100)},hide:function(){animateOnce(this.container,{transform:"translate(100%,0)","-webkit-transform":"translate(100%,0)","-moz-transform":"translate(100%,0)","-o-transform":"translate(100%,0)","-ms-transform":"translate(100%,0)"},0.3,function(){this.container.empty();this.container.remove()}.bind(this),"","ease")}});Class("HotSpots",{Package:"PageItem",create:function(g,l,k,h){this._super(g,l,k,h);this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.left=this.config.x*this.pageWidth;this.top=this.config.y*this.pageHeight;this.config.hotSpotsURL=this.fixRelativePath(this.config.hotSpotsURL);this.container=$("<div></div>");this.parent.append(this.container);this.setCss();this.initEvent();this.initLinkHint(this.container);this.createHotspot();this.onResize(k,h)},setCss:function(){this.container.css({position:"absolute","z-index":101,cursor:"hand"});this.setRotation(this.container,this.config.rotation)},createHotspot:function(){this.isSuportCanvas()?this.hotspot=new this.CanvasHotspotsContent(this.container,this.config.hotSpotsURL):this.hotspot=$.browser.device==$.browser.DEVICE_PC?new this.FlashHotspotsContent(this.container,this.config.hotSpotsURL):new this.HTMLHotspotsContent(this.container,this.config.hotSpotsURL)},isSuportCanvas:function(){var d=this.getClass();if(void 0==d.suportCanvasFlag){var f=$("<canvas></canvas>");d.suportCanvasFlag=f[0]&&f[0].getContext?!0:!1}return d.suportCanvasFlag},parseConfig:function(c){return{width:c.location.width,height:c.location.height,rotation:c.location.rotation,x:c.location.x,y:c.location.y,hint:c.hint,alpha:c.alpha,hotSpotsURL:c.hotSpotsURL,hintColor:c.hint.hintShapeColor2,hintShapeAlpha:c.hint.hintShapeAlpha,hintShapeType:c.hint.hintShapeType,text:c.hint.text,action:c.action}},onResize:function(d,f){this.pageWidth=d;this.pageHeight=f;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.left=this.config.x*this.pageWidth;this.top=this.config.y*this.pageHeight;this.container.css({width:this.width+"px",height:this.height+"px"});this.setPosition();this.hotspot.onResize()},setPosition:function(){this.container.css({left:this.left+"px",top:this.top+"px"})},initEvent:function(){this.addActionEvent(this.container)},play:function(){this.hotspot&&this.hotspot.start()},stop:function(){this.hotspot&&this.hotspot.stop()},destroy:function(){this.hotspot.destroy()}}).extend(PageItem.Item);Class("HotspotsContent",{Package:"PageItem",create:function(d,f){this.container=d;this.src=f;this.init()},init:virtual_function,onResize:virtual_function,start:virtual_function,stop:virtual_function,destroy:virtual_function});Class("HTMLHotspotsContent",{Package:"PageItem",init:function(){this.frameIndex=1;this.frameCount=60;this.center=$("<div></div>");this.ring=$("<div></div>");this.container.append(this.center);this.container.append(this.ring);this.initStyle(this.center);this.initStyle(this.ring);this.onResize()},initStyle:function(c){c.css({position:"absolute",cursor:"hand","pointer-events":"none",left:"0",top:"0",bottom:"0",right:"0",margin:"auto"})},onResize:function(){this.width=this.container.width();this.height=this.container.height();this.spotWidth=Math.min(this.width,this.height);this.center.css({"background-color":"red",width:this.spotWidth/3+"px",height:this.spotWidth/3+"px","border-radius":this.spotWidth/6+"px"});this.borderWidth=this.spotWidth/20;this.ring.css({border:this.borderWidth+"px solid red",opacity:1});this.draw()},draw:function(){var c=this.spotWidth/3,c=c+this.frameIndex/this.frameCount*(this.spotWidth-c-this.borderWidth);this.ring.css({width:c+"px",height:c+"px","border-radius":(c+this.borderWidth)/2+"px",opacity:(this.frameCount-this.frameIndex)/this.frameCount})},start:function(){this.stop();this.timer=this.animate()},stop:function(){this.timer&&this.timer.stop()},animate:function(){return function(d,f){this.frameIndex=d;this.frameCount=f;this.draw();this.frameIndex==this.frameCount&&(this.timer=this.animate())}.runInAnimate(this,1000)},destroy:function(){this.stop();this.center.remove();this.ring.remove()}}).extend("HotspotsContent");Class("FlashHotspotsContent",{Package:"PageItem",init:function(){},onResize:function(){this.width=this.container.width();this.height=this.container.height();this.container.flash().remove();this.container.flash({swf:this.src,width:this.width+"px",height:this.height+"px",wmode:"transparent"})},draw:function(){},start:function(){},stop:function(){},animate:function(){},destroy:function(){this.container.flash().remove()}}).extend("HotspotsContent");Class("CanvasHotspotsContent",{Package:"PageItem",init:function(){this.frameIndex=1;this.frameCount=60;this.canvas=$("<canvas></canvas>");this.container.append(this.canvas);this.initStyle(this.canvas);this.createDrawer();this.onResize()},initStyle:function(c){c.css({position:"absolute",cursor:"hand","pointer-events":"none",left:"0",top:"0",bottom:"0",right:"0",margin:"auto"})},isSWF:function(f){f=f.toLowerCase();var h=this.src.lastIndexOf("/");-1==h&&(h=this.src.lastIndexOf("\\"));var g=this.src.lastIndexOf(".");return(h=this.src.substring(h+1,g))?(h=h.toLowerCase(),h==f):!1},createDrawer:function(){var c=this.canvas[0].getContext("2d");this.drawer=null;this.isSWF("Black Arrow Circle Hand")&&(this.drawer=new this.RotateHandHotSpotsDrawer(c,"black"));this.isSWF("Black Arrow Circle")&&(this.drawer=new this.RotateRingHotSpotsDrawer(c,"black"));this.isSWF("Black Circle Blinker")&&(this.drawer=new this.BlinkerHotSpotsDrawer(c,"black","#00F1FF"));this.isSWF("Black Circle")&&(this.drawer=new this.ShrinkHotSpotsDrawer(c,"black"));this.isSWF("Black Glow")&&(this.drawer=new this.RoundHotSpotsDrawer(c,"black"));this.isSWF("Black Ripple with Pointer")&&(this.drawer=new this.MouseHotSpotsDrawer(c,"black"));this.isSWF("Black Ripple")&&(this.drawer=new this.RingHotSpotsDrawer(c,"black"));this.isSWF("Black Star in Circle")&&(this.drawer=new this.StarHotSpotsDrawer(c,"black"));this.isSWF("BlackTwo Ripples")&&(this.drawer=new this.RipplesHotSpotsDrawer(c,"black"));this.isSWF("Blue Arrow Circle Hand")&&(this.drawer=new this.RotateHandHotSpotsDrawer(c,"#0033FF"));this.isSWF("Blue Arrow Circle")&&(this.drawer=new this.RotateRingHotSpotsDrawer(c,"#0033FF"));this.isSWF("Blue Circle Blinker")&&(this.drawer=new this.BlinkerHotSpotsDrawer(c,"#0033FF","#00F1FF"));this.isSWF("Blue Circle")&&(this.drawer=new this.ShrinkHotSpotsDrawer(c,"#05338E","#0561BC"));this.isSWF("Blue Glow")&&(this.drawer=new this.RoundHotSpotsDrawer(c,"#0033FF"));this.isSWF("Blue Ripple with Pointer")&&(this.drawer=new this.MouseHotSpotsDrawer(c,"#0033FF"));this.isSWF("Blue Ripple")&&(this.drawer=new this.RingHotSpotsDrawer(c,"#0033FF"));this.isSWF("Blue Star in Circle")&&(this.drawer=new this.StarHotSpotsDrawer(c,"#0044EE"));this.isSWF("Blue Star")&&(this.drawer=new this.RectsHotSpotsDrawer(c,"#3364C5"));this.isSWF("Blue Two Ripples")&&(this.drawer=new this.RipplesHotSpotsDrawer(c,"#0033FF"));this.isSWF("Blue_doughnut")&&(this.drawer=new this.DoughnutHotSpotsDrawer(c,"#3B89FF"));this.isSWF("Default Animation")&&(this.drawer=new this.RectsHotSpotsDrawer(c,"#3364C5"));this.isSWF("Green Arrow Circle Hand")&&(this.drawer=new this.RotateHandHotSpotsDrawer(c,"#009900"));this.isSWF("Green Arrow Circle")&&(this.drawer=new this.RotateRingHotSpotsDrawer(c,"#009900"));this.isSWF("Green Circle Blinker")&&(this.drawer=new this.BlinkerHotSpotsDrawer(c,"#039303","#03F503"));this.isSWF("Green Circle")&&(this.drawer=new this.ShrinkHotSpotsDrawer(c,"#009900"));this.isSWF("Green Glow")&&(this.drawer=new this.RoundHotSpotsDrawer(c,"green"));this.isSWF("Green Ripple with Pointer")&&(this.drawer=new this.MouseHotSpotsDrawer(c,"#009900"));this.isSWF("Green Ripple")&&(this.drawer=new this.RingHotSpotsDrawer(c,"#009900"));this.isSWF("Green Star in Circle")&&(this.drawer=new this.StarHotSpotsDrawer(c,"#009900"));this.isSWF("Green Star")&&(this.drawer=new this.RectsHotSpotsDrawer(c,"#669900"));this.isSWF("Green Two Ripples")&&(this.drawer=new this.RipplesHotSpotsDrawer(c,"#009900"));this.isSWF("Green Doughnut")&&(this.drawer=new this.DoughnutHotSpotsDrawer(c,"#00DAB7"));this.isSWF("Orange Circle")&&(this.drawer=new this.ShrinkHotSpotsDrawer(c,"#CA7000","#F98C00"));this.isSWF("Red Arrow Circle Hand")&&(this.drawer=new this.RotateHandHotSpotsDrawer(c,"red"));this.isSWF("Red Arrow Circle")&&(this.drawer=new this.RotateRingHotSpotsDrawer(c,"red"));this.isSWF("Red Circle Blinker")&&(this.drawer=new this.BlinkerHotSpotsDrawer(c,"red","yellow","#CA7000"));this.isSWF("Red Circle")&&(this.drawer=new this.ShrinkHotSpotsDrawer(c,"red"));this.isSWF("Red Doughnut")&&(this.drawer=new this.DoughnutHotSpotsDrawer(c,"#E58585"));this.isSWF("Red Glow")&&(this.drawer=new this.RoundHotSpotsDrawer(c,"red","#FBBC00"));this.isSWF("Red Ripple with Pointer")&&(this.drawer=new this.MouseHotSpotsDrawer(c,"red"));this.isSWF("Red Ripple")&&(this.drawer=new this.RingHotSpotsDrawer(c,"red"));this.isSWF("Red Star in Circle")&&(this.drawer=new this.StarHotSpotsDrawer(c,"red"));this.isSWF("Red Star")&&(this.drawer=new this.RectsHotSpotsDrawer(c,"red"));this.isSWF("Red Two Ripples")&&(this.drawer=new this.RipplesHotSpotsDrawer(c,"red"));this.isSWF("Yellow Squre")&&(this.drawer=new this.SquareHotSpotsDrawer(c,"red","#FBBC00"));this.isSWF("Yellow Start Blink")&&(this.drawer=new this.SquareStarHotSpotsDrawer(c,"#FBBC00","#FF9900","#DAE405"));this.isSWF("yellow_doughnut")&&(this.drawer=new this.DoughnutHotSpotsDrawer(c,"#FFD56B"));this.drawer||(this.drawer=new this.RingHotSpotsDrawer(c,"red"))},onResize:function(){this.width=0.85*this.container.width();this.height=0.85*this.container.height();this.canvas.attr("width",this.width);this.canvas.attr("height",this.height);this.drawer&&(this.drawer.resize(this.width,this.height),this.draw())},draw:function(){this.drawer&&this.drawer.draw(this.frameIndex,this.frameCount)},start:function(){this.stop();this.timer=this.animate()},animate:function(){return function(d,f){this.frameIndex=d;this.frameCount=f;this.draw();this.frameIndex==this.frameCount&&(this.timer=this.animate())}.runInAnimate(this,1000)},stop:function(){this.timer&&this.timer.stop()},destroy:function(){this.stop();this.canvas.remove()}}).extend("HotspotsContent");Class("HotSpotsDrawer",{Package:"PageItem",create:function(d,f){this.context=d;this.color=Color(f)},resize:function(d,f){this.width=d;this.height=f},rectInCenter:function(d,f){void 0==f&&(f=d);return{left:(this.width-d)/2,top:(this.height-f)/2,width:d,height:f}},draw:virtual_function,clear:function(){this.context.clearRect(0,0,this.width,this.height)},drawStar:function(m,t,s,r){var q=this.context;if(m){t||(t="#FFFF00");s||(s={width:0,color:"#FFFFFF"});void 0==r&&(r=0);var p=Math.min(m.width,m.height)/2,o=0.4*p,n=m.left;m=m.top;q.save();q.translate(n+p,m+p);q.rotate(r*Math.PI/180);q.beginPath();q.moveTo(Math.cos(0.1*Math.PI)*p,-Math.sin(0.1*Math.PI)*p);for(r=0;5>r;r++){q.lineTo(Math.cos((18+72*r)/180*Math.PI)*p,-Math.sin((18+72*r)/180*Math.PI)*p),q.lineTo(Math.cos((54+72*r)/180*Math.PI)*o,-Math.sin((54+72*r)/180*Math.PI)*o)}q.closePath();q.fillStyle=t;q.fill();q.lineWidth=s.width;q.strokeStyle=s.color;0<s.width&&q.stroke();q.restore()}},drawTriangle:function(g,l,k){var h=this.context;g&&(l||(l="#000000"),k||(k={width:0,color:"#FFFFFF"}),h.save(),h.translate(g.left,g.top),h.beginPath(),h.moveTo(g.width/2,0),h.lineTo(0,g.height),h.lineTo(g.width,g.height),h.closePath(),h.fillStyle=l,h.fill(),h.lineWidth=k.width,h.strokeStyle=k.color,0<k.width&&h.stroke(),h.restore())},drawArrow:function(h,n,m,l){var k=this.context;h&&(n||(n="#000000"),m||(m={width:0,color:"#FFFFFF"}),l=l?parseFloat(l):0.2,k.save(),k.translate(h.left,h.top),k.beginPath(),k.moveTo(h.width/2,0),k.lineTo(0,h.height),k.lineTo(h.width/2,h.height*(1-l)),k.lineTo(h.width,h.height),k.closePath(),k.fillStyle=n,k.fill(),k.lineWidth=m.width,k.strokeStyle=m.color,0<m.width&&k.stroke(),k.restore())},drawMouse:function(k,p,o){var n=this.context;if(k){p||(p="#FFFFBB");o||(o={width:1,color:"#000000"});var m=0.6*k.height,l=k.width/2;n.save();n.translate(k.left+l,k.top);n.rotate(-15*Math.PI/180);n.shadowBlur=Math.ceil(0.2*k.width);n.shadowColor="rgba(0, 0, 0, 0.3)";n.shadowOffsetX=Math.ceil(0.1*k.width);n.shadowOffsetY=Math.ceil(0.1*k.width);n.beginPath();n.moveTo(k.width/2-l,0);n.lineTo(-l,m);n.lineTo(0.38*k.width-l,0.9*m);n.lineTo(0.38*k.width-l,k.height);n.lineTo(0.62*k.width-l,k.height);n.lineTo(0.62*k.width-l,0.9*m);n.lineTo(k.width-l,m);n.closePath();n.fillStyle=p;n.fill();n.lineWidth=o.width;n.strokeStyle=o.color;0<o.width&&n.stroke();n.restore()}},drawRound:function(k,p,o){var n=this.context;if(k){p||(p="#000000");o||(o={width:0,color:"#FFFFFF"});var m=Math.min(k.width,k.height)/2,l=k.left;k=k.top;n.save();n.beginPath();n.arc(l+m,k+m,m,0,2*Math.PI,!0);n.closePath();n.fillStyle=p;n.fill();n.lineWidth=o.width;n.strokeStyle=o.color;0<o.width&&n.stroke();n.restore()}},drawRing:function(f,h){var g=h.width/2;this.drawRound({left:f.left+g,top:f.top+g,width:f.width-h.width,height:f.height-h.width},"transparent",h)},drawRect:function(v,u,t,s){var r=this.context;if(v){u||(u="#000000");t||(t={width:0,color:"#FFFFFF"});s||(s=0);var q=v.width/2,p=v.height/2,o=v.left+q,n=v.top+p;r.save();r.translate(o,n);r.rotate(s*Math.PI/180);r.beginPath();r.rect(-q,-p,v.width,v.height);r.closePath();r.fillStyle=u;r.fill();r.lineWidth=t.width;r.strokeStyle=t.color;0<t.width&&r.stroke();r.restore()}},drawRoundRect:function(x,w,v,u,t){var s=this.context;if(x){v||(v="#000000");u||(u={width:0,color:"#FFFFFF"});t||(t=0);var r=x.width/2,q=x.height/2,p=x.left+r,o=x.top+q;s.save();s.translate(p,o);s.rotate(t*Math.PI/180);x=Math.min(x.width,x.height)/2;w=Math.min(w,x);s.beginPath();s.moveTo(-r+w,-q);s.arcTo(r,-q,r,q,w);s.arcTo(r,q,-r,q,w);s.arcTo(-r,q,-r,-q,w);s.arcTo(-r,-q,r,-q,w);s.closePath();s.fillStyle=v;s.fill();s.lineWidth=u.width;s.strokeStyle=u.color;0<u.width&&s.stroke();s.restore()}},drawSquareStar:function(z,y,x){var w=this.context;if(z){y||(y="#000000");x||(x=0);var v=z.left+z.width/2,u=z.top+z.height/2,t=z.width,s=z.height,r=Math.PI/180,q=z.width*Math.cos(30*r),o=z.height*Math.cos(30*r);w.save();w.translate(v,u);w.rotate(x*Math.PI/180);w.beginPath();w.arc(0,-z.height/2-q,t,60*r,120*r,!1);w.arc(z.width/2+o,0,s,150*r,210*r,!1);w.arc(0,z.height/2+q,t,240*r,300*r,!1);w.arc(-z.width/2-o,0,s,-30*r,30*r,!1);w.closePath();w.fillStyle=y;w.fill();w.restore()}}});Class("HotSpotsHandImageData",{Package:"PageItem",create:function(d,f){this.dock=d;this.src=f;this.init()},init:function(){this.dock.hand||(this.dock.hand=$("<img></img>"),this.dock.hand.attr("src",this.src));this.data=this.dock.hand},getImage:function(){if(!this.data){return null}var c=this.data[0];return 0==c.naturalWidth?null:c},draw:function(k,p,o){if(k&&p){void 0==o&&(o=1);var n=this.getImage();if(n){var m=n.naturalWidth,l=n.naturalHeight;k.globalAlpha=o;k.drawImage(n,0,0,m,l,p.left,p.top,p.width,p.height);k.globalAlpha=1}}}});Class("RingHotSpotsDrawer",{Package:"PageItem",draw:function(k,p){if(this.width&&this.height){this.clear();var o=Math.min(this.width,this.height),n=o/3,m=o/16,l=this.rectInCenter(n);this.drawRound(l,this.color);m={width:m,color:this.color.rgba((p-k)/p)};o=this.rectInCenter(n+(o-n)*k/p);this.drawRing(o,m)}}}).extend("HotSpotsDrawer");Class("StarHotSpotsDrawer",{Package:"PageItem",draw:function(g,l){if(this.width&&this.height){this.clear();this._super(g,l);var k=Math.min(this.width,this.height)/3,k=this.rectInCenter(k),h=Math.ceil(g/l*360);this.drawStar(k,"#FFFF00",null,h)}}}).extend("RingHotSpotsDrawer");Class("MouseHotSpotsDrawer",{Package:"PageItem",draw:function(g,l){if(this.width&&this.height){this.clear();this._super(g,l);var k=Math.min(this.width,this.height),h=k/4;this.drawMouse({left:(this.width-h)/2,top:this.height/2,width:h,height:2*k/5})}}}).extend("RingHotSpotsDrawer");Class("RoundHotSpotsDrawer",{Package:"PageItem",create:function(f,h,g){this.context=f;this.color=Color(h);this.centerColor=g?Color(g):this.color.add(70)},draw:function(h,n){if(this.width&&this.height){this.clear();var m=Math.min(this.width,this.height),l=m/3,k=this.rectInCenter(l+(m-l)*h/n),m=this.color.rgba((n-h)/n);this.drawRound(k,m);var k=this.rectInCenter(l);this.drawRound(k,this.centerColor.toString())}}}).extend("HotSpotsDrawer");Class("RotateHotSpotsDrawer",{Package:"PageItem",draw:function(l,r){if(this.width&&this.height){this.clear();var q=Math.min(this.width,this.height),p={width:q/8,color:this.color.toString()},o=this.rectInCenter(7*q/8);this.drawRing(o,p);var p=q/4,o=q/4,n=(this.height-o)/2,q={left:0,top:n,width:p,height:o},m=Math.floor(1.1*o),p={left:0,top:n-Math.ceil(0.1*o),width:p,height:m},o=Math.ceil(360*l/r);this.context.save();this.context.translate(this.width/2,this.height/2);this.context.rotate(o*Math.PI/180);q.left-=this.width/2;q.top-=this.height/2;p.left-=this.width/2;p.top-=this.height/2;this.drawTriangle(p,"#FFFFFF");this.drawTriangle(q,this.color.toString());this.drawTriangle();this.context.restore()}}}).extend("HotSpotsDrawer");Class("RotateRingHotSpotsDrawer",{Package:"PageItem",draw:function(f,h){if(this.width&&this.height){this.clear();this._super(f,h);var g=Math.min(this.width,this.height)/3,g=this.rectInCenter(g);this.drawRound(g,this.color.toString())}}}).extend("RotateHotSpotsDrawer");Class("RotateHandHotSpotsDrawer",{Package:"PageItem",create:function(d,f){this._super(d,f);this.initHand()},initHand:function(){this.imageData=new this.HotSpotsHandImageData(this.getClass(),uiBaseURL+"hotspot_hand.png")},draw:function(f,h){if(this.width&&this.height){this.clear();this._super(f,h);var g=Math.min(this.width,this.height),g=this.rectInCenter(g/3,g/2);this.imageData.draw(this.context,g)}}}).extend("RotateHotSpotsDrawer");Class("BlinkerHotSpotsDrawer",{Package:"PageItem",create:function(g,l,k,h){this._super(g,l);this.lightColor=k?Color(k):Color(this.color.add(70));this.ringColor=h?Color(h):this.color;this.colorDiff=this.color.difference(this.lightColor);this.frameColorDiff={}},draw:function(h,n){if(this.width&&this.height){this.clear();var m=Math.min(this.width,this.height),l=h,k=Math.ceil(n/2);l<k?(l/=k,this.frameColorDiff.r=Math.ceil(this.colorDiff.r*l),this.frameColorDiff.g=Math.ceil(this.colorDiff.g*l),this.frameColorDiff.b=Math.ceil(this.colorDiff.b*l)):(l=(l-k)/k,this.frameColorDiff.r=this.colorDiff.r-Math.ceil(this.colorDiff.r*l),this.frameColorDiff.g=this.colorDiff.g-Math.ceil(this.colorDiff.g*l),this.frameColorDiff.b=this.colorDiff.b-Math.ceil(this.colorDiff.b*l));l=this.color.add(this.frameColorDiff);k=this.rectInCenter(m/2);this.drawRound(k,l);l=this.rectInCenter(m);this.drawRing(l,{width:m/8,color:this.ringColor.toString()})}}}).extend("HotSpotsDrawer");Class("ShrinkHotSpotsDrawer",{Package:"PageItem",create:function(f,h,g){this._super(f,h);this.innerColor=g?Color(g):Color(this.color.add(70))},draw:function(l,r){if(this.width&&this.height){this.clear();var q=Math.min(this.width,this.height),p=7*q/8,o=q/4;if(l<r/2){var n=l,m=r/2,o=o+(q-o)*n/m,p=this.rectInCenter(0+(p-0)*n/m),o=this.rectInCenter(o);this.drawRound(p,this.innerColor.toString());this.drawRing(o,{width:q/8,color:this.color.toString()})}else{m=r/4,n=l%m,l<3*r/4?(n=1-n/m,p=this.rectInCenter(0+(p-0)*n),o=this.rectInCenter(q),this.drawRound(p,this.innerColor.rgba(n)),this.drawRing(o,{width:q/8,color:this.color.toString()})):(n=1-n/m,o=this.rectInCenter(o+(q-o)*n),this.drawRing(o,{width:q/8,color:this.color.rgba(n)}))}}}}).extend("HotSpotsDrawer");Class("RipplesHotSpotsDrawer",{Package:"PageItem",create:function(d,f){this._super(d,f)},draw:function(x,w){if(this.width&&this.height){this.clear();var v=Math.min(this.width,this.height),u=w/2,t=x%u,s=t/u;if(x<w/2){var r=v/5,q=v,p=(q-r)*t/u,o=Math.ceil(v/50),v=Math.ceil(v/16),o=o+(v-o)*t/u,r=this.rectInCenter(r+p),q=this.rectInCenter(q);this.drawRing(r,{width:o,color:this.color.toString()});this.drawRing(q,{width:v,color:this.color.rgba(s)})}else{r=v/5,q=v,p=(q-r)*t/u,o=Math.ceil(v/50),v=Math.ceil(v/16),u=(v-o)*t/u,r=this.rectInCenter(r+p),q=this.rectInCenter(q-p),this.drawRing(r,{width:o+u,color:this.color.rgba(1-s)}),this.drawRing(q,{width:v-u,color:this.color.toString()})}}}}).extend("HotSpotsDrawer");Class("RectsHotSpotsDrawer",{Package:"PageItem",draw:function(l,r){if(this.width&&this.height){this.clear();for(var q=Math.min(this.width,this.height),p=Math.ceil(360*l/r),o=0;3>o;o++){var n=120*o+p,m=this.rectInCenter(q/6,5*q/6);this.drawRect(m,this.color.rgba(0.4),null,n)}for(o=0;3>o;o++){n=120*o-p,m=this.rectInCenter(q/7,2*q/3),this.drawRect(m,this.color.toString(),null,n)}}}}).extend("HotSpotsDrawer");Class("SquareHotSpotsDrawer",{Package:"PageItem",create:function(f,h,g){this._super(f,h);this.centerColor=g?Color(g):Color(this.color.add(70))},draw:function(k,p){if(this.width&&this.height){this.clear();var o=Math.min(this.width,this.height),n=o/2,m=o/25,l=this.rectInCenter(n);this.drawRoundRect(l,m,this.centerColor.toString(),{width:m,color:this.color.toString()});l=1-k/p;o=this.rectInCenter(n+(o-m-n)*k/p);this.drawRoundRect(o,m,"transparent",{width:m,color:this.color.rgba(l)})}}}).extend("HotSpotsDrawer");Class("SquareStarHotSpotsDrawer",{Package:"PageItem",create:function(g,l,k,h){this._super(g,l);this.borderColor=k?Color(k):Color(this.color.reduce(70));this.backgroundColor=h?Color(h):this.color},draw:function(v,u){if(this.width&&this.height){this.clear();var t=u/2,s=v%t,r=Math.min(this.width,this.height),q=r/12,p=r/4,o=Math.sqrt(this.width*this.width/4+this.height*this.height/4),n=(r-p)*s/t,t=(o-p)*s/t;v<u/2?(r=this.rectInCenter(p+n),n=this.rectInCenter(o-t),q=this.rectInCenter(o-t-2*q)):(r=this.rectInCenter(r-n),n=this.rectInCenter(p+t),q=this.rectInCenter(p+t-2*q));this.drawSquareStar(r,this.backgroundColor.toString());this.drawSquareStar(n,this.borderColor.toString(),45);this.drawSquareStar(q,this.color.toString(),45)}}}).extend("HotSpotsDrawer");Class("DoughnutHotSpotsDrawer",{Package:"PageItem",create:function(d,f){this._super(d,f);this.initHand()},initHand:function(){this.imageData=new this.HotSpotsHandImageData(this.getClass(),uiBaseURL+"hotspot_hand2.png")},draw:function(v,u){if(this.width&&this.height){this.clear();var t=Math.min(this.width,this.height),s=this.rectInCenter(t/3),r=u/2,r=v%r/r;v>=u/2&&(r=1-r);this.imageData.draw(this.context,s,r);var s=t/6,r=t/12,q=t/48,p=this.rectInCenter(t),o=this.rectInCenter(11*t/12),t=this.rectInCenter(41*t/48),n=Color("white");this.drawRing(p,{width:s,color:this.color.toString()});this.drawRing(o,{width:r,color:n.rgba(0.1)});this.drawRing(t,{width:q,color:n.rgba(0.2)})}}}).extend("HotSpotsDrawer");function forceFloat(c){c=Number(c).toString();-1==c.indexOf(".")&&(c+=".00");return c}Class("ShoppingCart",{Package:"PageItem",create:function(g,l,k,h){this.config=this.parseConfig(l);this.pageWidth=k;this.pageHeight=h;this.bgColor=Color(this.config.bgColor).toString();this.width=Number(this.pageWidth*this.config.width);this.height=Number(this.pageHeight*this.config.height);this.config.imgUrl=this.config.imgUrl;this.config.url=this.config.url;bookConfig.isFlipPdf&&(this.config.imgUrl.startsWith("./")?this.config.imgUrl="."+this.config.imgUrl:this.config.imgUrl.isUrl()||(this.config.imgUrl="../"+this.config.imgUrl));this.background=$("<div></div>");this.img=$("<img/>");g.append(this.background);this.background.append(this.img);this.linkOrCart(l,g);this.setLinkCss();this.setPosition();this.initEvent()},parseConfig:function(c){return{annotype:c.annotype,x:c.location.x,y:c.location.y,rotation:c.location.rotation,width:c.location.width,height:c.location.height,bgColor:c.bgColor,bgAlpha:c.bgAlpha,cartType:c.cartType,imgUrl:c.imgUrl,titleStr:c.titleStr,url:c.url,Detailed:c.Detailed}},destroy:function(){this.background.empty();this.background.remove();this.shop&&this.shop.destroy()},linkOrCart:function(f,h){var g="";this.config.url&&(g=this.config.url);g.startsWith("http://")||g.startsWith("https://")||(g="http://"+g);"link"==this.config.cartType?(isTouchDevice()?(this.background=$("<div></div>"),this.background.bind(_event._end,function(){window.location.href=g}.bind(this))):this.background=$("<a href="+g+" target='_blank' ><div></div></a>"),h.append(this.background),this.background.append(this.img)):isPhone()||isPad()?this.shop=new PageItem.MobileProductDetailsPanel(f,pageEditor.setting,h):this.shop=new PageItem.PCProductDetailsPanel(f,pageEditor.setting,h)},setLinkCss:function(){this.background.css({position:"absolute","background-position":"center",width:this.width+"px",height:this.height+"px","background-color":this.bgColor,opacity:this.config.bgAlpha,"text-decoration":"none",cursor:"default",transform:"rotate("+this.config.rotation+"deg)","-webkit-transform":"rotate("+this.config.rotation+"deg)","-ms-transform":"rotate("+this.config.rotation+"deg)","-o-transform":"rotate("+this.config.rotation+"deg)","-moz-transform":"rotate("+this.config.rotation+"deg)","transform-origin":"50% 50%","-webkit-transform-origin":"50% 50%","-ms-transform-origin":"50% 50%","-o-transform-origin":"50% 50%","-moz-transform-origin":"50% 50%"});this.img.attr({src:this.config.imgUrl});if(this.width>this.height){var c=2*this.height/3;this.width=c/100*100;this.img.css({position:"absolute",cursor:"pointer",width:this.width,height:c,margin:"auto",left:"0",right:"0",top:"0",bottom:"0"})}else{c=2*this.width/3,this.height=c/100*100,this.img.css({position:"absolute",cursor:"pointer",width:this.height,height:c,margin:"auto",left:"0",right:"0",top:"0",bottom:"0"})}},initEvent:function(){if(!isTouchDevice()){var c=new divHint;this.background.bind(_event._move,function(f){var b;isTouchDevice()?(b=f.originalEvent.touches[0],void 0==b&&(b=f.touches[0])):b=f;$(b.target);f=b.pageX+10;b=b.pageY+10;c.setStyle("hintBackground");"link"==this.config.cartType?""!=this.config.titleStr?c.setText(this.config.titleStr.overflow(12)):c.setText(this.config.url.overflow(12)):""!=this.config.titleStr?c.setText(this.config.titleStr.overflow(12)):c.setText(this.config.Detailed.title.overflow(12));c.moveto(f,b);c.show()}.bind(this));this.background.bind(_event._leave,function(){c.hide()}.bind(this))}this.background.bind(_event._down,function(){return !1});this.background.bind(_event._end,function(){this.shop.show();return !1}.bind(this))},show:function(){this.background.css("display","block")},onResize:function(d,f){this.pageWidth=d;this.pageHeight=f;this.width=this.config.width*d;this.height=this.config.height*f;this.background.css({width:this.width+"px",height:this.height+"px"});this.setLinkCss();this.setPosition()},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.background.css({left:this.x+"px",top:this.y+"px"})}});var ShoppingCartUtil={setProductsToStorage:function(f){try{if(window.localStorage){var h=Instance.JSON(f);window.localStorage.setItem("shopping_cart_products",h)}}catch(g){}},getProductsFromStorage:function(){try{if(!window.localStorage){return[]}var d=window.localStorage.getItem("shopping_cart_products");return Instance.parse(d,[])}catch(f){return[]}},removeProduct:function(f){for(var h=this.getProductsFromStorage(),g=0;g<h.length;g++){if(h[g].title==f.title){h.remove(g);break}}this.setProductsToStorage(h)},addProduct:function(h){for(var n=this.getProductsFromStorage(),m=!0,l=0;l<n.length;l++){var k=n[l];if(k.title==h.title){k.number=h.number+k.number;m=!1;break}}m&&n.push(h);this.setProductsToStorage(n);return n},saveProducts:function(g,l){g||(g=[]);for(var k=[],h=0;h<g.length;h++){k.push(g[h].product)}this.setProductsToStorage(k)}};Class("ProductDetailsPanel",{Package:"PageItem",create:function(f,h,g){this.config=this.parseConfig(f);this.setting=h;this.parent=g;this.initUI();this.initEvent()},parseConfig:function(c){return c},destroy:virtual_function,getMailtoInformation:function(k,p,o){var n=o.shoppingCartOptinon.body;k=parseInt(k);var m=forceFloat(p.Detailed.proce),l="",l=!0==parseBool(pageEditor.setting.shoppingCartOptinon.showPrice)?String.format("%0D%0A%0D%0A%0D%0A%s(N1, %d * %s%s = %s%s);%0D%0A%s%s%0D%0A-type in your contacts here-%0D%0A%0D%0A%0D%0A%0D%0A",p.Detailed.title,k,m,p.Detailed.sing,forceFloat(m*k),p.Detailed.sing,forceFloat(m*k),p.Detailed.sing):String.format("%0D%0A%0D%0A%0D%0A%s(N1, %d);%0D%0A%0D%0A-type in your contacts here-%0D%0A%0D%0A%0D%0A%0D%0A",p.Detailed.title,k);-1<n.indexOf("${shopping}")&&(n=n.replaceAll("${shopping}",l,!0));return String.format("mailto:%s?subject=%s&body=%s",o.shoppingCartOptinon.address,o.shoppingCartOptinon.theme,n)},getPaypalInformation:function(g,l,k){var h="";if("$"==l.Detailed.sing||"U.S.$"==l.Detailed.sing){h="USD"}"\uffe5"==l.Detailed.sing&&(h="CNY");"\u20ac"==l.Detailed.sing&&(h="EUR");"\uffe1"==l.Detailed.sing&&(h="GBP");"J.\uffe5"==l.Detailed.sing&&(h="JPY");"$A."==l.Detailed.sing&&(h="AUD");"$NZ."==l.Detailed.sing&&(h="NZD");"SFR."==l.Detailed.sing&&(h="CHF");"HK$"==l.Detailed.sing&&(h="HKD");"S.$"==l.Detailed.sing&&(h="SGD");"S.Kr."==l.Detailed.sing&&(h="SEK");"D.Kr."==l.Detailed.sing&&(h="DKK");"z\u0142"==l.Detailed.sing&&(h="PLZ");"N.Kr."==l.Detailed.sing&&(h="NOK");"FT."==l.Detailed.sing&&(h="HUF");"Cz.Kr."==l.Detailed.sing&&(h="CSK");"Mex.$"==l.Detailed.sing&&(h="MXP");"\u20aa"==l.Detailed.sing&&(h="ILS");"Gr.$"==l.Detailed.sing&&(h="BRC");"Mal.$"==l.Detailed.sing&&(h="MYR");"NT"==l.Detailed.sing&&(h="NTD");"\u0e3f"==l.Detailed.sing&&(h="THP");"Ykr"==l.Detailed.sing&&(h="TRL");return"http://www.paypal.com/cgi-bin/webscr?cmd=_xclick&business="+k.shoppingCartOptinon.paypal+"&item_name="+l.Detailed.title+"&amount="+l.Detailed.proce+"&currency_code="+h+"&quantity="+g},doCheckout:function(){if(!1!=this.canCheckout){var c="",c=this.input.val(),c="Email"==this.setting.shoppingCartOptinon.type?this.getMailtoInformation(c,this.config,this.setting):this.getPaypalInformation(c,this.config,this.setting);window.open(c)}}});Class("ShoppingCartPanel",{Package:"PageItem",getMailtoInformation:function(v,u){if(!this.shoppingItems){return""}for(var t="%0D%0A",s=pageEditor.setting.shoppingCartOptinon.body,r=0,q=parseBool(pageEditor.setting.shoppingCartOptinon.showPrice),p=0;p<this.shoppingItems.length;p++){var o=this.shoppingItems[p];if(void 0==o.isSelected||o.isSelected()){var n=forceFloat(o.product.price),t=!0==q?t+String.format("%0D%0A%s(N"+(p+1)+", %d * %s%s = %s%s);%0D%0A",o.product.title,parseInt(o.product.number),n,o.product.sing,forceFloat(n*parseInt(o.product.number)),o.product.sing):t+String.format("%0D%0A%s(N"+(p+1)+", %d);%0D%0A",o.product.title,parseInt(o.product.number)),o=parseFloat(o.product.price*o.cartInput.val()),r=r+o}}!0==q&&(t+=String.format("%0D%0A(Total price : %f%s);%0D%0A%0D%0A",r,this.config.Detailed.sing));t+="-type in your contacts here-%0D%0A%0D%0A%0D%0A%0D%0A";-1<s.indexOf("${shopping}")&&(s=s.replaceAll("${shopping}",t,!0));return String.format("mailto:%s?subject=%s&body=%s",pageEditor.setting.shoppingCartOptinon.address,pageEditor.setting.shoppingCartOptinon.theme,s)},getPaypalInformation:function(l,r){if(!this.shoppingItems){return""}for(var q="",p="",o=0,n=0;n<this.shoppingItems.length;n++){var m=this.shoppingItems[n];if(void 0==m.isSelected||m.isSelected()){if("$"==l.Detailed.sing||"U.S.$"==l.Detailed.sing){q="USD"}"\uffe5"==l.Detailed.sing&&(q="CNY");"\u20ac"==l.Detailed.sing&&(q="EUR");"\uffe1"==l.Detailed.sing&&(q="GBP");"J.\uffe5"==l.Detailed.sing&&(q="JPY");"$A."==l.Detailed.sing&&(q="AUD");"$NZ."==l.Detailed.sing&&(q="NZD");"SFR."==l.Detailed.sing&&(q="CHF");"HK$"==l.Detailed.sing&&(q="HKD");"S.$"==l.Detailed.sing&&(q="SGD");"S.Kr."==l.Detailed.sing&&(q="SEK");"D.Kr."==l.Detailed.sing&&(q="DKK");"z\u0142"==l.Detailed.sing&&(q="PLZ");"N.Kr."==l.Detailed.sing&&(q="NOK");"FT."==l.Detailed.sing&&(q="HUF");"Cz.Kr."==l.Detailed.sing&&(q="CSK");"Mex.$"==l.Detailed.sing&&(q="MXP");"\u20aa"==l.Detailed.sing&&(q="ILS");"Gr.$"==l.Detailed.sing&&(q="BRC");"Mal.$"==l.Detailed.sing&&(q="MYR");"NT"==l.Detailed.sing&&(q="NTD");"\u0e3f"==l.Detailed.sing&&(q="THP");"Ykr"==l.Detailed.sing&&(q="TRL");o++;p+=String.format("&item_name_"+o+"=%s&amount_"+o+"=%f&quantity_"+o+"=%d",m.product.title,parseFloat(m.product.price),parseInt(m.product.number))}}p+=String.format("&business=%s&currency_code=%s",r.shoppingCartOptinon.paypal,q);return"http://www.paypal.com/cgi-bin/webscr?cmd=_cart&upload=1"+p},doCheckout:function(){if(!1!=this.canCheckout){var c="",c="Email"==this.setting.shoppingCartOptinon.type?this.getMailtoInformation(this.config,this.setting):this.getPaypalInformation(this.config,this.setting);window.open(c)}},refreshTotalValue:function(){this.shoppingItems||(this.shoppingItems=[]);this.canCheckout=!0;var g=0,l=0;if(0<this.shoppingItems.length){for(var k=0;k<this.shoppingItems.length;k++){var l=this.shoppingItems[k],h=l.product;if(void 0==l.isSelected||l.isSelected()){l=parseFloat(h.price*h.number),g+=l,h.number>h.quantity&&(this.canCheckout=!1)}}this.total.text("Total: "+h.sing+g.toFixed(2))}else{this.total.text("Total: 0.00")}this.item.text("Item: "+this.shoppingItems.length)},refreshInputValue:function(){for(var f=ShoppingCartUtil.getProductsFromStorage(),h=0,g=0;g<f.length;g++){h+=f[g].number}return h},removeItem:function(d){ShoppingCartUtil.removeProduct(d.product);d.singleShop.remove();for(var f=0;f<this.shoppingItems.length;f++){if(this.shoppingItems[f]==d){this.shoppingItems.remove(f);break}}}});Class("ShoppingCartItem",{});Class("MobileProductDetailsPanel",{Package:"PageItem",create:function(f,h,g){this.advancedObj=new PageItem.ShoppingAdvancedProperty(f);this._super(f,h,g);this.shoppingCart||(this.shoppingCart=new PageItem.MobileShoppingCartPanel(f,h),window.shoppingCart=this.shoppingCart);toolBar.getButton("ShoppingCart").setNumber(this.shoppingCart.refreshInputValue());this.canCheckout=!0},parseConfig:function(c){return{annotype:c.annotype,x:c.location.x,y:c.location.y,width:c.location.width,height:c.location.height,bgColor:c.bgColor,bgAlpha:c.bgAlpha,cartType:c.cartType,imgUrl:c.imgUrl,titleStr:c.titleStr,url:c.url,Detailed:c.Detailed}},destroy:function(){this.phoneContainer.empty();this.phoneContainer.remove()},initUI:function(){this.phoneContainer=$("<div class=phoneContainer></div>");this.toolBar=$("<div></div>");this.closeButton=$("<div></div>");this.textTitle=$("<div>Product Details</div>");this.phoneImg=$("<img/>");this.title=$("<div>"+this.config.Detailed.title+"</div>");this.title.text(this.title.text().overflow(30));this.phoneImgBox=$("<div></div>");this.contentText=$("<div></div>");this.shopDescribe=$("<div>"+this.config.Detailed.about+"</div>");this.price=$("<div>Price : "+this.config.Detailed.sing+this.config.Detailed.proce+"</div>");this.mNumber=$("<div><span style='position:absolute;'>Quantity : </span></div>");this.input=$.browser.safari&&$.system.name==$.system.IOS?$("<input type='text' value='1' style='width:30px;text-align:center;margin:auto;top:0;bottom:0;height:20px;outline:medium;margin-left:26px;position:absolute;border:1px solid rgb(255,255,255)'/>"):$("<input type='text' value='1' style='width:40px;text-align:center;margin:auto;top:0;bottom:0;height:20px;outline:medium;margin-left:25px;position:absolute;border:1px solid rgb(255,255,255)'/>");this.input.allowNumberOnly();this.mAdd=$("<img src='"+uiBaseURL+"cartAdd.png' style='cursor:pointer;width:25px ;height:25px;position:absolute;background-color:#DDDDDA' />");this.mLow=$("<img src='"+uiBaseURL+"cartLow.png' style='cursor:pointer;width:25px ;height:25px;margin-left:69px;position:absolute;background-color:#DDDDDA'/>");this.transitTime=$("<div>Delivery time: "+this.config.Detailed.time+"day(s)</div>");this.allQuantity=$("<div> "+this.config.Detailed.quantity+" In Stock</div>");this.mAddToCart=$("<span>Add to cart</span>");this.mCheckOut=$("<span>Checkout</span>");this.mailto=$("<a style='text-decoration: none'></a>");this.inputChangRed=$("<span style='position:absolute;top:35px;margin-left:30px;color:red;font-size:10px;width:115px;height:15px;right:30px'>Not enough in stock</span>");this.content=$("<div></div>");this.addlow=$("<div></div>");tmpContainer.append(this.phoneContainer);this.phoneContainer.append(this.toolBar);this.phoneContainer.append(this.content);this.phoneContainer.append(this.contentText);this.toolBar.append(this.closeButton);this.toolBar.append(this.textTitle);this.phoneImgBox.append(this.phoneImg);this.contentText.append(this.title);this.contentText.append(this.shopDescribe);this.contentText.append(this.price);if(""!=this.advancedObj.advanced){for(var c=0;c<this.advancedObj.advanceLength;c++){"boolean"==this.advancedObj.advanced[c].type&&(this.contentText.append(this.advancedObj.shopAdvanced1),this.advancedObj.shopAdvanced1.css("margin-left","15px")),"text"==this.advancedObj.advanced[c].type&&(this.contentText.append(this.advancedObj.shopAdvanced2),this.advancedObj.shopAdvanced2.css("margin-left","15px")),"list"==this.advancedObj.advanced[c].type&&(this.contentText.append(this.advancedObj.shopAdvanced3),this.advancedObj.shopAdvanced3.css("margin-left","15px"))}}this.contentText.append(this.mNumber).append(this.allQuantity).append(this.transitTime);this.content.append(this.phoneImgBox).append(this.contentText);this.mailto.append(this.mCheckOut);this.phoneContainer.append(this.mAddToCart);this.phoneContainer.append(this.mailto);this.mNumber.append(this.addlow);this.addlow.append(this.mAdd).append(this.input).append(this.mLow);this.imgs=this.config.Detailed.imgs;this.imgs[0]||(this.imgs=[this.imgs.img]);this.imgsCount=this.imgs.length;!1===this.setting.shoppingCartOptinon.showPrice&&this.price.css({display:"none"});!1===this.setting.shoppingCartOptinon.showTime&&this.transitTime.css({display:"none"});this.setMobileShopCss();this.initImgs()},initImgs:function(){this.imageItems=[];for(var c=0;c<this.imgs.length;c++){this.imageItems[c]=this.imgs[c],bookConfig.isFlipPdf&&(this.imageItems[c].startsWith("./")?this.imageItems[c]="."+this.imageItems[c]:this.imageItems[c].isUrl()||(this.imageItems[c]="../"+this.imageItems[c]))}1<this.imgsCount&&(this.setSwipe(),this.imageURL=this.imageItems[0]);this.setImgs(this.imageItems[0])},setImgs:function(c){this.phoneImg.attr({src:c})},setSwipe:function(){this.currentIndex=0;var c=function(h,m){var l;l=30*windowWidth/1600;if(!(Math.abs(h)<=l)){var k=this.imageItems.length;h<-l?this.currentIndex=(this.currentIndex+1)%k:h>l&&(0==this.currentIndex&&(this.currentIndex+=k),this.currentIndex=(this.currentIndex-1)%k);this.imageURL=this.imageItems[this.currentIndex];this.setImgs(this.imageURL);$.browser.mise?event.cancelBubble=!0:event.stopPropagation()}}.bind(this);this.phoneImgBox.speed(c)},setMobileShopCss:function(){this.addlow.css({position:"absolute",width:"100px",height:"25px",left:"75px"});this.content.css({position:"relative",width:windowWidth+15+"px",height:windowHeight-90+"px","overflow-x":"hidden"});this.mCheckOut.css({position:"absolute","background-color":"#ff4400",width:windowWidth/2+"px",height:"40px","text-align":"center","line-height":"2.5","font-family":"Arial",right:"0",bottom:"0",cursor:"pointer",color:"white"});this.mAddToCart.css({position:"absolute","background-color":"#ffa800",width:windowWidth/2+"px",height:"40px","text-align":"center","line-height":"2.5","font-family":"Arial","margin-left":"0",bottom:"0",cursor:"pointer",color:"white"});this.allQuantity.css({width:"300px",height:"14px","margin-top":"15px","font-size":"10px","padding-left":"15px",color:Color(44849).toString(),"font-family":"Tahoma"});this.transitTime.css({width:"300px",height:"14px","margin-top":"15px",color:"black","font-size":"10px","padding-left":"15px","font-family":"Tahoma"});this.contentText.css({position:"relative",width:windowWidth+"px"});this.mNumber.css({position:"relative",width:windowWidth+"px",height:"25px","line-height":"25px","margin-top":"15px",color:"black","font-size":"10px","padding-left":"15px","font-family":"Tahoma"});this.price.css({position:"relative",width:windowWidth+"px",height:"20px","margin-top":"7px","font-size":"18px",color:Color(12845056).toString(),"font-family":"Tahoma","padding-left":"15px"});this.title.css({width:windowWidth-15+"px",height:"32px","line-height":"26px","font-size":"26px",color:"black","font-family":"Tahoma","padding-left":"15px","margin-top":"7px"});this.shopDescribe.css({width:windowWidth-20+"px","line-height":"1.6","font-size":"13px",color:"black","padding-left":"15px","margin-top":"15px","font-family":"Tahoma"});this.textTitle.css({position:"absolute",width:windowWidth/2+5,margin:"auto","font-size":"18px","font-family":"Tahoma",color:"rgb(140,140,140)","vertical-align":"middle","line-height":"2.2",left:"0",top:"0",bottom:"0",right:"0","text-align":"center"});this.toolBar.css({position:"relative",width:windowWidth+"px","background-color":"white",border:"rgb(239,232,232) 1px solid",height:"40px"});this.closeButton.css({position:"absolute",margin:"auto","background-image":"url("+uiBaseURL+"background_prev.png)","background-repeat":"no-repeat","background-position":"4px 4px",cursor:"pointer",width:"28px",height:"28px",left:"10px",bottom:"0",top:"0"});this.phoneImg.css({position:"absolute","max-width":windowWidth-30+"px","max-height":0.3*windowHeight+"px",margin:"auto",left:"0",bottom:"0",top:"0",right:"0"});this.phoneImgBox.css({position:"relative",width:windowWidth+"px",height:0.35*windowHeight+"px","z-index":"3000"});this.phoneContainer.css({width:windowWidth+"px",height:"100%",position:"absolute",transform:"translate(100%,0)","-webkit-transform":"translate(100%,0)","-moz-transform":"translate(100%,0)","-o-transform":"translate(100%,0)","-ms-transform":"translate(100%,0)","background-color":"#f7f7f7","z-index":"3000"})},initEvent:function(){var c=function(g,k){var h;h=30*windowWidth/1600;Math.abs(g)<=h||g>h&&this.hide()}.bind(this);this.phoneContainer.speed(c);this.mailto.bind(_event._click,this.doCheckout.bind(this));this.input.bind("blur",function(){parseInt(this.input.val())>this.config.Detailed.quantity?(this.mNumber.append(this.inputChangRed),this.input.css({"border-color":"red"}),this.canCheckout=!1):(this.inputChangRed.remove(),this.input.css({"border-color":"rgb(255,255,255)"}),this.canCheckout=!0)}.bind(this));this.closeButton.bind(_event._up,function(){this.hide()}.bind(this));this.mAdd.bind(_event._up,function(){var d=parseInt(this.input.val())+1;this.input.val(d);d>this.config.Detailed.quantity?(this.mNumber.append(this.inputChangRed),this.input.css({"border-color":"red"}),this.canCheckout=!1):this.canCheckout=!0}.bind(this));this.mLow.bind(_event._up,function(){var d=parseInt(this.input.val());1!=d&&(d-=1,this.input.val(d),d<=this.config.Detailed.quantity&&(this.inputChangRed.remove(),this.input.css({"border-color":"rgb(255,255,255)"}),this.canCheckout=!0),this.input.val(d))}.bind(this));this.mAddToCart.bind(_event._down,function(){tmpContainer.append(this.shoppingCart.mCart);this.shoppingCart.showCart();var d={};d.image=1>=this.imgsCount?this.imageItems[0]:this.imageURL;d.advancedName=this.advancedObj.setShoppingCartAdvanced().toString();d.title=this.config.Detailed.title;d.sing=this.config.Detailed.sing;d.price=this.config.Detailed.proce;d.number=parseInt(this.input.val());d.quantity=this.config.Detailed.quantity;this.shoppingCart.addProduct(d);toolBar.getButton("ShoppingCart").setNumber(this.shoppingCart.refreshInputValue())}.bind(this))},show:function(){this.textTitle.css({display:"block"});this.contentText.css({display:"block"});this.mAddToCart.css({display:"block"});this.mCheckOut.css({display:"block"});this.phoneContainer.css({display:"block"});animateOnce.delay(this,10,[this.phoneContainer,{transform:"translate(0,0)","-webkit-transform":"translate(0,0)","-moz-transform":"translate(0,0)","-o-transform":"translate(0,0)","-ms-transform":"translate(0,0)"},0.5,null,"","ease"])},hide:function(){animateOnce(this.phoneContainer,{transform:"translate(100%,0)","-webkit-transform":"translate(100%,0)","-moz-transform":"translate(100%,0)","-o-transform":"translate(100%,0)","-ms-transform":"translate(100%,0)"},0.3,null,"","ease")},informationHide:function(){this.mAddToCart.css({display:"none"});this.mCheckOut.css({display:"none"});this.textTitle.css({display:"none"});this.contentText.css({display:"none"})},onResize:function(d,f){windowWidth=d;windowHeight=f;this.setMobileShopCss()}}).extend(PageItem.ProductDetailsPanel);Class("MobileShoppingCartPanel",{Package:"PageItem",create:function(d,f){this.config=d;this.setting=f;this.mCart=$("<div></div>");this.cToolBar=$("<div></div>");this.cClose=$("<div></div>");this.cTitle=$("<div>Shopping Cart</div>");this.deletes=$("<span>Delete</span>");this.total=$("<span style='font-size:10px'>(Total:$0.00)</span>");this.mCartCheck=$("<div>CheckOut </div>");this.cartMailto=$("<a style='text-decoration: none'></a>");this.item=$("<span style='position: absolute;bottom: 40px;left: 20px;font-size:12px;font-family:Tahoma;font-weight:bold'></span>");this.mCart.append(this.cartMailto);this.cartMailto.append(this.mCartCheck);this.mCartCheck.append(this.total);this.shop=$("<div></div>");this.mCart.append(this.cToolBar).append(this.deletes).append(this.shop);this.cToolBar.append(this.cClose).append(this.cTitle);this.setCartCss();this.initEvent();this.canCheckout=!1},addProduct:function(f){f=ShoppingCartUtil.addProduct(f);this.shop.empty();this.shoppingItems=[];for(var h=0;h<f.length;h++){var g=new PageItem.MobileShoppingCartItem(this,f[h]);this.shop.append(g.singleShop);this.shoppingItems.push(g)}this.refreshTotalValue()},initEvent:function(){this.cartMailto.bind(_event._click,this.doCheckout.bind(this));this.cClose.bind(_event._up,function(){this.hideCart()}.bind(this));var c=function(g,k){var h;h=30*windowWidth/1600;Math.abs(g)<=h||g>h&&this.hideCart()}.bind(this);this.mCart.speed(c);this.deletes.bind(_event._click,function(){for(var f=0;f<this.shoppingItems.length;){var g=this.shoppingItems[f];g.isSelected()?(this.removeItem(g),this.refreshTotalValue(),toolBar.getButton("ShoppingCart").setNumber(this.refreshInputValue())):f++}}.bind(this))},setCartCss:function(){this.shop.css({width:windowWidth-20+"px",height:0.78*windowHeight+"px",position:"absolute",margin:"auto",top:"0px",left:"0px",bottom:"0px",right:"0px","overflow-x":"hidden"});this.mCartCheck.css({position:"absolute","background-color":"#ff4400",width:2/3*windowWidth+"px",height:"40px","text-align":"center","line-height":"2.5","font-family":"Arial",right:"0",bottom:"0",cursor:"pointer",color:"white"});this.deletes.css({position:"absolute","background-color":"#666666",width:windowWidth/3+"px",height:"40px","text-align":"center","line-height":"2.5","font-family":"Arial","margin-left":"0",bottom:"0",cursor:"pointer",color:"white"});this.mCart.css({width:windowWidth+"px",height:windowHeight+"px",position:"absolute",transform:"translate(100%,0)","-webkit-transform":"translate(100%,0)","-moz-transform":"translate(100%,0)","-o-transform":"translate(100%,0)","-ms-transform":"translate(100%,0)","background-color":"#f7f7f7","z-index":"3000"});this.cTitle.css({position:"absolute",width:windowWidth/2,margin:"auto","font-size":"18px","font-family":"Tahoma",color:"rgb(140,140,140)","vertical-align":"middle","line-height":"2.5",left:"0",top:"0",bottom:"0",right:"0","text-align":"center"});this.cToolBar.css({position:"relative",width:windowWidth+"px","background-color":"white",border:"rgb(239,232,232) 1px solid",height:"40px"});this.cClose.css({position:"absolute",margin:"auto","background-image":"url("+uiBaseURL+"background_prev.png)","background-repeat":"no-repeat","background-position":"4px 4px",cursor:"pointer",width:"28px",height:"28px",left:"10px",bottom:"0",top:"0"})},getCartProducts:function(){var f=ShoppingCartUtil.getProductsFromStorage();this.shop.empty();this.shoppingItems=[];for(var h=0;h<f.length;h++){var g=new PageItem.MobileShoppingCartItem(this,f[h]);this.shop.append(g.singleShop);this.shoppingItems.push(g)}this.refreshTotalValue()},showCart:function(){this.getCartProducts();tmpContainer.append(this.mCart);this.mCart.css({display:"block"});animateOnce.delay(this,10,[this.mCart,{transform:"translate(0,0)","-webkit-transform":"translate(0,0)","-moz-transform":"translate(0,0)","-o-transform":"translate(0,0)","-ms-transform":"translate(0,0)"},0.5,null,"","ease"])},hideCart:function(){animateOnce(this.mCart,{transform:"translate(100%,0)","-webkit-transform":"translate(100%,0)","-moz-transform":"translate(100%,0)","-o-transform":"translate(100%,0)","-ms-transform":"translate(100%,0)"},0.3,null,"","ease")}}).extend(PageItem.ShoppingCartPanel);Class("MobileShoppingCartItem",{Package:"PageItem",create:function(d,f){this.initHtml(d,f);null==this.product.advancedName||""==this.product.advancedName?(this.carttitle.text(this.carttitle.text().overflow(18)),this.carttitle.text(this.product.title)):this.carttitle.text(this.product.title+"("+this.product.advancedName+")");this.cartPrice.text(this.product.sing+forceFloat(this.product.price));this.shoppingImage.attr("src",this.product.image);this.singleShop.append(this.checkBox).append(this.shoppingImage).append(this.carttitle).append(this.cartPrice).append(this.addlow).append(this.cartadd).append(this.cartInput).append(this.cartlow).append($("<hr style='position:absolute;margin:auto;margin-top:85px;width:100%'/>"));parseInt(this.cartInput.val())>parseInt(f.quantity)&&(this.addlow.append(this.cartNot),this.cartInput.css({"border-color":"red"}),this.canCheckout=!1);this.setOneShop();this.initEvent()},initHtml:function(d,f){this.mobileShop=d;this.product=f;this.addlow=$("<div></div>");this.singleShop=$("<div></div>");this.checkBox=$("<input type=checkbox name=checkbox1 style='position:relative;top:46px;' />");this.checkBox[0].product=f;this.shoppingImage=$("<img/>");this.cartNot=$("<span style='position:absolute;color:red;font-size:10px;width:120px;right:0;height:10px'>Not enough in stock</span>");$.browser.safari&&$.system.name==$.system.IOS?(this.cartInput=$("<input type='text' value='"+this.product.number+"' style='width:30px;margin-top:41px;text-align:center;height:20px;outline:medium;right:26px;position:absolute;border:1px solid rgb(255,255,255)'/>"),this.cartInput.allowNumberOnly(),this.cartadd=$("<img src='"+uiBaseURL+"cartAdd.png' style='cursor:pointer;margin-top:42px;width:25px ;height:25px;right:70px;position:absolute;background-color:#DDDDDA' />"),this.cartlow=$("<img src='"+uiBaseURL+"cartLow.png' style='cursor:pointer;margin-top:42px;width:25px ;height:25px;right:0;position:absolute;background-color:#DDDDDA'/>")):(this.cartInput=$("<input type='text' value='"+this.product.number+"' style='width:40px;margin-top:42px;text-align:center;height:20px;outline:medium;right:32px;position:absolute;border:1px solid rgb(255,255,255)'/>"),this.cartInput.allowNumberOnly(),this.cartadd=$("<img src='"+uiBaseURL+"cartAdd.png' style='cursor:pointer;margin-top:42px;width:25px ;height:25px;right:70px;position:absolute;background-color:#DDDDDA' />"),this.cartlow=$("<img src='"+uiBaseURL+"cartLow.png' style='cursor:pointer;margin-top:42px;width:25px ;height:25px;right:1px;position:absolute;background-color:#DDDDDA'/>"));this.carttitle=$("<span style='width:220px;height:45px;position:absolute;margin-top: 20px;left:115px;font-family:Tahoma;font-size:12px'></span>");this.cartPrice=$("<span></span>")},initEvent:function(){this.checkBox.bind(_event._click,function(){(function(){this.mobileShop.refreshTotalValue();toolBar.getButton("ShoppingCart").setNumber(this.mobileShop.refreshInputValue())}).delay(this,10)}.bind(this));this.cartInput.bind("blur",function(){var c=parseInt(this.cartInput.val());c>this.product.quantity?(this.addlow.append(this.cartNot),this.cartInput.css({"border-color":"red"}),this.canCheckout=!1):(this.cartNot.remove(),this.cartInput.css({"border-color":"rgb(255,255,255)"}),this.canCheckout=!0);this.product.number=c;this.mobileShop.refreshTotalValue();ShoppingCartUtil.saveProducts(this.mobileShop.shoppingItems,this.mobileShop.setting);toolBar.getButton("ShoppingCart").setNumber(this.mobileShop.refreshInputValue())}.bind(this));this.cartadd.bind(_event._up,function(){var c=parseInt(this.cartInput.val()),c=c+1;this.cartInput.val(c);this.product.number=c;this.mobileShop.refreshTotalValue();c>this.product.quantity?(this.addlow.append(this.cartNot),this.cartInput.css({"border-color":"red"}),this.canCheckout=!1):this.canCheckout=!0;ShoppingCartUtil.saveProducts(this.mobileShop.shoppingItems,this.mobileShop.setting);toolBar.getButton("ShoppingCart").setNumber(this.mobileShop.refreshInputValue())}.bind(this));this.cartlow.bind(_event._up,function(){var c=parseInt(this.cartInput.val()),c=1>c-1?1:c-1;0>c||(this.cartInput.val(c),this.product.number=c,this.mobileShop.refreshTotalValue(),this.mobileShop.refreshInputValue(),c<=this.product.quantity?(this.cartNot.remove(),this.cartInput.css({"border-color":"rgb(255,255,255)"}),this.canCheckout=!0):this.canCheckout=!1,ShoppingCartUtil.saveProducts(this.mobileShop.shoppingItems,this.mobileShop.setting),toolBar.getButton("ShoppingCart").setNumber(this.mobileShop.refreshInputValue()))}.bind(this))},isSelected:function(){return this.checkBox[0].checked},setOneShop:function(){this.cartPrice.css({position:"absolute",width:"170px",height:"20px","font-size":"15px",color:"rgb(250,11,11)","margin-top":"70px","font-family":"Tahoma",left:"115px"});this.addlow.css({width:"115px",height:"20px",position:"absolute",right:"0px","margin-top":"55px"});this.shoppingImage.css({position:"absolute",width:"70px",height:"70px","margin-top":"20px","margin-left":"10px"});this.singleShop.css({width:windowWidth+"px",height:"120px"})}}).extend(ShoppingCartItem);Class("PCProductDetailsPanel",{Package:"PageItem",create:function(f,h,g){this.advancedObj=new PageItem.ShoppingAdvancedProperty(f);this._super(f,h,g);this.shoppingCart||(this.shoppingCart=new PageItem.PCShoppingCartPanel(f,h),window.shoppingCart=this.shoppingCart);this.shoppingCart.onClose=this.shoppingCartClose.bind(this);shoppingCountHTML.html(this.shoppingCart.refreshInputValue());this.canCheckout=!0},parseConfig:function(c){return{annotype:c.annotype,x:c.location.x,y:c.location.y,width:c.location.width,height:c.location.height,bgColor:c.bgColor,bgAlpha:c.bgAlpha,cartType:c.cartType,imgUrl:c.imgUrl,titleStr:c.titleStr,url:c.url,Detailed:c.Detailed}},destroy:function(){this.container.empty();this.container.remove()},initUI:function(){this.initHtml();this.setShopCss();tmpContainer.append(this.bgImage);tmpContainer.append(this.container);this.container.append(this.content);this.container.append(this.closeButton);this.content.append(this.imgBox);this.imgBox.append(this.shopImg);this.content.append(this.contentText);this.contentText.append(this.shopTitle);this.contentText.append(this.shopPrice);this.initAdvanced();this.contentText.append(this.number);this.number.append(this.add);this.number.append(this.input);this.number.append(this.low);this.contentText.append(this.allQuantity);this.contentText.append(this.time);this.contentText.append(this.about);this.contentText.append(this.addToCart);this.contentText.append(this.close);this.shopTitle.html(this.config.Detailed.title);this.shopTitle.text(this.shopTitle.text().overflow(14));this.shopTitle.attr("title",this.config.Detailed.title);this.mailto=$("<a></a>");this.mailto.append(this.checkout);this.contentText.append(this.mailto);this.contentText.css("display","none");!1===this.setting.shoppingCartOptinon.showPrice&&this.shopPrice.css({display:"none"});!1===this.setting.shoppingCartOptinon.showTime&&this.time.css({display:"none"});this.initImgs();$(window).resize(this.onResize.bind(this))},initHtml:function(){this.imgs=this.config.Detailed.imgs;this.imgs[0]||(this.imgs=[this.imgs.img]);this.imgBox=$("<div></div>");this.shopImg=$("<img/>");this.background=$("<div></div>");this.container=$("<div id='ShoppingCart' ></div>");this.closeButton=$("<div></div>");this.content=$("<div></div>");this.contentText=$("<div></div>");this.shopTitle=$("<div></div>");this.shopPrice=$("<div>Price:  "+this.config.Detailed.sing+this.config.Detailed.proce+"</div>");this.allQuantity=$("<div> "+this.config.Detailed.quantity+" In Stock</div>");this.bgImage=$("<div style='display:none'></div>");this.time=$("<div>Delivery time: "+this.config.Detailed.time+"day(s)</div>");this.about=$("<div>"+this.config.Detailed.about+"</div>");this.number=$("<div>Quantity : </div>");this.addToCart=$("<span>Add to cart</span>");this.checkout=$("<a><div>Checkout</div></a>");this.close=$("<span>Close</span>");this.input=$("<input type='text' value='1' style='width : 70px;height:14px;line-height:14px;outline:medium;margin-left:22px;position:absolute;background:transparent;border:1px solid rgb(150,150,150);text-align:center'/>");this.input.allowNumberOnly();this.add=$("<img src='"+uiBaseURL+"cartAdd.png' style='cursor:pointer;width:18px ;height:18px;position:absolute;margin-left:5px;background:#ddd;' />");this.low=$("<img src='"+uiBaseURL+"cartLow.png' style='cursor:pointer;width:18px ;height:18px;margin-left:94px;position:absolute;background:#ddd;'/>");this.not=$("<span style='position:absolute;color:red;font-size:10px;width:115px;height:10px;right:30px'>Not enough in stock</span>")},initAdvanced:function(){if(""!=this.advancedObj.advanced){for(var d=0,f=0;f<this.advancedObj.advanceLength;f++){d+=30,"boolean"==this.advancedObj.advanced[f].type&&this.contentText.append(this.advancedObj.shopAdvanced1),"text"==this.advancedObj.advanced[f].type&&this.contentText.append(this.advancedObj.shopAdvanced2),"list"==this.advancedObj.advanced[f].type&&this.contentText.append(this.advancedObj.shopAdvanced3),this.about.css({width:"320px",height:150-d+"px","margin-top":"10px","font-size":"10px","font-family":"Arial","overflow-x":"hidden"})}}},initImgs:function(){this.imageItems=[];for(var c=0;c<this.imgs.length;c++){this.imageItems.push(this.imgs[c]),bookConfig.isFlipPdf&&(this.imageItems[c].startsWith("./")?this.imageItems[c]="."+this.imageItems[c]:this.imageItems[c].isUrl()||(this.imageItems[c]="../"+this.imageItems[c]))}1<this.imgs.length&&(this.imageURL=this.imageItems[0],this.initButton());this.setImgs(this.imageItems[0])},setImgs:function(c){this.shopImg.attr("src",c)},initButton:function(){this.leftButton=$('<img src="'+uiBaseURL+'photo_prev.png" style="position:absolute;z-index:1000;cursor:pointer;opacity:0.8;"></img>');this.rightButton=$('<img src="'+uiBaseURL+'photo_next.png" style="position:absolute;z-index:1000;cursor:pointer;opacity:0.8;"></img>');this.setButtonPosition();this.currentIndex=0;var c=this.imageItems.length;this.leftButton.bind(_event._click,function(){this.busy=!0;0==this.currentIndex&&(this.currentIndex+=c);this.currentIndex=(this.currentIndex-1)%c;this.imageURL=this.imageItems[this.currentIndex];this.setImgs(this.imageURL)}.bind(this));this.rightButton.bind(_event._click,function(){this.busy=!0;this.currentIndex=(this.currentIndex+1)%c;this.imageURL=this.imageItems[this.currentIndex];this.setImgs(this.imageURL)}.bind(this));this.imgBox.append(this.leftButton).append(this.rightButton)},setButtonPosition:function(){this.leftButton.css({left:"17px",top:"143.5px"});this.rightButton.css({right:"17px",top:"143.5px"})},setShopCss:function(){this.bgImage.css({position:"absolute",width:windowWidth+"px",height:windowHeight+"px",opacity:"0.5",top:0,"background-color":"black","z-index":"100"});var c="translate(0, "+-((windowHeight-430)/2+430)+"px)";this.container.css({position:"absolute",width:"730px",height:"430px",margin:"auto",left:"0",top:"0",bottom:"0",right:"0",transform:c,"-webkit-transform":c,"-moz-transform":c,"-o-transform":c,"-ms-transform":c,"z-index":"2000"});this.content.css({position:"absolute",width:"700",height:"400",margin:"auto",left:"0",top:"0",bottom:"0",right:"0","background-color":"white","z-index":"2000"});this.closeButton.css({position:"absolute",width:"20px",height:"20px",right:"0","background-image":"url("+uiBaseURL+"closecat.png)","background-repeat":"no-repeat",cursor:"pointer"});this.imgBox.css({position:"absolute",width:"360px",height:"325px",margin:"auto",left:"10px",top:"0",bottom:"20px"});this.shopImg.css({"max-width":"325px","max-height":"325px",position:"absolute",margin:"auto",left:"0",top:"0",bottom:"0",right:"0","-moz-box-shadow":"0 0 5px #bbb","-o-box-shadow":"0 0 5px #bbb","-webkit-box-shadow":"0 0 5px #bbb","box-shadow":"0 0 5px #bbb"});this.contentText.css({position:"absolute",width:"304px",height:"355px",margin:"auto","margin-top":"30px",right:"10px","overflow-x":"hidden","-webkit-user-select":"initial","-moz-user-select":"initial","-ms-user-select":"initial","user-select":"initial"});this.shopTitle.css({width:"300px",height:"30px","font-size":"32px",color:"black","font-family":"Arial","font-weight":"bold"});this.about.css({width:"294px",height:"148px","margin-top":"10px","font-size":"10px","font-family":"Arial","overflow-x":"hidden"});this.number.css({width:"300px",height:"20px","line-height":"17px","margin-top":"10px",color:"black","font-size":"10px","font-family":"Arial"});this.time.css({width:"300px",height:"14px","margin-top":"10px",color:"black","font-size":"10px","font-family":"Arial"});this.allQuantity.css({width:"300px",height:"14px","margin-top":"8px","font-size":"10px",color:Color(44849).toString(),"font-family":"Arial"});this.shopPrice.css({width:"300px",height:"18px","margin-top":"27px","font-size":"16px",color:Color(12845056).toString(),"font-family":"Arial"});this.addToCart.css({position:"absolute",background:"rgb(80, 80, 80)",width:"68px","text-align":"center","line-height":"2.0","font-size":"10px","font-family":"Arial",bottom:"10px","margin-left":"0",cursor:"pointer",color:"white"});this.checkout.css({position:"absolute",background:"rgb(80, 80, 80)",width:"60px","text-align":"center","line-height":"2.0","font-size":"10px","font-family":"Arial",bottom:"10px",right:"158px",cursor:"pointer",color:"white","text-decoration":"none"});this.close.css({position:"absolute",background:"rgb(80, 80, 80)",width:"40px","text-align":"center","line-height":"2.0","font-size":"10px","font-family":"Arial",bottom:"10px",right:"100px",cursor:"pointer",color:"white"})},initEvent:function(){this.input.bind("blur",function(){parseInt(this.input.val())>this.config.Detailed.quantity?(this.number.append(this.not),this.input.css({"border-color":"red"}),this.canCheckout=!1):(this.not.remove(),this.input.css({"border-color":"rgb(150,150,150)"}),this.canCheckout=!0)}.bind(this));this.add.bind(_event._click,function(){var c=this.input.val(),c=parseInt(c)+1;this.input.val(c);c>this.config.Detailed.quantity?(this.number.append(this.not),this.input.css({"border-color":"red"}),this.canCheckout=!1):this.canCheckout=!0;ShoppingCartUtil.saveProducts(this.shoppingItems,this.setting)}.bind(this));this.low.bind(_event._click,function(){var c=parseInt(this.input.val());0!=c&&(c=1>c-1?1:c-1,c<=this.config.Detailed.quantity&&(this.not.remove(),this.input.css({"border-color":"rgb(150,150,150)"}),this.canCheckout=!0),this.input.val(c))}.bind(this));this.mailto.bind(_event._click,this.doCheckout.bind(this));this.bgImage.bind(_event._end,function(){this.hide();this.shoppingCart.cart.css({display:"none"});this.bgImage.css({display:"none"})}.bind(this));this.closeButton.bind(_event._click,this.hide.bind(this));this.close.bind(_event._click,this.hide.bind(this));this.addToCart.bind(_event._click,function(){bookContainer.append(this.cart);this.skipHeid();this.shoppingCart.showCart();var c={};c.image=1>=this.imageItems.length?this.imageItems[0]:this.imageURL;c.advancedName=this.advancedObj.setShoppingCartAdvanced().toString();c.title=this.config.Detailed.title;c.sing=this.config.Detailed.sing;c.price=parseInt(this.config.Detailed.proce);c.number=parseInt(this.input.val());c.quantity=parseInt(this.config.Detailed.quantity);this.shoppingCart.addProduct(c);shoppingCountHTML.html(this.shoppingCart.refreshInputValue())}.bind(this))},shoppingCartClose:function(){this.bgImage.css({display:"none"})},onResize:function(){var d=this.container.css("width"),f=this.container.css("height");this.height=parseInt(f.replace("px",""));this.width=parseInt(d.replace("px",""));this.container.css({"margin-left":(windowWidth-this.width)/2+"px","margin-top":(windowHeight-this.height)/2+"px"});this.bgImage.css({width:windowWidth+"px",height:windowHeight+"px"})},skipHeid:function(){var c=this.container.css("height");this.height=parseInt(c.replace("px",""));c="translate(0, "+-((windowHeight-this.height)/2+this.height)+"px)";c={transform:c,"-webkit-transform":c,"-moz-transform":c,"-o-transform":c,"-ms-transform":c};this.bgImage.css({display:"none"});animateOnce(this.container,c,0.5,null,"","ease-in-out")},hide:function(){var c=this.container.css("height");this.height=parseInt(c.replace("px",""));c="translate(0, "+-((windowHeight-this.height)/2+this.height)+"px)";c={transform:c,"-webkit-transform":c,"-moz-transform":c,"-o-transform":c,"-ms-transform":c};this.bgImage.css({display:"none"});this.contentText.css("display","none");animateOnce(this.container,c,0.5,null,"","ease-in-out")},show:function(){this.bgImage.css({display:"block"});animateOnce.delay(this,10,[this.container,{transform:"translate(0px,0px)","-webkit-transform":"translate(0px,0px)","-moz-transform":"translate(0px,0px)","-o-transform":"translate(0px,0px)","-ms-transform":"translate(0px,0px)"},0.5,function(){this.contentText.css("display","block")}.bind(this),"","ease-in-out"])}}).extend(PageItem.ProductDetailsPanel);Class("PCShoppingCartPanel",{Package:"PageItem",create:function(d,f){this.config=d;this.setting=f;this.cart=$("<div></div>");this.cartTitles=$("<span>Shopping Cart</span>");this.cartprices=$("<span style='position:absolute;font-size:12px;font-weight:bold;margin-top:50px;right:80px;font-family:Tahoma;color:black'>Price</span>");this.cartqu=$("<span style='position:absolute;font-size:12px;font-weight:bold;margin-top:50px;right:180px;font-family:Tahoma;color:black'>Quantity</span>");this.shopping=$("<div id='shopPrice'></div>");this.item=$("<span class=itemss style='position: absolute;bottom: 40px;left: 10px;font-size:12px;font-family:Tahoma;font-weight:bold'></span>");this.total=$("<span></span>");this.cartCheckout=$("<span>Checkout</span>");this.cartClose=$("<span>Close</span>");this.cartAllDelete=$("<span>DeleteAll</span>");this.deleteBox=$('<div>Delete All Goods? <br/><span class="yes">Yes</span><span class="no">No</span></div>');this.cartMailto=$("<a></a>");this.cart.append(this.cartTitles);this.cart.append(this.cartqu);this.cart.append(this.cartprices);this.cart.append(this.shopping);this.cart.append(this.item);this.cart.append(this.total);this.bgImage=$("<div></div>");this.cartMailto.append(this.cartCheckout);this.cart.append(this.cartAllDelete);this.cart.append(this.cartMailto);this.cart.append(this.cartClose);this.cart.append(this.deleteBox);tmpContainer.append(this.bgImage);tmpContainer.append(this.cart);this.promptBox=$("<div></div>");this.setCartCss();this.hideCart();this.initEvent();this.canCheckout=!1},initEvent:function(){this.bgImage.bind(_event._end,function(){this.cart.css({display:"none"});this.bgImage.css({display:"none"})}.bind(this));this.deleteBox.find(".yes").bind(_event._click,function(){this.deleteAll();this.deleteBox.hide(300)}.bind(this));this.deleteBox.find(".no").bind(_event._click,function(){this.deleteBox.hide(300)}.bind(this));this.cartAllDelete.bind(_event._click,function(){this.deleteBox.show(300)}.bind(this));this.cartMailto.bind(_event._click,this.doCheckout.bind(this));this.cartClose.bind(_event._click,function(){this.hideCart();if(this.onClose){this.onClose()}ShoppingCartUtil.saveProducts(this.shoppingItems,this.setting)}.bind(this));$(window).resize(function(){this.bgImage.css({width:windowWidth+"px",height:windowHeight+"px"})}.bind(this))},deleteAll:function(){for(ShoppingCartUtil.setProductsToStorage([]);0<this.shoppingItems.length;){this.removeItem(this.shoppingItems[0]),this.refreshTotalValue()}},addProduct:function(f){f=ShoppingCartUtil.addProduct(f);this.shopping.empty();this.shoppingItems=[];for(var h=0;h<f.length;h++){var g=new PageItem.PCShoppingCartItem(this,f[h]);this.shopping.append(g.singleShop);this.shoppingItems.push(g)}this.refreshTotalValue();this.refreshInputValue()},showCart:function(){this.cart.css("display","block");this.bgImage.css("display","block")},hideCart:function(){this.cart.css("display","none");this.bgImage.css("display","none")},setCartCss:function(){this.deleteBox.css({"font-family":"Tahoma",display:"none",position:"absolute",width:"300px","padding-top":"20px","text-align":"center",height:"140px",margin:"auto",left:"50%",top:"50%","box-shadow":"0 0 5px #666",background:"#eee",transform:"translate(-50%,-50%)","-webkit-transform":"translate(-50%,-50%)","-moz-transform":"translate(-50%,-50%)","-o-transform":"translate(-50%,-50%)","-ms-transform":"translate(-50%,-50%)","z-index":"3000"});this.deleteBox.find(".yes").css({position:"absolute",color:"#fff",background:"#33cc33",left:"80px",bottom:"35px",width:"50px",height:"25px","line-height":"25px",cursor:"pointer"});this.deleteBox.find(".no").css({position:"absolute",color:"#fff",background:"rgb(80, 80, 80)",right:"80px",bottom:"35px",width:"50px",height:"25px","line-height":"25px",cursor:"pointer"});this.bgImage.css({position:"absolute",width:windowWidth+"px",height:windowHeight+"px",opacity:"0.5",top:0,"background-color":"black","z-index":"100"});this.shopping.css({width:"515px",height:"190px",position:"absolute",margin:"auto",top:"10px",left:"0px",bottom:"0px",right:"0px","overflow-x":"hidden"});this.total.css({position:"absolute",bottom:"40px",right:"20px","font-size":"12px","font-family":"Tahoma","font-weight":"bold",color:"red"});this.cartClose.css({position:"absolute",background:"rgb(80, 80, 80)",width:"40px","text-align":"center","line-height":"2.0","font-size":"10px","font-family":"Arial",bottom:"10px",right:"20px",cursor:"pointer",color:"white"});this.cartAllDelete.css({position:"absolute",background:"rgb(80, 80, 80)",color:"white",width:"60px","text-align":"center","line-height":"2.0","font-size":"10px","font-family":"Arial",bottom:"10px",left:"10px",cursor:"pointer"});this.cartCheckout.css({position:"absolute",background:"rgb(80, 80, 80)",width:"60px","text-align":"center","line-height":"2.0","font-size":"10px","font-family":"Arial",bottom:"10px",right:"70px",cursor:"pointer",color:"white","text-decoration":"none"});this.cartTitles.css({position:"absolute","padding-left":"10px",width:"490px","border-bottom":"1px solid white",height:"40px","line-height":"40px","font-size":"14px","font-family":"Tahoma",color:"white","background-color":"rgb(152,152,152)"});this.cart.css({position:"absolute",border:"1px solid white","line-height":"2.5",margin:"auto",left:"0",top:"0",bottom:"0",right:"0",width:"500px",height:"350px","background-color":"rgb(218,218,218)","overflow-x":"hidden","z-index":"3000"})}}).extend(PageItem.ShoppingCartPanel);Class("PCShoppingCartItem",{Package:"PageItem",create:function(d,f){this.initHtml(d,f);!1===pageEditor.setting.shoppingCartOptinon.showPrice&&this.cartPrice.css({display:"none"});null==this.product.advancedName||""==this.product.advancedName?(this.carttitle.text(this.carttitle.text().overflow(16)),this.carttitle.text(this.product.title),this.carttitle.attr("title",this.product.title)):this.carttitle.text(this.product.title+"("+this.product.advancedName+")");this.cartPrice.text(this.product.sing+forceFloat(this.product.price));this.singleShop.append($("<hr style='position:absolute; margin-left:10px;margin-top:85px;width:475px'/>"));parseInt(this.cartInput.val())>parseInt(f.quantity)&&(this.addlow.append(this.cartNot),this.cartInput.css({"border-color":"red"}),this.shop.canCheckout=!1);this.initEvent();this.setCartCSS()},initHtml:function(d,f){this.shop=d;this.product=f;this.cartPrice=$("<span></span>");this.addlow=$("<div></div>");this.singleShop=$("<div style='width:480px;height:80px'></div>");this.cartInput=$("<input id='cartinput' type='text' value='"+this.product.number+"'/>");this.cartInput.allowNumberOnly();this.shoppingImage=$("<img/>");this.carttitle=$("<span style='width:165px;line-height:35px;height:35px;position:absolute;margin-top: 28px;left:80px;overflow:hidden;font-family:Tahoma;font-size:12px'></span>");this.dustbin=$("<img src='"+uiBaseURL+"cartDelete.png' style='cursor:pointer;position:absolute;right: 25px;margin-top:35px'/>");this.cartadd=$("<img src='"+uiBaseURL+"cartAdd.png' style='cursor:pointer;width:18px ;height:18px;position:absolute;border:1px solid #bbb;left:25px;background:#eee;' />");this.cartlow=$("<img src='"+uiBaseURL+"cartLow.png' style='cursor:pointer;width:18px ;height:18px;margin-left:97px;position:absolute;border:1px solid #bbb;background:#eee;'/>");this.cartNot=$("<span style='position:absolute;color:red;font-size:10px;width:115px;height:10px;margin-top:15px;left:15px'>Not enough in stock</span>");this.singleShop.append(this.shoppingImage);this.singleShop.append(this.carttitle);this.singleShop.append(this.addlow);this.singleShop.append(this.cartPrice);this.singleShop.append(this.dustbin);this.addlow.append(this.cartadd);this.addlow.append(this.cartlow);this.addlow.append(this.cartInput);this.setImg(this.product.image)},setImg:function(c){this.shoppingImage.attr("src",c)},initEvent:function(){this.cartInput.bind("keyup",function(){var c=parseInt(this.cartInput.val());""==c&&(c=this.cartInput.val());c>this.product.quantity?(this.addlow.append(this.cartNot),this.cartInput.css({"border-color":"red"}),this.canCheckout=!1):(this.cartNot.remove(),this.cartInput.css({"border-color":"rgb(150,150,150)"}),this.canCheckout=!0);this.product.number=c;this.shop.refreshTotalValue();ShoppingCartUtil.saveProducts(this.shop.shoppingItems,this.shop.setting);shoppingCountHTML.html(this.shop.refreshInputValue())}.bind(this));this.dustbin.bind(_event._click,function(){this.shop.removeItem(this);this.shop.refreshTotalValue();shoppingCountHTML.html(this.shop.refreshInputValue())}.bind(this));this.cartadd.bind(_event._click,function(){var c=this.cartInput.val(),c=parseInt(c)+1;this.cartInput.val(c);this.product.number=c;c>this.product.quantity&&(this.addlow.append(this.cartNot),this.cartInput.css({"border-color":"red"}));this.shop.refreshTotalValue();ShoppingCartUtil.saveProducts(this.shop.shoppingItems,this.shop.setting);shoppingCountHTML.html(this.shop.refreshInputValue())}.bind(this));this.cartlow.bind(_event._click,function(){var c=this.cartInput.val();0!=parseInt(c)&&(c=1>parseInt(c)-1?1:parseInt(c)-1,this.cartInput.val(c),this.product.number=c,c<=this.product.quantity&&(this.cartNot.remove(),this.cartInput.css({"border-color":"rgb(150,150,150)"})),this.shop.refreshTotalValue(),ShoppingCartUtil.saveProducts(this.shop.shoppingItems,this.shop.setting),shoppingCountHTML.html(this.shop.refreshInputValue()))}.bind(this))},setCartCSS:function(){this.cartPrice.css({position:"absolute",width:"70px",height:"20px","font-size":"12px",color:"black","margin-top":"30px","font-family":"Tahoma",right:"65px"});this.cartInput.css({"text-align":"center",width:"40px",height:"16px",outline:"medium","margin-left":"50px",position:"absolute",background:"#fff",border:"1px solid rgb(150,150,150)"});this.addlow.css({width:"120px",height:"40px",right:"170px",position:"absolute","margin-top":"35px"});this.shoppingImage.css({position:"absolute",width:"52px",height:"35px","margin-top":"28px",left:"10px","-moz-box-shadow":"0 0 5px #fff","-o-box-shadow":"0 0 5px #fff","-webkit-box-shadow":"0 0 5px #fff","box-shadow":"0 0 5px #fff"})}}).extend(PageItem.ShoppingCartItem);Class("ShoppingAdvancedProperty",{Package:"PageItem",create:function(c){this.config=c;this.advanced=this.config.Detailed.advanced;this.advanceLength=this.advanced.length;this.advanced[0]||(this.advanced=[this.advanced.list]);this.shopAdvanced1=$("<div style='width:300px; position:relative; height:25px;margin-top:10px'></div>");this.shopAdvanced2=$("<div style='width:300px; position:relative; height:30px;margin-top:10px'></div>");this.shopAdvanced3=$("<div style='width:300px; position:relative; height:30px;margin-top:10px'></div>");for(c=0;c<this.advanceLength;c++){"list"==this.advanced[c].type&&(this.advanceListValue=this.advanced[c].defaultValue)}this.initAdvanced();this.setAdvanceEvent()},initAdvanced:function(){var k=0;this.shopSelect=[];for(var p=0;p<this.advanceLength;p++){if(this.shopSelect[p]=[],k+=20,"boolean"==this.advanced[p].type&&(this.shopTypeName=$("<div style='margin-left:25px;width:155px; top:"+m*p+"px; height:20px;font-family:Arial; font-size:12px;line-height:1.5'>"+this.advanced[p].name+"</div>"),this.checkBox=$("<input type=checkbox  style='position:absolute;top:"+m*p+"px;'/>"),!0===this.advanced[p].defaultValue&&this.checkBox.attr("checked","checked"),this.shopAdvanced1.append(this.checkBox).append(this.shopTypeName),this.shopAdvanced1.css({height:25+10*p+"px"})),"text"==this.advanced[p].type&&(this.shopTypeName=$("<div style='width:55px; top:"+m*p+"px; height:20px;font-family:Arial;font-size:12px;position:absolute'>"+this.advanced[p].name+":</div>"),this.shopValue=$("<input style='width:200px;position:absolute; top:"+m*p+"px; left:50px; height:16px;font-family:Arial; font-size:12px;outline:medium' value="+this.advanced[p].value+"/>"),this.shopAdvanced2.append(this.shopTypeName).append(this.shopValue)),"list"==this.advanced[p].type){var o=[],o=this.advanced[p].value.split(";"),n=0,m=35;this.shopTypeName=$("<div style='position:absolute;width:55px; top:"+m*p+"px; height:20px;font-family:Arial; font-size:12px'>"+this.advanced[p].name+":</div>");this.shopAdvanced3.append(this.shopTypeName);for(var l=0;l<o.length;l++){0<l&&0==l%5&&(this.shopAdvanced3.append("<br/><br/>"),n=0,this.shopAdvanced3.css("height",40+k+"px")),n+=50,this.shopSelect[p][l]=$("<div class=borderStyle name="+this.advanced[p].name+" style='height:20px;min-width:15px;cursor:pointer;font-family:Arial; font-size:12px;border:1px solid black;left:"+n+"px; top:"+m*p+"px; position:absolute;text-align:center;line-height:1.7;padding-left:4px;padding-right:4px'>"+o[l]+"</div>"),this.advanced[p].defaultValue==o[l]&&this.shopSelect[p][l].css("border","2px solid rgb(255,0,0)"),this.shopAdvanced3.append(this.shopSelect[p][l])}this.shopAdvanced3.css({height:30+30*p+"px"})}}},setAdvanceEvent:function(){for(var h=0;h<this.shopSelect.length;h++){for(var n=this.shopSelect[h],m=n.length,l=this,k=0;k<m;k++){n[k].bind(_event._click,function(){for(var c=0;c<l.shopSelect.length;c++){for(j=0;j<m;j++){l.shopSelect[c][j].attr("name")==$(this).attr("name")&&l.shopSelect[c][j].css("border","1px solid rgb(0,0,0)"),l.shopSelect[c][j][0]==this&&(l.advanced[c].defaultValue=l.shopSelect[c][j][0].innerText,l.shopSelect[c][j].css("border","2px solid rgb(255,0,0)"))}}})}}},isCheckBoxSelected:function(){return this.checkBox[0].checked},setShoppingCartAdvanced:function(){var d="";if(0!=this.advanceLength){for(var f=0;f<this.advanceLength;f++){"text"==this.advanced[f].type&&(this.advanced[f].defaultValue=this.shopValue.val()),"list"==this.advanced[f].type&&(this.advanced[f].defaultValue=this.advanced[f].defaultValue),"boolean"==this.advanced[f].type&&this.isCheckBoxSelected()&&(this.advanced[f].defaultValue=this.isCheckBoxSelected().toString()),d+=" "+this.advanced[f].name+":"+this.advanced[f].defaultValue+" "}}return d}});Class("Pentagon",{Package:"PageItem",create:function(g,l,k,h){this._super(g,l,k,h);this.color=Color(this.config.color).toString();this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.colorA=Color(this.config.colorA).toString();this.colorB=Color(this.config.colorB).toString();this.pentagon=$("<canvas width='"+this.width+"' height='"+this.height+"'></canvas>");this.pentagon.css({position:"absolute",left:this.x+"px",top:this.y+"px"});this.setRotation(this.pentagon,this.config.rotation);this.parent.append(this.pentagon);this.draw();this.initEvent()},parseConfig:function(c){return{x:c.location.x,y:c.location.y,width:c.location.width,height:c.location.height,rotation:c.location.rotation,alpha:c.alpha,fillStyle:c.fillStyle,color:c.color,colorA:c.gradientColorA,colorB:c.gradientColorB,angle:c.angle,spalpha:c.spalpha,borderWidth:c.borderWidth,borderColor:c.borderColor,borderAlpha:c.borderAlpha,sh:parseBool(c.shadow.hasDropShadow),sx:c.shadow.shadowBlurX,sy:c.shadow.shadowBlurY,se:c.shadow.shadowDistance,sr:c.shadow.shadowColor,action:c.action}},draw:function(){var h=this.pentagon[0],n=h.getContext("2d");n.clearRect(0,0,h.width,h.height);this.width-=this.config.borderWidth;this.height-=this.config.borderWidth;n.beginPath();n.lineCap="round";n.lineJoin="round";n.strokeStyle=Color(this.config.borderColor).toString();n.lineWidth=this.config.borderWidth;n.globalAlpha=this.config.spalpha;n.moveTo(this.config.borderWidth,3*this.height/8);n.lineTo(this.width/6,this.height);n.lineTo(5*this.width/6,this.height);n.lineTo(this.width,3*this.height/8);n.lineTo(this.width/2,this.config.borderWidth);this.config.sh&&(n.shadowOffsetX=this.config.sx,n.shadowOffsetY=this.config.sy,n.shadowBlur=this.config.sd,n.shadowColor=Color(this.config.sc).toString());if("gradient"==this.config.fillStyle){var m=this.config.angle*Math.PI/180,h=this.width/2+this.width/2*Math.cos(m),m=this.height/2+this.height/2*Math.sin(m),l=(Number(this.config.angle)+180)*Math.PI/180,k=this.width/2+this.width/2*Math.cos(l),l=this.height/2+this.height/2*Math.sin(l),h=n.createLinearGradient(k,l,h,m);h.addColorStop(0,this.colorA);h.addColorStop(1,this.colorB);n.fillStyle=h;n.fill()}"Pure"==this.config.fillStyle&&(n.fillStyle=this.color,n.fill());n.closePath();0!=this.config.borderWidth&&n.stroke()},initEvent:function(){this.linkURL="";null!=this.config.action&&(null!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url,null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL));this.addActionEvent(this.pentagon)},onResize:function(d,f){this.pageWidth=d;this.pageHeight=f;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.pentagon[0].width=this.width;this.pentagon[0].height=this.height;this.draw();this.setPosition()},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.pentagon.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);Class("Dovetailed",{Package:"PageItem",create:function(g,l,k,h){this._super(g,l,k,h);this.color=Color(this.config.color).toString();this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.pageHeights=this.config.pageHeight;this.width=Number(this.config.width*this.pageWidth);this.height=Number(this.config.height*this.pageHeight);this.colorA=Color(this.config.colorA).toString();this.colorB=Color(this.config.colorB).toString();this.dovetailed=$("<canvas width='"+this.width+"' height='"+this.height+"'></canvas>");this.dovetailed.css({position:"absolute",left:this.x+"px",top:this.y+"px"});this.setRotation(this.dovetailed,this.config.rotation);this.parent.append(this.dovetailed);this.draw(this.pageWidth);this.initEvent();parseBool(this.config.reflection)&&this.imageReflection(this.dovetailed)},parseConfig:function(c){return{x:c.location.x,y:c.location.y,rotation:c.location.rotation,width:c.location.width,height:c.location.height,pageWidth:c.location.pageWidth,pageHeight:c.location.pageHeight,alpha:c.alpha,fillStyle:c.fillStyle,color:c.color,colorA:c.gradientColorA,colorB:c.gradientColorB,angle:c.angle,spalpha:c.spalpha,arrowWidth:c.arrowWidth,borderWidth:c.borderWidth,borderColor:c.borderColor,borderAlpha:c.borderAlpha,reflection:c.location.reflection,reflectionType:c.location.reflectionType,reflectionAlpha:c.location.reflectionAlpha,sh:parseBool(c.shadow.hasDropShadow),sx:c.shadow.shadowBlurX,sy:c.shadow.shadowBlurY,se:c.shadow.shadowDistance,sr:c.shadow.shadowColor,action:c.action}},draw:function(h){var n=this.dovetailed[0],m=n.getContext("2d");this.config.borderWidth=Number(this.config.borderWidth);m.clearRect(0,0,n.width,n.height);this.width-=this.config.borderWidth;this.height-=this.config.borderWidth;this.config.pageWidth||(this.config.pageWidth=bookConfig.largePageWidth);this.arrowWidth=this.config.arrowWidth/this.config.pageWidth*h;this.arrowWidth>2*this.width/3&&(this.arrowWidth=this.width-2*this.width/3);0==this.arrowWidth&&(this.arrowWidth=this.width-10,this.arrowWidth=10);this.dovetailWidth=this.width-this.arrowWidth;m.beginPath();m.lineCap="round";m.lineJoin="round";m.strokeStyle=Color(this.config.borderColor).toString();m.lineWidth=this.config.borderWidth;m.globalAlpha=this.config.spalpha;m.moveTo(this.config.borderWidth,this.config.borderWidth);m.lineTo(this.arrowWidth,(this.height+this.config.borderWidth)/2);m.lineTo(this.config.borderWidth,this.height);m.lineTo(this.dovetailWidth,this.height);m.lineTo(this.width,(this.height+this.config.borderWidth)/2);m.lineTo(this.dovetailWidth,this.config.borderWidth);this.config.sh&&(m.shadowOffsetX=this.config.sx,m.shadowOffsetY=this.config.sy,m.shadowBlur=this.config.sd,m.shadowColor=Color(this.config.sc).toString());if("gradient"==this.config.fillStyle){n=this.config.angle*Math.PI/180;h=this.width/2+this.width/2*Math.cos(n);var n=this.height/2+this.height/2*Math.sin(n),l=(Number(this.config.angle)+180)*Math.PI/180,k=this.width/2+this.width/2*Math.cos(l),l=this.height/2+this.height/2*Math.sin(l);h=m.createLinearGradient(k,l,h,n);h.addColorStop(0,this.colorA);h.addColorStop(1,this.colorB);m.fillStyle=h;m.fill()}"Pure"==this.config.fillStyle&&(m.fillStyle=this.color,m.fill());m.closePath();0!=this.config.borderWidth&&m.stroke()},initEvent:function(){this.flag=0;this.linkURL="";null!=this.config.action&&(null!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url,null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL));this.addActionEvent(this.dovetailed)},onResize:function(d,f){this.pageWidth=d;this.pageHeight=f;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.dovetailed[0].width=this.width;this.dovetailed[0].height=this.height;this.draw(this.pageWidth);this.setPosition()},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.dovetailed.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);Class("Parallelogram",{Package:"PageItem",create:function(g,l,k,h){this._super(g,l,k,h);this.color=Color(this.config.color).toString();this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.colorA=Color(this.config.colorA).toString();this.colorB=Color(this.config.colorB).toString();this.parallelogram=$("<canvas width='"+this.width+"' height='"+this.height+"' id='prismatic'></canvas>");this.parallelogram.css({position:"absolute",left:this.x+"px",top:this.y+"px"});this.setRotation(this.parallelogram,this.config.rotation);this.parent.append(this.parallelogram);this.draw();this.initEvent()},parseConfig:function(c){return{x:c.location.x,y:c.location.y,width:c.location.width,height:c.location.height,rotation:c.location.rotation,alpha:c.alpha,fillStyle:c.fillStyle,color:c.color,colorA:c.gradientColorA,colorB:c.gradientColorB,angle:c.angle,spalpha:c.spalpha,borderWidth:c.borderWidth,borderColor:c.borderColor,borderAlpha:c.borderAlpha,sh:parseBool(c.shadow.hasDropShadow),sx:c.shadow.shadowBlurX,sy:c.shadow.shadowBlurY,se:c.shadow.shadowDistance,sr:c.shadow.shadowColor,action:c.action}},draw:function(){var h=this.parallelogram[0],n=h.getContext("2d");n.clearRect(0,0,h.width,h.height);this.width-=this.config.borderWidth;this.height-=this.config.borderWidth;n.beginPath();n.lineCap="round";n.lineJoin="round";n.strokeStyle=Color(this.config.borderColor).toString();n.lineWidth=this.config.borderWidth;n.globalAlpha=this.config.spalpha;n.moveTo(this.width/4,this.config.borderWidth);n.lineTo(this.config.borderWidth,this.height);n.lineTo(3*this.width/4+2,this.height);n.lineTo(this.width,this.config.borderWidth);parseBool(this.config.sh)&&(n.shadowOffsetX=this.config.sx,n.shadowOffsetY=this.config.sy,n.shadowBlur=this.config.sd,n.shadowColor=Color(this.config.sc).toString());if("gradient"==this.config.fillStyle){var m=this.config.angle*Math.PI/180,h=this.width/2+this.width/2*Math.cos(m),m=this.height/2+this.height/2*Math.sin(m),l=(Number(this.config.angle)+180)*Math.PI/180,k=this.width/2+this.width/2*Math.cos(l),l=this.height/2+this.height/2*Math.sin(l),h=n.createLinearGradient(k,l,h,m);h.addColorStop(0,this.colorA);h.addColorStop(1,this.colorB);n.fillStyle=h;n.fill()}"Pure"==this.config.fillStyle&&(n.fillStyle=this.color,n.fill());n.closePath();0!=this.config.borderWidth&&n.stroke()},initEvent:function(){this.linkURL="";null!=this.config.action&&(null!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url,null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL));this.addActionEvent(this.parallelogram)},onResize:function(d,f){this.pageWidth=d;this.pageHeight=f;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.parallelogram[0].width=this.width;this.parallelogram[0].height=this.height;this.draw();this.setPosition()},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.parallelogram.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);Class("Hexagon",{Package:"PageItem",create:function(g,l,k,h){this._super(g,l,k,h);this.color=Color(this.config.color).toString();this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.colorA=Color(this.config.colorA).toString();this.colorB=Color(this.config.colorB).toString();this.hexagon=$("<canvas width='"+this.width+"' height='"+this.height+"'></canvas>");this.hexagon.css({position:"absolute",left:this.x+"px",top:this.y+"px"});this.setRotation(this.hexagon,this.config.rotation);this.parent.append(this.hexagon);this.draw();this.initEvent();parseBool(this.config.reflection)&&this.imageReflection(this.hexagon)},parseConfig:function(c){return{x:c.location.x,y:c.location.y,rotation:c.location.rotation,width:c.location.width,height:c.location.height,alpha:c.alpha,fillStyle:c.fillStyle,color:c.color,colorA:c.gradientColorA,colorB:c.gradientColorB,angle:c.angle,spalpha:c.spalpha,reflection:c.location.reflection,reflectionType:c.location.reflectionType,reflectionAlpha:c.location.reflectionAlpha,borderWidth:c.borderWidth,borderColor:c.borderColor,borderAlpha:c.borderAlpha,sh:parseBool(c.shadow.hasDropShadow),sx:c.shadow.shadowBlurX,sy:c.shadow.shadowBlurY,se:c.shadow.shadowDistance,sr:c.shadow.shadowColor,action:c.action}},draw:function(){var h=this.hexagon[0],n=h.getContext("2d");n.clearRect(0,0,h.width,h.height);this.width-=this.config.borderWidth;this.height-=this.config.borderWidth;n.beginPath();n.lineCap="round";n.lineJoin="round";n.strokeStyle=Color(this.config.borderColor).toString();n.lineWidth=this.config.borderWidth;n.globalAlpha=this.config.spalpha;n.moveTo(this.width/4,this.config.borderWidth);n.lineTo(this.config.borderWidth,this.height/2);n.lineTo(this.width/4,this.height);n.lineTo(3*this.width/4,this.height);n.lineTo(this.width,this.height/2);n.lineTo(3*this.width/4,this.config.borderWidth);this.config.sh&&(n.shadowOffsetX=this.config.sx,n.shadowOffsetY=this.config.sy,n.shadowBlur=this.config.sd,n.shadowColor=Color(this.config.sc).toString());if("gradient"==this.config.fillStyle){var m=this.config.angle*Math.PI/180,h=this.width/2+this.width/2*Math.cos(m),m=this.height/2+this.height/2*Math.sin(m),l=(Number(this.config.angle)+180)*Math.PI/180,k=this.width/2+this.width/2*Math.cos(l),l=this.height/2+this.height/2*Math.sin(l),h=n.createLinearGradient(k,l,h,m);h.addColorStop(0,this.colorA);h.addColorStop(1,this.colorB);n.fillStyle=h;n.fill()}"Pure"==this.config.fillStyle&&(n.fillStyle=this.color,n.fill());n.closePath();0!=this.config.borderWidth&&n.stroke()},onResize:function(d,f){this.pageWidth=d;this.pageHeight=f;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.hexagon[0].width=this.width;this.hexagon[0].height=this.height;this.draw();this.setPosition()},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.hexagon.css({left:this.x+"px",top:this.y+"px"})},initEvent:function(){this.linkURL="";null!=this.config.action&&(void 0!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url,null!=this.linkURL&&"www"==this.linkURL.substr(1,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL));this.addActionEvent(this.hexagon)}}).extend(PageItem.Item);Class("FlowChart",{Package:"PageItem",create:function(g,l,k,h){this._super(g,l,k,h);this.color=Color(this.config.color).toString();this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.colorA=Color(this.config.colorA).toString();this.colorB=Color(this.config.colorB).toString();this.flowChart=$("<canvas width='"+this.width+"' height='"+this.height+"'></canvas>");this.flowChart.css({position:"absolute",left:this.x+"px",top:this.y+"px"});this.setRotation(this.flowChart,this.config.rotation);this.parent.append(this.flowChart);this.draw();this.initEvent();parseBool(this.config.reflection)&&this.imageReflection(this.flowChart)},parseConfig:function(c){return{x:c.location.x,y:c.location.y,rotation:c.location.rotation,width:c.location.width,height:c.location.height,alpha:c.alpha,fillStyle:c.fillStyle,color:c.color,colorA:c.gradientColorA,colorB:c.gradientColorB,angle:c.angle,spalpha:c.spalpha,reflection:c.location.reflection,reflectionType:c.location.reflectionType,reflectionAlpha:c.location.reflectionAlpha,borderWidth:c.borderWidth,borderColor:c.borderColor,borderAlpha:c.borderAlpha,sh:parseBool(c.shadow.hasDropShadow),sx:c.shadow.shadowBlurX,sy:c.shadow.shadowBlurY,se:c.shadow.shadowDistance,sr:c.shadow.shadowColor,action:c.action}},draw:function(){var h=this.flowChart[0],n=h.getContext("2d");n.clearRect(0,0,h.width,h.height);this.width-=this.config.borderWidth;this.height-=this.config.borderWidth;n.beginPath();n.lineCap="round";n.lineJoin="round";n.strokeStyle=Color(this.config.borderColor).toString();n.lineWidth=this.config.borderWidth;n.globalAlpha=this.config.spalpha;n.moveTo(this.config.borderWidth,this.config.borderWidth);n.lineTo(this.config.borderWidth,this.height);n.lineTo(this.width,this.height);n.lineTo(this.width,this.config.borderWidth);parseBool(this.config.sh)&&(n.shadowOffsetX=this.config.sx,n.shadowOffsetY=this.config.sy,n.shadowBlur=this.config.sd,n.shadowColor=Color(this.config.sc).toString());if("gradient"==this.config.fillStyle){var m=this.config.angle*Math.PI/180,h=this.width/2+this.width/2*Math.cos(m),m=this.height/2+this.height/2*Math.sin(m),l=(Number(this.config.angle)+180)*Math.PI/180,k=this.width/2+this.width/2*Math.cos(l),l=this.height/2+this.height/2*Math.sin(l),h=n.createLinearGradient(k,l,h,m);h.addColorStop(0,this.colorA);h.addColorStop(1,this.colorB);n.fillStyle=h;n.fill()}"Pure"==this.config.fillStyle&&(n.fillStyle=this.color,n.fill());n.closePath();n.stroke();n.beginPath();n.moveTo(this.width/8+this.config.borderWidth,this.config.borderWidth);n.lineTo(this.width/8+this.config.borderWidth,this.height);n.closePath();n.stroke();n.beginPath();n.moveTo(7*this.width/8,this.config.borderWidth);n.lineTo(7*this.width/8,this.height);n.closePath();0!=this.config.borderWidth&&n.stroke()},initEvent:function(){this.linkURL="";null!=this.config.action&&(null!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url,null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL));this.addActionEvent(this.flowChart)},onResize:function(d,f){this.pageWidth=d;this.pageHeight=f;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.flowChart[0].width=this.width;this.flowChart[0].height=this.height;this.draw();this.setPosition()},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.flowChart.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);Class("Cylinder",{Package:"PageItem",create:function(g,l,k,h){this._super(g,l,k,h);this.color=Color(this.config.color).toString();this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.colorA=Color(this.config.colorA).toString();this.colorB=Color(this.config.colorB).toString();this.cylinder=$("<canvas width='"+this.width+"' height='"+this.height+"'></canvas>");this.cylinder.css({position:"absolute",left:this.x+"px",top:this.y+"px"});this.setRotation(this.cylinder,this.config.rotation);this.parent.append(this.cylinder);this.draw();this.initEvent();parseBool(this.config.reflection)&&this.imageReflection(this.cylinder)},parseConfig:function(c){return{x:c.location.x,y:c.location.y,rotation:c.location.rotation,width:c.location.width,height:c.location.height,alpha:c.alpha,fillStyle:c.fillStyle,color:c.color,colorA:c.gradientColorA,colorB:c.gradientColorB,angle:c.angle,spalpha:c.spalpha,reflection:c.location.reflection,reflectionType:c.location.reflectionType,reflectionAlpha:c.location.reflectionAlpha,cylinderRadius:c.cylinderRadius,borderWidth:c.borderWidth,borderColor:c.borderColor,borderAlpha:c.borderAlpha,sh:parseBool(c.shadow.hasDropShadow),sx:c.shadow.shadowBlurX,sy:c.shadow.shadowBlurY,se:c.shadow.shadowDistance,sr:c.shadow.shadowColor,action:c.action}},fillColor:function(h){if("gradient"==this.config.fillStyle){var n=this.config.angle*Math.PI/180,m=this.width/2+this.width/2*Math.cos(n),n=this.height/2+this.height/2*Math.sin(n),l=(Number(this.config.angle)+180)*Math.PI/180,k=this.width/2+this.width/2*Math.cos(l),l=this.height/2+this.height/2*Math.sin(l),m=h.createLinearGradient(k,l,m,n);m.addColorStop(0,this.colorA);m.addColorStop(1,this.colorB);h.fillStyle=m;h.fill()}"Pure"==this.config.fillStyle&&(h.fillStyle=this.color,h.fill())},draw:function(){var l=this.cylinder[0],r=l.getContext("2d");r.clearRect(0,0,l.width,l.height);this.cylinderRadius=this.config.cylinderRadius;r.lineCap="round";r.lineJoin="round";r.strokeStyle=Color(this.config.borderColor).toString();r.lineWidth=this.config.borderWidth;r.globalAlpha=this.config.spalpha;0==this.cylinderRadius&&(this.cylinderRadius=10);this.cylinderRadius>this.height/2&&(this.cylinderRadius=this.height/2);var l=this.width/2-this.config.borderWidth,q=this.cylinderRadius/2-this.config.borderWidth,p=this.width/2,o=this.cylinderRadius/2,n=l>q?l:q,m=l/n,q=q/n;r.save();r.beginPath();r.scale(m,q);r.moveTo((p+l)/m,o/q);r.arc(p/m,o/q,n,0,2*Math.PI);r.restore();this.fillColor(r);"none"!=this.config.fillStyle&&r.fillRect(this.config.borderWidth,this.cylinderRadius/2,this.width-2*this.config.borderWidth,this.height-this.cylinderRadius);r.closePath();r.stroke();r.moveTo(this.config.borderWidth,this.cylinderRadius/2);r.lineTo(this.config.borderWidth,this.height-this.cylinderRadius/2);r.moveTo(this.width-this.config.borderWidth,this.cylinderRadius/2);r.lineTo(this.width-this.config.borderWidth,this.height-this.cylinderRadius/2);r.save();r.scale(m,q);r.moveTo((p+l)/m,(this.height-o)/q);r.arc(p/m,(this.height-o)/q,n,0,Math.PI);r.restore();this.fillColor(r);r.stroke();r.closePath();this.config.sh&&(r.shadowOffsetX=this.config.sx,r.shadowOffsetY=this.config.sy,r.shadowBlur=this.config.sd,r.shadowColor=Color(this.config.sc).toString())},initEvent:function(){this.flag=0;this.linkURL="";null!=this.config.action&&(null!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url,null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL));this.addActionEvent(this.cylinder)},onResize:function(d,f){this.pageWidth=d;this.pageHeight=f;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.cylinder[0].width=this.width;this.cylinder[0].height=this.height;this.draw();this.setPosition()},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.cylinder.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);Class("Trapezoid",{Package:"PageItem",create:function(g,l,k,h){this._super(g,l,k,h);this.color=Color(this.config.color).toString();this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.width=Number(this.config.width*this.pageWidth);this.height=Number(this.config.height*this.pageHeight);this.colorA=Color(this.config.colorA).toString();this.colorB=Color(this.config.colorB).toString();this.trapezoid=$("<canvas width='"+this.width+"' height='"+this.height+"'></canvas>");this.trapezoid.css({position:"absolute",left:this.x+"px",top:this.y+"px"});this.setRotation(this.trapezoid,this.config.rotation);this.parent.append(this.trapezoid);this.draw(this.pageWidth);this.initEvent();parseBool(this.config.reflection)&&this.imageReflection(this.trapezoid)},parseConfig:function(c){return{x:c.location.x,y:c.location.y,rotation:c.location.rotation,width:c.location.width,height:c.location.height,pageWidth:c.location.pageWidth,pageHeight:c.location.pageHeight,alpha:c.alpha,fillStyle:c.fillStyle,color:c.color,colorA:c.gradientColorA,colorB:c.gradientColorB,angle:c.angle,spalpha:c.spalpha,bottomLength:c.bottomLength,reflection:c.location.reflection,reflectionType:c.location.reflectionType,reflectionAlpha:c.location.reflectionAlpha,borderWidth:c.borderWidth,borderColor:c.borderColor,borderAlpha:c.borderAlpha,sh:parseBool(c.shadow.hasDropShadow),sx:c.shadow.shadowBlurX,sy:c.shadow.shadowBlurY,se:c.shadow.shadowDistance,sr:c.shadow.shadowColor,action:c.action}},draw:function(h){var n=this.trapezoid[0],m=n.getContext("2d");m.clearRect(0,0,n.width,n.height);this.width-=this.config.borderWidth;this.height-=this.config.borderWidth;this.config.pageWidth||(this.config.pageWidth=bookConfig.largePageWidth);this.bottomLength=Number(this.config.bottomLength)/this.config.pageWidth*h;this.bottomLength=0==this.bottomLength||this.config.bottomLength>2*this.width/3?this.width-2*this.width/3:this.bottomLength;m.beginPath();m.lineCap="round";m.lineJoin="round";m.strokeStyle=Color(this.config.borderColor).toString();m.lineWidth=this.config.borderWidth;m.globalAlpha=this.config.spalpha;m.moveTo((this.width-this.bottomLength)/2,this.config.borderWidth);m.lineTo(this.config.borderWidth,this.height);m.lineTo(this.width,this.height);m.lineTo((this.width-this.bottomLength)/2+this.bottomLength,this.config.borderWidth);this.config.sh&&(m.shadowOffsetX=this.config.sx,m.shadowOffsetY=this.config.sy,m.shadowBlur=this.config.sd,m.shadowColor=Color(this.config.sc).toString());if("gradient"==this.config.fillStyle){n=this.config.angle*Math.PI/180;h=this.width/2+this.width/2*Math.cos(n);var n=this.height/2+this.height/2*Math.sin(n),l=(Number(this.config.angle)+180)*Math.PI/180,k=this.width/2+this.width/2*Math.cos(l),l=this.height/2+this.height/2*Math.sin(l);h=m.createLinearGradient(k,l,h,n);h.addColorStop(0,this.colorA);h.addColorStop(1,this.colorB);m.fillStyle=h;m.fill()}"Pure"==this.config.fillStyle&&(m.fillStyle=this.color,m.fill());m.closePath();0!=this.config.borderWidth&&m.stroke()},initEvent:function(){this.flag=0;this.linkURL="";null!=this.config.action&&(null!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url,null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL));this.addActionEvent(this.trapezoid)},onResize:function(d,f){this.pageWidth=d;this.pageHeight=f;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.trapezoid[0].width=this.width;this.trapezoid[0].height=this.height;this.draw(this.pageWidth);this.setPosition()},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.trapezoid.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);Class("RightArrow",{Package:"PageItem",create:function(g,l,k,h){this._super(g,l,k,h);this.color=Color(this.config.color).toString();this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.colorA=Color(this.config.colorA).toString();this.colorB=Color(this.config.colorB).toString();this.rightArrow=$("<canvas width='"+this.width+"' height='"+this.height+"'></canvas>");this.rightArrow.css({position:"absolute",left:this.x+"px",top:this.y+"px"});this.setRotation(this.rightArrow,this.config.rotation);this.parent.append(this.rightArrow);this.draw(this.pageWidth,this.pageHeight);this.initEvent();parseBool(this.config.reflection)&&this.imageReflection(this.rightArrow)},parseConfig:function(c){return{x:c.location.x,y:c.location.y,width:c.location.width,height:c.location.height,rotation:c.location.rotation,pageWidth:c.location.pageWidth,pageHeight:c.location.pageHeight,alpha:c.alpha,fillStyle:c.fillStyle,color:c.color,colorA:c.gradientColorA,colorB:c.gradientColorB,angle:c.angle,spalpha:c.spalpha,arrowWidth:c.arrowWidth,arrowTailHeight:c.arrowTailHeight,arrowType:c.arrowType,reflection:c.location.reflection,reflectionType:c.location.reflectionType,reflectionAlpha:c.location.reflectionAlpha,borderWidth:c.borderWidth,borderColor:c.borderColor,borderAlpha:c.borderAlpha,sh:parseBool(c.shadow.hasDropShadow),sx:c.shadow.shadowBlurX,sy:c.shadow.shadowBlurY,se:c.shadow.shadowDistance,sr:c.shadow.shadowColor,action:c.action}},draw:function(l,r){var q=this.rightArrow[0],p=q.getContext("2d");p.clearRect(0,0,q.width,q.height);this.width-=this.config.borderWidth;this.height-=this.config.borderWidth;this.config.pageWidth||(this.config.pageWidth=bookConfig.largePageWidth);this.config.pageHeight||(this.config.pageHeight=bookConfig.largePageHeight);this.arrowWidth=Number(this.config.arrowWidth)/this.config.pageWidth*l;this.arrowTailHeight=Number(this.config.arrowTailHeight)/this.config.pageHeight*r;0==this.arrowWidth&&(this.arrowWidth=10);0<this.arrowWidth&&this.arrowWidth<3*this.width/4&&(this.arrowWidth=this.arrowWidth);!0==parseBool(this.config.arrowType)?2*this.arrowWidth>this.width-1*this.width/4&&(this.arrowWidth=(this.width-1*this.width/4)/2):this.arrowWidth>3*this.width/4&&(this.arrowWidth=3*this.width/4);this.arrowTailHeight=this.arrowTailHeight>this.height/2?this.height/4:0==this.arrowTailHeight?this.height/2-5:(this.height-this.arrowTailHeight)/2;p.beginPath();p.lineCap="round";p.lineJoin="round";p.strokeStyle=Color(this.config.borderColor).toString();p.lineWidth=this.config.borderWidth;p.globalAlpha=this.config.spalpha;!1==parseBool(this.config.arrowType)?(p.moveTo(this.config.borderWidth,this.arrowTailHeight),p.lineTo(this.width-this.arrowWidth,this.arrowTailHeight),p.lineTo(this.width-this.arrowWidth,this.config.borderWidth),p.lineTo(this.width,this.height/2),p.lineTo(this.width-this.arrowWidth,this.height),p.lineTo(this.width-this.arrowWidth,this.height-this.arrowTailHeight),p.lineTo(this.config.borderWidth,this.height-this.arrowTailHeight)):(p.moveTo(this.config.borderWidth,this.height/2),p.lineTo(this.arrowWidth,this.config.borderWidth),p.lineTo(this.arrowWidth,this.arrowTailHeight),p.lineTo(this.width-this.arrowWidth,this.arrowTailHeight),p.lineTo(this.width-this.arrowWidth,this.config.borderWidth),p.lineTo(this.width,this.height/2),p.lineTo(this.width-this.arrowWidth,this.height),p.lineTo(this.width-this.arrowWidth,this.height-this.arrowTailHeight),p.lineTo(this.arrowWidth,this.height-this.arrowTailHeight),p.lineTo(this.arrowWidth,this.height));this.config.sh&&(p.shadowOffsetX=this.config.sx,p.shadowOffsetY=this.config.sy,p.shadowBlur=this.config.sd,p.shadowColor=Color(this.config.sc).toString());if("gradient"==this.config.fillStyle){var o=this.config.angle*Math.PI/180,q=this.width/2+this.width/2*Math.cos(o),o=this.height/2+this.height/2*Math.sin(o),n=(Number(this.config.angle)+180)*Math.PI/180,m=this.width/2+this.width/2*Math.cos(n),n=this.height/2+this.height/2*Math.sin(n),q=p.createLinearGradient(m,n,q,o);q.addColorStop(0,this.colorA);q.addColorStop(1,this.colorB);p.fillStyle=q;p.fill()}"Pure"==this.config.fillStyle&&(p.fillStyle=this.color,p.fill());p.closePath();0!=this.config.borderWidth&&p.stroke()},initEvent:function(){this.linkURL="";null!=this.config.action&&(null!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url,null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL));this.addActionEvent(this.rightArrow)},onResize:function(d,f){this.pageWidth=d;this.pageHeight=f;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.rightArrow[0].width=this.width;this.rightArrow[0].height=this.height;this.draw(this.pageWidth,this.pageHeight);this.setPosition()},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.rightArrow.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);Class("VirtualEnd",{Package:"PageItem",create:function(g,l,k,h){this._super(g,l,k,h);this.color=Color(this.config.color).toString();this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.width=Number(this.config.width*this.pageWidth);this.height=Number(this.config.height*this.pageHeight);this.colorA=Color(this.config.colorA).toString();this.colorB=Color(this.config.colorB).toString();this.borderColor=Color(this.config.borderColor).toString();this.virtualEnd=$("<canvas width='"+this.width+"' height='"+this.height+"' id='myCanvas'></canvas>");this.virtualEnd.css({position:"absolute",left:this.x+"px",top:this.y+"px"});this.setRotation(this.virtualEnd,this.config.rotation);this.parent.append(this.virtualEnd);this.draw(this.pageWidth,this.pageHeight);this.initEvent();parseBool(this.config.reflection)&&this.imageReflection(this.virtualEnd)},parseConfig:function(c){return{x:c.location.x,y:c.location.y,rotation:c.location.rotation,pageWidth:c.location.pageWidth,pageHeight:c.location.pageHeight,width:c.location.width,height:c.location.height,alpha:c.alpha,fillStyle:c.fillStyle,color:c.color,colorA:c.gradientColorA,colorB:c.gradientColorB,angle:c.angle,spalpha:c.spalpha,reflection:c.location.reflection,reflectionType:c.location.reflectionType,reflectionAlpha:c.location.reflectionAlpha,arrowWidth:c.arrowWidth,arrowTailHeight:c.arrowTailHeight,borderWidth:c.borderWidth,borderColor:c.borderColor,borderAlpha:c.borderAlpha,sh:parseBool(c.shadow.hasDropShadow),sx:c.shadow.shadowBlurX,sy:c.shadow.shadowBlurY,se:c.shadow.shadowDistance,sr:c.shadow.shadowColor,action:c.action}},fillColor:function(h){if("gradient"==this.config.fillStyle){var n=this.config.angle*Math.PI/180,m=this.width/2+this.width/2*Math.cos(n),n=this.height/2+this.height/2*Math.sin(n),l=(Number(this.config.angle)+180)*Math.PI/180,k=this.width/2+this.width/2*Math.cos(l),l=this.height/2+this.height/2*Math.sin(l),m=h.createLinearGradient(k,l,m,n);m.addColorStop(0,this.colorA);m.addColorStop(1,this.colorB);h.fillStyle=m;h.fill()}"Pure"==this.config.fillStyle&&(h.fillStyle=this.color,h.fill());0!=this.config.borderWidth&&h.stroke()},draw:function(g,l){var k=this.virtualEnd[0],h=k.getContext("2d");h.clearRect(0,0,k.width,k.height);this.width-=this.config.borderWidth;this.height-=this.config.borderWidth;this.config.pageWidth||(this.config.pageWidth=bookConfig.largePageWidth);this.config.pageHeight||(this.config.pageHeight=bookConfig.largePageHeight);this.arrowWidth=Number(this.config.arrowWidth)/this.config.pageWidth*g;this.arrowTailHeight=Number(this.config.arrowTailHeight)/this.config.pageHeight*l;this.arrowTailHeight>this.height&&(this.arrowTailHeight=this.height);this.arrowWidth>this.width/2&&(this.arrowWidth=this.width/2);0==this.arrowTailHeight&&(this.arrowTailHeight=10);0==this.arrowWidth&&(this.arrowWidth=10);this.rightArrowWidth=this.width-this.arrowWidth;this.rightArrowHeight=(this.height-this.arrowTailHeight)/2;h.strokeStyle=Color(this.config.borderColor).toString();h.lineWidth=this.config.borderWidth;h.globalAlpha=this.config.spalpha;h.lineCap="round";h.lineJoin="round";h.beginPath();h.rect(this.config.borderWidth,(this.height-this.arrowTailHeight)/2,this.width/24,this.arrowTailHeight);h.strokeStyle=Color(this.config.borderColor).toString();h.lineWidth=this.config.borderWidth;this.fillColor(h);h.closePath();h.beginPath();h.rect(this.width/12,(this.height-this.arrowTailHeight)/2,this.width/12,this.arrowTailHeight);h.strokeStyle=Color(this.config.borderColor).toString();h.lineWidth=this.config.borderWidth;this.fillColor(h);h.closePath();h.beginPath();h.moveTo(this.width/5,this.rightArrowHeight);h.lineTo(this.rightArrowWidth,this.rightArrowHeight);h.lineTo(this.rightArrowWidth,this.config.borderWidth);h.lineTo(this.width,this.height/2);h.lineTo(this.rightArrowWidth,this.height);h.lineTo(this.rightArrowWidth,this.height-this.rightArrowHeight);h.lineTo(this.width/5,this.height-this.rightArrowHeight);h.closePath();!0==parseBool(this.config.sh)&&(h.shadowOffsetX=this.config.sx,h.shadowOffsetY=this.config.sy,h.shadowBlur=this.config.sd,h.shadowColor=Color(this.config.sc).toString());this.fillColor(h)},initEvent:function(){this.linkURL="";null!=this.config.action&&(void 0!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url,null!=this.linkURL&&"www"==this.linkURL.substr(1,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL),this.addActionEvent(this.virtualEnd))},onResize:function(d,f){this.pageWidth=d;this.pageHeight=f;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.virtualEnd[0].width=this.width;this.virtualEnd[0].height=this.height;this.draw(this.pageWidth,this.pageHeight);this.setPosition()},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.virtualEnd.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);Class("Cross",{Package:"PageItem",create:function(g,l,k,h){this._super(g,l,k,h);this.color=Color(this.config.color).toString();this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.colorA=Color(this.config.colorA).toString();this.colorB=Color(this.config.colorB).toString();this.cross=$("<canvas width='"+this.width+"' height='"+this.height+"'></canvas>");this.cross.css({position:"absolute",left:this.x+"px",top:this.y+"px"});this.setRotation(this.cross,this.config.rotation);this.parent.append(this.cross);this.draw();this.initEvent();parseBool(this.config.reflection)&&this.imageReflection(this.cross)},parseConfig:function(c){return{x:c.location.x,y:c.location.y,rotation:c.location.rotation,width:c.location.width,height:c.location.height,pageWidth:c.location.pageWidth,pageHeight:c.location.pageHeight,alpha:c.alpha,fillStyle:c.fillStyle,color:c.color,colorA:c.gradientColorA,colorB:c.gradientColorB,angle:c.angle,spalpha:c.spalpha,reflection:c.location.reflection,reflectionType:c.location.reflectionType,reflectionAlpha:c.location.reflectionAlpha,crossWidht:c.crossWidht,crossType:c.crossType,borderWidth:c.borderWidth,borderColor:c.borderColor,borderAlpha:c.borderAlpha,sh:parseBool(c.shadow.hasDropShadow),sx:c.shadow.shadowBlurX,sy:c.shadow.shadowBlurY,se:c.shadow.shadowDistance,sr:c.shadow.shadowColor,action:c.action}},draw:function(){var h=this.cross[0],n=h.getContext("2d");n.clearRect(0,0,h.width,h.height);this.config.borderWidth=Number(this.config.borderWidth);this.width-=this.config.borderWidth;this.height-=this.config.borderWidth;this.config.pageWidth||(this.config.pageWidth=bookConfig.largePageWidth);this.crossWidth=Number(this.config.crossWidht)/this.config.pageWidth*this.pageHeight;this.crossWidth>2*this.width/3&&(this.crossWidth=this.width-1*this.width/2);0==this.crossWidth&&(this.crossWidth=10);this.positionWidth=(this.width-this.crossWidth)/2;this.positionHeight=(this.height-this.crossWidth)/2;n.lineCap="round";n.lineJoin="round";n.strokeStyle=Color(this.config.borderColor).toString();n.lineWidth=this.config.borderWidth;n.globalAlpha=this.config.spalpha;n.beginPath();!0===parseBool(this.config.crossType)?(n.moveTo(this.config.borderWidth,this.height/2),n.lineTo(this.positionWidth/2,this.positionHeight-this.crossWidth/3),n.lineTo(this.positionWidth/2,this.positionHeight),n.lineTo(this.positionWidth,this.positionHeight),n.lineTo(this.positionWidth,this.positionHeight/2),n.lineTo(this.positionWidth-this.crossWidth/3,this.positionHeight/2),n.lineTo(this.width/2,this.config.borderWidth),n.lineTo(this.width-this.positionWidth+this.crossWidth/3,this.positionHeight/2),n.lineTo(this.width-this.positionWidth,this.positionHeight/2),n.lineTo(this.width-this.positionWidth,this.positionHeight),n.lineTo(this.width-this.positionWidth/2,this.positionHeight),n.lineTo(this.width-this.positionWidth/2,this.positionHeight-this.crossWidth/3),n.lineTo(this.width,this.height/2),n.lineTo(this.width-this.positionWidth/2,this.height-this.positionHeight+this.crossWidth/3),n.lineTo(this.width-this.positionWidth/2,this.height-this.positionHeight),n.lineTo(this.width-this.positionWidth,this.height-this.positionHeight),n.lineTo(this.width-this.positionWidth,this.height-this.positionHeight/2),n.lineTo(this.width-this.positionWidth+this.crossWidth/3,this.height-this.positionHeight/2),n.lineTo(this.width/2,this.height),n.lineTo(this.positionWidth-this.crossWidth/3,this.height-this.positionHeight/2),n.lineTo(this.positionWidth,this.height-this.positionHeight/2),n.lineTo(this.positionWidth,this.height-this.positionHeight),n.lineTo(this.positionWidth/2,this.height-this.positionHeight),n.lineTo(this.positionWidth/2,this.height-this.positionHeight+this.crossWidth/3)):(n.moveTo(this.config.borderWidth,this.positionHeight),n.lineTo(this.positionWidth,this.positionHeight),n.lineTo(this.positionWidth,this.config.borderWidth),n.lineTo(this.positionWidth+this.crossWidth,this.config.borderWidth),n.lineTo(this.positionWidth+this.crossWidth,this.positionHeight),n.lineTo(this.width-this.config.borderWidth,this.positionHeight),n.lineTo(this.width-this.config.borderWidth,this.positionHeight+this.crossWidth),n.lineTo(this.positionWidth+this.crossWidth,this.positionHeight+this.crossWidth),n.lineTo(this.positionWidth+this.crossWidth,this.height),n.lineTo(this.positionWidth,this.height),n.lineTo(this.positionWidth,this.positionHeight+this.crossWidth),n.lineTo(this.config.borderWidth,this.positionHeight+this.crossWidth));parseBool(this.config.sh)&&(n.shadowOffsetX=this.config.sx,n.shadowOffsetY=this.config.sy,n.shadowBlur=this.config.sd,n.shadowColor=Color(this.config.sc).toString());if("gradient"==this.config.fillStyle){var m=this.config.angle*Math.PI/180,h=this.width/2+this.width/2*Math.cos(m),m=this.height/2+this.height/2*Math.sin(m),l=(Number(this.config.angle)+180)*Math.PI/180,k=this.width/2+this.width/2*Math.cos(l),l=this.height/2+this.height/2*Math.sin(l),h=n.createLinearGradient(k,l,h,m);h.addColorStop(0,this.colorA);h.addColorStop(1,this.colorB);n.fillStyle=h;n.fill()}"Pure"==this.config.fillStyle&&(n.fillStyle=this.color,n.fill());n.closePath();0!=this.config.borderWidth&&n.stroke()},initEvent:function(){this.flag=0;this.linkURL="";null!=this.config.action&&(null!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url,null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL));this.addActionEvent(this.cross)},onResize:function(d,f){this.pageWidth=d;this.pageHeight=f;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.cross[0].width=this.width;this.cross[0].height=this.height;this.draw();this.setPosition()},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.cross.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);Class("PopUpVideoItem",{Package:"PageItem",create:function(g,l,k,h){this._super(g,l,k,h);this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.left=this.config.x*this.pageWidth;this.top=this.config.y*this.pageHeight;this.videoWidth=Math.min(480,windowWidth);this.videoHeight=9*this.videoWidth/16;this.videoHeight=Math.min(this.videoHeight,windowHeight);this.videoLeft=(windowWidth-this.videoWidth)/2;this.videoTop=(windowHeight-this.videoHeight)/2;this.background=$("<div style='width:100%;height:100%;z-index:10;position:absolute;'></div>");this.videoBac=$("<div style='width:100%;height:100%;background-color:rgba(0,0,0,0.5);'></div>");this.config.imgURL=this.fixRelativePath(this.config.imgURL);this.config.videoURL=this.fixRelativePath(this.config.videoURL);this.videoImage=$("<div class='flip-action' style='position: absolute;cursor:pointer;opacity:"+this.config.alpha+"; left:"+this.left+"px; top:"+this.top+"px; width:"+this.width+"px;height:"+this.height+"px;'></div>");this.videoFrame=$("<video src='"+this.config.videoURL+"' controls='controls'></video>");this.html_video=this.videoFrame[0];this.videoFrame.css({position:"absolute",width:this.videoWidth+"px",height:this.videoHeight+"px",left:this.videoLeft+"px",top:this.videoTop+"px","z-index":1000});this.config.imgURL?(this.imageDiv=$("<img src='"+this.config.imgURL+"' style='position: absolute;width:100%;height:100%'/>"),this.videoImage.append(this.imageDiv)):this.videoImage.css("background-color","rgba(255,255,255,1)");this.playImg=$("<img src='"+uiBaseURL+"play.png' style='position:absolute;margin:auto;left:0px;top:0px;bottom:0px;right:0px;width:56px;height:56px'/>");this.videoImage.append(this.playImg);this.setRotation(this.videoImage,this.config.rotation);this.background.append(this.videoFrame);tmpContainer.append(this.background);this.background.append(this.videoBac);g.append(this.videoImage);this.hide();this.initPlayer();this.initEvent()},parseConfig:function(d){var f={width:d.location.width,height:d.location.height,rotation:d.location.rotation,x:d.location.x,y:d.location.y,alpha:d.alpha,reflection:d.location.reflection,reflectionType:d.location.reflectionType,reflectionAlpha:d.location.reflectionAlpha,previewSrc:d.previewURL,moviePlayTriggerEvt:d.moviePlayTriggerEvt,movieStopTriggerEvt:d.movieStopTriggerEvt,replayWhenPlayEventTrigger:d.replayWhenPlayEventTrigger};d.componentData&&(f.videoURL=d.componentData.videoURL,f.imgURL=d.componentData.imgURL,f.pageViewed=d.componentData.pageViewed);return f},initPlayer:function(){this.player=this.html_video;var c=this.videoFrame.attr("src");c&&global.flvjs&&flvjs.isSupported()&&(c.endsWith(".flv")||c.endsWith(".f4v"))&&(this.player=flvjs.createPlayer({type:"flv",url:c}),this.player.attachMediaElement(this.html_video),this.player.load())},initEvent:function(){this.background.bind(_event._down,function(c){this.hide();this.setCurrentTime(0);this.player.pause();c.stopPropagation()}.bind(this));this.videoImage.bind(_event._down,function(c){c.stopPropagation()}.bind(this));this.videoImage.bind(_event._end,function(c){parseBool(this.config.pageViewed)&&this.player.play();this.showOrHide();c.stopPropagation()}.bind(this))},onResize:function(d,f){this.pageWidth=d;this.pageHeight=f;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.left=this.config.x*this.pageWidth;this.top=this.config.y*this.pageHeight;this.videoWidth=Math.min(480,windowWidth);this.videoHeight=9*this.videoWidth/16;this.videoHeight=Math.min(this.videoHeight,windowHeight);this.videoLeft=(windowWidth-this.videoWidth)/2;this.videoTop=(windowHeight-this.videoHeight)/2;this.videoFrame.css({width:this.videoWidth+"px",height:this.videoHeight+"px",top:this.videoTop+"px",left:this.videoLeft+"px"});this.videoImage.css({width:this.pageWidth*this.config.width+"px",height:this.pageHeight*this.config.height+"px"});this.setPosition(this.left,this.top)},setPosition:function(d,f){this.videoImage.css({top:f+"px",left:d+"px"})},getPlayEvt:function(){return this.config.moviePlayTriggerEvt},getStopEvt:function(){return this.config.movieStopTriggerEvt},showOrHide:function(){!1===this.visible?this.popup():this.hide()},setCurrentTime:function(c){this.player.currentTime=c},hide:function(){this.visible=!1;this.background.css({display:"none"})},popup:function(){this.visible=!0;this.background.css({display:"block"})},play:function(){this.player.play()},pause:function(){this.player.pause()},stop:function(){this.pause();this.player.currentTime=0}}).extend("Item");Class("LoopControlVideo",{Package:"PageItem",create:function(g,l,k,h){this.config=this.parseConfig(l);this.parent=g;this.pageWidth=k;this.pageHeight=h;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.content=$("<div class='flip-action'></div>");this.control=$("<div class='video-circle-controls'></div>");this.playVideo=$("<div class='video-circle-play'></div>");this.volume=$("<div class='video-circle-volume-button'></div>");this.fullscreen=$("<div class='video-circle-player-fullscreen'></div>");this.loopControl=$("<canvas width='80px' height='80px' style='position:absolute;margin:auto;top:0;left:0;bottom:0;right:0;'>64%</canvas>");this.canvasDiv=$("<div></div>");g=typeof this.config.src;l=this.config.src.substr(this.config.src.length-4,4).toLowerCase();if("string"==g){if(null==this.config.src||".mp4"!=l&&".flv"!=l&&".f4v"!=l){return}}else{if(this.config.src=={}){return}}this.config.src=this.fixRelativePath(this.config.src);this.video=$("<video src='"+this.config.src+"' poster='"+this.config.previewSrc+"'></video>");this.html_video=this.video[0];this.parent.append(this.content);this.content.append(this.video);this.content.append(this.control);this.control.append(this.canvasDiv);this.canvasDiv.append(this.loopControl);this.control.append(this.playVideo);this.control.append(this.volume);this.control.append(this.time);this.control.append(this.fullscreen);this.canvasDiv.append(this.time);this.initPlayer();this.setCss();this.initEvent()},parseConfig:function(d){var f={width:d.location.width,height:d.location.height,rotation:d.location.rotation,x:d.location.x,y:d.location.y,alpha:d.alpha,reflection:d.location.reflection,reflectionType:d.location.reflectionType,reflectionAlpha:d.location.reflectionAlpha,previewSrc:d.previewURL,moviePlayTriggerEvt:d.moviePlayTriggerEvt,movieStopTriggerEvt:d.movieStopTriggerEvt,replayWhenPlayEventTrigger:d.replayWhenPlayEventTrigger};void 0!=d.videoURL&&(f.src=d.videoURL);void 0!=d.url&&(f.src=d.url);void 0!=d.componentData&&(f.src=d.componentData.videoURL);d.componentData&&(f.previewSrc=d.componentData.imgURL);return f},initPlayer:function(){this.player=this.html_video;var c=this.video.attr("src");c&&global.flvjs&&flvjs.isSupported()&&(c.endsWith(".flv")||c.endsWith(".f4v"))&&(this.player=flvjs.createPlayer({type:"flv",url:c}),this.player.attachMediaElement(this.html_video),this.player.load())},onPlayClick:function(){!1==this.html_video.paused?this.player.pause():this.player.play();$.browser.device!=$.browser.DEVICE_PC&&function(){this.control.css("opacity","0")}.delay(this,5000);return !1},onResize:function(d,f){this.width=this.config.width*d;this.height=this.config.height*f;this.content.css({width:this.width+"px",height:this.height+"px"});this.control.css({width:this.width+"px",height:this.height+"px"});this.content.css({"background-size":this.width+"px "+this.height+"px"});this.setPosition(d,f)},setPosition:function(d,f){this.x=d*this.config.x;this.y=f*this.config.y;this.content.css({left:this.x+"px",top:this.y+"px"})},Loop:function(d){var f=this.loopControl[0].getContext("2d");f.clearRect(0,0,80,80);this.drawRound(f,40,360,"#555555");this.drawRound(f,40,d,"#FFFFFF");this.drawRound(f,34,360,"#000000")},drawRound:function(h,n,m,l){var k=Math.PI/180;h.beginPath();h.moveTo(40,40);h.arc(40,40,n,0,m*k,!1);h.closePath();h.fillStyle=l;h.fill()},muteVolume:function(){!0==this.video[0].muted?(this.video[0].muted=!1,this.volume.removeClass("video-circle-volume-mute")):(this.video[0].muted=!0,this.volume.addClass("video-circle-volume-mute"));return !1},fullScreen:function(){fullScreenApi.supportsFullScreen&&(fullScreenApi.isFullScreen()?fullScreenApi.cancelFullScreen():fullScreenApi.requestFullScreen(this.video[0]));this.video[0].webkitSupportsFullscreen&&this.video[0].webkitEnterFullscreen();return !1},initEvent:function(){this.fullscreen.bind(_event._click,this.fullScreen.bind(this));this.control.bind(fullScreenApi.fullScreenEventName,function(){fullScreenApi.isFullScreen()?this.fullscreen.addClass("video-circle-exit-fullscreen"):this.fullscreen.removeClass("video-circle-exit-fullscreen")}.bind(this));this.video.bind(_event._click,this.onPlayClick.bind(this));this.playVideo.bind(_event._click,this.onPlayClick.bind(this));this.volume.bind(_event._click,this.muteVolume.bind(this));this.video.bind("play",function(){this.playVideo.addClass("video-paused-button")}.bind(this));this.video.bind("timeupdate",function(){this.totalTime=this.video[0].duration;this.currentTime=this.video[0].currentTime;this.Loop(this.currentTime/this.totalTime*360)}.bind(this));this.video.bind("pause",function(){this.playVideo.removeClass("video-paused-button")}.bind(this));this.video.bind("ended",function(){this.playVideo.removeClass("video-paused-button")}.bind(this));this.control.on("mouseenter",function(){this.control.css("opacity","1")}.bind(this));this.control.on("mouseleave",function(){this.control.css("opacity","0")}.bind(this));$.browser.device!=$.browser.DEVICE_PC&&(this.control.bind(_event._down,function(){this.control.css("opacity","1")}.bind(this)),this.control.bind(_event._up,function(){(function(){this.control.css("opacity","0")}).delay(this,3000)}.bind(this)))},setCss:function(){this.canvasDiv.css({position:"absolute",width:"80px",height:"80px",margin:"auto",top:"0",bottom:"0",left:"0",right:"0",transform:"rotate(270deg)","-webkit-transform":"rotate(270deg)","-ms-transform":"rotate(270deg)","-o-transform":"rotate(270deg)","-moz-transform":"rotate(270deg)"});this.control.css({position:"absolute",width:this.width+"px",opacity:"1",height:this.height+"px"});this.content.css({position:"absolute",left:this.x+"px",top:this.y+"px",width:this.width+"px",height:this.height+"px","background-color":"black"});this.setRotation(this.content,this.config.rotation);this.video.css({position:"absolute","z-index":1,left:"0px",top:"0px",width:"100%",height:"100%",opacity:this.config.alpha})},play:function(){this.player.play()},pause:function(){this.player.pause()},stop:function(){this.pause();this.player.currentTime=0}}).extend("Item");Class("WindowHtml",{Package:"PageItem",create:function(f,h){this.parent=f;this.config=h;this.frameWidth=parseInt(this.config.windowWidth);this.frameHeight=parseInt(this.config.windowHeight);var g=this.config.windowURL;g.endsWith(".doc")?g=this.fixRelativePath(g):"http://"!=g.substr(0,7)&&"https://"!=g.substr(0,8)&&(g=g.startsWith("http:\\")?"http://"+g.substr(6,g.length):"http://"+g);this.background=$("<div></div>");this.frameBorder=$("<div name='frame_border'></div>");this.htmlFrame=$("<iframe class='flip-action' frameborder=0 src='"+g+"' width='"+this.frameWidth+"' height='"+this.frameHeight+"'></iframe>");this.closeButton=$("<img src='"+uiBaseURL+"close_form.png'/>");this.parent.append(this.background);this.background.append(this.frameBorder);this.frameBorder.append(this.closeButton);this.frameBorder.append(this.htmlFrame);this.setCss();this.initEvent();this.onResize();this.resizeTimer=this.onResize.interval(this,500);this.visible=!0},destroy:function(){this.visible&&(this.visible=!1,this.htmlFrame.attr("src",""),this.background.empty(),this.background.remove(),this.resizeTimer&&this.resizeTimer.stop())},initEvent:function(){this.background.bind(_event._down,function(c){this.destroy();c.stopPropagation()}.bind(this));this.closeButton.asButton();this.closeButton.bind(_event._end,function(c){this.destroy();c.stopPropagation()}.bind(this));this.frameBorder.bind(_event._down,function(c){c.stopPropagation();return !1}.bind(this))},setCss:function(){this.background.css({position:"absolute",width:"100%",height:"100%","background-color":"rgba(0,0,0,0.5)","z-index":"100"});this.frameBorder.css({position:"absolute","z-index":"11","background-color":"#F0F0F0","border-radius":"3px",margin:"auto",left:"0",top:"0",bottom:"0",right:"0"});this.htmlFrame.css({"background-color":"#F0F0F0",position:"relative","margin-left":"5px","margin-top":"32px"});this.closeButton.css({position:"absolute","z-index":"1",width:"32px",height:"32px",cursor:"pointer",right:"5px",top:"0px"})},onResize:function(){if(this.windowWidth!=windowWidth||this.windowHeight!=windowHeight){this.windowWidth=windowWidth;this.windowHeight=windowHeight;var d=windowWidth-10,f=windowHeight-10;isPhone()||(d=Math.min(this.frameWidth+10,d),f=Math.min(this.frameHeight+37,f));this.frameBorder.css({width:d+"px",height:f+"px"});f-=37;this.htmlFrame.attr("width",d-10+"px");this.htmlFrame.attr("height",f+"px")}}}).extend(PageItem.Item);Class("RollerText",{Package:"PageItem",create:function(h,n,m,l,k){this._super(h,n,m,l);this.bgColor=Color(this.config.bgcolor).toString();this.originWidth=this.config.pageW;this.originHeight=this.config.pageH;this.id="text"+k;this.initText();this.initEvents();parseBool(this.config.reflection)&&this.imageReflection(this.rollerText);this.onResize(this.pageWidth,this.pageHeight)},initText:function(){this.textli="";this.rollerText=$("<div id="+this.id+"></div>");this.textDown=$("<img/>");this.textUp=$("<img/>");var c=new TextFormatAnalyzer(this.config.textStr);this.fontSize=c.getMinFontSize();this.text=c.getHTML();this.adjustFontSize=$.browser.chrome?Math.max(1,12/this.fontSize):1;this.width=this.config.width*this.originWidth*this.adjustFontSize;this.height=this.config.height*this.originHeight*this.adjustFontSize;!0==parseBool(this.config.highlightsBool)&&this.rollerText.flash({swf:this.config.highlightsURL,width:this.width+"px",height:this.height+"px",wmode:"transparent"});!0===parseBool(this.config.fillBg)?this.rollerText.css({"background-color":Color(this.config.bgcolor).rgba()}):this.rollerText.css({background:""});this.addShadow(this.rollerText);1==this.config.barType?(this.rollerText.append(this.textDown),this.rollerText.append(this.textUp),this.setBarType(),this.textDown.attr({src:uiBaseURL+"textDown.png"}),this.textUp.attr({src:uiBaseURL+"textUp.png"})):this.rollerText.css({"word-wrap":"break-word","overflow-y":"auto",position:"absolute",width:this.width+"px",height:this.height+"px"});this.rollerText.append(this.text);this.parent.append(this.rollerText)},parseConfig:function(c){return{x:c.location.x,y:c.location.y,width:c.location.width,height:c.location.height,reflection:c.location.reflection,reflectionType:c.location.reflectionType,reflectionAlpha:c.location.reflectionAlpha,alpha:c.alpha,rotation:c.location.rotation,textStr:c.textStr,selectable:c.selectable,highlightsBool:c.highlightsBool,highlightsURL:c.highlightsURL,highlightsLabel:c.highlightsLabel,pageH:c.formats.defaultFormat.pageH,pageW:c.formats.defaultFormat.pageW,barType:c.barType,bgalpha:c.background.alpha,fillBg:c.background.fillBg,bgcolor:c.background.color,action:c.action,hasShadow:parseBool(c.shadow.hasDropShadow),shadow:c.shadow}},initEvents:function(){function c(d){d.stopPropagation&&d.stopPropagation()}this.textDown.click(function(){var d=this.text.scrollTop();this.text.animate({scrollTop:d+50},100)}.bind(this));this.textUp.click(function(){var d=this.text.scrollTop();this.text.animate({scrollTop:d-50},100)}.bind(this));this.rollerText.bind($.browser.mozilla?"DOMMouseScroll":"mousewheel",c);this.rollerText.bind(_event._down,c);this.rollerText.bind(_event._up,c);this.addActionEvent(this.text)},setBarType:function(){this.textUp.css({"background-attachment":"fixed",position:"absolute",margin:"auto",width:"23px",height:"23px",bottom:"0px",right:"26px","background-color":"#FFFFFF",border:"1px solid"});this.textDown.css({position:"absolute",margin:"auto",width:"23px",height:"23px",bottom:"0px",right:"0px","background-attachment":"fixed","background-color":"#FFFFFF",border:"1px solid"});this.rollerText.css({"word-wrap":"break-word","overflow-x":"hidden","overflow-y":"scroll",position:"absolute",left:this.config.x*this.pageWidth+"px",top:this.config.y*this.pageHeight+"px",width:this.width+"px",height:this.height+"px"});this.setRotation(this.rollerText,this.config.rotation)},onResize:function(d,f){this.pageWidth=d;this.pageHeight=f;this.setPosition();this.resizeText(this.pageHeight)},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.rollerText.css({left:this.x+"px",top:this.y+"px"})},resizeText:function(c){c=c/this.originHeight/this.adjustFontSize;this.rollerText.css({"-webkit-transform-origin":"0% 0%","-moz-transform-origin":"0% 0%","-ms-transform-origin":"0% 0%","-o-transform-origin":"0% 0%","transform-origin":"0% 0%","-webkit-transform":"scale("+c+")","-moz-transform":"scale("+c+")","-ms-transform":"scale("+c+")","-o-transform":"scale("+c+")",transform:"scale("+c+")"})}}).extend(PageItem.Item);var PageEditor={AnnoType:{ANNO_LINK:"com.mobiano.flipbook.pageeditor.TAnnoLink",ANNO_YOUTUBE:"com.mobiano.flipbook.pageeditor.TAnnoYouTube",ANNO_YOUTUBE1:"com.mobiano.flipbook.pageeditor::TAnnoYoutubePlayer",ANNO_YOUTUBE2:"com.mobiano.flipbook.pageeditor.player::TAnnoYoutubePlayer02",ANNO_YOUTUBE3:"com.mobiano.flipbook.pageeditor.player::TAnnoYoutubePlayer03",ANNO_YOUTUBE4:"com.mobiano.flipbook.pageeditor.player::TAnnoYoutubePlayer04",ANNO_YOUTUBE5:"com.mobiano.flipbook.pageeditor.player::TAnnoYoutubePlayer05",ANNO_YOUTUBE6:"com.mobiano.flipbook.pageeditor.player::TAnnoYoutubePlayer06",ANNO_YOUTUBE7:"com.mobiano.flipbook.pageeditor.player::TAnnoYoutubePlayer07",ANNO_YOUTUBE7:"com.mobiano.flipbook.pageeditor.player::TAnnoYoutubePlayer08",ANNO_VIDEO1:"com.mobiano.flipbook.pageeditor::TAnnoVideoPlayer",ANNO_VIDEO2:"com.mobiano.flipbook.pageeditor.player::TAnnoSimpleVideoPlayer",ANNO_AUDIO1:"com.mobiano.flipbook.sound.TAnnoAdvancedSound",ANNO_AUDIO2:"com.mobiano.flipbook.sound.TAnnoWavemusicPlayer",ANNO_AUDIO3:"com.mobiano.flipbook.pageeditor::TAnnoPlugIn",ANNO_AUDIO4:"com.mobiano.flipbook.sound.TAnnoBackgroundSound",ANNO_AUDIO5:"",ANNO_AUDIO6:"",ANNO_AUDIO7:"",ANNO_AUDIO8:"",ANNO_AUDIO9:"",ANNO_VIMEO:"com.mobiano.flipbook.pageeditor.vimeoPlayer::TAnnoVimeoPlayer",ANNO_VIMEO2:"com.mobiano.flipbook.pageeditor.vimeoPlayer.TAnnoVimeoPopUpPlayer",ANNO_VIDEO:"com.mobiano.flipbook.pageeditor.TAnnoMovie",ANNO_AUDIO:"com.mobiano.flipbook.pageeditor.TAnnoSound",ANNO_IMAGE:"com.mobiano.flipbook.pageeditor.TAnnoImage",ANNO_BUTTON:"com.mobiano.flipbook.pageeditor.TAnnoButton",ANNO_NEW_AUDIO:"com.mobiano.flipbook.sound.TAnnoSound",ANNO_LINE:"com.mobiano.flipbook.pageeditor.shapes::TAnnoLine",ANNO_ARROW:"com.mobiano.flipbook.pageeditor.shapes::TAnnoArrow",ANNO_ROUND:"com.mobiano.flipbook.pageeditor.shapes::TAnnoEllipse",ANNO_RECTANGLE:"com.mobiano.flipbook.pageeditor.shapes::TAnnoRectangle",ANNO_TRIANGLE:"com.mobiano.flipbook.pageeditor.shapes::TAnnoTriangle",ANNO_PRISMATIC:"com.mobiano.flipbook.pageeditor.shapes::TAnnoPrismatic",ANNO_PARALLELOGRAM:"com.mobiano.flipbook.pageeditor.shapes::TAnnoParallelogram",ANNO_PENTAGON:"com.mobiano.flipbook.pageeditor.shapes::TAnnoPentagon",ANNO_HEXAGON:"com.mobiano.flipbook.pageeditor.shapes::TAnnoHexagon",ANNO_PENTAGON:"com.mobiano.flipbook.pageeditor.shapes::TAnnoPentagon",ANNO_DOVETAILED:"com.mobiano.flipbook.pageeditor.shapes::TAnnoDovetailed",ANNO_FLOWCHART:"com.mobiano.flipbook.pageeditor.shapes::TAnnoFlowChart",ANNO_CYLINDER:"com.mobiano.flipbook.pageeditor.shapes::TAnnoCylinder",ANNO_TRAPEZOID:"com.mobiano.flipbook.pageeditor.shapes::TAnnoTrapezoid",ANNO_RIGHTARROW:"com.mobiano.flipbook.pageeditor.shapes::TAnnoRightArrow",ANNO_VIRTUALEND:"com.mobiano.flipbook.pageeditor.shapes::TAnnoVirtualEnd",ANNO_CROSS:"com.mobiano.flipbook.pageeditor.shapes::TAnnoCross",ANNO_AREA:"com.mobiano.flipbook.pageeditor::TAnnoHighLightArea",ANNO_FLASHSHOW:"com.mobiano.flipbook.pageeditor.TAnnoSWF1",ANNO_PRINT:"com.mobiano.flipbook.pageeditor::TAnnoPrint",ANNO_TEXT:"com.mobiano.flipbook.pageeditor::TAnnoText",ANNO_ATEXT:"com.mobiano.flipbook.pageeditor::TAnnoDynamicText",ANNO_ROLLERTEXT:"com.mobiano.flipbook.pageeditor::TAnnoRollerText",ANNO_STARTEXT:"com.mobiano.flipbook.pageeditor::TAnnoStarwarsText",ANNO_TEXTANIM:"com.mobiano.flipbook.pageeditor.textAnim::TAnnoTextAnim",ANNO_EFFECTTEXT:"com.mobiano.flipbook.pageeditor.TAnnoEffectText",ANNO_CALLOUT:"com.mobiano.flipbook.pageeditor.shapes::TAnnoCallout",ANNO_ADVANCEDSOUND:"com.mobiano.flipbook.pageeditor::TAnnoAdvancedSound1",ANNO_ALPHATRANSITIONBANNER:"com.mobiano.flipbook.pageeditor.TAnnoAlphaTransitionBanner",ANNO_EMBEDDEDSLIDESHOW:"com.mobiano.flipbook.pageeditor.TAnnoEmbeddedSlideshow",ANNO_ATIMAGE:"com.mobiano.flipbook.pageeditor.TAnnoClipart",ANNO_BANNER:"com.mobiano.flipbook.pageeditor::TAnnoBanner",ANNO_CAROUSEL:"com.mobiano.flipbook.pageeditor.TAnnoCarouselViewer",ANNO_DYNSHOW:"com.mobiano.flipbook.pageeditor::TAnnoDynamicShowPhoto",ANNO_FLIPJUMP:"com.mobiano.flipbook.pageeditor.TAnnoDynamicTurnPhoto",ANNO_PLUGIN:"com.mobiano.flipbook.pageeditor::TAnnoPlugIn",ANNO_SWF:"com.mobiano.flipbook.pageeditor.TAnnoSWF",ANNO_CART:"com.mobiano.flipbook.pageeditor.TAnnoCart",ANNO_HOTSPOTS:"com.mobiano.flipbook.pageeditor.TAnnoHotSpots"},PlayEvt:{EVT_PLAY:"EVT_PageViewed",EVT_STOP:"EVT_PageOffView"},TriggerEventType:{MouseDown:"mouseDown",MouseOver:"mouseOver",MouseOut:"mouseOut",MouseUp:"mouseUp",MouseMove:"mouseMove",MouseLeave:"mouseLeave"},MouseOverType:{Zoom:"1",AddBorder:"2"},ActionType:{GOTO_PAGE:"com.mobiano.flipbook.pageeditor.TAnnoActionGotoPage",OPEN_URL:"com.mobiano.flipbook.pageeditor.TAnnoActionOpenURL",OPEN_WINDOW:"com.mobiano.flipbook.pageeditor.TAnnoActionOpenWindow",SLIDE_SHOW:"com.mobiano.flipbook.pageeditor.TAnnoActionPhotoSlide",ACTION_JS:"com.mobiano.flipbook.pageeditor.TAnnoActionJavascript",PLAY_AUDIO:"com.mobiano.flipbook.pageeditor.TAnnoActionPlayAudio",WINDOW_HTML:"com.mobiano.flipbook.pageeditor.TAnnoActionWindowHtml",PLAY_VIDEO:"com.mobiano.flipbook.pageeditor.TAnnoActionPlayVideo",SHOW_INFORMATION:"com.mobiano.flipbook.pageeditor.TAnnoActionShowInformation",QUIZ:"com.mobiano.flipbook.pageeditor.TAnnoActionQuiz",PLAYVIDEO:"com.mobiano.flipbook.Action.TAnnoActionPlayVideo",SWF_SLIDE:"com.mobiano.flipbook.pageeditor.TAnnoActionSwfSlide"},WindowType:{OPEN_YOUTUBE:"TYPE_YOUTUBE",OPEN_VIMEO:"TYPE_VIMEO",OPEN_DAILYMOTION:"TYPE_DAILYMOTION",OPEN_TYPE_WISTIA:"TYPE_WISTIA",OPEN_TYPE_YOUKU:"TYPE_YOUKU",OPEN_TYPE_QQ:"TYPE_QQ",OPEN_VIDEO:"0",OPEN_FLASH:"1",OPEN_SHOW_TEXT:"4"},PlayerType:{SKIN_1:"Skin 1",SKIN_2:"Skin 2",SKIN_3:"Skin 3"},AudioPlayer:{GLASS:"GlassAudioPlayer",SIMPLE:"SimpleAudioPlayer",STANDARD1:"StandardAudioPlayer",STANDARD2:"StandardAudioPlayer02",STANDARD3:"StandardAudioPlayer03",STANDARD4:"StandardAudioPlayer04",STANDARD5:"StandardAudioPlayer05",STANDARD6:"StandardAudioPlayer06"},Effect:{FADEIN:"com.mobiano.flipbook.pageeditor.effect::TFadeInEffect",CUTTING:"com.mobiano.flipbook.pageeditor.effect::TCuttingEffect",FLY_IN:"com.mobiano.flipbook.pageeditor.effect::TFlyEffect",INDENTATION:"com.mobiano.flipbook.pageeditor.effect::TIndentationEffect"}};Class("PageItemFactory",{createItem:function(m,t,s,r,q,p){if(!t){return null}var o=t.annotype,n=null;if(!this.browserSupport(o)){return null}q=q+"-"+p;o==PageEditor.AnnoType.ANNO_LINK&&(n=new PageItem.Link(m,t,s,r));if(o==PageEditor.AnnoType.ANNO_YOUTUBE||o==PageEditor.AnnoType.ANNO_YOUTUBE1||o==PageEditor.AnnoType.ANNO_YOUTUBE2||o==PageEditor.AnnoType.ANNO_YOUTUBE3||o==PageEditor.AnnoType.ANNO_YOUTUBE4||o==PageEditor.AnnoType.ANNO_YOUTUBE6||o==PageEditor.AnnoType.ANNO_YOUTUBE7||o==PageEditor.AnnoType.ANNO_YOUTUBE8){n=new PageItem.Youtube(m,t,s,r)}o==PageEditor.AnnoType.ANNO_YOUTUBE5&&(n=new PageItem.PopUpVimeo(m,t,s,r,"youtube"));o==PageEditor.AnnoType.ANNO_VIMEO&&(n=new PageItem.Vimeo(m,t,s,r));o==PageEditor.AnnoType.ANNO_VIMEO2&&(n=new PageItem.PopUpVimeo(m,t,s,r,"vimeo"));o!=PageEditor.AnnoType.ANNO_AUDIO&&o!=PageEditor.AnnoType.ANNO_NEW_AUDIO||t.playerType!=PageEditor.PlayerType.SKIN_3||(n=new PageItem.Audio(m,t,s,r,"default"));o!=PageEditor.AnnoType.ANNO_AUDIO&&o!=PageEditor.AnnoType.ANNO_NEW_AUDIO||t.playerType!=PageEditor.PlayerType.SKIN_1||(n=new PageItem.Audio(m,t,s,r,"skin1"));o!=PageEditor.AnnoType.ANNO_AUDIO&&o!=PageEditor.AnnoType.ANNO_NEW_AUDIO||t.playerType!=PageEditor.PlayerType.SKIN_2||(n=new PageItem.Audio(m,t,s,r,"skin2"));o==PageEditor.AnnoType.ANNO_AUDIO1&&(n=new PageItem.Audio(m,t,s,r,"advanced"));o==PageEditor.AnnoType.ANNO_AUDIO2&&(n=new PageItem.Audio(m,t,s,r,"wave"));o==PageEditor.AnnoType.ANNO_AUDIO4&&(n=new PageItem.Audio(m,t,s,r,"background"));o==PageEditor.AnnoType.ANNO_PLUGIN&&t.className in audioThemeNames&&(n=void 0,p=t.className,p==PageEditor.AudioPlayer.GLASS&&(n="glass"),p==PageEditor.AudioPlayer.SIMPLE&&(n="simple"),p==PageEditor.AudioPlayer.STANDARD1&&(n="enjoy"),p==PageEditor.AudioPlayer.STANDARD2&&(n="decent"),p==PageEditor.AudioPlayer.STANDARD3&&(n="tree"),p==PageEditor.AudioPlayer.STANDARD4&&(n="christmas"),p==PageEditor.AudioPlayer.STANDARD5&&(n="turnonoff"),p==PageEditor.AudioPlayer.STANDARD6&&(n="fade"),n=new PageItem.Audio(m,t,s,r,n));o==PageEditor.AnnoType.ANNO_IMAGE&&(t.imgOriginalProportions||(t.imgOriginalProportions="false"),n=new PageItem.Image(m,t,s,r));o==PageEditor.AnnoType.ANNO_BUTTON&&(n=new PageItem.Button(m,t,s,r,q));o==PageEditor.AnnoType.ANNO_SWF&&(n=new PageItem.FlashSwf(m,t,s,r));o==PageEditor.AnnoType.ANNO_FLASHSHOW&&(n=new PageItem.FlashShow(m,t,s,r));o==PageEditor.AnnoType.ANNO_HOTSPOTS&&(n=new PageItem.HotSpots(m,t,s,r));o==PageEditor.AnnoType.ANNO_LINE&&(n=new PageItem.Line(m,t,s,r,q));o==PageEditor.AnnoType.ANNO_ARROW&&(n=new PageItem.Arrow(m,t,s,r));o==PageEditor.AnnoType.ANNO_TRIANGLE&&(n=new PageItem.Triangle(m,t,s,r));o==PageEditor.AnnoType.ANNO_PRISMATIC&&(n=new PageItem.Prismatic(m,t,s,r));o==PageEditor.AnnoType.ANNO_CROSS&&(n=new PageItem.Cross(m,t,s,r));o==PageEditor.AnnoType.ANNO_VIRTUALEND&&(n=new PageItem.VirtualEnd(m,t,s,r));o==PageEditor.AnnoType.ANNO_RIGHTARROW&&(n=new PageItem.RightArrow(m,t,s,r));o==PageEditor.AnnoType.ANNO_TRAPEZOID&&(n=new PageItem.Trapezoid(m,t,s,r));o==PageEditor.AnnoType.ANNO_DOVETAILED&&(n=new PageItem.Dovetailed(m,t,s,r));o==PageEditor.AnnoType.ANNO_FLOWCHART&&(n=new PageItem.FlowChart(m,t,s,r));o==PageEditor.AnnoType.ANNO_CYLINDER&&(n=new PageItem.Cylinder(m,t,s,r));o==PageEditor.AnnoType.ANNO_PENTAGON&&(n=new PageItem.Pentagon(m,t,s,r));o==PageEditor.AnnoType.ANNO_HEXAGON&&(n=new PageItem.Hexagon(m,t,s,r));o==PageEditor.AnnoType.ANNO_PARALLELOGRAM&&(n=new PageItem.Parallelogram(m,t,s,r));o==PageEditor.AnnoType.ANNO_ROUND&&(n=new PageItem.Round(m,t,s,r,q));o==PageEditor.AnnoType.ANNO_RECTANGLE&&(n=new PageItem.Rectangle(m,t,s,r,q));o==PageEditor.AnnoType.ANNO_TEXT&&(n=new PageItem.Text(m,t,s,r,q));o==PageEditor.AnnoType.ANNO_ROLLERTEXT&&(n=new PageItem.RollerText(m,t,s,r,q));o==PageEditor.AnnoType.ANNO_AREA&&(n=new PageItem.Area(m,t,s,r,q));o==PageEditor.AnnoType.ANNO_CALLOUT&&(n=new PageItem.Callout(m,t,s,r));o==PageEditor.AnnoType.ANNO_ATEXT&&(n=new PageItem.AText(m,t,s,r,q));o==PageEditor.AnnoType.ANNO_STARTEXT&&(n=new PageItem.StarText(m,t,s,r,q));o==PageEditor.AnnoType.ANNO_TEXTANIM&&(n=new PageItem.TextAmin(m,t,s,r,q));o==PageEditor.AnnoType.ANNO_ATIMAGE&&(n=new PageItem.PngImage(m,t,s,r));o==PageEditor.AnnoType.ANNO_EFFECTTEXT&&(n=new PageItem.EffectText(m,t,s,r,q));o==PageEditor.AnnoType.ANNO_ADVANCEDSOUND&&(n=new PageItem.Sound(m,t,s,r,q));o==PageEditor.AnnoType.ANNO_CAROUSEL&&(n=new PageItem.Carousel(m,t,s,r,q));o==PageEditor.AnnoType.ANNO_DYNSHOW&&(n=new PageItem.DynamicShow(m,t,s,r,q));o==PageEditor.AnnoType.ANNO_BANNER&&(n=new PageItem.Banner(m,t,s,r,q));o==PageEditor.AnnoType.ANNO_FLIPJUMP&&(n=new PageItem.FlipJump(m,t,s,r,q));o==PageEditor.AnnoType.ANNO_PLUGIN&&t.className==PLUGIN_MAGNETICS&&(n=new PageItem.FocusJump(m,t,s,r,q));o==PageEditor.AnnoType.ANNO_PLUGIN&&t.className==PLUGIN_ROTATE3D&&(n=new PageItem.Rotate3D(m,t,s,r,q));o==PageEditor.AnnoType.ANNO_VIDEO1&&(n=new PageItem.Video(m,t,s,r,"smallblack"));o==PageEditor.AnnoType.ANNO_VIDEO2&&(n=new PageItem.LoopControlVideo(m,t,s,r));o==PageEditor.AnnoType.ANNO_PLUGIN&&t.className==PLUGIN_VIDEO1&&(n=new PageItem.Video(m,t,s,r,"classic"));o==PageEditor.AnnoType.ANNO_PLUGIN&&t.className==PLUGIN_VIDEO2&&(n=new PageItem.PopUpVideoItem(m,t,s,r));o==PageEditor.AnnoType.ANNO_VIDEO&&(n=new PageItem.Video(m,t,s,r,"round"));o==PageEditor.AnnoType.ANNO_ALPHATRANSITIONBANNER&&(n=new PageItem.AlphaTransitionBanner(m,t,s,r));o==PageEditor.AnnoType.ANNO_EMBEDDEDSLIDESHOW&&(n=new PageItem.EmbeddedSlideshow(m,t,s,r));o==PageEditor.AnnoType.ANNO_PRINT&&(n=new PageItem.Print(m,t,s,r,q));o==PageEditor.AnnoType.ANNO_CART&&(n=new PageItem.ShoppingCart(m,t,s,r));return n},browserSupport:function(c){return isBelowIE9()?c==PageEditor.AnnoType.ANNO_LINK||c==PageEditor.AnnoType.ANNO_IMAGE||c==PageEditor.AnnoType.ANNO_TEXT||c==PageEditor.AnnoType.ANNO_ALPHATRANSITIONBANNER?!0:!1:!0}});Class("PageEditorParser",{create:function(f,h,g){this.container=f;this.containerWidth=h;this.containerHeight=g},createItemsForPage:function(k){var p=new ObjectPool;if(!this.hasProfessional()){return p}var o=this.getPageAnnos();if(0>=k||o.length<k||0==o[k-1].length){return p}for(var n=new PageItemFactory,o=o[k-1],m=0;m<o.length;m++){var l=o[m];l&&(l=n.createItem(this.container,l,this.containerWidth,this.containerHeight,k,m+1))&&p.add(l)}return p},hasProfessional:function(){if(!global.pageEditor){return !1}var f=this.getPageAnnos();if(!f||0==f.length){return !1}for(var h=0;h<f.length;h++){var g=f[h];if(g&&0<g.length){return !0}}return !1},getPageAnnos:function(){var c=global.pageEditor;c instanceof Array||(c=c.pageAnnos);return c}});Class("SwfSlide",{Package:"PageItem",create:function(g,l,k,h){l&&l.action&&(this.focus=!0,this.config=l,this.moving=!1,this.action=l.action,this.parent=g,this.elemConfig=l.elemConfig,this.element=this.elemConfig.element,"IMG"==this.element[0].tagName.toUpperCase()&&(this.element=this.element.panent()),this.windowWidth=k,this.windowHeight=h,this.pageWidth=this.elemConfig.parentWidth,this.pageHeight=this.elemConfig.parentHeight,this.imgWidth=this.action.targetWidth,this.imgHeight=this.action.targetHeight,this.height=this.width=0,this.type=this.action.startType,this.initHtml(),this.initCss(),this.imgLoad(),$(window).resize(this.onResize.bind(this)),this.initEvent())},initHtml:function(){this.container=$("<div></div>");this.box=$("<div id='box'></div>");this.img=$("<img src='"+this.action.swfURL+"' />");this.close=$("<img class='closeImg'/>");this.background=$("<div class='BG'></div>");this.container.append(this.close);this.container.append(this.box);this.box.append(this.img);this.parent.append(this.container)},resetCss:function(){this.container.css({width:this.width-20+"px",height:this.height-20+"px"});this.img.css({width:this.width-20+"px",height:this.height-20+"px"})},onResize:function(){this.getAttribute();this.getPosition();this.initCss()},imgLoad:function(){this.img.on("load",function(){this.onResize()}.bind(this))},getAttribute:function(){this.width=this.elemConfig.parentWidth;this.height=this.elemConfig.parentHeight;var d=this.img[0].naturalWidth,f=this.img[0].naturalHeight;this.imgWidth=d;this.imgHeight=f;3==this.action.windowScale?(this.width=parseInt(this.action.windowWidth),this.height=parseInt(this.action.windowHeight),this.imgWidth=parseInt(this.action.targetWidth),this.imgHeight=parseInt(this.action.targetHeight)):1==this.action.windowScale?(this.width=d>this.pageWidth?this.pageWidth/3*2:d,this.height=f>this.pageHeight?this.pageHeight/4*3:f):2==this.action.windowScale&&(3!=this.action.targetScale?(this.width=d,this.height=f,this.imgWidth=d,this.imgHeight=f):(this.width=parseInt(this.action.targetWidth),this.height=parseInt(this.action.targetHeight),this.imgWidth=parseInt(this.action.targetWidth),this.imgHeight=parseInt(this.action.targetHeight)));1==this.action.targetScale?(d>f?(this.imgWidth=this.width,this.imgHeight=this.imgWidth/d*f):(this.imgHeight=this.height,this.imgWidth=this.imgHeight/f*d),1==this.action.windowScale&&(this.width=this.imgWidth>this.pageWidth?this.pageWidth/3*2:this.imgWidth,this.height=this.imgHeight>this.pageHeight?this.pageHeight/4*3:this.imgHeight)):4==this.action.targetScale?(this.imgWidth=this.width,this.imgHeight=this.height,1==this.action.windowScale&&(this.width=this.imgWidth>this.pageWidth?this.pageWidth/3*2:this.imgWidth,this.height=this.imgHeight>this.pageHeight?this.pageHeight/4*3:this.imgHeight)):5==this.action.targetScale&&(d>f?(this.imgHeight=this.height,this.imgWidth=this.imgHeight/f*d):(this.imgHeight=this.width,this.imgHeight=this.imgWidth/d*f),1==this.action.windowScale&&(this.width=this.imgWidth>this.pageWidth?this.pageWidth/3*2:this.imgWidth,this.height=this.imgHeight>this.pageHeight?this.pageHeight/4*3:this.imgHeight))},initCss:function(){this.close.css({position:"absolute",top:"-20px",right:"-20px",width:"20px",height:"20px","border-radius":"50%",background:"#111",cursor:"pointer",display:"none"});form_icons&&form_icons.close?this.close.attr("src","data:image/png;base64,"+form_icons.close):this.close.attr("src",uiBaseURL+"close.png");this.img.css({position:"absolute",width:this.imgWidth+"px",height:this.imgHeight+"px"});this.box.css({position:"absolute",width:this.width+"px",height:this.height+"px",overflow:"hidden"});this.container.css({position:"absolute",width:this.width+"px",height:this.height+"px",background:"rgba(255,255,255,0.8)","z-index":"1001",border:"10px solid rgba(255,255,255,0)"});this.container.css(this.type,this.startPosition+"px").css("opacity","0");"left"==this.type||"right"==this.type?this.container.css({top:this.top+"px"}):this.container.css("left",this.left+"px");"true"==this.action.winIsAlphaBoolean&&this.container.css({background:"rgba(255,255,255,0.8)",border:"none"});"BtnClick"==this.action.outType&&this.close.css({display:"block"})},addAnimate:function(){this.container.css({transition:"all 0.5s","-webkit-transition":"all 0.5s","-o-transition":"all 0.5s","-ms-transition":"all 0.5s","-moz-transition":"all 0.5s"})},getPosition:function(){"left"==this.type?(this.startPosition=this.elemConfig.offsetX-this.width,this.endPosition=this.elemConfig.offsetX):"right"==this.type?(this.startPosition=this.elemConfig.parentWidth-this.width+this.elemConfig.offsetX,this.endPosition=this.elemConfig.parentWidth+this.elemConfig.offsetX,this.width>this.pageWidth&&(this.startPosition=this.windowWidth-this.width-this.elemConfig.offsetX-this.pageWidth,this.endPosition=this.windowWidth-this.elemConfig.offsetX-this.pageWidth)):"bottom"==this.type?(this.startPosition=this.windowHeight-this.elemConfig.offsetY-this.elemConfig.parentHeight-this.height,this.endPosition=this.windowHeight-this.elemConfig.offsetY-this.elemConfig.parentHeight,this.height>this.windowHeight&&(this.startPosition=-this.height+this.elemConfig.offsetY,this.endPosition=this.elemConfig.offsetY)):(this.startPosition=this.elemConfig.offsetY-this.height,this.endPosition=this.elemConfig.offsetY);this.width>this.pageWidth?this.left=(this.windowWidth-this.width)/2:(this.left=this.config.x*this.elemConfig.parentWidth+this.elemConfig.offsetX,this.config.x*this.elemConfig.parentWidth+this.width>this.pageWidth&&(this.left=this.pageWidth-this.width-20+this.elemConfig.offsetX));this.height>this.pageHeight?this.top=(this.windowHeight-this.height)/2:(this.top=this.config.y*this.elemConfig.parentHeight+this.elemConfig.offsetY,this.config.y*this.elemConfig.parentHeight+this.height>this.pageHeight&&(this.top=this.pageHeight-this.height-20+this.elemConfig.offsetY))},initEvent:function(){"Mouse Out"==this.action.outType?this.mouseOutEvent():"BtnClick"==this.action.outType&&this.clickEvent()},clickEvent:function(){this.close.bind("click",function(){this.hide()}.bind(this))},mouseOutEvent:function(){this.container.bind("mouseleave",function(){this.focus=!1;this.moving=!0;setTimeout(function(){this.focus||this.hide()}.bind(this),50);this.timer1=setTimeout(function(){this.moving=!1}.bind(this),400)}.bind(this));this.container.bind("mouseenter",function(){this.focus=!0}.bind(this));this.element.bind("mouseenter",function(){this.focus=!0}.bind(this));this.element.bind("mouseleave",function(){this.focus=!1;this.moving=!0;setTimeout(function(){this.focus||this.hide()}.bind(this),50);this.timer1=setTimeout(function(){this.moving=!1}.bind(this),400)}.bind(this))},setPosition:function(){this.addAnimate();this.moving=!0;setTimeout(function(){this.moving=!1}.bind(this),500);this.container.css(this.type,this.endPosition+"px").css({opacity:"1"})},show:function(){this.container.css({"z-index":"1001"});setTimeout(function(){this.setPosition()}.bind(this),50)},isBusy:function(){return this.moving},hide:function(){this.container.css(this.type,this.startPosition+"px").css({opacity:"0"});setTimeout(function(){this.container.css({"z-index":"1"})}.bind(this),400)}});var DockMenu=Class({create:function(f,h,g){this.menu=$("<div id='dockMenu' class='dockMenu'></div>");this.menuContent=$("<div id='dockMenuContent' class='dockMenuContent'></div>");this.itemArray=[];this.fromIndex=h;this.toIndex=g;this.width=0;this.height=130;f.append(this.menu);this.menu.append(this.menuContent);this.initStyle();this.addItem();this.initEvent();this.hide()},initStyle:function(){this.menu.css({width:"100%",height:this.height+"px"});this.menuContent.css({height:"100%",width:"100%",left:0,bottom:0})},addItem:function(){for(var h=Math.ceil((this.toIndex-this.fromIndex+1)/2),n=0;n<h;n++){var m;m=rightToLeft?this.fromIndex+2*(h-1-n)+1:this.fromIndex+2*n;var l=rightToLeft?this.fromIndex+2*(h-1-n):this.fromIndex+2*n+1,k=[{url:getPageDir(m,"thumb",originTotalPageCount),index:m},{url:getPageDir(l,"thumb",originTotalPageCount),index:l}];if(0>=m||m>bookConfig.totalPageCount){k=[{url:getPageDir(l,"thumb",originTotalPageCount),index:l}]}if(0>=l||l>bookConfig.totalPageCount){k=[{url:getPageDir(m,"thumb",originTotalPageCount),index:m}]}m=new DockMenuItem(this.menuContent,k);l=Math.min(l,bookConfig.totalPageCount);l=Math.max(1,l);m.pageIndex=l;this.itemArray.push(m)}this.resize()},addObj:function(d,f){"before"==f?d.prependTo(this.menuContent):d.appendTo(this.menuContent)},resize:function(){windowWidth<$(this.menuContent).width()?$(this.menuContent).css({"margin-left":(windowWidth-$(this.menuContent).width())/2-25+"px"}):$(this.menuContent).css({"margin-left":"0px"})},setPosition:function(f,h,g){if(void 0==g||null==g){g=["left","top"]}this.menu.css(g[0],f);this.menu.css(g[1],h)},initEvent:function(){function m(){p||(p=!0,window.setTimeout(t,15))}function t(){for(var b=0;b<n.itemArray.length;b++){n.itemArray[b]&&n.itemArray[b].sizeDockIcons(s,r)}p=!1;o&&(o=!1,m())}var s,r,q=this.menu,p=!1,o=!1,n=this;$(q).bind(_event._move,function(b){q.is(":visible")&&(s=b.pageX,r=b.pageY,o=!0,m())});$(q).bind(_event._leave,function(b){q.is(":visible")&&(r=s=1000,o=!0,m())})},show:function(){this.menu.show();this.resize();for(var c=0;c<this.itemArray.length;c++){this.itemArray[c].fillContent()}},hide:function(){this.menu.hide()},clearHighLight:function(){this.currentItem&&this.currentItem.clearHighLight()},setHighLight:function(d){d=parseInt(d%20/2);rightToLeft&&(d=this.itemArray.length-d-1);this.itemArray[d].setHighLight();for(var f=0;f<this.itemArray.length;f++){this.itemArray[f].fillContent()}this.currentItem=this.itemArray[d]}}),DockMenuItem=Class({create:function(d,f){this.item=$("<div id='item' class='dockMenuItem'></div>");this.imgArr=f;this.doubleImage=2>f.length?!1:!0;this.itemHeight=60;this.itemWidth=0;this.toScale=1.5;this.padding=10;d.append(this.item);this.initItem()},initItem:function(){this.itemContent=$("<div class='dockMenuItemContent dockMenuItemShadow'></div>");this.itemCaption=$("<span class='dockMenuItemCaption'/>");this.itemCaptionAfter=$("<div class='dockMenuItemCaptionAfter'/>");this.item.append(this.itemContent);this.item.append(this.itemCaption);this.itemCaption.after(this.itemCaptionAfter);$(this.itemCaptionAfter).css({"background-image":"url("+uiBaseURL+"span.png)"});this.addContent();this.resize(this.itemHeight);this.addEvent()},resize:function(d){var f=d*bookConfig.largePageWidth*2/bookConfig.largePageHeight;!1===this.doubleImage&&(f/=2);this.item.css({width:f+"px",height:"130px"});this.item.css({"padding-left":this.padding+"px"});this.itemContent.css({width:f+"px",height:d+"px"});this.resizeContent(f,d)},addContent:function(){!1===this.doubleImage?(this.itemIcon=$("<img/>"),this.itemContent.append(this.itemIcon)):!0===this.doubleImage&&(this.itemLeftIcon=$("<img/>"),this.itemRightIcon=$("<img/>"),this.itemContent.append(this.itemLeftIcon),this.itemContent.append(this.itemRightIcon))},fillContent:function(){!1===this.doubleImage?(this.fillImage(this.itemIcon,this.imgArr[0].index),this.itemCaption.text(this.imgArr[0].index)):!0===this.doubleImage&&(this.fillImage(this.itemLeftIcon,this.imgArr[0].index),this.fillImage(this.itemRightIcon,this.imgArr[1].index),this.itemCaption.text(this.imgArr[0].index+"-"+this.imgArr[1].index))},fillImage:function(f,h){var g=function(b){f.attr("src",b)}.bind(this);fillImageAfterLoaded(h,"thumb",g)},resizeContent:function(d,f){!1===this.doubleImage?this.itemIcon.css({width:d+"px",height:f+"px"}):!0===this.doubleImage&&(this.itemLeftIcon.css({width:d/2+"px",height:f+"px"}),this.itemRightIcon.css({width:d/2+"px",height:f+"px"}),this.itemLeftIcon.css({position:"absolute",left:"0px"}),this.itemRightIcon.css({position:"absolute",left:d/2+"px"}))},sizeDockIcons:function(k,p){var o=this.itemHeight,n=this.itemHeight*this.toScale-o,m=$(this.item).offset().left+$(this.item).outerWidth()/2,l=$(this.item).offset().top+$(this.item).outerHeight()/2,m=this.distance(m,l,k,p),o=(1-Math.min(1,Math.max(0,m/180)))*n+o;this.resize(o)},distance:function(g,l,k,h){g=k-g;l=h-l;return Math.sqrt(g*g+l*l)},addEvent:function(){this.item.bind(_event._end,function(){gotoPageFun(this.pageIndex)}.bind(this));this.item.bind(_event._over,function(){this.itemCaption.css("display","inline-block");this.itemCaptionAfter.css("display","block")}.bind(this));this.item.bind(_event._leave,function(){this.itemCaption.hide();this.itemCaptionAfter.hide()}.bind(this))},clearHighLight:function(){this.itemContent.css("border","");this.itemContent.css("border-radius","0px")},setHighLight:function(){this.itemContent.css("border","3px solid #6bc30d");this.itemContent.css("border-radius","3px")}});Class("CoverShadow",{create:function(c){this.parent=c;this.init()},init:virtual_function,destroy:virtual_function,onResize:function(){this.parentWidth=this.parent.width();this.parentHeight=this.parent.height()}});Class("HardCoverShadow",{init:function(){this.coverShadow=$('<div class="cover_shadow"></div>');isBelowIE11()&&this.coverShadow.css("z-index",3);this.leftBorder=$("<div></div>");this.topBorder=$('<div class="hard_top_border"></div>');this.bottomBorder=$('<div class="hard_bottom_border hard_bottom_border_width"></div>');this.rightBorder=$('<div class="hard_right_border"></div>');this.parent.append(this.coverShadow);this.coverShadow.append(this.leftBorder);this.coverShadow.append(this.topBorder);this.coverShadow.append(this.bottomBorder);this.coverShadow.append(this.rightBorder)},onResize:function(){this._super();this.rightBorder.css({height:this.parentHeight-3+"px"})},destroy:function(){this.coverShadow.empty();this.coverShadow.remove()}}).extend(CoverShadow);Class("OuterHardCoverShadow",{create:function(f,h,g){this.style=h;this.flip=!!g;this._super(f)},init:function(){this._super();this.leftBorder.addClass("hard_left_border");this.leftBody=$('<div class="hard_left_body"></div>');this.coverShadow.append(this.leftBody);this.coverShadow.addClass(this.style);this.flip&&this.coverShadow.addClass("flip_x");this.onResize()}}).extend(HardCoverShadow);Class("InnerHardCoverShadow",{create:function(h,n,m,l,k){this.style=n;this.flip=!!m;void 0==l&&(l=0);this.borderWidth=l;this.showLeftShadow=k;this._super(h)},init:function(){this._super();this.showLeftShadow?(this.leftBorder.addClass("hard_inner_left_border"),this.leftCoverBorder=$('<div class="hard_left_cover_border"></div>'),this.coverShadow.append(this.leftCoverBorder)):this.leftBorder.css({display:"none"});this.flip&&this.coverShadow.addClass("flip_x");this.onResize()},onResize:function(){this._super();this.showLeftShadow&&(this.bottomBorder.css({left:"0px",width:"100%"}),this.leftBorder.css({top:this.borderWidth+"px",height:this.parentHeight-2*this.borderWidth+"px"}))}}).extend(HardCoverShadow);Class("NormalCoverShadow",{create:function(f,h,g){this.style=h;this.flip=!!g;this._super(f)},init:function(){this.coverShadow=$('<div class="cover_shadow"></div>');this.coverShadow.addClass(this.style);isBelowIE11()&&this.coverShadow.css("z-index",3);this.leftBorder=$('<div class="normal_left_border"></div>');this.leftBody=$('<div class="normal_left_body"></div>');this.parent.append(this.coverShadow);this.coverShadow.append(this.leftBorder);this.coverShadow.append(this.leftBody);this.flip&&this.coverShadow.addClass("flip_x");this.onResize()},destroy:function(){this.coverShadow.empty();this.coverShadow.remove()}}).extend(CoverShadow);Class("PageShadow",{create:function(f,h,g){this.parent=f;this.pageIndex=h;this.isLeftPage=g;this.isHardPage=parseBool(bookConfig.HardPageEnable)&&!isBelowIE11();this.bindingType=bookConfig.BindingType;this.bindingType||(this.bindingType="side");this.midShadow=this.coverShadow=null},addShadow:function(){this.isEmpty()||this.destroy();this.addCoverShadow();var c=parseBool(bookConfig.addPaperCoil);null!=this.coverShadow||c?this.hidePageShadow():this.addPageShadow();this.onResize()},isEmpty:function(){return null==this.coverShadow&&null==this.midShadow},addCoverShadow:function(){this.coverShadow=this.createCoverShadow()},createCoverShadow:virtual_function,addPageShadow:function(){this.midShadow=this.findPageShadow();this.midShadow||(this.midShadow=$("<div name='midShadow'></div>"),this.parent.append(this.midShadow));var c=1;this.isLeftPage?(this.midShadow.attr("class","leftShadow"),c=bookConfig.LeftShadowAlpha):(this.midShadow.attr("class","rightShadow"),c=bookConfig.RightShadowAlpha);this.midShadow.css({display:"block","z-index":5,"pointer-events":"none",opacity:c})},findPageShadow:function(){if(this.midShadow){return this.midShadow}var c=this.parent.children("div[name=midShadow]");return c[0]?$(c[0]):null},hidePageShadow:function(){(this.midShadow=this.findPageShadow())&&this.midShadow.css({display:"none"})},resizePageShadow:function(d){this.midShadow=this.findPageShadow();if(null!=this.midShadow){var f=bookConfig.LeftShadowWidth;this.isLeftPage||(f=bookConfig.RightShadowWidth);f=parseInt(f/450*d);this.midShadow.css({width:f+"px"})}},onResize:function(d,f){void 0==d?(this.parentWidth=this.parent.width(),this.parentHeight=this.parent.height()):(this.parentWidth=d,this.parentHeight=f);if(this.coverShadow){this.coverShadow.onResize()}this.resizePageShadow(this.parentWidth)},destroy:function(){null!=this.coverShadow&&(this.coverShadow.destroy(),this.coverShadow=null);null!=this.midShadow&&(this.midShadow=null)}});Class("NormalPageShadow",{create:function(f,h,g){this._super(f,h,g);this.evenPageCount=totalPageCount},createCoverShadow:function(){var k=1==this.pageIndex,p=2==this.pageIndex,o=this.pageIndex==this.evenPageCount,n=this.pageIndex==this.evenPageCount-1,m=4<this.evenPageCount,l=this.isLeftPage;if(this.isHardPage){if(k||o){return new OuterHardCoverShadow(this.parent,this.bindingType,l)}if(p||n){return new InnerHardCoverShadow(this.parent,this.bindingType,l,bookConfig.hardCoverBorderWidth,m)}}else{if(k||o){return new NormalCoverShadow(this.parent,this.bindingType,l)}}return null}}).extend("PageShadow");Class("SinglePageShadow",{create:function(f,h,g){this._super(f,h,g);this.isRightToLeft=parseBool(bookConfig.RightToLeft)},createCoverShadow:function(){var d=1==this.pageIndex,f=this.pageIndex==bookConfig.totalPageCount;if(this.isHardPage){if(d){return new OuterHardCoverShadow(this.parent,this.bindingType,this.isRightToLeft)}if(f){return new InnerHardCoverShadow(this.parent,this.bindingType,this.isRightToLeft,bookConfig.hardCoverBorderWidth,!0)}}else{if(d){return new NormalCoverShadow(this.parent,this.bindingType,this.isRightToLeft)}}return null}}).extend("PageShadow");Class("CatalogPageShadow",{create:function(f,h,g){this._super(f,h,g);this.evenPageCount=totalPageCount;this.bindingType="catalog"},createCoverShadow:function(){var k=1==this.pageIndex,p=2==this.pageIndex,o=this.pageIndex==this.evenPageCount,n=this.pageIndex==this.evenPageCount-1,m=4<this.evenPageCount,l=this.isLeftPage;if(this.isHardPage){if(k||o){return new OuterHardCoverShadow(this.parent,this.bindingType,l)}if(p||n){return new InnerHardCoverShadow(this.parent,this.bindingType,l,0,m)}}else{if(k||o){return new NormalCoverShadow(this.parent,this.bindingType,l)}}return null},addPageShadow:function(){this._super();this.isLeftPage?this.midShadow.attr("class","catalogLeftShadow"):this.midShadow.attr("class","catalogRightShadow")}}).extend("PageShadow");Class("SlidePageShadow",{createCoverShadow:function(){},addShadow:function(){}}).extend("PageShadow");var BorderSewing={deep:{top:{url:"deep_top_sewing.png",width:28,height:42},right:{url:"deep_right_sewing.png",width:71,height:28},bottom:{url:"deep_bottom_sewing.png",width:28,height:42},renderBorder:!0},normal:{top:{url:"normal_top_sewing.png",width:28,height:10},right:{url:"normal_right_sewing.png",width:10,height:28},bottom:{url:"normal_bottom_sewing.png",width:28,height:20},renderBorder:!0},flat:{top:{url:"flat_top_sewing.png",width:28,height:10},right:{url:"flat_right_sewing.png",width:10,height:28},bottom:{url:"flat_bottom_sewing.png",width:28,height:10},renderBorder:!1}},PageTextureResource={leather1:{texture:"leather1.png",sewing:BorderSewing.deep},leather2:{texture:"leather2.png",sewing:BorderSewing.normal},cloth1:{texture:"cloth1.png",sewing:BorderSewing.flat},cloth2:{texture:"cloth2.png",sewing:BorderSewing.flat},cloth3:{texture:"cloth3.png",sewing:BorderSewing.flat},cloth4:{texture:"cloth4.png",sewing:BorderSewing.normal},cardboard1:{texture:"cardboard1.png",sewing:null},cardboard2:{texture:"cardboard2.png",sewing:null},cardboard3:{texture:"cardboard3.png",sewing:null},silk1:{texture:"silk1.png",sewing:BorderSewing.flat},silk2:{texture:"silk2.png",sewing:BorderSewing.flat},silk3:{texture:"silk3.png",sewing:BorderSewing.flat},silk4:{texture:"silk4.png",sewing:BorderSewing.flat},wood1:{texture:"wood1.png",sewing:null},wood2:{texture:"wood2.png",sewing:null}};Class("PageTexture",{create:function(f,h,g){this.parent=f;this.pageIndex=h;this.isLeftPage=g;this.isHardPage=parseBool(bookConfig.HardPageEnable)&&!isBelowIE11();this.borderWidth=bookConfig.hardCoverBorderWidth-4;this.initResource()},initResource:function(){this.name=bookConfig.coverTexture;this.resource=PageTextureResource[this.name]},render:function(){this.isEmpty()||this.destroy();this.isCover&&this.renderCover()},isEmpty:function(){return null==this.texture},renderPage:function(){this.texture=null},renderCover:function(){this.isHardPage&&this.resource&&(this.renderTexture(),this.renderSewing(),this.onResize())},renderTexture:function(){this.texture=$("<div id='page_texture'></div>");this.texture.css({position:"absolute","pointer-events":"none","z-index":1,width:"100%",height:"100%"});this.parent.append(this.texture);var c=uiBaseURL+this.resource.texture;this.isOutCover?this.texture.css({"background-image":"url("+c+")","background-repeat":"repeat"}):this.parent.css({"background-image":"url("+c+")","background-repeat":"repeat"})},renderSewing:function(){if(!(0>=this.borderWidth)&&this.resource.sewing){var c=this.resource.sewing;this.isInnerCover&&(c=BorderSewing.flat);this.top_texture=$("<div id='top_texture'></div>");this.top_texture.css({position:"absolute",top:this.borderWidth+"px",height:c.top.height+"px","background-image":"url("+uiBaseURL+c.top.url+")","background-repeat":"repeat-x"});this.texture.append(this.top_texture);this.right_texture=$("<div id='right_texture'></div>");this.right_texture.css({position:"absolute",right:this.borderWidth+"px",width:c.right.width+"px","background-image":"url("+uiBaseURL+c.right.url+")","background-repeat":"repeat-y"});this.texture.append(this.right_texture);this.bottom_texture=$("<div id='bottom_texture'></div>");this.bottom_texture.css({position:"absolute",bottom:this.borderWidth+"px",height:c.bottom.height+"px","background-image":"url("+uiBaseURL+c.bottom.url+")","background-repeat":"repeat-x"});this.texture.append(this.bottom_texture);this.isLeftPage&&(this.right_texture.addClass("flip_x"),this.right_texture.css({left:this.borderWidth+"px",right:"auto"}),this.top_texture.css({right:"0px",left:"auto"}),this.bottom_texture.css({right:"0px",left:"auto"}));this.resource.sewing.renderBorder&&this.renderBorder()}},renderBorder:function(){0!=this.borderWidth&&(this.top_texture_border=$("<div id='top_texture_border'></div>"),this.top_texture_border.css({position:"absolute",top:"0px",width:"100%",height:this.borderWidth+"px","background-image":$.browser.prefix+"linear-gradient(top, rgba(220,220,220,0) 0%, rgba(220,220,220,0.2) 50%, rgba(220,220,220,0) 100%)"}),this.texture.append(this.top_texture_border),this.right_texture_border=$("<div id='right_texture_border'></div>"),this.right_texture_border.css({position:"absolute",right:"0px",width:this.borderWidth+"px",height:"100%","background-image":$.browser.prefix+"linear-gradient(right, rgba(220,220,220,0) 0%, rgba(220,220,220,0.2) 50%, rgba(220,220,220,0) 100%)"}),this.texture.append(this.right_texture_border),this.bottom_texture_border=$("<div id='bottom_texture_border'></div>"),this.bottom_texture_border.css({position:"absolute",bottom:"0px",width:"100%",height:this.borderWidth+"px","background-image":$.browser.prefix+"linear-gradient(bottom, rgba(220,220,220,0) 0%, rgba(220,220,220,0.2) 50%, rgba(220,220,220,0) 100%)"}),this.texture.append(this.bottom_texture_border),this.isLeftPage&&this.right_texture_border.css({left:"0px",right:"auto"}))},onResize:function(){this.parentWidth=this.parent.width();this.parentHeight=this.parent.height();this.top_texture&&this.top_texture.css({width:this.parentWidth-this.borderWidth+"px"});this.right_texture&&this.right_texture.css({top:this.borderWidth+"px",height:this.parentHeight-2*this.borderWidth+"px"});this.bottom_texture&&this.bottom_texture.css({width:this.parentWidth-this.borderWidth+"px"})},destroy:function(){this.texture&&(this.texture.remove(),this.texture=null);this.top_texture&&(this.top_texture.remove(),this.top_texture=null);this.right_texture&&(this.right_texture.remove(),this.right_texture=null);this.bottom_texture&&(this.bottom_texture.remove(),this.bottom_texture=null);this.top_texture_border&&(this.top_texture_border.remove(),this.top_texture_border=null);this.right_texture_border&&(this.right_texture_border.remove(),this.right_texture_border=null);this.bottom_texture_border&&(this.bottom_texture_border.remove(),this.bottom_texture_border=null)}});Class("NormalPageTexture",{create:function(f,h,g){this._super(f,h,g);this.isOutCover=1==h||h==totalPageCount;this.isInnerCover=2==h||h==totalPageCount-1;this.isCover=this.isOutCover||this.isInnerCover}}).extend("PageTexture");Class("SinglePageTexture",{create:function(f,h,g){this._super(f,h,g);this.isOutCover=1==h;this.isInnerCover=h==bookConfig.totalPageCount;this.isCover=this.isOutCover||this.isInnerCover}}).extend("PageTexture");Class("CatalogPageTexture",{create:function(f,h,g){this._super(f,h,g);this.isOutCover=1==h||h==totalPageCount;this.isInnerCover=2==h||h==totalPageCount-1;this.isCover=this.isOutCover||this.isInnerCover}}).extend("PageTexture");Class("SlidePageTexture",{create:function(f,h,g){this._super(f,h,g);this.isCover=!1}}).extend("PageTexture");Class("PageRendering",{create:function(g,l,k,h){this.parent=g;this.pageIndex=l;this.isLeftPage=k;this.pageShadow=getPageShadow(g,l,k,h);this.pageTexture=getPageTexture(g,l,k,h)},render:function(){this.addPageShadow();this.addPageTexture()},addPageShadow:function(){this.pageShadow.addShadow()},addPageTexture:function(){this.pageTexture.render()},hideMiddleShadow:function(){this.pageShadow.hidePageShadow()},onResize:function(d,f){if(this.pageShadow){this.pageShadow.onResize(d,f)}if(this.pageTexture){this.pageTexture.onResize(d,f)}},destroy:function(){this.pageShadow&&(this.pageShadow.destroy(),this.pageShadow=null);this.pageTexture&&(this.pageTexture.destroy(),this.pageTexture=null)}});function getPageShadow(g,l,k,h){if(h==BookType.normal_book){return new NormalPageShadow(g,l,k)}if(h==BookType.single_book){return new SinglePageShadow(g,l,k)}if(h==BookType.catalog_book){return new CatalogPageShadow(g,l,k)}if(h==BookType.slide_book||h==BookType.singleSlide_book){return new SlidePageShadow(g,l,k)}}function getPageTexture(g,l,k,h){if(h==BookType.normal_book){return new NormalPageTexture(g,l,k)}if(h==BookType.single_book){return new SinglePageTexture(g,l,k)}if(h==BookType.catalog_book){return new CatalogPageTexture(g,l,k)}if(h==BookType.slide_book||h==BookType.singleSlide_book){return new SlidePageTexture(g,l,k)}}var getFileFormat=function(c){return !passwardType()||!bookConfig.excludeFrontPages||c<=parseInt(bookConfig.excludeFrontPages)?(bookConfig.imageExt?"."+bookConfig.imageExt:".jpg"):".js"},decodeBase64=function(g,l){var k=encodeDatabasePrefix(l);if(global[k+g]&&"string"==typeof global[k+g]){var h=getRealkey();if(h){return k=base64.decode(global[k+g]),h=rc4(h,k),base64.encode(h)}}},dataBase64Str=function(h,n,m){if(verifyPassward()){var l=decodeDatabasePrefix(n),k=encodeDatabasePrefix(n);if(global[l+h]){return global[k+h]=null,m&&$(m).remove(),global[l+h]}n="data:image/jpg;base64,"+decodeBase64(h,n);global[l+h]=n;global[k+h]=null;m&&$(m).remove();return n}},decodeDatabasePrefix=function(c){switch(c){case"normal":return"dataBase";case"large":return"dataBase";case"thum":return"dataBaseThum";case"thumb":return"dataBaseThum"}},encodeDatabasePrefix=function(c){switch(c){case"normal":return"page";case"large":return"page";case"thum":return"thumb";case"thumb":return"thumb"}},userList,getRealkey=function(){if(1==passwardType()){return getSingleRealKey()}if(userList&&document.getElementById("passward")&&""!=$("#passward").val()&&document.getElementById("username")&&""!=$("#username").val()){var d=$("#passward").val(),f=$("#username").val();if(userList&&"string"==typeof userList[f]){return getListRealKey(f,d,userList[f])}}},getSingleRealKey=function(){if(bookConfig.singlePasswordKey&&"string"==typeof bookConfig.singlePasswordKey&&document.getElementById("passward")&&""!=$("#passward").val()){var c=parsHexToNormalString(bookConfig.singlePasswordKey);return rc4($("#passward").val(),c)}},getListRealKey=function(f,h,g){f=(f+String.fromCharCode(9)+h).MD5(32);f=parsHexToNormalString(f);f=base64.encode(f);g=g.remove(f);g=g.replace(/==?$/,"");if(g=base64.decode(g)){return h=(f+h).cycleToLength(128),rc4(h,g)}},verifyPassward=function(){var f=passwardType();if(1==f){if(!document.getElementById("passward")||(""==$("#passward").val())){return}var d=$("#passward").val();var h=(d.MD5(32).toLowerCase()===bookConfig.singlePasswordMD5.toLowerCase());return h}if(bookConfig.userListPath&&(userList||loadJavascript(bookConfig.userListPath,verifyPassward,function(){}),userList&&document.getElementById("passward")&&""!=$("#passward").val()&&document.getElementById("username")&&""!=$("#username").val())){var d=$("#passward").val(),g=$("#username").val();if("string"==typeof userList[g]){return d=(g+String.fromCharCode(9)+d).MD5(32),d=parsHexToNormalString(d),d=base64.encode(d),userList[g].substring(0,24)===d}}},passwardType=function(){if(!bookConfig.securityType||1==parseInt(bookConfig.securityType)){return 0}if(bookConfig.securityType&&2==parseInt(bookConfig.securityType)){return 1}if(bookConfig.securityType&&3==parseInt(bookConfig.securityType)){return 2}},a=hddr.soo2,i=0,BookSide=Class({slider:null,playSliderAfterLoad:!1,showMM:function(){this.MMBackground.css({display:"block"})},hideMM:function(){this.MMBackground.css({display:"none"})},clearMM:function(){this.destroyMM();this.initMMItems()},destroyMM:function(){this.Items.each(function(c){c.destroy()});this.MMBackground.empty()},initMMItems:function(){this.Items=new ObjectPool},initMM:function(){this.Items=(new PageEditorParser(this.MMBackground,this.attachW,this.attachH)).createItemsForPage(this.pageIndex);this.preventMMBackEvent()},initSlider:function(){if(window.hiSliderFactory){var c=(global.sliderJS||[])[this.pageIndex-1];c&&0<c.elements.length&&(this.slider=window.hiSliderFactory({container:this.MMBackground,slide:c,initialWidth:this.attachW,initialHeight:this.attachH,focusOnFunc:this.focusOn.bind(this),resetFocusFunc:this.resetFocus.bind(this)}),this.slider.resize(this.attachW,this.attachH),!0==this.playSliderAfterLoad&&this.playSlider());this.preventMMBackEvent()}},playSlider:function(){this.slider?(this.slider.replay(),this.playSliderAfterLoad=!1):this.playSliderAfterLoad=!0},resetSlider:function(){this.resetFocus(0);this.slider&&this.slider.reset();this.playSliderAfterLoad=!1},openSliderOrNot:function(f){if(void 0!=f&&null!=f){for(var h=!1,g=0;g<f.length;g++){if(f[g]==this.pageIndex){h=!0;break}}!0==h?this.playSlider():this.resetSlider()}},resizeSlider:function(d,f){this.slider&&this.slider.resize(d,f)},onMMResize:function(d,f){this.MMBackground.css({width:d+"px",height:f+"px"});this.resizeSlider(d,f);this.Items.each(function(b){b.onResize(d,f)})},preventMMBackEvent:function(){document.body.ondragstart=function(){return !1};$(this.MMBackground).on("mousedown touchstart pointerdown mouseover mousemove",".hi-action",function(c){c.stopPropagation()});$(this.MMBackground).on("mousedown touchstart pointerdown mouseover mousemove",".slider-action",function(c){c.stopPropagation()});$(this.MMBackground).on("mousedown touchstart pointerdown mouseover mousemove",".flip-action",function(c){c.stopPropagation()})},showLoading:function(){this.side.append(this.loadingImg)},hideLoading:function(){this.loadingImg.remove()},focusOn:function(c){this.option=c;this.focusSet(c)},focusSet:function(g){this.focusIng=!0;var l=g.pageWidth,k=g.duration/1000,h=this.attachW/(g.width*this.attachW/l),l=-g.left*h*this.attachW/l;g=-g.top*h*this.attachH/g.pageHeight;h=Math.max(1,h);l=Number.between(l,(1-h)*this.attachW,0);g=Number.between(g,(1-h)*this.attachH,0);h=transformCSS({origin:{x:0,y:0},tran:{x:l,y:g},scale:h});animateOnce(this.tmpContent,h,k,function(){},"%stransform")},resetFocus:function(d){if(this.focusIng){d||(d=0);var f=transformCSS({origin:{x:0,y:0},tran:{x:0,y:0},scale:1});animateOnce(this.tmpContent,f,d/1000,function(){this.focusIng=!1}.bind(this),"%stransform")}},enterSide:function(){this.Items.each(function(c){c.nameLike&&(c.nameLike("youtube","flashSwf","button","Video")&&c.show&&c.show(),c.nameLike("audio")&&(c.getPlayEvt()==PageEditor.PlayEvt.EVT_PLAY&&c.play(),c.background&&c.isBackgroundAudio()&&c.play()),c.nameIs("Video")&&c.getPlayEvt()==PageEditor.PlayEvt.EVT_PLAY&&c.playVideo(),c.nameIs("EmbeddedSlideshow","AlphaTransitionBanner","Carousel","TextAmin","AText","HotSpots")&&c.play(),c.nameIs("Link")&&c.flash())})},leaveSide:function(){this.Items.each(function(d){d.pause&&d.pause();d.stop&&d.stop();d.stopFlash&&d.stopFlash();d.audio&&d.audio.stop&&d.audio.stop();if(d.nameLike&&(d.nameLike("youtube","flashSwf","button","Video")&&d.hide&&d.hide(),d.nameLike("audio")&&d.isBackgroundAudio&&d.isBackgroundAudio()&&d.pause(),d.nameIs("Video")&&(d.getStopEvt()==PageEditor.PlayEvt.EVT_STOP&&d.pauseVideo(),"1"==d.getReplayWhenPlayEvent()&&d.getPlayEvt()==PageEditor.PlayEvt.EVT_PLAY))){var f=d.getTotalTime();f&&d.setCurrentTime(f)}});this.searchHighlight.css({"background-image":""});this.resetSlider()}}),imageLoaded=[];bdor[33]=function(d,f){return d/bdor[30](f,20)};var BookPage=Class({isHardPage:!0,onPageLoaded:null,create:function(g,l,k,h){this.bookType=k;this.pageIndex=g;this.zIndex=this.height=this.width=0;this.visible=!0;this.onPageLoaded=h;this.initHtml(g,l)},initHtml:function(d,f){this.initSide();this.side.attr("id",f+d);this.initContents();this.addFlipShadow()},initSide:function(){this.container=this.side=$("<div style='overflow:hidden;position:absolute;'></div>")},initContents:function(){this.initPageSide();var c=getColor("pageBackgroundColor","#f5f5f5");this.tmpContent=$("<div class='side-content' style='background-color : "+c+";'></div>");this.pageSide.append(this.tmpContent)},initPageSide:function(){this.pageSide=this.side},addFlipShadow:function(){this.flipBackShadow=$("<div class='flip-shadowB'></div>");this.flipFrontShadow=$("<div class='flip-topshadow'></div>");this.side.append(this.flipBackShadow);this.side.append(this.flipFrontShadow)},loading:function(){this.fullContent||(this.loadingImage||(this.loadingImage=$("<img class='loadingImage' src='"+uiBaseURL+"loading.gif'/>")),this.tmpContent.append(this.loadingImage))},addAttachment:function(){this.attachment=!0;this.slider=null;this.playSliderAfterLoad=!1;this.MMBackground=$("<div id='MMBackground' style='width:100%;height:100%;position:absolute;z-index:4;-webkit-transform:translate3d(0,0,0);'></div>");this.searchHighlight=$("<div class='kong' id='highlight' style='width:100%;height:100%;'></div>");this.addCoil();this.initMMItems();this.tmpContent.append(this.MMBackground)},hideMiddleAttachment:function(){this.rendering&&this.rendering.hideMiddleShadow()},addCoil:function(){parseBool(bookConfig.addPaperCoil)&&(this.midCoil=$("<div style='z-index:6;'></div>"),this.side.append(this.midCoil))},mirrorSide:function(){this.isMirrorSide=!0;this.loadingImage&&this.loadingImage.remove()},setZIndex:function(c){this.zIndex=c;this.side.css("z-index",c)},getZIndex:function(){return this.zIndex},setCSSByStyle:function(c){this.side.css(c)},setCSSByName:function(c){this.side.attr("class",c)},wrap:function(c){this.side.wrap(c)},unwrap:function(){this.side.unwrap()},remove:function(){this.sideImage&&this.sideImage.css({"background-image":""});this.side.remove();this.side=void 0},getSide:function(){return this.side},setLeftOrRight:function(c){this.isLeft=c;this.setAttachment(c);c?this.setCSSByName("left-side"):this.setCSSByName("right-side")},renderPage:function(c){this.rendering&&(this.rendering.destroy(),this.rendering=null);this.rendering=new PageRendering(this.side,this.pageIndex,c,this.bookType);this.rendering.onResize(this.width,this.height);this.rendering.render()},centerPage:function(){this.isLeft=!1;this.setAttachment(this.isLeft);this.setCSSByName("center-side")},setAttachment:function(c){this.attachment&&(this.renderPage(c),this.midCoil&&(c?this.midCoil.attr("class","leftPaperCoil"):this.midCoil.attr("class","rightPaperCoil")))},fillContent:function(){this.fillPage(this.pageIndex)},onImageLoaded:function(c){if(c){this.fullContent=!0;this.loadingInterval&&this.loadingInterval.stop();this.loadingImage&&this.loadingImage.remove();this.sideImage?this.sideImage.css({"background-image":"url("+c+")"}):(this.sideImage=$("<div style='position:absolute;z-index:0;background-color:"+(bookConfig.paperColor||"#ffffff")+";background-size:100% 100%;background-repeat:no-repeat;background-position:center center;'></div>"),this.sideImage.css({"background-image":"url("+c+")"}),this.sideImage.css({filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+c+"',sizingMethod='scale')"}),this.resizeBackgroundImage(c),this.resizeSideImage(),this.tmpContent.append(this.sideImage),this.attachment&&(this.tmpContent.append(this.searchHighlight),this.searchHighlight.css({opacity:0.8}),this.clearMM(),this.initMM(),this.initSlider()));if(this.onPageLoaded){this.onPageLoaded(this.pageIndex)}Log.print("loaded:"+c)}},resizeBackgroundImage:function(c){c=$("<img src='"+c+"'/>");0.1<=Math.abs(bookConfig.largePageWidth/bookConfig.largePageHeight-c[0].naturalWidth/c[0].naturalHeight)&&this.sideImage.css("background-size","contain")},fillImageOrNot:function(d,f){return !d||"string"!=typeof d||d==this.imageURL&&!f||passwardType()&&bookConfig.excludeFrontPages&&this.pageIndex>parseInt(bookConfig.excludeFrontPages)&&!verifyPassward()?!1:!0},fillPage:function(g,l){if((!this.isMirrorSide||bookConfig.showMirrorSide)&&g==this.pageIndex){var k=getPageDir(this.pageIndex,"normal",originTotalPageCount);if(k==this.imageURL&&!l&&this.fullContent){this.loadingInterval&&this.loadingInterval.stop(),this.loadingImage&&this.loadingImage.remove()}else{var h=function(b){imageLoaded[g]=!0;this.onImageLoaded(b)}.bind(this);this.fullContent=!1;this.imageURL=k;fillImageAfterLoaded(g,"normal",h)}}},initMM:function(){this.attachment&&(this._super(),this.AddNotesByContainers(this.bookType,this.pageIndex,this.MMBackground),this.showOrHideYoutube(BookInfo.getCurrentPages()))},AddNotesByContainers:function(f,h,g){isPhone()||($(g).css({background:"rgba(0,0,0,0)"}),isBelowIE9()&&$(g).css({"background-image":"url('aaaa.a')"}),void 0!=global.noteCookie&&noteCookie.setContainers(f,h,g),void 0!=global.textRemark&&textRemark.setContainers(f,h,g),isBelowIE9()||void 0==global.signature||isBelowIE9()||signature.setContainers(f,h,g),void 0!=global.annotationShapes&&annotationShapes.setContainers(f,h,g),void 0!=global.global.annotationImage&&global.annotationImage.setContainers(f,h,g))},showOrHideYoutube:function(f){if(void 0!=f&&null!=f){for(var h=!1,g=0;g<f.length;g++){if(f[g]==this.pageIndex){h=!0;break}}!0==h?this.showYoutube():this.hideYoutube()}},hideYoutube:function(){this.Items.find("Youtube").each(function(c){c.hide()})},showYoutube:function(){this.Items.find("Youtube").each(function(c){c.show()})},setVisible:function(c){c?this.side.show():this.side.hide();this.visible=c},addHistoryTexts:function(f){if(this.attachment&&void 0!=f&&null!=f){for(var h=!1,g=0;g<f.length;g++){if(f[g]==this.pageIndex){h=!0;break}}!0==h&&this.AddNotesByContainers(this.bookType,this.pageIndex,this.MMBackground)}},showGray:function(){if(this.attachment){this.searchHighlight.css({display:"block"});for(var c=0;c<this.youtubeArray.length;c++){this.youtubeArray[c].show()}for(c=0;c<this.flashSwfArray.length;c++){this.flashSwfArray[c].show()}for(c=0;c<this.buttonArray.length;c++){this.buttonArray[c].show()}}},hideGray:function(){if(this.attachment){this.clearHighlight();for(var c=0;c<this.youtubeArray.length;c++){this.youtubeArray[c].hide()}for(c=0;c<this.flashSwfArray.length;c++){this.flashSwfArray[c].hide()}for(c=0;c<this.buttonArray.length;c++){this.buttonArray[c].hide()}}},highlightSearch:function(){var d=!0;window.frmSearch&&frmSearch.visible&&0<frmSearch.getList().length&&(d=!1);window.foldingMenu&&foldingMenu.visible&&foldingMenu.currentItem&&foldingMenu.currentItem.id&&"miSearch"==foldingMenu.currentItem.id&&(d=!1);if(!d&&this.attachment){for(var d=!1,f=0;f<positionForPages.length;f++){if(positionForPages[f]&&positionForPages[f].page&&positionForPages[f].page==this.pageIndex){d=!0;break}}d?highlightSearchFun(this.searchHighlight,this.pageIndex):(d=String.format(bookConfig.searchPositionJS,this.pageIndex),1<this.pageIndex&&(d=d.replace("[1]","["+this.pageIndex+"]")),d.match(/\.*\/?(\w+\/)*\w+(\[|\()?\d+(\]|\))?\.js/gi)&&loadJavascript(d,function(){highlightSearchFun(this.searchHighlight,this.pageIndex)}.bind(this),function(){}))}},clearHighlight:function(){this.attachment&&clearHighlightFun(this.searchHighlight)},onResize:function(d,f){this.resizePage(d,f);this.flipFrontShadow.css({height:3*this.maskWidth,top:-this.maskWidth});this.flipBackShadow.css({height:this.maskWidth,top:(this.height-this.maskWidth)/2});if(this.attachment&&(this.onMMResize(this.attachW,this.attachH),this.rendering)){this.rendering.onResize(d,f)}},resizePage:function(d,f){this.width=d;this.height=f;this.maskWidth=parseInt(Math.sqrt(Math.pow(d,2)+Math.pow(f,2)));0!=(this.maskWidth-this.height)%2&&(this.maskWidth+=1);this.attachW=parseInt(100*d/(-parseFloat(bookConfig.visibleAreaLeft)+parseFloat(bookConfig.visibleAreaRight)));this.attachH=parseInt(100*f/(parseFloat(bookConfig.visibleAreaBottom)-parseFloat(bookConfig.visibleAreaTop)));this.pageSideWidth=this.width;this.pageSideHeight=this.height;this.side.css({width:d,height:f});this.tmpContent.css({width:this.attachW,height:this.attachH,top:-this.attachH*parseFloat(bookConfig.visibleAreaTop)/100,left:-this.attachW*parseFloat(bookConfig.visibleAreaLeft)/100});this.resizeSideImage()},resizeSideImage:function(){if(this.sideImage){if($.system.name!=$.system.ANDROID&&(isPhone()||isPad())){var d=1024,f=1024;BookInfo.isDoublePage()&&bookType==BookType.normal_book&&(f=d=512);isPad()&&BookInfo.isDoublePage()&&bookType==BookType.normal_book&&(f=d=768);d=getPageWidthHeight(d,f,this.pageSideWidth,this.pageSideHeight);this.sideImage.css({width:Math.ceil(d.x)+"px",height:Math.ceil(d.y)+"px"});f=transformCSS({scale:this.pageSideWidth/d.x,origin:{x:0,y:0}});this.isMirrorSide&&(f=transformCSS({scaleX:-this.pageSideWidth/d.x,scaleY:this.pageSideWidth/d.x,origin:{x:0,y:0},tran:{x:this.pageSideWidth,y:0}}),this.sideImage.css({opacity:0.2}));this.sideImage.css(f)}else{this.sideImage.css({width:"100%",height:"100%"}),this.isMirrorSide&&this.sideImage.css({"-webkit-transform":"scaleX(-1)","-moz-transform":"scaleX(-1)","-o-transform":"scaleX(-1)","-ms-transform":"scaleX(-1)",opacity:0.2})}}},sideAddChild:function(c){this.side.append(c)},setFlipShadow:function(m,t){t?(this.flipBackShadow&&this.flipBackShadow.css({visibility:"hidden"}),this.flipFrontShadow&&this.flipFrontShadow.css({visibility:"visible"})):(this.flipBackShadow&&this.flipBackShadow.css({visibility:"visible"}),this.flipFrontShadow&&this.flipFrontShadow.css({visibility:"hidden"}));var s=m.shadowRate,r=m.rotate,q=0.9<s?1+2*(1-s)/0.1:3*s/0.9,s=0.9<s?0.2*(1-s)/0.1:0.1>s?0.2*s/0.1:0.2,p=(m.frontShadowDistance-100*(90<r?0:q))/Math.cos(r*Math.PI/180),p=transformCSS({scaleX:q,rotate:-r,tran:{x:p,y:0}}),q=transformCSS({scaleX:q,rotate:r,tran:{x:m.maskTranX,y:m.maskTranY}}),o=90<r?100:0,n=0<=r&&180>r?100*(this.height+this.maskWidth)/(3*this.maskWidth):100/3;this.flipFrontShadow.css({"transform-origin":o+"% "+n+"%","-webkit-transform-origin":o+"% "+n+"%","-moz-transform-origin":o+"% "+n+"%","-ms-transform-origin":o+"% "+n+"%"});90<r?(this.flipFrontShadow.css({right:"0px"}),this.flipBackShadow.css({left:"100%"})):(this.flipFrontShadow.css({right:"auto"}),this.flipBackShadow.css({left:"0px"}));this.flipFrontShadow.css(p);this.flipFrontShadow.css({opacity:s});this.flipBackShadow.css(q);this.flipBackShadow.css({opacity:s})},clearFlipShadow:function(){this.flipBackShadow&&this.flipBackShadow.css({visibility:"hidden"});this.flipFrontShadow&&this.flipFrontShadow.css({visibility:"hidden"});this.side.removeClass("boxShadow")}}).extend(BookSide);bdor[36]=36;global.bdor[35]=function(){return 3}();global.bdor[37]=80;bdor[38]=function(){return bdor[30](37,40)}();var NormalPage=Class({isHardPage:!1,create:function(h,n,m,l,k){this.width=this.zIndex=0;this.pageIndex=h;this.visible=!0;this.isSingleBook=m;this.container=$("<div></div>");this.setMaskCss();this.container.attr("id",n+"Mask"+h);this.page=new BookPage(h,n,l,k);this.container.append(this.page.side)},setMaskCss:function(){var c="mask";this.isSingleBook&&rightToLeft&&(c="single-book-right-mask");this.isSingleBook&&!rightToLeft&&(c="single-book-mask");this.setCSSByName(c)},remove:function(){this.container.remove();this.container=void 0;this.page.remove();this.page=void 0},setPage:function(c){this.page=c},setCSSByStyle:function(c){this.container.css(c)},setVisible:function(c){c?this.container.show():this.container.hide();this.visible=c},setCSSByName:function(c){this.container.addClass(c)},onResize:function(f,h){var g=parseInt(Math.sqrt(Math.pow(f,2)+Math.pow(h,2)));0!=(g-h)%2&&(g+=1);this.container.css({width:g,height:g,top:(h-g)/2});this.width=g;this.page&&(this.page.onResize(f,h),this.page.setCSSByStyle({top:(this.width-h)/2}))},getWidth:function(){return this.width},setZIndex:function(c){this.zIndex=c;this.container.css({"z-index":c})},getZIndex:function(){return this.zIndex},setCSSByName:function(c){this.container.attr("class",c)},setLeftOrRight:function(d){var f=this.isSingleBook?"left-single-mask-side":"left-mask-side";d||(f=this.isSingleBook?"right-single-mask-side":"right-mask-side");this.setCSSByName(f);this.page&&this.page.setLeftOrRight(d)},beginToFlip:function(){this.setMaskCss()},loading:function(){this.page&&this.page.loading()},mirrorSide:function(){this.page&&this.page.mirrorSide()},setFlipShadow:function(d,f){this.page&&this.page.setFlipShadow(d,f)},addAttachment:function(){this.page&&this.page.addAttachment()},clearFlipShadow:function(){this.page&&this.page.clearFlipShadow()},fillContent:function(){this.page&&this.page.fillContent()},fillPage:function(d,f){this.page&&this.page.fillPage(d,f)},enterSide:function(){this.page&&this.page.enterSide()},leaveSide:function(){this.page&&this.page.leaveSide()},addHistoryTexts:function(c){this.page&&this.page.addHistoryTexts(c)},highlightSearch:function(){this.page&&this.page.highlightSearch()},clearHighlight:function(){this.page&&this.page.clearHighlight()},resetSlider:function(){this.page&&this.page.resetSlider()},playSlider:function(){this.page&&this.page.playSlider()}});bdor[39]=function(){return 8}();var bookMouseDown=!1,nBookStatu=0;global.bdor[200]=function(c){return bdor[c]};var Book=Class({bookType:void 0,parent:null,width:0,height:0,flippingTime:600,currentPageIndex:1,rightToLeft:!1,pageArray:null,pageWidth:0,pageHeight:0,visible:!1,create:function(c){this.init(c)},init:function(c){this.parent=c.parent;this.currentPageIndex=c.currentPageIndex;this.flippingTime=1000*c.flippingTime;this.rightToLeft=c.rightToLeft;this.pageArray=[]},getBookType:function(){return this.bookType},onBookPageLoaded:function(g){if(this.visible){var l=this.getCurrentPages();if(l){for(var k=0;k<l.length;k++){var h=l[k];this.pageArray[h]&&g==h&&this.pageArray[h].enterSide()}}}},getBook:virtual_function,getCurrentPages:function(){return[]},initBook:virtual_function,gotoPage:virtual_function,show:virtual_function,hide:virtual_function,onResize:virtual_function,destroy:virtual_function}),StaticAd=Class({create:function(f){var h=f.css("left"),h=parseInt(h.replace("px","")),g=f.css("top");f.css("width");rightToLeft&&(h+=iWidth/2);this.adContainer=$("<div id='adContainer'></div>");this.adContainer.css({position:"absolute","z-index":1});this.adContainer.css({left:h+"px",top:g});this.adInstance=new HTML5AdSlider(this.adContainer,{paddingLeft:30,paddingTop:30,paddingRight:30,paddingBottom:30,loop:!1,timeout:2000,effectDuration:1000,data:staticAd.data});bookContainer.append(this.adContainer);this.adContainer&&1==this.currentPageIndex&&this.adContainer.css({"z-index":3})},setStyle:function(c){c&&this.adContainer&&this.adContainer.css(c)},resize:function(){this.adInstance&&this.adInstance.resize()},show:function(){this.adContainer&&this.adContainer.show()},hide:function(){this.adContainer&&this.adContainer.hide()}}),ZoomHint=Class({create:function(d){var f=this;this.mouseInBook=new Point(-1,-1);this.oldMouseInBook=new Point(-1,-1);this.zoomHint=null;this.trackMousePoint=function(c){c=isTouch?c.originalEvent.touches:[c];var g=c[0].pageY;f.mouseInBook.x=c[0].pageX;f.mouseInBook.y=g};bookContainer.bind(_event._move,this.trackMousePoint);this.zoomHintTimer=window.setInterval(function(){if(bookType!=BookType.normal_book){f.clearZoomHintTimer()}else{if(null==f.zoomHint){if(-1==f.oldMouseInBook.x){f.oldMouseInBook.x=f.mouseInBook.x,f.oldMouseInBook.y=f.mouseInBook.y}else{if(f.oldMouseInBook.x==f.mouseInBook.x&&f.oldMouseInBook.y==f.mouseInBook.y){var c=f.globalToBook(!0,f.mouseInBook.x,f.mouseInBook.y);if(!(0>c.x||c.x>f.width||0>c.y||c.y>f.height)){var c=f.mouseInBook.x+15,b=f.mouseInBook.y;f.zoomHint=new divHint(getLanguage("lblDoubleClickToZoomIn","Double click to zoom in."),c,b,d);f.zoomHint.show();f.hideCount=0}}else{f.oldMouseInBook.x=f.mouseInBook.x,f.oldMouseInBook.y=f.mouseInBook.y}}}else{2==++f.hideCount&&(bookContainer.unbind(_event._move,f.trackMousePoint),f.zoomHint.destroy(),f.zoomHint=null,window.clearInterval(f.zoomHintTimer))}}},1500)},globalToBook:function(g,l,k){var h;switch(bookType){case BookType.single_book:h=Point(l-singlePageBook.getLeft(),k-singlePageBook.getTop());break;case BookType.normal_book:h=Point(l-((g?0:flipBook.getPageWidth())+flipBook.getLeft()),k-flipBook.getTop());break;case BookType.catalog_book:h=catalogBook.getTran(),g=l-((g?0:catalogBook.getPageWidth())+catalogBook.getCssLeft())-h.x,k=k-catalogBook.getCssTop()-h.y,h=Point(g,k)}return h},clearZoomHintTimer:function(){try{window.clearInterval(this.zoomHintTimer)}catch(c){}null!=this.zoomHint&&(bookContainer.unbind(_event._move,this.trackMousePoint),this.zoomHint.destroy(),this.zoomHint=null)}}),BookMiniFullscreen=Class({create:function(){},init:function(){bookConfig.hideMiniFullscreen||isPhone()||isPad()||isIE()||MiniStyle.isMini()||fullScreenApi.supportsFullScreen&&fullScreenApi.isFullScreen()||this.miniFullScreen||(this.miniFullScreen=$("<div class='miniFullscreen' id='miniFullscreen'></div>"),this.miniFullScreen.html(getLanguage("lblFullscreen","Click to view in fullscreen.")),this.onResize(),bookContainer.append(this.miniFullScreen),this.miniFullscreenEnter=!1,this.miniFullscreenTimeout&&window.clearTimeout(this.miniFullscreenTimeout),this.miniFullscreenTimeout=window.setTimeout(function(){this.removeMiniFullScreen()}.bind(this),3000),this.initMiniFullScreenEvent())},initMiniFullScreenEvent:function(){this.miniFullScreen.bind(_event._end,function(){bookType==BookType.catalog_book&&global.catalogBook&&catalogBook.guidBar&&catalogBook.guidBar.fullscreenBtn?catalogBook.guidBar.fullscreenBtn.trigger(_event._end):readAsFullscreen();this.miniFullScreen.remove();this.miniFullScreen=void 0}.bind(this));this.miniFullScreen.bind(_event._enter,function(){this.miniFullscreenEnter=!0}.bind(this));this.miniFullScreen.bind(_event._leave,function(){this.miniFullscreenEnter=!1;this.miniFullscreenTimeout&&window.clearTimeout(this.miniFullscreenTimeout);this.miniFullscreenTimeout=window.setTimeout(function(){this.removeMiniFullScreen()}.bind(this),3000)}.bind(this))},removeMiniFullScreen:function(){if(this.miniFullScreen&&!this.miniFullscreenEnter){var c={alpha:0.5};$(c).animate({alpha:0},{duration:300,easing:"easeOutSine",step:function(){this.miniFullScreen&&this.miniFullScreen.css({opacity:c.alpha})}.bind(this),complete:function(){this.miniFullScreen&&this.miniFullScreen.remove();this.miniFullScreen&&(this.miniFullScreen=void 0)}.bind(this)})}},onResize:function(){if(this.miniFullScreen){if(MiniStyle.isMini()){this.miniFullScreen.remove(),this.miniFullScreen=void 0}else{var c=BookInfo.top();this.miniFullScreen.css({top:c+BookInfo.height()-50+"px"})}}},show:function(){this.miniFullScreen&&this.miniFullScreen.show()},hide:function(){this.miniFullScreen&&this.miniFullScreen.hide()},remove:function(){this.miniFullScreen&&this.miniFullScreen.remove();this.miniFullScreen=void 0},setStyle:function(c){c&&this.miniFullScreen&&this.miniFullScreen.css(c)}}),FlipPage=Class({downMask:null,upMask:null,currentIndex:0,nextIndex:0,hardPage:!1,coordinate:null,startPoint:null,toPoint:null,fromPoint:null,AliceToLeft:!1,AliceToRight:!1,loosen:!0,fallback:!1,flipping:!1,dragMoveToFlip:!1,fallback:!1,create:function(c){this.book=c},startToFlip:function(){this.loosen=this.flipping=!0;this.fallback=this.AliceToRight=this.AliceToLeft=!1},meetFlipCondition:function(){var c=this.toPoint&&this.startPoint&&(this.book.mouseMoveDirection==this.book.moveDirectionType.MOVE_LEFT&&0<this.startPoint.x||this.book.mouseMoveDirection==this.book.moveDirectionType.MOVE_RIGHT&&0>this.startPoint.x);return this.toPoint&&this.startPoint&&(this.toPoint.x<this.book.MiddleX&&0<this.startPoint.x||this.toPoint.x>this.book.MiddleX&&0>this.startPoint.x)||c},flipToPoint:function(m,t,s,r,q){if(r&&q){if(!0==this.hardPage){this.flipToHardPoint(m,t,r,q)}else{if(this.downMask&&this.upMask&&this.downMask.page&&this.upMask.page&&(this.coordinate=q,t=computePoint(m,t,s,r,q))){s=transformCSS({rotate:t.rotate,tran:{x:t.maskTranX,y:t.maskTranY}});var p=transformCSS({rotate:t.rotate,tran:{x:t.maskTranX,y:t.maskTranY}}),o=transformCSS({rotate:-t.rotate,tran:{x:-t.pageTranX,y:0}}),n=transformCSS({rotate:t.rotate,tran:{x:t.pageTranX,y:0}});this.downMask&&this.downMask.setCSSByStyle(s);this.upMask&&this.upMask.setCSSByStyle(p);this.downMask&&this.downMask.page&&this.downMask.page.setCSSByStyle(o);this.upMask&&this.upMask.page&&this.upMask.page.setCSSByStyle(n);this.book.setFlipAlpha(this,m,r,q);this.book.setFlipShadow(this,t);this.book.followToPoint(this,r,q)}}}},isDragMoveToFlip:function(){this.dragMoveToFlip=!1;this.coordinate&&this.startPoint&&this.coordinate.x!=this.startPoint.x&&(this.dragMoveToFlip=!0)},endFlip:function(){this.flipping=!1},destroy:function(){}}),SingleFlipPage=Class({flipToHardPoint:function(h,n,m,l){if(m&&l){this.coordinate=l;var k=-90+90*Math.abs(l.x/m.x);0>l.x&&(k=90-90*Math.abs(l.x/m.x));n=transformCSS({perspective:3000,rotateY:k});k=transformCSS({perspective:3000,rotateY:k});this.downMask&&this.downMask.setCSSByStyle(n);this.upMask&&this.upMask.setCSSByStyle(k);0>l.x/m.x?(this.upMask.setVisible(!1),this.downMask.setVisible(!1)):(this.upMask.setVisible(!1),this.downMask.setVisible(!0));this.book.setFlipAlpha(this,h,m,l);this.book.followToPoint(this,m,l)}}}).extend(FlipPage),DoubleFlipPage=Class({flipToHardPoint:function(h,n,m,l){if(m&&l){l.x>h&&(l.x=h);l.x<-h&&(l.x=-h);this.coordinate=l;var k=-90+90*Math.abs(l.x/m.x);0>l.x&&(k=90-90*Math.abs(l.x/m.x));n=transformCSS({perspective:3000,rotateY:k});k=transformCSS({perspective:3000,rotateY:k});this.downMask&&this.downMask.setCSSByStyle(n);this.upMask&&this.upMask.setCSSByStyle(k);0>l.x/m.x?(this.upMask.setVisible(!0),this.downMask.setVisible(!1)):(this.upMask.setVisible(!1),this.downMask.setVisible(!0));this.book.setFlipAlpha(this,h,m,l);this.book.followToPoint(this,m,l)}}}).extend(FlipPage),FlipPageManager=Class({create:function(c){this.book=c;this.array=[];this.curlingArray=[];this.fallbackArray=[];this.flipArray=[];this.zoomArray=[];this.resizeArray=[]},checkFlipping:function(){for(var f=this.array.length,h=0;h<f;h++){if(this.array[h]){var g=this.array[h];if(this[g]&&this[g].flipping){return !0}}}return !1},hasAlicePage:function(h){if(this.fallbackArray&&0<this.fallbackArray.length){return !0}var n="right";if(h>this.book.currentPageIndex&&!rightToLeft||h<this.book.currentPageIndex&&rightToLeft){n="left"}h=this.book.getPagesByIndex(h);if(0<=n.indexOf("l")){if(this.book.flipping&&this.book.flipToDirection==this.book.direction_right){return !0}if(this.curlingArray&&0<this.curlingArray.length){for(var m=this.curlingArray.length,l=0;l<m;l++){var k=this.curlingArray[l];if(this[k]&&this[k].AliceToRight||this[k]&&0>h.indexOf(this[k].nextIndex)){return !0}}}}if(0<=n.indexOf("r")){if(this.book.flipping&&this.book.flipToDirection==this.book.direction_left){return !0}if(this.curlingArray&&0<this.curlingArray.length){for(m=this.curlingArray.length,l=0;l<m;l++){if(k=this.curlingArray[l],this[k]&&this[k].AliceToLeft||this[k]&&0>h.indexOf(this[k].nextIndex)){return !0}}}}return !1},removeFlipArrayByIndex:function(c){c=c.currentIndex+"-"+c.nextIndex;this[c]&&this[c].nextPage&&this[c].nextPage.clearFlipShadow();this[c]&&delete this[c];this.array&&this.array.removeElement(c)},endFlip:function(){if(this.array&&0!=this.array.length){for(var f=this.array.length,h=0;h<f;h++){if(this.array[h]){var g=this[this.array[h]];g&&(this.book.endFlipByIndex(g.downMask.pageIndex,g.upMask.pageIndex),this.removeFlipArrayByIndex(g))}}}}}),FlipBookIntervalManager=Class({create:function(c){this.book=c;this.flippingTime=1000*bookConfig.flippingTime},flipIntervalTmp:function(v,u,t,s){if(v){this.book.flipping=!0;v.flipping=!0;this.book.setFlipOringinPoint(v,s);v.coordinate||(v.coordinate=v.startPoint);var r=v.coordinate.x,q=v.coordinate.y,p,o=this.flippingTime;s=isAndroidWeChat()||isAndroidDefault()?function(){var c=0;p=function(){n(c,25,"Sine");c++}.interval(this,o/25)}.bind(this):function(){p=function(d,f){n(d,f,"Sine")}.runInAnimate(this,o)}.bind(this);var n=function(x,c,b){if(!v){return !1}var h=this.book.pageWidth,w=this.book.pageHeight,k=this.book.maskWidth,d=$.easing["easeInOut"+b],g=$.easing["easeOut"+b];b=g(null,x,r,v.toPoint.x-r,c);g=g(null,x,q,v.toPoint.y-q,c);v.dragMoveToFlip||(b=d(null,x,r,v.toPoint.x-r,c));v.dragMoveToFlip||(g=w-0.1*Math.sqrt(h*h-b*b));x<c?this.flipToPoint(v,u,t,h,w,k,v.fromPoint,{x:b,y:g}):(this.flipToPoint(v,u,t,h,w,k,v.fromPoint,v.toPoint),this.book.afterFlipTo(v,t),p.stop())}.bind(this);s()}},setFlipInterval:function(){this.flipInterval=function(){if(this.flipArray&&this.flipArray.array&&0!=this.flipArray.array.length){for(var k=0;k<this.flipArray.array.length;k++){var p=this.flipArray.array[k];if(p){if(!this.flipArray[p]){this.flipArray.array.removeElement(p),k--}else{if(this.flipArray[p].fromPoint&&this.flipArray[p].startPoint&&this.flipArray[p].toPoint&&this.flipArray[p].downMask&&this.flipArray[p].upMask&&!this.flipArray[p].flipping){this.flipArray[p].Alice=!0;this.flipArray[p].coordinate||(this.flipArray[p].coordinate=this.flipArray[p].startPoint);var o=0.42*(this.flipArray[p].toPoint.x-this.flipArray[p].coordinate.x)+this.flipArray[p].coordinate.x,n=0.52*(this.flipArray[p].toPoint.y-this.flipArray[p].coordinate.y)+this.flipArray[p].coordinate.y,m=this.flipArray[p].downMask.pageIndex,l=this.flipArray[p].upMask.pageIndex;this.flipIntervalManager.flipToPoint(this.flipArray[p],m,l,this.pageWidth,this.pageHeight,this.maskWidth,this.flipArray[p].fromPoint,{x:o,y:n});!this.flipArray[p].flipping&&this.flipArray[p].loosen&&1>Math.abs(o-this.flipArray[p].toPoint.x)&&1>Math.abs(n-this.flipArray[p].toPoint.y)&&(this.flipArray.curlingArray.removeElement(p),this.flipArray.fallbackArray.removeElement(p),this.flipArray.flipArray.removeElement(p),this.flipArray[p].Alice=!1,o=this.flipArray[p].toPoint.x,n=this.flipArray[p].toPoint.y,this.flipIntervalManager.flipToPoint(this.flipArray[p],m,l,this.pageWidth,this.pageHeight,this.maskWidth,this.flipArray[p].fromPoint,{x:o,y:n}),this.endFlipByIndex(m,l,0>this.flipArray[p].toPoint.x),this.flipArray.removeFlipArrayByIndex(this.flipArray[p]),this.resetBookShadow(this.currentPageIndex),this.setBookmarkVisible(this.currentPageIndex),this.setThicknessVisible(this.currentPageIndex),this.showOrHideGrayShadow(this.currentPageIndex),this.afterCurling(),k--)}}}}}}.interval(this.book,20)},flipToPoint:function(m,t,s,r,q,p,o,n){m&&m.flipToPoint(r,q,p,o,n);m=Math.abs(n.x-o.x);this.book.setThicknessMovingScale(t,s,m);this.book.movetoCenter(t,s,m)},endFlip:function(){},destroy:function(){}}),computePoint=function(C,B,A,z,y){if(!z||!y){return{rotate:0,pageTranX:0,maskTranX:0,maskTranY:0}}y.x>C&&(y.x=C);y.x<-C&&(y.x=-C);isAndroidDefault()&&(z.y=y.y);if(z.x==y.x){var x=0;0>z.x&&(x+=180);return{rotate:x,pageTranX:0,maskTranX:z.x,maskTranY:0}}var w=Math.sqrt(Math.pow(y.y-B,2)+Math.pow(y.x-0,2)),x=Math.sqrt(Math.pow(z.y-B,2)+Math.pow(z.x-0,2));if(w>x){var v=Math.atan((y.y-B)/(y.x-0)),w=Math.abs(Math.sin(v)*x),x=Math.abs(Math.cos(v)*x);y.y=B-w;y.x=0<y.x?x:-x}w=Math.sqrt(Math.pow(y.y-0,2)+Math.pow(y.x-0,2));x=Math.sqrt(Math.pow(z.y-0,2)+Math.pow(z.x-0,2));w>x&&(v=Math.atan((y.y-0)/(y.x-0)),w=Math.abs(Math.sin(v)*x),x=Math.abs(Math.cos(v)*x),y.y=w,y.x=0<y.x?x:-x);var u=(y.y-z.y)/(y.x-z.x),s=Math.atan(u),x=180*s/Math.PI,r=(y.x+z.x)/2,o=(y.y+z.y)/2,w=B/2,v=C/2,D=B/2;0>z.x&&(x+=180,v=-C/2);y=Math.sqrt(Math.pow(z.y-y.y,2)+Math.pow(z.x-y.x,2))/2;y=0<=x&&180>x?Math.abs((B-Math.abs(z.y))*Math.sin(s))+y:Math.abs(z.y*Math.sin(s))+y;B=Math.atan(C/B);A=Math.abs(y/(Math.sin(B+Math.abs(s))*A));A=Math.min(1,A);B=((r-v)*u+D+Math.pow(u,2)*o)/(1+Math.pow(u,2));z=u*(o-B)+r;D=Math.sqrt(Math.pow(v-z,2)+Math.pow(D-B,2));Math.abs(z)<Math.abs(v)&&(D=-D);return{frontShadowDistance:y,shadowRate:A,rotate:x,pageTranX:D-C/2,maskTranX:z-0,maskTranY:B-w}},FlipBook=Class({coordinate_bottom_left:"bl",coordinate_top_left:"tl",coordinate_bottom_right:"br",coordinate_top_right:"tr",direction_left:"left",direction_right:"right",flipArray:null,maskWidth:0,create:function(c){this._super(c);this.flipArray=new FlipPageManager(this);this.toPageIndex=this.currentPageIndex;this.initBook();this.initEvent();this.flipIntervalManager=new FlipBookIntervalManager(this)},initBook:function(){this.flipBook=$("<div class='book'></div>");this.resetPages(this.currentPageIndex);this.parent.append(this.flipBook)},resetPages:function(){},getBook:function(){return this.flipBook},addPageArray:function(f){if(f&&this.pageArray){for(var h=0;h<f.length;h++){if(!(0>=f[h]||f[h]>originTotalPageCount||(this.pageArray[f[h]]&&this.fillContent(f[h]),this.pageArray[f[h]]))){var g=this.newPage(f[h]);g.addAttachment();g.onResize(this.pageWidth,this.pageHeight);this.pageArray[f[h]]=g;this.fillContent(f[h]);this.flipBook.append(g.container)}}}},setFlipShadow:function(d,f){d&&f&&(d.upMask.page&&d.upMask.page.setFlipShadow(f,!0),d.nextPage&&d.nextPage.setFlipShadow(f,!1))},resize:function(d,f){this.resizeBook(d,f);this.resetPages(this.currentPageIndex);this.resizeAttachments(d,f)},resizeAttachments:function(g,l){if(this.bmt){this.bmt.onResize()}if(this.miniFullScreen){this.miniFullScreen.onResize()}var k=this.flipBook.parameters.left,h=this.flipBook.parameters.top;this.adContainer&&(this.adContainer.setStyle({left:k,top:h,width:g+"px",height:l+"px"}),this.adContainer.resize())},loading:function(){if(!this.flipping){var f=this.getCurrentPages();if(f&&!(0>=f.length)){for(var h=f.length,g=0;g<h;g++){f[g]&&this.pageArray[f[g]]&&this.pageArray[f[g]].loading()}}}},fillContent:function(c){if(!this.flipping||imageLoaded[c]){!bookConfig.preloadNextPage&&0>this.getCurrentPages().indexOf(c)||(this.pageArray[c]&&this.pageArray[c].fillContent(),this.pageBackArray&&this.pageBackArray[c]&&this.pageBackArray[c].fillContent())}},fillPage:function(g,l){if(g){for(var k=this.pageArray.length,h=0;h<k;h++){this.pageArray[h]&&this.pageArray[h].fillPage(g,l),this.pageBackArray&&this.pageBackArray[h]&&this.pageBackArray[h].fillPage(g,l)}}},removePage:function(c){!isNaN(c)&&this.pageArray[c]&&(this.pageArray[c].remove(),this.pageArray[c]=void 0)},unWrapPageExcludeArray:function(f){if(f&&this.pageArray){for(var h=this.pageArray.length,g=0;g<h;g++){!this.pageArray[g]||0<=f.indexOf(g)||(this.pageArray[g].remove(),this.pageArray[g]=void 0)}}},unWrapPageBackExcludeArray:function(f){if(f&&this.pageBackArray){for(var h=this.pageBackArray.length,g=0;g<h;g++){!this.pageBackArray[g]||0<=f.indexOf(g)||(this.pageBackArray[g].remove(),this.pageBackArray[g]=void 0)}}},resetFlipPage:function(f){if(f&&this.pageArray){for(var h=0;h<f.length;h++){if(!(0>=f[h]||f[h]>originTotalPageCount)&&this.pageArray[f[h]]){var g=transformCSS({rotate:0,tran:{x:0,y:0}});this.pageArray[f[h]].setCSSByStyle(g);this.pageArray[f[h]].page&&this.pageArray[f[h]].page.setCSSByStyle(g)}}}},resetFlipPageBack:function(f){if(f&&this.pageBackArray){for(var h=0;h<f.length;h++){if(!(0>=f[h]||f[h]>originTotalPageCount)&&this.pageBackArray[f[h]]){var g=transformCSS({rotate:0,tran:{x:0,y:0}});this.pageBackArray[f[h]].setCSSByStyle(g);this.pageBackArray[f[h]].page&&this.pageBackArray[f[h]].page.setCSSByStyle(g)}}}},resizePage:function(g,l){if(this.pageArray){for(var k=this.pageArray.length,h=0;h<k;h++){if(this.pageArray[h]){this.pageArray[h].onResize(g,l)}}}if(this.pageBackArray){for(k=this.pageBackArray.length,h=0;h<k;h++){if(this.pageBackArray[h]){this.pageBackArray[h].onResize(g,l)}}}},beginFlipByIndex:function(f,h,g){if(this.isHardPage(f,h)){return this.hardFlipByIndex(f,h,g)}g=this.getDownUpPage(f,h,g);this.flipArray[f+"-"+h]||(this.flipArray[f+"-"+h]=this.newFlipPage());this.flipArray[f+"-"+h].downMask=g[0];this.flipArray[f+"-"+h].upMask=g[1];this.flipArray[f+"-"+h].currentIndex=f;this.flipArray[f+"-"+h].nextIndex=h;this.flipArray[f+"-"+h].hardPage=!1;this.flipArray.array.push(f+"-"+h);this.resetBookShadow(h);this.showOrHideGrayShadow(h);return this.flipArray[f+"-"+h]},hardFlipByIndex:function(f,h,g){g=this.getDownUpHardPage(f,h,g);this.flipArray[f+"-"+h]||(this.flipArray[f+"-"+h]=this.newFlipPage());this.flipArray[f+"-"+h].downMask=g[0];this.flipArray[f+"-"+h].upMask=g[1];this.flipArray[f+"-"+h].currentIndex=f;this.flipArray[f+"-"+h].nextIndex=h;this.flipArray[f+"-"+h].hardPage=!0;this.flipArray.array.push(f+"-"+h);return this.flipArray[f+"-"+h]},isHardPage:function(d,f){return !1},beforeFlipTo:function(l,r){this.setAttachmentBeforeFlipTo(l);var q=this.getFlipTo(l),p=q.minIndex,o=q.maxIndex,n=q.toIndex,m;"max"==q.flipTo&&(m=this.flipToMax(o,n,r,rightToLeft));"min"==q.flipTo&&(m=this.flipToMin(p,n,r,!rightToLeft));this.setPageZIndex(m,q);return m},afterFlipTo:function(g,l){if(g&&g.downMask&&g.upMask){var k=g.downMask.pageIndex,h=g.upMask.pageIndex;this.flipArray.flipArray.removeElement(g.currentIndex+"-"+g.nextIndex);this.endFlipByIndex(k,h);this.flipArray.removeFlipArrayByIndex(g);this.checkFlipping();k<l?this.afterFlipToMax(l,!rightToLeft):this.afterFlipToMin(l,rightToLeft);this.setAttachmentAfterFlipTo(l)}},checkFlipping:function(){this.flipping=!1;this.flipArray.checkFlipping()?this.flipping=!0:(this.flipToDirection="",this.loading())},followToPoint:function(f,h,g){},endFlip:function(){this.flipArray&&this.flipArray.endFlip()},getCurrentPageIndex:function(){return this.currentPageIndex},getPageWidth:function(c){if(void 0==c){return this.pageWidth}this.pageWidth=c},getPageHeight:function(c){if(void 0==c){return this.pageHeight}this.pageHeight=c},getWidth:function(){return this.width},getHeight:function(){return this.height},getScale:function(){return 1},getLeft:function(){return this.flipBook.offset().left},getTop:function(){return this.flipBook.offset().top},getCssLeft:function(){return parseInt(this.flipBook.parameters.left)},getCssTop:function(){return parseInt(this.flipBook.parameters.top)},setCSS:function(c){this.flipBook.setCss(c)},setPosition:function(f,h,g){void 0==g&&(g=["left","top"]);this.flipBook.css(g[0],f+"px");this.flipBook.css(g[1],h+"px")},endReset:function(){},translate:function(d,f){transformCSS({});this.flipBook.css(style)},gotoPage:function(l,r){if(l&&(this.toPageIndex=l,!this.flipBook.parameters.zoomming)){if(this.status_zoom&&(isPhone()||isPad())){var q={pointers:[{pageX:windowWidth/2,pageY:windowHeight/2}]};this.flipBook.onDoubleTap.bind(this.flipBook)(q)}else{if(!(0>=l||l>originTotalPageCount||this.hasAlicePage(l)||this.hasAliceHardPage(l)||(isPhone()||isPad()||this.status_zoom)&&this.flipping)){var q=this.getFromStartPointByIndex(l),p=this.currentPageIndex;if(q&&!this.handleHardPage(l)){var o=this.beforeFlipTo(l,!0);if(o){!r&&flipHistory&&(flipHistory=flipHistory.slice(0,flipHistory.currentIndex+1),flipHistory.push({index:l}),flipHistory.currentIndex=flipHistory.length-1);var n=o.currentIndex+"-"+o.nextIndex;0<this.flipArray.curlingArray.indexOf(n)&&(o.dragMoveToFlip=!0);0>this.flipArray.flipArray.indexOf(n)&&this.flipArray.flipArray.push(n);this.flipArray.fallbackArray.removeElement(n);this.flipArray.curlingArray.removeElement(n);this.optionPage==n&&(this.optionPage=null);o.startToFlip();this.flipping=!0;o.isDragMoveToFlip();o.dragMoveToFlip||this.flipIntervalManager.flipToPoint(o,this.currentPageIndex,l,this.pageWidth,this.pageHeight,this.maskWidth,q[0],q[1]);this.flippingTo(l);var m=this.flipToDirection;playFlipSound();(function(){this.flipIntervalManager.flipIntervalTmp(o,p,l,m)}).delay(this,50);1==l?(this.miniFullScreen||(this.miniFullScreen=new BookMiniFullscreen),this.miniFullScreen.init()):this.miniFullScreen&&this.miniFullScreen.remove()}}}}}},hasAlicePage:function(c){return this.flipArray.hasAlicePage(c)},setShowOrHide:function(){},reShowOrHide:function(){},aroundCorner:function(d){this.edgeX();if(!(Math.abs(d.x)>this.pageWidth-1||d.y>this.height-1||1>d.y||Math.abs(d.x)<0.8*this.pageWidth||d.y>0.2*this.height&&d.y<0.8*this.height)){var f=Math.sqrt(Math.pow(0.2*this.height,2)-Math.pow((this.pageWidth-Math.abs(d.x))*this.height/this.pageWidth,2));if(d.y<f&&d.x<this.MiddleX){return"tl"}if(d.y<f&&d.x>this.MiddleX){return"tr"}if(d.y>this.height-f&&d.x<this.MiddleX){return"bl"}if(d.y>this.height-f&&d.x>this.MiddleX){return"br"}}},afterCurling:function(){},stopTimer:function(){window.clearInterval(this.intervalID)},openShownSlider:function(){var f=BookInfo.getCurrentPages();if(void 0!=f&&null!=f){for(var h=0;h<f.length;h++){var g=f[h];this.pageArray[g]&&this.pageArray[g].playSlider()}}},stopAllSlider:function(){for(var d=this.pageArray.length,f=0;f<d;f++){this.pageArray[f]&&this.pageArray[f].resetSlider()}},openShownMedia:function(){var f=BookInfo.getCurrentPages();if(void 0!=f&&null!=f){for(var h=0;h<f.length;h++){var g=f[h];this.pageArray[g]&&this.pageArray[g].enterSide()}}},stopMedia:function(){for(var d=this.pageArray.length,f=0;f<d;f++){this.pageArray[f]&&this.pageArray[f].leaveSide()}},hide:function(){Log.debug("normal book hide.");this.visible=!1;this.setCSS({display:"none"});this.stopMedia();this.stopAllSlider();this.bookMap&&this.bookMap.hide();this.controlBar&&this.controlBar.setVisible(!1);this.adContainer&&this.adContainer.hide();this.miniFullScreen&&this.miniFullScreen.hide()},show:function(){Log.debug("normal book show.");this.visible=!0;this.setCSS({display:"block"});this.openShownSlider();this.openShownMedia();this.addHistoryTexts();this.addSearchHighlight();this.miniFullScreen&&this.miniFullScreen.show();this.bmt&&this.bmt.refresh();this.adContainer&&this.adContainer.show();this.adContainer&&1==this.currentPageIndex&&this.adContainer.setStyle({"z-index":3})},addHistoryTexts:function(){var g=[1];try{g=BookInfo.getCurrentPages()}catch(l){g=[1]}for(var k=this.pageArray.length,h=0;h<k;h++){this.pageArray[h]&&this.pageArray[h].addHistoryTexts(g)}},addSearchHighlight:function(){var c=this.currentPageIndex,c=0==c%2?c+1:c-1;this.pageArray[c]&&this.pageArray[c].highlightSearch();this.pageArray[c+1]&&this.pageArray[c+1].highlightSearch();this.pageArray[c-1]&&this.pageArray[c-1].highlightSearch();this.pageArray[c+2]&&this.pageArray[c+2].highlightSearch()},clearSearchHighlight:function(){for(var d=this.pageArray.length,f=0;f<d;f++){this.pageArray[f]&&this.pageArray[f].clearHighlight()}},onResize:function(){},destroy:function(){}}).extend(Book);bdor[41]=function(){return bdor[32](bdor[30](37,0),bdor[38]/bdor[40])}();var ZoomMonitor=Class({options:void 0,target:void 0,beforeZoomIn:void 0,afterZoomIn:void 0,beforeZoomOut:void 0,afterZoomOut:void 0,beforePan:void 0,afterPan:void 0,create:function(){},register:function(c){this.options=c;this.target=c.target;this.beforeZoomIn=c.beforeZoomIn;this.afterZoomIn=c.afterZoomIn;this.beforeZoomOut=c.beforeZoomOut;this.afterZoomOut=c.afterZoomOut;this.beforePan=c.beforePan;this.afterPan=c.afterPan;this.target.zoom({zoomIn:this.beforeZoomIn,onPan:this.beforePan,zoomOut:this.afterZoomOut,onZoomed:this.afterZoomIn})}});FlipBook.expand({initEvent:function(){this.moveDirectionType={MOVE_LEFT:-1,MOVE_RIGHT:1,MOVE_NONE:0};this.mouseMoveDirection=this.moveDirectionType.MOVE_NONE;this.hammerEventModular();this.mouseWheelFlip()},hammerEventModular:function(){var c=new Hammer.Manager(this.flipBook[0]);c.add(new Hammer.Pan);c.add((new Hammer.Swipe).recognizeWith(c.get("pan")));c.add(new Hammer.Press);c.add(new Hammer.Pinch);c.add(new Hammer.Tap({event:"doubletap",taps:2}));c.add(new Hammer.Tap);c.on("panstart panmove",this.onPan.bind(this));c.on("press",this.onPress.bind(this));c.on("tap",this.onTap.bind(this));this.flipBook.bind("mouseover mousemove",this.onOver.bind(this));this.flipBook.bind(_event._down,this.onDown.bind(this));$("body").bind(_event._end,this.onUp.bind(this));this.flipBook.speed(this.onSwipe.bind(this));this.zoomMonitor=new ZoomMonitor;this.zoomMonitor.register({target:this.flipBook,beforeZoomIn:this.beforeZoomIn.bind(this),afterZoomIn:this.afterZoomIn.bind(this),beforePan:this.beforePan.bind(this),afterPan:this.afterPan.bind(this),beforeZoomOut:this.beforeZoomOut.bind(this),afterZoomOut:this.afterZoomOut.bind(this)});$(this.flipBook).bind("mouseup touchstart",function(d){onWindowClick(d)})},onDown:function(){this.status_zoom||this.isZoomming||(this.fingleDown=!0)},onUp:function(c){this.status_zoom||this.isZoomming||bookType!=this.bookType||(c=this.realPoint(c)[0],c=this.aroundCorner(c),this.fingleDown=!1,bookConfig.CurlingPageCorner&&c&&0<=c.indexOf("l")&&this.optionPage&&this.flipArray[this.optionPage]&&this.flipArray[this.optionPage].AliceToRight||bookConfig.CurlingPageCorner&&c&&0<=c.indexOf("r")&&this.optionPage&&this.flipArray[this.optionPage]&&this.flipArray[this.optionPage].AliceToLeft||(this.optionPage&&(this.flipArray[this.optionPage]&&this.flipArray[this.optionPage].meetFlipCondition()&&this.pageDragToFlip(),this.flipArray[this.optionPage]&&(this.flipArray[this.optionPage].loosen=!0),this.optionPage=null),this.unCurling()))},onPinch:function(c){this.status_zoom||this.isZoomming||this.status_zoom||this.status_resize||this.flipping||"pinchout"!=c.type||(this.endFlip(),this.zoomToPage(this.currentPageIndex))},onDoubleTap:function(d){if(!this.status_resize&&!this.flipping){var f=this.realPoint(d.srcEvent)[0];this.aroundCorner(f)||d.srcEvent[0].pageX>$("#flipBook").offset().left+$("#flipBook").outerWidth()||d.srcEvent[0].pageX<$("#flipBook").offset().left||d.srcEvent[0].pageY>$("#flipBook").offset().top+$("#flipBook").outerHeight()||d.srcEvent[0].pageY<$("#flipBook").offset().top||(this.endFlip(),this.zoomToPage(this.currentPageIndex,d.srcEvent.pageX,d.srcEvent.pageY))}},onPan:function(f){if(!(this.status_zoom||this.isZoomming||bookType!=this.bookType||this.status_zoom||this.status_resize||this.flipping||this.flipArray.fallbackArray&&0<this.flipArray.fallbackArray.length)){var h=this.realPoint(f.srcEvent)[0],g=this.aroundCorner(h);this.optionPage?(this.flipArray[this.optionPage].toPoint=h,this.lastMousePoint&&(this.mouseMoveDirection=0<=h.x-this.lastMousePoint.x?this.moveDirectionType.MOVE_RIGHT:this.moveDirectionType.MOVE_LEFT),this.lastMousePoint=h):("panstart"==f.type&&g||30<Math.abs(f.deltaX)&&(h.x<this.MiddleX&&0<f.deltaX||h.x>this.MiddleX&&0>f.deltaX))&&this.curling(h,g)}},onPress:function(d){if(!(this.status_zoom||this.isZoomming||bookType!=this.bookType||this.status_zoom||this.status_resize||this.flipping||this.flipArray.fallbackArray&&0<this.flipArray.fallbackArray.length)){d=this.realPoint(d.srcEvent)[0];var f=this.aroundCorner(d);this.optionPage?this.flipArray[this.optionPage].toPoint=d:(f||(f=d.x>this.MiddleX?"r":"l"),this.curling(d,f))}},onRotate:function(c){},onSwipe:function(f,h){if(!this.status_zoom&&!this.isZoomming&&!this.dragToFlip){var g;g=30*windowWidth/1600;Math.abs(f)<=g||(f<-g?this.flipFromDirection(this.coordinate_bottom_right):f>g&&this.flipFromDirection(this.coordinate_bottom_left))}},onTap:function(d){if(this.status_zoom||this.isZoomming){onWindowTap(d.srcEvent)}else{if(bookType==this.bookType&&!this.status_zoom&&!this.status_resize){var f=this.realPoint(d.srcEvent)[0];(f=this.aroundCorner(f))?this.flipFromDirection(f):onWindowTap(d.srcEvent)}}},onOver:function(d){if(!(isPhone()||isPad()||this.status_zoom||this.isZoomming||bookType!=this.bookType||this.fingleDown)&&bookConfig.CurlingPageCorner){d=this.realPoint(d)[0];var f=this.aroundCorner(d);f?this.curling(d,f):(this.flipArray[this.optionPage]&&(this.flipArray[this.optionPage].loosen=!0),this.optionPage=null);this.unCurling()}},pageDragToFlip:function(){this.flipArray[this.optionPage].toPoint.y=this.flipArray[this.optionPage].startPoint.y;this.flipArray[this.optionPage].toPoint.x=-this.flipArray[this.optionPage].startPoint.x;this.mouseMoveDirection=this.moveDirectionType.MOVE_NONE;this.flipArray[this.optionPage].startToFlip();this.flipArray[this.optionPage].dragMoveToFlip=!0;this.flipToDirection=0>this.flipArray[this.optionPage].startPoint.x?"right":"left";var c=this.getNextPageIndex();this.tmpDragToFlipTimeout&&window.clearTimeout(this.tmpDragToFlipTimeout);this.dragToFlip=!0;this.tmpDragToFlipTimeout=window.setTimeout(function(){this.dragToFlip=!1}.bind(this),500);gotoPageFun(c)},flipFromDirection:function(d){if(!(this.flipArray.fallbackArray&&0<this.flipArray.fallbackArray.length)){if(0<=d.indexOf("l")){if(!this.flipping||this.flipToDirection!=this.direction_left){if(this.flipArray.curlingArray&&0<this.flipArray.curlingArray.length){d=this.flipArray.curlingArray.length;for(var f=0;f<d;f++){if(this.flipArray.curlingArray[f].AliceToLeft){return}}}this.flipToDirection=this.direction_right;d=this.getNextPageIndex();gotoPageFun(d)}}else{if(0<=d.indexOf("r")&&(!this.flipping||this.flipToDirection!=this.direction_right)){if(this.flipArray.curlingArray&&0<this.flipArray.curlingArray.length){for(d=this.flipArray.curlingArray.length,f=0;f<d;f++){if(this.flipArray.curlingArray[f].AliceToRight){return}}}this.flipToDirection=this.direction_left;d=this.getNextPageIndex();gotoPageFun(d)}}}},hidePages:function(){var f=this.pageArray.length,h=this.getCurrentPages();this.zoomPageArray=[];for(var g=0;g<f;g++){this.pageArray[g]&&0>h.indexOf(g)&&this.pageArray[g].visible&&(this.zoomPageArray.push(this.pageArray[g]),this.pageArray[g].setVisible(!1))}},showPages:function(){if(this.zoomPageArray){for(var d=this.zoomPageArray.length,f=0;f<d;f++){this.zoomPageArray[f]&&this.zoomPageArray[f].setVisible(!0)}this.zoomPageArray=[]}},beforeZoomIn:function(){isPhone()||isPad()||(this.controlBar||(this.controlBar=new zoomControlBar(bookContainer)),this.controlBar&&(this.controlBar.setPosition((windowWidth-this.controlBar.width)/2,toolBar.getTopHeight()+5),this.controlBar.setVisible(!0)),this.bookMap&&(this.bookMap.show(),this.bookMap.fillContent(this.currentPageIndex)));window.toolBar&&window.toolBar.btnZoom&&window.toolBar.changeZoomIcon(!1);this.status_zoom=!0;this.adContainer&&this.adContainer.setStyle({"z-index":1});this.flipBook.parameters.zoomFlag=!0;this.hidePages();StateSynchronous.instance().findButtons("ZoomButton",!0).each(function(c){c.setAsZoomout();c.executeCallback()});BookInfo.getBook().bmt&&BookInfo.getBook().bmt.hide()},beforeZoomOut:function(){},afterZoomOut:function(){this.flipBook.parameters.zoomFlag=!1;this.adContainer&&1==this.currentPageIndex&&this.adContainer.setStyle({"z-index":3});this.status_zoom=!1;this.controlBar&&this.controlBar.setVisible(!1);this.bookMap&&this.bookMap.hide();if(isPhone()||isPad()){this.showPages(),this.gotoPage(this.toPageIndex)}window.toolBar&&window.toolBar.btnZoom&&window.toolBar.changeZoomIcon(!0);StateSynchronous.instance().findButtons("ZoomButton",!0).each(function(c){c.setAsZoomin();c.executeCallback()});BookInfo.getBook().bmt&&BookInfo.getBook().bmt.show()},beforePan:function(){this.bookMap&&this.bookMap.refreshArea()},afterPan:function(){},curling:function(d,f){this.status_zoom||this.status_resize||(this.optionPage=this.curlingPage(d,f))&&(this.flipIntervalManager.flipInterval||this.flipIntervalManager.setFlipInterval())},curlingPage:function(l,r){var q,p,o,n;if(!r&&l.x<this.MiddleX||r&&0<=r.indexOf("l")){if(this.flipping&&"left"==this.flipToDirection){return}p=this.realIndex(!1)[0];o=this.realIndex(!1)[1];q=p+"-"+o;n=!1}if(!r&&l.x>this.MiddleX||r&&0<=r.indexOf("r")){if(this.flipping&&"right"==this.flipToDirection){return}p=this.realIndex(!0)[0];o=this.realIndex(!0)[1];q=p+"-"+o;n=!0}if(!(!(q&&p&&o)||0>=p||p>originTotalPageCount||0>=o||o>originTotalPageCount||this.flipArray[q]&&this.flipArray[q].fallback||this.flipArray[q]&&this.flipArray[q].flipping)){var m=o;BookInfo.isDoublePage()&&(m=2*Math.floor(m/2)+1);if(passwardType()&&bookConfig.excludeFrontPages&&m>parseInt(bookConfig.excludeFrontPages)&&!verifyPassward()){passwardPannel.show()}else{return this.defineFlipPage(q,l,r,p,o,n),q}}},defineFlipPage:function(k,p,o,n,m,l){!p||0>=n||n>originTotalPageCount||0>=m||m>originTotalPageCount||(o=this.getFromStartPointByCoordinate(p,o),this.flipArray[k]||(this.flipArray[k]=this.newFlipPage()),l?(this.flipArray[k].AliceToLeft=!0,this.flipArray[k].AliceToRight=!1):(this.flipArray[k].AliceToLeft=!1,this.flipArray[k].AliceToRight=!0),this.flipArray[k].loosen=!1,this.flipArray[k].fromPoint=o[0],this.flipArray[k].startPoint=o[1],this.flipArray[k].toPoint=p,this.flipArray[k].downMask||this.flipArray[k].upMask||(this.beforeFlipTo(m),this.flipIntervalManager.flipToPoint(this.flipArray[k],n,m,this.pageWidth,this.pageHeight,this.maskWidth,this.flipArray[k].fromPoint,this.flipArray[k].startPoint)),0>this.flipArray.curlingArray.indexOf(k)&&this.flipArray.curlingArray.push(k),this.flipArray.fallbackArray.removeElement(k),this.flipArray.flipArray.removeElement(k))},unCurling:function(){if(!this.status_zoom&&!this.status_resize&&this.flipArray.array){for(var f=this.flipArray.array.length,h=0;h<f;h++){var g=this.flipArray.array[h];g==this.optionPage||!this.flipArray[g]||this.flipArray[g].fallback||this.flipArray[g].flipping||!this.flipArray[g].AliceToRight&&!this.flipArray[g].AliceToLeft||(this.flipArray[g].AliceToRight=!1,this.flipArray[g].AliceToLeft=!1,this.flipArray[g].fallback=!0,this.flipArray[g].toPoint=this.flipArray[g].startPoint,0>this.flipArray.fallbackArray.indexOf(g)&&this.flipArray.fallbackArray.push(g),this.flipArray.curlingArray.removeElement(g),this.flipArray.flipArray.removeElement(g))}}},getFromStartPointByCoordinate:function(h,n){if(h){var m={x:0,y:0},l={x:0,y:0},k=h.y>this.pageHeight/2?h.y-5:h.y+5;0>h.x&&(m={x:-this.pageWidth,y:k});0<h.x&&(m={x:this.pageWidth,y:k});n&&0<=n.indexOf("r")&&(m.x=this.pageWidth);n&&0<=n.indexOf("l")&&(m.x=-this.pageWidth);"tl"==n&&(m={x:-this.pageWidth,y:0});"bl"==n&&(m={x:-this.pageWidth,y:this.pageHeight});"tr"==n&&(m={x:this.pageWidth,y:0});"br"==n&&(m={x:this.pageWidth,y:this.pageHeight});l.x=m.x;l.y=m.y;return[m,l]}},realIndex:function(d){var f=2*parseInt(this.currentPageIndex/2);if(d&&!rightToLeft||!d&&rightToLeft){return[f+1,f+2]}if(!d&&!rightToLeft||d&&rightToLeft){return[f,f-1]}},getNextPageIndex:function(){var c=this.currentPageIndex+2;if("right"==this.flipToDirection&&!rightToLeft||"left"==this.flipToDirection&&rightToLeft){c=this.currentPageIndex-2}c=Math.max(1,c);return c=Math.min(originTotalPageCount,c)},realBookPosition:function(){var d=this.flipBook.offset().left,f=this.flipBook.offset().top;return[d,f]},realPoint:function(k){if((k=k.originalEvent&&k.originalEvent.changedTouches?k.originalEvent.changedTouches:k.changedTouches?k.changedTouches:[k])&&!(3<=k.length)){var p=this.realBookPosition()[0],o=this.realBookPosition()[1],n=k[0].pageX,m=k[0].pageY,n=n-p-this.pageWidth,m=m-o;if(!k[1]){return[{x:n,y:m}]}var l=k[1].pageX;k=k[1].pageY;l=l-p-this.pageWidth;return[{x:n,y:m},{x:l,y:k-o}]}},mouseWheelFlip:function(){if(bookConfig.mouseWheelFlip){var c;this.flipBook.bind(_event._mousewheel,function(f){var b;void 0!=c&&150>new Date-c?b=!1:(c=new Date,b=!0);if(!b){return !1}b=f.originalEvent;b=Math.max(-1,Math.min(1,b.wheelDelta||-b.detail));this.status_zoom?0>b?this.controlBar&&this.controlBar.zoomDown():this.controlBar&&this.controlBar.zoomUp():0>b?nextPageFun():previousPageFun();stopEvent(f);return !1}.bind(this))}}});var DoubleFlipBook=Class({newFlipPage:function(){return new DoubleFlipPage(this)},resetPages:function(c){isNaN(c)||0>=c||(c=2*parseInt(c/2),this.unWrapPageExcludeArray([c,c+1,c+2,c+3,c-1,c-2]),this.addPageArray([c,c+1,c+2,c+3,c-1,c-2]),this.currentPage=this.pageArray[c],this.currentPage2=this.pageArray[c+1],this.nextPage=this.pageArray[c+2],this.nextPage2=this.pageArray[c+3],this.previousPage=this.pageArray[c-1],this.previousPage2=this.pageArray[c-2],this.setPageCss(),this.loading())},setPageCss:function(){var c=transformCSS({rotate:0,tran:{x:0,y:0}});this.currentPage&&(this.currentPage.setZIndex(2),this.currentPage.setCSSByStyle(c));this.previousPage&&(this.previousPage.setZIndex(1),this.previousPage.setCSSByStyle(c));this.previousPage2&&(this.previousPage2.setZIndex(0),this.previousPage2.setCSSByStyle(c));this.currentPage2&&(this.currentPage2.setZIndex(2),this.currentPage2.setCSSByStyle(c));this.nextPage&&(this.nextPage.setZIndex(1),this.nextPage.setCSSByStyle(c));this.nextPage2&&(this.nextPage2.setZIndex(0),this.nextPage2.setCSSByStyle(c));rightToLeft?(this.currentPage&&this.currentPage.setLeftOrRight(!1),this.previousPage&&this.previousPage.setLeftOrRight(!1),this.previousPage2&&this.previousPage2.setLeftOrRight(!1),this.currentPage2&&this.currentPage2.setLeftOrRight(!0),this.nextPage&&this.nextPage.setLeftOrRight(!0),this.nextPage2&&this.nextPage2.setLeftOrRight(!0)):(this.currentPage&&this.currentPage.setLeftOrRight(!0),this.previousPage&&this.previousPage.setLeftOrRight(!0),this.previousPage2&&this.previousPage2.setLeftOrRight(!0),this.currentPage2&&this.currentPage2.setLeftOrRight(!1),this.nextPage&&this.nextPage.setLeftOrRight(!1),this.nextPage2&&this.nextPage2.setLeftOrRight(!1))},isHardPage:function(d,f){return !bookConfig.HardPageEnable||1!=d&&2!=d&&d!=totalPageCount&&d!=totalPageCount-1?!1:!0},getDownUpHardPage:function(f,h,g){this.addPageArray([f,h]);g?(this.pageArray[f]&&this.pageArray[f].setCSSByName("flip-hard-left-side"),this.pageArray[h]&&this.pageArray[h].setCSSByName("flip-hard-right-side")):(this.pageArray[f]&&this.pageArray[f].setCSSByName("flip-hard-right-side"),this.pageArray[h]&&this.pageArray[h].setCSSByName("flip-hard-left-side"));this.pageArray[h]&&this.pageArray[h].setAttachment(!g);return[this.pageArray[f],this.pageArray[h]]},getDownUpPage:function(f,h,g){this.addPageArray([f,h]);this.pageArray[f]&&this.pageArray[f].beginToFlip();this.pageArray[h]&&this.pageArray[h].beginToFlip();this.pageArray[f]&&(this.pageArray[f].page.setCSSByName("right-flip-side"),this.pageArray[f].page.setZIndex(2),this.pageArray[f].setZIndex(2));this.pageArray[h]&&(this.pageArray[h].page.setCSSByName("flip-side"),this.pageArray[h].page.side.addClass("boxShadow"),this.pageArray[h].page.setZIndex(1),this.pageArray[h].setZIndex(1),this.pageArray[h].page.setAttachment(!g));return[this.pageArray[f],this.pageArray[h]]},flipToMax:function(h,n,m,l){var k=this.beginFlipByIndex(h,n,l);this.addPageArray([n+1]);this.pageArray[n+1]&&(this.pageArray[n+1]&&this.pageArray[n+1].setZIndex(0),this.pageArray[n+1].setLeftOrRight(l),k.nextPage=this.pageArray[n+1]);!m||isPhone()||isPad()||(this.addPageArray([n+2,n+3]),this.pageArray[n+1]&&this.pageArray[n+1].setZIndex(2),this.pageArray[n+2]&&(this.pageArray[n+2].setZIndex(1),this.pageArray[n+2].setLeftOrRight(l)),this.pageArray[n+3]&&(this.pageArray[n+3].setZIndex(0),this.pageArray[n+3].setLeftOrRight(l)));for(m=n+4;m<=originTotalPageCount;m++){this.pageArray[m]&&(this.pageArray[m].remove(),this.pageArray[m]=void 0)}for(m=h+1;m<n;m++){this.pageArray[m]&&(this.pageArray[m].remove(),this.pageArray[m]=void 0)}return k},flipToMin:function(h,n,m,l){var k=this.beginFlipByIndex(h,n,l);this.addPageArray([n-1]);this.pageArray[n-1]&&(this.pageArray[n-1].setZIndex(0),this.pageArray[n-1].setLeftOrRight(l),k.nextPage=this.pageArray[n-1]);!m||isPhone()||isPad()||(this.addPageArray([n-2,n-3]),this.pageArray[n-1]&&this.pageArray[n-1].setZIndex(2),this.pageArray[n-2]&&(this.pageArray[n-2].setZIndex(1),this.pageArray[n-2].setLeftOrRight(l)),this.pageArray[n-3]&&(this.pageArray[n-3].setZIndex(0),this.pageArray[n-3].setLeftOrRight(l)));for(m=n-4;0<=m;m--){this.pageArray[m]&&(this.pageArray[m].remove(),this.pageArray[m]=void 0)}for(m=h-1;m>n;m--){this.pageArray[m]&&(this.pageArray[m].remove(),this.pageArray[m]=void 0)}return k},afterFlipToMax:function(f,h){var g=2*parseInt(f/2);this.addPageArray([g,g-1,g-2]);this.pageArray[g]&&(this.pageArray[g].setZIndex(2),this.pageArray[g].setLeftOrRight(h));this.pageArray[g-1]&&(this.pageArray[g-1].setZIndex(1),this.pageArray[g-1].setLeftOrRight(h));this.pageArray[g-2]&&(this.pageArray[g-2].setZIndex(0),this.pageArray[g-2].setLeftOrRight(h));if(isPhone()||isPad()){this.addPageArray([g+2,g+3]),this.pageArray[g+1]&&this.pageArray[g+1].setZIndex(2),this.pageArray[g+2]&&(this.pageArray[g+2].setZIndex(1),this.pageArray[g+2].setLeftOrRight(!h)),this.pageArray[g+3]&&(this.pageArray[g+3].setZIndex(0),this.pageArray[g+3].setLeftOrRight(!h))}this.pageArray[g+1]&&this.fillContent(g+1);this.pageArray[g+2]&&this.fillContent(g+2);this.pageArray[g+3]&&this.fillContent(g+3);for(g-=3;0<=g;g--){this.pageArray[g]&&(this.pageArray[g].remove(),this.pageArray[g]=void 0)}},afterFlipToMin:function(f,h){var g=2*parseInt(f/2)+1;this.addPageArray([g,g+1,g+2]);this.pageArray[g]&&(this.pageArray[g].setZIndex(2),this.pageArray[g].setLeftOrRight(h));this.pageArray[g+1]&&(this.pageArray[g+1].setZIndex(1),this.pageArray[g+1].setLeftOrRight(h));this.pageArray[g+2]&&(this.pageArray[g+2].setZIndex(0),this.pageArray[g+2].setLeftOrRight(h));if(isPhone()||isPad()){this.addPageArray([g-2,g-3]),this.pageArray[g-1]&&this.pageArray[g-1].setZIndex(2),this.pageArray[g-2]&&(this.pageArray[g-2].setZIndex(1),this.pageArray[g-2].setLeftOrRight(!h)),this.pageArray[g-3]&&(this.pageArray[g-3].setZIndex(0),this.pageArray[g-3].setLeftOrRight(!h))}this.pageArray[g-1]&&this.fillContent(g-1);this.pageArray[g-2]&&this.fillContent(g-2);this.pageArray[g-3]&&this.fillContent(g-3);for(g+=3;g<=originTotalPageCount;g++){this.pageArray[g]&&(this.pageArray[g].remove(),this.pageArray[g]=void 0)}},getFlipTo:function(g){var l=2*parseInt(this.currentPageIndex/2);g=2*parseInt(g/2);var k=l+1,h="";g>k&&(h="max");g+1<l&&(h="min",g+=1);return{flipTo:h,minIndex:l,maxIndex:k,toIndex:g}},setFlipOringinPoint:function(d,f){d.dragMoveToFlip||"left"!=f||(d.fromPoint={x:this.pageWidth,y:this.pageHeight});d.dragMoveToFlip||"right"!=f||(d.fromPoint={x:-this.pageWidth,y:this.pageHeight});d.toPoint={x:-d.fromPoint.x,y:d.fromPoint.y};d.startPoint||(d.startPoint={x:0,y:0});d.startPoint.x=d.fromPoint.x;d.startPoint.y=d.fromPoint.y},getCurrentPages:function(){var c=2*parseInt(this.currentPageIndex/2);return[c,c+1]},getPagesByIndex:function(c){c=2*parseInt(c/2);return[c,c+1]},setPageZIndex:function(k,p){if(k){var o=k.downMask.pageIndex,n=k.upMask.pageIndex,m=originTotalPageCount+5+n,l=originTotalPageCount+5-o;"min"==p.flipTo&&(m=2*originTotalPageCount+5-n);"min"==p.flipTo&&(l=5+o);if(bookConfig.HardPageEnable){if(n==totalPageCount||1==n){m=2*(bookConfig.totalPageCount+5)+10}if(o==totalPageCount||1==o){l=2*(bookConfig.totalPageCount+5)+10}}k.upMask.setZIndex(m);k.downMask.setZIndex(l)}},setFlipAlpha:function(g,l,k,h){},endFlipByIndex:function(f,h,g){isNaN(f)||isNaN(h)||(this.resetFlipPage([f,h]),g?(this.pageArray[f]&&this.pageArray[f].setLeftOrRight(!0),this.pageArray[h]&&this.pageArray[h].setLeftOrRight(!0)):(this.pageArray[f]&&this.pageArray[f].setLeftOrRight(!1),this.pageArray[h]&&this.pageArray[h].setLeftOrRight(!1)),this.pageArray[f]&&this.pageArray[f].setZIndex(2),this.pageArray[h]&&this.pageArray[h].setZIndex(1),this.pageArray[f].clearFlipShadow(),this.pageArray[h].clearFlipShadow())},movetoCenter:function(l,r,q){if(bookConfig.retainBookCenter&&!(1<l&&l<totalPageCount&&1<r&r<totalPageCount)){var p=-this.pageWidth/2,o=this.pageWidth/2;rightToLeft&&(p=this.pageWidth/2,o=-this.pageWidth/2);var n=0,m=0;1==l&&(n=p);l==totalPageCount&&(n=o);1==r&&(m=p);r==totalPageCount&&(m=o);l=2*this.pageWidth;void 0==q&&(q=l);isNaN(q)||(q={tran:{x:$.easing.easeInOutSine(null,q,n,m-n,l),y:0}},this.setCSS(q))}},boundaryPages:function(){return[2,3,totalPageCount-1,totalPageCount-2]},edgeX:function(){this.MiddleX=0},hasAliceHardPage:function(d){if(!bookConfig.HardPageEnable){return !1}if((1==d||d==totalPageCount||0<=this.boundaryPages().indexOf(this.currentPageIndex))&&this.flipArray.flipArray&&0<this.flipArray.flipArray.length){var f=window.setInterval(function(){this.flipArray.flipArray&&0<this.flipArray.flipArray.length||(f&&0>this.boundaryPages().indexOf(this.currentPageIndex)||gotoPageFun(d),window.clearInterval(f),f=void 0)}.bind(this),20);return !0}},handleHardPage:function(c){if(!bookConfig.HardPageEnable||1!=c&&c!=totalPageCount&&1!=this.currentPageIndex&&this.currentPageIndex!=totalPageCount){return !1}if(1==c&&0>BookInfo.getCurrentPages().indexOf(2)||c==totalPageCount&&0>BookInfo.getCurrentPages().indexOf(totalPageCount-1)){return 1==c&&gotoPageFun(2),c==totalPageCount&&gotoPageFun(totalPageCount-1),window.setTimeout(function(){gotoPageFun(c)},20),!0}if(1==this.currentPageIndex&&2!=c&&3!=c||this.currentPageIndex==totalPageCount&&c!=totalPageCount-1&&c!=totalPageCount-2){return 1==this.currentPageIndex&&gotoPageFun(2),this.currentPageIndex==totalPageCount&&gotoPageFun(totalPageCount-1),window.setTimeout(function(){gotoPageFun(c)},20),!0}},getFromStartPointByIndex:function(k){var p=2*parseInt(this.currentPageIndex/2),o=p+1;if(k!=o&&k!=p){var n={x:0,y:0},m={x:0,y:0},l=!1;if(k>o&&!rightToLeft||k<p&&rightToLeft){n={x:this.pageWidth,y:this.pageHeight},l=!0}if(k<p&&!rightToLeft||k>o&&rightToLeft){n={x:-this.pageWidth,y:this.pageHeight},l=!1}if(!this.flipping||!l||"right"!=this.flipToDirection){if(!this.flipping||l||"left"!=this.flipToDirection){return m.x=n.x,m.y=n.y,this.flipToDirection=l?"left":"right",[n,m]}}}},afterZoomIn:function(g){if(!isPhone()&&!isPad()&&(this.showPages(),g&&this.flipBook.parameters&&!this.flipBook.parameters.resize)){this.flipBook.parameters.resize=!0;g=this.flipBook.offset().left;var l=this.flipBook.offset().top,k=this.flipBook.parameters.scale,h={tran:{x:g-this.flipBook.parameters.left,y:l-this.flipBook.parameters.top},scale:1,origin:{x:0,y:0}};1!=k&&this.resizeBook(parseInt(this.width*k/2),parseInt(this.height*k));this.status_zoom||(k=0,1==this.currentPageIndex&&(k=rightToLeft?this.width/4:-this.width/4),this.currentPageIndex==totalPageCount&&(k=rightToLeft?-this.width/4:this.width/4),h.tran={x:k,y:0},h.left=g-k,h.top=l-0);this.setCSS(h);this.flipBook.parameters.tran=h.tran;this.flipBook.parameters.scale=1;this.flipBook.parameters.toScale=1;this.flipBook.parameters.width=$(this.flipBook).width();this.flipBook.parameters.height=$(this.flipBook).height();this.flipBook.parameters.origin={x:0,y:0};this.flipBook.parameters.resize=!1;this.bookMap&&this.bookMap.refreshArea()}}}).extend(FlipBook),SingleFlipBook=Class({pageBackArray:null,create:function(c){this.pageBackArray=[];this._super(c)},newFlipPage:function(){return new SingleFlipPage(this)},resetPages:function(c){isNaN(c)||0>=c||(this.unWrapPageBackExcludeArray([c,c+1]),this.unWrapPageExcludeArray([c,c+1]),this.addPageArray([c,c+1]),this.addPageBackArray([c]),this.currentPage=this.pageArray[c],this.currentPage2=this.pageBackArray[c],this.nextPage=this.pageArray[c+1],this.previousPage=this.pageArray[c-1],this.previousPage2=this.pageBackArray[c-1],this.setPageCss(),this.loading())},setPageCss:function(){var c=transformCSS({rotate:0,tran:{x:0,y:0}});this.currentPage&&(this.currentPage.setZIndex(4),this.currentPage.setCSSByStyle(c));this.previousPage&&(this.previousPage.setZIndex(1),this.previousPage.setCSSByStyle(c));this.previousPage2&&(this.previousPage2.setZIndex(0),this.previousPage2.setCSSByStyle(c));this.currentPage2&&(this.currentPage2.setZIndex(3),this.currentPage2.setCSSByStyle(c));this.nextPage&&(this.nextPage.setZIndex(2),this.nextPage.setCSSByStyle(c));rightToLeft?(this.currentPage&&this.currentPage.setLeftOrRight(!0),this.previousPage&&this.previousPage.setLeftOrRight(!0),this.previousPage2&&this.previousPage2.setLeftOrRight(!0),this.currentPage2&&this.currentPage2.setLeftOrRight(!0),this.nextPage&&this.nextPage.setLeftOrRight(!0)):(this.currentPage&&this.currentPage.setLeftOrRight(!1),this.previousPage&&this.previousPage.setLeftOrRight(!1),this.previousPage2&&this.previousPage2.setLeftOrRight(!1),this.currentPage2&&this.currentPage2.setLeftOrRight(!1),this.nextPage&&this.nextPage.setLeftOrRight(!1))},addPageBackArray:function(f){if(f&&this.pageBackArray){for(var h=0;h<f.length;h++){if(!(0>=f[h]||f[h]>originTotalPageCount||(!this.pageBackArray[f[h]]||this.flipping&&!imageLoaded[f[h]]||this.fillContent(f[h]),this.pageBackArray[f[h]]))){var g=new this.newPageBack(f[h]);g.onResize(this.pageWidth,this.pageHeight);g.mirrorSide();this.pageBackArray[f[h]]=g;this.flipping&&!imageLoaded[f[h]]||this.fillContent(f[h]);this.flipBook.append(g.container)}}}},isHardPage:function(f,h){var g=f;f>h&&(g=h);return !bookConfig.HardPageEnable||1!=g&&g!=bookConfig.totalPageCount?!1:!0},getDownUpPage:function(f,h){var g=f;f>h&&(g=h);this.addPageArray([g]);this.addPageBackArray([g]);this.pageArray[g]&&this.pageArray[g].beginToFlip();this.pageBackArray[g]&&this.pageBackArray[g].beginToFlip();this.pageArray[g]&&(this.pageArray[g].page.setCSSByName("right-flip-side"),this.pageArray[g].page.setAttachment(rightToLeft));this.pageBackArray[g]&&(this.pageBackArray[g].page.setCSSByName("flip-side"),this.pageBackArray[g].page.side.addClass("boxShadow"));return[this.pageArray[g],this.pageBackArray[g]]},getDownUpHardPage:function(f,h){var g=f;f>h&&(g=h);this.addPageArray([g]);this.addPageBackArray([g]);rightToLeft?(this.pageArray[g]&&this.pageArray[g].setCSSByName("flip-hard-left-side"),this.pageBackArray[g]&&this.pageBackArray[g].setCSSByName("flip-hard-right-side")):(this.pageArray[g]&&this.pageArray[g].setCSSByName("flip-hard-right-side"),this.pageBackArray[g]&&this.pageBackArray[g].setCSSByName("flip-hard-left-side"));return[this.pageArray[g],this.pageBackArray[g]]},flipToMax:function(g,l,k){var h=this.beginFlipByIndex(g,l);k&&(this.addPageArray([l]),this.pageArray[l]&&(this.pageArray[l].setZIndex(4),this.pageArray[l].setLeftOrRight(rightToLeft),h.nextPage=this.pageArray[l]),this.addPageBackArray([l]),this.pageBackArray[l]&&(this.pageBackArray[l].setZIndex(3),this.pageBackArray[l].setLeftOrRight(rightToLeft)),this.addPageArray([l+1]),this.pageArray[l+1]&&(this.pageArray[l+1].setZIndex(2),this.pageArray[l+1].setLeftOrRight(rightToLeft)));for(k=l+1;k<=originTotalPageCount;k++){this.pageBackArray[k]&&(this.pageBackArray[k]&&this.pageBackArray[k].remove(),this.pageBackArray[k]=void 0)}for(k=l+2;k<=originTotalPageCount;k++){this.pageArray[k]&&(this.pageArray[k]&&this.pageArray[k].remove(),this.pageArray[k]=void 0)}for(k=g+1;k<l;k++){if(this.pageArray[k]||this.pageBackArray[k]){this.pageArray[k]&&this.pageArray[k].remove(),this.pageBackArray[k]&&this.pageBackArray[k].remove(),this.pageArray[k]=void 0,this.pageBackArray[k]=void 0}}return h},flipToMin:function(g,l){var k=this.beginFlipByIndex(g,l);this.pageArray[g]&&(k.nextPage=this.pageArray[g]);for(var h=g-1;h>l;h--){if(this.pageArray[h]||this.pageBackArray[h]){this.pageArray[h]&&this.pageArray[h].remove(),this.pageBackArray[h]&&this.pageBackArray[h].remove(),this.pageArray[h]=void 0,this.pageBackArray[h]=void 0}}return k},afterFlipToMax:function(d){this.addPageArray([d]);this.pageArray[d-1]&&this.pageArray[d-1].setZIndex(1);this.pageBackArray[d-1]&&this.pageBackArray[d-1].setZIndex(0);for(var f=d-2;0<=f;f--){if(this.pageArray[f]||this.pageBackArray[f]){this.pageArray[f]&&this.pageArray[f].remove(),this.pageBackArray[f]&&this.pageBackArray[f].remove(),this.pageArray[f]=void 0,this.pageBackArray[f]=void 0}}this.pageArray[d+1]&&this.fillContent(d+1)},afterFlipToMin:function(d){this.addPageArray([d]);this.addPageArray([d+1]);this.pageArray[d]&&(this.pageArray[d].setZIndex(4),this.pageArray[d].setLeftOrRight(rightToLeft));this.pageBackArray[d]&&(this.pageBackArray[d].setZIndex(3),this.pageBackArray[d].setLeftOrRight(rightToLeft));this.pageArray[d+1]&&(this.pageArray[d+1].setZIndex(2),this.pageArray[d+1].setLeftOrRight(rightToLeft));for(var f=d+2;f<=originTotalPageCount;f++){if(this.pageArray[f]||this.pageBackArray[f]){this.pageArray[f]&&this.pageArray[f].remove(),this.pageBackArray[f]&&this.pageBackArray[f].remove(),this.pageArray[f]=void 0,this.pageBackArray[f]=void 0}}this.pageBackArray[d+1]&&(this.pageBackArray[d+1]&&this.pageBackArray[d+1].remove(),this.pageBackArray[d+1]=void 0)},setPageZIndex:function(h){if(h){var n=h.downMask.pageIndex,m=h.upMask.pageIndex,l=originTotalPageCount+5+m,k=originTotalPageCount+5-n;if(bookConfig.HardPageEnable){if(m==totalPageCount||1==m){l=2*(bookConfig.totalPageCount+5)+10}if(n==totalPageCount||1==n){k=2*(bookConfig.totalPageCount+5)+10}}h.upMask.setZIndex(l);h.downMask.setZIndex(k)}},getCurrentPages:function(){return[this.currentPageIndex]},getPagesByIndex:function(c){return[c]},setFlipAlpha:function(g,l,k,h){g&&k&&h&&(l={opacity:1},g.downMask&&g.downMask.setCSSByStyle(l),g.upMask&&g.upMask.setCSSByStyle(l))},endFlipByIndex:function(f,h,g){isNaN(f)||isNaN(h)||(this.resetFlipPage([f]),this.resetFlipPageBack([f]),this.pageArray[f].setLeftOrRight(rightToLeft),this.pageBackArray[f].setLeftOrRight(rightToLeft),this.pageArray[f]&&this.pageArray[f].setZIndex(4),this.pageBackArray[f]&&this.pageBackArray[f].setZIndex(3),this.pageArray[f].clearFlipShadow(),this.pageBackArray[f].clearFlipShadow())},movetoCenter:function(){},boundaryPages:function(){return[2]},hasAliceHardPage:function(d){if(!bookConfig.HardPageEnable){return !1}if((1==d||0<=this.boundaryPages().indexOf(this.currentPageIndex))&&this.flipArray.flipArray&&0<this.flipArray.flipArray.length){var f=window.setInterval(function(){this.flipArray.flipArray&&0<this.flipArray.flipArray.length||(f&&0>this.boundaryPages().indexOf(this.currentPageIndex)?(window.clearInterval(f),f=void 0):(gotoPageFun(d),window.clearInterval(f)))}.bind(this),20);return !0}},handleHardPage:function(c){if(!bookConfig.HardPageEnable||1!=c&&1!=this.currentPageIndex){return !1}if(1==c&&0>BookInfo.getCurrentPages().indexOf(2)){return 1==c&&gotoPageFun(2),window.setTimeout(function(){gotoPageFun(c)},20),!0}if(1==this.currentPageIndex&&2!=c){return 1==this.currentPageIndex&&gotoPageFun(2),window.setTimeout(function(){gotoPageFun(c)},20),!0}},getFromStartPointByIndex:function(h){var n=this.currentPageIndex;if(h!=n&&h!=n){var m={x:0,y:0},l={x:0,y:0},k=!1,m={x:this.pageWidth,y:this.pageHeight};rightToLeft&&(m={x:-this.pageWidth,y:this.pageHeight});if(h>n&&!rightToLeft||h<n&&rightToLeft){k=!0}if(h<n&&!rightToLeft||h>n&&rightToLeft){k=!1}h>n&&(l={x:m.x,y:this.pageHeight});h<n&&(l={x:-m.x,y:this.pageHeight});if(!this.flipping||!k||"right"!=this.flipToDirection){if(!this.flipping||k||"left"!=this.flipToDirection){return this.flipToDirection=k?"left":"right",[m,l]}}}},realBookPosition:function(){var d=this.flipBook.offset().left-(rightToLeft?0:this.pageWidth),f=this.flipBook.offset().top;return[d,f]},edgeX:function(){this.MiddleX=this.pageWidth/2;rightToLeft&&(this.MiddleX=-this.pageWidth/2)},realIndex:function(d){var f=this.currentPageIndex;if(d&&!rightToLeft||!d&&rightToLeft){return[f,f+1]}if(!d&&!rightToLeft||d&&rightToLeft){return[f,f-1]}},getNextPageIndex:function(){var c=this.currentPageIndex+1;if("right"==this.flipToDirection&&!rightToLeft||"left"==this.flipToDirection&&rightToLeft){c=this.currentPageIndex-1}c=Math.max(1,c);return c=Math.min(originTotalPageCount,c)},getFromStartPointByCoordinate:function(h,n){if(h){var m={x:0,y:0},l={x:0,y:0},k=h.y>this.pageHeight/2?h.y-5:h.y+5;h.x<this.MiddleX&&(m.y=k,l.x=-this.pageWidth);h.x>this.MiddleX&&(m.y=k,l.x=this.pageWidth);n&&0<=n.indexOf("r")&&(l.x=this.pageWidth);n&&0<=n.indexOf("l")&&(l.x=-this.pageWidth);"tl"==n&&(m.y=0);"bl"==n&&(m.y=this.pageHeight);"tr"==n&&(m.y=0);"br"==n&&(m.y=this.pageHeight);m.x=rightToLeft?-this.pageWidth:this.pageWidth;l.y=m.y;return[m,l]}},setFlipOringinPoint:function(c){c.dragMoveToFlip||rightToLeft||(c.fromPoint={x:this.pageWidth,y:this.pageHeight});!c.dragMoveToFlip&&rightToLeft&&(c.fromPoint={x:-this.pageWidth,y:this.pageHeight});c.toPoint="left"==this.flipToDirection?{x:-this.pageWidth,y:c.fromPoint.y}:{x:this.pageWidth,y:c.fromPoint.y};c.startPoint||(c.startPoint={x:0,y:0});c.startPoint.x=-c.toPoint.x;c.startPoint.y=c.toPoint.y},getFlipTo:function(f){var h=this.currentPageIndex,g="";f>h&&(g="max");f<h&&(g="min");return{flipTo:g,minIndex:h,maxIndex:h,toIndex:f}},afterZoomIn:function(f){if(!isPhone()&&!isPad()&&(this.showPages(),f&&this.flipBook.parameters&&!this.flipBook.parameters.resize)){this.flipBook.parameters.resize=!0;f=this.flipBook.offset().left;var h=this.flipBook.offset().top;f-=this.flipBook.parameters.left;var h=h-this.flipBook.parameters.top,g=this.flipBook.parameters.scale;1!=g&&this.resizeBook(parseInt(this.width*g),parseInt(this.height*g));transformCSS({tran:{x:f,y:h},scale:1,origin:{x:0,y:0},obj:this.flipBook});this.flipBook.parameters.tran={x:f,y:h};this.flipBook.parameters.scale=1;this.flipBook.parameters.toScale=1;this.flipBook.parameters.width=$(this.flipBook).width();this.flipBook.parameters.height=$(this.flipBook).height();this.flipBook.parameters.origin={x:0,y:0};this.flipBook.parameters.resize=!1;this.bookMap&&this.bookMap.refreshArea()}}}).extend(FlipBook),NormalBook=Class({bookType:BookType.normal_book,create:function(c){this._super(c)},initBook:function(){this._super();this.initThickness();this.leftFlipShotBar=new flipShotBar(!0);this.rightFlipShotBar=new flipShotBar(!1);this.normalBookShadow=new BookShadow(this.flipBook);this.resetBookShadow(this.currentPageIndex);this.showOrHideGrayShadow(this.currentPageIndex);setCurrentIndexTextField(this.currentPageIndex,!0);this.rightThickness.resetPosition();this.leftThickness.resetPosition();this.setAttachmentBeforeFlipTo(this.currentPageIndex);isTouchDevice()||new ZoomHint(this.parent);1==this.currentPageIndex&&(this.miniFullScreen||(this.miniFullScreen=new BookMiniFullscreen),this.miniFullScreen.init());void 0!=global.staticAd&&!0==staticAd.haveAd&&(this.adContainer=new StaticAd(this.flipBook));this.showPage=this.flipBook;this.bookMap||bookType==BookType.catalog_book||(this.bookMap=new ZoomMap(this),this.bookMap.fillContent(this.currentPageIndex));(function(){isPhone()||isPad()||(this.bmt=new BookmarkTab(this.flipBook))}).delay(this,1)},initThickness:function(){this.thicknessWidth=30;this.leftThickness=new LeftThickness(this.flipBook,this.thicknessWidth);this.rightThickness=new RightThickness(this.flipBook,this.thicknessWidth);bookConfig.HardPageEnable?(this.leftThickness.setMinScale(0),this.rightThickness.setMinScale(0)):(this.leftThickness.setMinScale(6),this.rightThickness.setMinScale(6))},showOrHideGrayShadow:function(d){if(!$.browser.msie&&!$.browser.safari&&bookConfig.ShowTopLeftShadow&&this.bookType==BookType.normal_book){if(!this.grayShadow){this.grayShadow=$("<div class='grayShadow'></div>");var f=$("<div class='kong edgeShadow' ></div>");this.grayShadow.append(f);this.flipBook.append(this.grayShadow)}rightToLeft&&(d==totalPageCount||1==this.currentPageIndex||this.currentPageIndex==totalPageCount)||!rightToLeft&&(1==d||1==this.currentPageIndex||this.currentPageIndex==totalPageCount)?this.grayShadow.hide():this.grayShadow.show()}},resetBookShadow:function(c){1==c&&this.currentPageIndex==totalPageCount||c==totalPageCount&&1==this.currentPageIndex?this.normalBookShadow.hide():(this.normalBookShadow.doubleWidth(1!=c&&c!=totalPageCount&&1!=this.currentPageIndex&&this.currentPageIndex!=totalPageCount),this.normalBookShadow.right(!rightToLeft&&(1==c||1==this.currentPageIndex)||rightToLeft&&(c==totalPageCount||this.currentPageIndex==totalPageCount)))},newPage:function(c){return new NormalPage(c,"page",!1,this.bookType,this.onBookPageLoaded.bind(this))},setBookmarkVisible:function(c){!this.status_zoom&&this.bmt&&(1<c&&(rightToLeft?this.bmt.showRightBar():this.bmt.showLeftBar()),c<originTotalPageCount&&(rightToLeft?this.bmt.showLeftBar():this.bmt.showRightBar()))},flippingTo:function(c){c>this.currentPageIndex?rightToLeft?this.leftThickness.resetPosition(c):this.rightThickness.resetPosition(c):rightToLeft?this.rightThickness.resetPosition(c):this.leftThickness.resetPosition(c);this.currentPageIndex=c;this.currentPageIndex=Math.max(1,this.currentPageIndex);this.currentPageIndex=Math.min(originTotalPageCount,this.currentPageIndex);setCurrentIndexTextField(this.currentPageIndex,!0);setLocationHash(this.currentPageIndex)},setAttachmentBeforeFlipTo:function(c){bookConfig.RightToLeft?(c>=this.currentPageIndex&&this.setLeftThicknessVisible(c),c<=this.currentPageIndex&&this.setRightThicknessVisible(c)):(c<=this.currentPageIndex&&this.setLeftThicknessVisible(c),c>=this.currentPageIndex&&this.setRightThicknessVisible(c));this.adContainer&&this.adContainer.setStyle({"z-index":1});this.bmt&&(1>=c&&(parseBool(bookConfig.RightToLeft)?this.bmt.hideRightBar():this.bmt.hideLeftBar()),c>=originTotalPageCount&&(parseBool(bookConfig.RightToLeft)?this.bmt.hideLeftBar():this.bmt.hideRightBar()))},setAttachmentAfterFlipTo:function(c){this.leftThickness.resetPosition(c);this.rightThickness.resetPosition(c);this.leftThickness.resetScale(c);this.rightThickness.resetScale(c);this.addHistoryTexts();this.stopMedia();this.stopAllSlider();this.addSearchHighlight();this.showOrHideGrayShadow(this.currentPageIndex);this.flipping||this.openShownSlider();this.flipping||this.openShownMedia();this.flipping||(this.resetBookShadow(this.currentPageIndex),this.normalBookShadow.show());this.setThicknessVisible(this.currentPageIndex);this.setBookmarkVisible(this.currentPageIndex);this.currentPageIndex<originTotalPageCount&&(rightToLeft?this.leftFlipShotBar.setVisible(!0):this.rightFlipShotBar.setVisible(!0));bookConfig.ThumbnailsButtonVisible&&thumbnail.clearHighLight();bookConfig.ThumbnailsButtonVisible&&thumbnail.setHighLight(this.currentPageIndex);this.bmt&&this.bmt.refresh();resizeBookAfterFlip&&!this.flipping&&window.setTimeout(function(){onStageResize()},30);this.adContainer&&1==this.currentPageIndex&&this.adContainer.setStyle({"z-index":3});this.bookMap&&this.bookMap.fillContent(this.currentPageIndex)},onResize:function(d,f){this.resize(d,f);if(this.leftThickness){this.leftThickness.onResize()}if(this.rightThickness){this.rightThickness.onResize()}this.doublePage=!0;this.bookMap&&(this.bookMap.onResize(d,f),this.bookMap.refreshArea())},resizeBook:function(d,f){this.endFlip();this.width=2*d;this.height=f;this.pageWidth=d;this.pageHeight=f;this.maskWidth=parseInt(Math.sqrt(d*d+f*f));0!=(this.maskWidth-this.height)%2&&(this.maskWidth+=1);this.flipBook.setCss({width:this.width,height:this.height});this.resizePage(this.pageWidth,this.pageHeight);this.resetBookShadow(this.currentPageIndex)},setThicknessMovingScale:function(f,h,g){this.leftThickness.setMovingScale(f,h,g);this.rightThickness.setMovingScale(f,h,g)},setLeftThicknessVisible:function(c){1<c&&!rightToLeft&&(3<c&&this.leftThickness.setVisible(!0),this.leftFlipShotBar.setVisible(!0));c<originTotalPageCount-1&&rightToLeft&&(c<originTotalPageCount-2&&this.leftThickness.setVisible(!0),this.leftFlipShotBar.setVisible(!0));3>=c&&!bookConfig.RightToLeft&&(this.leftThickness.setVisible(!1),1>=c&&this.leftFlipShotBar.setVisible(!1));c>=originTotalPageCount-2&&bookConfig.RightToLeft&&(this.leftThickness.setVisible(!1),c>=originTotalPageCount-1&&this.leftFlipShotBar.setVisible(!1))},setRightThicknessVisible:function(c){1<c&&rightToLeft&&(3<c&&this.rightThickness.setVisible(!0),this.rightFlipShotBar.setVisible(!0));c<originTotalPageCount-1&&!rightToLeft&&(c<originTotalPageCount-2&&this.rightThickness.setVisible(!0),this.rightFlipShotBar.setVisible(!0));3>=c&&bookConfig.RightToLeft&&(this.rightThickness.setVisible(!1),1>=c&&this.rightFlipShotBar.setVisible(!1));c>=originTotalPageCount-2&&!bookConfig.RightToLeft&&(this.rightThickness.setVisible(!1),c>=originTotalPageCount-1&&this.rightFlipShotBar.setVisible(!1))},setThicknessVisible:function(c){this.setLeftThicknessVisible(c);this.setRightThicknessVisible(c)},getThicknessWidth:function(){return[this.leftThickness?this.leftThickness.getWidth():0,this.rightThickness?this.rightThickness.getWidth():0]},setThicknessPosition:function(c){c||(c=1);this.leftFlipShotBar&&this.leftFlipShotBar.setScale(c);this.rightFlipShotBar&&this.rightFlipShotBar.setScale(c);if(this.leftThickness){this.leftThickness.onResize()}if(this.rightThickness){this.rightThickness.onResize()}this.leftFlipShotBar&&this.leftFlipShotBar.setThicknessPosition(this.width,this.height);this.rightFlipShotBar&&this.rightFlipShotBar.setThicknessPosition(this.width,this.height)},afterZoomIn:function(d){if(!isPhone()&&!isPad()&&d&&this.flipBook.parameters&&!this.flipBook.parameters.resize){var f=this.flipBook.parameters.scale;this._super(d);if(1!=f&&(this.setThicknessPosition(f),this.bmt)){this.bmt.onResize()}}}}).extend(DoubleFlipBook),SingleBook=Class({bookType:BookType.single_book,create:function(c){this._super(c)},initBook:function(){this._super();this.initThickness();this.normalBookShadow=new BookShadow(this.flipBook);this.resetBookShadow();setCurrentIndexTextField(this.currentPageIndex,!1);this.thickness.resetPosition();this.currentPageIndex>=originTotalPageCount-1&&this.thickness.setVisible(!1);isTouchDevice()||new ZoomHint(this.parent);this.miniFullScreen||(this.miniFullScreen=new BookMiniFullscreen);this.miniFullScreen.init();this.bookMap||(this.showPage=this.flipBook,this.bookMap=new ZoomMap(this),this.bookMap.fillContent(this.currentPageIndex));(function(){isPhone()||isPad()||(this.bmt=new BookmarkTab(this.flipBook,!0))}).delay(this,1)},initThickness:function(){this.thicknessWidth=30;this.thickness=rightToLeft?new LeftThickness(this.flipBook,this.thicknessWidth,!0):new RightThickness(this.flipBook,this.thicknessWidth,!0);bookConfig.HardPageEnable?this.thickness.setMinScale(0):this.thickness.setMinScale(6)},showOrHideGrayShadow:function(){},newPage:function(c){return new NormalPage(c,"page",!0,BookType.single_book,this.onBookPageLoaded.bind(this))},newPageBack:function(c){return new NormalPage(c,"pageBack",!0,BookType.single_book)},setAttachmentBeforeFlipTo:function(c){c>=originTotalPageCount&&this.thickness.hide()},setAttachmentAfterFlipTo:function(c){this.thickness.resetPosition(c);this.thickness.resetScale(c);this.stopMedia();this.stopAllSlider();this.flipping||this.openShownSlider();this.flipping||this.openShownMedia();this.currentPageIndex<originTotalPageCount&&this.thickness.show();this.bmt&&this.bmt.refresh();bookConfig.ThumbnailsButtonVisible&&thumbnail.clearHighLight();bookConfig.ThumbnailsButtonVisible&&thumbnail.setHighLight(this.currentPageIndex);resizeBookAfterFlip&&!this.flipping&&window.setTimeout(function(){onStageResize()},30);this.bookMap&&this.bookMap.fillContent(this.currentPageIndex)},onResize:function(f,h){this.resizeBook(f,h);this.thickness.onResize();if(this.bmt){this.bmt.onResize()}this.flipBook.css("left");var g=this.flipBook.css("top");this.miniFullScreen&&this.miniFullScreen.setStyle({top:parseInt(g)+h-50+"px"});this.doublePage=!1;this.controlBar&&this.controlBar.setPosition((windowWidth-this.controlBar.width)/2,toolBar.getTopHeight()+5);this.bookMap&&(this.bookMap.onResize(f,h),this.bookMap.refreshArea())},resizeBook:function(d,f){this.width=d;this.height=f;this.pageWidth=d;this.pageHeight=f;this.maskWidth=parseInt(Math.sqrt(d*d+f*f));0!=(this.maskWidth-this.height)%2&&(this.maskWidth+=1);this.flipBook.css({width:this.width+"px",height:this.height+"px"});this.endFlip();this.resizePage(this.pageWidth,this.pageHeight);this.resetPages(this.currentPageIndex);this.resetBookShadow()},resetBookShadow:function(){this.normalBookShadow.doubleWidth(!0);this.normalBookShadow.right(!1)},setThicknessMovingScale:function(f,h,g){this.thickness.setMovingScale(f,h,g)},setThicknessVisible:function(c){c>=originTotalPageCount-1?this.thickness.setVisible(!1):this.thickness.setVisible(!0)},setBookmarkVisible:function(){},flippingTo:function(c){c>this.currentPageIndex&&this.thickness.resetPosition(c);this.currentPageIndex=c;this.currentPageIndex=Math.max(1,this.currentPageIndex);this.currentPageIndex=Math.min(originTotalPageCount,this.currentPageIndex);setCurrentIndexTextField(this.currentPageIndex,!1);setLocationHash(this.currentPageIndex)},getThicknessWidth:function(){return[0,0]}}).extend(SingleFlipBook),HardSide=Class({isHardPage:!0,create:function(g,l,k,h){this._super(g,l,k,h);this.isHard=!0;this.borderWidth=bookConfig.hardCoverBorderWidth;this.outerCoverBorder=bookConfig.outerCoverBorder||1!=g&&(g!=totalPageCount||g==totalPageCount&&k==BookType.single_book);this.container=this.side},initPageSide:function(){this.pageSide=$("<div class='pageSide'></div>");this.side.append(this.pageSide)},initSide:function(){this.side=$("<div class='hardSide' style='background-color:"+bookConfig.borderColor+";'></div>")},addCoil:function(){parseBool(bookConfig.addPaperCoil)&&(this.midCoil=$("<div style='z-index:6;'></div>"),this.pageSide.append(this.midCoil))},resizePage:function(d,f){this.width=d+this.borderWidth;this.height=f+2*this.borderWidth;this.maskWidth=parseInt(Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2)));0!=(this.maskWidth-this.height)%2&&(this.maskWidth+=1);this.attachW=parseInt(100*(this.outerCoverBorder?d:this.width)/(-parseFloat(bookConfig.visibleAreaLeft)+parseFloat(bookConfig.visibleAreaRight)));this.attachH=parseInt(100*(this.outerCoverBorder?f:this.height)/(parseFloat(bookConfig.visibleAreaBottom)-parseFloat(bookConfig.visibleAreaTop)));this.pageSideWidth=this.outerCoverBorder?d:d+this.borderWidth;this.pageSideHeight=this.outerCoverBorder?f:f+2*this.borderWidth;this.side.css({width:this.width,height:this.height});this.tmpContent.css({width:this.attachW,height:this.attachH,top:-this.attachH*parseFloat(bookConfig.visibleAreaTop)/100,left:-this.attachW*parseFloat(bookConfig.visibleAreaLeft)/100});this.pageSide.css({position:"absolute",top:this.outerCoverBorder?this.borderWidth:0,width:this.pageSideWidth,height:this.pageSideHeight});this.resizeSideImage()},setLeftOrRight:function(f){this._super(f);var h=f&&this.outerCoverBorder?this.borderWidth:0,g=bookConfig.cornerRound;f?(this.side.css({"border-radius":g+"px 0px 0px "+g+"px"}),1!=this.pageIndex&&2!=this.pageIndex&&this.pageIndex!=totalPageCount&&this.pageIndex!=totalPageCount-1||this.side.css({"margin-top":-this.borderWidth+"px","margin-left":-this.borderWidth+"px"})):(this.side.css({"border-radius":"0px "+g+"px "+g+"px 0px"}),1!=this.pageIndex&&2!=this.pageIndex&&this.pageIndex!=totalPageCount&&this.pageIndex!=totalPageCount-1||this.side.css({"margin-top":-this.borderWidth+"px","margin-right":-this.borderWidth+"px"}));this.pageSide.css({left:h+"px"})}}).extend(BookPage),HardCover=Class({create:function(c){this.parent=c;this.borderWidth=bookConfig.hardCoverBorderWidth;this.rightToLeft=bookConfig.RightToLeft;this.cover=$("<div class='hardCover'></div>");this.initPage();this.initBookSpine();this.parent.append(this.cover)},initPage:function(){this.leftPage=new HardSide(this.rightToLeft?totalPageCount-1:2,"coverPage",BookType.normal_book);this.rightPage=new HardSide(this.rightToLeft?2:totalPageCount-1,"coverPage",BookType.normal_book);this.cover.append(this.leftPage.getSide());this.cover.append(this.rightPage.getSide());this.leftPage.addAttachment();this.rightPage.addAttachment();this.leftPage.setLeftOrRight(!0);this.rightPage.setLeftOrRight(!1);this.leftPage.setCSSByStyle({top:"0",left:"0","margin-top":0,"margin-left":0});this.rightPage.setCSSByStyle({top:"0",right:"0","margin-top":0,"margin-right":0})},initBookSpine:function(){this.topSpine=new BookSpine(this.cover);this.bottomSpine=new BookSpine(this.cover);this.topSpine.setCSSByName("top_spine");this.bottomSpine.setCSSByName("botoom_spine")},onResize:function(f,h,g){if(this.leftPage){this.leftPage.onResize(f,h)}if(this.rightPage){this.rightPage.onResize(f,h)}this.topSpine.onResize(g);this.bottomSpine.onResize(g);this.pageWidth=f;this.pageHeight=h;this.resizeCover(f,h,g)},resizeCover:function(f,h,g){this.thicknessWidthArray=g;this.width=2*f+(g[0]+g[1])+2*this.borderWidth;this.height=h+2*this.borderWidth;this.cover.css({width:this.width+"px",height:this.height+"px",left:-(this.borderWidth+g[0])+"px",top:-this.borderWidth+"px"})},getSensitiveIndex:function(){return{min:3,max:totalPageCount-2}},refresh:function(f,h,g){this.refreshBookSpine(h);this.refreshPage(f,g);this.resizeCover(this.pageWidth,this.pageHeight,h)},refreshPage:function(g,l){var k=this.getSensitiveIndex().min,h=this.getSensitiveIndex().max;if(g<=k||g>=h){if(g<=k&&bookConfig.RightToLeft||!bookConfig.RightToLeft&&g>=h){this.rightPage&&this.rightPage.setVisible(!1),(l<h&&bookConfig.RightToLeft||l>k&&!bookConfig.RightToLeft)&&this.leftPage&&this.leftPage.setVisible(!0)}if(g<=k&&!bookConfig.RightToLeft||bookConfig.RightToLeft&&g>=h){this.leftPage&&this.leftPage.setVisible(!1),(l<h&&!bookConfig.RightToLeft||l>k&&bookConfig.RightToLeft)&&this.rightPage&&this.rightPage.setVisible(!0)}this.hideBookSpine()}else{this.showBookSpine(),this.leftPage&&this.leftPage.setVisible(!0),this.rightPage&&this.rightPage.setVisible(!0)}},refreshBookSpine:function(c){this.topSpine.refresh(c);this.bottomSpine.refresh(c)},hideBookSpine:function(){this.topSpine.hide();this.bottomSpine.hide()},showBookSpine:function(){this.topSpine.show();this.bottomSpine.show()},show:function(){this.cover.show()},hide:function(){this.cover.hide()}}),BookSpine=Class({create:function(c){this.parent=c;this.initSpine()},initSpine:function(){this.height=bookConfig.hardCoverBorderWidth;this.bookSpine=$("<div class='bookSpine'></div>");this.bookSpine.css({height:this.height,"background-color":bookConfig.borderColor});this.parent.append(this.bookSpine);this.addShadow()},addShadow:function(){this.leftShadow=$("<div class='left_shadow shadow'></div>");this.rightShadow=$("<div class='right_shadow shadow'></div>");this.bookSpine.append(this.leftShadow);this.bookSpine.append(this.rightShadow)},refresh:function(c){this.onResize(c)},show:function(){this.bookSpine.show()},hide:function(){},setCSSByStyle:function(c){this.bookSpine.css(c)},setCSSByName:function(c){this.bookSpine.attr("class",c);this.bookSpine.addClass("bookSpine")},onResize:function(c){this.width=c[0]+c[1];this.bookSpine.css({width:this.width,"margin-left":-this.width/2+"px"})}}),HardBook=Class({bookType:BookType.normal_book,create:function(c){this._super(c)},initBook:function(){this._super();this.hardCover=new HardCover(this.flipBook)},newPage:function(c){return 1==c||2==c||c==totalPageCount||c==totalPageCount-1?new HardSide(c,"page",BookType.normal_book,this.onBookPageLoaded.bind(this)):new NormalPage(c,"page",!1,BookType.normal_book,this.onBookPageLoaded.bind(this))},followToPoint:function(f,h,g){this._super(f,h,g);this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth())},getDownUpHardPage:function(f,h,g){this.addPageArray([f,h]);g?(this.pageArray[f]&&this.pageArray[f].setLeftOrRight(!0),this.pageArray[h]&&this.pageArray[h].setLeftOrRight(!1),this.pageArray[f]&&this.pageArray[f].setCSSByName("flip-hard-left-side"),this.pageArray[h]&&this.pageArray[h].setCSSByName("flip-hard-right-side")):(this.pageArray[f]&&this.pageArray[f].setLeftOrRight(!1),this.pageArray[h]&&this.pageArray[h].setLeftOrRight(!0),this.pageArray[f]&&this.pageArray[f].setCSSByName("flip-hard-right-side"),this.pageArray[h]&&this.pageArray[h].setCSSByName("flip-hard-left-side"));this.pageArray[h]&&this.pageArray[h].setAttachment(!g);return[this.pageArray[f],this.pageArray[h]]},setAttachmentBeforeFlipTo:function(c){this._super(c);this.hardCover&&this.hardCover.refresh(c,this.getThicknessWidth(),this.currentPageIndex)},afterCurling:function(){this._super();this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},setAttachmentAfterFlipTo:function(c){this._super(c);this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},onResize:function(d,f){this._super(d,f);this.hardCover.onResize(d,f,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},resizeBook:function(d,f){this._super(d,f);this.hardCover.onResize(d,f,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},show:function(){this._super();this.hardCover.show()},hide:function(){this._super();this.hardCover.hide()}}).extend(NormalBook),SingleHardCover=Class({initPage:function(){bookConfig.RightToLeft&&(this.leftPage=new HardSide(this.rightToLeft?bookConfig.totalPageCount:2,"coverPage",BookType.single_book));bookConfig.RightToLeft||(this.rightPage=new HardSide(this.rightToLeft?2:bookConfig.totalPageCount,"coverPage",BookType.single_book));this.leftPage&&this.cover.append(this.leftPage.getSide());this.rightPage&&this.cover.append(this.rightPage.getSide());this.leftPage&&this.leftPage.addAttachment();this.rightPage&&this.rightPage.addAttachment();this.leftPage&&this.leftPage.setLeftOrRight(!0);this.rightPage&&this.rightPage.setLeftOrRight(!1);this.leftPage&&this.leftPage.setCSSByStyle({top:"0",left:"0","margin-top":0,"margin-left":0});this.rightPage&&this.rightPage.setCSSByStyle({top:"0",right:"0","margin-top":0,"margin-right":0})},initBookSpine:function(){this.topSpine=new SingleBookSpine(this.cover);this.bottomSpine=new SingleBookSpine(this.cover);this.topSpine.setCSSByName("top_spine");this.bottomSpine.setCSSByName("botoom_spine")},getSensitiveIndex:function(){return{min:2,max:bookConfig.totalPageCount}},resizeCover:function(f,h,g){this.thicknessWidthArray=g;this.width=f+(g[0]+g[1])+this.borderWidth;this.height=h+2*this.borderWidth;this.cover.css({width:this.width+"px",height:this.height+"px",left:(bookConfig.RightToLeft?-(this.borderWidth+g[0]):0)+"px",top:-this.borderWidth+"px"})}}).extend(HardCover),SingleBookSpine=Class({onResize:function(c){this.width=c[0]+c[1];this.bookSpine.css({width:this.width});bookConfig.RightToLeft?this.bookSpine.css({left:"auto",right:"0"}):this.bookSpine.css({right:"auto",left:"0"})}}).extend(BookSpine),SingleHardBook=Class({bookType:BookType.single_book,create:function(c){this._super(c)},initBook:function(){this._super();this.hardCover=new SingleHardCover(this.flipBook)},newPage:function(c){1==c||c==bookConfig.totalPageCount?(c=new HardSide(c,"page",BookType.single_book,this.onBookPageLoaded.bind(this)),c.setLeftOrRight(bookConfig.RightToLeft)):c=new NormalPage(c,"page",!0,BookType.single_book,this.onBookPageLoaded.bind(this));return c},followToPoint:function(f,h,g){this._super(f,h,g);this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth())},getDownUpHardPage:function(f,h){var g=f;f>h&&(g=h);this.addPageArray([g]);this.addPageBackArray([g]);bookConfig.RightToLeft?(this.pageArray[g]&&this.pageArray[g].setLeftOrRight(!0),this.pageBackArray[g]&&this.pageBackArray[g].setLeftOrRight(!0),this.pageArray[g]&&this.pageArray[g].setCSSByName("flip-hard-left-side"),this.pageBackArray[g]&&this.pageBackArray[g].setCSSByName("flip-hard-right-side")):(this.pageArray[g]&&this.pageArray[g].setLeftOrRight(!1),this.pageBackArray[g]&&this.pageBackArray[g].setLeftOrRight(!1),this.pageArray[g]&&this.pageArray[g].setCSSByName("flip-hard-right-side"),this.pageBackArray[g]&&this.pageBackArray[g].setCSSByName("flip-hard-left-side"));return[this.pageArray[g],this.pageBackArray[g]]},setAttachmentBeforeFlipTo:function(c){this._super(c);this.hardCover&&this.hardCover.refresh(c,this.getThicknessWidth(),this.currentPageIndex)},afterCurling:function(){this._super();this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},onResize:function(d,f){this._super(d,f)},resizeBook:function(d,f){this._super(d,f);this.hardCover.onResize(d,f,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},show:function(){this._super();this.hardCover.show()},hide:function(){this._super();this.hardCover.hide()}}).extend(SingleBook),zoom_icons={moveByPos:"iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKTWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVN3WJP3Fj7f92UPVkLY8LGXbIEAIiOsCMgQWaIQkgBhhBASQMWFiApWFBURnEhVxILVCkidiOKgKLhnQYqIWotVXDjuH9yntX167+3t+9f7vOec5/zOec8PgBESJpHmomoAOVKFPDrYH49PSMTJvYACFUjgBCAQ5svCZwXFAADwA3l4fnSwP/wBr28AAgBw1S4kEsfh/4O6UCZXACCRAOAiEucLAZBSAMguVMgUAMgYALBTs2QKAJQAAGx5fEIiAKoNAOz0ST4FANipk9wXANiiHKkIAI0BAJkoRyQCQLsAYFWBUiwCwMIAoKxAIi4EwK4BgFm2MkcCgL0FAHaOWJAPQGAAgJlCLMwAIDgCAEMeE80DIEwDoDDSv+CpX3CFuEgBAMDLlc2XS9IzFLiV0Bp38vDg4iHiwmyxQmEXKRBmCeQinJebIxNI5wNMzgwAABr50cH+OD+Q5+bk4eZm52zv9MWi/mvwbyI+IfHf/ryMAgQAEE7P79pf5eXWA3DHAbB1v2upWwDaVgBo3/ldM9sJoFoK0Hr5i3k4/EAenqFQyDwdHAoLC+0lYqG9MOOLPv8z4W/gi372/EAe/tt68ABxmkCZrcCjg/1xYW52rlKO58sEQjFu9+cj/seFf/2OKdHiNLFcLBWK8ViJuFAiTcd5uVKRRCHJleIS6X8y8R+W/QmTdw0ArIZPwE62B7XLbMB+7gECiw5Y0nYAQH7zLYwaC5EAEGc0Mnn3AACTv/mPQCsBAM2XpOMAALzoGFyolBdMxggAAESggSqwQQcMwRSswA6cwR28wBcCYQZEQAwkwDwQQgbkgBwKoRiWQRlUwDrYBLWwAxqgEZrhELTBMTgN5+ASXIHrcBcGYBiewhi8hgkEQcgIE2EhOogRYo7YIs4IF5mOBCJhSDSSgKQg6YgUUSLFyHKkAqlCapFdSCPyLXIUOY1cQPqQ28ggMor8irxHMZSBslED1AJ1QLmoHxqKxqBz0XQ0D12AlqJr0Rq0Hj2AtqKn0UvodXQAfYqOY4DRMQ5mjNlhXIyHRWCJWBomxxZj5Vg1Vo81Yx1YN3YVG8CeYe8IJAKLgBPsCF6EEMJsgpCQR1hMWEOoJewjtBK6CFcJg4Qxwicik6hPtCV6EvnEeGI6sZBYRqwm7iEeIZ4lXicOE1+TSCQOyZLkTgohJZAySQtJa0jbSC2kU6Q+0hBpnEwm65Btyd7kCLKArCCXkbeQD5BPkvvJw+S3FDrFiOJMCaIkUqSUEko1ZT/lBKWfMkKZoKpRzame1AiqiDqfWkltoHZQL1OHqRM0dZolzZsWQ8ukLaPV0JppZ2n3aC/pdLoJ3YMeRZfQl9Jr6Afp5+mD9HcMDYYNg8dIYigZaxl7GacYtxkvmUymBdOXmchUMNcyG5lnmA+Yb1VYKvYqfBWRyhKVOpVWlX6V56pUVXNVP9V5qgtUq1UPq15WfaZGVbNQ46kJ1Bar1akdVbupNq7OUndSj1DPUV+jvl/9gvpjDbKGhUaghkijVGO3xhmNIRbGMmXxWELWclYD6yxrmE1iW7L57Ex2Bfsbdi97TFNDc6pmrGaRZp3mcc0BDsax4PA52ZxKziHODc57LQMtPy2x1mqtZq1+rTfaetq+2mLtcu0W7eva73VwnUCdLJ31Om0693UJuja6UbqFutt1z+o+02PreekJ9cr1Dund0Uf1bfSj9Rfq79bv0R83MDQINpAZbDE4Y/DMkGPoa5hpuNHwhOGoEctoupHEaKPRSaMnuCbuh2fjNXgXPmasbxxirDTeZdxrPGFiaTLbpMSkxeS+Kc2Ua5pmutG003TMzMgs3KzYrMnsjjnVnGueYb7ZvNv8jYWlRZzFSos2i8eW2pZ8ywWWTZb3rJhWPlZ5VvVW16xJ1lzrLOtt1ldsUBtXmwybOpvLtqitm63Edptt3xTiFI8p0in1U27aMez87ArsmuwG7Tn2YfYl9m32zx3MHBId1jt0O3xydHXMdmxwvOuk4TTDqcSpw+lXZxtnoXOd8zUXpkuQyxKXdpcXU22niqdun3rLleUa7rrStdP1o5u7m9yt2W3U3cw9xX2r+00umxvJXcM970H08PdY4nHM452nm6fC85DnL152Xlle+70eT7OcJp7WMG3I28Rb4L3Le2A6Pj1l+s7pAz7GPgKfep+Hvqa+It89viN+1n6Zfgf8nvs7+sv9j/i/4XnyFvFOBWABwQHlAb2BGoGzA2sDHwSZBKUHNQWNBbsGLww+FUIMCQ1ZH3KTb8AX8hv5YzPcZyya0RXKCJ0VWhv6MMwmTB7WEY6GzwjfEH5vpvlM6cy2CIjgR2yIuB9pGZkX+X0UKSoyqi7qUbRTdHF09yzWrORZ+2e9jvGPqYy5O9tqtnJ2Z6xqbFJsY+ybuIC4qriBeIf4RfGXEnQTJAntieTE2MQ9ieNzAudsmjOc5JpUlnRjruXcorkX5unOy553PFk1WZB8OIWYEpeyP+WDIEJQLxhP5aduTR0T8oSbhU9FvqKNolGxt7hKPJLmnVaV9jjdO31D+miGT0Z1xjMJT1IreZEZkrkj801WRNberM/ZcdktOZSclJyjUg1plrQr1zC3KLdPZisrkw3keeZtyhuTh8r35CP5c/PbFWyFTNGjtFKuUA4WTC+oK3hbGFt4uEi9SFrUM99m/ur5IwuCFny9kLBQuLCz2Lh4WfHgIr9FuxYji1MXdy4xXVK6ZHhp8NJ9y2jLspb9UOJYUlXyannc8o5Sg9KlpUMrglc0lamUycturvRauWMVYZVkVe9ql9VbVn8qF5VfrHCsqK74sEa45uJXTl/VfPV5bdra3kq3yu3rSOuk626s91m/r0q9akHV0IbwDa0b8Y3lG19tSt50oXpq9Y7NtM3KzQM1YTXtW8y2rNvyoTaj9nqdf13LVv2tq7e+2Sba1r/dd3vzDoMdFTve75TsvLUreFdrvUV99W7S7oLdjxpiG7q/5n7duEd3T8Wej3ulewf2Re/ranRvbNyvv7+yCW1SNo0eSDpw5ZuAb9qb7Zp3tXBaKg7CQeXBJ9+mfHvjUOihzsPcw83fmX+39QjrSHkr0jq/dawto22gPaG97+iMo50dXh1Hvrf/fu8x42N1xzWPV56gnSg98fnkgpPjp2Snnp1OPz3Umdx590z8mWtdUV29Z0PPnj8XdO5Mt1/3yfPe549d8Lxw9CL3Ytslt0utPa49R35w/eFIr1tv62X3y+1XPK509E3rO9Hv03/6asDVc9f41y5dn3m978bsG7duJt0cuCW69fh29u0XdwruTNxdeo94r/y+2v3qB/oP6n+0/rFlwG3g+GDAYM/DWQ/vDgmHnv6U/9OH4dJHzEfVI0YjjY+dHx8bDRq98mTOk+GnsqcTz8p+Vv9563Or59/94vtLz1j82PAL+YvPv655qfNy76uprzrHI8cfvM55PfGm/K3O233vuO+638e9H5ko/ED+UPPR+mPHp9BP9z7nfP78L/eE8/sl0p8zAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAABoSURBVHjarJRRDsAgCEML8f5Xfvsezqmk/EjANC1FA5AjUqZISTgZ4ZSGc0Y4h43TNZz2c9Pb7RE/NW4XsoJFOSVJY3FpBRir+rgAqexeeR6AVDmfeR6A7BhH9/W3XdOJa93/aJL5DADgpBckJE4YCgAAAABJRU5ErkJggg==",moveByDrag:"iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKTWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVN3WJP3Fj7f92UPVkLY8LGXbIEAIiOsCMgQWaIQkgBhhBASQMWFiApWFBURnEhVxILVCkidiOKgKLhnQYqIWotVXDjuH9yntX167+3t+9f7vOec5/zOec8PgBESJpHmomoAOVKFPDrYH49PSMTJvYACFUjgBCAQ5svCZwXFAADwA3l4fnSwP/wBr28AAgBw1S4kEsfh/4O6UCZXACCRAOAiEucLAZBSAMguVMgUAMgYALBTs2QKAJQAAGx5fEIiAKoNAOz0ST4FANipk9wXANiiHKkIAI0BAJkoRyQCQLsAYFWBUiwCwMIAoKxAIi4EwK4BgFm2MkcCgL0FAHaOWJAPQGAAgJlCLMwAIDgCAEMeE80DIEwDoDDSv+CpX3CFuEgBAMDLlc2XS9IzFLiV0Bp38vDg4iHiwmyxQmEXKRBmCeQinJebIxNI5wNMzgwAABr50cH+OD+Q5+bk4eZm52zv9MWi/mvwbyI+IfHf/ryMAgQAEE7P79pf5eXWA3DHAbB1v2upWwDaVgBo3/ldM9sJoFoK0Hr5i3k4/EAenqFQyDwdHAoLC+0lYqG9MOOLPv8z4W/gi372/EAe/tt68ABxmkCZrcCjg/1xYW52rlKO58sEQjFu9+cj/seFf/2OKdHiNLFcLBWK8ViJuFAiTcd5uVKRRCHJleIS6X8y8R+W/QmTdw0ArIZPwE62B7XLbMB+7gECiw5Y0nYAQH7zLYwaC5EAEGc0Mnn3AACTv/mPQCsBAM2XpOMAALzoGFyolBdMxggAAESggSqwQQcMwRSswA6cwR28wBcCYQZEQAwkwDwQQgbkgBwKoRiWQRlUwDrYBLWwAxqgEZrhELTBMTgN5+ASXIHrcBcGYBiewhi8hgkEQcgIE2EhOogRYo7YIs4IF5mOBCJhSDSSgKQg6YgUUSLFyHKkAqlCapFdSCPyLXIUOY1cQPqQ28ggMor8irxHMZSBslED1AJ1QLmoHxqKxqBz0XQ0D12AlqJr0Rq0Hj2AtqKn0UvodXQAfYqOY4DRMQ5mjNlhXIyHRWCJWBomxxZj5Vg1Vo81Yx1YN3YVG8CeYe8IJAKLgBPsCF6EEMJsgpCQR1hMWEOoJewjtBK6CFcJg4Qxwicik6hPtCV6EvnEeGI6sZBYRqwm7iEeIZ4lXicOE1+TSCQOyZLkTgohJZAySQtJa0jbSC2kU6Q+0hBpnEwm65Btyd7kCLKArCCXkbeQD5BPkvvJw+S3FDrFiOJMCaIkUqSUEko1ZT/lBKWfMkKZoKpRzame1AiqiDqfWkltoHZQL1OHqRM0dZolzZsWQ8ukLaPV0JppZ2n3aC/pdLoJ3YMeRZfQl9Jr6Afp5+mD9HcMDYYNg8dIYigZaxl7GacYtxkvmUymBdOXmchUMNcyG5lnmA+Yb1VYKvYqfBWRyhKVOpVWlX6V56pUVXNVP9V5qgtUq1UPq15WfaZGVbNQ46kJ1Bar1akdVbupNq7OUndSj1DPUV+jvl/9gvpjDbKGhUaghkijVGO3xhmNIRbGMmXxWELWclYD6yxrmE1iW7L57Ex2Bfsbdi97TFNDc6pmrGaRZp3mcc0BDsax4PA52ZxKziHODc57LQMtPy2x1mqtZq1+rTfaetq+2mLtcu0W7eva73VwnUCdLJ31Om0693UJuja6UbqFutt1z+o+02PreekJ9cr1Dund0Uf1bfSj9Rfq79bv0R83MDQINpAZbDE4Y/DMkGPoa5hpuNHwhOGoEctoupHEaKPRSaMnuCbuh2fjNXgXPmasbxxirDTeZdxrPGFiaTLbpMSkxeS+Kc2Ua5pmutG003TMzMgs3KzYrMnsjjnVnGueYb7ZvNv8jYWlRZzFSos2i8eW2pZ8ywWWTZb3rJhWPlZ5VvVW16xJ1lzrLOtt1ldsUBtXmwybOpvLtqitm63Edptt3xTiFI8p0in1U27aMez87ArsmuwG7Tn2YfYl9m32zx3MHBId1jt0O3xydHXMdmxwvOuk4TTDqcSpw+lXZxtnoXOd8zUXpkuQyxKXdpcXU22niqdun3rLleUa7rrStdP1o5u7m9yt2W3U3cw9xX2r+00umxvJXcM970H08PdY4nHM452nm6fC85DnL152Xlle+70eT7OcJp7WMG3I28Rb4L3Le2A6Pj1l+s7pAz7GPgKfep+Hvqa+It89viN+1n6Zfgf8nvs7+sv9j/i/4XnyFvFOBWABwQHlAb2BGoGzA2sDHwSZBKUHNQWNBbsGLww+FUIMCQ1ZH3KTb8AX8hv5YzPcZyya0RXKCJ0VWhv6MMwmTB7WEY6GzwjfEH5vpvlM6cy2CIjgR2yIuB9pGZkX+X0UKSoyqi7qUbRTdHF09yzWrORZ+2e9jvGPqYy5O9tqtnJ2Z6xqbFJsY+ybuIC4qriBeIf4RfGXEnQTJAntieTE2MQ9ieNzAudsmjOc5JpUlnRjruXcorkX5unOy553PFk1WZB8OIWYEpeyP+WDIEJQLxhP5aduTR0T8oSbhU9FvqKNolGxt7hKPJLmnVaV9jjdO31D+miGT0Z1xjMJT1IreZEZkrkj801WRNberM/ZcdktOZSclJyjUg1plrQr1zC3KLdPZisrkw3keeZtyhuTh8r35CP5c/PbFWyFTNGjtFKuUA4WTC+oK3hbGFt4uEi9SFrUM99m/ur5IwuCFny9kLBQuLCz2Lh4WfHgIr9FuxYji1MXdy4xXVK6ZHhp8NJ9y2jLspb9UOJYUlXyannc8o5Sg9KlpUMrglc0lamUycturvRauWMVYZVkVe9ql9VbVn8qF5VfrHCsqK74sEa45uJXTl/VfPV5bdra3kq3yu3rSOuk626s91m/r0q9akHV0IbwDa0b8Y3lG19tSt50oXpq9Y7NtM3KzQM1YTXtW8y2rNvyoTaj9nqdf13LVv2tq7e+2Sba1r/dd3vzDoMdFTve75TsvLUreFdrvUV99W7S7oLdjxpiG7q/5n7duEd3T8Wej3ulewf2Re/ranRvbNyvv7+yCW1SNo0eSDpw5ZuAb9qb7Zp3tXBaKg7CQeXBJ9+mfHvjUOihzsPcw83fmX+39QjrSHkr0jq/dawto22gPaG97+iMo50dXh1Hvrf/fu8x42N1xzWPV56gnSg98fnkgpPjp2Snnp1OPz3Umdx590z8mWtdUV29Z0PPnj8XdO5Mt1/3yfPe549d8Lxw9CL3Ytslt0utPa49R35w/eFIr1tv62X3y+1XPK509E3rO9Hv03/6asDVc9f41y5dn3m978bsG7duJt0cuCW69fh29u0XdwruTNxdeo94r/y+2v3qB/oP6n+0/rFlwG3g+GDAYM/DWQ/vDgmHnv6U/9OH4dJHzEfVI0YjjY+dHx8bDRq98mTOk+GnsqcTz8p+Vv9563Or59/94vtLz1j82PAL+YvPv655qfNy76uprzrHI8cfvM55PfGm/K3O233vuO+638e9H5ko/ED+UPPR+mPHp9BP9z7nfP78L/eE8/sl0p8zAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAACzSURBVHjaxFTLDsMgDLMpqvr/n0sB7wKIMcZDq7ScQHIcOwlQEp4Ig4dihUjee20TxRgFoCRKgrW2XJ1zXVJ2eqQQAo7jYL5nbHOeWuN93zXB0PawR9d1ISv13k9JvlnrAlvVrU3TJE7txBi7RUwNSDaGZCQRQkDb9NaaUkUYs7Srhch+FqRI/r7ZJJHGv6xmNDXtEpkRSBKccwBQVKbC3Hm0lITzPN+aX00Mqwv5n//oNQCKCmKo6/HSRQAAAABJRU5ErkJggg==",ZU:"iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAQAAAD8x0bcAAAACXBIWXMAAAsTAAALEwEAmpwYAAADGWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjaY2BgnuDo4uTKJMDAUFBUUuQe5BgZERmlwH6egY2BmYGBgYGBITG5uMAxIMCHgYGBIS8/L5UBA3y7xsDIwMDAcFnX0cXJlYE0wJpcUFTCwMBwgIGBwSgltTiZgYHhCwMDQ3p5SUEJAwNjDAMDg0hSdkEJAwNjAQMDg0h2SJAzAwNjCwMDE09JakUJAwMDg3N+QWVRZnpGiYKhpaWlgmNKflKqQnBlcUlqbrGCZ15yflFBflFiSWoKAwMD1A4GBgYGXpf8EgX3xMw8BUNTVQYqg4jIKAX08EGIIUByaVEZhMXIwMDAIMCgxeDHUMmwiuEBozRjFOM8xqdMhkwNTJeYNZgbme+y2LDMY2VmzWa9yubEtoldhX0mhwBHJycrZzMXM1cbNzf3RB4pnqW8xryH+IL5nvFXCwgJrBZ0E3wk1CisKHxYJF2UV3SrWJw4p/hWiRRJYcmjUhXSutJPZObIhsoJyp2V71HwUeRVvKA0RTlKRUnltepWtUZ1Pw1Zjbea+7QmaqfqWOsK6b7SO6I/36DGMMrI0ljS+LfJPdPDZivM+y0qLBOtfKwtbFRtRexY7L7aP3e47XjB6ZjzXpetruvdVrov9VjkudBrgfdCn8W+y/xW+a8P2Bq4N+hY8PmQW6HPwr5EMEUKRilFG8e4xUbF5cW3JMxO3Jx0Nvl5KlOaXLpNRlRmVdas7D059/KY8tULfAqLi2YXHy55WyZR7lJRWDmv6mz131q9uvj6SQ3HGn83G7Skt85ru94h2Ond1d59uJehz76/bsK+if8nO05pnXpiOu+M4JmzZj2aozW3ZN6+BVwLwxYtXvxxqcOyCcsfrjRe1br65lrddU3rb2402NSx+cFWq21Tt3/Y6btr1R6Oven7jh9QP9h56PURv6Obj4ufqD355LT3mS3nZM+3X/h0Ke7yqasW15bdEL3ZeuvrnfS7N+/7PDjwyPTx6qeKz2a+EHzZ9Zr5Td3bn+9LP3z6VPD53de8b+9+5P/88Lv4z7d/Vf//AwAqvx2K829RWwAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAAL0lEQVR42mL8z0AYMDEMDUX/Gf7TyjrG/6gWocmSbRLCPEZ6OHwIRTAAAAD//wMAHjoIG4Kx7iYAAAAASUVORK5CYII=",PB:"iVBORw0KGgoAAAANSUhEUgAAAHwAAAAICAYAAAA7rZtpAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKTWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVN3WJP3Fj7f92UPVkLY8LGXbIEAIiOsCMgQWaIQkgBhhBASQMWFiApWFBURnEhVxILVCkidiOKgKLhnQYqIWotVXDjuH9yntX167+3t+9f7vOec5/zOec8PgBESJpHmomoAOVKFPDrYH49PSMTJvYACFUjgBCAQ5svCZwXFAADwA3l4fnSwP/wBr28AAgBw1S4kEsfh/4O6UCZXACCRAOAiEucLAZBSAMguVMgUAMgYALBTs2QKAJQAAGx5fEIiAKoNAOz0ST4FANipk9wXANiiHKkIAI0BAJkoRyQCQLsAYFWBUiwCwMIAoKxAIi4EwK4BgFm2MkcCgL0FAHaOWJAPQGAAgJlCLMwAIDgCAEMeE80DIEwDoDDSv+CpX3CFuEgBAMDLlc2XS9IzFLiV0Bp38vDg4iHiwmyxQmEXKRBmCeQinJebIxNI5wNMzgwAABr50cH+OD+Q5+bk4eZm52zv9MWi/mvwbyI+IfHf/ryMAgQAEE7P79pf5eXWA3DHAbB1v2upWwDaVgBo3/ldM9sJoFoK0Hr5i3k4/EAenqFQyDwdHAoLC+0lYqG9MOOLPv8z4W/gi372/EAe/tt68ABxmkCZrcCjg/1xYW52rlKO58sEQjFu9+cj/seFf/2OKdHiNLFcLBWK8ViJuFAiTcd5uVKRRCHJleIS6X8y8R+W/QmTdw0ArIZPwE62B7XLbMB+7gECiw5Y0nYAQH7zLYwaC5EAEGc0Mnn3AACTv/mPQCsBAM2XpOMAALzoGFyolBdMxggAAESggSqwQQcMwRSswA6cwR28wBcCYQZEQAwkwDwQQgbkgBwKoRiWQRlUwDrYBLWwAxqgEZrhELTBMTgN5+ASXIHrcBcGYBiewhi8hgkEQcgIE2EhOogRYo7YIs4IF5mOBCJhSDSSgKQg6YgUUSLFyHKkAqlCapFdSCPyLXIUOY1cQPqQ28ggMor8irxHMZSBslED1AJ1QLmoHxqKxqBz0XQ0D12AlqJr0Rq0Hj2AtqKn0UvodXQAfYqOY4DRMQ5mjNlhXIyHRWCJWBomxxZj5Vg1Vo81Yx1YN3YVG8CeYe8IJAKLgBPsCF6EEMJsgpCQR1hMWEOoJewjtBK6CFcJg4Qxwicik6hPtCV6EvnEeGI6sZBYRqwm7iEeIZ4lXicOE1+TSCQOyZLkTgohJZAySQtJa0jbSC2kU6Q+0hBpnEwm65Btyd7kCLKArCCXkbeQD5BPkvvJw+S3FDrFiOJMCaIkUqSUEko1ZT/lBKWfMkKZoKpRzame1AiqiDqfWkltoHZQL1OHqRM0dZolzZsWQ8ukLaPV0JppZ2n3aC/pdLoJ3YMeRZfQl9Jr6Afp5+mD9HcMDYYNg8dIYigZaxl7GacYtxkvmUymBdOXmchUMNcyG5lnmA+Yb1VYKvYqfBWRyhKVOpVWlX6V56pUVXNVP9V5qgtUq1UPq15WfaZGVbNQ46kJ1Bar1akdVbupNq7OUndSj1DPUV+jvl/9gvpjDbKGhUaghkijVGO3xhmNIRbGMmXxWELWclYD6yxrmE1iW7L57Ex2Bfsbdi97TFNDc6pmrGaRZp3mcc0BDsax4PA52ZxKziHODc57LQMtPy2x1mqtZq1+rTfaetq+2mLtcu0W7eva73VwnUCdLJ31Om0693UJuja6UbqFutt1z+o+02PreekJ9cr1Dund0Uf1bfSj9Rfq79bv0R83MDQINpAZbDE4Y/DMkGPoa5hpuNHwhOGoEctoupHEaKPRSaMnuCbuh2fjNXgXPmasbxxirDTeZdxrPGFiaTLbpMSkxeS+Kc2Ua5pmutG003TMzMgs3KzYrMnsjjnVnGueYb7ZvNv8jYWlRZzFSos2i8eW2pZ8ywWWTZb3rJhWPlZ5VvVW16xJ1lzrLOtt1ldsUBtXmwybOpvLtqitm63Edptt3xTiFI8p0in1U27aMez87ArsmuwG7Tn2YfYl9m32zx3MHBId1jt0O3xydHXMdmxwvOuk4TTDqcSpw+lXZxtnoXOd8zUXpkuQyxKXdpcXU22niqdun3rLleUa7rrStdP1o5u7m9yt2W3U3cw9xX2r+00umxvJXcM970H08PdY4nHM452nm6fC85DnL152Xlle+70eT7OcJp7WMG3I28Rb4L3Le2A6Pj1l+s7pAz7GPgKfep+Hvqa+It89viN+1n6Zfgf8nvs7+sv9j/i/4XnyFvFOBWABwQHlAb2BGoGzA2sDHwSZBKUHNQWNBbsGLww+FUIMCQ1ZH3KTb8AX8hv5YzPcZyya0RXKCJ0VWhv6MMwmTB7WEY6GzwjfEH5vpvlM6cy2CIjgR2yIuB9pGZkX+X0UKSoyqi7qUbRTdHF09yzWrORZ+2e9jvGPqYy5O9tqtnJ2Z6xqbFJsY+ybuIC4qriBeIf4RfGXEnQTJAntieTE2MQ9ieNzAudsmjOc5JpUlnRjruXcorkX5unOy553PFk1WZB8OIWYEpeyP+WDIEJQLxhP5aduTR0T8oSbhU9FvqKNolGxt7hKPJLmnVaV9jjdO31D+miGT0Z1xjMJT1IreZEZkrkj801WRNberM/ZcdktOZSclJyjUg1plrQr1zC3KLdPZisrkw3keeZtyhuTh8r35CP5c/PbFWyFTNGjtFKuUA4WTC+oK3hbGFt4uEi9SFrUM99m/ur5IwuCFny9kLBQuLCz2Lh4WfHgIr9FuxYji1MXdy4xXVK6ZHhp8NJ9y2jLspb9UOJYUlXyannc8o5Sg9KlpUMrglc0lamUycturvRauWMVYZVkVe9ql9VbVn8qF5VfrHCsqK74sEa45uJXTl/VfPV5bdra3kq3yu3rSOuk626s91m/r0q9akHV0IbwDa0b8Y3lG19tSt50oXpq9Y7NtM3KzQM1YTXtW8y2rNvyoTaj9nqdf13LVv2tq7e+2Sba1r/dd3vzDoMdFTve75TsvLUreFdrvUV99W7S7oLdjxpiG7q/5n7duEd3T8Wej3ulewf2Re/ranRvbNyvv7+yCW1SNo0eSDpw5ZuAb9qb7Zp3tXBaKg7CQeXBJ9+mfHvjUOihzsPcw83fmX+39QjrSHkr0jq/dawto22gPaG97+iMo50dXh1Hvrf/fu8x42N1xzWPV56gnSg98fnkgpPjp2Snnp1OPz3Umdx590z8mWtdUV29Z0PPnj8XdO5Mt1/3yfPe549d8Lxw9CL3Ytslt0utPa49R35w/eFIr1tv62X3y+1XPK509E3rO9Hv03/6asDVc9f41y5dn3m978bsG7duJt0cuCW69fh29u0XdwruTNxdeo94r/y+2v3qB/oP6n+0/rFlwG3g+GDAYM/DWQ/vDgmHnv6U/9OH4dJHzEfVI0YjjY+dHx8bDRq98mTOk+GnsqcTz8p+Vv9563Or59/94vtLz1j82PAL+YvPv655qfNy76uprzrHI8cfvM55PfGm/K3O233vuO+638e9H5ko/ED+UPPR+mPHp9BP9z7nfP78L/eE8/sl0p8zAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAACQSURBVHja7NWxCQJREEXRs2K4INiAiQVYg6mpsZ0tlmBkAdYgGJmYCYKwYP5NduHzSxjmRsML32VmulKKihW2kig8MdbBspqPOKPPnsLwwwmXOeimDV/jlbLDSt/gC4sp3KXssPSTX7XwT/YSmncr/I4hewnJgEf7w2cO2Od5D8GIG6512ApPgvMHAAD//wMAcr8cMeD+ziUAAAAASUVORK5CYII=",ZD:"iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAQAAAD8x0bcAAAACXBIWXMAAAsTAAALEwEAmpwYAAADGWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjaY2BgnuDo4uTKJMDAUFBUUuQe5BgZERmlwH6egY2BmYGBgYGBITG5uMAxIMCHgYGBIS8/L5UBA3y7xsDIwMDAcFnX0cXJlYE0wJpcUFTCwMBwgIGBwSgltTiZgYHhCwMDQ3p5SUEJAwNjDAMDg0hSdkEJAwNjAQMDg0h2SJAzAwNjCwMDE09JakUJAwMDg3N+QWVRZnpGiYKhpaWlgmNKflKqQnBlcUlqbrGCZ15yflFBflFiSWoKAwMD1A4GBgYGXpf8EgX3xMw8BUNTVQYqg4jIKAX08EGIIUByaVEZhMXIwMDAIMCgxeDHUMmwiuEBozRjFOM8xqdMhkwNTJeYNZgbme+y2LDMY2VmzWa9yubEtoldhX0mhwBHJycrZzMXM1cbNzf3RB4pnqW8xryH+IL5nvFXCwgJrBZ0E3wk1CisKHxYJF2UV3SrWJw4p/hWiRRJYcmjUhXSutJPZObIhsoJyp2V71HwUeRVvKA0RTlKRUnltepWtUZ1Pw1Zjbea+7QmaqfqWOsK6b7SO6I/36DGMMrI0ljS+LfJPdPDZivM+y0qLBOtfKwtbFRtRexY7L7aP3e47XjB6ZjzXpetruvdVrov9VjkudBrgfdCn8W+y/xW+a8P2Bq4N+hY8PmQW6HPwr5EMEUKRilFG8e4xUbF5cW3JMxO3Jx0Nvl5KlOaXLpNRlRmVdas7D059/KY8tULfAqLi2YXHy55WyZR7lJRWDmv6mz131q9uvj6SQ3HGn83G7Skt85ru94h2Ond1d59uJehz76/bsK+if8nO05pnXpiOu+M4JmzZj2aozW3ZN6+BVwLwxYtXvxxqcOyCcsfrjRe1br65lrddU3rb2402NSx+cFWq21Tt3/Y6btr1R6Oven7jh9QP9h56PURv6Obj4ufqD355LT3mS3nZM+3X/h0Ke7yqasW15bdEL3ZeuvrnfS7N+/7PDjwyPTx6qeKz2a+EHzZ9Zr5Td3bn+9LP3z6VPD53de8b+9+5P/88Lv4z7d/Vf//AwAqvx2K829RWwAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAAJklEQVR42mL8z0AYMDGMeEUsKDz0QGMkwSTG0RAnShEAAAD//wMAU6UDIxn1UhsAAAAASUVORK5CYII=",ZO:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKTWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVN3WJP3Fj7f92UPVkLY8LGXbIEAIiOsCMgQWaIQkgBhhBASQMWFiApWFBURnEhVxILVCkidiOKgKLhnQYqIWotVXDjuH9yntX167+3t+9f7vOec5/zOec8PgBESJpHmomoAOVKFPDrYH49PSMTJvYACFUjgBCAQ5svCZwXFAADwA3l4fnSwP/wBr28AAgBw1S4kEsfh/4O6UCZXACCRAOAiEucLAZBSAMguVMgUAMgYALBTs2QKAJQAAGx5fEIiAKoNAOz0ST4FANipk9wXANiiHKkIAI0BAJkoRyQCQLsAYFWBUiwCwMIAoKxAIi4EwK4BgFm2MkcCgL0FAHaOWJAPQGAAgJlCLMwAIDgCAEMeE80DIEwDoDDSv+CpX3CFuEgBAMDLlc2XS9IzFLiV0Bp38vDg4iHiwmyxQmEXKRBmCeQinJebIxNI5wNMzgwAABr50cH+OD+Q5+bk4eZm52zv9MWi/mvwbyI+IfHf/ryMAgQAEE7P79pf5eXWA3DHAbB1v2upWwDaVgBo3/ldM9sJoFoK0Hr5i3k4/EAenqFQyDwdHAoLC+0lYqG9MOOLPv8z4W/gi372/EAe/tt68ABxmkCZrcCjg/1xYW52rlKO58sEQjFu9+cj/seFf/2OKdHiNLFcLBWK8ViJuFAiTcd5uVKRRCHJleIS6X8y8R+W/QmTdw0ArIZPwE62B7XLbMB+7gECiw5Y0nYAQH7zLYwaC5EAEGc0Mnn3AACTv/mPQCsBAM2XpOMAALzoGFyolBdMxggAAESggSqwQQcMwRSswA6cwR28wBcCYQZEQAwkwDwQQgbkgBwKoRiWQRlUwDrYBLWwAxqgEZrhELTBMTgN5+ASXIHrcBcGYBiewhi8hgkEQcgIE2EhOogRYo7YIs4IF5mOBCJhSDSSgKQg6YgUUSLFyHKkAqlCapFdSCPyLXIUOY1cQPqQ28ggMor8irxHMZSBslED1AJ1QLmoHxqKxqBz0XQ0D12AlqJr0Rq0Hj2AtqKn0UvodXQAfYqOY4DRMQ5mjNlhXIyHRWCJWBomxxZj5Vg1Vo81Yx1YN3YVG8CeYe8IJAKLgBPsCF6EEMJsgpCQR1hMWEOoJewjtBK6CFcJg4Qxwicik6hPtCV6EvnEeGI6sZBYRqwm7iEeIZ4lXicOE1+TSCQOyZLkTgohJZAySQtJa0jbSC2kU6Q+0hBpnEwm65Btyd7kCLKArCCXkbeQD5BPkvvJw+S3FDrFiOJMCaIkUqSUEko1ZT/lBKWfMkKZoKpRzame1AiqiDqfWkltoHZQL1OHqRM0dZolzZsWQ8ukLaPV0JppZ2n3aC/pdLoJ3YMeRZfQl9Jr6Afp5+mD9HcMDYYNg8dIYigZaxl7GacYtxkvmUymBdOXmchUMNcyG5lnmA+Yb1VYKvYqfBWRyhKVOpVWlX6V56pUVXNVP9V5qgtUq1UPq15WfaZGVbNQ46kJ1Bar1akdVbupNq7OUndSj1DPUV+jvl/9gvpjDbKGhUaghkijVGO3xhmNIRbGMmXxWELWclYD6yxrmE1iW7L57Ex2Bfsbdi97TFNDc6pmrGaRZp3mcc0BDsax4PA52ZxKziHODc57LQMtPy2x1mqtZq1+rTfaetq+2mLtcu0W7eva73VwnUCdLJ31Om0693UJuja6UbqFutt1z+o+02PreekJ9cr1Dund0Uf1bfSj9Rfq79bv0R83MDQINpAZbDE4Y/DMkGPoa5hpuNHwhOGoEctoupHEaKPRSaMnuCbuh2fjNXgXPmasbxxirDTeZdxrPGFiaTLbpMSkxeS+Kc2Ua5pmutG003TMzMgs3KzYrMnsjjnVnGueYb7ZvNv8jYWlRZzFSos2i8eW2pZ8ywWWTZb3rJhWPlZ5VvVW16xJ1lzrLOtt1ldsUBtXmwybOpvLtqitm63Edptt3xTiFI8p0in1U27aMez87ArsmuwG7Tn2YfYl9m32zx3MHBId1jt0O3xydHXMdmxwvOuk4TTDqcSpw+lXZxtnoXOd8zUXpkuQyxKXdpcXU22niqdun3rLleUa7rrStdP1o5u7m9yt2W3U3cw9xX2r+00umxvJXcM970H08PdY4nHM452nm6fC85DnL152Xlle+70eT7OcJp7WMG3I28Rb4L3Le2A6Pj1l+s7pAz7GPgKfep+Hvqa+It89viN+1n6Zfgf8nvs7+sv9j/i/4XnyFvFOBWABwQHlAb2BGoGzA2sDHwSZBKUHNQWNBbsGLww+FUIMCQ1ZH3KTb8AX8hv5YzPcZyya0RXKCJ0VWhv6MMwmTB7WEY6GzwjfEH5vpvlM6cy2CIjgR2yIuB9pGZkX+X0UKSoyqi7qUbRTdHF09yzWrORZ+2e9jvGPqYy5O9tqtnJ2Z6xqbFJsY+ybuIC4qriBeIf4RfGXEnQTJAntieTE2MQ9ieNzAudsmjOc5JpUlnRjruXcorkX5unOy553PFk1WZB8OIWYEpeyP+WDIEJQLxhP5aduTR0T8oSbhU9FvqKNolGxt7hKPJLmnVaV9jjdO31D+miGT0Z1xjMJT1IreZEZkrkj801WRNberM/ZcdktOZSclJyjUg1plrQr1zC3KLdPZisrkw3keeZtyhuTh8r35CP5c/PbFWyFTNGjtFKuUA4WTC+oK3hbGFt4uEi9SFrUM99m/ur5IwuCFny9kLBQuLCz2Lh4WfHgIr9FuxYji1MXdy4xXVK6ZHhp8NJ9y2jLspb9UOJYUlXyannc8o5Sg9KlpUMrglc0lamUycturvRauWMVYZVkVe9ql9VbVn8qF5VfrHCsqK74sEa45uJXTl/VfPV5bdra3kq3yu3rSOuk626s91m/r0q9akHV0IbwDa0b8Y3lG19tSt50oXpq9Y7NtM3KzQM1YTXtW8y2rNvyoTaj9nqdf13LVv2tq7e+2Sba1r/dd3vzDoMdFTve75TsvLUreFdrvUV99W7S7oLdjxpiG7q/5n7duEd3T8Wej3ulewf2Re/ranRvbNyvv7+yCW1SNo0eSDpw5ZuAb9qb7Zp3tXBaKg7CQeXBJ9+mfHvjUOihzsPcw83fmX+39QjrSHkr0jq/dawto22gPaG97+iMo50dXh1Hvrf/fu8x42N1xzWPV56gnSg98fnkgpPjp2Snnp1OPz3Umdx590z8mWtdUV29Z0PPnj8XdO5Mt1/3yfPe549d8Lxw9CL3Ytslt0utPa49R35w/eFIr1tv62X3y+1XPK509E3rO9Hv03/6asDVc9f41y5dn3m978bsG7duJt0cuCW69fh29u0XdwruTNxdeo94r/y+2v3qB/oP6n+0/rFlwG3g+GDAYM/DWQ/vDgmHnv6U/9OH4dJHzEfVI0YjjY+dHx8bDRq98mTOk+GnsqcTz8p+Vv9563Or59/94vtLz1j82PAL+YvPv655qfNy76uprzrHI8cfvM55PfGm/K3O233vuO+638e9H5ko/ED+UPPR+mPHp9BP9z7nfP78L/eE8/sl0p8zAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAF/SURBVHjarJQ9Sx1REIafXdRI5MZERbQRmxSpYsItrC3ENEp+gXUgWFunDDYXi1SBWyUBMSKC/gMbK3+DnR/ED0wiUZ4UzibHy+71wnVgOOyZOc/s7rxnMpWHtLxkrw58Bq6Am3CBLWDmPmDW8oZLQAO4AHaA/YC9AN4AI8BH4ANwWUpUC3/vrW2q9WS/8JfqRuSslMRR/wFfqdcBe5Ik1NRnyXO/uh7Q2XbAhvpbfV1VOfFJ9UxdU3urgMfqlvqoA2CmflJP1YnWeNHlYeAgOks0osyL2B4wCDztRDad2FXV+Z5YL4ChVE7tpAZMA6fASZVsmuqhOtXBPxxVj9Rv0fXSptRDCtvqwD3AZuQutJMN6nIkflefRzfT+HgC+1JVsCf5+lWgBiwDb+M+7wJ/gClgMdQgMBlr1u7qFT6nflVP/G/nodN59Z137c75rGJ89QFjobMc+AEcAT8TLVKmiqyLeVgKzbuYpVlZgbzLAZ0Bv4DrhwICPI5pngP8HQDUZDnUnQeVQgAAAABJRU5ErkJggg==",PR:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKTWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVN3WJP3Fj7f92UPVkLY8LGXbIEAIiOsCMgQWaIQkgBhhBASQMWFiApWFBURnEhVxILVCkidiOKgKLhnQYqIWotVXDjuH9yntX167+3t+9f7vOec5/zOec8PgBESJpHmomoAOVKFPDrYH49PSMTJvYACFUjgBCAQ5svCZwXFAADwA3l4fnSwP/wBr28AAgBw1S4kEsfh/4O6UCZXACCRAOAiEucLAZBSAMguVMgUAMgYALBTs2QKAJQAAGx5fEIiAKoNAOz0ST4FANipk9wXANiiHKkIAI0BAJkoRyQCQLsAYFWBUiwCwMIAoKxAIi4EwK4BgFm2MkcCgL0FAHaOWJAPQGAAgJlCLMwAIDgCAEMeE80DIEwDoDDSv+CpX3CFuEgBAMDLlc2XS9IzFLiV0Bp38vDg4iHiwmyxQmEXKRBmCeQinJebIxNI5wNMzgwAABr50cH+OD+Q5+bk4eZm52zv9MWi/mvwbyI+IfHf/ryMAgQAEE7P79pf5eXWA3DHAbB1v2upWwDaVgBo3/ldM9sJoFoK0Hr5i3k4/EAenqFQyDwdHAoLC+0lYqG9MOOLPv8z4W/gi372/EAe/tt68ABxmkCZrcCjg/1xYW52rlKO58sEQjFu9+cj/seFf/2OKdHiNLFcLBWK8ViJuFAiTcd5uVKRRCHJleIS6X8y8R+W/QmTdw0ArIZPwE62B7XLbMB+7gECiw5Y0nYAQH7zLYwaC5EAEGc0Mnn3AACTv/mPQCsBAM2XpOMAALzoGFyolBdMxggAAESggSqwQQcMwRSswA6cwR28wBcCYQZEQAwkwDwQQgbkgBwKoRiWQRlUwDrYBLWwAxqgEZrhELTBMTgN5+ASXIHrcBcGYBiewhi8hgkEQcgIE2EhOogRYo7YIs4IF5mOBCJhSDSSgKQg6YgUUSLFyHKkAqlCapFdSCPyLXIUOY1cQPqQ28ggMor8irxHMZSBslED1AJ1QLmoHxqKxqBz0XQ0D12AlqJr0Rq0Hj2AtqKn0UvodXQAfYqOY4DRMQ5mjNlhXIyHRWCJWBomxxZj5Vg1Vo81Yx1YN3YVG8CeYe8IJAKLgBPsCF6EEMJsgpCQR1hMWEOoJewjtBK6CFcJg4Qxwicik6hPtCV6EvnEeGI6sZBYRqwm7iEeIZ4lXicOE1+TSCQOyZLkTgohJZAySQtJa0jbSC2kU6Q+0hBpnEwm65Btyd7kCLKArCCXkbeQD5BPkvvJw+S3FDrFiOJMCaIkUqSUEko1ZT/lBKWfMkKZoKpRzame1AiqiDqfWkltoHZQL1OHqRM0dZolzZsWQ8ukLaPV0JppZ2n3aC/pdLoJ3YMeRZfQl9Jr6Afp5+mD9HcMDYYNg8dIYigZaxl7GacYtxkvmUymBdOXmchUMNcyG5lnmA+Yb1VYKvYqfBWRyhKVOpVWlX6V56pUVXNVP9V5qgtUq1UPq15WfaZGVbNQ46kJ1Bar1akdVbupNq7OUndSj1DPUV+jvl/9gvpjDbKGhUaghkijVGO3xhmNIRbGMmXxWELWclYD6yxrmE1iW7L57Ex2Bfsbdi97TFNDc6pmrGaRZp3mcc0BDsax4PA52ZxKziHODc57LQMtPy2x1mqtZq1+rTfaetq+2mLtcu0W7eva73VwnUCdLJ31Om0693UJuja6UbqFutt1z+o+02PreekJ9cr1Dund0Uf1bfSj9Rfq79bv0R83MDQINpAZbDE4Y/DMkGPoa5hpuNHwhOGoEctoupHEaKPRSaMnuCbuh2fjNXgXPmasbxxirDTeZdxrPGFiaTLbpMSkxeS+Kc2Ua5pmutG003TMzMgs3KzYrMnsjjnVnGueYb7ZvNv8jYWlRZzFSos2i8eW2pZ8ywWWTZb3rJhWPlZ5VvVW16xJ1lzrLOtt1ldsUBtXmwybOpvLtqitm63Edptt3xTiFI8p0in1U27aMez87ArsmuwG7Tn2YfYl9m32zx3MHBId1jt0O3xydHXMdmxwvOuk4TTDqcSpw+lXZxtnoXOd8zUXpkuQyxKXdpcXU22niqdun3rLleUa7rrStdP1o5u7m9yt2W3U3cw9xX2r+00umxvJXcM970H08PdY4nHM452nm6fC85DnL152Xlle+70eT7OcJp7WMG3I28Rb4L3Le2A6Pj1l+s7pAz7GPgKfep+Hvqa+It89viN+1n6Zfgf8nvs7+sv9j/i/4XnyFvFOBWABwQHlAb2BGoGzA2sDHwSZBKUHNQWNBbsGLww+FUIMCQ1ZH3KTb8AX8hv5YzPcZyya0RXKCJ0VWhv6MMwmTB7WEY6GzwjfEH5vpvlM6cy2CIjgR2yIuB9pGZkX+X0UKSoyqi7qUbRTdHF09yzWrORZ+2e9jvGPqYy5O9tqtnJ2Z6xqbFJsY+ybuIC4qriBeIf4RfGXEnQTJAntieTE2MQ9ieNzAudsmjOc5JpUlnRjruXcorkX5unOy553PFk1WZB8OIWYEpeyP+WDIEJQLxhP5aduTR0T8oSbhU9FvqKNolGxt7hKPJLmnVaV9jjdO31D+miGT0Z1xjMJT1IreZEZkrkj801WRNberM/ZcdktOZSclJyjUg1plrQr1zC3KLdPZisrkw3keeZtyhuTh8r35CP5c/PbFWyFTNGjtFKuUA4WTC+oK3hbGFt4uEi9SFrUM99m/ur5IwuCFny9kLBQuLCz2Lh4WfHgIr9FuxYji1MXdy4xXVK6ZHhp8NJ9y2jLspb9UOJYUlXyannc8o5Sg9KlpUMrglc0lamUycturvRauWMVYZVkVe9ql9VbVn8qF5VfrHCsqK74sEa45uJXTl/VfPV5bdra3kq3yu3rSOuk626s91m/r0q9akHV0IbwDa0b8Y3lG19tSt50oXpq9Y7NtM3KzQM1YTXtW8y2rNvyoTaj9nqdf13LVv2tq7e+2Sba1r/dd3vzDoMdFTve75TsvLUreFdrvUV99W7S7oLdjxpiG7q/5n7duEd3T8Wej3ulewf2Re/ranRvbNyvv7+yCW1SNo0eSDpw5ZuAb9qb7Zp3tXBaKg7CQeXBJ9+mfHvjUOihzsPcw83fmX+39QjrSHkr0jq/dawto22gPaG97+iMo50dXh1Hvrf/fu8x42N1xzWPV56gnSg98fnkgpPjp2Snnp1OPz3Umdx590z8mWtdUV29Z0PPnj8XdO5Mt1/3yfPe549d8Lxw9CL3Ytslt0utPa49R35w/eFIr1tv62X3y+1XPK509E3rO9Hv03/6asDVc9f41y5dn3m978bsG7duJt0cuCW69fh29u0XdwruTNxdeo94r/y+2v3qB/oP6n+0/rFlwG3g+GDAYM/DWQ/vDgmHnv6U/9OH4dJHzEfVI0YjjY+dHx8bDRq98mTOk+GnsqcTz8p+Vv9563Or59/94vtLz1j82PAL+YvPv655qfNy76uprzrHI8cfvM55PfGm/K3O233vuO+638e9H5ko/ED+UPPR+mPHp9BP9z7nfP78L/eE8/sl0p8zAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAABUSURBVHja3JQxCgAwDAJj6f+/bNduTYJCiVuWQ1ADkqHUCrHmAakEUukwXYXdgN03qg6pDIXqlOGoTRmaCQWvIDq1gWMpcEwP3z+HAcADAAD//wMAcqoLKWIIZkIAAAAASUVORK5CYII=",NE:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKTWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVN3WJP3Fj7f92UPVkLY8LGXbIEAIiOsCMgQWaIQkgBhhBASQMWFiApWFBURnEhVxILVCkidiOKgKLhnQYqIWotVXDjuH9yntX167+3t+9f7vOec5/zOec8PgBESJpHmomoAOVKFPDrYH49PSMTJvYACFUjgBCAQ5svCZwXFAADwA3l4fnSwP/wBr28AAgBw1S4kEsfh/4O6UCZXACCRAOAiEucLAZBSAMguVMgUAMgYALBTs2QKAJQAAGx5fEIiAKoNAOz0ST4FANipk9wXANiiHKkIAI0BAJkoRyQCQLsAYFWBUiwCwMIAoKxAIi4EwK4BgFm2MkcCgL0FAHaOWJAPQGAAgJlCLMwAIDgCAEMeE80DIEwDoDDSv+CpX3CFuEgBAMDLlc2XS9IzFLiV0Bp38vDg4iHiwmyxQmEXKRBmCeQinJebIxNI5wNMzgwAABr50cH+OD+Q5+bk4eZm52zv9MWi/mvwbyI+IfHf/ryMAgQAEE7P79pf5eXWA3DHAbB1v2upWwDaVgBo3/ldM9sJoFoK0Hr5i3k4/EAenqFQyDwdHAoLC+0lYqG9MOOLPv8z4W/gi372/EAe/tt68ABxmkCZrcCjg/1xYW52rlKO58sEQjFu9+cj/seFf/2OKdHiNLFcLBWK8ViJuFAiTcd5uVKRRCHJleIS6X8y8R+W/QmTdw0ArIZPwE62B7XLbMB+7gECiw5Y0nYAQH7zLYwaC5EAEGc0Mnn3AACTv/mPQCsBAM2XpOMAALzoGFyolBdMxggAAESggSqwQQcMwRSswA6cwR28wBcCYQZEQAwkwDwQQgbkgBwKoRiWQRlUwDrYBLWwAxqgEZrhELTBMTgN5+ASXIHrcBcGYBiewhi8hgkEQcgIE2EhOogRYo7YIs4IF5mOBCJhSDSSgKQg6YgUUSLFyHKkAqlCapFdSCPyLXIUOY1cQPqQ28ggMor8irxHMZSBslED1AJ1QLmoHxqKxqBz0XQ0D12AlqJr0Rq0Hj2AtqKn0UvodXQAfYqOY4DRMQ5mjNlhXIyHRWCJWBomxxZj5Vg1Vo81Yx1YN3YVG8CeYe8IJAKLgBPsCF6EEMJsgpCQR1hMWEOoJewjtBK6CFcJg4Qxwicik6hPtCV6EvnEeGI6sZBYRqwm7iEeIZ4lXicOE1+TSCQOyZLkTgohJZAySQtJa0jbSC2kU6Q+0hBpnEwm65Btyd7kCLKArCCXkbeQD5BPkvvJw+S3FDrFiOJMCaIkUqSUEko1ZT/lBKWfMkKZoKpRzame1AiqiDqfWkltoHZQL1OHqRM0dZolzZsWQ8ukLaPV0JppZ2n3aC/pdLoJ3YMeRZfQl9Jr6Afp5+mD9HcMDYYNg8dIYigZaxl7GacYtxkvmUymBdOXmchUMNcyG5lnmA+Yb1VYKvYqfBWRyhKVOpVWlX6V56pUVXNVP9V5qgtUq1UPq15WfaZGVbNQ46kJ1Bar1akdVbupNq7OUndSj1DPUV+jvl/9gvpjDbKGhUaghkijVGO3xhmNIRbGMmXxWELWclYD6yxrmE1iW7L57Ex2Bfsbdi97TFNDc6pmrGaRZp3mcc0BDsax4PA52ZxKziHODc57LQMtPy2x1mqtZq1+rTfaetq+2mLtcu0W7eva73VwnUCdLJ31Om0693UJuja6UbqFutt1z+o+02PreekJ9cr1Dund0Uf1bfSj9Rfq79bv0R83MDQINpAZbDE4Y/DMkGPoa5hpuNHwhOGoEctoupHEaKPRSaMnuCbuh2fjNXgXPmasbxxirDTeZdxrPGFiaTLbpMSkxeS+Kc2Ua5pmutG003TMzMgs3KzYrMnsjjnVnGueYb7ZvNv8jYWlRZzFSos2i8eW2pZ8ywWWTZb3rJhWPlZ5VvVW16xJ1lzrLOtt1ldsUBtXmwybOpvLtqitm63Edptt3xTiFI8p0in1U27aMez87ArsmuwG7Tn2YfYl9m32zx3MHBId1jt0O3xydHXMdmxwvOuk4TTDqcSpw+lXZxtnoXOd8zUXpkuQyxKXdpcXU22niqdun3rLleUa7rrStdP1o5u7m9yt2W3U3cw9xX2r+00umxvJXcM970H08PdY4nHM452nm6fC85DnL152Xlle+70eT7OcJp7WMG3I28Rb4L3Le2A6Pj1l+s7pAz7GPgKfep+Hvqa+It89viN+1n6Zfgf8nvs7+sv9j/i/4XnyFvFOBWABwQHlAb2BGoGzA2sDHwSZBKUHNQWNBbsGLww+FUIMCQ1ZH3KTb8AX8hv5YzPcZyya0RXKCJ0VWhv6MMwmTB7WEY6GzwjfEH5vpvlM6cy2CIjgR2yIuB9pGZkX+X0UKSoyqi7qUbRTdHF09yzWrORZ+2e9jvGPqYy5O9tqtnJ2Z6xqbFJsY+ybuIC4qriBeIf4RfGXEnQTJAntieTE2MQ9ieNzAudsmjOc5JpUlnRjruXcorkX5unOy553PFk1WZB8OIWYEpeyP+WDIEJQLxhP5aduTR0T8oSbhU9FvqKNolGxt7hKPJLmnVaV9jjdO31D+miGT0Z1xjMJT1IreZEZkrkj801WRNberM/ZcdktOZSclJyjUg1plrQr1zC3KLdPZisrkw3keeZtyhuTh8r35CP5c/PbFWyFTNGjtFKuUA4WTC+oK3hbGFt4uEi9SFrUM99m/ur5IwuCFny9kLBQuLCz2Lh4WfHgIr9FuxYji1MXdy4xXVK6ZHhp8NJ9y2jLspb9UOJYUlXyannc8o5Sg9KlpUMrglc0lamUycturvRauWMVYZVkVe9ql9VbVn8qF5VfrHCsqK74sEa45uJXTl/VfPV5bdra3kq3yu3rSOuk626s91m/r0q9akHV0IbwDa0b8Y3lG19tSt50oXpq9Y7NtM3KzQM1YTXtW8y2rNvyoTaj9nqdf13LVv2tq7e+2Sba1r/dd3vzDoMdFTve75TsvLUreFdrvUV99W7S7oLdjxpiG7q/5n7duEd3T8Wej3ulewf2Re/ranRvbNyvv7+yCW1SNo0eSDpw5ZuAb9qb7Zp3tXBaKg7CQeXBJ9+mfHvjUOihzsPcw83fmX+39QjrSHkr0jq/dawto22gPaG97+iMo50dXh1Hvrf/fu8x42N1xzWPV56gnSg98fnkgpPjp2Snnp1OPz3Umdx590z8mWtdUV29Z0PPnj8XdO5Mt1/3yfPe549d8Lxw9CL3Ytslt0utPa49R35w/eFIr1tv62X3y+1XPK509E3rO9Hv03/6asDVc9f41y5dn3m978bsG7duJt0cuCW69fh29u0XdwruTNxdeo94r/y+2v3qB/oP6n+0/rFlwG3g+GDAYM/DWQ/vDgmHnv6U/9OH4dJHzEfVI0YjjY+dHx8bDRq98mTOk+GnsqcTz8p+Vv9563Or59/94vtLz1j82PAL+YvPv655qfNy76uprzrHI8cfvM55PfGm/K3O233vuO+638e9H5ko/ED+UPPR+mPHp9BP9z7nfP78L/eE8/sl0p8zAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAABQSURBVHja3JTBCQAwDAK90v1XthOUQjBQ4j9HRBHbSmoprDlAd3zoDstP6C4cWxLpUNyRstNAkkAqoXCxR7I2JHtIsth8Pw6DgAcAAP//AwBCsgspjp7kPwAAAABJRU5ErkJggg=="};bdor[500]=global.bdor[404];bdor[13]="p";var zoomControlBar=Class({create:function(c){this.times=0;this.dir=uiBaseURL;this.bar=$("<div></div>");this.btnZoomUp=$("<div title='Zoom up' id='zu' style='cursor:pointer;position:absolute;'></div>");this.btnProgressBar=$("<div title='pb' id='pb' style='cursor:pointer;position:absolute;'></div>");this.btnZoomDown=$("<div title='Zoom down' id='zd' style='cursor:pointer;position:absolute;'></div>");this.btnZoomOut=$("<div title='Zoom out' id='zo' style='cursor:pointer;position:absolute;'></div>");this.btnPre=$("<div title='Previous' id='pr' style='cursor:pointer;position:absolute;'></div>");this.btnNext=$("<div title='Next' id='ne' style='cursor:pointer;position:absolute;'></div>");this.btnMoveMode=$("<div title = 'Move by mouse position' id='md' style='cursor:pointer;position:absolute;'></div>");this.moveByMousePosition=!1;this.moveByPositionUrl=this.getImageUrl("moveByPos");this.moveByDragUrl=this.getImageUrl("moveByDrag");this.width=260;this.height=40;c.append(this.bar);this.bar.append(this.btnZoomUp);this.bar.append(this.btnZoomDown);this.bar.append(this.btnZoomOut);this.bar.append(this.btnPre);this.bar.append(this.btnNext);this.bar.append(this.btnMoveMode);this.btnZoomUp.append($("<img src="+this.getImageUrl("ZU")+' id = "zu"></img>')).attr("title",getLanguage("btnZoomIn","zoom in"));this.btnProgressBar.append($("<img src="+this.getImageUrl("PB")+' id = "pb"></img>'));this.btnZoomDown.append($("<img src="+this.getImageUrl("ZD")+' id = "zd"></img>')).attr("title",getLanguage("btnZoomOut","zoom out"));this.btnZoomOut.append($("<img src="+this.getImageUrl("ZO")+' id = "zo"></img>')).attr("title",getLanguage("btnZoomOut","zoom out"));this.btnPre.append($("<img src="+this.getImageUrl("PR")+' id = "pr"></img>')).attr("title",getLanguage("btnPrePage","pre"));this.btnNext.append($("<img src="+this.getImageUrl("NE")+' id = "ne"></img>')).attr("title",getLanguage("btnNextPage","next"));this.btnMoveMode.append(getImage(this.moveByPositionUrl).attr("title",getLanguage("btnPositionToMove","Move by mouse position")));this.bar.css({width:this.width+"px",height:this.height+"px",position:"absolute","z-index":5,display:"none","background-color":bookConfig.toolbarColor,opacity:0.3,"-moz-transition":"all 0.2s ease-in-out","-webkit-transition":"all 0.2s ease-in-out","-o-transition":"all 0.2s ease-in-out","-ms-transition":"all 0.2s ease-in-out",transition:"all 0.2s ease-in-out"});this.btnZoomUp.css({width:"26px",height:"26px"});this.btnZoomDown.css({width:"26px",height:"26px"});this.btnZoomOut.css({width:"26px",height:"26px"});this.btnPre.css({width:"26px",height:"26px"});this.btnNext.css({width:"26px",height:"26px"});this.btnMoveMode.css({width:"26px",height:"26px"});this.btnZoomUp.children("img").css({"margin-left":"4px","margin-top":"4px"});this.btnZoomDown.children("img").css({"margin-left":"4px","margin-top":"4px"});this.btnZoomOut.children("img").css({"margin-left":"4px","margin-top":"4px"});this.btnPre.children("img").css({"margin-left":"4px","margin-top":"4px"});this.btnNext.children("img").css({"margin-left":"4px","margin-top":"4px"});this.btnMoveMode.children("img").css({"margin-left":"4px","margin-top":"4px"});this.initEvt();this.setButtonsPos()},getImageUrl:function(c){return window.zoom_icons&&zoom_icons[c]?"data:image/png;base64,"+zoom_icons[c]:uiBaseURL+c+".png"},buttonChangeColor:function(){this.btnZoomUp.changeButtonColor(bookConfig.iconColor);this.btnZoomDown.changeButtonColor(bookConfig.iconColor);this.btnZoomOut.changeButtonColor(bookConfig.iconColor);this.btnPre.changeButtonColor(bookConfig.iconColor);this.btnNext.changeButtonColor(bookConfig.iconColor);this.btnMoveMode.changeButtonColor(bookConfig.iconColor)},setPosition:function(f,h,g){void 0==g&&(g=["left","top"]);this.bar.css(g[0],f+"px");this.bar.css(g[1],h+"px")},setVisible:function(c){c&&0==this.times&&(this.buttonChangeColor(),this.times=1);this.bar.css({display:c?"block":"none"})},setChildIndex:function(c){this.bar.css({"z-index":c})},onResize:function(d,f){this.bar.css({width:d+"px",height:f+"px"})},initEvt:function(){var c=this;this.bar.bind(_event._enter,function(){c.bar.css({opacity:0.7})});this.bar.bind(_event._down,function(){c.bar.css({opacity:0.7})});this.bar.bind(_event._end,function(){c.bar.css({opacity:0.7})});this.bar.bind(_event._leave,function(){c.bar.css({opacity:0.3})});this.btnZoomUp.bind(_event._end,function(){c.zoomUp()});this.btnZoomDown.bind(_event._end,function(){c.zoomDown()});this.btnZoomOut.bind(_event._end,function(){c.zoomOut()});this.btnPre.bind(_event._end,function(){rightToLeft?nextPageFun():previousPageFun()});this.btnNext.bind(_event._end,function(){rightToLeft?previousPageFun():nextPageFun()});this.btnMoveMode.bind(_event._end,function(){c.changeMoveMode()})},setButtonsPos:function(){this.btnZoomUp.css({position:"absolute","margin-left":"20px",top:"6px"});this.btnZoomDown.css({position:"absolute","margin-left":"60px",top:"6px"});this.btnZoomOut.css({position:"absolute","margin-left":"100px",top:"6px"});this.btnPre.css({position:"absolute","margin-left":"140px",top:"6px"});this.btnNext.css({position:"absolute","margin-left":"180px",top:"6px"});this.btnMoveMode.css({position:"absolute","margin-left":"220px",top:"6px"})},changeMoveMode:function(){!0==this.moveByMousePosition?(this.moveByMousePosition=!1,this.btnMoveMode.empty().append(getImage(this.moveByPositionUrl)).attr("title",getLanguage("btnPositionToMove","Move by mouse position"))):(this.moveByMousePosition=!0,this.btnMoveMode.empty().append(getImage(this.moveByDragUrl)).attr("title",getLanguage("btnDragToMove","Move by mouse drag")));this.btnMoveMode.changeButtonColor(bookConfig.iconColor);this.btnMoveMode.children("img").css({"margin-left":"3px","margin-top":"3px"})},zoomUp:function(){var f=BookInfo.getBook().bookMap.book.showPage,h={pointers:[{pageX:windowWidth/2,pageY:windowHeight/2},{pageX:windowWidth/2,pageY:windowHeight/2}]};f.scale=f.parameters.toScale;f.parameters.origin=f.mathOrigin(f,h);f.originObj(f,f.parameters.origin);var g=Math.min(f.parameters.naturalWidth*f.maxScale/f.parameters.width,1.5*parseFloat(f.scale));1!=g&&f.animateToScale(f,g,h)},zoomDown:function(){var g=BookInfo.getBook().bookMap.book.showPage,l={pointers:[{pageX:windowWidth/2,pageY:windowHeight/2},{pageX:windowWidth/2,pageY:windowHeight/2}]};g.scale=g.parameters.toScale;g.parameters.origin=g.mathOrigin(g,l);g.originObj(g,g.parameters.origin);var k=g.parameters.naturalWidth/g.parameters.width,h=0.5*parseFloat(g.scale);h<=k&&(g.parameters.zoomOut=!0);g.animateToScale(g,Math.max(k,h),l)},zoomOut:function(){var c=BookInfo.getBook().showPage;c.onDoubleTap.bind(c)({pointers:[{pageX:windowWidth/2,pageY:windowHeight/2}]});StateSynchronous.instance().findButtons("ZoomButton",!0).each(function(d){d.setAsZoomin();d.executeCallback()})}}),CatalogControlBar=Class({create:function(c){this.dir=uiBaseURL;this.bar=$("<div id='catalogControlBar'></div>");this.btnZoomUp=$("<div title='Zoom up' id='zu' style='cursor:pointer;position:absolute;'></div>");this.btnProgressBar=$("<div title='pb' id='pb' style='cursor:pointer;position:absolute;'></div>");this.btnZoomDown=$("<div title='Zoom down' id='zd' style='cursor:pointer;position:absolute;'></div>");this.btnZoomOut=$("<div title='Zoom out' id='zo' style='cursor:pointer;position:absolute;'></div>");this.btnPre=$("<div title='Previous' id='pr' style='cursor:pointer;position:absolute;'></div>");this.btnNext=$("<div title='Next' id='ne' style='cursor:pointer;position:absolute;'></div>");this.btnMoveMode=$("<div title = 'Move by mouse position' id='md' style='cursor:pointer;position:absolute;'></div>");this.moveByMousePosition=!0;this.width=150;this.height=40;c.append(this.bar);this.bar.append(this.btnZoomOut);this.bar.append(this.btnPre);this.bar.append(this.btnNext);this.btnZoomUp.append($("<img src="+this.getImageUrl("ZU")+' id = "zu"></img>'));this.btnProgressBar.append($("<img src="+this.getImageUrl("PB")+' id = "pb"></img>'));this.btnZoomDown.append($("<img src="+this.getImageUrl("ZD")+' id = "zd"></img>'));this.btnZoomOut.append($("<img src="+this.getImageUrl("ZO")+' id = "zo"></img>'));this.btnPre.append($("<img src="+this.getImageUrl("PR")+' id = "pr"></img>'));this.btnNext.append($("<img src="+this.getImageUrl("NE")+' id = "ne"></img>'));this.btnMoveMode.append(getImage(this.moveByDragUrl));this.bar.css({width:this.width+"px",height:this.height+"px",position:"absolute","z-index":5,display:"none","background-color":bookConfig.toolbarColor,opacity:0.3,"-moz-transition":"all 0.2s ease-in-out","-webkit-transition":"all 0.2s ease-in-out","-o-transition":"all 0.2s ease-in-out","-ms-transition":"all 0.2s ease-in-out",transition:"all 0.2s ease-in-out"});this.btnZoomUp.css({width:"26px",height:"26px"});this.btnZoomDown.css({width:"26px",height:"26px"});this.btnZoomOut.css({width:"26px",height:"26px"});this.btnPre.css({width:"26px",height:"26px"});this.btnNext.css({width:"26px",height:"26px"});this.btnMoveMode.css({width:"26px",height:"26px"});this.btnZoomUp.children("img").css({"margin-left":"3px","margin-top":"3px"});this.btnZoomDown.children("img").css({"margin-left":"3px","margin-top":"3px"});this.btnZoomOut.children("img").css({"margin-left":"3px","margin-top":"3px"});this.btnPre.children("img").css({"margin-left":"3px","margin-top":"3px"});this.btnNext.children("img").css({"margin-left":"3px","margin-top":"3px"});this.btnMoveMode.children("img").css({"margin-left":"3px","margin-top":"3px"});this.initEvt();this.setButtonsPos()},setButtonsPos:function(){this.btnPre.css({position:"absolute","margin-left":"20px",top:"6px"});this.btnZoomOut.css({position:"absolute","margin-left":"60px",top:"6px"});this.btnNext.css({position:"absolute","margin-left":"100px",top:"6px"});this.btnMoveMode.css({position:"absolute","margin-left":"140px",top:"6px"})},zoomUp:function(){},zoomDown:function(){}}).extend(zoomControlBar),ZoomMap=Class({create:function(c){this.book=c;this.maxWidth=80;this.maxHeight=100;this.pageHeight=this.pageWidth=this.height=this.width=0;this.init();this.doublePage=this.mouseDown=!1;this.initCursorEvent()},init:function(){this.map=$("<div class='thumbnail_map'></div>");this.imageLeft=$("<img class='map_img map_img_left'></img>");this.imageRight=$("<img class='map_img map_img_right'></img>");this.mapCursor=$("<div class='map_cursor'></div>");bookContainer.append(this.map);this.map.append(this.imageLeft);this.map.append(this.imageRight);this.map.append(this.mapCursor)},show:function(){this.visible=!0;this.refreshArea();this.map.show()},hide:function(){this.visible=!1;this.map.hide()},onResize:function(){bookConfig.largePageWidth/bookConfig.largePageHeight<this.maxWidth/this.maxHeight?(this.pageWidth=this.maxWidth,this.pageHeight=bookConfig.largePageHeight*this.maxWidth/bookConfig.largePageWidth):(this.pageHeight=this.maxHeight,this.pageWidth=bookConfig.largePageWidth*this.maxHeight/bookConfig.largePageHeight);this.height=this.pageHeight+2;this.width=this.book.doublePage?2*(this.pageWidth+1):this.pageWidth;var d=windowWidth-this.width-20-bookConfig.rightMargin,f=toolBar.getTopHeight()+10+bookConfig.topMargin;this.map.css({left:d,top:f,width:this.width+"px",height:this.height+"px"});$(".map_img").css({width:this.pageWidth+"px",height:this.pageHeight+"px"});this.doublePage=this.book.doublePage},fillContent:function(h){if(this.visible){var n,m,l,k;n=2*parseInt(h/2);m=n+1;this.book.doublePage&&(this.doublePage=0==n||n==bookConfig.totalPageCount?!1:!0);l=n;k=m;rightToLeft&&(l=m,k=n);this.doublePage?(this.fillImage(this.imageLeft,l),this.fillImage(this.imageRight,k),this.imageLeft.show(),this.imageRight.show(),this.imageLeft.css({"border-right":"none"})):(this.fillImage(this.imageLeft,parseInt(h)),this.imageLeft.show(),this.imageRight.hide(),this.imageLeft.css({"border-right":"1px solid gray"}));this.width=this.pageWidth;this.doublePage&&(this.width=2*(this.pageWidth+1));h=windowWidth-this.width-20-bookConfig.rightMargin;n=toolBar.getTopHeight()+10+bookConfig.topMargin;this.map.css({left:h,top:n,width:this.width+"px",height:this.height+"px"});$(".map_img").css({width:this.pageWidth+"px",height:this.pageHeight+"px"})}},fillImage:function(d,f){d&&fillImageAfterLoaded(f,"thumb",function(b){d.attr("src",b)})},setArea:function(c){this.mapCursor.css({left:c.left,top:c.top,width:c.width,height:c.height})},getArea:function(){var g=this.mapCursor.css("left"),g=parseInt(g),l=this.mapCursor.css("top"),l=parseInt(l),k=this.mapCursor.css("width"),k=parseInt(k),h=this.mapCursor.css("height"),h=parseInt(h);return{left:g,top:l,width:k,height:h}},refreshArea:function(){if(this.book.showPage){var k=this.book.showPage,p=k.width(),o=k.height(),n=getBookPoint(k),m=this.getBookPosition();!0==this.book.doublePage&&!1==this.doublePage&&(p/=2,k=BookInfo.getBook().getCurrentPageIndex(),1==k&&!rightToLeft||rightToLeft&&k==totalPageCount)&&(m.left+=p);var k=-(m.left+n.x),l=-(m.top+n.y),n=l/o,m=(k+windowWidth)/p,o=(l+windowHeight)/o,p=Math.max(0,k/p),n=Math.max(0,n),m=Math.min(1,m),o=Math.min(1,o),k=this.width;this.setArea({left:p*k,top:n*this.height,width:(m-p)*k,height:(o-n)*this.height})}},getBookPosition:function(){var d=this.book.showPage.css("left"),d=parseInt(d.replace("px","")),f=this.book.showPage.css("top"),f=parseInt(f.replace("px",""));return{left:d,top:f}},initCursorEvent:function(){var k,p,o=1,n=1,m=this.book.showPage,l;this.mapCursor.bind(_event._down,function(b){b=isTouch?b.originalEvent.touches:[b];if(1<b.length){return !1}this.mouseDown=!0;k=b[0].pageX;p=b[0].pageY;m=this.book.showPage;o=m.width()/this.width;n=m.height()/this.height;this.mapCursor.css({"background-color":"RGBA(245,225,135,0.8)"});return !1}.bind(this));this.mapCursor.bind(_event._move,function(b){b=isTouch?b.originalEvent.touches:[b];if(1<b.length){return !1}if(this.mouseDown){this.mapCursor.css({cursor:"move"})}else{return this.mapCursor.css({cursor:""}),!1}l=this.book.showPage.panForMove(this.book.showPage,(k-b[0].pageX)*o,(p-b[0].pageY)*n,!1);this.refreshArea();return !1}.bind(this));this.mapCursor.bind(_event._end,function(c){this.mouseDown=!1;this.mapCursor.css({cursor:"","background-color":"RGBA(250,240,185,0.5)"});this.book.showPage.setZoomParameters(this.book.showPage,l);this.book.showPage.restrictInBoundary(this.book.showPage,this.refreshArea.bind(this));return !1}.bind(this));this.mapCursor.bind(_event._leave,function(c){if(this.mouseDown){return this.mouseDown=!1,this.mapCursor.css({cursor:"","background-color":"RGBA(250,240,185,0.5)"}),this.book.showPage.setZoomParameters(this.book.showPage,l),this.book.showPage.restrictInBoundary(this.book.showPage,this.refreshArea.bind(this)),!1}}.bind(this));$(this.book.showPage).bind(_event._move,function(h){if(!isPhone()&&!isPad()){var t=BookInfo.getBook();if(t.status_zoom&&!this.book.showPage.parameters.zoomming&&t.controlBar&&t.controlBar.moveByMousePosition){h=isTouch?h.originalEvent.touches:[h];if(1<h.length){return !1}var t=this.book.showPage,s=t.width(),r=t.height(),q=h[0].pageX;h=h[0].pageY;s=q-q*s/windowWidth;r=h-h*r/windowHeight;h={};h.origin=t.parameters.origin;h.scale=t.parameters.scale;s-=t.parameters.left;r-=t.parameters.top;h.tran={x:s,y:r};r=transformCSS(h);t.css(r);this.refreshArea()}}}.bind(this))}}),getBookPoint=function(c){return bookType!=BookType.slide_book&&bookType!=BookType.singleSlide_book&&bookType!=BookType.catalog_book&&bookType!=BookType.singleCatalog_book?getTransform(c[0]):getPoint(c)},getPoint=function(c){if($.browser.msie){if(void 0==c.getOrigin||null==c.getOrigin){c.getOrigin=!1}if(!c.getOrigin){c.getOrigin=!0;c.originX=parseInt(c.css("left"));c.originY=parseInt(c.css("top"));if(void 0==c.originX||null==c.originX||isNaN(c.originX)){c.originX=0}if(void 0==c.originY||null==c.originY||isNaN(c.originY)){c.originY=0}}return Point(parseInt(c.css("left"))-c.originX,parseInt(c.css("top"))-c.originY)}return getTransform(c[0])},SlideBookPage=Class({onPageLoaded:null,create:function(g,l,k,h){this.pageHeight=this.pageWidth=this.height=this.width=this.zIndex=0;this.pageIndex=g;this.pageArray=[];this.bookType=k;this.onPageLoaded=h;this.side=$("<div class='slide_side'></div>");this.side.attr("id",l+g);this.init(g)},init:function(c){isNaN(c)||(this.pages=$("<div class='slide_pages'></div>"),this.initPages(c),this.setPageCss(),this.side.append(this.pages),this.initEvent())},initEvent:function(){this.adContainer&&this.adContainer.css({"z-index":1});isBelowIE9()?this.pages.IEZoom({side:this,zoomIn:this.zoomIn.bind(this),zoomOut:this.zoomOut.bind(this),onZoomed:this.onZoomed.bind(this)}):this.pages.zoom({side:this,zoomIn:this.zoomIn.bind(this),zoomOut:this.zoomOut.bind(this),onZoomed:this.onZoomed.bind(this)})},zoomIn:function(){this.pages.parameters.zoomFlag=!0;var c=BookInfo.getBook();c.status_zoom=!0;c.adContainer&&c.adContainer.css({"z-index":1});StateSynchronous.instance().findButtons("ZoomButton",!0).each(function(d){d.setAsZoomout();d.executeCallback()});window.toolBar&&window.toolBar.btnZoom&&window.toolBar.changeZoomIcon(!1)},zoomOut:function(){this.pages.parameters.zoomFlag=!1;var c=BookInfo.getBook();c.status_zoom=!1;c.adContainer&&1==c.currentPageIndex&&c.adContainer.css({"z-index":3});c.gotoPage(c.toPageIndex);StateSynchronous.instance().findButtons("ZoomButton",!0).each(function(d){d.setAsZoomin();d.executeCallback()});window.toolBar&&window.toolBar.btnZoom&&window.toolBar.changeZoomIcon(!0)},onZoomed:function(f){if(!isPhone()&&!isPad()&&f&&!this.pages.parameters.resize){this.pages.parameters.resize=!0;f=this.pages.offset().left;var h=this.pages.offset().top;f-=this.pages.parameters.left;var h=h-this.pages.parameters.top,g=this.pages.parameters.scale;1!=g&&(this.resizePages(parseInt(this.pageWidth*g),parseInt(this.pageHeight*g)),g=1);g=transformCSS({tran:{x:f,y:h},scale:g,origin:{x:0,y:0}});this.pages.css(g);this.pages.parameters&&(this.pages.parameters.tran={x:f,y:h},this.pages.parameters.scale=1,this.pages.parameters.toScale=1,this.pages.parameters.width=$(this.pages).width(),this.pages.parameters.height=$(this.pages).height(),this.pages.parameters.origin={x:0,y:0},this.pages.parameters.resize=!1)}},initPages:function(d){d=2*d-1;index2=d-1;var f=rightToLeft?d:index2;d=rightToLeft?index2:d;this.addPageArray([f,d]);this.leftPage=this.pageArray[f];this.rightPage=this.pageArray[d]},setPageCss:function(){var c=transformCSS({rotate:0,tran:{x:0,y:0}});!this.rightPage&&this.leftPage&&bookConfig.retainBookCenter&&bookConfig.showDoublePage?(this.leftPage.centerPage(),this.leftPage.setCSSByStyle(c)):!this.leftPage&&this.rightPage&&bookConfig.retainBookCenter?(this.rightPage.centerPage(),this.rightPage.setCSSByStyle(c)):(this.leftPage&&(this.leftPage.setLeftOrRight(!0),this.leftPage.setCSSByStyle(c)),this.rightPage&&(this.rightPage.setLeftOrRight(!1),this.rightPage.setCSSByStyle(c)))},addPageArray:function(f){if(f&&this.pageArray){for(var h=0;h<f.length;h++){if(!(0>=f[h]||f[h]>originTotalPageCount||(this.pageArray[f[h]]&&this.fillContent(f[h]),this.pageArray[f[h]]))){var g=new BookPage(f[h],"page",this.bookType);g.addAttachment();g.hideMiddleAttachment();g.onResize(this.pageWidth,this.pageHeight);this.pageArray[f[h]]=g;this.fillContent(f[h]);this.pages.append(g.getSide())}}}},fillContent:function(c){this.pageArray[c]&&this.pageArray[c].fillContent()},fillImage:function(){for(var c=0;c<this.pageArray.length;c++){this.pageArray[c]&&this.pageArray[c].fillContent()}},remove:function(){this.side.remove();this.side=void 0},setCSSByStyle:function(c){this.side.css(c)},setCSSByName:function(c){this.side.addClass(c)},onResize:function(d,f){this.width=d;this.height=f;this.resetPages()},resetPages:function(){if(this.pages){var d=getPageWidthHeight(this.width,this.height,2*bookConfig.largePageWidth,bookConfig.largePageHeight),f=2*parseInt(d.x/2),d=parseInt(d.y);this.resizePages(f,d);this.pages.css({left:(this.width-f)/2+"px",top:(this.height-d)/2+"px"});f=transformCSS({rotate:0,tran:{x:0,y:0}});this.pages.css(f)}},resizePages:function(h,n){if(this.pages){this.pageWidth=h;this.pageHeight=n;this.pages.css({width:this.pageWidth+"px",height:this.pageHeight+"px"});for(var m=this.pageWidth/2,l=this.pageHeight,k=0;k<this.pageArray.length;k++){if(this.pageArray[k]){this.pageArray[k].onResize(m,l)}}}},loading:function(){for(var c=0;c<this.pageArray.length;c++){this.pageArray[c]&&this.pageArray[c].loading()}},setLeftOrRight:function(c){this.isLeft=c},reset:function(){},getSide:function(){return this.side},setZIndex:function(c){this.zIndex=c;this.side.css({"z-index":c})},getZIndex:function(){return this.zIndex},enterSide:function(){for(var c=0;c<this.pageArray.length;c++){this.pageArray[c]&&this.pageArray[c].enterSide()}},leaveSide:function(){for(var c=0;c<this.pageArray.length;c++){this.pageArray[c]&&this.pageArray[c].leaveSide()}},addHistoryTexts:function(d){for(var f=0;f<this.pageArray.length;f++){this.pageArray[f]&&this.pageArray[f].addHistoryTexts(d)}},highlightSearch:function(){for(var c=0;c<this.pageArray.length;c++){this.pageArray[c]&&this.pageArray[c].highlightSearch()}},clearHighlight:function(){for(var c=0;c<this.pageArray.length;c++){this.pageArray[c]&&this.pageArray[c].clearHighlight()}},resetSlider:function(){for(var c=0;c<this.pageArray.length;c++){this.pageArray[c]&&this.pageArray[c].resetSlider()}},playSlider:function(){for(var c=0;c<this.pageArray.length;c++){this.pageArray[c]&&this.pageArray[c].playSlider()}},fillPage:function(f,h){for(var g=0;g<this.pageArray.length;g++){this.pageArray[g]&&this.pageArray[g].fillPage(f,h)}}}),SingleSlideBookPage=Class({initPages:function(c){this.addPageArray([c]);this.page=this.pageArray[c]},resetPages:function(){if(this.pages){var d=getPageWidthHeight(this.width,this.height,bookConfig.largePageWidth,bookConfig.largePageHeight),f=parseInt(d.x),d=parseInt(d.y);this.resizePages(f,d);this.pages.css({left:(this.width-f)/2+"px",top:(this.height-d)/2+"px"});f=transformCSS({rotate:0,tran:{x:0,y:0}});this.pages.css(f)}},resizePages:function(h,n){if(this.pages){this.pageWidth=h;this.pageHeight=n;this.pages.css({width:this.pageWidth+"px",height:this.pageHeight+"px"});for(var m=this.pageWidth,l=this.pageHeight,k=0;k<this.pageArray.length;k++){if(this.pageArray[k]){this.pageArray[k].onResize(m,l)}}}},setPageCss:function(){var c=transformCSS({rotate:0,tran:{x:0,y:0}});this.page&&(this.page.centerPage(),this.page.setCSSByStyle(c))},fillPage:function(d,f){this.page&&this.page.fillPage(d,f)}}).extend(SlideBookPage),SlideBook=Class({currentTranX:0,create:function(c){this._super(c);this.currentPageIndex=this.getRealBookIndex(c.currentPageIndex);this.mainPageIndex=this.getRealBookIndex(c.currentPageIndex);this.initBook();this.initEvent();this.showPage=this.pageArray[this.currentPageIndex].pages},initBook:function(){this.flipBook=$("<div class='SlideBook' id='SlideBook' ></div>");this.resetPages(this.currentPageIndex);this.parent.append(this.flipBook);this.setCurrentIndexTextField()},getBook:function(){return this.flipBook},fillPage:function(g,l){if(g){for(var k=this.pageArray.length,h=0;h<k;h++){this.pageArray[h]&&this.pageArray[h].fillPage(g,l),this.pageBackArray&&this.pageBackArray[h]&&this.pageBackArray[h].fillPage(g,l)}}},resetPages:function(c){isNaN(c)||0>=c||(this.unWrapPageExcludeArray([c,c+1,c-1]),this.addPageArray([c,c+1,c-1]),this.loading(),this.currentPage=this.pageArray[c],this.nextPage=this.pageArray[c+1],this.previousPage=this.pageArray[c-1],this.setPageCss())},addPageArray:function(f){if(f&&this.pageArray){for(var h=0;h<f.length;h++){if(!(0>=f[h]||f[h]>this.pageLength()||(this.pageArray[f[h]]&&this.fillContent(f[h]),this.pageArray[f[h]]))){var g=this.newPage(f[h]);g.onResize(this.width,this.height);this.pageArray[f[h]]=g;this.fillContent(f[h]);this.flipBook.append(g.getSide())}}this.orderPages()}},setPagePosition:function(f,h){var g={left:h*windowWidth+"px"};this.pageArray[f]&&this.pageArray[f].setCSSByStyle(g)},orderPages:function(){this.sequenceList={};for(var f=this.pageArray.length,h=0,g=this.mainPageIndex+1;g<f;g++){this.pageArray[g]&&(rightToLeft?h--:h++,this.pageArray[g].sequence=h,this.sequenceList[h]=g,this.setPagePosition(g,h))}h=0;for(f=this.mainPageIndex;0<f;f--){this.pageArray[f]&&(this.pageArray[f].sequence=h,this.sequenceList[h]=f,this.setPagePosition(f,h),rightToLeft?h++:h--)}},setPageCss:function(){var c=transformCSS({rotate:0,tran:{x:0,y:0}});this.currentPage&&this.currentPage.setCSSByStyle(c);this.previousPage&&this.previousPage.setCSSByStyle(c);this.nextPage&&this.nextPage.setCSSByStyle(c)},fillContent:function(c){(!this.flipping||imageLoaded[c])&&this.pageArray[c]&&this.pageArray[c].fillImage()},newPage:function(c){return new SlideBookPage(c,"slidePage",this.bookType,this.onBookPageLoaded.bind(this))},pageLength:function(){return bookConfig.totalPageCount},unWrapPageExcludeArray:function(f){if(f&&this.pageArray){for(var h=this.pageArray.length,g=0;g<h;g++){!this.pageArray[g]||0<=f.indexOf(g)||(this.pageArray[g].remove(),this.pageArray[g]=void 0)}this.orderPages()}},mouseWheelFlip:function(){if(bookConfig.mouseWheelFlip){var c;this.flipBook.bind(_event._mousewheel,function(f){var b;void 0!=c&&150>new Date-c?b=!1:(c=new Date,b=!0);if(!b){return !1}b=f.originalEvent;0>Math.max(-1,Math.min(1,b.wheelDelta||-b.detail))?nextPageFun():previousPageFun();stopEvent(f);return !1}.bind(this))}},flippingTo:function(c){this.currentPageIndex=c;this.currentPageIndex=Math.max(1,this.currentPageIndex);this.currentPageIndex=Math.min(originTotalPageCount,this.currentPageIndex);this.setCurrentIndexTextField();setLocationHash(this.getRealPageIndex())},getRealPageIndex:function(){return this.currentPageIndex},getRealBookIndex:function(c){return c},gotoPage:function(g,l){if(!isNaN(g)){this.toPageIndex=g;if(this.status_zoom){var k={pointers:[{pageX:windowWidth/2,pageY:windowHeight/2}]},h=this.pageArray[this.currentPageIndex].pages;h.onDoubleTap.bind(h)(k);return !0}g=this.getRealBookIndex(g);0>=g||g>this.pageLength()||!this.flipEffect(g)||(!l&&flipHistory&&(flipHistory=flipHistory.slice(0,flipHistory.currentIndex+1),flipHistory.push({index:g}),flipHistory.currentIndex=flipHistory.length-1),this.flippingTo(g),this.flipInterval&&this.flipInterval.stop(),this.refreshPages(g),this.flipIntervalTmp(g))}},flipEffect:function(c){return this.status_zoom||c==this.currentPageIndex||this.flipping?!1:!0},flipIntervalTmp:function(g){var l=this.currentTranX,k=this.getFlipToX(g);this.flipping=!0;var h=function(c,m,d){c<m?(c=(0,$.easing["easeInOut"+d])(null,c,l,k-l,m),this.setBookTranX(c)):(this.afterFlipTo(),this.flipInterval.stop())}.bind(this);this.flipInterval=function(d,f){h(d,f,"Sine")}.runInAnimate(this,this.flippingTime)},refreshPages:function(f){this.setAttachmentBeforeFlipTo(f);if(!this.pageArray[f]){var h=this.getCurrentViewPageIndex(),g=this.currentTranX-this.width;(f>h||f<this.mainPageIndex)&&!rightToLeft&&(g=this.currentTranX);(f<h||f>this.mainPageIndex)&&rightToLeft&&(g=this.currentTranX);this.addPageArray([f]);this.setBookTranX(g)}this.showPage=this.pageArray[f].pages},getCurrentViewPageIndex:function(){var c=Math.abs(this.currentTranX),c=Math.floor(c/this.width)+1+(c%this.width>this.width/2)?0:1,c=(0>=this.currentTranX?1:-1)*c;return this.sequenceList[c]},getFlipToX:function(c){return this.pageArray[c]&&this.pageArray[c].sequence?-this.pageArray[c].sequence*windowWidth:0},getCurrentTranX:function(){return this.currentTranX},setBookTranX:function(d){var f=transformCSS({rotate:0,tran:{x:d,y:0}});isBelowIE9()&&(f={left:d+"px"});this.setCSSByStyle(f);this.currentTranX=d},onResize:function(){this.resize();this.status_zoom=!1},resize:function(){this.endFlip();this.resizeBook();this.resizePage(this.width,this.height);this.resetPages(this.currentPageIndex);this.resizeAdvertisement()},getTop:function(){return this.bookTop},resizeBook:function(){var d=global.toolBar&&global.toolBar.getHeight?global.toolBar.getHeight():0,f=global.toolBar&&global.toolBar.getTopHeight?global.toolBar.getTopHeight():0;this.width=windowWidth-bookConfig.leftMargin-bookConfig.leftMargin;this.height=windowHeight-bookConfig.topMargin-bookConfig.bottomMargin-d;this.bookTop=bookConfig.topMargin+f;this.flipBook.css({width:this.width+"px",height:this.height+"px",left:bookConfig.leftMargin+"px",top:bookConfig.topMargin+f+"px"})},resizeAdvertisement:function(){var c=getPageWidthHeight(this.width,this.height,2*bookConfig.largePageWidth,bookConfig.largePageHeight);this.pageWidth=2*parseInt(c.x/2);this.pageHeight=parseInt(c.y);this.adContainer&&this.adContainer.css({left:(this.width-this.pageWidth)/2+"px",top:(this.height-this.pageHeight)/2+this.getTop()+"px",width:this.pageWidth/2+"px",height:this.pageHeight+"px"});this.adInstance&&this.adInstance.resize()},resizePage:function(g,l){for(var k=this.pageArray.length,h=0;h<k;h++){if(this.pageArray[h]){this.pageArray[h].onResize(g,l)}}},getHeight:function(){return this.height},getWidth:function(){return this.width},getScale:function(){return 1},insertStaticAd:function(){var f=this.flipBook.css("left"),f=parseInt(f.replace("px","")),h=this.flipBook.css("top"),g=this.flipBook.css("width"),g=parseInt(g.replace("px",""));rightToLeft&&(f+=g/2);this.adContainer=$("<div id='adContainer'></div>");this.adContainer.css({position:"absolute","z-index":-1});this.adContainer.css({left:f+"px",top:h});this.adInstance=new HTML5AdSlider(this.adContainer,{paddingLeft:30,paddingTop:30,paddingRight:30,paddingBottom:30,loop:!1,timeout:2000,effectDuration:1000,data:staticAd.data});bookContainer.append(this.adContainer);this.adContainer&&1==this.currentPageIndex&&this.adContainer.css({"z-index":3})},checkFlipping:function(){this.flipping=!1;this.loading();this.fillContent(this.currentPageIndex)},afterFlipTo:function(){this.mainPageIndex=this.currentPageIndex;this.resetPages(this.currentPageIndex);this.setBookTranX(0);this.checkFlipping();this.setAttachmentAfterFlipTo()},setAttachmentBeforeFlipTo:function(){this.adContainer&&this.adContainer.css({"z-index":1})},setAttachmentAfterFlipTo:function(){this.addHistoryTexts();this.stopMedia();this.stopAllSlider();this.addSearchHighlight();this.flipping||this.openShownSlider();this.flipping||this.openShownMedia();bookConfig.ThumbnailsButtonVisible&&thumbnail.clearHighLight();bookConfig.ThumbnailsButtonVisible&&thumbnail.setHighLight(this.getRealPageIndex());resizeBookAfterFlip&&!this.flipping&&window.setTimeout(function(){onStageResize()},30);this.adContainer&&1==this.currentPageIndex&&this.adContainer.css({"z-index":3})},endFlip:function(){this.flipping=!1},loading:function(){this.flipping||this.pageArray[this.currentPageIndex]&&this.pageArray[this.currentPageIndex].loading()},getCurrentPageIndex:function(){return this.getRealPageIndex()},getCurrentPages:function(){return[this.currentPageIndex]},setCSSByStyle:function(c){this.flipBook.css(c)},setShow:function(c){},hide:function(){Log.debug("slide book hide.");this.setCSSByStyle({display:"none"});this.stopMedia();this.stopAllSlider()},show:function(){Log.debug("slide book show.");this.setCSSByStyle({display:"block"});this.openShownSlider();this.openShownMedia();this.addHistoryTexts();this.addSearchHighlight()},addHistoryTexts:function(){var g=[1];try{g=BookInfo.getCurrentPages()}catch(l){g=[1]}for(var k=this.pageArray.length,h=0;h<k;h++){this.pageArray[h]&&this.pageArray[h].addHistoryTexts(g)}},addSearchHighlight:function(){var c=this.currentPageIndex;this.pageArray[c]&&this.pageArray[c].highlightSearch()},clearSearchHighlight:function(){for(var d=this.pageArray.length,f=0;f<d;f++){this.pageArray[f]&&this.pageArray[f].clearHighlight()}},openShownSlider:function(){var c=this.currentPageIndex;this.pageArray[c]&&this.pageArray[c].playSlider()},stopAllSlider:function(){for(var d=this.pageArray.length,f=0;f<d;f++){this.pageArray[f]&&this.pageArray[f].resetSlider()}},openShownMedia:function(){var c=this.currentPageIndex;this.pageArray[c]&&this.pageArray[c].enterSide()},stopMedia:function(){for(var d=this.pageArray.length,f=0;f<d;f++){this.pageArray[f]&&this.pageArray[f].leaveSide()}},destroy:function(){}}).extend(Book);SlideBook.expand({initEvent:function(){this.moveDirectionType={MOVE_LEFT:-1,MOVE_RIGHT:1,MOVE_NONE:0};this.mouseMoveDirection=this.moveDirectionType.MOVE_NONE;this.hammerEventModular();this.mouseWheelFlip()},hammerEventModular:function(){var c=new Hammer.Manager(this.flipBook[0]);c.add(new Hammer.Pan);c.add((new Hammer.Swipe).recognizeWith(c.get("pan")));c.add(new Hammer.Press);c.add(new Hammer.Pinch);c.add(new Hammer.Tap({event:"doubletap",taps:2}));c.add(new Hammer.Tap);c.on("panstart panmove",this.onPan.bind(this));c.on("press",this.onPress.bind(this));c.on("tap",this.onTap.bind(this));this.flipBook.bind("mouseover mousemove",this.onOver.bind(this));this.flipBook.bind(_event._down,this.onDown.bind(this));$("body").bind(_event._end,this.onUp.bind(this));this.flipBook.speed(this.onSwipe.bind(this))},onPan:function(c){},onPress:function(c){},onTap:function(c){onWindowTap(c.srcEvent)},onOver:function(c){},onDown:function(c){},onUp:function(c){},onSwipe:function(f,h){if(!this.status_zoom&&!this.isZomming&&!this.dragToFlip){var g;g=30*this.width/1600;Math.abs(f)<=g||(f<-g?rightToLeft?previousPageFun():nextPageFun():f>g&&(rightToLeft?nextPageFun():previousPageFun()))}}});var DoubleSlideBook=Class({getRealPageIndex:function(){var c=2*this.currentPageIndex-1;return c=Number.between(c,1,bookConfig.totalPageCount)},getRealBookIndex:function(c){c=parseInt(c/2)+1;return c=Number.between(c,1,bookConfig.totalPageCount)},setCurrentIndexTextField:function(){setCurrentIndexTextField(this.getRealPageIndex(),!0)},pageLength:function(){return parseInt(bookConfig.totalPageCount/2)+1},newPage:function(c){return new SlideBookPage(c,"slidePage",this.bookType,this.onBookPageLoaded.bind(this))}}).extend(SlideBook),SingleSlideBook=Class({getRealPageIndex:function(){var c=this.currentPageIndex;return c=Number.between(c,1,bookConfig.totalPageCount)},getRealBookIndex:function(c){return c=Number.between(c,1,bookConfig.totalPageCount)},setCurrentIndexTextField:function(){setCurrentIndexTextField(this.getRealPageIndex(),!1)},pageLength:function(){return bookConfig.totalPageCount},newPage:function(c){return new SingleSlideBookPage(c,"slidePage",this.bookType,this.onBookPageLoaded.bind(this))}}).extend(SlideBook),PcDoubleSlideBook=Class({bookType:BookType.slide_book,create:function(c){this._super(c)},initBook:function(){this._super();void 0!=global.staticAd&&!0==staticAd.haveAd&&this.insertStaticAd()}}).extend(DoubleSlideBook),PcSingleSlideBook=Class({bookType:BookType.singleSlide_book,create:function(c){this._super(c)}}).extend(SingleSlideBook),CatalogBook=Class({bookType:BookType.catalog_book,guidBarHeight:0,create:function(c){this._super(c)},initBook:function(){this._super();this.initCatalogBar()},newPage:function(c){return 1!=c&&2!=c&&c!=totalPageCount&&c!=totalPageCount-1||!bookConfig.HardPageEnable?new NormalPage(c,"page",!1,BookType.catalog_book,this.onBookPageLoaded.bind(this)):new BookPage(c,"page",BookType.catalog_book,this.onBookPageLoaded.bind(this))},initCatalogBar:function(){this.controlBar=new CatalogControlBar(this.parent);this.controlBar.setPosition((windowWidth-this.controlBar.width)/2,this.getControlBarTop(),["left","top"]);this.controlBar.setVisible(!1);this.flipBook.append(this.leftFlipShotBar.getContainer());this.flipBook.append(this.rightFlipShotBar.getContainer())},getControlBarTop:function(){return"lite"==bookConfig.ToolbarViewMode.toLowerCase()?50:global.toolBar&&toolBar.getTopHeight?toolBar.getTopHeight()+5:5},initThickness:function(){this.thicknessWidth=18;this.leftThickness=new LeftThickness(this.flipBook,this.thicknessWidth);this.rightThickness=new RightThickness(this.flipBook,this.thicknessWidth)},beforeZoomIn:function(){this._super();thumbnail&&thumbnail.visible&&thumbnail.transparent&&thumbnail.transparent()},afterZoomOut:function(){this._super();thumbnail&&thumbnail.visible&&thumbnail.noTransparent&&thumbnail.noTransparent()},onResize:function(d,f){this._super(d,f);if(this.leftFlipShotBar){this.leftFlipShotBar.onResize(d,f)}if(this.rightFlipShotBar){this.rightFlipShotBar.onResize(d,f)}this.controlBar.setPosition((windowWidth-this.controlBar.width)/2,this.getControlBarTop(),["left","top"])}}).extend(NormalBook),CatalogSimpleBook=Class({create:function(c){this._super(c)},initBook:function(){this._super();this.guidBar=new GuidToolbar(this.parent);this.guidBarHeight="lite"==bookConfig.ToolbarViewMode.toLowerCase()?50:0},getFitWH:function(){var d=Math.max(windowWidth-bookConfig.leftMargin-bookConfig.rightMargin-2*totalThicknessWidth()-toolBar.getWidth(),1),f=0;thumbnail&&thumbnail.getHeight();f=toolBar.visible?Math.max(windowHeight-bookConfig.topMargin-bookConfig.bottomMargin-toolBar.getHeight(),1):Math.max(windowHeight-bookConfig.topMargin-this.guidBarHeight-bookConfig.bottomMargin-toolBar.getHeight(),1);return pageWidthHeight=getPageWidthHeight(d-0.7*f/8,f,2*bookConfig.largePageWidth,bookConfig.largePageHeight)},getTranX:function(f){if(!bookConfig.retainBookCenter){return 0}var h=0;1==this.currentPageIndex&&(h=rightToLeft?this.width*f/4:-this.width*f/4);this.currentPageIndex==totalPageCount&&(h=rightToLeft?-this.width*f/4:this.width*f/4);if(!this.pageWidthHeight){return 0}f=0;f=this.getCssLeft();var g=Math.max(windowWidth-bookConfig.leftMargin-bookConfig.rightMargin-2*totalThicknessWidth()-toolBar.getWidth(),1);f=bookConfig.leftMargin+toolBar.getLeftWidth()+(g-this.pageWidthHeight.x)/2-f-(this.width-this.pageWidthHeight.x)/2;return f+h},getTranY:function(){if(!this.pageWidthHeight){return 0}var d=0,d=this.getCssTop(),f=0,f=thumbnail?thumbnail.getHeight():0;toolBar.visible?(f=Math.max(windowHeight-bookConfig.topMargin-bookConfig.bottomMargin-toolBar.getHeight(),1),d=bookConfig.topMargin+toolBar.getTopHeight()+(f-this.pageWidthHeight.y)/2-d):(f=Math.max(windowHeight-bookConfig.topMargin-bookConfig.bottomMargin-50-f,1),d=bookConfig.topMargin+50+(f-this.pageWidthHeight.y)/2-d);return d},showOrHideLiteThumbnail:function(){if(!(this.flipArray.array&&0<this.flipArray.array.length||this.status_zoom||!0==this.isFlipping||!0==this.isZomming)){this.pageWidthHeight=this.getFitWH();var f=this.getTranY();if(this.pageWidthHeight.x!==this.width||0!=f){var h=this.pageWidthHeight.x/this.width,g=this.getTranX(h);this.flipBook.animateToTransform.bind(this.flipBook)(h,{x:g,y:f},{x:50,y:0});return !1}}},hideToolBarAndShowGuidBar:function(){if(!this.status_zoom&&!0!=this.isFlipping&&!0!=this.isZomming){this.guidBar&&this.guidBar.show();toolBar&&toolBar.hide();this.mode="simple";thumbnail&&thumbnail.visible&&thumbnail.show();this.pageWidthHeight=this.getFitWH();var f=this.getTranY(),h=this.pageWidthHeight.x/this.width,g=this.getTranX(h);this.pageWidthHeight.x==this.width&&0==f&&0==g||this.flipBook.animateToTransform.bind(this.flipBook)(h,{x:g,y:f},{x:50,y:0})}},hideGuidBarAndShowToolBar:function(){if(!this.status_zoom&&!0!=this.isFlipping&&!0!=this.isZomming){this.guidBar&&this.guidBar.hide();toolBar&&toolBar.show();this.mode="complex";thumbnail&&thumbnail.visible&&thumbnail.show();this.pageWidthHeight=this.getFitWH();var f=this.getTranY(),h=this.pageWidthHeight.x/this.width,g=this.getTranX(h);this.pageWidthHeight.x==this.width&&0==f&&0==g||this.flipBook.animateToTransform.bind(this.flipBook)(h,{x:g,y:f},{x:50,y:0})}}}).extend(CatalogBook);var cursor,AnnotationPannel=Class({create:function(d){var f=this;this.width=65;this.itemWidth=37;this.itemHeight=33;this.showButtonHeight=18;this.padding=8;isBelowIE9()?this.buttonCount=6:this.buttonCount=7;this.itemBoxWidth=this.width-10;this.itemBoxHeight=this.buttonCount*(this.itemHeight+this.padding)+2*this.padding+this.itemHeight;this.height=this.itemBoxHeight+this.showButtonHeight+10;this.background=$("<div></div>");this.showHideButton=$("<div></div>");this.contentBox=$("<div></div>");d.append(this.background);this.background.append(this.showHideButton);this.background.append(this.contentBox);this.background.css({width:this.width+"px",height:this.height+"px",left:"100px",top:(windowHeight-this.height)/2+"px","z-index":"10",position:"absolute"});this.contentBox.css({width:this.itemBoxWidth+"px",height:this.itemBoxHeight+"px",left:(this.width-this.itemBoxWidth)/2+"px",top:6+this.showButtonHeight+"px",position:"absolute",background:"#535353","border-top":"1px solid #6a6a6a","border-radius":"0px 0px 2px 2px","-webkit-box-shadow":"0 0 5px rgba(54, 54, 54, 0.95)","-moz-box-shadow":"0 0 5px rgba(54, 54, 54, 0.95)","-o-box-shadow":"0 0 5px rgba(54, 54, 54, 0.95)","box-shadow":"0 0 5px rgba(54, 54, 54, 0.95)"});this.showHideButton.css({top:"5px",left:(this.width-this.itemBoxWidth)/2+"px",width:this.itemBoxWidth+"px",height:this.showButtonHeight+"px",position:"absolute","border-radius":"3px 3px 0px 0px","border-bottom":"1px solid #000000",background:"#383838","-webkit-box-shadow":"0 0 5px rgba(54, 54, 54, 0.95)","-moz-box-shadow":"0 0 5px rgba(54, 54, 54, 0.95)","-o-box-shadow":"0 0 5px rgba(54, 54, 54, 0.95)","box-shadow":"0 0 5px rgba(54, 54, 54, 0.95)"});d=$("<img/>");d.attr("src",uiBaseURL+"noteclose.png");d.css({position:"absolute",right:"5px",width:10,height:10,top:(this.showButtonHeight-10)/2+"px"});d.asImageButton();d.bind(_event._end,function(){f.hide()});this.showHideButton.append(d);this.buttonType=0;this.CreateNoteRemark();this.addItem(this.contentBox);this.addSonItem(this.background);this.changeCursor();this.initEvent();this.background.css("display","none");this.showing=!1},CreateNoteRemark:function(){isPhone()||(global.noteCookie=new NoteCookie(tmpContainer),global.textRemark=new Remark,isBelowIE9()||(global.signature=new Signature(tmpContainer)),global.annotationShapes=window.AnnotationShapes,global.annotationImage=new AddImageFile(tmpContainer),global.textRemark.bindOnCreated(this,this.resetButton),global.noteCookie.bindOnCreated(this,this.resetButton),global.annotationShapes.bindOnCreated(this,this.resetButton),global.annotationImage.bindOnCreated(this,this.resetButton),isBelowIE9()||global.signature.bindOnCreated(this,this.resetButton))},addItem:function(h){for(var n=this,m=this.buttonType=0;m<this.buttonCount;m++){var l=$("<div></div>"),k=$("<img/>");$(l).attr("buttonType",m);l.css({width:n.itemWidth+"px",height:n.itemHeight+"px",left:(n.itemBoxWidth-n.itemWidth)/2+"px",top:n.itemWidth/2+n.padding+m*(n.itemHeight+this.padding)+"px",position:"absolute","border-radius":"2px"});k.css({"margin-left":"5px","margin-top":"3px",position:"absolute"});h.append(l);l.append(k);l.bind(_event._over,function(){$(this).removeClass();$(this).attr("class","item-enter")});l.bind(_event._end,function(){$(this).removeClass();$(this).attr("class","item-enter")});l.bind(_event._leave,function(){n.buttonType!=$(this).attr("buttonType")&&($(this).removeClass(),$(this).attr("class","item-transparent"))});switch(m){case 0:k.attr("src",uiBaseURL+"cursor.png");k.attr("title",getLanguage("tltCursor","cursor"));n.cursorButton=l;$(l).bind(_event._down,function(){n.resetButton()});break;case 1:k.attr("src",uiBaseURL+"highligh.png");k.attr("title",getLanguage("tltAddHighlight","add highlight"));$(l).bind(_event._down,function(){global.annotationImage.offCreateEvents();annotationShapes.delEvents();isBelowIE9()||signature.hide();textRemark.unbindCreateEvents();textRemark.addHighlightEvent();noteCookie.hide();cursor=!1;1!=n.buttonType&&n.changeCursor();n.buttonType=1;n.selectButton=n.highLightButton;n.shapesPanelHide()});n.highLightButton=l;break;case 2:k.attr("src",uiBaseURL+"remark.png");k.attr("title",getLanguage("tltAddTexts","add texts"));$(l).bind(_event._down,function(){global.annotationImage.offCreateEvents();annotationShapes.delEvents();isBelowIE9()||signature.hide();textRemark.unbindCreateEvents();textRemark.addEvents();noteCookie.hide();cursor=!1;2!=n.buttonType&&n.changeCursor();n.buttonType=2;n.selectButton=n.textRemarkButton;n.shapesPanelHide()});n.textRemarkButton=l;break;case 3:k.attr("src",uiBaseURL+"shape.png");k.attr("title",getLanguage("tltAddShapes","add shapes"));$(l).bind(_event._down,function(){global.annotationImage.offCreateEvents();annotationShapes.delEvents();isBelowIE9()||signature.hide();textRemark.unbindCreateEvents();noteCookie.hide();cursor=!1;3!=n.buttonType&&n.changeCursor();n.buttonType=3;n.selectButton=n.shapeButton});$(l).bind(_event._over,function(){});$(l).bind(_event._leave,function(){3!=n.buttonType&&n.shapesPanelHide()});$(l).bind(_event._end,function(){n.shapesPanelShowOrHide()});n.shapeButton=l;break;case 4:k.attr("src",uiBaseURL+"notesadd.png");k.attr("title",getLanguage("tltAddNotes","add notes"));$(l).bind(_event._down,function(){global.annotationImage.offCreateEvents();annotationShapes.delEvents();isBelowIE9()||signature.hide();textRemark.unbindCreateEvents();noteCookie.showHide();cursor=!1;4!=n.buttonType&&n.changeCursor();n.buttonType=4;n.selectButton=n.noteCookieButton;n.shapesPanelHide()});n.noteCookieButton=l;break;case 5:k.attr("src",uiBaseURL+"addImage.png");k.attr("title",getLanguage("tltAddImageFile","add image file"));$(l).bind(_event._down,function(){annotationShapes.delEvents();isBelowIE9()||signature.hide();textRemark.unbindCreateEvents();global.annotationImage.addCreateEvents();noteCookie.hide();cursor=!1;5!=n.buttonType&&n.changeCursor();n.buttonType=5;n.selectButton=n.annotationImageButton;n.shapesPanelHide()});n.annotationImageButton=l;break;case 6:k.attr("src",uiBaseURL+"signature.png"),k.attr("title",getLanguage("tltAddSignature","add signature")),$(l).bind(_event._down,function(){global.annotationImage.offCreateEvents();annotationShapes.delEvents();isBelowIE9()||signature.showHide();textRemark.unbindCreateEvents();noteCookie.hide();cursor=!1;6!=n.buttonType&&n.changeCursor();n.buttonType=6;n.selectButton=n.signatureButton;n.shapesPanelHide()}),n.signatureButton=l}}},addSonItem:function(k){var p=parseInt(this.contentBox.css("left"))+parseInt(this.contentBox.css("width")),o=parseInt(this.shapeButton.css("top"))+parseInt(this.contentBox.css("top"))-this.padding/2,n=(parseInt(this.contentBox.css("width"))-this.itemWidth)/2+8;this.shapesPannel=$("<div></div>");this.shapesContentBox=$("<div></div>");this.shapesPannel.css({width:n+180+8,height:49,position:"absolute",left:p-n+"px",top:o+"px"});this.shapesContentBox.css({width:188,height:49,position:"absolute",left:n+"px",background:"#535353","border-radius":"0px 2px 2px 0px","-webkit-box-shadow":"0 0 5px rgba(54, 54, 54, 0.95)","-moz-box-shadow":"0 0 5px rgba(54, 54, 54, 0.95)","-o-box-shadow":"0 0 5px rgba(54, 54, 54, 0.95)","box-shadow":"0 0 5px rgba(54, 54, 54, 0.95)"});k.append(this.shapesPannel);this.shapesPannel.append(this.shapesContentBox);this.shapesPanelHide();var m=this;this.shapesPannel.bind(_event._end+" "+_event._enter,function(){m.shapesPanelShow()});for(k=0;4>k;k++){var n=$("<div></div>"),l=$("<img/>"),o=8,p=8+45*k;n.css({width:"37px",height:"33px",left:p+"px",top:o+"px",position:"absolute","border-radius":"2px"});l.css({"margin-left":"5px","margin-top":"3px",position:"absolute"});this.shapesContentBox.append(n);n.append(l);switch(k){case 0:l.attr("src",uiBaseURL+"shapes_line.png");l.attr("title",getLanguage("tltAddLine","add line"));$(n).bind(_event._down,function(){m.clickShape();annotationShapes.addEvents("line");m.shapesPanelHide()});break;case 1:l.attr("src",uiBaseURL+"shapes_arrow.png");l.attr("title",getLanguage("tltAddArrow","add arrow"));$(n).bind(_event._down,function(){m.clickShape();annotationShapes.addEvents("arrow");m.shapesPanelHide()});break;case 2:l.attr("src",uiBaseURL+"shapes_rect.png");l.attr("title",getLanguage("tltAddRect","add rect"));$(n).bind(_event._down,function(){m.clickShape();annotationShapes.addEvents("rect");m.shapesPanelHide()});break;case 3:l.attr("src",uiBaseURL+"shapes_ellipse.png"),l.attr("title",getLanguage("tltAddEllipse","add ellipse")),$(n).bind(_event._down,function(){m.clickShape();annotationShapes.addEvents("ellipse");m.shapesPanelHide()})}n.bind(_event._over,function(){$(this).removeClass();$(this).attr("class","item-enter")});n.bind(_event._end,function(){$(this).removeClass();$(this).attr("class","item-transparent")});n.bind(_event._leave,function(){$(this).removeClass();$(this).attr("class","item-transparent")})}},shapesPanelShow:function(){this.shapesPannelShowHide=!0;this.shapesPannel.show()},shapesPanelHide:function(){this.shapesPannelShowHide=!1;this.shapesPannel.hide()},shapesPanelShowOrHide:function(){this.shapesPannelShowHide?this.shapesPanelHide():this.shapesPanelShow()},clickShape:function(){},resetButton:function(){cursor=!0;0!=this.buttonType&&this.changeCursor();this.buttonType=0;this.selectButton=this.cursorButton;this.shapesPanelHide();void 0!=textRemark&&textRemark.unbindCreateEvents();void 0!=noteCookie&&noteCookie.hide();void 0!=annotationShapes&&annotationShapes.delEvents();void 0==signature||isBelowIE9()||signature.hide();void 0!=global.annotationImage&&global.annotationImage.offCreateEvents()},changeCursor:function(){void 0==this.selectButton&&(this.selectButton=this.cursorButton);cursor?($(this.selectButton).removeClass(),$(this.selectButton).attr("class","item-transparent"),$(this.cursorButton).removeClass(),$(this.cursorButton).attr("class","item-enter")):($(this.selectButton).removeClass(),$(this.selectButton).attr("class","item-transparent"))},onResize:function(){this.background.css({left:"100px",top:(windowHeight-this.height)/2+"px"})},hide:function(){$(this.background).fadeOut(500);this.showing=!1;this.resetButton()},show:function(){$(this.background).fadeIn(500);this.showing=!0},showOrHide:function(){this.showing?this.hide():this.show()},getShowStatu:function(){return this.showing},initEvent:function(){$(this.background).dragToMove(this.background)}});var phoneGotoPage=Class({create:function(c){this.mainColor=bookConfig.toolbarColor;this.menu=$("<div id='menu' style='position:absolute;width:100%;height:50px;z-index:98;bottom:-41px;'></div>");this.background=$("<div id='background' style='position:absolute;width:100%;height:50px;'></div>");this.contentBox=$("<div id='contentBox' class='phoneGotoPageContent' style='position:absolute;width:100%;height:50px;'></div>");this.background.css({background:this.mainColor,opacity:0.8});c.append(this.menu);this.menu.append(this.background);this.menu.append(this.contentBox);this.initContentBox();this.initEvent();this.visible=!1},initContentBox:function(){this.contentBox.css({"text-align":"center",display:"inline-block"});this.backwardButton=$("<div class='btn' style='margin-left:-3px;'><img src=''/></div>");this.firstButton=$("<div class='btn'><img src=''/></div>");bookConfig.enablePageBack||this.firstButton.css({"margin-left":"-3px"});this.prevButton=$("<div class='btn'><img src=''/></div>");this.nextButton=$("<div class='btn'><img src=''/></div>");this.lastButton=$("<div class='btn'><img src=''/></div>");this.forwardButton=$("<div class='btn'><img src=''/></div>");this.goButton=$("<div class='goBtn'><img src=''/></div>");this.setSrc(this.backwardButton.find("img"),"backward");this.setSrc(this.firstButton.find("img"),"firstPage");this.setSrc(this.prevButton.find("img"),"previousPage");this.setSrc(this.nextButton.find("img"),"nextPage");this.setSrc(this.lastButton.find("img"),"lastPage");this.setSrc(this.forwardButton.find("img"),"forward");this.setSrc(this.goButton.find("img"),"goPage");this.inputButton=$("<div class='inputButton' style='width:100px;'><input id='currentPageIndexTextField' type='text'/></div>");bookConfig.enablePageBack&&this.contentBox.append(this.backwardButton);this.contentBox.append(this.firstButton);this.contentBox.append(this.prevButton);this.contentBox.append(this.inputButton);this.contentBox.append(this.nextButton);this.contentBox.append(this.lastButton);bookConfig.enablePageBack&&this.contentBox.append(this.forwardButton);this.inputButton.append(this.goButton);$("#currentPageIndexTextField").css({padding:"0px","text-align":"center","border-width":"0px",background:"#aeaeb1",width:"70px","padding-right":"30px",height:"30px","border-radius":"0px",position:"absolute",color:bookConfig.pageNumColor,left:0,top:0})},setSrc:function(f,h,g){g&&""!=g?f.attr("src",g):phone_toolbar_icons&&phone_toolbar_icons[h]?f.attr("src","data:image/png;base64,"+phone_toolbar_icons[h]):f.attr("src",phoneBaseURL+h+".png");this.colorChanged=!1;this.changeColor(f)},changeColor:function(d,f){this.changeIconColor(d,f)},changeIconColor:function(d,f){d&&(f||(f=Color(bookConfig.iconColor).toString()),this.colorChanged||d.changeButtonColor(f,!1,function(){this.colorChanged=!0}.bind(this)))},changeCaptionColor:function(c){if(this.fontColor||c){c||(c=this.fontColor.toString()),this.$caption&&this.$caption.css("color",c)}},show:function(){this.menu.animate({bottom:40},300);this.visible=!0},hide:function(){this.menu.animate({bottom:-80},300);this.visible=!1},showOrHide:function(){!0===this.visible?this.hide():this.show()},initEvent:function(){this.firstButton.bind(_event._end,function(){rightToLeft?lastPageFun():firstPageFun();return !1});this.prevButton.bind(_event._end,function(){rightToLeft?nextPageFun():previousPageFun();return !1});this.nextButton.bind(_event._end,function(){rightToLeft?previousPageFun():nextPageFun();return !1});this.lastButton.bind(_event._end,function(){rightToLeft?firstPageFun():lastPageFun();return !1});this.goButton.bind(_event._end,function(){var c=parseInt($("#currentPageIndexTextField").val().replace(/\D/g,"")),c=Math.min(Math.max(c,1),totalPageCount);gotoPageFun(c);return !1}.bind(this));this.backwardButton.bind(_event._end,function(){rightToLeft?forwardEvent():backwardEvent();return !1});this.forwardButton.bind(_event._end,function(){rightToLeft?backwardEvent():forwardEvent();return !1})}});var passwardPannel={show:function(){this.created||(this.initHtml(),this.initPrompt(),this.initEvent());this.background.show();this.view.show();try{var c=FlipBookAPI.getStoredPassword();if(c){this.passward.attr("value",c);console.log("This flipbook is validated; skip login");this.login();return}}catch(b){}},initHtml:function(){this.created=!0;this.background=$("<div class='passwardPannel-background'></div>");this.view=$("<div class='passwardPannel'></div>");this.icon=$("<div id='icon' class='icon'></div>");this.username=$("<input id='username' placeholder='"+getLanguage("lblName","Name")+"' class='username'></input>");this.passward=$("<input id='passward' type='password' placeholder='"+getLanguage("lblPassword","Password")+"' class='passward'></input>");this.loginIn=$("<p id='loginIn' class='loginIn'>"+getLanguage("lblLogin","Login")+"</p>");this.cancleIn=$("<p id='cancleIn' class='cancleIn'>"+getLanguage("lblCancel","Cancel")+"</p>");this.passwardResult=$("<span id='passwardResult' class='passwardResult'></span>");this.view.append(this.icon);2==passwardType()&&(this.view.css("height","390px"),this.view.append(this.username));this.view.append(this.passward);this.view.append(this.loginIn);this.view.append(this.cancleIn);this.view.append(this.passwardResult);$("body").append(this.background);$("body").append(this.view);this.passward.focus();var b=this;this.passward.keypress(function(c){if(c.which==13){b.login()}});this.icon.addCssSprite(phoneIconsURL[0],"passward",100,100,phoneIconInfo)},initPrompt:function(){if(bookConfig.passwardPrompt){this.prompt=$("<div class='prompt'></div>");this.arrow=$("<div class='arrow'></div>");this.prompt.html(bookConfig.passwardPrompt);this.view.append(this.prompt);this.view.append(this.arrow);this.prompt.width();var d=this.prompt.height(),f=this.passward.width();this.passward.height();f+=58;d=this.arrow.top()-(d+15)/2;this.prompt.css({left:f+"px",top:(0<d?d:0)+"px"})}},initEvent:function(){this.background.bind(_event._down,function(c){c.stopPropagation()});this.background.bind(_event._move,function(c){c.stopPropagation()});this.background.bind(_event._end,function(c){c.stopPropagation()});this.cancleIn.bind(_event._end,function(){this.hide()}.bind(this));this.loginIn.bind(_event._end,function(){this.login()}.bind(this));this.prompt&&(this.passward.bind(_event._enter,function(){this.prompt.show();this.arrow.show()}.bind(this)),this.passward.bind(_event._leave,function(){this.passward.is(":focus")?(this.prompt.show(),this.arrow.show()):(this.prompt.hide(),this.arrow.hide())}.bind(this)),this.passward.bind("focus",function(){this.prompt.show();this.arrow.show()}.bind(this)),this.passward.bind("blur",function(){this.prompt.hide();this.arrow.hide()}.bind(this)))},login:function(){verifyPassward()?(this.hide(),this.fillCurrentPageContent()):this.showResult()},fillCurrentPageContent:function(){for(var d=BookInfo.getCurrentPages(),f=0;f<d.length;f++){BookInfo.getBook().fillPage(d[f])}thumbnail&&thumbnail.show&&thumbnail.fillContent&&thumbnail.fillContent()},hide:function(){this.background.hide();this.view.hide()},showResult:function(){document.getElementById("username")&&!this.username.val()?this.passwardResult.html(getLanguage("lblNoName","User name can not be empty.")):this.passward.val()?this.passwardResult.html(getLanguage("lblNoCorrectLogin","Please enter the correct user name and password.")):this.passwardResult.html(getLanguage("lblNoPassword","Password can not be empty."))}};var MiniStyle=Class({statics:{isMini:function(){if((isPhone()||isPad())&&!isInTheFrame()||!bookConfig.MiniStyle||fullScreenApi.isFullScreen()){return !1}var c=this.getMaxMiniWidthHeight();if(windowWidth>c.w&&windowHeight>c.h){return !1}this.init();return !0},getMaxMiniWidthHeight:function(){for(var h=bookConfig.maxWidthToSmallMode,n=bookConfig.maxHeightToSmallMode,m=window.location.search.split("&"),l=0;l<m.length;l++){var k=m[l].toLowerCase();0<=k.indexOf("maxwidthtosmallmode")&&(h=parseInt(k.substring(k.indexOf("maxwidthtosmallmode")+19+1,k.length)));0<=k.indexOf("maxheighttosmallmode")&&(n=parseInt(k.substring(k.indexOf("maxheighttosmallmode")+20+1,k.length)))}return{w:h,h:n}},init:function(){this.caption||(this.caption=$("<div class='miniTitle'></div>"),this.caption.html(getLanguage("lblFullscreen","Click to view in fullscreen.")),tmpContainer.append(this.caption),this.initEvent())},initEvent:function(){this.caption.bind(_event._down,function(){this.isMini()&&readAsFullscreen()}.bind(this));this.caption.bind(_event._leave,function(){this.isMini()&&this.hide()}.bind(this));bookContainer.bind("mousemove",function(c){this.isMini()&&c.pageX>windowWidth/2-25&&c.pageX<windowWidth/2+25&&c.pageY>windowHeight/2-25&&c.pageY<windowHeight/2+25&&this.show()}.bind(this))},hide:function(){this.caption&&this.caption.animate({opacity:0},200,function(){this.caption.hide()}.bind(this))},show:function(){this.caption&&(this.caption.show(),this.caption.animate({opacity:1},200))},destroy:function(){this.caption&&(this.caption.remove(),this.caption=void 0)}}});Log.debug("browser : %s, system : %s",Instance.JSON($.browser),Instance.JSON($.system));jQuery(document).ready(main);function main(){selectLanguage(bookConfig.language);isBelowIE8()?alert(getLanguage("infNotSupportHtml5","Your browser can not support HTML5.")):global.bookConfig?(initBrowserType(),initConfig(),initStage()):(alert(getLanguage("msgConfigMissing","Configuration file is missing, unable to open the book.")),function(){window.location=window.location.href}.delay(500))}function initBrowserType(){$.browser.webkit&&(global.browserType=BrowserType.WEBKIT);$.browser.mozilla&&(global.browserType=BrowserType.MOZ);$.browser.opera&&(global.browserType=BrowserType.OPERA);$.browser.msie&&(global.browserType=BrowserType.MS)}function initConfig(){checkBookConfig();global.bookType=bookConfig.showDoublePage?0:1;global.rightToLeft=parseBool(bookConfig.RightToLeft,!1);global.originTotalPageCount=parseInt(bookConfig.totalPageCount);global.totalPageCount=originTotalPageCount+(1==originTotalPageCount%2?1:0);if(!global.ols||0>=global.ols.length){global.ols=[],bookConfig.TableOfContentButtonVisible=!1}global.bmtConfig||(global.bmtConfig=[]);initImageBaseUrl();initZoomPageSize()}function initImageBaseUrl(){global.uiBaseURL=bookConfig.UIBaseURL;uiBaseURL&&"string"==typeof uiBaseURL&&"/"!=uiBaseURL.substr(uiBaseURL.length-1,1)&&(uiBaseURL+="/");global.phoneBaseURL=uiBaseURL;global.uiBaseURL=uiBaseURL+"style/icon/";global.phoneBaseURL=phoneBaseURL+"style/phoneIcon/";global.soundBaseURL=uiBaseURL.replace("/icon/","/raw/")}function initZoomPageSize(){global.zoomPageWidth=parseInt(bookConfig.largePageWidth);global.zoomPageHeight=parseInt(bookConfig.largePageHeight);var d=zoomPageWidth/zoomPageHeight,f=zoomPageHeight;zoomPageHeight=Math.max(zoomPageHeight,1440);f!==zoomPageHeight&&(zoomPageWidth=zoomPageHeight*d)}function initStage(){$.browser.device==$.browser.DEVICE_PAD&&$("html").css({height:window.innerHeight+"px"});global.pageIndexTextField=$("#currentPageIndexTextField");global.tmpContainer=$("<div id= 'tmpContainer' class='tmpContainer'></div>");global.bookContainer=$("<div id= 'bookContainer' class='bookContainer'></div>");$("body").append(tmpContainer);tmpContainer.append(bookContainer);global.windowWidth=$("body").width();global.windowHeight=$("body").height();global.onBookLoad=new LoadingBook(tmpContainer,bookConfig.loadingBackground);preloadImages()}function doSecurityTest(){if(bookConfig.iesbSecurity){iesbSecurityPannel.show()}else{onBookLoad.chooseBookStyle()}}function preloadImages(){global.toolBarIconsURL=[uiBaseURL+"previous_normal.png",uiBaseURL+"next_normal.png"];global.phoneIconsURL=[phoneBaseURL+"phone_icon.png"];var d=function(c){jsLoadingBar&&jsLoadingBar.destroy();doSecurityTest()},f=function(c){jsLoadingBar&&jsLoadingBar.destroy();console.log("Preloading Ready");doSecurityTest();setTimeout(function(){window.scrollTo(0,1)},0)};isPhone()||isPad()?$(window).loader(phoneIconsURL,f):$(window).loader(toolBarIconsURL,d)}var pw=window.pw||{};(function(k){var c="jl8jKsYDwB";k.Alea=function(l){var n=this,m=b();n.next=function(){var o=2091639*n.s0+n.c*2.3283064365386963e-10;n.s0=n.s1;n.s1=n.s2;return n.s2=o-(n.c=o|0)};n.c=1;n.s0=m(" ");n.s1=m(" ");n.s2=m(" ");n.s0-=m(l);if(n.s0<0){n.s0+=1}n.s1-=m(l);if(n.s1<0){n.s1+=1}n.s2-=m(l);if(n.s2<0){n.s2+=1}m=null};function b(){var m=4022871197;var l=function(p){p=p.toString();for(var n=0;n<p.length;n++){m+=p.charCodeAt(n);var o=0.02519603282416938*m;m=o>>>0;o-=m;o*=m;m=o>>>0;o-=m;m+=o*4294967296}return(m>>>0)*2.3283064365386963e-10};return l}var g=32;var d=126;var f=d-g;var h=f-1;k.encrypt=function(q){var o=new k.Alea(c);var t=q.length;var m=new Array(t);for(var l=0;l<t;l++){var s=q.charCodeAt(l);if(g<=s&&s<=d){var p=Math.floor(o.next()*h);var r=(s+p-g)%f+g;m[l]=r}else{m[l]=s}}return String.fromCharCode.apply(String,m)};k.decrypt=function(q){var o=new Array(t);var t=q.length;var m=new k.Alea(c);for(var l=0;l<t;l++){var s=q.charCodeAt(l);if(g<=s&&s<=d){var p=Math.floor(m.next()*h);var r=(s-p-g+f)%f+g;o[l]=r}else{o[l]=s}}return String.fromCharCode.apply(String,o)}})(pw);var iesbSecurityPannel={show:function(){var d=this;var g;try{var h=localStorage.getItem("pwSession");if(h){g=JSON.parse(pw.decrypt(h));FlipBookAPI.user_info=g.user}}catch(f){}if(g){var c=g.user;var b={idUser:c.id,idRole:c.idRole,groups:$.map(c.groups,function(l,k){return l.idGroup}).join(","),idLogin:c.idLogin,bookId:bookConfig.macBookVersion};$.ajax({type:"POST",url:"/rest/auth/books",data:JSON.stringify(b),contentType:"application/json"}).then(function(k){if(k.okbook){console.log("Authorized book. Loading ...");onBookLoad&&onBookLoad.chooseBookStyle()}else{console.log("Unathorized book!");d.created||(d.initHtml(),d.initEvent());d.background.show();d.view.show();d.username.hide();d.passward.hide();d.loginIn.hide();d.view.css("height","200px");d.passwardResult.html(g.username+" is not allowed to view this book.")}})}else{this.created||(this.initHtml(),this.initEvent());this.background.show();this.view.show()}},initHtml:function(){this.created=!0;this.background=$("<div class='passwardPannel-background'></div>");this.view=$("<div class='passwardPannel'></div>");this.icon=$("<center><table><tr><td><div id='icon'><img src='../../shared/piworld.png' style='height:100px'/></div></td><td><div style=''>piWorld Login</div></td></table></center>");this.username=$("<input id='username2' placeholder='Usuari piWorld' class='username'></input>");this.passward=$("<input id='passward2' type='password' placeholder='Contrasenya' class='passward'></input>");this.loginIn=$("<p id='loginIn2' class='loginIn'>"+getLanguage("lblLogin","Login")+"</p>");this.cancleIn=$("<p id='cancleIn2' class='cancleIn'>"+getLanguage("lblCancel","Cancel")+"</p>");this.passwardResult=$("<span id='passwardResult2' class='passwardResult'></span>");this.view.append(this.icon);this.view.css("height","360px");this.view.append(this.username);this.view.append(this.passward);this.view.append(this.loginIn);this.view.append(this.cancleIn);this.view.append(this.passwardResult);$("body").append(this.background);$("body").append(this.view);this.username.focus();var b=this;this.passward.keypress(function(c){if(c.which==13){b.login()}});this.icon.addCssSprite(phoneIconsURL[0],"passward",100,100,phoneIconInfo)},initPrompt:function(){if(bookConfig.passwardPrompt){this.prompt=$("<div class='prompt'></div>");this.arrow=$("<div class='arrow'></div>");this.prompt.html(bookConfig.passwardPrompt);this.view.append(this.prompt);this.view.append(this.arrow);this.prompt.width();var d=this.prompt.height(),f=this.passward.width();this.passward.height();f+=58;d=this.arrow.top()-(d+15)/2;this.prompt.css({left:f+"px",top:(0<d?d:0)+"px"})}},initEvent:function(){this.background.bind(_event._down,function(c){c.stopPropagation()});this.background.bind(_event._move,function(c){c.stopPropagation()});this.background.bind(_event._end,function(c){c.stopPropagation()});this.cancleIn.bind(_event._end,function(){window.location.href="https://piworld.es/books/"}.bind(this));this.loginIn.bind(_event._end,function(){this.login()}.bind(this))},login:function(){var c=this;var b={username:this.username.val(),password:this.passward.val(),bookId:bookConfig.macBookVersion};$.ajax({type:"POST",url:"/rest/users/login",data:pw.encrypt(JSON.stringify(b)),contentType:"text/plain;charset=UTF-8"}).then(function(g){var d;if(g.ok){try{var d=JSON.parse(pw.decrypt(g.user_info));var h={user:d,css:[]};if(d.groups.length){h.selectedGroup=d.groups[0]}localStorage.setItem("pwSession",pw.encrypt(JSON.stringify(h)))}catch(f){}}if(g.okbook){FlipBookAPI.user_info.idUser=d.idUser;FlipBookAPI.user_info.idRole=d.idRole;c.hide();console.log("Valid login. Loading book ...");onBookLoad&&onBookLoad.chooseBookStyle()}else{c.showResult();c.passwardResult.html(g.msg)}},"json")},hide:function(){this.background.hide();this.view.hide()},showResult:function(){document.getElementById("username")&&!this.username.val()?this.passwardResult.html(getLanguage("lblNoName","User name can not be empty.")):this.passward.val()?this.passwardResult.html(getLanguage("lblNoCorrectLogin","Please enter the correct user name and password.")):this.passwardResult.html(getLanguage("lblNoPassword","Password can not be empty."))}};function init(){initToolbar();initBook();initComponents();changeShowBook(bookType);onStageResize();scrapURL();setPageIndexTextField();controlAudioVolume();winodwDynamicResize();initEvents();global.initBookValues&&initBookValues()}function initToolbar(){global.shoppingCountHTML=$("<span class='shoppingCount'>0</span>");!isSlideBook()||isPhone()||isPad()||"lite"!=bookConfig.ToolbarViewMode||(global.toolBar=new PCSlideToolbar(tmpContainer));if(isPhone()||isPad()){global.toolBar=new PhoneToolbar(tmpContainer)}global.toolBar||(global.toolBar=new PCToolbar(tmpContainer));global.toolBar&&toolBar.show()}function initBook(){var c=scrapOriginPageIndex();flipHistory&&flipHistory.push({index:c});initFlipBook(c);initCatalogBook(c);initSlideBook(c)}function scrapOriginPageIndex(){var d=bookConfig.OriginPageIndex,f=window.location.hash;""!=f&&3<f.length&&"#p="==f.substr(0,3)&&(d=parseInt(getRealPageNumber(f.substr(3,f.length-3))));d=Math.max(1,d);return d=Math.min(originTotalPageCount,d)}bdor[42]=function(){return bdor[33](bdor[32](37,33)+10,36)}();function initFlipBook(c){if(bookType==BookType.normal_book||bookType==BookType.single_book){isPhone()||isPad()||toolBar.show(),bookConfig.HardPageEnable?(global.flipBook=new HardBook({parent:bookContainer,currentPageIndex:c,flippingTime:bookConfig.flippingTime,rightToLeft:rightToLeft}),global.singlePageBook=new SingleHardBook({parent:bookContainer,currentPageIndex:c,flippingTime:bookConfig.flippingTime,rightToLeft:rightToLeft})):(global.flipBook=new NormalBook({parent:bookContainer,currentPageIndex:c,flippingTime:bookConfig.flippingTime,rightToLeft:rightToLeft}),global.singlePageBook=new SingleBook({parent:bookContainer,currentPageIndex:c,flippingTime:bookConfig.flippingTime,rightToLeft:rightToLeft}))}}function initCatalogBook(c){bookType==BookType.catalog_book&&("lite"==bookConfig.ToolbarViewMode.toLowerCase()?(global.catalogBook=new CatalogSimpleBook({parent:bookContainer,currentPageIndex:c,flippingTime:bookConfig.flippingTime,rightToLeft:rightToLeft}),toolBar.hide()):global.catalogBook=new CatalogBook({parent:bookContainer,currentPageIndex:c,flippingTime:bookConfig.flippingTime,rightToLeft:rightToLeft}))}function initSlideBook(c){if(bookType==BookType.slide_book||bookType==BookType.singleSlide_book){global.slideBook=new PcDoubleSlideBook({parent:bookContainer,currentPageIndex:c,flippingTime:bookConfig.flippingTime,rightToLeft:rightToLeft}),global.singleSlideBook=new PcSingleSlideBook({parent:bookContainer,currentPageIndex:c,flippingTime:bookConfig.flippingTime,rightToLeft:rightToLeft}),(isPhone()||isPad())&&toolBar.hide()}}function initComponents(){if(isPhone()||isPad()){bookConfig.SearchButtonVisible&&(global.frmSearch=new PhoneSearchForm({parent:tmpContainer,formType:"search",rightToLeft:rightToLeft}));bookConfig.TableOfContentButtonVisible&&(global.frmTableOfContent=new PhoneTableOfContentForm({parent:tmpContainer,formType:"tableOfContent",rightToLeft:rightToLeft}));bookConfig.ShareButtonVisible&&(global.sharePanel=new PhoneShareForm({parent:tmpContainer,formType:"share",rightToLeft:rightToLeft}));bookConfig.BookMarkButtonVisible&&(global.bookmark=new PhoneBookmarkForm({parent:tmpContainer,formType:"bookmark",rightToLeft:rightToLeft}));bookConfig.PrintButtonVisible&&(global.printBody=new PhonePrintForm({parent:tmpContainer,formType:"print",rightToLeft:rightToLeft}));language&&1<language.length&&(global.languagePanel=new PhoneLanguageForm({parent:tmpContainer,formType:"language",rightToLeft:rightToLeft}));if(bookConfig.BackgroundSoundButtonVisible||bookConfig.FlipSound){global.phoneSettingBody=new PhoneSettingForm({parent:tmpContainer,formType:"setting",rightToLeft:rightToLeft})}bookConfig.ThumbnailsButtonVisible&&(thumbnail||(thumbnail=new PhoneThumbnailForm(tmpContainer)))}else{bookConfig.PrintButtonVisible&&(global.printBody=new PcPrintForm({parent:tmpContainer,formType:"print",rightToLeft:rightToLeft})),bookConfig.HelpButtonVisible&&(global.helpBody=new PcHelpForm({parent:tmpContainer,formType:"help",rightToLeft:rightToLeft})),bookConfig.aboutButtonVisible&&(global.aboutBody=new PcAboutForm({parent:tmpContainer,formType:"about",rightToLeft:rightToLeft})),bookConfig.ShareButtonVisible&&(global.sharePanel=new PcShareForm({parent:tmpContainer,formType:"share",rightToLeft:rightToLeft})),1<language.length&&(global.languagePanel=new PcLanguageForm({parent:tmpContainer,formType:"language",rightToLeft:rightToLeft})),bookConfig.VideoButtonVisible&&(global.videoGallery=new PcVideoGalleryForm({parent:tmpContainer,formType:"videoGallery",rightToLeft:rightToLeft},global.videoList)),bookConfig.SlideshowButtonVisible&&(global.photoGallery=new PhotoGallery(tmpContainer,global.slideshow)),bookConfig.TableOfContentButtonVisible&&(global.frmTableOfContent=new PcTableOfContentForm({parent:tmpContainer,formType:"tableOfContent",rightToLeft:rightToLeft})),bookConfig.SearchButtonVisible&&(global.frmSearch=new PcSearchForm({parent:tmpContainer,formType:"search",rightToLeft:rightToLeft})),bookConfig.ThumbnailsButtonVisible&&("catalog"==bookConfig.FlipStyle.toLowerCase()&&"lite"==bookConfig.ToolbarViewMode.toLowerCase()&&(thumbnail=new CatalogThumbnailBar(tmpContainer)),isSlideBook()&&"lite"==bookConfig.ToolbarViewMode.toLowerCase()&&(thumbnail=new SlideThumbnailBar(tmpContainer)),thumbnail||(thumbnail=new ThumbnailForm({parent:tmpContainer,formType:"thumbnail",rightToLeft:rightToLeft}))),!isBelowIE9()&&bookConfig.BookMarkButtonVisible&&(global.bookmark=new PcBookmarkForm({parent:tmpContainer,formType:"bookmark",rightToLeft:rightToLeft})),initLogoBar()}!isPhone()&&bookConfig.AnnotationButtonVisible&&(global.annotationPannel=new AnnotationPannel(tmpContainer));bookConfig.QRCode&&(global.QRcode=new CodeBar(tmpContainer),global.QRbutton=new QRButton(tmpContainer));initFlipSound();global.backgroundObj=new initBackground(tmpContainer);bookConfig.flipshortcutbutton&&(global.leftRightButton=new LeftRightButton(tmpContainer));global.auto_player=new AutoFlip;global.bgSound=new BackgroundSound;global.volumeControlBar=new VolumeControlBar(tmpContainer);global.flipPageAudio=new FlipByAudio(tmpContainer,global.flipByAudio)}function winodwDynamicResize(){if(isTouch){$(window).on("orientationchange",function(){onStageResize.delay(200)})}$(window).resize(onStageResize);isHigherThanIOS8()&&window.setInterval(function(){if(windowHeight!=window.innerHeight||windowWidth!=window.innerWidth){windowHeight=window.innerHeight,windowWidth=window.innerWidth,onStageResize()}},1000)}function scrapURL(){var c=window.location.hash;""!=c&&3<c.length&&"#p="==c.substr(0,3)?window.setTimeout(function(){var b=parseInt(getRealPageNumber(c.substr(3,c.length-3)));gotoPageFun(b);TurnonAutoFlip()},1000):(gotoPageFun(1),TurnonAutoFlip());0<=window.location.search.indexOf("fullscreen=true")&&function(){toolBar&&toolBar.btnFullscreen&&toolBar.btnFullscreen.trigger(_event._end);$(document).trigger(fullScreenApi.fullScreenEventName)}.delay(this,50)}var resizeBySearchInput=function(){(isPhone()||isPad())&&global.foldingMenu&&global.foldingMenu.visible&&$("body").width()},totalThicknessWidth=function(){if(!BookInfo.isDoublePage()){return 0}var d=Math.min(bookConfig.totalPageCount,100),d=$.easing.easeOutQuad(null,d,0,30,100),d=Math.floor(d),f=Math.max(windowHeight-bookConfig.topMargin-bookConfig.bottomMargin-toolBar.getHeight(),1),f=Math.min(1,f/800),f=$.easing.swing(null,Math.max(d-8,0),1,f-1,22);return d*f};function onStageResize(c){resizeBySearchInput()||(global.resizeBookAfterFlip=!1,bookType==BookType.normal_book&&flipBook&&flipBook.flipping||bookType==BookType.single_book&&singlePageBook.flipping||bookType==BookType.catalog_book&&catalogBook&&catalogBook.flipping?resizeBookAfterFlip=!0:($("html").css({height:window.innerHeight+"px",width:window.innerWidth+"px"}),global.windowWidth=$("body").width(),global.windowHeight=$("body").height(),resizeToolBar(),thumbnailHeight=global.thumbnail&&thumbnail.getShowStatu()?thumbnail.getHeight():0,changeShowBookByWindow(),resizePlugin(),resizeAttachments()))}function resizeAttachments(){global.foldingMenu&&foldingMenu.resize(windowWidth,windowHeight);if(global.phoneSearch){global.phoneSearch.onResize()}if(global.phoneShare){global.phoneShare.onResize()}if(global.phoneTableOfContent){global.phoneTableOfContent.onResize()}if(global.phonePrintBody){global.phonePrintBody.onResize()}if(global.printBody){printBody.onResize()}if(global.helpBody){helpBody.onResize()}if(global.aboutBody){aboutBody.onResize()}if(global.sharePanel){sharePanel.onResize()}if(global.languagePanel){languagePanel.onResize()}if(global.annotationPannel){annotationPannel.onResize()}if(global.phoneSettingBody){global.phoneSettingBody.onResize()}if(global.thumbnail){thumbnail.onResize()}if(global.QRcode){QRcode.onResize()}if(global.frmSearch){frmSearch.onResize()}if(global.frmTableOfContent){frmTableOfContent.onResize()}if(global.bookmark){bookmark.onResize()}global.leftRightButton&&leftRightButton.setPosition();$(".appear_win10").css({"line-height":windowHeight+"px"});$(".appear_win10 .main_dom").css({left:0,top:0})}function resizeToolBar(){if(global.toolBar&&toolBar.onResize){toolBar.onResize()}var c=MiniStyle.isMini();isPhone()||isPad()||(c?(global.toolBar&&global.toolBar.hide(),global.QRbutton&&global.QRbutton.hide(),bookType==BookType.catalog_book&&global.catalogBook.guidBar&&global.catalogBook.guidBar.hide(),global.leftRightButton&&leftRightButton.setShow(!1),MiniStyle.show()):(global.QRbutton&&global.QRbutton.show(),("lite"!=bookConfig.ToolbarViewMode||bookType!=BookType.slide_book&&bookType!=BookType.singleSlide_book&&bookType!=BookType.catalog_book)&&toolBar.show(),bookType==BookType.catalog_book&&"lite"==bookConfig.ToolbarViewMode.toLowerCase()&&catalogBook.guidBar&&catalogBook.guidBar.show(),global.leftRightButton&&leftRightButton.setShow(!0),MiniStyle.hide()))}function resizeCatalogBook(){if(bookType==BookType.catalog_book&&global.catalogBook){var v=bookConfig.topMargin,u=bookConfig.leftMargin,t=bookConfig.rightMargin;"lite"!=bookConfig.ToolbarViewMode||MiniStyle.isMini()&&!fullScreenApi.isFullScreen()||(v=bookConfig.topMargin+50);var s=bookConfig.largePageWidth*(-parseFloat(bookConfig.visibleAreaLeft)+parseFloat(bookConfig.visibleAreaRight))/100,r=bookConfig.largePageHeight*(parseFloat(bookConfig.visibleAreaBottom)-parseFloat(bookConfig.visibleAreaTop))/100,q=Math.max(windowWidth-bookConfig.leftMargin-bookConfig.rightMargin-2*totalThicknessWidth()-toolBar.getWidth(),1),p=0,p=toolBar.visible?Math.max(windowHeight-bookConfig.topMargin-bookConfig.bottomMargin-toolBar.getHeight(),1):Math.max(windowHeight-bookConfig.topMargin-catalogBook.guidBarHeight-bookConfig.bottomMargin-toolBar.getHeight(),1),o=getPageWidthHeight(q-0.7*p/8,p,2*s,r),s=parseInt(o.x/2),r=parseInt(o.y),u=(windowWidth-u-t-o.x)/2+u,q=rightToLeft?o.x/4:-o.x/4,t=rightToLeft?-o.x/4:o.x/4,n="lite"==bookConfig.ToolbarViewMode.toLowerCase()?0:toolBar.getTopHeight(),v=(p-o.y)/2+v+n,o={},p=0;!0==bookConfig.retainBookCenter&&(1==catalogBook.currentPageIndex&&(p=q),q=bookConfig.totalPageCount,1==q%2&&q++,catalogBook.currentPageIndex==q&&(p=t),o={tran:{x:p,y:0}});o.top=v;o.left=u;catalogBook.setCSS(o);catalogBook.onResize(s,r)}}var pageWidthHeight,containerHeight,containerWidth,largePageWidth,largePageHeight;function resizeFlipBook(){if(bookType==BookType.normal_book||bookType==BookType.single_book){var E=bookConfig.topMargin,D=bookConfig.leftMargin,C=bookConfig.rightMargin,B=bookConfig.bottomMargin;if(global.flipBook){var A=Math.max(windowWidth-D-C-toolBar.getWidth(),1),z=Math.max(windowHeight-E-B-toolBar.getHeight(),1),y=A-2*bookConfig.hardCoverBorderWidth-2*totalThicknessWidth(),x=z-2*bookConfig.hardCoverBorderWidth,w=bookConfig.largePageWidth*(-parseFloat(bookConfig.visibleAreaLeft)+parseFloat(bookConfig.visibleAreaRight))/100,v=bookConfig.largePageHeight*(parseFloat(bookConfig.visibleAreaBottom)-parseFloat(bookConfig.visibleAreaTop))/100,u=getPageWidthHeight(y,x,2*w,v),s=parseInt(u.x/2),F=parseInt(u.y),y=(A-u.x)/2+D,z=(z-u.y)/2+E+toolBar.getTopHeight(),A=rightToLeft?u.x/4:-u.x/4,u=rightToLeft?-u.x/4:u.x/4,x={},o=0;!0==bookConfig.retainBookCenter&&(1==flipBook.getCurrentPageIndex()&&(o=A),flipBook.getCurrentPageIndex()==totalPageCount&&(o=u),x={tran:{x:o,y:0},scale:1,origin:{x:0,y:0}});x.top=z;x.left=y;flipBook.setCSS(x);flipBook.onResize(s,F);flipBook.afterZoomOut()}global.singlePageBook&&(y=windowWidth-bookConfig.hardCoverBorderWidth-D-C-toolBar.getWidth(),x=windowHeight-toolBar.getHeight()-2*bookConfig.hardCoverBorderWidth-E-B,u=getPageWidthHeight(y,x,w,v),s=parseInt(u.x),F=parseInt(u.y),E=parseInt((x-u.y)/2)+E+toolBar.getTopHeight()+bookConfig.hardCoverBorderWidth,D=D+toolBar.getLeftWidth()+bookConfig.hardCoverBorderWidth/2+(y-u.x)/2+(rightToLeft?bookConfig.hardCoverBorderWidth/2:-bookConfig.hardCoverBorderWidth/2),singlePageBook.onResize(s,F),singlePageBook.setCSS({top:E,left:D}),singlePageBook.setCSS({tran:{x:0,y:0},scale:1,origin:{x:0,y:0}}),singlePageBook.afterZoomOut())}}function resizeSlideBook(){if(global.slideBook){slideBook.onResize()}if(global.singleSlideBook){singleSlideBook.onResize()}}function changeShowBookByWindow(){var f,h,g=!1;bookType==BookType.single_book&&windowWidth>=windowHeight&&bookConfig.showDoublePage&&(bookType=BookType.normal_book,changeShowBook(0),h=singlePageBook.currentPageIndex,g=f=!0);bookType==BookType.singleSlide_book&&windowWidth>=windowHeight&&bookConfig.showDoublePage&&(bookType=BookType.slide_book,changeShowBook(bookType),h=singleSlideBook.getRealPageIndex(),g=f=!0);bookType==BookType.slide_book&&windowWidth<windowHeight&&(bookType=BookType.singleSlide_book,changeShowBook(bookType),h=slideBook.getRealPageIndex(),f=!1,g=!0);bookType==BookType.normal_book&&windowWidth<windowHeight&&(bookType=BookType.single_book,changeShowBook(1),h=flipBook.currentPageIndex,f=!1,g=!0);resizeFlipBook();resizeCatalogBook();resizeSlideBook();g&&(gotoPageFun(h),setCurrentIndexTextField(h,f),global.thumbnail&&thumbnail.clearHighLight(),global.thumbnail&&thumbnail.setHighLight(h))}function initEvents(){$(bookContainer).bind("mouseup touchstart",function(c){c.target==c.currentTarget&&onWindowClick(c)});$(bookContainer).bind("touchstart",function(c){c.preventDefault()});$(window).bind("keydown",function(c){onWindowKeyDown(c)});initSoundEvents()}function initSoundEvents(){if(isPhone()||isPad()){global.bgSound&&global.bgSound.sound&&global.bgSound.sound.bind("play",function(){global.bgSound.sound[0].hasPlayed=!0}),global.flipAudio&&global.flipAudio.bind("play",function(){global.flipAudio[0].hasPlayed=!0}),$("body").bind(_event._down+" "+_event._move+" "+_event._end,function(d){global.flipAudio&&global.flipAudio[0].paused&&!global.flipAudio[0].hasPlayed&&bookConfig.FlipSound&&(global.flipAudio[0].volume=0,global.flipAudio[0].play(),global.flipAudio[0].pause(),global.flipAudio[0].volume=1);if(global.bgSound.sound&&global.bgSound.sound[0].paused&&!global.bgSound.sound[0].hasPlayed&&isPlaying){try{global.bgSound.play()}catch(f){}}global.flipPageAudio.playByTouch()})}}function onWindowClick(f){if(f){var h=BookInfo.getBook();if(!(h.status_zoom||h.isZomming||h.status_resize)){var h=BookInfo.getBook().getBook().offset(),g=BookInfo.getBook().getBook().outerWidth();f.pageX>h.left+g?rightToLeft?previousPageFun():nextPageFun():f.pageX<h.left&&(rightToLeft?nextPageFun():previousPageFun())}}}function onWindowKeyDown(b){if(b){var c=b.keyCode;Log.info("key down[%d]",c);c==KEY_CODE_LEFT&&(rightToLeft?nextPageFun():previousPageFun());c==KEY_CODE_RIGHT&&(rightToLeft?previousPageFun():nextPageFun());if(c==KEY_CODE_HOME||c==KEY_CODE_PAGEUP){rightToLeft?lastPageFun():firstPageFun()}if(c==KEY_CODE_END||c==KEY_CODE_PAGEDOWN){rightToLeft?firstPageFun():lastPageFun()}b.ctrlKey&&b.altKey&&(c==KEY_CODE_HOME||c==KEY_CODE_UP)&&eval(DeString("b29ec71982dc6d9062a0b77ce9ccc59581fd3c4a4fa9bd325e6f5ae7fbf39a0907064bb455b1bade956bc0f3e7c55d348fbaa363c39f7bef7a0648674fd1f688786b79bd6ad03215d634a4736f3f971501f664a09b820932d9bc83a9c2159964e5c571b3ebe4ceb214fd31bb1287fe5449f303a6d5531165e1386ba5aa8d0a3788d4a351d120a43a59c002d761ef"))}}Class("TaskList",{create:function(){this.taskList=[];this.largeLength=0},unShiftList:function(g,l){this.taskList.unshift(g);this.popList();for(var k=this.taskList.length,h=0;h<k&&!this.stop;h++){l&&l(this.taskList[h])}},popList:function(g){var l=this.taskList.length;if(!(l<=this.largeLength)){this.stop=!0;for(var k=0;k<l-this.largeLength;k++){var h=this.taskList.pop();g&&g(h)}this.stop=!1}},setLargeLength:function(c){this.largeLength=c}});Class("TextBubble",{$parent:null,color:null,textColor:null,text:"",padding:6,margin:2,$bubble:null,$content:null,$text:null,statics:{LEFT:1,TOP:2,RIGHT:3,BOTTOM:4,HORIZONTAL:5,VERTICAL:6},create:function(c){c=c||{};this.$parent=c.parent||$("body");this.color=Color(c.color)||Color("black");this.textColor=Color(c.textColor)||Color("white");this.text=c.text||"";this.padding=c.padding||6;this.margin=c.margin||2;this.direction=c.direction||TextBubble.VERTICAL;this.init()},init:function(){this.$bubble=$("<div class='text_bubble' style='display:none'></div>");this.$content=$("<div class='text_bubble_content'></div>");this.$text=$("<div class='text_bubble_text'></div>");this.$parent.append(this.$bubble);this.$bubble.append(this.$content);this.$content.append(this.$text);this.$content.css({padding:this.padding+"px","background-color":this.color.toString()});this.$text.css({color:this.textColor.toString()});this.$text.text(this.text)},setStyle:function(c){"string"==typeof c&&this.$content.addClass(c);"object"==typeof c&&this.$content.css(c)},setText:function(c){this.text=c;this.$text&&this.$text.text(this.text)},show:function(c){this.$bubble&&this.$bubble.css({display:"block"});switch(this.direction){case TextBubble.LEFT:this.showLeft(c);break;case TextBubble.TOP:this.showTop(c);break;case TextBubble.RIGHT:this.showRight(c);break;case TextBubble.BOTTOM:this.showBottom(c);break;case TextBubble.HORIZAONTAL:this.showHorizaontal(c);break;case TextBubble.VERTICAL:this.showVertical(c)}},showLeft:function(d){var f=this.getBubbleWidth();this.bubbleLeft=d.left-f-this.margin;f=this.getBubbleHeight();this.bubbleTop=d.top+d.height/2-f/2;this.bubbleTop+f>this.$parent.height()?this.bubbleTop=this.$parent.height()-f-this.margin:this.bubbleTop=Math.max(this.margin,this.bubbleTop);this.$bubble.css({left:this.bubbleLeft+"px",top:this.bubbleTop+"px"})},showRight:function(d){this.getBubbleWidth();this.bubbleLeft=d.left+d.width+this.margin;var f=this.getBubbleHeight();this.bubbleTop=d.top+d.height/2-f/2;this.bubbleTop+f>this.$parent.height()?this.bubbleTop=this.$parent.height()-f-this.margin:this.bubbleTop=Math.max(this.margin,this.bubbleTop);this.$bubble.css({left:this.bubbleLeft+"px",top:this.bubbleTop+"px"})},showTop:function(d){var f=this.getBubbleWidth();this.bubbleLeft=d.left+d.width/2-f/2;this.bubbleLeft+f>this.$parent.width()?this.bubbleLeft=this.$parent.width()-f-this.margin:this.bubbleLeft=Math.max(this.margin,this.bubbleLeft);f=this.getBubbleHeight();this.bubbleTop=d.top-f-this.margin;this.$bubble.css({left:this.bubbleLeft+"px",top:this.bubbleTop+"px"})},showBottom:function(d){var f=this.getBubbleWidth();this.bubbleLeft=d.left+d.width/2-f/2;this.bubbleLeft+f>this.$parent.width()?this.bubbleLeft=this.$parent.width()-f-this.margin:this.bubbleLeft=Math.max(this.margin,this.bubbleLeft);this.getBubbleHeight();this.bubbleTop=d.top+d.height+this.margin;this.$bubble.css({left:this.bubbleLeft+"px",top:this.bubbleTop+"px"})},showVertical:function(d){var f=this.getBubbleWidth();this.bubbleLeft=d.left+d.width/2-f/2;this.bubbleLeft+f>this.$parent.width()?this.bubbleLeft=this.$parent.width()-f-this.margin:this.bubbleLeft=Math.max(this.margin,this.bubbleLeft);f=this.getBubbleHeight();d.top+d.height+f>this.$parent.height()?this.bubbleTop=d.top-f-this.margin:this.bubbleTop=d.top+d.height+this.margin;this.$bubble.css({left:this.bubbleLeft+"px",top:this.bubbleTop+"px"})},showHorizontal:function(d){var f=this.getBubbleWidth();d.left+d.width+f>this.$parent.width()?this.bubbleLeft=d.left-f-this.margin:this.bubbleLeft=d.left+d.width+this.margin;f=this.getBubbleHeight();this.bubbleTop=d.top+d.height/2-f/2;this.bubbleTop+f>this.$parent.height()?this.bubbleTop=this.$parent.height()-f-this.margin:this.bubbleTop=Math.max(this.margin,this.bubbleTop);this.$bubble.css({left:this.bubbleLeft+"px",top:this.bubbleTop+"px"})},getBubbleWidth:function(){return this.$text.width()+2*this.padding},getBubbleHeight:function(){return this.$text.height()+2*this.padding},hide:function(){this.$bubble&&this.$bubble.css({display:"none"})}});Class("ArrowTextBubble",{create:function(c){c=c||{};this.arrowWidth=c.arrowWidth||8;this.arrowHeight=c.arrowHeight||4;this._super(c)},setRightArrowStyle:function(d,f){d.css({"border-left":"0px solid transparent","border-top":this.arrowHeight/2+"px solid transparent","border-right":this.arrowWidth+"px solid "+f.toString(),"border-bottom":this.arrowHeight/2+"px solid transparent"})},setLeftArrowStyle:function(d,f){d.css({"border-left":this.arrowWidth+"px solid "+f.toString(),"border-top":this.arrowHeight/2+"px solid transparent","border-right":"0px solid transparent","border-bottom":this.arrowHeight/2+"px solid transparent"})},setBottomArrowStyle:function(d,f){d.css({"border-left":this.arrowWidth/2+"px solid transparent","border-top":"0px solid transparent","border-right":this.arrowWidth/2+"px solid transparent","border-bottom":this.arrowHeight+"px solid "+f.toString()})},setTopArrowStyle:function(d,f){d.css({"border-left":this.arrowWidth/2+"px solid transparent","border-top":this.arrowHeight+"px solid "+f.toString(),"border-right":this.arrowWidth/2+"px solid transparent","border-bottom":"0px solid transparent"})}}).extend("TextBubble");Class("SolidArrowTextBubble",{$arrow:null,init:function(){this._super();this.$arrow=$("<div class='text_bubble_arrow'></div>");this.$bubble.append(this.$arrow)},showLeft:function(d){this._super(d);this.getBubbleHeight();d=d.top+d.height/2-this.bubbleTop-this.arrowHeight/2;var f=this.$text.width()+2*this.padding;this.$content.css({"margin-left":"0px"});this.setLeftArrowStyle(this.$arrow,this.color);this.$arrow.css({top:d+"px",left:f+"px"})},showTop:function(d){this._super(d);this.getBubbleWidth();d=d.left+d.width/2-this.bubbleLeft-this.arrowWidth/2;var f=this.$text.height()+2*this.padding;this.$content.css({"margin-top":"0px"});this.setTopArrowStyle(this.$arrow,this.color);this.$arrow.css({left:d+"px",top:f+"px"})},showRight:function(c){this._super(c);this.getBubbleHeight();c=c.top+c.height/2-this.bubbleTop-this.arrowHeight/2;this.$text.width();this.$content.css({"margin-left":this.arrowWidth+"px"});this.setRightArrowStyle(this.$arrow,this.color);this.$arrow.css({top:c+"px",left:"0px"})},showBottom:function(c){this._super(c);this.getBubbleWidth();c=c.left+c.width/2-this.bubbleLeft-this.arrowWidth/2;this.$text.height();this.$content.css({"margin-top":this.arrowHeight+"px"});this.setBottomArrowStyle(this.$arrow,this.color);this.$arrow.css({left:c+"px",top:"0px"})},showVertical:function(f){this._super(f);this.getBubbleWidth();var h=f.left+f.width/2-this.bubbleLeft-this.arrowWidth/2,g=this.$text.height()+2*this.padding;this.bubbleTop<f.top?(this.$content.css({"margin-top":"0px"}),this.setTopArrowStyle(this.$arrow,this.color),this.$arrow.css({left:h+"px",top:g+"px"})):(this.$content.css({"margin-top":this.arrowHeight+"px"}),this.setBottomArrowStyle(this.$arrow,this.color),this.$arrow.css({left:h+"px",top:"0px"}))},showHorizontal:function(f){this._super(f);this.getBubbleHeight();var h=f.top+f.height/2-this.bubbleTop-this.arrowHeight/2,g=this.$text.width()+2*this.padding;this.bubbleLeft<f.left?(this.$content.css({"margin-left":"0px"}),this.setLeftArrowStyle(this.$arrow,this.color),this.$arrow.css({top:h+"px",left:g+"px"})):(this.$content.css({"margin-left":this.arrowWidth+"px"}),this.setRightArrowStyle(this.$arrow,this.color),this.$arrow.css({top:h+"px",left:"0px"}))},getBubbleHeight:function(){return this.direction==TextBubble.VERTICAL||this.direction==TextBubble.TOP||this.direction==TextBubble.BOTTOM?this.$text.height()+2*this.padding+this.arrowHeight:this.$text.height()+2*this.padding},getBubbleWidth:function(){return this.direction==TextBubble.HORIZONTAL||this.direction==TextBubble.LEFT||this.direction==TextBubble.RIGHT?this.$text.width()+2*this.padding+this.arrowWidth:this.$text.width()+2*this.padding}}).extend("ArrowTextBubble");Class("HollowArrowTextBubble",{$arrow:null,$filled_arrow:null,create:function(c){c=c||{};this.filledColor=c.filledColor||Color("white");this._super(c)},init:function(){this._super();this.$arrow=$("<div class='text_bubble_arrow' style='z-index:1'></div>");this.$filled_arrow=$("<div class='text_bubble_arrow' style='z-index:2'></div>");this.$bubble.append(this.$arrow);this.$bubble.append(this.$filled_arrow);this.$content.css({padding:this.padding-1+"px",border:"1px solid "+this.color.toString(),"background-color":this.filledColor.toString()})},show:function(f){this._super(f);this.getBubbleWidth();var h=f.left+f.width/2-this.bubbleLeft-this.arrowWidth/2,g=this.$text.height()+2*this.padding;this.bubbleTop<f.top?(this.$content.css({"margin-top":"0px"}),this.setBottomArrowStyle(this.$arrow,this.color),this.$arrow.css({left:h+"px",top:g+"px"}),this.setBottomArrowStyle(this.$filled_arrow,this.filledColor),this.$filled_arrow.css({left:h+"px",top:g-2+"px"})):(this.$content.css({"margin-top":this.arrowHeight+"px"}),this.setTopArrowStyle(this.$arrow,this.color),this.$arrow.css({left:h+"px",top:"0px"}),this.setTopArrowStyle(this.$filled_arrow,this.filledColor),this.$filled_arrow.css({left:h+"px",top:"2px"}))},getBubbleHeight:function(){return this.$text.height()+2*this.padding+this.arrowHeight}}).extend("ArrowTextBubble");Class("ToolbarButton",{$button:null,colorChanged:!1,callback:null,color:null,fontColor:null,$parent:null,caption:"",title:null,hint:!0,language:null,create:function(){this.color=Color(bookConfig.iconColor);this.fontColor=Color(bookConfig.iconFontColor);this.$button=$("<div class='button'></div>");this.ButtonClickEvent=this.onButtonClick.bind(this)},setCallback:function(c){this.callback=c},onButtonClick:function(c){this.onClick(c);this.executeCallback();this.hideTitle();if(c){return c.stopPropagation&&c.stopPropagation(),c.cancelBubble&&(c.cancelBubble=!0),!1}},onClick:virtual_function,executeCallback:function(){this.callback&&this.callback instanceof Function&&this.callback(this)},click:function(c){this.onButtonClick(c)},setSrc:function(f,h){var g=$("<img style='pointer-events:none;'></img>");this.$caption=$("<span style='pointer-events:none;'></span>");h&&""!=h?g.attr("src",h):toolbar_icons&&toolbar_icons[f]?g.attr("src","data:image/png;base64,"+toolbar_icons[f]):g.attr("src",uiBaseURL+f+".png");this.$button.empty();this.$button.append(g);this.$button.append(this.$caption);this.colorChanged=!1},changeColor:function(c){this.changeIconColor(c);this.changeCaptionColor(c)},changeIconColor:function(c){if(this.color||c){c||(c=this.color.toString()),this.$parent&&(this.colorChanged||this.$button.changeButtonColor(c,!1,function(){this.colorChanged=!0}.bind(this)))}},changeCaptionColor:function(c){if(this.fontColor||c){c||(c=this.fontColor.toString()),this.$caption&&this.$caption.css("color",c)}},reflection:function(){reflection&&reflection(this.$button)},initLanguage:function(d,f){this.language={key:d,defaultValue:f};this.changeLanguage()},changeLanguage:function(){if(this.language){var c=getLanguage(this.language.key,this.language.defaultValue);this.setCaption(c)}},setCaption:function(c){this.caption=c;this.$caption.text(c);this.title?this.title.setText(c):this.setTitle(c)},setTitle:function(c){"string"==typeof c?(this.$button.attr("title",c),this.title=null):(this.$button.attr("title",""),this.title=c)},showTitle:function(c){c&&"CANVAS"==c.target.tagName.toUpperCase()||!this.hint||!this.title||(this.mouse_is_enter=!0,this.titleTimer&&window.clearTimeout(this.titleTimer),this.titleTimer=function(){if(this.mouse_is_enter){var b={left:c.pageX-c.offsetX,top:c.pageY-c.offsetY,width:this.width(),height:this.height()};this.title.show(b)}}.delay(this,800))},hideTitle:function(){this.mouse_is_enter=!1;this.title&&this.title.hide()},addTo:function(c){this.$parent!=c&&(this.$parent&&this.freedom(),this.$button.appendTo(c),this.$parent=c,this.addEvents())},addEvents:function(){this.$button.bind("click",this.ButtonClickEvent);this.$button.bind("mouseenter",this.showTitle.bind(this));this.$button.bind("mouseleave",this.hideTitle.bind(this));this.$button.bind("mousedown pointerdown touchstart",function(c){c.stopPropagation()});this.$button.css("cursor","pointer")},freedom:function(){this.$button.remove();this.$parent=null;this.$button.unbind()},setPosition:function(d,f){this.$button.css({left:d+"px",top:f+"px"})},setWidth:function(c){this.$button.css({width:c+"px"})},setHeight:function(c){this.$button.css({height:c+"px"})},left:function(){return this.$button.left()},top:function(){return this.$button.top()},width:function(){return this.$button.width()},height:function(){return this.$button.height()}});Class("ButtonBevel",{color:null,$body:null,$parent:null,statics:{vertical:0,horizontal:1},create:function(d,f){this.color=Color(d);this.direction=void 0==f?ButtonBevel.vertical:f;this.init()},init:function(){this.$body=$("<div name='bevel'></div>");var d=this.color.reduce(20),f=this.color.add(20);this.direction==ButtonBevel.vertical?(this._width=2,this._height=30,this.$body.css({position:"absolute",width:"1px",height:"30px","background-color":d,"border-right":"1px solid "+f})):(this._width=30,this._height=2,this.$body.css({position:"absolute",width:"30px",height:"1px","background-color":d,"border-bottom":"1px solid "+f}))},freedom:function(){this.$body.remove();this.$parent=null},addTo:function(c){this.$parent!=c&&(this.$parent&&this.freedom(),this.$body.appendTo(c),this.$parent=c)},setPosition:function(d,f){this.$body.css({left:d+"px",top:f+"px"})},setWidth:function(d){this._width=d;if(this.direction==ButtonBevel.vertical){var f=d%2;this.$body.css({width:(d+f)/2+"px","border-right-width":(d-f)/2+"px"})}else{this.$body.css({width:d+"px"})}},setHeight:function(d){this._height=d;if(this.direction==ButtonBevel.vertical){this.$body.css({height:d+"px"})}else{var f=d%2;this.$body.css({height:(d+f)/2+"px","border-bottom-width":(d-f)/2+"px"})}},left:function(){return this.$body.left()},top:function(){return this.$body.top()},width:function(){return this._width},height:function(){return this._height}});Class("FirstPageButton",{create:function(){this._super();rightToLeft?this.setSrc("Last",bookConfig.LastButtonIcon):this.setSrc("First",bookConfig.FirstButtonIcon);this.initLanguage("btnFirstPage","First")},onClick:function(c){firstPageFun()}}).extend("ToolbarButton");Class("LastPageButton",{create:function(){this._super();rightToLeft?this.setSrc("First",bookConfig.FirstButtonIcon):this.setSrc("Last",bookConfig.LastButtonIcon);this.initLanguage("btnLastPage","Last")},onClick:function(c){lastPageFun()}}).extend("ToolbarButton");Class("PreviousPageButton",{create:function(){this._super();rightToLeft?this.setSrc("next",bookConfig.NextButtonIcon):this.setSrc("prev",bookConfig.PreviousButtonIcon);this.initLanguage("btnPrePage","Previous")},onClick:function(c){previousPageFun()}}).extend("ToolbarButton");Class("NextPageButton",{create:function(){this._super();rightToLeft?this.setSrc("prev",bookConfig.PreviousButtonIcon):this.setSrc("next",bookConfig.NextButtonIcon);this.initLanguage("btnNextPage","Next")},onClick:function(c){nextPageFun()}}).extend("ToolbarButton");Class("HomeButton",{create:function(){this._super();this.setSrc("home",bookConfig.HomeButtonIcon);this.initLanguage("btnGoToHome","Home")},onClick:function(c){"%first page%"==bookConfig.HomeURL.toLowerCase()?firstPageFun():void 0!=bookConfig.HomeURL&&""!=bookConfig.HomeURL&&(c=bookConfig.HomeURL,c.startsWith("http")||(c="http://"+c),window.open(c,bookConfig.OpenWindow))}}).extend("ToolbarButton");Class("ShareEmailButton",{create:function(){this.color=Color(bookConfig.iconColor);this.fontColor=Color(bookConfig.iconFontColor);this.$button=$("<a target="+bookConfig.OpenWindow+" href='' class='button'></a>");var d=bookConfig.btnShareWithEmailBody,f=bookConfig.btnShareWithEmailSubject;f||(f="");thumb=" "+window.location.href.substring(0,share_url.lastIndexOf("/"))+"/"+bookConfig.thumbPath+"1.jpg ";d=d.replaceAll("{thumb}",thumb,!0);d=d.replaceAll("{link}",window.location.href,!0);d=d.replaceAll("{title}",window.document.title,!0);this.$button.attr("href","mailto:?subject="+f+"&body="+d);this.setSrc("emailButton",bookConfig.EmailButtonIcon);this.initLanguage("btnShareEmail","Share by Email")},onClick:function(c){}}).extend("ToolbarButton");Class("HelpButton",{create:function(){this._super();this.setSrc("Help",bookConfig.HelpButtonIcon);this.initLanguage("btnHelp","Help")},onClick:function(c){helpBody&&helpBody.showOrHide()}}).extend("ToolbarButton");Class("ThumbnailButton",{create:function(){this._super();this.setSrc("thumbnails",bookConfig.ThumbnailButtonIcon);this.initLanguage("btnThumb","Thumbnails")},onClick:function(c){thumbnail&&thumbnail.showOrHide()}}).extend("ToolbarButton");Class("ShareButton",{create:function(){this._super();this.setSrc("sharethis",bookConfig.ShareButtonIcon);this.initLanguage("btnSocialShare","Share")},onClick:function(c){sharePanel.showOrHide()}}).extend("ToolbarButton");Class("SearchButton",{create:function(){this._super();this.setSrc("search",bookConfig.SearchButtonIcon);this.initLanguage("btnSearch","Search")},onClick:function(c){frmSearch&&frmSearch.showOrHide()}}).extend("ToolbarButton");Class("DownloadButton",{create:function(){this._super();this.setSrc("download",bookConfig.DownloadButtonIcon);this.initLanguage("btnDownload","Download")},onClick:function(c){""!=bookConfig.DownloadURL&&window.open(bookConfig.DownloadURL,"_blank")}}).extend("ToolbarButton");Class("BookmarkButton",{create:function(){this._super();this.setSrc("bookmark",bookConfig.BookmarkButtonIcon);getLanguage("AnnotMark","")?this.initLanguage("AnnotMark","bookmark"):this.initLanguage("btnBookMark","Bookmark")},onClick:function(c){bookmark.showOrHide()}}).extend("ToolbarButton");Class("TableOfContentButton",{create:function(){this._super();this.setSrc("tableOfContent",bookConfig.TableOfContentButtonIcon);getLanguage("AnnotMark","")?this.initLanguage("btnBookMark","Table Of Content"):this.initLanguage("btnTableOfContent","Table Of Content")},onClick:function(c){frmTableOfContent&&frmTableOfContent.showOrHide()}}).extend("ToolbarButton");Class("LanguageButton",{create:function(){this._super();this.setSrc("languageChange",bookConfig.LanguageButtonIcon);this.initLanguage("btnLanguage","Language change")},onClick:function(c){global.languagePanel&&languagePanel.showOrHide()}}).extend("ToolbarButton");Class("PrintButton",{create:function(){this._super();this.setSrc("print",bookConfig.PrintButtonIcon);this.initLanguage("btnPrint","Print")},onClick:function(c){printBody&&printBody.showOrHide()}}).extend("ToolbarButton");Class("AboutButton",{create:function(){this._super();this.setSrc("about",bookConfig.AboutButtonIcon);this.initLanguage("btnAbout","About")},onClick:function(c){aboutBody&&aboutBody.showOrHide()}}).extend("ToolbarButton");Class("MoreButton",{create:function(){this._super();this.setSrc("moreBar");this.initLanguage("btnMore","More")},onClick:function(c){moreBar.visible?moreBar.hide():(c={left:c.pageX-c.offsetX,top:c.pageY-c.offsetY,width:this.width(),height:this.height()},moreBar.show(c))}}).extend("ToolbarButton");Class("AnnotationButton",{create:function(){this._super();this.setSrc("annotation",bookConfig.AnnotationButtonIcon);this.initLanguage("btnNote","Annotation")},onClick:function(c){annotationPannel.getShowStatu()?annotationPannel.hide():annotationPannel.show()}}).extend("ToolbarButton");Class("VideoButton",{create:function(){this._super();this.setSrc("videoGallery",bookConfig.VideoButtonIcon);this.initLanguage("btnVideo","Video Gallery")},onClick:function(c){videoGallery&&videoGallery.showOrHide()}}).extend("ToolbarButton");Class("SlideshowButton",{create:function(){this._super();this.setSrc("photoGallery",bookConfig.SlideshowButtonIcon);this.initLanguage("btnSlideShow","Slideshow")},onClick:function(c){photoGallery.showOrHide()}}).extend("ToolbarButton");var flipHistory=[];flipHistory.currentIndex=0;Class("BackwardButton",{create:function(){this._super();rightToLeft?this.setSrc("forward",bookConfig.ForwardButtonIcon):this.setSrc("backward",bookConfig.BackwardButtonIcon);this.initLanguage("btnPageBack","Backward")},onClick:function(c){backwardEvent()}}).extend("ToolbarButton");Class("ForwardButton",{create:function(){this._super();rightToLeft?this.setSrc("backward",bookConfig.BackwardButtonIcon):this.setSrc("forward",bookConfig.ForwardButtonIcon);this.initLanguage("btnPageForward","Forward")},onClick:function(c){forwardEvent()}}).extend("ToolbarButton");var backwardEvent=function(){if(flipHistory){var c=flipHistory.currentIndex-1;void 0!=flipHistory[c]&&(flipHistory.currentIndex=c,gotoPageFun(flipHistory[c].index,!0))}},forwardEvent=function(){if(flipHistory){var c=flipHistory.currentIndex+1;void 0!=flipHistory[c]&&(flipHistory.currentIndex=c,gotoPageFun(flipHistory[c].index,!0))}};Class("StateSynchronous",{buttons:null,statics:{instance:function(){this.synchroner||(this.synchroner=new StateSynchronous);return this.synchroner}},create:function(){this.buttons=new ObjectPool},registButton:function(c){this.buttons.add(c)},findButtons:function(d,f){return f?this.buttons.find(d):this.buttons.match(d)},reportChanged:function(c){this.buttons.match(c.getClassName()).each(function(b){b!=c&&b.setStatusQuietly(c.getStatus())})}});Class("ToolbarStateButton",{status:-1,getFunctionName:function(f){var h=this.getClass().prototype,g;for(g in h){if(f==h[g]){return g}}},bindStates:function(){this.states=[];for(var f=0;f<arguments.length;f++){var h=arguments[f],g=this.getFunctionName(h);this[g]=function(d,k){return function(){this.status!=k&&(this.status=k,d.apply(this,arguments),StateSynchronous.instance().reportChanged(this))}}(h,f);this.states[f]=g}StateSynchronous.instance().registButton(this)},setStatus:function(c){(c=this[this.states[c]])&&c.apply(this)},setStatusQuietly:function(d){if(this.status!=d){var f=this.getClass().prototype[this.states[d]];f&&(this.status=d,f.apply(this))}},getStatus:function(){return this.status},onClick:virtual_function,initLanguage:function(){this.language=[];for(var f=0;f<arguments.length;f++){var h=arguments[f],g;for(g in h){this.language.push({key:g,defaultValue:h[g]})}}},changeLanguage:function(){if(this.language){var c=this.language[this.status],c=getLanguage(c.key,c.defaultValue);this.setCaption(c)}}}).extend("ToolbarButton");Class("ZoomButton",{create:function(){this._super();this.bindStates(this.setAsZoomin,this.setAsZoomout);this.initLanguage({btnZoomIn:"Zoom In"},{btnZoomOut:"Zoom Out"});this.setAsZoomin()},setAsZoomin:function(){this.setSrc("ZoomIn",bookConfig.ZoomInButtonIcon);this.changeLanguage();this.changeColor()},setAsZoomout:function(){this.setSrc("ZoomOut",bookConfig.ZoomOutButtonIcon);this.changeLanguage();this.changeColor()},executeZoomout:function(){var c=BookInfo.getBook().showPage;c.onDoubleTap.bind(c)({pointers:[{pageX:windowWidth/2,pageY:windowHeight/2}]});auto_player.isPlaying()&&auto_player.stop()},executeZoomin:function(){var c=BookInfo.getBook().showPage;c.onDoubleTap.bind(c)({pointers:[{pageX:windowWidth/2,pageY:windowHeight/2}]});auto_player.isPlaying()&&auto_player.stop()},zoomout:function(){this.executeZoomout();this.setAsZoomin()},zoomin:function(){this.executeZoomin();this.setAsZoomout()},onClick:function(c){BookInfo.isZoomming()||(BookInfo.zoomStatus()?this.zoomout():this.zoomin())}}).extend("ToolbarStateButton");Class("AutoPlayButton",{create:function(){this._super();this.bindStates(this.setAsStart,this.setAsStop);this.initLanguage({btnAutoFlip:"Auto Flip"},{btnStopAutoFlip:"Stop Auto Flip"});this.setAsStart()},setAsStart:function(){this.setSrc("autoPlay",bookConfig.AutoPlayStartButtonIcon);this.changeLanguage();this.changeColor()},setAsStop:function(){this.setSrc("stopAutoPlay",bookConfig.AutoPlayStopButtonIcon);this.changeLanguage();this.changeColor()},onClick:function(){auto_player&&(auto_player.isPlaying()?auto_player.stop():auto_player.start())}}).extend("ToolbarStateButton");Class("FullscreenButton",{create:function(){this._super();this.bindStates(this.setAsFullScreen,this.setAsExitFullScreen);this.initLanguage({btnFullscreen:"Fullscreen"},{btnExitFullscreen:"Exit Fullscreen"});this.setAsFullScreen()},setAsFullScreen:function(){this.setSrc("fullscreen",bookConfig.FullscreenButtonIcon);this.changeLanguage();this.changeColor()},setAsExitFullScreen:function(){this.setSrc("exitFullscreen",bookConfig.ExitFullscreenButtonIcon);this.changeLanguage();this.changeColor()},onClick:function(){readAsFullscreen()}}).extend("ToolbarStateButton");Class("BackgroundSoundButton",{create:function(){this._super();this.bindStates(this.setAsSoundOn,this.setAsSoundOff);this.initLanguage({btnSoundOn:"Sound On"},{btnSoundOff:"Sound Off"});this.setAsSoundOn()},setAsSoundOn:function(){this.setSrc("soundOn",bookConfig.BackgroundSoundButtonOnIcon);this.changeLanguage();this.changeColor()},setAsSoundOff:function(){this.setSrc("soundOff",bookConfig.BackgroundSoundButtonOffIcon);this.changeLanguage();this.changeColor()},onClick:function(c){global.bgSound&&(volumeControlBar.iconOn?volumeControlBar.soundOff({left:c.pageX-c.offsetX,top:c.pageY-c.offsetY,width:$(c.target).width(),height:$(c.target).height()}):volumeControlBar.soundOn({left:c.pageX-c.offsetX,top:c.pageY-c.offsetY,width:$(c.target).width(),height:$(c.target).height()}))},addEvents:function(){this._super();this.onMouseEnter()},onMouseEnter:function(){this.$button.bind("mouseenter",function(c){c&&"CANVAS"==c.target.tagName.toUpperCase()||setTimeout(function(){volumeControlBar.show({left:c.pageX-c.offsetX,top:c.pageY-c.offsetY,width:$(c.target).width(),height:$(c.target).height()})},200)}.bind(this));this.$button.bind("mouseleave",function(c){setTimeout(function(){volumeControlBar.visible||volumeControlBar.hide()},200)}.bind(this))}}).extend("ToolbarStateButton");var getLogoLink=function(){return[bookConfig.appLogoLinkURL,bookConfig.appLogoOpenWindow]},initLogoBar=function(l){if(bookConfig.appLogoIcon){var r=$("#logoBar");l=r.height();var q=bookConfig.logoHeight,p=bookConfig.logoPadding,o=parseInt((l-q)/2),n=getLogoLink(),m=$("<img style='position:absolute;left:0;top:0;'/>");m.attr({src:bookConfig.appLogoIcon});m.on("load",function(){r.append(m);m.css({height:q+"px",top:o+"px"});r.css({left:p+"px",width:m[0].naturalWidth*q/m[0].naturalHeight+"px"});n[0]&&(m.click(function(){window.open(n[0],n[1])}),m.css({cursor:"pointer"}));if(global.toolBar&&global.toolBar.onResize){toolBar.onResize()}})}},setPageIndexTextField=function(){setCurrentIndexTextField(BookInfo.getBook().getCurrentPageIndex(),bookType==BookType.normal_book||bookType==BookType.slide_book||bookType==BookType.catalog_book);void 0!=$("#currentPageIndexTextField")&&null!=$("#currentPageIndexTextField")&&void 0!=$("#currentPageIndexTextField")[0]&&null!=$("#currentPageIndexTextField")[0]&&($("#currentPageIndexTextField").bind("keydown",function(c){13==c.keyCode&&(c=$("#currentPageIndexTextField").val(),c=parseInt(getRealPage(c)),isNaN(c)||(c=Math.min(Math.max(c,1),totalPageCount),gotoPageFun(c)))}),$("#currentPageIndexTextField").bind("blur",function(){window.setTimeout(function(){setCurrentIndexTextField(BookInfo.getCurrentPageIndex())},400)}),$("#currentPageIndexTextField").bind("focus",function(c){$("#currentPageIndexTextField").val("")}))},homeButtonEvent=function(){if("%first page%"==bookConfig.HomeURL.toLowerCase()){firstPageFun()}else{if(void 0!=bookConfig.HomeURL&&""!=bookConfig.HomeURL){var c=bookConfig.HomeURL;"http"!=c.substr(0,4)&&(c="http://"+c);window.open(c,bookConfig.OpenWindow)}}};(function(d){function f(c){if(!c){return 0}c=parseFloat(c.replace("px",""));return isNaN(c)?0:c}d.fn.left=function(){return f(this.css("left"))};d.fn.top=function(){return f(this.css("top"))};d.fn.right=function(){return f(this.css("right"))};d.fn.bottom=function(){return f(this.css("bottom"))}})(jQuery);Class("Toolbar",{topBar:null,bottomBar:null,buttons:null,visible:!0,isMoving:!1,extendedBar:null,color:null,create:function(c){this.parent=c;this.color=Color(bookConfig.toolbarColor);this.initButtons();this.initBar();this.initExtendedbar();this.initEvents();this.onResize()},initButtons:function(){this.buttons=new ObjectPool;this.buttons.add(new FirstPageButton);this.buttons.add(new PreviousPageButton);this.buttons.add(new NextPageButton);this.buttons.add(new LastPageButton);bookConfig.enablePageBack&&(this.buttons.add(new BackwardButton),this.buttons.add(new ForwardButton));bookConfig.HomeButtonVisible&&this.buttons.add(new HomeButton);bookConfig.ZoomButtonVisible&&this.buttons.add(new ZoomButton);bookConfig.SearchButtonVisible&&this.buttons.add(new SearchButton);bookConfig.ThumbnailsButtonVisible&&this.buttons.add(new ThumbnailButton);bookConfig.TableOfContentButtonVisible&&this.buttons.add(new TableOfContentButton);bookConfig.BookMarkButtonVisible&&this.buttons.add(new BookmarkButton);bookConfig.AutoPlayButtonVisible&&this.buttons.add(new AutoPlayButton);bookConfig.BackgroundSoundButtonVisible&&this.buttons.add(new BackgroundSoundButton);bookConfig.AnnotationButtonVisible&&this.buttons.add(new AnnotationButton);bookConfig.VideoButtonVisible&&this.buttons.add(new VideoButton);bookConfig.SlideshowButtonVisible&&this.buttons.add(new SlideshowButton);bookConfig.ShareButtonVisible&&this.buttons.add(new ShareButton);bookConfig.PrintButtonVisible&&this.buttons.add(new PrintButton);bookConfig.DownloadButtonVisible&&this.buttons.add(new DownloadButton);bookConfig.FullscreenButtonVisible&&this.buttons.add(new FullscreenButton);1<language.length&&this.buttons.add(new LanguageButton);bookConfig.aboutButtonVisible&&this.buttons.add(new AboutButton);bookConfig.HelpButtonVisible&&this.buttons.add(new HelpButton);bookConfig.EmailButtonVisible&&this.buttons.add(new ShareEmailButton);this.btnMore=new MoreButton;this.buttons.add(this.btnMore);this.buttons.each(function(c){c.setCallback(this.afterButtonClick.bind(this));this.setButtonTitle(c)}.bind(this))},setButtonTitle:function(d){var f=new TextBubble({parent:this.parent,text:d.caption,color:this.color,textColor:d.fontColor,margin:7});d.setTitle(f)},initBar:virtual_function,initExtendedbar:virtual_function,onResize:virtual_function,initEvents:function(){function c(){this.extendedBar.visible&&this.extendedBar.hide()}this.topBar&&this.topBar.bind("click",c.bind(this));this.bottomBar&&this.bottomBar.bind("click",c.bind(this))},getHeight:function(){return this.getTopHeight()+this.getBottomHeight()},getTopHeight:function(){var c=0,c=this.visible?this.topBar?this.topBar.height()+this.topBar.top():0:0;thumbnail&&(c+=thumbnail.getTopHeight());return c},getLogoHeight:function(){return this.topBar?this.topBar.height():0},getBottomHeight:function(){var c=0,c=this.visible?this.bottomBar?this.bottomBar.height()+this.bottomBar.bottom():0:0;thumbnail&&(c+=thumbnail.getBottomHeight());return c},getWidth:function(){return this.getLeftWidth()+this.getRightWidth()},getLeftWidth:function(){return 0},getRightWidth:function(){return 0},show:function(){if(!this.isMoving&&!this.visible){if(isIE8()){this.topBar&&this.topBar.css({display:"block"}),this.bottomBar&&this.bottomBar.css({display:"block"}),this.visible=!0}else{this.isMoving=!0;if(this.topBar){var c=transformCSS({tran:{x:0,y:0}});animateOnce(this.topBar,c,500)}this.bottomBar&&(c=transformCSS({tran:{x:0,y:0}}),animateOnce(this.bottomBar,c,500));this.visible=!0;(function(){this.isMoving=!1}).delay(this,500)}}},hide:function(){if(!this.isMoving&&this.visible){var d=this.getTopHeight()+5,f=this.getBottomHeight()+5;isIE8()?(this.topBar&&this.topBar.css({display:"none"}),this.bottomBar&&this.bottomBar.css({display:"none"}),this.visible=!1):(this.isMoving=!0,this.topBar&&(d=transformCSS({tran:{x:0,y:-d}}),animateOnce(this.topBar,d,500)),this.bottomBar&&(f=transformCSS({tran:{x:0,y:f}}),animateOnce(this.bottomBar,f,500)),this.visible=!1,function(){this.isMoving=!1}.delay(this,500))}},getButton:function(c){c=this.buttons.find(c);return 0==c.length?null:c.get(0)},pickButton:function(c){(c=this.getButton(c))&&this.buttons.remove(c);return c},removeButton:function(c){"string"==typeof c&&(c=this.getButton(c));c&&this.buttons.remove(c)},addButton:function(c){c&&this.buttons.add(c)},changeFullscreenIcon:function(d){var f=this.getButton("fullscreen");f&&(d?f.setAsExitFullScreen():f.setAsFullScreen(),function(){this.onResize()}.delay(this,100))},changeLanguage:function(){this.buttons.each(function(c){c.changeLanguage()})},buttonsInExtendedBar:function(){var c=new ObjectPool;this.buttons.each(function(b){b.$parent==this.extendedBar.$bar&&c.add(b)}.bind(this));return c},afterButtonClick:function(c){this.extendedBar.visible&&(c!=this.btnMore?this.extendedBar.hide():(c=this.buttonsInExtendedBar(),c.each(function(d){d.changeColor()}),c=null))},isRightToLeft:function(){var c=getLanguage("btnSearch","Search");return LanguageTool.isRightToLeft(c)}});Class("ExtendedBar",{$bar:null,visible:!1,color:null,height:10,isMoving:!1,create:function(c){this.$parent=c;this.color=Color(bookConfig.toolbarColor);this.$bar=$("<div class='extendedBar'></div>");this.isRightToLeft()&&this.$bar.addClass("rtl");this.$parent.append(this.$bar);this.$bar.css({"background-color":this.color.toString(),display:"none"})},isRightToLeft:function(){var c=getLanguage("btnSearch","Search");return LanguageTool.isRightToLeft(c)},show:function(f){if(!0!=this.isMoving&&!0!=this.visible){this.visible=this.isMoving=!0;this.$bar.css({left:f.left+f.width-this.width+"px",top:f.top+f.height+10+"px"});var h=0;this.$bar.css({display:"block",opacity:0});var g=function(){h+=0.1;this.$bar.css({opacity:h});equals(h,1)&&(g.stop(),this.isMoving=!1)}.interval(this,40)}},hide:function(){if(!0!=this.isMoving&&!1!=this.visible){this.isMoving=!0;this.visible=!1;var d=1,f=function(){d-=0.1;this.$bar.css({opacity:d});equals(d,0)&&(f.stop(),this.$bar.css("display","none"),this.isMoving=!1)}.interval(this,40)}},resize:virtual_function});Class("PhoneToolbarButtons",{setSrc:function(f,h){var g=$("<img style='pointer-events:none;'></img>");this.$caption=$("<span style='pointer-events:none;'></span>");h&&""!=h?g.attr("src",h):phone_toolbar_icons&&phone_toolbar_icons[f]?g.attr("src","data:image/png;base64,"+phone_toolbar_icons[f]):g.attr("src",phoneBaseURL+f+".png");this.$button.empty();this.$button.append(g);this.$button.append(this.$caption);this.colorChanged=!1}});Class("PhoneGotoPageButton",{create:function(){this._super();this.setSrc("gotoPage",bookConfig.GotoPageButtonIcon);this.initLanguage("btnGotoPage","Go to page");global.phoneGotoPagePanel||(global.phoneGotoPagePanel=new phoneGotoPage(tmpContainer))},onClick:function(c){global.phoneGotoPagePanel.showOrHide()}}).extend("PhoneToolbarButtons").extend("ToolbarButton");Class("PhoneEmailButton",{create:function(){this._super();this.$button=$("<a target="+bookConfig.OpenWindow+" href='' class='button'></a>");this.$button.attr("href","http://gmail.google.com");this.setSrc("phoneEmail",bookConfig.EmailButtonIcon);this.initLanguage("btnShareEmail","Share by Email")},onClick:function(c){}}).extend("PhoneToolbarButtons").extend("ToolbarButton");Class("PhoneLogo",{create:function(){this._super();var c=$("<img src='"+bookConfig.appLogoIcon+"' style='cursor:pointer;'/>");c.css({height:bookConfig.logoHeight+"px"});this.$button.append(c)},onClick:function(c){c=getLogoLink();c[0]&&($.browser.msie?window.location=c[0]:window.open(c[0],c[1]))},changeColor:function(){},changeLanguage:function(){}}).extend("PhoneToolbarButtons").extend("ToolbarButton");Class("PhoneInstructionsButton",{create:function(){this._super();this.setSrc("instructions",bookConfig.InstructionsButtonIcon);this.initLanguage("btnInstructions","instructions")},onClick:function(c){bookConfig.InstructionsButtonVisible&&!window.bookInstructions&&(global.bookInstructions=new BookInstructions(tmpContainer));global.bookInstructions&&function(){bookInstructions.showOrHide()}.delay(10)}}).extend("PhoneToolbarButtons").extend("ToolbarButton");Class("PhoneShoppingCartButton",{create:function(){this._super();this.setSrc("shoppingCart",bookConfig.ShoppingCartButtonIcon);this.shoppingNumber=$("<div id='shoppingNumber'>0</div>");this.shoppingNumber.css({width:"20px",height:"20px",position:"absolute",right:"-10px",top:"10px","font-size":"12px","text-align":"center",color:"#fff"});this.$button.append(this.shoppingNumber);this.initLanguage("btnShoppingCart","shoppingCart")},onClick:function(c){window.shoppingCart&&window.shoppingCart.showCart()},setNumber:function(c){c||(c=0);this.shoppingNumber.html(c)}}).extend("PhoneToolbarButtons").extend("ToolbarButton");Class("PhoneBookmarkButton",{create:function(){this._super();this.setSrc("addBookmark",bookConfig.BookmarkButtonIcon);getLanguage("AnnotMark","")?this.initLanguage("AnnotMark","bookmark"):this.initLanguage("btnBookMark","Bookmark")},onClick:function(){var c={pageIndex:BookInfo.getCurrentPages()[0],caption:"",color:"#bababa"};global.bookmark&&(global.bookmark.addItem(c),global.bookmark.show())},setAsAdded:function(){this.setSrc("bookmark",bookConfig.BookmarkButtonIcon);this.changeColor()},setAsUnAdded:function(){this.setSrc("addBookmark",bookConfig.BookmarkButtonIcon);this.changeColor()}}).extend("PhoneToolbarButtons").extend("BookmarkButton");Class("PhoneBackgroundSoundButton",{onClick:function(){global.phoneSettingBody||(global.phoneSettingBody=new PhoneSettingForm({parent:tmpContainer,formType:"setting",rightToLeft:rightToLeft}),global.phoneSettingBody.onResize());global.phoneSettingBody&&global.phoneSettingBody.show()},onMouseEnter:function(){}}).extend("PhoneToolbarButtons").extend("BackgroundSoundButton");Class("PhoneTableOfContentButton",{}).extend("PhoneToolbarButtons").extend("TableOfContentButton");Class("PhoneThumbnailButton",{}).extend("PhoneToolbarButtons").extend("ThumbnailButton");Class("PhoneShareButton",{}).extend("PhoneToolbarButtons").extend("ShareButton");Class("PhoneHomeButton",{}).extend("PhoneToolbarButtons").extend("HomeButton");Class("PhoneFirstPageButton",{}).extend("PhoneToolbarButtons").extend("FirstPageButton");Class("PhonePreviousPageButton",{}).extend("PhoneToolbarButtons").extend("PreviousPageButton");Class("PhoneNextPageButton",{}).extend("PhoneToolbarButtons").extend("NextPageButton");Class("PhoneLastPageButton",{}).extend("PhoneToolbarButtons").extend("LastPageButton");Class("PhoneZoomButton",{}).extend("PhoneToolbarButtons").extend("ZoomButton");Class("PhoneSearchButton",{}).extend("PhoneToolbarButtons").extend("SearchButton");Class("PhoneAutoPlayButton",{}).extend("PhoneToolbarButtons").extend("AutoPlayButton");Class("PhoneAnnotationButton",{}).extend("PhoneToolbarButtons").extend("AnnotationButton");Class("PhoneVideoButton",{}).extend("PhoneToolbarButtons").extend("VideoButton");Class("PhoneSlideshowButton",{}).extend("PhoneToolbarButtons").extend("SlideshowButton");Class("PhonePrintButton",{}).extend("PhoneToolbarButtons").extend("PrintButton");Class("PhoneDownloadButton",{}).extend("PhoneToolbarButtons").extend("DownloadButton");Class("PhoneFullscreenButton",{}).extend("PhoneToolbarButtons").extend("FullscreenButton");Class("PhoneLanguageButton",{}).extend("PhoneToolbarButtons").extend("LanguageButton");Class("PhoneAboutButton",{}).extend("PhoneToolbarButtons").extend("AboutButton");Class("PhoneHelpButton",{}).extend("PhoneToolbarButtons").extend("HelpButton");Class("PhoneMoreButton",{}).extend("PhoneToolbarButtons").extend("MoreButton");Class("PhoneBackwardButton",{}).extend("PhoneToolbarButtons").extend("BackwardButton");Class("PhoneForwardButton",{}).extend("PhoneToolbarButtons").extend("ForwardButton");var phone_toolbar_icons={arrow_down:"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAIhJREFUeNrslksWwCAMAqX3v3N6gdaEhFe7wJ0Lw/iBiIhYJ8e1Dg8DGMAAvwVQp1MwACGG2NZ7AoDwJOKlbnoFCohUPHuEE4iSeMUFHYiyeNWGDAQlzuRABYIWZ4NoB9ES7yQhEn+DtUoniqHY+bQXIJl/0owwFVd0QwzX+z9gAAMY4DzALcAAlzIaPWD+/O4AAAAASUVORK5CYII=",arrow_right:"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAItJREFUeNrs19ERgDAIg+HS/XfGCbyT5EdeYIF8pzbFyMwzOfcMzwIqgJwEZBfiKyC6nkTlFbQgqh8hjlBOAYpQjyGGcHoAQbhFZCOIJrQQVBXLCPIukBAkIF8wvwCkcAoghxMAK9wF2OEOAAlXAVi4AkDDnZ0wqPK4k+HKToiGOzvh/hktAJtHgAEAQ8kaPd99excAAAAASUVORK5CYII=",backward:"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAKhJREFUeNrU10sKgDAMBNA29P5XjgguXKhN0pnEFtwJ87D5YFfVVnmkFZ9VgF5PCUArv8A9vGcDYOERADTcC4CHewCUcCuAFm4BUMNnAHr4FyAl/A2QFn6eMRmvrFXZf7MNx4OMeQVqqYGecAXTLkhDiKVQmAixVisLIZ6WYSDE27dohESGBxLhHURwRGQSQhHRUQxDrOwCyJgeqK0WfX/7f8P9AYcAAwDS3R5CntTCdwAAAABJRU5ErkJggg==",bookmark:"iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAeJJREFUeNrsmcFKw0AQhpNFU096VvDiqYJ9BqFWRTx4Ed/FY5+gB0++QysI3jz0IBLwFXpUIrSX0lu9rLPwB5aYpBu7M2mhAz+7TXYmXybJ7CYNtdbBOpiy+lekhKSFlOCYThZaGTWO+8KJ+iYdVAVNO6EQZKXjqWBNbAPq27ZqPHa4ufQerE16JI1Ic2iEbWflNYLKE5RawKAmaagX2xBj/8SQAD0lzRB7QrontUgNqIVtE4yZwUcU1GRnirgD0l7JWLOvj7HTbGY5Qc2sFyPmE367+AzgE9s+nKAd63LvOoxPzYwdo99J93M+9XdoH0gzx3k/wNheJgYraBvtcwXIdBJ4ycRgXT2ZGhmRdtDPi68LZqoIPj+kBndG5wsyqEum00hyZkrQNitkMrUjtF8SoB9ob0qgim6za7TvElPoJeKNc8pT2XHs8nQhXfAHq1zwl51Cj1dhUXJC2iZF6Ne+KLEzGzss8+KiZZ6Pgu/qZ/afk26xSD5EQf8kvZH6pNdM6fL2Xq+XeQ+SehWxTywsAK8dNC/7VWF1lRNTniD/C8uWUZf7mAVWMTzdLLCKAZIFVjFBeodVjJBeYRUzpDdYJQDpBVYJQS4Nq3x8u+T8LpoH2hWAzMJ2nR3W5Q+xXwEGAJEhs7i8cZjYAAAAAElFTkSuQmCC",autoPlay:"iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4hJREFUeNrUmU1IVFEUx5+jTU3pFFiBNDgtosJo0adCm3Jr69QIgmjhJqJoW1ARRiBEJGpagYvIoIVZ7UqCvqisRTQxuvKLFo1gVphfTf8b/zscHs7M+7hvygs/3ryPc+5/7rv3vXPOK0qn09ZSaCU+bENgDzgAdoPNYANYxfM/wTgYBO9AP3gLfnvqTY2oS2KgGYyk3bcR2sbc9lvk4taXgwvgOAiL4zPgDfgMhsF3Hi8DcVDFkV8ubGZBFzgHJkyO6CHwVYzMLOgBdSDiwD7Ca+/RVjfls96JhnwXlIA24XgBdIKNHqaMJk4fC8JvG/vyJHQl6BPOBkG1D4F2auhTtz726Uqo+ne9wskDEDUoUhOlb916s41sNgftwvg2KA5ApKaYfejW7lRove0fBilSipV3sDGf0HKxuocCut25poGesxNgXS6heoXPg70FFCkX2MJiU0BeVCmecTdcOH8ENhkU2yWe1ZWLCW0WF7h5Tqo2Ay6BUgNC42LAmu1CQ2CUJ3tcOra/yxsMiL1Lf6PUlhFaLTo76EOobv1guw+hdcLX35dMiK/8WhFgPPEY9t0BCf7eD96Da2CNB19PqcViGJkRuotbFS9OexT6HOwAZ8AUY90TYAgcE305adPUYjHWzRhv4TbhMxBX4VsL2Aq6VXAG1oKb4DWoceErIbVpoRXcDhvKHL6Ao2Af+MBjKiZ9QdHrHfgYltpCIsi1eMtMtle8dU0gxf7UNEiCk3lSoSmpLVSAvEzlSB1cYN94TC2wq6DVTYJmifQhGlACeRq8BKttU6Mph11UaisRhuXMcUw2NYrXwTbuz3P/PJjMY1sptGVGNMltlSGBFXyu9guRz8BOcMqBSEvYJaXQAbEyIz4EhvkcVbl8oxiRI3xwf3ToJ0ItFmsClgyvdKvz+ArtBp/E/hxoAWUmXqEmgpK5LO/6qiCCEnuYF3fhdFIIHDcQPeUM83SpZoYXdLgUquyuGIpHO0WMG8uWirR6SEXu+7zN2VKRtnzJXUoUHAqd3CXZd4pacqbLDf9Bunx4KRQgOtxUSsL/sKQT9lIke1zAItlDL0UyzTLbNAiq7NjOvjzXR+UCC6qQ22i6NK5yn4uM0GVp/BcTsQTThykRT8rS+ApbbnULnGXkH9jHhstgzMPHhjHaBvqxIdvnm1qm2+rzTQyU8vwPMMaQb4C5uufPN36EFrT9EWAA8ZYIlzoIwO0AAAAASUVORK5CYII=",addBookmark:"iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAALJJREFUeNrs2W0KgCAMBmB9b1E36lhd1o6xDAoiUtDmUngHA8Gvh/1zehFxIwQyc0vMEFOMMpx3vobPVPTYOBkXbos5l0KvCW+EzN4HN0gQSiihhBJKKKGEEkoooYQSSmjy2Su9QyUx7gp6byB4bSwaIN1jLL1Ac60YNSwaIlWxaIxUw8IAqYKFEfIzFobIT1gYI6ux+AFZhcVPyGIsCg90DbHV0NUA+cSuyQWjfIjtAgwAnCVHi6fE7GQAAAAASUVORK5CYII=",download:"iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAM9JREFUeNrs2OsKgzAMBWAjPrg+eYbgQMVtuZ2u4gn4N/1MaZtWVHW4Q4yAnPP2lYYAKvpOKL1X9DZTTyihhBJKKKGEEkpo11DdNcEt4ut4ozFBC2S4otIIqx/GdFUUjTUhrVOPwpqRnlVfjXUhvdtTFdaNjOyjWWwIGd3wo9gwMnMyebEpZPYItWLTyDN0HvyPW7+wGeTBs38kyzxuqeOHvDmlsnuSYiS0zRMUEtGPCgK5xgRoNASQk1eR50KnP109UhVdOvQtVydT1/ESYAB4Ci9LPfzk4AAAAABJRU5ErkJggg==",firstPage:"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAALZJREFUeNrM1z0KgDAMhuFWPJAH8PpugieS2sHBoYQmeWMb6CjfQ38SzKWUNLKWNLgkwFXXCWSUdzVrFT7coPBhR/ANz38DusKjAN3hEQBVOA1Qh5MAUzgFMIcTAFe4F+AO9wCQcCsAC7cA0PDpx3GrsmbSRe0AirAeAYbw3AEE4b2EbgTxClwI6hmaEWQfMCHoRqRGRHRCFSKqFXcjImdBF0L6MzrqugGEuAMSYA/YifnG8SPAAOlhIwr0LibAAAAAAElFTkSuQmCC",flipsoundOff:"iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAb1JREFUeNrsmL9OwzAQxnNVhKDAxMBQIRYYGVkYOsPEgpBAQrxNYeMBWJF4BSR2ELwEEgIWQIIFkCg9PotEsdymzZ9zXJOe9FPTJHY+n+2zfcTMgQ/WcPTdZXAMbsEr+Aas0WdhheLmwBHYAwt5C1chtAnOwLbWg8prD+AK3ES/T+A+tRY1Ri1yAL44sRfQAc2U92PrexZf3LGMPYPVqM4T7f47OMzQsFSjaNZLTn1V1zXYiP5fgk3Q04Zbd0jZgWYKpZIiP8G0Xn+BRprl2AxPEl6dEWjsWMXRiVDnZivg06Tr6ySUhRcOK0LZB4+yD13PPoxRHhKO0sZr4XEcCniPRpQhCe83SgZpynCfR3jf2spEOd5jqRXrXwd8zjgpWDJK2ApP5piksmLz7PDJIEs5ktpRldnm6ZOFC0SDSruexnkyORErFZ6si5U8ipAPHq3VUaTt4hRqpmbUdxYNx+yCHbAGZl0dl81vxCLnQQdsgSmjYR/BX+7qZ3DTk3RfTzAvGlsIWmAJnIKu9uwNnIN2lrpsC1Ui18Gjkczdz1uX7a5fARdBkopU6e9WodhnIZFb7zgaVr25KGq/AgwAkWl9buNAaSIAAAAASUVORK5CYII=",flipsoundOn:"iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAeRJREFUeNrsmL9Lw0AUx3tSRKsuOjgUEVFHRxeVzuriIoKC+LeIUt0EwclVcNJRBGcV/RsEQayLv+qigrXP7+GFHNfEJvFdk9A8+JBL01y+9+7uvbsTRJRLg3XE9N1hsA2uwTP4AqTRYPkWiusFW2AZDIR9uRVCC+AALGg9KL12Dy7Albo+gDvfWuQYtcgq+CTXnkAZFHz+71jDM6dwSzz2CMZVnTva729gLUDDfE2oWc859WVdl2BK3Z+BWVDXhlvtj3c9zRQq/inyA3Tp9UdopPkemeGJw6vdDI1NVBzNhMZutgK+yLq+3YQSc/KwIpTS4FFKQ9f7iZS5/QWss4QRLddTBOFkhCTyKEs7BzNcuT7MZCEPkaaNgWNVngYbXB4NEqipSXD3qucEzIFX0B/Vo1GFihDPR8FNwKHF1vWpy/XNxqduu+paTWp4GgFHYF7d72XhKeRyzsuzcqZvBhRpfT0qAoStxOR6YXvWc4Ynq2K5tyIiDR5tm61IKY5dqBkP5XcGDccsgUUwAXri2i6b33BE9oGyWk11Gg17z/2eXX17N9097qsznos6lgdFMAT2QU17VgWHoBSkLttCpchJUDEOc1fC1mW76+Uq/zTnHkXK4+8ixwo/C09cmUkkXeiPAAMAOUGhMSFvgF8AAAAASUVORK5CYII=",forward:"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ1JREFUeNrcl0sSwCAIQ4Xx/ldON11bkGDaOuM6Tz5BDMBQHh/iUwXAfeURgArAqhCMCJQgWCnYhmB2wRYEuw3TEB0+kILoMqIwRKcThiC6rfgR4sQsWEJMlqUmbdteMw1nIGzsYWWnawCrh7lSvBsAkZS6UrwLAJlidqU4GwA7bexKcRbAtjhrLyi5Z8entDQL7JTwb3bD7wNcAgwAFoQdQyYoY8AAAAAASUVORK5CYII=",goPage:"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNrs1sENwCAIBVDpAJ3G/SdgmU5A7Y1TBcMXD5g0vTT5rxhBEpGWua6WvApQgDBA712+J70CXkQYgJlpBRFagRVE+BZ4EZBT4EHAjqEVAe0DFgS8Ec0QpMfx+OAZr3snKr0V044LiS69/vstFfgLhwNm4VCAJRwGsIbDx/EsPBzgDQ+/EXnD4eP4mEZU1/ICHA14BRgAzcZTZ3EH31YAAAAASUVORK5CYII=",backward:"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAKhJREFUeNrU10sKgDAMBNA29P5XjgguXKhN0pnEFtwJ87D5YFfVVnmkFZ9VgF5PCUArv8A9vGcDYOERADTcC4CHewCUcCuAFm4BUMNnAHr4FyAl/A2QFn6eMRmvrFXZf7MNx4OMeQVqqYGecAXTLkhDiKVQmAixVisLIZ6WYSDE27dohESGBxLhHURwRGQSQhHRUQxDrOwCyJgeqK0WfX/7f8P9AYcAAwDS3R5CntTCdwAAAABJRU5ErkJggg==",gotoPage:"iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAKtJREFUeNrs2GsHwDAMheE1+v//cmZszG69GHkPOfRjebQlSYu7LwqxyX2+LzTUFU70jCxUaBhyBBqK7IWGI3ugCGQLikF+QVHINygO+QRFIq9QLPIMRSO3VEotb6TYIpJKvu4/+tGEJjShCU2oGLSC63vW+r/jCm/01h+bApIIfZ00TAFJgjZnNlNAEqDd068pICOhw/8IpoCMgE7/yERd/XBvUenAI6sAAwBddB9bPoYv4QAAAABJRU5ErkJggg==",help:"iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2VJREFUeNrUmcFPE0EUxpeCYFWaNOjB2FDjQRI8VsWDFxtueEXERA/G4J+AFz3oAf0DDBSIXgVPiPGC0rvWKwYMJkCNB0ET1CDEWr8xb5ovk7bMzu6WMMkvu+2+mfl2dmb2vbdN5XLZ2w+lJUDdGDgHLoGz4DQ4AQ7L9V/gM1gCBZAH78Bfp97UiPokBUbAatl/WZW6Kb/9Nvl49B3gPrgFWun/bfAWfAAr4If83w7SoFtGvo3q7IBJcA9shDmiV8BXGpkdMAX6QNyiflxsp6WuLqrNARsNuxm0gFFquAQmwEmHKaNJSxslandU+nISegjMUmNLoCeAQJML0qYus9KnL6Hq7maokRcgEaJITULa1mWm1sjWamCMKj8FzRGI1DRLH7qM2QodMO4wSpEslp/g4G5CO2h1f/TxuPtBrsq+mZNrttNAz9kNcKyeUL3C/4Dzlh1MW2z0cyBpucBK1aYAG3XSHjceokhdCpZiJ2mv7qwmdIQMbPbJIUOIEp2h65kqN/LQcp/VAzZiCo2BNbk4ZTmaBRIwXMdumOy+Wbb9TOzXRFtFaA81dtmioSTZL1vYL5N9xsK+j+z/v2Ri8srPkoPxxsJF6KXz5xb2r+k8aWE/L1o8cSMr/mhGjspf3LJoSIlr8uFNsrhPFvZbouWi+LqVEe2S40IEzrkahH45f28plLV0sdDjclyJQOQc/X7ko+4Ka4uRk6vKZogieyUE0Y/9juV89gwt7Sw07DJkjOS4z9GsGqB5FD4kQhCp5mOOfquRvO3QToK1aaFf5JgOKDJZRaTrSHayNi10UY7dITzyJG1hQR73GdYWo23Dk2gxHnCV+3kR1Cpx0eLJgqwIzcuxjd5Sro/eM27epWQpvM6zUBWXF+X8Rkgr/3uAutflWJQ3VE03L92A8MPJzdOpmm0KIfZK6IRo2ObUj2n02CEU0ZwynGTXWL9ESYm6wd06JRwSDRSq+lqUuuuipW64fNUxXA4i1AyXr+2HBETOT6akdQ9TOq0uSbJXDUySvXRJkmkOGNMgqrTjmPTlnB/lBRZVIncw7NT4UfAA3DRS47/lNbcg4cMm+ZOcGj9opMafgLtgPcqPDSrjUXT42FCUupF+bKj1+SYr7p36fJMCR+T6T3EqlsSTmg/y+SaI0IaWfwIMAAStDWJfRb5JAAAAAElFTkSuQmCC",home:"iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAP9JREFUeNrs2dEJwyAQBmD9CbRT2EnS2bpbM0mzRPpkE1DwIVqjd6mWEw5CEPNxnokSba1VPTQwjGldNA21keumoB72ckGKBQPy5oIUCwakb6RYMCHJsSBAzhFkiJ1rsSDIpMnob2ozC4bpTmW2GAum6SbHohBpKmq7qGbBVJPkNaszNiW+w3uNK/End1nj4i01GQ0zSY1UbsyszIJx4ZDWLJgXzpGaTWJxwsIhWWCIICfm6U6VwbSHRQQ5/vDUMe5h0Rgyih0C4Hbj3tB5bsM+PfTIC18zgbLGh+qkCVSgAhWoQAUqUIEK9C+hQ8EGt9mMPk5wfH2G7uWH2EeAAQApel6c9rJWMwAAAABJRU5ErkJggg==",instructions:"iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAiZJREFUeNq0lssrRFEcx5lhheRdRhnJeKQ8UqyMrFiQDbOd+SNYeBUpZSELZWNhRR4rr5VkbKQUitCkKEpepaEUur6H76nrzrmPIac+Gef3/f1+5557z+/8EjVNS/jvkeRAUwXagB+Ug2zO34MTEAYr4NAsQKLFk5SCQRAA7+AA7IFr2j2gDlRzsfNgGJzFRBJJFARBFDyCflBsokugrZ/aKH1/aFRO3dr3WAFei+BGvPTRGMM0SZCiKeCOI4HETV8xQnJe/058YB9sgXbwYdjZHNAJavi/0C6BW4PODZZBE6j9eke6VSyCJ5CvWKEPHGmxIwIaFHoPYy3qt6uSTn0KhxSwQ/s0gzbwtxgnIFPh10d7pZwYAK8mL9pP8azCNkNbi8JWyJgDLu6jn4fpwuTMTINxxfwm/2YqbJeM6ZdZr8BknF9SMlgH76DERCNiXssnydadZCcjDcyBVtALIiY6ETMr6Rf1LoOfbjMYBWN2Di5dsfM4SCD0I0wwxKewGvngQR7GDW5BvY1THjgGNzyUbzb6XRCVTxJmSffaOKWKPQbnDhIUMmbYyWHU4wJFINfB1xdzGAXzFmVFUgEmQMAmgSwrC8YqLOrTC1izqMAdXN2STSVeZSyfqtSHbEp9OqhjyXBc6lXCHoqW/3Bp9djdjH+5fp9V169VI1HGRqLL0Ehc0V5gaCQW2EicxtOt6FsicVM2siXK4fwdW6Jt3oSmLdGnAAMAdu1frpgXQ7cAAAAASUVORK5CYII=",languageChange:"iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAASxJREFUeNrsV10OgjAMpmbnwJvpUYALqOfRB9+Ml/EJX3yaJZkJGSySrrQl2ZKPkfKzL+3afgPvfbWFscv4tkV4AQzrVJDhUclQgOP4yYoEPUfoN7NHC9FCdItEa8QV0Ye5Jtpn8h/rKBG/MbbdEC/EJcx3on2yBjfRHnEO9yfEh2ifrOGYQ/9EHEKhPiIeRPvqoa9DON9h3hPtkzU4er1EC83q9aBRnkQlG8krIfSiko0j9CKSrbTQlbw7RuqIY86jY1JN9KwbLk6JGCQ8DKl3rHgU/iXcTkWyUcqWhmRboCHa2K4i2ShwKpKNVBcUJBsFca8XkWylhRaihaghoqkjA8cxhIVoF9kbLmU+J9lyzkypeidRX7P3qBmSS5IJLGd9Z41kao+aHF8BBgB+yN6ZLq7n0QAAAABJRU5ErkJggg==",lastPage:"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAALdJREFUeNrM10EKgDAMBECr/sgH+HfPgk+KFTwJlWR3Yw30JLhjaRMsZjb0rHHoXG8Auxdbe11H6+HseMGFKARgQXegPBBdzkA6wnMIUxHeW5CGiFzDFES0D8gRSCOSItBOKEMwrViCYGcBjVAMIwqhmoYw4tfjOFLW2I1PAHC4AkCFswA6nAFIwlGALBwBSMOjAHl4BJAS7gWkhXsAqeGeP6PUcO+fERu+1TUhANVXr78ex6cAAwCJ4yEVVUgyHQAAAABJRU5ErkJggg==",moreBar:"iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAutJREFUeNrUmctPE1EUxqeAxfroBl0YJ5QVJrj0gVu7I6xwIWKiC3XJv6ALXdR/wLQIwQUsxB1i3En3PlYkNdRVoTYmlo2PYIm1fmO+OzmMtNOZ9nYuJ/nlTnpfX+/MnXvOmVij0bAOgw100LcPXAJXwUUwCs6C46z/CT6DIngP8uAd+BNqNmdFA2KDDNhqBLct9rWDzhsLcOuHwENwD8TF7zXwFnwEJfCdv58EKTDGlR8UffbAAngAdrq5otfBV7Eye2AFTIJEG/0TbPuCfZU5Y063o8GvwQDIioHrYB6MhHhkFCmOURfjZjlXKKHHwJoYrAjGOxDo5QrHVLbGOQMJdf7dqhjkJUh2UaQiybGVrTZb2WYD5ETnZ6Bfg0hFP+dQlmtX6LTnH+oUKcXKOzjjJ3RI7O5Pmm53q8dAPbM74HQroWqH/waXeyhSbrD6QY+AbDQs3nFPIxCpWBDv6uGDhGZEg5EIhabEgmW8QvvANitXIhSpeE4t29T2zwOyeBbbvF4ywKtTGmxqc4WmhYPxxgCh69Ri0Y10hV5g6fiLuwYI3aUWi76uK/Qcy4JBTn1BalNCz7As+XSeABUyoaFeWmmfNu6yGnfZrM9urIhjrqKhXjLLdjW568NYTHP9fwGaJcKHpE97Jwz5wqDtroZ6acl92rjMG1zmOQNe9l5Xc0Pe+k2WYwbt+vNSmxL6QZxQCQNEJtSJxJyAKzTPclCcUlFaWoTXeSnUicvLvL5tgNBbLMvqhFJCnTTLMq+nmDiIypy5r/F62U0BeVI1NQN2/7x40dvNQpEnBoUiWb/grioSDr0O7jY5d5VaWobLNwwIl28ehgTEXJBMSTzClE48TJLsdQ+TZK/CJMkURzyPga60Y45zhc6Pyg2mK5E70+3U+CnwCNzxpMZ/8ZgrMHz4JvxJmRo/6kmNL4L7oKrzY8NjUA7xsaHMvlo/NjT7fJNmuD3KhMEJ1v+gU1GkG7neyeebToT21P4KMAC759v3q1zLkAAAAABJRU5ErkJggg==",nextPage:"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ1JREFUeNrU10EOgCAMRFEg3v/KdeOWhM78Wm3iel5qaGFGxOisNZrrBBDP196B6ALMSsRpB8oQmV9QgsieAhyhHEMUoc4BDOEMIgThTkIbQYxiC0HtAhlBLiMJQW/DNOIX6zhTsenGK4B0OAmQwimAHE4ArHAXYIc7ACRcBWDhCgANd67lkxoeqzM88zIqCXeu5VhdXcGfWce3AAMAByQePhmMi8EAAAAASUVORK5CYII=",note:"iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAZJJREFUeNrs2c1KAzEQB/DuUg/2pqA3xYewd70IngQvvo59BJ/A5/BgtXjShd7Fkx8I7kUviggaZ2Ai25Als02TjJCBf0t2m+RHyrbZtlBK9f5D9YV5liAHkC3INeTq7wyuqKDcqNk60eckIaeEe4acQr6oPcTzUt76D8gy5AmyQcewfQQZQqpSKBJrj57v8KFIfNVr5LdxYdeQNcgZZB8vJb2ix9iIFF1TB3IMOdR99IrGXNYC8gJZtyCxjYv3Clltdiotg4RORcjHFuSbibRBQxcitwm52YJcsXUsBSBrckzakM1vJl2hPswrGv/BOF7T8VvXGDGgLuQ5Z5zQUA5ywJk/JJSL7KWEdkEmg7qQYwOZBMpB2vpFhWrkfUdkVKgPMhrUFxkF6kJeMMcJCl0UMih0kUjW/ObGuWDuhPD1n7RDN3fml5Ddjjsr5/w+27x3C3IyB5J3W+Cxoj+0t0TggJA7czqc8/tAm+WDZM3f97hBi1oSfoDI0AzN0AzN0AT/iijpKzoSYBlxdk/i61eAAQCshkG5z7nUiwAAAABJRU5ErkJggg==",phoneEmail:"iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKTWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVN3WJP3Fj7f92UPVkLY8LGXbIEAIiOsCMgQWaIQkgBhhBASQMWFiApWFBURnEhVxILVCkidiOKgKLhnQYqIWotVXDjuH9yntX167+3t+9f7vOec5/zOec8PgBESJpHmomoAOVKFPDrYH49PSMTJvYACFUjgBCAQ5svCZwXFAADwA3l4fnSwP/wBr28AAgBw1S4kEsfh/4O6UCZXACCRAOAiEucLAZBSAMguVMgUAMgYALBTs2QKAJQAAGx5fEIiAKoNAOz0ST4FANipk9wXANiiHKkIAI0BAJkoRyQCQLsAYFWBUiwCwMIAoKxAIi4EwK4BgFm2MkcCgL0FAHaOWJAPQGAAgJlCLMwAIDgCAEMeE80DIEwDoDDSv+CpX3CFuEgBAMDLlc2XS9IzFLiV0Bp38vDg4iHiwmyxQmEXKRBmCeQinJebIxNI5wNMzgwAABr50cH+OD+Q5+bk4eZm52zv9MWi/mvwbyI+IfHf/ryMAgQAEE7P79pf5eXWA3DHAbB1v2upWwDaVgBo3/ldM9sJoFoK0Hr5i3k4/EAenqFQyDwdHAoLC+0lYqG9MOOLPv8z4W/gi372/EAe/tt68ABxmkCZrcCjg/1xYW52rlKO58sEQjFu9+cj/seFf/2OKdHiNLFcLBWK8ViJuFAiTcd5uVKRRCHJleIS6X8y8R+W/QmTdw0ArIZPwE62B7XLbMB+7gECiw5Y0nYAQH7zLYwaC5EAEGc0Mnn3AACTv/mPQCsBAM2XpOMAALzoGFyolBdMxggAAESggSqwQQcMwRSswA6cwR28wBcCYQZEQAwkwDwQQgbkgBwKoRiWQRlUwDrYBLWwAxqgEZrhELTBMTgN5+ASXIHrcBcGYBiewhi8hgkEQcgIE2EhOogRYo7YIs4IF5mOBCJhSDSSgKQg6YgUUSLFyHKkAqlCapFdSCPyLXIUOY1cQPqQ28ggMor8irxHMZSBslED1AJ1QLmoHxqKxqBz0XQ0D12AlqJr0Rq0Hj2AtqKn0UvodXQAfYqOY4DRMQ5mjNlhXIyHRWCJWBomxxZj5Vg1Vo81Yx1YN3YVG8CeYe8IJAKLgBPsCF6EEMJsgpCQR1hMWEOoJewjtBK6CFcJg4Qxwicik6hPtCV6EvnEeGI6sZBYRqwm7iEeIZ4lXicOE1+TSCQOyZLkTgohJZAySQtJa0jbSC2kU6Q+0hBpnEwm65Btyd7kCLKArCCXkbeQD5BPkvvJw+S3FDrFiOJMCaIkUqSUEko1ZT/lBKWfMkKZoKpRzame1AiqiDqfWkltoHZQL1OHqRM0dZolzZsWQ8ukLaPV0JppZ2n3aC/pdLoJ3YMeRZfQl9Jr6Afp5+mD9HcMDYYNg8dIYigZaxl7GacYtxkvmUymBdOXmchUMNcyG5lnmA+Yb1VYKvYqfBWRyhKVOpVWlX6V56pUVXNVP9V5qgtUq1UPq15WfaZGVbNQ46kJ1Bar1akdVbupNq7OUndSj1DPUV+jvl/9gvpjDbKGhUaghkijVGO3xhmNIRbGMmXxWELWclYD6yxrmE1iW7L57Ex2Bfsbdi97TFNDc6pmrGaRZp3mcc0BDsax4PA52ZxKziHODc57LQMtPy2x1mqtZq1+rTfaetq+2mLtcu0W7eva73VwnUCdLJ31Om0693UJuja6UbqFutt1z+o+02PreekJ9cr1Dund0Uf1bfSj9Rfq79bv0R83MDQINpAZbDE4Y/DMkGPoa5hpuNHwhOGoEctoupHEaKPRSaMnuCbuh2fjNXgXPmasbxxirDTeZdxrPGFiaTLbpMSkxeS+Kc2Ua5pmutG003TMzMgs3KzYrMnsjjnVnGueYb7ZvNv8jYWlRZzFSos2i8eW2pZ8ywWWTZb3rJhWPlZ5VvVW16xJ1lzrLOtt1ldsUBtXmwybOpvLtqitm63Edptt3xTiFI8p0in1U27aMez87ArsmuwG7Tn2YfYl9m32zx3MHBId1jt0O3xydHXMdmxwvOuk4TTDqcSpw+lXZxtnoXOd8zUXpkuQyxKXdpcXU22niqdun3rLleUa7rrStdP1o5u7m9yt2W3U3cw9xX2r+00umxvJXcM970H08PdY4nHM452nm6fC85DnL152Xlle+70eT7OcJp7WMG3I28Rb4L3Le2A6Pj1l+s7pAz7GPgKfep+Hvqa+It89viN+1n6Zfgf8nvs7+sv9j/i/4XnyFvFOBWABwQHlAb2BGoGzA2sDHwSZBKUHNQWNBbsGLww+FUIMCQ1ZH3KTb8AX8hv5YzPcZyya0RXKCJ0VWhv6MMwmTB7WEY6GzwjfEH5vpvlM6cy2CIjgR2yIuB9pGZkX+X0UKSoyqi7qUbRTdHF09yzWrORZ+2e9jvGPqYy5O9tqtnJ2Z6xqbFJsY+ybuIC4qriBeIf4RfGXEnQTJAntieTE2MQ9ieNzAudsmjOc5JpUlnRjruXcorkX5unOy553PFk1WZB8OIWYEpeyP+WDIEJQLxhP5aduTR0T8oSbhU9FvqKNolGxt7hKPJLmnVaV9jjdO31D+miGT0Z1xjMJT1IreZEZkrkj801WRNberM/ZcdktOZSclJyjUg1plrQr1zC3KLdPZisrkw3keeZtyhuTh8r35CP5c/PbFWyFTNGjtFKuUA4WTC+oK3hbGFt4uEi9SFrUM99m/ur5IwuCFny9kLBQuLCz2Lh4WfHgIr9FuxYji1MXdy4xXVK6ZHhp8NJ9y2jLspb9UOJYUlXyannc8o5Sg9KlpUMrglc0lamUycturvRauWMVYZVkVe9ql9VbVn8qF5VfrHCsqK74sEa45uJXTl/VfPV5bdra3kq3yu3rSOuk626s91m/r0q9akHV0IbwDa0b8Y3lG19tSt50oXpq9Y7NtM3KzQM1YTXtW8y2rNvyoTaj9nqdf13LVv2tq7e+2Sba1r/dd3vzDoMdFTve75TsvLUreFdrvUV99W7S7oLdjxpiG7q/5n7duEd3T8Wej3ulewf2Re/ranRvbNyvv7+yCW1SNo0eSDpw5ZuAb9qb7Zp3tXBaKg7CQeXBJ9+mfHvjUOihzsPcw83fmX+39QjrSHkr0jq/dawto22gPaG97+iMo50dXh1Hvrf/fu8x42N1xzWPV56gnSg98fnkgpPjp2Snnp1OPz3Umdx590z8mWtdUV29Z0PPnj8XdO5Mt1/3yfPe549d8Lxw9CL3Ytslt0utPa49R35w/eFIr1tv62X3y+1XPK509E3rO9Hv03/6asDVc9f41y5dn3m978bsG7duJt0cuCW69fh29u0XdwruTNxdeo94r/y+2v3qB/oP6n+0/rFlwG3g+GDAYM/DWQ/vDgmHnv6U/9OH4dJHzEfVI0YjjY+dHx8bDRq98mTOk+GnsqcTz8p+Vv9563Or59/94vtLz1j82PAL+YvPv655qfNy76uprzrHI8cfvM55PfGm/K3O233vuO+638e9H5ko/ED+UPPR+mPHp9BP9z7nfP78L/eE8/sl0p8zAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAJKSURBVHjarJbba89xGMdfv2W0VkvEcirnUoQRUi64lXLjcLNpdqVo2Y0Lu3GhZA4lh5CUVhT+ApJDEymHlRyWkaYmxqyxLeblwvP79fVrfr/vDk89F7/35/l93s/783ye5/PNqBSwTcABYB7prQ2oA55lgZICwaXAIWA5IPA7pa8A1ic3GvcfggrgJTANaB+mko/AgiQwlJKJwFOgB6gFJhVIZijLAH2FlMwAbgA/gMXArCDNMArLV7IdWASUAXeA1qgHY0lSFlJbgC7gErAa+DkakvzjmgJ8A2ri9wRgJbCtyD6voo6pSPrzsINAQ4pkjyVISoEv/6yqSW9SP+dhw/U36r0klsx6KbAbeJ6HLUyh5HWiw98BG4CrwJakknVql9qj3k9kcUQdTOFHEv95qD7yr11XcyTtAd5SW/LkZ1J4NrYyEv2lDqgdau4K9wOfYuYM5B2RKXwucB7oBN5Gvx2Nlsgp6Vb3qVXqg1DVrM4uUuQl6rWIb1d3Jdb2qn1JJeNjgj4G1gA7gGVx/5sj06StBW7GtZ0DVEfMmURMOTCYVNKrNg6RabXaGZmeVVepl+PcW9WNBVQ2xr5FSbJeF0XMWm2KfsmRlKQcPxeAmcBO4DawHzgJTB/JgCxmF6PRDgNbgQ/AKaByLEmyV/ocMBWoj6J3AscDS8Zl8klG8m6ciKe6Htgct7Ep1rpzj10USbVhlIMRtUZ9EaPlrvpeJROfRG3A/GAfqfUCX6NfygN7AlRlp/BpYA8weRQkFdHUHcD3KMUVgD8DAMaxpfjH2Iw6AAAAAElFTkSuQmCC",previousPage:"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJtJREFUeNrU1bsOgDAMQ9EW8f+/HBYGRmzfEFGps4/6iHdVrcl1rOHVBah7jwBq8gSe4ftrgBxOAqxwCmCHE4AoPAXE4QkACXcBWLgDQMNVAB6uAFrC3wLawn9Tx9ttOvIE2hDKFbQg1DeAI5xHiCLcX4Ahkm+IINI5ECOIQRQhqEloI8hRbCHoLpARHWUkNebZVHJ76grkdQkwAHdJHj5RrO9NAAAAAElFTkSuQmCC",print:"iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAKhJREFUeNrsmN0KwCAIRufYg9eTf9vlBv0Yy1L4BO8iDmlySgAcEeJUrktPwiiTBkCUJ2p97NJbcM3ecDAwu/RhepSgBCUoQQlKUIJWQVsqZx1dBXxrngZohz1JTfPEiY/ij4/C+2XKhgyqvUs9Kk4u+oeHc5SgBCUoQdeAtsxq+ScZnEpJ1Z6wQfMwUvrssDVzqfRqQbASD44ngkYG5ZvJ8s3kOm4BBgB8hGUNFd6i3gAAAABJRU5ErkJggg==",print_off_phone:"iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAMAAADyHTlpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAMxQTFRF6uvvxsnU+Pj6oaW4pqq7/v7+vsHOsLPD/f39zM7YxsjT3d7lqq2+q6+/7e3xuLvJ9PX3oqa4oKS38PDzp6q80tTd6eru2dvi0dPc+/v8p6u8/f7+/f3+oaW3vL/M8PH0wMPP3d/lx8nUpqm7o6e57/DzoaS33t/moqa57O3x3uDm6Onu9/j5wsTQpam76+zwqa2+3d/m6urvrK/A2driubzK9PT2vL7Mu77L3+DmxcjT+Pn619jgwcTQ9/f5ur3LwMLP19nhn6O2////RwhzIwAAAER0Uk5T/////////////////////////////////////////////////////////////////////////////////////////wBx0o8SAAABjklEQVR42pSV53KCQBRG2QWpFrCiYOzdWBKj6eXz/d8pK+gEIuzi/cfMGebuLedKx8whxT9zUk3VBo4z0NSalOOgtpFHJPKGnYLSvgw8EmtGdZ3OLFIA5D5NQl+qKH8/RH+z6JZRnV+hHgFKo/8vGZUA4sXR5gHOe9KzfxwcmlHUu4MipZRIwZ0XQU20Omnl7LRg/qFzTCVO6YfYXlBaxY7Xph0Gn2eU4Inf0lKQAkP37XGFj1bG7X2AGrgXTcoHjBOay6MuQhfI5xgqoSAewAIYeHTPZeOGiRpDVVhi1ILKUA1FMVqExlAFVIxSKAyVoYtRHfJtaKYE3oIEbnjWDcVyQcQoCVpwQ2OzjEs9HJcsQ9gNh/Boy8LRLst2uDB98cKQyxoqaPDIBhR6We4Jhvzl7mVWxmvELjoT0TqZXDMR6TG9fcFJzLcxxXMzLk3fTJJmhUnT9K9UPGEq7sZUXD+peJsk+CUJBN8rUt+nxV4geLJMPRub6NnYpJ6N8Bi5qrZqt1ea6nKPET9+BRgAmmObZGljhCAAAAAASUVORK5CYII=",print_on_phone:"iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAMAAADyHTlpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAIdQTFRFTJHshLPy/v7/2Of7nsP1Vpbt6/P9k7z0krz08ff+VpftaKLvXJruqcr2aKHvTJDsgLHyqMn2/P3/+Pv+VZbtlL306fL9TZHtW5ruwdj58fb+wNj4XZvuv9j4VJbtf7Dy+/z/+/3/ncP1vtf4kbv0wdn58Pb9fK7x1+b7fq/y////SI7s////Zf6CDQAAAC10Uk5T//////////////////////////////////////////////////////////8Ape8L/QAAATNJREFUeNqM1eeSgyAUBWCwYYkaW3rf7s37P9+yGGdBLuX8SibfTBAvB/L0DlG/BmFJi3677QtahoGFJtEJpJyixECzgcAiZMgw+pEDknyv0ZaBIaxVaXcFY66dTNs1WLJuJZqCNek/3YMj55lmuYv2ny/KwJl0opvaTeuNoJGFjOPrQ/RHg5VNznQVcBr6SICQ08ZLQskp9ZJAOa28JFScxl4SYk6JlwRiopoUNF7uNirFAir9Z0SKx6IawKTYrGb5t6gUr+B7sURcihcrj8sogkkxLsoQmuQ0hM+EYAO62NVkOjCD+xSw+RjGLhln8+E+uuibd2W8S+1ysxfRTam3L7P86dTSvBvXkN61Kj7iVXzGCv7A9IJnB9O18djJcPdIrJdRQ4tLXV8K2lgvI3t+BRgAzCUYruaGSw8AAAAASUVORK5CYII=",search:"iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAoZJREFUeNrUmE1PFEEQhmc2RFx18QAXNPFG1MSPmwKGK0M84F74FWDkr0jwAP/AaALhoAnJkoAxopxUEnR3PWiiXuQgRuA2vJ28nZSNu9M9H53ZSp7UhN3uerdm6KmqMI7joBesL+W6O+A+/VUwCC6C32AffAbvwAv67KYyakkVzIJm7GYtMMf1QVpCy1v/ACyAK+Jvh2AbvAc/mU2V1WFwG4yCc+L738AjsFpERvvBkpGhLTDDz5LWzvD70pYs1p6i24cDYEME+AKmUt66Ka7XtsH9Mws9Axpi4+euG3f44c/Eng3GySRU3u5FUMkoUqP2eWI8BqmF1sVGT0GYk0hNyH211dMIVUfIV27QBrWcRWpq3D9mvKqr0FnxS6OCRGoiEWvOVWhTHEGBB/TR1Uz6bkUcqXfBCK8XPb3CdZwRxu9oUugk/RFY8yR0jfFk/ESho/SvwbEnoceMp2zMVuh1+l3PFdxH+mu2Qgfpv3sWquMN2QodoP/rWeghfc1W6AH9ec9CdSn4x1boPv1lz0J1vF+2Qvfob3gWepP+k63Qbfp74Kwnkf1gnNdvbIWu01fBtCeh0+IZXXdpRXriXa/sMf0EiArOZsQ4ARtHp+ZO1qOtguvRVpZ6tGcqfM2y0TOFOYqUPdNyHl3olpHZrI/BBSOTr1z6e9e+PsrQdrSL6Ou7TUo2HSclm3lMSmxnT3UeXebsSb1NPoAfLGpUBXYJ3GIhbM6e5sGKPnDowyKmeQ+NW2hjba4zjyBpuWU0aT46xGwesApS89Ed8BK8Fdk7lSdx3TWzYQkmzlZiKyWYeocdRJdOqJXYsghNFFsmoV3Flk1oR7FlFPrf//6+oLz2j9gTAQYAPVQou9uZWtgAAAAASUVORK5CYII=",search_small:"iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKTWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVN3WJP3Fj7f92UPVkLY8LGXbIEAIiOsCMgQWaIQkgBhhBASQMWFiApWFBURnEhVxILVCkidiOKgKLhnQYqIWotVXDjuH9yntX167+3t+9f7vOec5/zOec8PgBESJpHmomoAOVKFPDrYH49PSMTJvYACFUjgBCAQ5svCZwXFAADwA3l4fnSwP/wBr28AAgBw1S4kEsfh/4O6UCZXACCRAOAiEucLAZBSAMguVMgUAMgYALBTs2QKAJQAAGx5fEIiAKoNAOz0ST4FANipk9wXANiiHKkIAI0BAJkoRyQCQLsAYFWBUiwCwMIAoKxAIi4EwK4BgFm2MkcCgL0FAHaOWJAPQGAAgJlCLMwAIDgCAEMeE80DIEwDoDDSv+CpX3CFuEgBAMDLlc2XS9IzFLiV0Bp38vDg4iHiwmyxQmEXKRBmCeQinJebIxNI5wNMzgwAABr50cH+OD+Q5+bk4eZm52zv9MWi/mvwbyI+IfHf/ryMAgQAEE7P79pf5eXWA3DHAbB1v2upWwDaVgBo3/ldM9sJoFoK0Hr5i3k4/EAenqFQyDwdHAoLC+0lYqG9MOOLPv8z4W/gi372/EAe/tt68ABxmkCZrcCjg/1xYW52rlKO58sEQjFu9+cj/seFf/2OKdHiNLFcLBWK8ViJuFAiTcd5uVKRRCHJleIS6X8y8R+W/QmTdw0ArIZPwE62B7XLbMB+7gECiw5Y0nYAQH7zLYwaC5EAEGc0Mnn3AACTv/mPQCsBAM2XpOMAALzoGFyolBdMxggAAESggSqwQQcMwRSswA6cwR28wBcCYQZEQAwkwDwQQgbkgBwKoRiWQRlUwDrYBLWwAxqgEZrhELTBMTgN5+ASXIHrcBcGYBiewhi8hgkEQcgIE2EhOogRYo7YIs4IF5mOBCJhSDSSgKQg6YgUUSLFyHKkAqlCapFdSCPyLXIUOY1cQPqQ28ggMor8irxHMZSBslED1AJ1QLmoHxqKxqBz0XQ0D12AlqJr0Rq0Hj2AtqKn0UvodXQAfYqOY4DRMQ5mjNlhXIyHRWCJWBomxxZj5Vg1Vo81Yx1YN3YVG8CeYe8IJAKLgBPsCF6EEMJsgpCQR1hMWEOoJewjtBK6CFcJg4Qxwicik6hPtCV6EvnEeGI6sZBYRqwm7iEeIZ4lXicOE1+TSCQOyZLkTgohJZAySQtJa0jbSC2kU6Q+0hBpnEwm65Btyd7kCLKArCCXkbeQD5BPkvvJw+S3FDrFiOJMCaIkUqSUEko1ZT/lBKWfMkKZoKpRzame1AiqiDqfWkltoHZQL1OHqRM0dZolzZsWQ8ukLaPV0JppZ2n3aC/pdLoJ3YMeRZfQl9Jr6Afp5+mD9HcMDYYNg8dIYigZaxl7GacYtxkvmUymBdOXmchUMNcyG5lnmA+Yb1VYKvYqfBWRyhKVOpVWlX6V56pUVXNVP9V5qgtUq1UPq15WfaZGVbNQ46kJ1Bar1akdVbupNq7OUndSj1DPUV+jvl/9gvpjDbKGhUaghkijVGO3xhmNIRbGMmXxWELWclYD6yxrmE1iW7L57Ex2Bfsbdi97TFNDc6pmrGaRZp3mcc0BDsax4PA52ZxKziHODc57LQMtPy2x1mqtZq1+rTfaetq+2mLtcu0W7eva73VwnUCdLJ31Om0693UJuja6UbqFutt1z+o+02PreekJ9cr1Dund0Uf1bfSj9Rfq79bv0R83MDQINpAZbDE4Y/DMkGPoa5hpuNHwhOGoEctoupHEaKPRSaMnuCbuh2fjNXgXPmasbxxirDTeZdxrPGFiaTLbpMSkxeS+Kc2Ua5pmutG003TMzMgs3KzYrMnsjjnVnGueYb7ZvNv8jYWlRZzFSos2i8eW2pZ8ywWWTZb3rJhWPlZ5VvVW16xJ1lzrLOtt1ldsUBtXmwybOpvLtqitm63Edptt3xTiFI8p0in1U27aMez87ArsmuwG7Tn2YfYl9m32zx3MHBId1jt0O3xydHXMdmxwvOuk4TTDqcSpw+lXZxtnoXOd8zUXpkuQyxKXdpcXU22niqdun3rLleUa7rrStdP1o5u7m9yt2W3U3cw9xX2r+00umxvJXcM970H08PdY4nHM452nm6fC85DnL152Xlle+70eT7OcJp7WMG3I28Rb4L3Le2A6Pj1l+s7pAz7GPgKfep+Hvqa+It89viN+1n6Zfgf8nvs7+sv9j/i/4XnyFvFOBWABwQHlAb2BGoGzA2sDHwSZBKUHNQWNBbsGLww+FUIMCQ1ZH3KTb8AX8hv5YzPcZyya0RXKCJ0VWhv6MMwmTB7WEY6GzwjfEH5vpvlM6cy2CIjgR2yIuB9pGZkX+X0UKSoyqi7qUbRTdHF09yzWrORZ+2e9jvGPqYy5O9tqtnJ2Z6xqbFJsY+ybuIC4qriBeIf4RfGXEnQTJAntieTE2MQ9ieNzAudsmjOc5JpUlnRjruXcorkX5unOy553PFk1WZB8OIWYEpeyP+WDIEJQLxhP5aduTR0T8oSbhU9FvqKNolGxt7hKPJLmnVaV9jjdO31D+miGT0Z1xjMJT1IreZEZkrkj801WRNberM/ZcdktOZSclJyjUg1plrQr1zC3KLdPZisrkw3keeZtyhuTh8r35CP5c/PbFWyFTNGjtFKuUA4WTC+oK3hbGFt4uEi9SFrUM99m/ur5IwuCFny9kLBQuLCz2Lh4WfHgIr9FuxYji1MXdy4xXVK6ZHhp8NJ9y2jLspb9UOJYUlXyannc8o5Sg9KlpUMrglc0lamUycturvRauWMVYZVkVe9ql9VbVn8qF5VfrHCsqK74sEa45uJXTl/VfPV5bdra3kq3yu3rSOuk626s91m/r0q9akHV0IbwDa0b8Y3lG19tSt50oXpq9Y7NtM3KzQM1YTXtW8y2rNvyoTaj9nqdf13LVv2tq7e+2Sba1r/dd3vzDoMdFTve75TsvLUreFdrvUV99W7S7oLdjxpiG7q/5n7duEd3T8Wej3ulewf2Re/ranRvbNyvv7+yCW1SNo0eSDpw5ZuAb9qb7Zp3tXBaKg7CQeXBJ9+mfHvjUOihzsPcw83fmX+39QjrSHkr0jq/dawto22gPaG97+iMo50dXh1Hvrf/fu8x42N1xzWPV56gnSg98fnkgpPjp2Snnp1OPz3Umdx590z8mWtdUV29Z0PPnj8XdO5Mt1/3yfPe549d8Lxw9CL3Ytslt0utPa49R35w/eFIr1tv62X3y+1XPK509E3rO9Hv03/6asDVc9f41y5dn3m978bsG7duJt0cuCW69fh29u0XdwruTNxdeo94r/y+2v3qB/oP6n+0/rFlwG3g+GDAYM/DWQ/vDgmHnv6U/9OH4dJHzEfVI0YjjY+dHx8bDRq98mTOk+GnsqcTz8p+Vv9563Or59/94vtLz1j82PAL+YvPv655qfNy76uprzrHI8cfvM55PfGm/K3O233vuO+638e9H5ko/ED+UPPR+mPHp9BP9z7nfP78L/eE8/sl0p8zAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAD9SURBVHjapNNNK0VRFMbx3zmkbqSMjEiZGjAxUQa+gZfUGSl3TJTJ/RpuBiYUckyUkpeJGZIy9wHUxRwz18C+dbr26Yandqvd7r/X2s/aK2k2m/6qbsjzvLWvYBUT+EQXHlDHRxHMsuwbDurFPvpwjBcMYgGTWMLbj8whHuEVc23VbWMHe5gvHqQh1tCDasnzltGPxRg8hvMO/pxgJga/o9EBbmAgBlcw3AEewXMMvsUskhIwDa5fxOBNPOI0AiY4wzUuY60SnK7jBld4whCmQs/vYuUUtYL1cOl4iBvIMI3dsswt3YfVrjVs4TC09SD95SzUwi8cheQ/U/U1AF6iMbJ1fB/jAAAAAElFTkSuQmCC",settings:"iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABH5JREFUeNrUmVtoVUcUhk8OhxCiBAkhEqQPXh5sTItBJChBEUEfRASh5MU8eKNg6FufilJ9iYKPggoBxQsqSsALREWxtvQimmCIJ7eeFFuLkth6I9HGeHK2/8C/Zbk6s29How58ZJ/Zc/ln9po1ayYlnuelPoWULqJuGegFXkSyrDPlQg+CzykiTyZBQeD/NmUWgKNJO8sUIbQRlJAoyYhd+CFm9KOyUTMDc1X5Ygbnmv0aUJdEaDU4AC6DDvAdmClsL0X7i5u0izFttoCL4CpoA7PtNeGeFOXghvf/1A02skw1eMj8VEQ81qni762gx9KPyavQ9W0NbmOFAsiBIT6bNAlOqQ7iCPUHfEa0af4Osi8/bQkTOh08EqP38/eLGfREB0MxhA5xoDKZNveJMv8wf4Rf1iq0FLQJEd+ojj4DZ8Fj8DfYHUOkzy5wHzwB7WxTf01/MHtBxia0VhTqDuhsKW00lZBZYJklP82/WWqYADO00EpwiwXyYHERQqKSDpiIPLX8SHN8I3SdsJuTRXRu7KqJ7bnEZSK00y70rJFCf2fmqD+CmGwA/bS9l2CcC6MXfKWEpiO0VwNeUFOfFDrBzN8SiLwg6tuSeXdO1clEmNkB1h+XQrPCPq/HFOknMwM7QDPZDsaEFzkfYWbLwGzQJRZ2pxRaB56LTk0HR0JEbhEzabzECkuZBn4lf2a3hbR5AvyndNRq92TEHlUO/QFXoa3RPpZ77hApV7HfedZRZi2df0H0fwjMd+1M5VwYf4oKNlOo4MIx6fuQBWLefSt2HFuZX0R/WQ6uVJbR0dMLcJwRzSjzCpZYZjUo53POUSYl6j/m8zSwKKDsE7AZ/AomooR5o5aQTKaJkPc6vRLPk47BpIJODGnLgW0Z2A8qHDGkSefEjM8JEFjKPubx9xjoDohTZ4DDPOZMd8Wjxi6OqcV0D3zpsKs7YpNoCNgelwqP0uNoq4HBilxMHWCVXkzLlVswnbeG7MnNaqNodKz4myxjdqz1Ie5pr3KTxtkvlEL7+eIVuBLD4Z8Vjb7k6t7IQewUgy9w/47SZikHnpeRnGsLjRo8pLjjBG2hZlZOJ9iaO4O20DHbeSUCm9jGCNswDNMm10QI97R5VYrt97YUWi9m4EyRcWa9b1cRyViESpOq0zvTNXGAW1FEJ0nxTa1R2GeHbQudJQr0BzTYpE4AcYWac9LKAKG9YnGW2YRWiKDEzOrXqiETxfzAcM6cVPckmLVW+stn4BKYq963CF/a6jrc6YuFByK/TRyjPTGYXMzjckG18S84IMoMM39YL2pXnOn7vl7HBUR3kRcQ7eoCIsew0c9r0SblOqD9ZPGHd8SVThVdUZIrnWpxpdNl6ednuqfQKx3fj7XxgDbIXaZGlRlMIHRALZwqXnSYo/pf4KC4m3qLkpA7/HrwFNy1vBvilWSci9w/GEmlVQw7k/QkvXG+/Y7vYz1HMD5C3suNc0mCOoUPcTWeE53nGcXbyIt/OCT+QmE2GpTMmekG+CJieRPZLwHjUy10StNrAQYAoex+pPvmemEAAAAASUVORK5CYII=",sharethis:"iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQ9JREFUeNrsmUsKwjAQQE0oigtBb+lK7+HKrtzqadx4FKXapYrTiRSJQjQkM0mLM/Ag9JN5tPlMqQKAQR9CM/QJLZ0WBUe7U6LgeSyrKASeSypqiyhHG3KLuiTJZTWjJKmsZpYkk9UJJElkY169SnTPM4qUyWLu59hCe7PXi6gdI6REKqsKcrEPyHfw6LdGNq2LczKtkIVn0keA6N3jmgkyR67I8jUDPwpn8ySnkTMbCFYH08cZmblEqZKQ91EwjPtT4LCQ5UlEqfb6X3HjGKMcokcOUY7lifJjUclkElERFVERFVER/U/RukNul2+iW6t6yYmJ3Xs9hWWexRApkQryhcm9Rsa2m+rLD7FGgAEAqz4LAiDmJz0AAAAASUVORK5CYII=",shoppingCart:"iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAmpJREFUeNrsmDlIxFAQhs26iu564VWIICJYWAhioWhlYSGKiI1HY2NjoaCVNgraWNnZioUIamMhguDRKHiAeBUWgssq2IgH3sca/+AfWJbo5sW8mAUHPmb3JS9vMi8zmYmiqmpcLIiXeg+k8HcI7IJucOkWQxV69BEk6GMgHryASt7En4uH2kdDE+jlVpAIFt3mUSNZB9UgD1y4xaNGskzd7HaPloJ9EACFbjZUE7fkLsUT5QTXpKdohh5R5zNtOc2cWUM3qJv+yJEN4MmMoXGxsvXuES3qf6BC/ZIP8GYDDyANJIF7jk1+s3Yb157V/nuj3McOU9Q7CNrglyvWFR/gEORwDSPppx4wk0f1FOUHyQ5udAZv6gwUmH1GT0ASSHPQ0GGmp3GRYNqmbnTQ0HY+bmMihuqlXq1DRlaBLFZv72ajXsPLqD8yca4drDHaq8LHFZM90y29n+pAa/TE9bKtJPwAe6pEyYb20dgp0YSvM8HtqJe87QE+ZhmRx8x6dIm6TqI3C5kzD8CNVY+m0KM7Er05wzVajI4rAh8gtFffM8iU5NEHav9vq6cgX20+CUa28boLVquncHq5NVvAZ+OWF4NbBlHBd+cpgt+eVkENK6qQzZ+VBsGI1S7USDpBF0i3oxwG5yzlNn/TLv+3Iv+GRsgouAavrMKbpc+1kE7mmaa05uyUDZomnTLnihpZxgvvAg/HMrnwo8S5wlvfQT3ETlLvLBfZ/JVImits6B11TsR4eliBLWOu8NbnghC4AkUca+LYhcS5loKph+9llYto8gxKZc61WkiUgxVwDKYZFFLnxswr9FOAAQASu6+4+hccSwAAAABJRU5ErkJggg==",soundOff:"iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA5lJREFUeNrUmc9P1EAUx7sFi+uPvaAxxA2gBzVwMv7AeHOv6EEPIBwNJPwDHvWgh/VqomERojEhRvCEoDEmyl0h8QSC0WQB40G4rALuxmX91rzZvIz9NdMWl0k+abftvPn27bTz3muiUqkYO6HVh+hrgjPgAjgNjoHDYC+dXwdfwSKYAdPgPdjSGs32qCJpkAVLFfW2RH3TquMmFP76RnAL9AGLHS+Cd2Ae5MEPOr4ftIA28nwD61MCI+AmWIvSo13gO/NMCYyBTpAM0D9J145TX9Fsm91BNPhdUA8GmeEyGAatGlNG0EI2yszuII2lJXQPmGTGFkFHCIEy58imaJM0ppJQ++4mmJHnIBWhSEGKbIs24eZZNwM51vkRqItBpKCOxhAtF1Rot3SHcYrkYvk/2OMntJE93Z80/+4XoFdzGog5uwYOegkVT/hvcFZ1sGKxaFD/Ajik+YCVnaYAv6iZveMeeInhyMekV9kHMABMp34ujLB3dbOT0Cy7oNVPpFDjIMCprYO+gGJbmMOyslATLNPJsYCerDiJZYfnHQQPBBT7lK5fJm1VoR3M2EWFOcWbfMzeb6JVSHgoH9BuJ7Pzd5ExacnPsADjjULwleBhg8P5b6AftNPvQkC7b0mLQWFkVegp2trx4qZipOgn1qAY1D53PaDNTdJiUKxbFXqctnOaQXTC5/xdMAxeKdic49pEhN9E2zy/slQqGZZlqYh182gX2FC8+TzXZrIgV2UOqU6DDQ1bBa7NjCEPCzJntRI0g6UPqRoSm+LaTPYaMSjHqTaF+Wk4CAsrtplrE0IXaNsWkUejENvOtQmhs7S1s8VkDczZJGkxqCZQFTpN2wa2Svk1e5G4B6bAOLgUodgMS6+nebrsG5SweNNevz+7RElf3KIqp4jLY63/Jygx2RI3SvuX5YdKaq/BUZdzR7zchAUkYePjTXvsK7Q/Wi0BSaWaIt3JkMfdLgco3Zx38pqPFwXDwvG89CNfdD9AKtIPtjxEPguZ65dZUcIzuVtlBQe35O4EeAxmwEdKOZ6AkyFz/AUae5W0eKbLV2sgXe7dCQWIIZVKifUfSzqWTpHs5TYWyaZ0imSCXdI0iKvsmKOxtOuj/AGLq5DbE3Vp/AC4Da5JpfFflIjNUfpQYPEkL43vlkrjD8ENsBrnx4Y7YEXjY8MK9Y31Y4Pb55sMRVL255s02Efnf4IV+nwzS7m69uebMEK3tf0RYAA0hCDlfhHbHgAAAABJRU5ErkJggg==",soundOn:"iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4dJREFUeNrUmc9PE0EUx8uCxaL2gsYQmxY9qIGT8UeNN3tFD3oAIZwMJPwDHvWgh3o10VAs0ZgQI5hoEDTGRHtXSDwhYDRCMR6ESxWwjaV+x7zZPDfddnZ2F9tJPtnpdn58d3Zm5703DaVSKVAPqclFXQOcBGfBCXAYHAC76P918BUsghmQAe/AllZvYkQdEgFJsFxynpapbsRpvw0OXn0ruA4GQJDdz4O34ANYAj/o/h4QAx008s2sTgGMgmtgzcsR7Qbf2cgUwDjoAiGF+iEqO0F1ZRJt9qhoqFagCQyzhosgDdo1powkRm0UWbvD1JeW0BYwxRpbBHEXAq2cpjZlmqI+HQkVTzfJGnkGwh6KlISpbZkm7UbWroEUq3wfNPogUtJIfciUUhXaY3lCP0VysfwN9lYT2spW90cXr/s56NOYBnLOroF9lYTKFf4bnHIqMJ/P/4XayIH9GgusWG4K8EJR9o27W00ME1XuHv+cvQdDwLDWs2GUfauj5YQmWYF2FZF22Gyf62BAQWyMDVhS3jeYgdFP+afgi3UHKxQKOqbEPMu3gHQwGByq0qbYhp9Qvp+0mSMaZ09+zoNVLJPIt9FOJEdpSaF+F2sjzkc0wQyM1x6bkt/AIOik3zmFOm9IS4DMSFPocboKe3HTJ9tX2KHCVLuiUHaTtATI1jWFHqHrnI9G+i0xR8FLxfJzXJu08NvYRP5nAWHyeyW0G2w4KL/EtRnMyFWdP7ppw2H5HNdmBOokSaHSfQjXkLYw12awT0iAfBwzeTg/dVKUa5NCF+jaUUMj2sm1SaGzdBXeYqgGRIZIS4BiAqbQDF2b2S6lksRGcRtMgwlw3iOhCeZeZ/heb4As7a3jCvam2L8/2VhJn2VGwcqy4xE1kSVt5oiK7W2M8hesi6pMegUO2fx30OVoir4vUn7MDAFZQjV5epKRKtZNViF8c8Y6alVGUZKWL4SHfqyF7ii6IoNgq4LIxy58/SILSlR07lZZwKGSc3cUPAAzYJ5cjofgmAsff4H6XiUtFd3lSzXgLvfVQwBixEmkJPgfQzpBnSDZi20Mkk3rBMkkOyzTwK+wY4r60o6P8gXmVyC31+vQ+F5wA1y2hMZ/kSM2R+5DjtmTPDS+0xIavweuglU/DxtughWNw4YVquvrYYPd8U2CrChxfBMBu+n/n2CFjm9myVfXPr5xI3Rb0x8BBgABQIdcKJJjwwAAAABJRU5ErkJggg==",stopAutoPlay:"iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAs9JREFUeNrUmTlvE1EURidOcDCLm0CBsOxUQQolaxu3VFAQggQF4m9AAYX5A8gOiaAgBaFLguiIe5bWKKZyYkSB0xii4CjGfIO+O7oaxctsnucnHb2R5y3H4xm/++6MdTodaxTKRIC+CXAFzIHLYAacByd5fg98B1XwGZTBJ/DX12z2FfVIBhTAdsd72WbfjNd5xzz89FPgCXgIkurzFvgIvoIa+MXPT4McmOWVn1R9DsAyeAx2w7yit8FPdWUOwCq4AVID9E+x7Vv2lWKPOT+IQ78GE6CoBm6DJTDt45YRchyjrcYtci5foifAhhqsCq4FEHRznWNK2eCcnkTtb7emBlkH6RAlhTTHlrLW7cp2G6CkOr8C4xFICuOcQ0ppUNF51zeMUlLL6l9woZ/olHq6v0X0c/e6DeSe3QVne4nKE34Irg5RUj9g7aNuAd0oq/7jXsQgKSyr/+rsUaIF1WA6RtGcumAFt2gC7PDkqodBdQnSxs0btt+h2/8IyOJanOHxawOiOnHI0M0RzasA44MBopt0sRhGOqKXWNvx4r4Bovt0sRjrOqIXWFcMCuor2k1Ez7GuGSRa024JFeTapWmQaFO7JawRKSIq24e0QW5p7SaiP1jnDBLNajcR3WI9a5DoRe0mol/UCpUyQDIlKxJzAo5omfWkWqXiLHm1vS5rUXtfXufxfQ8DHobUxl3usa7LCiWidpplhcc3PTxUeyG10cWe+xaPV5wUkCtV02J4tRhjPLpEh5ZO/bgbPTdoK1Lst7lrqITDsDd3W5y7QZee2+U7BmyX745CAmLRS6YkGWNKJ+knSfZ+iEmyd36SZMIx120QVdqxxLl850f1AxZVInch7NT4GfAUPHClxv9wmatw+9BU8aROjR93pcZfgkegEeXLhmeg7uNlQ519I33Z0O31TZ7b7RkmDE7x/G8GFVWGkZtBXt8EER1q+SfAANZDyvmJidDfAAAAAElFTkSuQmCC",tableOfContent:"iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHZJREFUeNrs1tEJgDAMhOHG7erariJxjDOFqN3AFP7AUfGlH4HCmaS2wmx59ohneknp2GjE9Y3nvyeH/p1x/7vReazYLm3e6B65Imd+t2qx1R4TUKBAgQIFChQoDZ+GT8On4QMFChQoUKBAgdLwafg0/FpzCzAAA4h4QtsRPfAAAAAASUVORK5CYII=",thumbnails:"iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAPpJREFUeNrsl0EKwjAQRZMutBtFT1NdtZdTXAqeQC+irtTr6KLNqk5gBgZxk3ZcBH/g0xCS159pafN9CMHl0ArVr0hnUkvqE9TyuuoLf2XF9FzROHAlTUdsOoJq0kOZvFgxpaJbBh5J87iBBMX5J16/UzfZWDKlorHUJU94Ddj5jPTkCpQ8ZsoUo728CiMe0yfDlFm4TBqMwiiMwiiM/pnRTv1fh7SFOu24XzDF6J2vB9IyERjn77l/U+OmTDmUWJ0dG2VwzcyJBVNXtGFwlwjreJ02KZWorZg+x8yEcIdwh3CHcIfPE4zCKIzCKIwi3CHcIdxlGu7eAgwAQOS/O2awd4MAAAAASUVORK5CYII=",ZoomIn:"iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAp1JREFUeNrUmE1rFEEQhmeWYFx14yG5qOAtqODHTaPi1Qke4l7yKxLRv6LEQ/IPREHJQSGQQCJi1JMfoG7iQUG9mIMRY27j2/g2lK0zUz0z28wWPNSyM931bs1ub1XFaZpGg2BDJdedBVfoj4FRcBB8B1vgPXgOHtJXN5NRJW0wA3qpn22AWa6PyhIrH/1VcAscFe/tgHXwEnxlNk1WD4EzYALsE/d/AtfBg35kdBjMOxlaA9O8VrR2mvdLm1es/Ye8iyNgRQT4ACZLPrpJrre2wv0rC90DlsXG93w3zvjgd8Wey4xTSah83HOgVVGkxexz2/kalBbaFRvdAXFNIi0x97XWLSPUHCEfucEm6NQs0tLh/injtX2FzohPmngEtuYjNhHrZn2F9sQRFPVZaCSOrl7RvS1xpJ4D43w9F+gv3MYZZ/xMk0Iv0/8Ci4GELjKejF8odIL+CdgNJHSX8Yyd1wo9Qf8mcAX3mv64Vugo/efAQm28MW09OkL/M6t+0dQ4OdfijPd36DvajG7T7w+cUVsK/tAK3aI/kpORLHzucc3G+6YV+pb+ZOCMnqJ/pxW6Tn8R7A0kchhc4OunWqFL9G0wFUjolPiOLvm0IgPxX2/sJv0lkPQ5mwnjRGwcvZo7WY9ueNSjvhntcP/S9ejAVPiWBadnimsUKXumhTq60DUns1XbkgNOJh/79Pe+fX1SUmQieqRa+/q8Scmq56RktY5JiXb21OXR5c6ezL/JK/CFRY2pwA6D0yyE3dnTDXDfqbTifkzzrjmPUGObXNfOONLSOjNaNB8dYza3WQWZ+egL8Ag8y6lTU0W9+udiAybOKrGtBky9Y02H0AShKrFNEVootklCc8U2TWim2CYK/e+vfyhqrv0l9rcAAwCTdDLCa9nAcAAAAABJRU5ErkJggg==",ZoomOut:"iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAo9JREFUeNrUmM9qFEEQxmeWYFx14yG5GMFbUME/N00MXp3gIe4lT5GIvooSD8kbiIKSg0IggUSCUU9GQd1dDwrqxRyMGHMbv4avoWydne7pmWa24Ectu9td39bM9lRVnKZpNAg2VHDdJXCd/jQYBcfBD7ALPoCX4Am9v6mMWtIE86CTulkXLHB9VJTY8tLfAHfBKfHePtgGr8E3ZlNl9QS4CCbBEfH9z+AWeFxFRofBkpGhTTDHz/LWzvH70pYs1v5Dvw9HwLoI8BHMFLx0M1yvbZ37ews9BNbExg9dN8744Q/EnmuM4yVUXu5F0PAUqVH73DNug8JC22Kj+yAuSaQm5r7a2kWEqiPkEzfogVbJIjUt7p8yXtNV6Lz4pUlFIjWJiLXgKrQjjqAoAPro6uR9tyGO1Mtggq8XAz3CdZwJxs80KfQa/W+wEkjoCuPJ+LlCJ+m3wEEgoQeMp2zKVuhZ+reBK7g39GdshY7SfwksVMcbs61HR+h/ZdUvnoLijPf36Vu2Gd2jPxo4o7oU/Gmb0V1m9aRjRnxNx/tum9F39OcCZ/Q8/Xtbodv00+BwIJHD4ApfP7cVukrfBLOBhM6Ke3TVpRUZiGe9sjv0V0FScTYTxonYODo1d7Ie7VZcj3Z96tGBqfA1y0bPFJcoUvZMy2V0oZtGZn1vg2NGJp+59PeufX3i0Xb0qujr+01KNhwnJRtlTEpsZ09tHl3m7Ek9TXbAVxY1qlYYBxdYCJuzp9vgkVGN2dUQjtO8m8YltLEe15lHkLTSMpo3Hx1jNvdYBan56CvwFLzoU8umttVZXIOJs5XYRg2m3rFNF1EHoVZi6yI0V2ydhPYVWzehmWLrKPS///6hqL72l9g/AgwAtSgpznBDIS4AAAAASUVORK5CYII=",First:"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAALZJREFUeNrM1z0KgDAMhuFWPJAH8PpugieS2sHBoYQmeWMb6CjfQ38SzKWUNLKWNLgkwFXXCWSUdzVrFT7coPBhR/ANz38DusKjAN3hEQBVOA1Qh5MAUzgFMIcTAFe4F+AO9wCQcCsAC7cA0PDpx3GrsmbSRe0AirAeAYbw3AEE4b2EbgTxClwI6hmaEWQfMCHoRqRGRHRCFSKqFXcjImdBF0L6MzrqugGEuAMSYA/YifnG8SPAAOlhIwr0LibAAAAAAElFTkSuQmCC",Last:"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAALdJREFUeNrM10EKgDAMBECr/sgH+HfPgk+KFTwJlWR3Yw30JLhjaRMsZjb0rHHoXG8Auxdbe11H6+HseMGFKARgQXegPBBdzkA6wnMIUxHeW5CGiFzDFES0D8gRSCOSItBOKEMwrViCYGcBjVAMIwqhmoYw4tfjOFLW2I1PAHC4AkCFswA6nAFIwlGALBwBSMOjAHl4BJAS7gWkhXsAqeGeP6PUcO+fERu+1TUhANVXr78ex6cAAwCJ4yEVVUgyHQAAAABJRU5ErkJggg==",prev:"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJtJREFUeNrU1bsOgDAMQ9EW8f+/HBYGRmzfEFGps4/6iHdVrcl1rOHVBah7jwBq8gSe4ftrgBxOAqxwCmCHE4AoPAXE4QkACXcBWLgDQMNVAB6uAFrC3wLawn9Tx9ttOvIE2hDKFbQg1DeAI5xHiCLcX4Ahkm+IINI5ECOIQRQhqEloI8hRbCHoLpARHWUkNebZVHJ76grkdQkwAHdJHj5RrO9NAAAAAElFTkSuQmCC",next:"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ1JREFUeNrU10EOgCAMRFEg3v/KdeOWhM78Wm3iel5qaGFGxOisNZrrBBDP196B6ALMSsRpB8oQmV9QgsieAhyhHEMUoc4BDOEMIgThTkIbQYxiC0HtAhlBLiMJQW/DNOIX6zhTsenGK4B0OAmQwimAHE4ArHAXYIc7ACRcBWDhCgANd67lkxoeqzM88zIqCXeu5VhdXcGfWce3AAMAByQePhmMi8EAAAAASUVORK5CYII="};Class("PhoneButtonQueue",{create:function(c){this.container=c.container;this.extended=c.extended;this.topBar=c.topBar;this.bottomBar=c.bottomBar;this.buttonWidth=c.buttonWidth;this.barWidth=c.barWidth;this.buttonTop=c.buttonTop;this.buttons=c.buttons.clone();this.buttons.each(function(d){d.freedom();d.hint=!1});this.initTopBar();this.initBottomBarArray()},initBottomBarArray:function(){this.bottomBarArray=[];var f=this.buttons.length;if(6<f){for(var h=0;5>h;h++){var g=this.buttons.get(0);this.bottomBarArray.push(g);this.buttons.remove(g)}this.bottomBarArray.push(this.pickButtonsByName("more"))}else{for(h=0;h<f;h++){g=this.buttons.get(0),this.bottomBarArray.push(g),this.buttons.remove(g)}}for(h=0;h<this.bottomBarArray.length;h++){this.bottomBarArray[h]&&this.bottomBarArray[h].addTo(this.bottomBar)}},initTopBar:function(){if(this.btnInstructions=this.pickButtonsByName("instructions")){this.btnInstructions.setPosition(this.barWidth-this.buttonWidth-10,this.buttonTop),this.btnInstructions.addTo(this.topBar)}},pickButtonsByName:function(c){c=this.buttons.find(c).get(0);this.buttons.remove(c);return c},autoCenter:function(k,p,o,n){if(k&&!(0>=k.length)){var m=k.length;p=Math.max((p-o*m)/(m-1),0);void 0==n&&(n=0);for(var l=0;l<m;l++){k[l].$button.css("left",p*l+o*l+n)}}},sort:function(){this.barWidth=Math.min(windowWidth,340);this.buttonWidth=40;this.barLeft=(windowWidth-this.barWidth)/2+7;this.autoCenter(this.bottomBarArray,this.barWidth-15,this.buttonWidth,this.barLeft);for(var c=0;c<this.buttons.length;c++){this.buttons.get(c).addTo(this.extended)}}});Class("PhoneToolbar",{initBar:function(){this.topBar=$("<div class='phoneTopBar'></div>");this.bottomBar=$("<div class='phoneBottomBar'></div>");this.parent.append(this.topBar);this.parent.append(this.bottomBar);bookConfig.appLogoIcon&&(this.logo=new PhoneLogo,this.logo.setPosition(10,0),this.logo.addTo(this.topBar));this.initStyle();this.enterToShow()},initButtons:function(){this.buttons=new ObjectPool;global.pageEditor&&global.pageEditor.setting&&parseBool(global.pageEditor.setting.shoppingCartHTML)&&this.buttons.add(new PhoneShoppingCartButton);bookConfig.ThumbnailsButtonVisible&&this.buttons.add(new PhoneThumbnailButton);bookConfig.BookMarkButtonVisible&&this.buttons.add(new PhoneBookmarkButton);this.buttons.add(new PhoneGotoPageButton);bookConfig.ZoomButtonVisible&&this.buttons.add(new PhoneZoomButton);(bookConfig.BackgroundSoundButtonVisible||bookConfig.FlipSound)&&this.buttons.add(new PhoneBackgroundSoundButton);bookConfig.TableOfContentButtonVisible&&this.buttons.add(new PhoneTableOfContentButton);bookConfig.SearchButtonVisible&&this.buttons.add(new PhoneSearchButton);bookConfig.PrintButtonVisible&&this.buttons.add(new PhonePrintButton);bookConfig.AnnotationButtonVisible&&!isPhone()&&this.buttons.add(new PhoneAnnotationButton);bookConfig.ShareButtonVisible&&this.buttons.add(new PhoneShareButton);bookConfig.DownloadButtonVisible&&this.buttons.add(new PhoneDownloadButton);1<language.length&&this.buttons.add(new PhoneLanguageButton);bookConfig.HomeButtonVisible&&this.buttons.add(new PhoneHomeButton);bookConfig.AutoPlayButtonVisible&&this.buttons.add(new PhoneAutoPlayButton);bookConfig.EmailButtonVisible&&this.buttons.add(new PhoneEmailButton);1>=this.buttons.length&&bookConfig.enablePageBack&&(this.buttons.remove(this.buttons.find("gotopage").get(0)),this.buttons.add(new PhoneBackwardButton),this.buttons.add(new PhoneFirstPageButton),this.buttons.add(new PhonePreviousPageButton),this.buttons.add(new PhoneNextPageButton),this.buttons.add(new PhoneLastPageButton),this.buttons.add(new PhoneForwardButton));3>=this.buttons.length&&!bookConfig.enablePageBack&&(this.buttons.remove(this.buttons.find("gotopage").get(0)),this.buttons.add(new PhoneFirstPageButton),this.buttons.add(new PhonePreviousPageButton),this.buttons.add(new PhoneNextPageButton),this.buttons.add(new PhoneLastPageButton));6<this.buttons.length&&this.buttons.add(new PhoneMoreButton);bookConfig.InstructionsButtonVisible&&this.buttons.add(new PhoneInstructionsButton);this.buttons.each(function(c){c.setCallback(this.afterButtonClick.bind(this));this.setButtonTitle(c)}.bind(this))},setButtonTitle:function(c){c.setTitle(c.caption)},resetButtonPosition:function(){(new PhoneButtonQueue({buttons:this.buttons,barWidth:windowWidth,buttonWidth:40,buttonTop:0,topBar:this.topBar,bottomBar:this.bottomBar,extended:this.extendedBar.$bar})).sort();this.extendedBar.resize(this.buttonsInExtendedBar());this.extendedBar.hide();this.buttons.each(function(c){c.changeColor();c.changeCaptionColor()}.bind(this))},initStyle:function(){bookConfig.appLogoIcon||bookConfig.InstructionsButtonVisible||this.topBar.remove();this.topBar.css({background:this.color});this.bottomBar.css({"background-color":this.color})},initExtendedbar:function(){this.extendedBar=new PhoneExtendedBar(this.parent);global.moreBar=this.extendedBar},onResize:function(d,f){this.resetButtonPosition()},getHeight:function(){return 0},getTopHeight:function(){return 0},getLogoHeight:function(){return 0},getBottomHeight:function(){return 0},getWidth:function(){return 0},initEvents:function(){this.topBar&&this.topBar.bind(_event._enter,function(){this.enterOption&&window.clearTimeout(this.enterOption)}.bind(this));this.bottomBar&&this.bottomBar.bind(_event._enter,function(){this.enterOption&&window.clearTimeout(this.enterOption)}.bind(this))},show:function(){this.visible||(this.visible=!0,this.bottomBar.animate({bottom:0},300),this.topBar.animate({top:0},300),bookType==BookType.singlePhone_book&&singlePhoneBook&&singlePhoneBook.setShow(!1),bookType==BookType.phone_book&&phoneBook&&phoneBook.setShow(!1))},hide:function(){this.visible&&(this.enterOption&&window.clearTimeout(this.enterOption),this.visible=!1,this.bottomBar.animate({bottom:-60},300),this.topBar.animate({top:-60},300),global.phoneGotoPagePanel&&global.phoneGotoPagePanel.hide(),this.extendedBar&&this.extendedBar.hide(),bookType==BookType.singlePhone_book&&singlePhoneBook&&singlePhoneBook.setShow(!0),bookType==BookType.phone_book&&phoneBook&&phoneBook.setShow(!0))},showOrHide:function(){!0===this.visible?this.hide():this.show()},enterToShow:function(){this.show();this.enterOption=window.setTimeout(this.hide.bind(this),3000)}}).extend("Toolbar");Class("PhoneExtendedBar",{create:function(c){this._super(c);this.$bar.addClass("phone");this.$bar.css({overflow:"visible"});this.arrow=$("<div class='arrow'></div>");this.arrow.css({"border-color":this.color.toString()+" transparent transparent transparent"});this.$bar.append(this.arrow);this.$bar.addBorderShadow(this.color.toString(),0,2)},show:function(g){if(!0!=this.isMoving&&!0!=this.visible){this.visible=this.isMoving=!0;g=g.left+g.width/2-8;var l=g-this.width/2,l=Math.min(windowWidth-this.width-5,l);this.arrow.css("left",g-this.width/2-l+this.width/2+"px");this.$bar.css({left:l+"px",bottom:"47px"});var k=0;this.$bar.css({display:"block",opacity:0});var h=function(){k+=0.1;this.$bar.css({opacity:k});equals(k,1)&&(h.stop(),this.isMoving=!1)}.interval(this,40)}},resize:function(d){for(var f=0;f<d.length;f++){d.get(f).setPosition(5,5+40*f)}this.width=160;this.height=40*d.length+10;this.$bar.css({width:this.width+"px",height:this.height+"px"})}}).extend("ExtendedBar");var AnalysisThumbnail=Class({create:function(d,f){this.callback=f;this.fillImage(d)},loaded:function(c){this.callback(c)},fillImage:function(d){this.pageIndex=d;var f=function(c){this.loaded(c);this.fill=!0}.bind(this);fillImageAfterLoaded(d,"thumb",f)}});var ThumbnailCell=Class({create:function(d,f){this.parent=d;this.margin=f.margin;this.index=f.index;this.imageWidth=f.imageWidth;this.imageHeight=f.imageHeight;this.item=$("<div class='item'></div>");this.initHtml();this.initEvent();this.onResize()},onResize:function(){this.length=this.imageWidth;this.image.css({width:this.imageWidth+"px",height:this.imageHeight+"px"})},initHtml:function(){this.initStructure();this.item.append(this.image);this.item.append(this.title);this.parent.append(this.item)},initStructure:function(){this.image=$("<img/>");this.title=$("<p class='title'>"+getShownPageNumber(this.index)+"</p>");this.loading()},loading:function(){this.image.css({"background-color":"#ffffff","background-image":"url("+uiBaseURL+"loading.gif)","background-repeat":"no-repeat","background-position":"center"})},unLoading:function(){this.image.css({"background-image":""})},setStyle:function(c){this.item.css(c)},addClass:function(c){this.item.addClass(c)},removeClass:function(c){this.item.removeClass(c)},initEvent:function(){this.item.onTap(function(){gotoPageFun(this.index)}.bind(this))},fillContent:function(){var c=function(d){this.image.attr("src",d);this.image.css({width:this.imageWidth+"px",height:this.imageHeight+"px"});this.unLoading()}.bind(this);this.analysis=new AnalysisThumbnail(this.index,c)},getDom:function(){return this.item},fission:function(){this.title.show();this.item.addClass("focus")},merge:function(){this.title.hide();this.item.removeClass("focus")},setHighLight:function(c){this.index==c&&this.item.addClass("highlight")},clearHighLight:function(){this.item.removeClass("highlight")}});var ThumbnailItem=Class({create:function(d,f){this.parent=d;this.margin=f.margin;this.index=f.index;this.parm=f;this.cells=[];this.initHtml();this.onResize()},onResize:function(){for(var c=this.length=0;c<this.cells.length;c++){this.length+=this.cells[c].length}this.item.css({width:this.length+"px"})},initHtml:function(){this.item=$("<div class='item_focus focus'></div>");this.initStructure();this.addItem();this.item.append(this.title);this.parent.append(this.item)},initStructure:function(){this.initCells();for(var d=getShownPageNumber(this.cells[0].index),f=1;f<this.cells.length;f++){d=d+"-"+getShownPageNumber(this.cells[f].index)}this.title=$("<p class='title'>"+d+"</p>")},addItem:function(){for(var d=this.cells.length,f=0;f<d;f++){this.item.append(this.cells[f].getDom())}},fillContent:function(){for(var d=this.cells.length,f=0;f<d;f++){this.cells[f].fillContent(0)}},initCells:function(){if(1==this.index||this.index==totalPageCount){var d=new ThumbnailCell(this.item,this.parm);this.cells.push(d)}else{var d=new ThumbnailCell(this.item,this.parm),f=new ThumbnailCell(this.item,{index:this.parm.index+1,imageWidth:this.parm.imageWidth,imageHeight:this.parm.imageHeight,margin:this.parm.margin});rightToLeft?(this.cells.push(f),this.cells.push(d)):(this.cells.push(d),this.cells.push(f))}},setPosition:function(d,f){this.item.css(f,d+"px")},fission:function(){this.item.removeClass("focus");1==this.cells.length?(rightToLeft?(1==this.cells[0].index&&this.cells[0].setStyle({right:"3px",left:"auto"}),this.cells[0].index==totalPageCount&&this.cells[0].setStyle({left:"3px",right:"auto"})):(1==this.cells[0].index&&this.cells[0].setStyle({right:"-3px",left:"auto"}),this.cells[0].index==totalPageCount&&this.cells[0].setStyle({left:"-3px",right:"auto"})),this.cells[0].fission(),this.title.hide()):(this.item.removeClass("focus"),this.title.hide(),this.cells[0].fission(),this.cells[1].fission(),this.cells[0].setStyle({left:"-3px",right:"auto"}),this.cells[1].setStyle({right:"-3px",left:"auto"}),this.cells[0].removeClass("left"),this.cells[1].removeClass("right"))},merge:function(){1==this.cells.length?(this.title.show(),this.cells[0]&&this.cells[0].setStyle({left:"0",right:"0"})):(this.item.addClass("focus"),this.title.show(),this.cells[0].merge(),this.cells[1].merge(),this.cells[0].setStyle({left:"0",right:"auto"}),this.cells[1].setStyle({right:"0",left:"auto"}),this.cells[0].addClass("left"),this.cells[1].addClass("right"))},setHighLight:function(d){for(var f=0;f<this.cells.length;f++){this.cells[f].setHighLight(d)}this.item.addClass("highlight")},clearHighLight:function(){this.item.removeClass("highlight");for(var c=0;c<this.cells.length;c++){this.cells[c].clearHighLight()}}});var ThumbnailFrame=Class({create:function(c){this._super(c);this.direction=rightToLeft?Direction.right:Direction.left;this.leftButtonUrl=uiBaseURL+"prev_page.png";this.rightButtonUrl=uiBaseURL+"next_page.png";this.itemArray=[];this.taskList=new TaskList;this.initDefaultDom();this.initHtml();this.initEvent();this.refresh();this.initCss();this.hide()},initHtml:virtual_function,initCss:function(){rightToLeft&&this.stage.addClass("rightToLeft");this.stage.css({"background-color":this.mainColor,color:this.fontColor});this.close.css({"background-color":this.mainColor})},initDefaultDom:function(){this.closeUrl=form_icons.close?"data:image/png;base64,"+form_icons.close:uiBaseURL+"close.png";this.close=$("<div class='close'><img src='"+this.closeUrl+"'/></div>");this.close.click(this.hide.bind(this));this.initSwiper()},initSwiper:function(){this.thumbnailSwiper=$("<div class='thumbnailSwiper stage'></div>");this.thumbnailSwiperList=$("<div class='swiper'></div>");this.progress=$("<div class='progress'></div>");this.progressBar=$("<div class='progressBar'></div>");this.refreshSwiper(this.thumbnailSwiperList);this.thumbnailSwiper.append(this.thumbnailSwiperList);this.thumbnailSwiper.append(this.progress);this.progress.append(this.progressBar)},initEvent:function(){this.stage.bind("mousedown touchstart",function(c){c.stopPropagation()});if(this.leftBtn){this.leftBtn.onTap(function(){this.stage.move(-170)}.bind(this))}if(this.rightBtn){this.rightBtn.onTap(function(){this.stage.move(170)}.bind(this))}rightToLeft?this.thumbnailSwiper.scroll({},Direction.right,"win10"):this.thumbnailSwiper.scroll({},Direction.left,"win10")},onResize:function(){if(this.thumbnailSwiperList.width()<windowWidth-40){var c=this.thumbnailSwiperList.width();this.thumbnailSwiper.css({width:c+"px",margin:"20px "+(windowWidth-c)/2+"px"});this.height=220}else{this.thumbnailSwiper.css({width:"auto",margin:"20px"}),this.height=254}this.refresh();this.stage.css({top:(windowHeight-this.height)/2+"px",height:this.height+"px"});this.taskList.setLargeLength(5)},refresh:function(){this.thumbnailSwiper.refreshData()},refreshSwiper:function(g){this.length=0;for(var l=parseInt(totalPageCount/2),k=0;k<=l;k++){var h=2*k;0==h&&(h=1);h>bookConfig.totalPageCount||this.addItem(g,h)}g.css("width",this.length+"px")},mergeAll:function(){for(var c=0;c<this.itemArray.length;c++){this.itemArray[c].merge()}},fissionAll:function(){for(var c=0;c<this.itemArray.length;c++){this.itemArray[c].fission()}},addItem:function(f,h){var g={index:h,margin:12,imageHeight:170};g.imageWidth=parseInt(bookConfig.largePageWidth*g.imageHeight/bookConfig.largePageHeight);g.length=g.imageWidth;g=new ThumbnailItem(f,g);g.setPosition(this.length,this.direction);this.length+=g.length;this.length+=g.margin;this.itemArray.push(g)},clearHighLight:function(){$(".highlight").removeClass("highlight")},setHighLight:function(d){$(".highlight").removeClass("highlight");var f=parseInt(d/2);this.itemArray[f].setHighLight(d)},getShowStatu:function(){return this.visible},getHeight:function(){return this.getTopHeight()+this.getBottomHeight()},getTopHeight:function(){return 0},getBottomHeight:function(){return 0},showOrHide:function(){this.visible?this.hide():this.show()},fillImage:function(c){this.itemArray&&this.itemArray[c]&&!this.itemArray[c].fill&&(this.LoadCount++,this.itemArray[c].fillContent(),this.itemArray[c].fill=!0)},fillContent:function(){if(this.interval&&!this.interval.isRunning()){this.interval.start()}else{var f=0,h=0,g=0,h=0;this.interval=function(){this.LoadCount=0;if(this.direction==Direction.right||this.direction==Direction.left){f=this.thumbnailSwiper.width(),h=2*this.itemArray[0].length+this.itemArray[0].margin,this.direction==Direction.left&&(g=parseInt(this.thumbnailSwiperList.css("left"))),this.direction==Direction.right&&(g=parseInt(this.thumbnailSwiperList.css("right")))}if(this.direction==Direction.top||this.direction==Direction.bottom){f=this.thumbnailSwiper.height(),h=2*this.itemArray[0].length+this.itemArray[0].margin,this.direction==Direction.top&&(g=parseInt(this.thumbnailSwiperList.css("top"))),this.direction==Direction.bottom&&(g=parseInt(this.thumbnailSwiperList.css("bottom")))}for(var c=parseInt(f/h)+2,b=parseInt(-g/h),c=Math.min(b+c,this.itemArray.length),b=Math.max(0,b);b<=c&&!(1<=this.LoadCount);b++){this.taskList.unShiftList({index:b},function(d){this.fillImage(d.index)}.bind(this))}}.interval(this,60)}},show:function(){this.setHighLight(BookInfo.getCurrentPageIndex());this.visible=!0;this.stage.show();this.refresh();this.fillContent();this.close.changeButtonColor(this.fontColor)},hide:function(){this.visible=!1;this.stage.hide();this.interval&&this.interval.stop()}}).extend(FormFrame);var ThumbnailForm=Class({create:function(c){this.height=274;this._super(c)},initHtml:function(){this.stage=$("<div class='thumbnail_win10'></div>");this.stage.append(this.close);this.stage.append(this.thumbnailSwiper);this.parent.append(this.stage)}}).extend(ThumbnailFrame);var toolbar_icons={First:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpERjU3M0NFNDJEMUUxMUU2OTNGREY0QkU2N0Y1QTAzNyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpERjU3M0NFNTJEMUUxMUU2OTNGREY0QkU2N0Y1QTAzNyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkRGNTczQ0UyMkQxRTExRTY5M0ZERjRCRTY3RjVBMDM3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkRGNTczQ0UzMkQxRTExRTY5M0ZERjRCRTY3RjVBMDM3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+QU3iOQAAAFhJREFUeNrs1UsKACAIBNDm/oc2OoC/kaFFuQvlEWEKM1uKwIc9+BwQ1Gd5Ci6jHbiFVuE2WoEpNINpNIJHqAePvCs3lr6xtCukfSz9edJZMZ5uD2+QLcAAxz5e1TZlSx4AAAAASUVORK5CYII=",prev:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpGQUYwMDBFNjJEMUUxMUU2ODVCMUMzMzE4RTA1MDc1RCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpGQUYwMDBFNzJEMUUxMUU2ODVCMUMzMzE4RTA1MDc1RCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZBRjAwMEU0MkQxRTExRTY4NUIxQzMzMThFMDUwNzVEIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkZBRjAwMEU1MkQxRTExRTY4NUIxQzMzMThFMDUwNzVEIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+ujeirwAAAFZJREFUeNrs1dsJACAMQ1Gz/9AVB1D78CKI/ZaDSExlZo0YfTgLj8M6DbvRCBxCvXAY9cApdAen0RVcQmdwJdi6cmP0jdFUoDlGfx7aFWi7Pb5BugADABZuUNVXsdtSAAAAAElFTkSuQmCC",next:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowMTg1NDdEMzJEMUYxMUU2QkQxMkQ2ODY5Q0RFMDJDNCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowMTg1NDdENDJEMUYxMUU2QkQxMkQ2ODY5Q0RFMDJDNCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjAxODU0N0QxMkQxRjExRTZCRDEyRDY4NjlDREUwMkM0IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjAxODU0N0QyMkQxRjExRTZCRDEyRDY4NjlDREUwMkM0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+7xaTcQAAAFhJREFUeNpi/P//PwMtAOOoweQaDFLMSCsXE2U4uUFB0HBKwhiv4ZRGHk7DqZEqsBpOreSGYTg2gymxiXFAXDwowpgmqYIm6ZgmOY8mZQVNS7dhWoMABBgAxlBQ1XF3Fc0AAAAASUVORK5CYII=",Last:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpGMTBCNUI4MDJEMUUxMUU2OTU4RDgyQjhBNkMyRTg2QSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpGMTBCNUI4MTJEMUUxMUU2OTU4RDgyQjhBNkMyRTg2QSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkYxMEI1QjdFMkQxRTExRTY5NThEODJCOEE2QzJFODZBIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkYxMEI1QjdGMkQxRTExRTY5NThEODJCOEE2QzJFODZBIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+8+y/TwAAAFdJREFUeNpi/P//PwMtAOOoweQYDFLISKw8qS7GZzhFBuMznGKDcRlOFYOxGU41g9ENo6rByAbiNZhSW+jv4kERxjRJFTRJxzTJeTQpK2haug3jGgQgwABnAl7VYn19sgAAAABJRU5ErkJggg==",home:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0MkIwOEE5MTJEMUUxMUU2OEYzQzkwMURDQUQwRDZDMiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0MkIwOEE5MjJEMUUxMUU2OEYzQzkwMURDQUQwRDZDMiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjQyQjA4QThGMkQxRTExRTY4RjNDOTAxRENBRDBENkMyIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjQyQjA4QTkwMkQxRTExRTY4RjNDOTAxRENBRDBENkMyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/ckONAAAAFxJREFUeNrs1UEKACAIBMD8/6O3UxDhmkZ1KD2vAymYACgnSp6GW1B2wuhAeHAPrEFTfAZbgIlbsOfJNMNgeJfEshocQWnPCK+gau/VUSScMIdD5/evHyRUVYABAG2vX9WFvbfUAAAAAElFTkSuQmCC",ZoomIn:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpBRTgwMTREMDJEMUUxMUU2QjZFQjk0NjU5RkZDN0I3NSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpBRTgwMTREMTJEMUUxMUU2QjZFQjk0NjU5RkZDN0I3NSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkFFODAxNENFMkQxRTExRTZCNkVCOTQ2NTlGRkM3Qjc1IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkFFODAxNENGMkQxRTExRTZCNkVCOTQ2NTlGRkM3Qjc1Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+uSUu1AAAAPlJREFUeNrslU0OgjAQhSGBG5i4UE8CnsJu1GOoN8EVezmHcBWaSOLWhav6GocEx1ZaAwsTm3yBTIfH0PkhVEoFY6zw54QDLWwhBQWowZ2uBdmDPkzGCBzVc5XgALZgDyqy6/3YVzgHNyAsDwnaz32EE4pI9HyqIL/E5sOTdwILsOSp0IlmtgrUYO2SvAudKbcrg037SVvEEXvPFEgWKb9vI9d+E1u1ceEGzLp1/uEotN/VtUEKMB/jjFPHqliRX+pTx5ljHWe+DRJ3Ou8MdmBD17LTecpXmM8KSbNCGmaFcm2Qr+aYIbGDjc038SHn8Yt4+P81teshwACgrasoC0+UiwAAAABJRU5ErkJggg==",ZoomOut:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpDNURBMzREOTJEMUUxMUU2ODM2RTg1MjJCRTE3RDE0OCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpDNURBMzREQTJEMUUxMUU2ODM2RTg1MjJCRTE3RDE0OCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkM1REEzNEQ3MkQxRTExRTY4MzZFODUyMkJFMTdEMTQ4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkM1REEzNEQ4MkQxRTExRTY4MzZFODUyMkJFMTdEMTQ4Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+n5CANwAAAPJJREFUeNrslUEKwjAQRVNobyC4UE/SegqzUY+h3qSuurfnsL1KAxbcunAVf3CEGhM6kXYhOPAITKY/TTIzibTWYgyLfk5YGGEPGShBA+40luQXfbicMTjqp1XgALZgD2rym/kkVLgANyA9H0maL0KEU/oj2bNVSXGpL8a+vBNYgCXjemrQgDXn8i50poKBiVO++dhaZwpUd11XitJo4ia+7djCLZg5RFxm4q7cAinBfIwzzphZsaK4LCSPc2Ye56EFknQq7wx2YENj1ak8HSps9wpFvUI5eoXmFshXfcyVPUO1zQ/xIfvxm3j0f5pe9hBgANt+piojz5sZAAAAAElFTkSuQmCC",search:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozMUZEQ0Q1RTJEMjAxMUU2OUNDMUE4NzJFRkY0RTZFNyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozMUZEQ0Q1RjJEMjAxMUU2OUNDMUE4NzJFRkY0RTZFNyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjMxRkRDRDVDMkQyMDExRTY5Q0MxQTg3MkVGRjRFNkU3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjMxRkRDRDVEMkQyMDExRTY5Q0MxQTg3MkVGRjRFNkU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+xicDVQAAAOxJREFUeNrslU0KwjAQhROxNxBcqCdpPIXZqMdQb1JX3dtz2F6lAQW3LlzFFxyhxoZOxC4EAx+Bmelrm/mJtNaKPpb8OWHhhAMoUIAa3GgvyC66aDMOwd4+Vgl2YA22oCK78yexwjm4Ah14SJM/jxFO6Yt0x69qiktDMX7yDmAG5oz0VKAGS07yTnSmgoGLMyH/wHvPGBhmQbm4UcjpC5/BhCns4i7cBinAtI8zVsyqWFCciqnjjFnHWWyDJI3OO4INWNFeNjrPxgr7s8LQrDAts8JyG+SjOeaKoK+x+Sb+zXn8Ii7/V9Nz3QUYAGDopSU9n2BfAAAAAElFTkSuQmCC",thumbnails:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1MDM4MkRFODJEMUUxMUU2ODFCNjg0OTQ2M0UzQkUwRCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo1MDM4MkRFOTJEMUUxMUU2ODFCNjg0OTQ2M0UzQkUwRCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjUwMzgyREU2MkQxRTExRTY4MUI2ODQ5NDYzRTNCRTBEIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjUwMzgyREU3MkQxRTExRTY4MUI2ODQ5NDYzRTNCRTBEIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+8T/UOAAAADxJREFUeNpi/P//PwMtAOOQNxifLYwkqMFqMCMWDf/RDCakZtTgATKYJqliNIOMJrfRDDKsMgjVAECAAQBz4nHVAyiVvAAAAABJRU5ErkJggg==",tableOfContent:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5RTZEOUU2MjJEMUUxMUU2ODQ1OUEyMkYwMDk0OTFERCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo5RTZEOUU2MzJEMUUxMUU2ODQ1OUEyMkYwMDk0OTFERCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjlFNkQ5RTYwMkQxRTExRTY4NDU5QTIyRjAwOTQ5MUREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjlFNkQ5RTYxMkQxRTExRTY4NDU5QTIyRjAwOTQ5MUREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+9lTaFQAAADVJREFUeNpi/P//PwMtAOOowfgMRhZgROMTNI+QwYxI9OB38WiqGE0Vo6liNFWMpgqcACDAALsfU9Um3vUiAAAAAElFTkSuQmCC",bookmark:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo4RUI5NzVGNDJEMUUxMUU2OEM5RUE4MEJENjVGQUI4QSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo4RUI5NzVGNTJEMUUxMUU2OEM5RUE4MEJENjVGQUI4QSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjhFQjk3NUYyMkQxRTExRTY4QzlFQTgwQkQ2NUZBQjhBIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjhFQjk3NUYzMkQxRTExRTY4QzlFQTgwQkQ2NUZBQjhBIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+45Jc6AAAAENJREFUeNpi/P//PwMtAOOwM5gYWxnJNZiRHPlRg0cNHjWYigYT4pNlMIyNTYxsg3G5lCKDcZVg/wdl6TaCqiaAAAMARFNl1bE1kyUAAAAASUVORK5CYII=",autoPlay:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozQUU4QUMzMTJEMUYxMUU2QkExQkJCNDRFNkFBMzQ1OCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozQUU4QUMzMjJEMUYxMUU2QkExQkJCNDRFNkFBMzQ1OCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjNBRThBQzJGMkQxRjExRTZCQTFCQkI0NEU2QUEzNDU4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjNBRThBQzMwMkQxRjExRTZCQTFCQkI0NEU2QUEzNDU4Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+XQxvvgAAAFlJREFUeNpi/P//PwMtAOOQN5hcWxiJMZiRRENhelD0DqjBhCyjyGAGPIZT7GJcLqdKUBBt8aAwmCZBQdPIGzoZhGoGk1sI4TWYEkDQYEpsoomLh3jVBBBgACmZdtXIZxajAAAAAElFTkSuQmCC",stopAutoPlay:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1RjRCQTBDNTJEMUYxMUU2QTM2MUQxQzlEODdBMzRDOCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo1RjRCQTBDNjJEMUYxMUU2QTM2MUQxQzlEODdBMzRDOCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjVGNEJBMEMzMkQxRjExRTZBMzYxRDFDOUQ4N0EzNEM4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjVGNEJBMEM0MkQxRjExRTZBMzYxRDFDOUQ4N0EzNEM4Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+R8Rh2gAAAFBJREFUeNpi/P//PwMtAOOQN5hcWxiJMZiRRENhelD0DojB/7F4FZcYyQYzkik2avBwNpgmyW3o5DxyCyG8BlMCCBpMiU2MdC/oB7/BAAEGAAUuhtXyTfwDAAAAAElFTkSuQmCC",soundOn:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3QTYzMjRGMzJEMUYxMUU2OTc5QUI0RThBMDg4ODA5MyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3QTYzMjRGNDJEMUYxMUU2OTc5QUI0RThBMDg4ODA5MyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjdBNjMyNEYxMkQxRjExRTY5NzlBQjRFOEEwODg4MDkzIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjdBNjMyNEYyMkQxRjExRTY5NzlBQjRFOEEwODg4MDkzIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+5ap5LAAAAFtJREFUeNrk1cEKABAQBFDz/x89LpS0Ec1IOCovmd0Fksmx8A1cD0EJs4BUwi0mg3tIAkfIFtxuQg1jEtQwRAUc3v5qePkpLOHZyu1Yg1hb2jqErGPz0a8pCzAAdapt1bJjvpkAAAAASUVORK5CYII=",soundOff:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo4Nzg4MEQ2ODJEMUYxMUU2ODM2MzkwNDkxMDRENkY4OSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo4Nzg4MEQ2OTJEMUYxMUU2ODM2MzkwNDkxMDRENkY4OSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjg3ODgwRDY2MkQxRjExRTY4MzYzOTA0OTEwNEQ2Rjg5IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjg3ODgwRDY3MkQxRjExRTY4MzYzOTA0OTEwNEQ2Rjg5Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+vitmewAAAFJJREFUeNpi/P//PwMtAOOIMhimkZGaBv+HGvifmgYjG0Y1g9ENoorB2Awhy2BkCUZqG8xIIKJGDR6kkUez5Ea3DELTLE3TQoimxeYwrJoAAgwA7spp1dPtm78AAAAASUVORK5CYII=",annotation:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpEMUJBNjM4RDJEMUUxMUU2ODU0RDkzQUE5Q0ZDRUM1MiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpEMUJBNjM4RTJEMUUxMUU2ODU0RDkzQUE5Q0ZDRUM1MiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkQxQkE2MzhCMkQxRTExRTY4NTREOTNBQTlDRkNFQzUyIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkQxQkE2MzhDMkQxRTExRTY4NTREOTNBQTlDRkNFQzUyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+SqJ80QAAAE9JREFUeNpi/P//PwMtAOOwMxgkyUiGHFaDYQKMSJrRFWGTYyTGYEYSXfyfVIOJBf/JcTHeOBp0Lh4NitGgGA0KHKUbyUXw8K5ByAYAAQYAtO1p1a4vfrMAAAAASUVORK5CYII=",videoGallery:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozMUQ5NUI0QjJEMUYxMUU2QURDNkZGQUY5NTM3NzYxMCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozMUQ5NUI0QzJEMUYxMUU2QURDNkZGQUY5NTM3NzYxMCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjMxRDk1QjQ5MkQxRjExRTZBREM2RkZBRjk1Mzc3NjEwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjMxRDk1QjRBMkQxRjExRTZBREM2RkZBRjk1Mzc3NjEwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+I8puSAAAAEFJREFUeNpi/P//PwMtAOOwMJgSmxgJGcyIhY0N4FRLd4Oxeg+HwaNBMYiDgti0O5oqRoOCCkFBtWJzhFZNAAEGACfqctVWzBXCAAAAAElFTkSuQmCC",photoGallery:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyNkE0QjE1QTJEMUYxMUU2OEFBNjhGNEM3NjdBOTI2NiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyNkE0QjE1QjJEMUYxMUU2OEFBNjhGNEM3NjdBOTI2NiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjI2QTRCMTU4MkQxRjExRTY4QUE2OEY0Qzc2N0E5MjY2IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjI2QTRCMTU5MkQxRjExRTY4QUE2OEY0Qzc2N0E5MjY2Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+kVE5nQAAARtJREFUeNpi/P//PwMtAOOQNphaNjBiM5iRQkP/09xgBpDBUPwfiQ3C7EA8CYj/AfE0IOZAk8eG4WYw4bG9G4jlgFgTiMWBuA+LGgEg/gal0dyO28Ugl2pD2epQPrqPDgDxOSDeB8SsyGbgM7gfiDdBDd8AxFOQ5EBxswKIVwMxCxCvA+KFxBrMBjUc5NLJUBfC5LqB+DBSuHMC8QliDcaFc4H4OhALoYmLUmJwIBA/BWIFQqkCmyDIJd+AWBBNkyUQvwJiI2KSG7ogNzSsTgPxQaRwVQXi50DsSWw6RhfcCcTzgZgJiJcD8SoglgDiO0CcTEoGQRfcBE0+sFQBSp/vgLiRyIiFG4xeVnAB8XdaFEI0KTZHeNUEEGAA9KLySyOzbLUAAAAASUVORK5CYII=",sharethis:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2QUJCNThDNDJEMUYxMUU2OEQ2OEZFREQ1RTg1QjBEMyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2QUJCNThDNTJEMUYxMUU2OEQ2OEZFREQ1RTg1QjBEMyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjZBQkI1OEMyMkQxRjExRTY4RDY4RkVERDVFODVCMEQzIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjZBQkI1OEMzMkQxRjExRTY4RDY4RkVERDVFODVCMEQzIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+ilVfigAAAFZJREFUeNpi/P//PwMtAOOwNxikmJHaBiMrZKSWwTCXotMUGYxsCC42yQajaybEH7jIQxfEFRQMuCIUn8GMlIiPGky2wUSnllGDB9Zgksv2oV01AQQYAODmZ9WTKIRrAAAAAElFTkSuQmCC",print:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo4MkE5RDIxRTJEMUUxMUU2OThBNjlBMEY3QTJFMjNGMiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo4MkE5RDIxRjJEMUUxMUU2OThBNjlBMEY3QTJFMjNGMiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjgyQTlEMjFDMkQxRTExRTY5OEE2OUEwRjdBMkUyM0YyIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjgyQTlEMjFEMkQxRTExRTY5OEE2OUEwRjdBMkUyM0YyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+jSnsOQAAAFBJREFUeNrslDESACAIw+z/Hx13B6WoC9oHpDkOENBuRKXA0UbVHMVui2ZgJaHUBbvrZoFlWC7Bow0TU6Jb4c6bzOURNE6Dv/Hrb/NYugADAOhJYNWbptguAAAAAElFTkSuQmCC",download:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5NDMzQ0M3NzJEMUYxMUU2OEM5MEI5QjMzREE1OEU4OCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo5NDMzQ0M3ODJEMUYxMUU2OEM5MEI5QjMzREE1OEU4OCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjk0MzNDQzc1MkQxRjExRTY4QzkwQjlCMzNEQTU4RTg4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjk0MzNDQzc2MkQxRjExRTY4QzkwQjlCMzNEQTU4RTg4Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+pXs9agAAAE5JREFUeNpi/P//PwMtAOOwNxikmHHU4FGDaWMwukGE+CS5GFkzOpsFiP9SEhQwA9FpqoQxskLGQRV5RGvGp2/4GEx2MTxyahCiAUCAAQDyZlvVuep3RwAAAABJRU5ErkJggg==",fullscreen:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5RTBFRkJEOTJEMUYxMUU2OUIxNEYyRDAwMUE3Q0U1RCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo5RTBFRkJEQTJEMUYxMUU2OUIxNEYyRDAwMUE3Q0U1RCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjlFMEVGQkQ3MkQxRjExRTY5QjE0RjJEMDAxQTdDRTVEIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjlFMEVGQkQ4MkQxRjExRTY5QjE0RjJEMDAxQTdDRTVEIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+pRLasgAAADpJREFUeNpi/P//PwMtAOOQNxibLYw49OJVi81gRjId+X/UYKIMHk3HowaPZpCBMpgmxeYITscAAQYARI1V1Rr4ATQAAAAASUVORK5CYII=",exitFullscreen:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpDOTA1ODlBNDJEMUYxMUU2OUY4NkRFRTAxRUZDNEU5QiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpDOTA1ODlBNTJEMUYxMUU2OUY4NkRFRTAxRUZDNEU5QiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkM5MDU4OUEyMkQxRjExRTY5Rjg2REVFMDFFRkM0RTlCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkM5MDU4OUEzMkQxRjExRTY5Rjg2REVFMDFFRkM0RTlCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+AwSzTwAAADhJREFUeNpi/P//PwMtAOOwMxgkyUiG3KjBuA3GZgs+g3GqZRxNx6MGD57kNlpW0N7gEZSOAQIMAESNVdWoMVaFAAAAAElFTkSuQmCC",languageChange:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzVFOUIxNEI0N0RCMTFFNkE4MTVBOTZFMTc1MkM0QzMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NzVFOUIxNEM0N0RCMTFFNkE4MTVBOTZFMTc1MkM0QzMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3NUU5QjE0OTQ3REIxMUU2QTgxNUE5NkUxNzUyQzRDMyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3NUU5QjE0QTQ3REIxMUU2QTgxNUE5NkUxNzUyQzRDMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pi9HFdEAAABhSURBVHja7JQxCgAgDAON+P8vx01K0QrWgoqZgsMNSSxIpgjlFKQwcBF+VybQ4PboEO/N+D0wRSEjP53bcDoT/8s74FbILwnvDSmdpqmg2B3FMtQCu6AWGBGrwNFzqwIMAL+JETGMZQEZAAAAAElFTkSuQmCC",about:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowODUyNjIwQjJEMjAxMUU2ODg0OEY2Q0REOUU1RjUzMyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowODUyNjIwQzJEMjAxMUU2ODg0OEY2Q0REOUU1RjUzMyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjA4NTI2MjA5MkQyMDExRTY4ODQ4RjZDREQ5RTVGNTMzIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjA4NTI2MjBBMkQyMDExRTY4ODQ4RjZDREQ5RTVGNTMzIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+VN60jgAAASpJREFUeNpi/P//PwMtAOOQM5gBZDAezAPEhUB8AIjf/oeAt1B+IVQeq158Lo4C4l4g5gbirUB8GIhfA7EoENsCsTcQfwXiYiBeRqyL64H4HxBPAWIRHGpEoPL/oOpR5LFpiIIqTiYQTDCcDFUfg89gUJi9AOKpRBoKwyCXvwFiAVwG5wDxJyAWxmHAfxziwlB9ObgibxcQPwfieDIS2EIglgRiNxCHCU1SG4jP40udeOTOAbEOjINusAgQvyIzS4CSojAug99C0yk5QBSqH6vBV4DYiEyDDYH4Kq4MQm6qEALij8ipAlc6nkLtdAzC0WTmvFhCWRq5rJhMoKyYjKuswFe6RQNxD7R02wLEJ6CxDkpSFkDsAy3dSoF4Cbnl8UFqlseDs2oCCDAA2CDpnrR8d3wAAAAASUVORK5CYII=",Help:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxQ0U2NzlERTJEMjAxMUU2OTUwOUE2NTMyMjBDREM5QyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoxQ0U2NzlERjJEMjAxMUU2OTUwOUE2NTMyMjBDREM5QyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjFDRTY3OURDMkQyMDExRTY5NTA5QTY1MzIyMENEQzlDIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjFDRTY3OUREMkQyMDExRTY5NTA5QTY1MzIyMENEQzlDIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+qrtSUAAAAUFJREFUeNpi/P//PwMtAOOQM5gBZDAezAPEhUB8AIjf/oeAt1B+IVQeq158Lo4C4l4g5gbirUB8GIhfA7EoENsCsTcQfwXiYiBeRqyL64H4HxBPAWIRHGpEoPL/oOpR5LFpiIIqTiYQTDCcDFUfg89gUJi9AOKpRBoKwyCXvwFiAVwG5wDxJyAWRhNHBw1o8sJQfTm4Im8XED8H4nj0qAAlTTx8EFgIxJJA7AbiMKFJagPxeWzpnYiUew6IdWAcdINFgPgVmVkClBSFYRwWNMm30HSKNS8hsRuxyItC9WM1+AoQG+ErAvDIGQLxVVwZBFeqIISFgPgjcqrAlY6nYNH8n5J0DMLRZOa8WEJZGrmsmEygrJiMq6zAV7pFA3EPtHTbAsQnoLEOSlIWQOwDLd1KgXgJueXxQWqWx4OzagIIMACQ/O+is8Mm6gAAAABJRU5ErkJggg==",moreBar:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFMTZBMThCNDJEMUYxMUU2QTEyMjg1OTdBMjFFOEU3RSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFMTZBMThCNTJEMUYxMUU2QTEyMjg1OTdBMjFFOEU3RSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkUxNkExOEIyMkQxRjExRTZBMTIyODU5N0EyMUU4RTdFIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkUxNkExOEIzMkQxRjExRTZBMTIyODU5N0EyMUU4RTdFIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+HV/9zwAAACpJREFUeNpi/P//PwMtAOOowegGU9t0xtEwHjV4NLmNGjya3IZ5GAMEGAAjXkTV1frc0wAAAABJRU5ErkJggg==",backward:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODk5MTRGN0VEMzEwMTFFNkFFQjRFOUM5MDUxNzdCQzEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODk5MTRGN0ZEMzEwMTFFNkFFQjRFOUM5MDUxNzdCQzEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4OTkxNEY3Q0QzMTAxMUU2QUVCNEU5QzkwNTE3N0JDMSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4OTkxNEY3REQzMTAxMUU2QUVCNEU5QzkwNTE3N0JDMSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvNfbYAAAABhSURBVHja3NQBCgAgCANAJ/3/y4tekJMG1R5wiOJAMhzJMOUamA54oTgNS2gVltEK3EJ3cBtdGZvrK9+DCgxxYiqrgDixdLw2nsXd0fXSMp7i1S1dEY6u+K/o8f4qpgADAL1ZEi0d/sBxAAAAAElFTkSuQmCC",forward:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OTIyMzMxMkREMzEwMTFFNkI2NUE5QzQyQ0M1MEE1RDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OTIyMzMxMkVEMzEwMTFFNkI2NUE5QzQyQ0M1MEE1RDYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5MjIzMzEyQkQzMTAxMUU2QjY1QTlDNDJDQzUwQTVENiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5MjIzMzEyQ0QzMTAxMUU2QjY1QTlDNDJDQzUwQTVENiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PhlNMycAAABeSURBVHja5NXBEgAQCARQ+/8fnXGXstlLnPWYLGBmQzHQHl6TodpxCmdbEeKVHh/x6uG5+ItUbHEPZlZDFoZqx1D0OANTqYhgOsenwtLN84rLb8VNKprDH35NU4ABAOfCV9UOSf6RAAAAAElFTkSuQmCC",soundAdd:"iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEFBNzMxOUFCQjgwMTFFNkFFNTJGQ0IwMjg0MjJBRTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEFBNzMxOUJCQjgwMTFFNkFFNTJGQ0IwMjg0MjJBRTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4QUE3MzE5OEJCODAxMUU2QUU1MkZDQjAyODQyMkFFNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4QUE3MzE5OUJCODAxMUU2QUU1MkZDQjAyODQyMkFFNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqAv3nkAAABBSURBVHjaYvz//z8DLQETA43BqAWjFmCA/1A8GkTUAyxEhDkx4oyD1geMOFzOOJqK6BYHDMSmltE4GLWAdgAgwAAU3Qgykbj+1QAAAABJRU5ErkJggg==",soundReduce:"iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OTE1MjRBQzlCQjgwMTFFNjk0MzRGREJFRTk5OTY1OUEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OTE1MjRBQ0FCQjgwMTFFNjk0MzRGREJFRTk5OTY1OUEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5MTUyNEFDN0JCODAxMUU2OTQzNEZEQkVFOTk5NjU5QSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5MTUyNEFDOEJCODAxMUU2OTQzNEZEQkVFOTk5NjU5QSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Po2FvM0AAAA1SURBVHjaYvz//z8DLQETA43BqAWjFoxaQAcLWAjIE1uOMA5aHzCORvKoBaMWjFrAwAAQYADvCQQywiPpxwAAAABJRU5ErkJggg==",emailButton:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODA5QjhFMjczRThEMTFFNkEzMDZDN0NGQUQ4OTlDOEIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODA5QjhFMjgzRThEMTFFNkEzMDZDN0NGQUQ4OTlDOEIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4MDlCOEUyNTNFOEQxMUU2QTMwNkM3Q0ZBRDg5OUM4QiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4MDlCOEUyNjNFOEQxMUU2QTMwNkM3Q0ZBRDg5OUM4QiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PojIH2cAAADVSURBVHja7NSvCsJAAMfx3RQEEUxq8wlMRoMvYLUJRrNd44p90TcQwQcw+AQWo1WMykCLguf34Bxz/zyFgWE/+IDo+Q1jm5BSWlnMtjJaHk4MLyF/tHgrqbsioIwp7tJ8N4xDnUh4hQq6OBpED+hAwE0Lq+3RQgOblOgaNTSx1d+lhtWuGKKAWSj4gAMbfXiB3z6GX5ujjoEOnNDTZ92Y835LhB7puOd7hxEuOKOk74B2zFnhfzAIq3mY6D86qCac+zpsOpG/KyIrJl2j/LX5/+GnAAMAemmoiJErTcYAAAAASUVORK5CYII="};Class("ButtonQueue",{create:function(c){this.leftBar=c.leftBar;this.pageBar=c.pageBar;this.rightBar=c.rightBar;this.edtNumber=c.edtNumber;this.extended=c.extended;this.buttonWidth=c.buttonWidth;this.buttons=c.buttons.clone();this.buttons.each(function(d){d.freedom();d.$button.removeClass("left");d.$button.removeClass("right");d.hint=!0});this.pickButtons()},pickButtons:function(){this.btnFirst=this.buttons.find("first").get(0);this.btnPrevious=this.buttons.find("previous").get(0);this.btnNext=this.buttons.find("next").get(0);this.btnLast=this.buttons.find("last").get(0);this.buttons.remove(this.btnFirst);this.buttons.remove(this.btnPrevious);this.buttons.remove(this.btnNext);this.buttons.remove(this.btnLast);this.pageButtonCount=4;bookConfig.enablePageBack&&(this.btnBackward=this.buttons.find("backward").get(0),this.btnForward=this.buttons.find("forward").get(0),this.buttons.remove(this.btnBackward),this.buttons.remove(this.btnForward),this.pageButtonCount=6);this.buttonCount=this.buttons.length},sort:virtual_function});Class("PCButtonQueue",{sort:function(){for(var h=2*Math.floor(this.leftBar.width/this.buttonWidth),h=Number.between(h,0,this.buttonCount),n=h/2,m=[],l=0;l<this.buttons.length;l++){var k=this.buttons.get(l);l<h?(k==this.buttons.find("sound").get(0)&&(k.title=!1,VolumeControlBar.config.direction=VolumeControlBar.TOP),l<n?(k.addTo(this.leftBar.body),k.$button.addClass("left")):m.push(k)):(k==this.buttons.find("sound").get(0)&&(k.title=!1,VolumeControlBar.config.direction=VolumeControlBar.DEFAULT),k.addTo(this.extended),k.hint=!1)}for(l=m.length-1;0<=l;l--){k=m[l],k==this.buttons.find("sound").get(0)&&(k.title=!1,VolumeControlBar.config.direction=VolumeControlBar.TOP),k.addTo(this.rightBar.body),k.$button.addClass("right")}this.addPageButtons(this.leftBar.width)},addPageButtons:function(z){function y(c){c.addTo(v);c.setPosition(u,s);u+=t}function x(){u+=o-2;0<w?(r.css({left:u+"px",top:q+"px",width:w+"px",display:"block"}),u+=w):r.css({display:"none"});u+=o}var w=this.edtNumber.width,v=this.pageBar.body,u=z,t=this.buttonWidth,s=this.buttonTop,r=this.edtNumber.body,q=this.edtNumber.top,o=this.edtNumber.space;rightToLeft?(bookConfig.enablePageBack&&y(this.btnForward),y(this.btnLast),y(this.btnNext),x(),y(this.btnPrevious),y(this.btnFirst),bookConfig.enablePageBack&&y(this.btnBackward)):(bookConfig.enablePageBack&&y(this.btnBackward),y(this.btnFirst),y(this.btnPrevious),x(),y(this.btnNext),y(this.btnLast),bookConfig.enablePageBack&&y(this.btnForward))}}).extend("ButtonQueue");Class("MobileButtonQueue",{sort:function(f,h){var g=this.edtNumber.width+2*this.edtNumber.space+4*this.buttonWidth;this.addPageButtons(g,(this.container.width-g)/2);this.buttons.each(function(c){c.addTo(this.extended)}.bind(this))}}).extend("ButtonQueue");(function(c){c.fn.asMetroButton=function(l){function k(){this.css({"background-color":"rgba(255,255,255,0.2)"});b.css({display:"block"});this.isActive=!0}function h(){this.css({"background-color":"transparent"});b.css({display:"none"});this.isActive=!1}this.children("div[name=leftBorder]").remove();var b=this.children("div[name=bottomBorder]");b.length||(b=c("<div></div>"),this.append(b));b.css({position:"absolute",bottom:"0px",width:this.width()+"px",height:"2px","background-color":l,"pointer-events":"none",display:"none"});"absolute"==this.css("position")&&b.css("left","0px");this.bind("mouseenter",k.bind(this));this.bind("mouseleave",h.bind(this));this.bind("blur",h.bind(this));this.bind("mousedown",function(){this.css({"background-color":"rgba(255,255,255,0.3)"});b.css({display:"block"});this.isActive=!0}.bind(this));this.bind("mouseup",k.bind(this));return this};c.fn.asMetroMenu=function(l){function k(){this.css({"background-color":"rgba(255,255,255,0.2)"});b.css({display:"block"});this.isActive=!0}function h(){this.css({"background-color":"transparent"});b.css({display:"none"});this.isActive=!1}this.children("div[name=bottomBorder]").remove();var b=this.children("div[name=leftBorder]");b.length||(b=c("<div></div>"),this.append(b));b.css({position:"absolute",top:"0px",left:"0px",width:"2px",height:this.height()+"px","background-color":l,"pointer-events":"none",display:"none"});this.bind("mouseenter",k.bind(this));this.bind("mouseleave",h.bind(this));this.bind("blur",h.bind(this));this.bind("mousedown",function(){this.css({"background-color":"rgba(255,255,255,0.3)"});b.css({display:"block"});this.isActive=!0}.bind(this));this.bind("mouseup",k.bind(this));return this}})(jQuery);Class("PCToolbar",{BUTTON_WIDTH:45,initBar:function(){VolumeControlBar.config={color:this.color.toString(),iconColor:Color(bookConfig.iconColor).toString(),direction:VolumeControlBar.TOP};this.showPageButtons=bookConfig.flipshortcutbutton;bookConfig.flipshortcutbutton=!1;this.topBar=$('<div class="fbTopBar" id = "fbTopBar"></div>');this.logoBar=$("<div id='logoBar' class='logoBar'></div>");this.searchBar=$("<div class='searchBar'></div>");this.bottomBar=$("<div id='fbToolBar' class='fbToolBar'></div>");this.leftButtonBar=$("<div class='buttonBar left'></div>");this.rightButtonBar=$("<div class='buttonBar right'></div>");this.pageBar=$("<div class='pageBar'></div>");this.edtPageNumber=$("<div class='pageNumber' id='tfPageIndex'><input type='text' id='currentPageIndexTextField' size='15' /></div>");this.parent.append(this.topBar);this.parent.append(this.bottomBar);this.topBar.append(this.logoBar);this.topBar.append(this.searchBar);this.bottomBar.append(this.leftButtonBar);this.bottomBar.append(this.pageBar);this.bottomBar.append(this.rightButtonBar);this.pageBar.append(this.edtPageNumber);this.initStyle();this.initPageNumber();this.initMoreButton();this.initSearchBar();this.showPageButtons&&this.initPageButton()},initStyle:function(){this.topBar.css({"background-color":this.color.toString()});this.bottomBar.css({"background-color":this.color.toString()});this.searchBackgroundColor=Color(this.color.add(96));this.searchButtonColor=Color(this.color.add(32));this.searchFontColor=Color(this.searchBackgroundColor.add(32));this.isDifferMinThan(this.searchBackgroundColor,this.searchFontColor,16)&&(this.searchFontColor=Color("#CCCCCC"))},isDifferMinThan:function(f,h,g){f=Color(f);h=Color(h);f=f.difference(h);return f.r<g||f.g<g||f.b<g},initPageNumber:function(){var f=this.edtPageNumber.children("input");f.css({color:Color(bookConfig.pageNumColor).toString(),"text-align":"center"});var h=parseInt(bookConfig.totalPageCount),g=16;""==bookConfig.pageNumberCaption&&(10000<=h&&(g=16),10000>h&&(g=10),1000>h&&(g=7),100>h&&(g=4),10>h&&(g=3));f.attr("size",g);this.edtPageWidth=this.edtPageNumber.width()},initSearchBar:function(){this.btnPreSearch=this.pickButton("search");this.btnPreSearch||(this.btnPreSearch=new SearchButton,this.setButtonTitle(this.btnPreSearch));this.btnPreSearch.onClick=this.onSearchButtonClick.bind(this);this.edtPreSearch=$("<div class='preSearch' id='preSearchContent'><input type='text' size='30'  value=''/></div>");this.isRightToLeft()?(this.edtPreSearch.find("input").attr("dir","rtl"),this.btnPreSearch.$button.addClass("left"),this.edtPreSearch.css({"float":"right"})):this.btnPreSearch.$button.addClass("right");this.searchBar.append(this.edtPreSearch);this.btnPreSearch.addTo(this.searchBar);this.btnPreSearch.hint=!1;this.btnPreSearch.$button.asButton();this.btnPreSearch.changeColor(this.searchButtonColor.toString());this.searchBar.css({"background-color":this.searchBackgroundColor.toString()});this.edtPreSearch.css({"background-color":this.searchBackgroundColor.toString()});this.edtPreSearch.find("input").css({"background-color":this.searchBackgroundColor.toString(),color:this.searchFontColor.toString()});bookConfig.SearchButtonVisible||this.searchBar.css({display:"none"})},initPageButton:function(){rightToLeft?(this.leftButton=new NextPageButton,this.rightButton=new PreviousPageButton):(this.leftButton=new PreviousPageButton,this.rightButton=new NextPageButton);this.leftButton.setSrc("previous_normal");this.rightButton.setSrc("next_normal");this.leftButton.$button.attr("class","floatPageButton");this.rightButton.$button.attr("class","floatPageButton");this.leftButton.$button.asButton().mouseEnterLight(this.color.toString());this.rightButton.$button.asButton().mouseEnterLight(this.color.toString());this.leftButton.addTo(this.parent);this.rightButton.addTo(this.parent)},initMoreButton:function(){this.removeButton("more");this.btnMore.hint=!1;this.btnMore.$button.addClass("right")},setButtonTitle:function(d){var f=new SolidArrowTextBubble({parent:this.parent,text:d.caption,color:this.color,textColor:d.fontColor});d.setTitle(f)},initExtendedbar:function(){this.extendedBar=new PCExtendedBar(this.parent);global.moreBar=this.extendedBar},initEvents:function(){this._super();this.edtPreSearch.bind("keydown",function(c){13==c.keyCode&&this.btnPreSearch.click()}.bind(this));var d=this.edtPreSearch.find("input"),f=getLanguage("btnSearch","Search");d.val(f);d.bind("focus",function(b){this.searchBar.css({"background-color":"white"});this.edtPreSearch.css({"background-color":"white"});d.css({"background-color":"white",color:"black"});d.val()==f&&d.val("")}.bind(this));d.bind("blur",function(b){this.searchBar.css({"background-color":this.searchBackgroundColor.toString()});this.edtPreSearch.css({"background-color":this.searchBackgroundColor.toString()});d.css({"background-color":this.searchBackgroundColor.toString(),color:this.searchFontColor.toString()});""==d.val()&&d.val(f)}.bind(this))},onSearchButtonClick:function(d){frmSearch.visible||frmSearch.show();d=getLanguage("btnSearch","Search");var f=this.edtPreSearch.find("input").val();f==d&&(f="");frmSearch.search(f)},onResize:function(h,n){h=void 0==h?this.parent.width():parseInt(h);n=void 0==n?this.parent.height():parseInt(n);var m=this.logoBar.width()+20,l=this.searchBar.width()+10;m+l+this.BUTTON_WIDTH>h?this.searchBar.css({display:"none"}):bookConfig.SearchButtonVisible?this.searchBar.css({display:"block"}):this.searchBar.css({display:"none"});m+this.BUTTON_WIDTH>h?this.logoBar.css({display:"none"}):this.logoBar.css({display:"block"});m=bookConfig.enablePageBack?6:4;m=this.edtPageWidth+m*this.BUTTON_WIDTH+3*(m-3);l=(h-m)/2;this.leftButtonBar.css({width:l+"px"});this.pageBar.css({width:m+"px"});this.rightButtonBar.css({width:l+"px"});if(this.showPageButtons){var k=(n-160)/2;this.leftButton.$button.css({left:"0px",top:k+"px"});this.rightButton.$button.css({right:"0px",top:k+"px"})}this.buttonBarWidth=l;this.pageBarWidth=m;this.resetButtonPosition()},resetButtonPosition:function(){(new PCButtonQueue({buttons:this.buttons,buttonWidth:this.BUTTON_WIDTH,buttonTop:0,leftBar:{body:this.leftButtonBar,width:this.buttonBarWidth},rightBar:{body:this.rightButtonBar,width:this.pageBarWidth},pageBar:{body:this.pageBar,width:this.buttonBarWidth},edtNumber:{body:this.edtPageNumber,width:this.edtPageWidth,top:14,space:5},extended:this.extendedBar.$bar})).sort();var c=this.buttonsInExtendedBar();this.extendedBar.resize(c);this.extendedBar.hide();0<c.length?(this.btnMore.addTo(this.topBar),this.btnMore.changeColor(),this.btnMore.$button.asButton(),this.btnMore.setCallback(this.afterButtonClick.bind(this)),this.searchBar.css({right:"46px"})):(this.btnMore.freedom(),this.searchBar.css({right:"10px"}));this.buttons.each(function(d){d.changeColor();d.$parent==this.extendedBar.$bar?d.$button.asMetroMenu(d.color.toString()):d.$button.asMetroButton(d.color.toString())}.bind(this))},show:function(){if(!this.isMoving&&!this.visible&&(this._super(),this.showPageButtons)){if(isIE8()){this.leftButton.$button.css({display:"block"}),this.rightButton.$button.css({display:"block"})}else{var c=transformCSS({tran:{x:0,y:0}});animateOnce(this.leftButton.$button,c,500);animateOnce(this.rightButton.$button,c,500)}}},hide:function(){if(!this.isMoving&&this.visible&&(this._super(),this.showPageButtons)){if(isIE8()){this.leftButton.$button.css({display:"none"}),this.rightButton.$button.css({display:"none"})}else{var c=transformCSS({tran:{x:-63,y:0}});animateOnce(this.leftButton.$button,c,500);c=transformCSS({tran:{x:63,y:0}});animateOnce(this.rightButton.$button,c,500)}}},afterButtonClick:function(c){this._super(c);c.getStatus&&(c.$parent==this.extendedBar.$bar?c.$button.asMetroMenu(c.color.toString()):c.$button.asMetroButton(c.color.toString()),c.$button.isActive&&c.$button.trigger("mouseenter"))}}).extend("Toolbar");Class("PCExtendedBar",{show:function(f){if(!0!=this.isMoving&&!0!=this.visible){this.visible=this.isMoving=!0;this.$bar.css({left:f.left+f.width-this.width+"px",top:f.top+f.height+"px",display:"block"});var h=-this.height,g=transformCSS({tran:{x:0,y:h}});this.$bar.css(g);(function(c,d){h+=this.height/d;g=transformCSS({tran:{x:0,y:h}});this.$bar.css(g);c==d&&(this.isMoving=!1)}).runInAnimate(this,300)}},hide:function(){if(!0!=this.isMoving&&!1!=this.visible){this.isMoving=!0;this.visible=!1;var d=0,f=transformCSS({tran:{x:0,y:0}});this.$bar.css(f);(function(c,b){d-=this.height/b;f=transformCSS({tran:{x:0,y:d}});this.$bar.css(f);c==b&&(this.$bar.css({display:"none"}),this.isMoving=!1)}).runInAnimate(this,300)}},resize:function(d){for(var f=0;f<d.length;f++){d.get(f).setPosition(0,46*f)}this.width=160;this.height=46*d.length;this.$bar.css({width:this.width+"px",height:this.height+"px"})}}).extend("ExtendedBar");var CatalogThumbnailItem=Class({create:function(f,h,g){this.itemContent=f;this.dockMenuContent=h;this.index=g;this.item=$("<div class='thumbnailItem'></div>");this.rect=$("<div class='thumbnailRect'></div>");this.caption=$("<div class='dockMenuItemCaption'></div>");this.captionAfter=$("<div class='dockMenuItemCaptionAfter'></div>");this.itemContent.append(this.item);this.item.append(this.rect);this.item.append(this.caption);this.caption.after(this.captionAfter);this.initEvent()},initItem:function(d,f){this.initCaption(d,f);this.dockMenu=new DockMenu(this.dockMenuContent,d,f);1<d&&(rightToLeft?this.addNext():this.addPrev());f<bookConfig.totalPageCount&&(rightToLeft?this.addPrev():this.addNext())},addPrev:function(){var c=$("<div class='dockMenuItem dockMenuItemShadow dockButton'></div>");c.append("<div></div>");c.append("<img src='"+uiBaseURL+"slide_leftButton.png'/>");c.click(function(){thumbnail.gotoItemByIndex(this.index-1);return !1}.bind(this));this.dockMenu.addObj(c,"before")},addNext:function(){var c=$("<div class='dockMenuItem dockMenuItemShadow dockButton'></div>");c.append("<div></div>");c.append("<img src='"+uiBaseURL+"slide_rightButton.png'/>");c.click(function(){thumbnail.gotoItemByIndex(this.index+1);return !1}.bind(this));this.dockMenu.addObj(c,"after")},initCaption:function(d,f){this.fromIndex=d;this.toIndex=f;this.fromIndex=Math.max(this.fromIndex,1);this.toIndex=Math.min(this.toIndex,bookConfig.totalPageCount);this.fromIndex!=this.toIndex?this.caption.html(rightToLeft?this.toIndex+"-"+this.fromIndex:this.fromIndex+"-"+this.toIndex):this.caption.html(this.fromIndex);$(this.caption).css({position:"absolute",height:"16px",top:"-30px","white-space":"nowrap",width:"auto",left:"50%"});$(this.caption).css({"margin-left":-$(this.caption).outerWidth()/2});$(this.captionAfter).css({position:"absolute",top:"-5px",left:"50%","margin-left":"-8px","background-image":"url("+uiBaseURL+"span.png)"})},initEvent:function(){this.choosedColor="#505a60";this.item.bind(_event._enter,function(){this.rect.css("background","#ffffff")}.bind(this));this.item.bind(_event._leave,function(){this.rect.css("background",this.choosedColor)}.bind(this));this.item.bind(_event._end,function(){thumbnail.gotoItemByIndex(this.index)}.bind(this));this.item.bind(_event._over,function(){this.caption.css("display","block");this.captionAfter.css("display","block")}.bind(this));this.item.bind(_event._leave,function(){this.caption.hide();this.captionAfter.hide()}.bind(this))},show:function(){this.rect.css("background","#ffffff");this.choosedColor="#ffffff";this.dockMenu.show()},hide:function(){this.rect.css("background","#505a60");this.choosedColor="#505a60";this.dockMenu.hide()},clearHighLight:function(){this.dockMenu.clearHighLight()},setHighLight:function(c){this.dockMenu.setHighLight(c)},onResize:function(){this.dockMenu.resize()}});var CatalogThumbnailBar=Class({create:function(c){this.menu=$("<div class='menu'></div>");c.append(this.menu);this.initMenu()},initMenu:function(){this.visible=!1;this.height=170;this.dockMenuContent=$("<div class='dockMenuContent'></div>");this.thumbnailItemContent=$("<div class='thumbnailItemContent'></div>");this.dockMenuContent.css({width:windowWidth-50+"px"});this.menu.append(this.dockMenuContent);this.menu.append(this.thumbnailItemContent);this.addItem()},addItem:function(){this.itemArray=[];for(var h=parseInt((bookConfig.totalPageCount+1)/20),h=h+(0==(bookConfig.totalPageCount+1)%20?0:1),n=0;n<h;n++){var m=new CatalogThumbnailItem(this.thumbnailItemContent,this.dockMenuContent,n),l=bookConfig.RightToLeft?h-1-n:n,k=20*l,l=20*(l+1)-1,l=l>bookConfig.totalPageCount?bookConfig.totalPageCount:l;m.initItem(k,l);0==n&&(this.highLightItem=this.currentItem=m,m.setHighLight(1),m.show());this.itemArray.push(m)}},gotoItemByIndex:function(c){this.currentItem&&this.currentItem.index!==c&&(this.currentItem.hide(),this.itemArray[c].show(),this.currentItem=this.itemArray[c])},onResize:function(){var d=1,f=10*(140*bookConfig.largePageWidth/bookConfig.largePageHeight+10);origin=0;f>windowWidth-50&&(d=(windowWidth-50)/f,origin=parseInt(100*(1-(windowWidth-50)/f)/2));this.dockMenuContent.css({"-webkit-transform":"scale3d("+d+","+d+",1)","-moz-transform":"scale3d("+d+","+d+",1)","-ms-transform":"scale3d("+d+","+d+",1)","-o-transform":"scale3d("+d+","+d+",1)",transform:"scale3d("+d+","+d+",1)","-webkit-transform-origin":"50% 100%","-moz-transform-origin":"50% 100%","-ms-transform-origin":"50% 100%","-o-transform-origin":"50% 100%","transform-origin":"50% 100%"});this.dockMenuContent.css({width:windowWidth-50+"px"});this.thumbnailItemContent.css({"-webkit-transform":"scale3d("+d+","+d+",1)","-moz-transform":"scale3d("+d+","+d+",1)","-ms-transform":"scale3d("+d+","+d+",1)","-o-transform":"scale3d("+d+","+d+",1)",transform:"scale3d("+d+","+d+",1)","-webkit-transform-origin":"50% 100%","-moz-transform-origin":"50% 100%","-ms-transform-origin":"50% 100%","-o-transform-origin":"50% 100%","transform-origin":"50% 100%"});for(d=0;d<this.itemArray.length;d++){this.itemArray[d].onResize()}},getOccuHeight:function(){return 110},transparent:function(){this.menu.animate({opacity:0,"z-index":-1},200)},noTransparent:function(){this.menu.animate({opacity:1,"z-index":10},200)},mergeAll:function(){},fissionAll:function(){},getShowStatu:function(){return this.visible},clearHighLight:function(){this.highLightItem&&this.highLightItem.clearHighLight()},setHighLight:function(d){for(var f=0;f<this.itemArray.length;f++){if(d<=this.itemArray[f].toIndex&&d>=this.itemArray[f].fromIndex){this.gotoItemByIndex(f);this.itemArray[f].setHighLight(d);this.highLightItem=this.currentItem;break}}},fillContent:function(){this.setHighLight(this.highLightItem.index)},showOrHide:function(){!1===this.visible?this.show():this.hide();catalogBook&&catalogBook.showOrHideLiteThumbnail()},show:function(){this.showing=this.visible=!0;this.menu.animate.delay(this.menu,100,[{bottom:-105+toolBar.getBottomHeight()+"px"},300])},hide:function(){this.menu.animate.delay(this.menu,100,[{bottom:-this.height+"px"},300]);this.showing=this.visible=!1},setPosition:function(){},getHeight:function(){return this.getTopHeight()+this.getBottomHeight()},getTopHeight:function(){return 0},getBottomHeight:function(){return !0==this.visible?110:0}});var GuidToolbar=Class({create:function(c){this.$bar=$("<div class='catalog_simple_bar'></div>");this.initButtons();this.initLogo();this.changeLanguage();this.resetButtons();this.initEvent();c.append(this.$bar)},initButtons:function(){this.numBtn=$("<div id='guidPageIndex' class='page_num'></div>");this.thumBtn=$("<div id='thumb' class='button'></div>");this.moreBtn=$("<div id='more' class='button'></div>");this.fullscreenBtn=$("<div id='fullScreen' class='button'></div>");this.searchBtn=$("<div id='search' class='button'></div>");this.shareBtn=$("<div id='share' class='button'></div>");this.toolBarIconUrl=uiBaseURL+"catalog_icon.png";this.thumBtn.addCssSprite(this.toolBarIconUrl,"thumb",38,38,catalogIconInfo);this.moreBtn.addCssSprite(this.toolBarIconUrl,"more",38,38,catalogIconInfo);this.fullscreenBtn.addCssSprite(this.toolBarIconUrl,"fullScreen",38,38,catalogIconInfo);this.searchBtn.addCssSprite(this.toolBarIconUrl,"search",38,38,catalogIconInfo);this.shareBtn.addCssSprite(this.toolBarIconUrl,"share",38,38,catalogIconInfo);this.thumBtn.enterToChange(this.toolBarIconUrl,"thumb",38,38,catalogIconInfo);this.moreBtn.enterToChange(this.toolBarIconUrl,"more",38,38,catalogIconInfo);this.fullscreenBtn.enterToChange(this.toolBarIconUrl,"fullScreen",38,38,catalogIconInfo);this.searchBtn.enterToChange(this.toolBarIconUrl,"search",38,38,catalogIconInfo);this.shareBtn.enterToChange(this.toolBarIconUrl,"share",38,38,catalogIconInfo);this.$bar.append(this.shareBtn);this.$bar.append(this.searchBtn);this.$bar.append(this.numBtn);this.$bar.append(this.thumBtn);this.$bar.append(this.moreBtn);this.$bar.append(this.fullscreenBtn)},changeLanguage:function(){this.shareBtn.attr("title",getLanguage("btnSocialShare","Share"));this.searchBtn.attr("title",getLanguage("btnSearch","Search"));this.thumBtn.attr("title",getLanguage("btnThumb","Thumbnails"));this.moreBtn.attr("title",getLanguage("btnMore","More"));this.fullscreenBtn.attr("title",getLanguage("btnFullscreen","Fullscreen"))},resetButtons:function(){this.iconWidth=38;this.numWidth=60;10<=bookConfig.totalPageCount&&(this.numWidth=80);100<=bookConfig.totalPageCount&&(this.numWidth=100);1000<=bookConfig.totalPageCount&&(this.numWidth=125);10000<=bookConfig.totalPageCount&&(this.numWidth=145);var c=12;this.numBtn.css({width:this.numWidth+"px",left:c+"px"});c+=this.numWidth;bookConfig.ShareButtonVisible?(this.shareBtn.css({left:c+"px"}),c+=this.iconWidth):this.shareBtn.hide();bookConfig.SearchButtonVisible?(this.searchBtn.css({left:c+"px"}),c+=this.iconWidth):this.searchBtn.hide();bookConfig.ThumbnailsButtonVisible?(this.thumBtn.css({left:c+"px"}),c+=this.iconWidth):this.thumBtn.hide();this.moreBtn.css({left:c+"px"});c+=this.iconWidth;bookConfig.FullscreenButtonVisible?(this.fullscreenBtn.css({left:c+"px"}),c+=this.iconWidth):this.fullscreenBtn.hide();this.$bar.css({width:c+7+"px"})},initEvent:function(){this.addResponseDom();this.thumBtn.bind(_event._end,function(){thumbnail&&thumbnail.showOrHide()});this.fullscreenBtn.bind(_event._end,readAsFullscreen);$(document).bind(fullScreenApi.fullScreenEventName,function(){this.changeFullscreenIcon(fullScreenApi.isFullScreen())}.bind(this));this.searchBtn.bind(_event._end,function(){frmSearch&&frmSearch.showOrHide()});this.shareBtn.bind(_event._end,function(){sharePanel&&sharePanel.showOrHide()});var h=5,n;this.moreBtn.bind(_event._end,function(){catalogBook.hideGuidBarAndShowToolBar();"complex"==catalogBook.mode&&(h=5,k(),l())}.bind(this));var m=!1,l=function(){if(!m){m=!0;for(var b=0;b<this.responseDomArray.length;b++){this.responseDomArray[b].bind(_event._over,function(){window.clearInterval(n)}),this.responseDomArray[b].bind(_event._leave,function(){h=5;k()})}}}.bind(this),k=function(){window.clearInterval(n);n=window.setInterval(function(){h--;0>=h&&(catalogBook.hideToolBarAndShowGuidBar(),"simple"==catalogBook.mode?window.clearInterval(n):h=5)},1000)}},addResponseDom:function(){this.responseDomArray=[];global.toolBar&&(global.toolBar&&toolBar.topBar&&this.responseDomArray.push(toolBar.topBar),global.toolBar&&toolBar.bottomBar&&this.responseDomArray.push(toolBar.bottomBar),global.toolBar&&toolBar.extendedBar.$bar&&this.responseDomArray.push(toolBar.extendedBar.$bar),toolBar.buttons.each(function(c){this.responseDomArray.push(c.$button)}.bind(this)))},changeFullscreenIcon:function(c){c?(this.fullscreenBtn.changeCssSprite(this.toolBarIconUrl,"exitFullScreen",35,35,catalogIconInfo),this.fullscreenBtn.attr("title",getLanguage("btnExitFullscreen","exitFullScreen")),this.fullscreenBtn.unbind(_event._down),this.fullscreenBtn.unbind(_event._enter),this.fullscreenBtn.unbind(_event._leave),this.fullscreenBtn.enterToChange(this.toolBarIconUrl,"exitFullScreen",35,35,catalogIconInfo)):(this.fullscreenBtn.changeCssSprite(this.toolBarIconUrl,"fullScreen",35,35,catalogIconInfo),this.fullscreenBtn.attr("title",getLanguage("btnFullscreen","Fullscreen")),this.fullscreenBtn.unbind(_event._down),this.fullscreenBtn.unbind(_event._enter),this.fullscreenBtn.unbind(_event._leave),this.fullscreenBtn.enterToChange(this.toolBarIconUrl,"fullScreen",35,35,catalogIconInfo))},show:function(){this.$bar.show();this.logo&&this.logo.show()},hide:function(){this.$bar.hide();this.logo&&this.logo.hide()},getHeight:function(){return 50},onResize:function(){},initLogo:function(){bookConfig.appLogoIcon&&(this.logo=$("<img src='"+bookConfig.appLogoIcon+"' class='catalog_logo'/>"),this.logo.css({left:bookConfig.logoPadding+"px",top:bookConfig.logoTop+"px",height:bookConfig.logoHeight+"px"}),this.logo.click(function(){var c=getLogoLink();window.open(c[0],c[1]);return !1}),tmpContainer.append(this.logo))}});var SlideThumbnailCell=Class({create:function(c){this.background=$("<div style='position:absolute;'></div>");this.pageNum=$("<div style='position:absolute;'></div>");this.img=$("<img />");this.imgBac=$("<div></div>");this.pageIndex=-1;this.height=115;this.width=95*bookConfig.largePageWidth/bookConfig.largePageHeight;this.imgHeight=this.imgWidth=-1;$(c).append(this.background);$(this.background).append(this.pageNum);$(this.background).css({position:"absolute",width:this.width+"px",height:this.height+"px",top:"0px"});$(this.pageNum).css({width:this.width+"px",height:20,bottom:"-8px","line-height":"20px","text-align":"center","vertical-align":"middle",color:"#ffffff","font-size":"12px"});$(this.imgBac).append(this.img);$(this.imgBac).css({position:"absolute"});$(this.img).css({position:"absolute"});$(this.img).addBorderShadow("#555555",0,2)},getPageIndex:function(){return this.pageIndex},getWidth:function(){return this.width},getHeight:function(){return this.height},setPosition:function(f,h,g){void 0==g&&(g=["left","top"]);$(this.background).css(g[0],f+"px");$(this.background).css(g[1],h+"px")},onResize:function(d,f){$(this.background).css({width:d+"px",height:f+"px"});this.onResizeImage(d,f)},onResizeImage:function(){$(this.img).css({width:this.width+"px",height:"95px"});$(this.imgBac).css({width:this.width+"px",height:"95px"})},setImgPosition:function(c){switch(c){case"l":$(this.imgBac).css({left:"0px",right:"auto"});break;case"r":$(this.imgBac).css({right:"0px",left:"auto"});break;case"c":$(this.imgBac).css({left:(this.width-this.imgWidth)/2+"px",right:"auto"})}},setCaption:function(c){this.pageNum.html(c)},fillImage:function(c){this.pageIndex=c;this.img=$("<img/>");$(this.img).attr("src",getPageDir(c,"thumb",originTotalPageCount));$(this.background).append(this.imgBac);this.imgBac.empty();$(this.imgBac).append(this.img);this.onResizeImage(this.width,this.height);this.pageNum.html("<b>"+c+"</b>")},clearImage:function(c){$(this.imgBac).empty()},showBorder:function(){$(this.background).css({border:""})},hideBorder:function(){$(this.background)[0].style.border=""},getTextField:function(){return this.pageNum},hideTextField:function(){this.pageNum.hide()},showTextField:function(){this.pageNum.show()},showCell:function(c){$(this.background).css({display:c?"block":"none"})},onMouseUp:function(f,h){var g=this;$(this.background).bind(_event._end,function(b){h.call(f,g)});$(this.background).bind(_event._enter,function(c){g.background.css({cursor:"pointer"})})},highLight:function(c){$(this.imgBac).css({border:"2px solid #ff8040"})},onMouseOver:function(){var c=this;$(this.imgBac).css({border:""});$(this.imgBac).bind(_event._enter,function(b){c.imgBac.css({border:"2px solid #0080ff"})});$(this.imgBac).bind(_event._leave,function(b){c.imgBac.css({border:""})})},clearMouseOver:function(){var c=this;$(this.imgBac).bind(_event._enter,function(b){c.imgBac.css({border:""})});$(this.imgBac).bind(_event._leave,function(b){c.imgBac.css({border:""})})},onMouseOverUp:function(){var c=this;$(this.imgBac).bind(_event._enter,function(b){c.imgBac.css({border:"2px solid #0080ff"})});$(this.imgBac).bind(_event._leave,function(b){c.imgBac.css({border:"2px solid #ff8040"})})},clearHighLight:function(){$(this.imgBac).css({border:""})}});var SlideThumbnailItem=Class({create:function(d,f){this.background=$("<div style='position:absolute;font-family:Arial,Tahoma;'></div>");this.imageBac=$("<div style='position:absolute;'></div>");this.pageNum=$("<div style='position:absolute;'></div>");this.itemB=new SlideThumbnailCell(this.imageBac);this.itemA=new SlideThumbnailCell(this.imageBac);this.height=115;this.width=190*bookConfig.largePageWidth/bookConfig.largePageHeight;this.isMerge=this.isDoublePage=!0;this.pageIndex=f;this.fillImage=!1;this.mainColor="#000000";$(d).append(this.background);$(this.background).append(this.imageBac);$(this.background).append(this.pageNum);$(this.background).css({position:"absolute",width:this.width+"px",height:this.height+"px",top:"2px"});$(this.imageBac).css({position:"absolute",width:this.width+"px",height:95});$(this.pageNum).css({width:this.width+"px",height:20,bottom:"-8px","line-height":"20px","text-align":"center","vertical-align":"middle",color:"#ffffff","font-size":"12px"});1!=f&&f!=totalPageCount?(this.itemA.setPosition(0,0,rightToLeft?["right","top"]:["left","top"]),this.itemB.setPosition(0,0,rightToLeft?["left","top"]:["right","top"]),this.itemB.onMouseUp(this,this.onItemMouseUp),this.itemA.pageIndex=f,this.itemB.pageIndex=f+1,this.onMouseOver()):(1==f?this.itemA.setPosition(0,0):rightToLeft?this.itemA.setPosition(0,0,["right","top"]):this.itemA.setPosition(0,0),this.itemB.showCell(!1),this.setBorder(!1),this.itemA.pageIndex=f,this.itemA.onMouseOver());this.itemA.onMouseUp(this,this.onItemMouseUp);$(this.pageNum).hide()},getWidth:function(){return this.width},addImage:function(){this.fillImage||(this.itemA.fillImage(this.pageIndex),1!=this.pageIndex&&this.pageIndex!=totalPageCount&&this.itemB.fillImage(this.pageIndex+1),this.fillImage=!0,rightToLeft?$(this.pageNum).html(this.pageIndex+1+"-"+this.pageIndex):$(this.pageNum).html("<b>"+this.pageIndex+"-"+(this.pageIndex+1)+"</b>"))},clearImage:function(){this.itemA.clearImage(this.pageIndex);1!=this.pageIndex&&this.pageIndex!=totalPageCount&&this.itemB.clearImage(this.pageIndex+1);this.fillImage=!1},setPosition:function(f,h,g){void 0==g&&(g=["left","top"]);$(this.background).css(g[0],f+"px");$(this.background).css(g[1],h+"px")},onResize:function(d,f){this.width=d;this.height=f;$(this.background).css({width:d+"px",height:f+"px"})},resetItem:function(){},fission:function(){1!=this.pageIndex&&this.pageIndex!=totalPageCount&&(this.setBorder(!1),this.onResize(this.width,this.height),this.itemA.setImgPosition("r"),this.itemB.setImgPosition("l"),this.showTextField(!1),this.isMerge=!1)},merge:function(){1!=this.pageIndex&&this.pageIndex!=totalPageCount&&(this.setBorder(!1),this.onResize(this.width,this.height),this.itemA.setImgPosition("r"),this.itemB.setImgPosition("l"),this.showTextField(!0),this.isMerge=!0)},showBorder:function(){$(this.imageBac).css({border:"1px solid #444444"})},hideBorder:function(){$(this.imageBac)[0].style.border=""},showTextField:function(d){var f=d?"none":"block";this.pageNum.css({display:d?"block":"none"});this.itemA.getTextField().css({display:f});this.itemB.getTextField().css({display:f})},setBorder:function(c){c?$(this.imageBac).css({border:"1px solid #444444"}):$(this.imageBac)[0].style.border="";this.itemA.hideBorder();this.itemB.hideBorder()},onItemMouseUp:function(c){isThumbDrag||(c=c.getPageIndex(),gotoPageFun(c),thumbnail&&thumbnail.setHighLight(c))},highLight:function(c){this.isMerge?1==c||c==totalPageCount?(this.itemA.highLight("#ffffff"),this.itemA.onMouseOverUp()):($(this.imageBac).css({border:"2px solid #ff8040"}),this.onMouseOverUp()):c==this.pageIndex?(this.itemA.highLight("#ffffff"),this.itemA.onMouseOverUp()):(this.itemB.highLight("#ffffff"),this.itemB.onMouseOverUp())},onMouseOver:function(){var c=this;$(this.imageBac).css({border:""});$(this.imageBac).bind(_event._enter,function(b){c.imageBac.css({border:"2px solid #0080ff"})});$(this.imageBac).bind(_event._leave,function(b){c.imageBac.css({border:""})})},onMouseOverUp:function(){var c=this;$(this.imageBac).bind(_event._enter,function(b){c.imageBac.css({border:"2px solid #0080ff"})});$(this.imageBac).bind(_event._leave,function(b){c.imageBac.css({border:"2px solid #ff8040"})})},clearMouseOver:function(){var c=this;$(this.imageBac).bind(_event._enter,function(b){c.imageBac.css({border:""})});$(this.imageBac).bind(_event._leave,function(b){c.imageBac.css({border:""})})},clearHighLight:function(){this.isMerge?1==this.pageIndex||this.pageIndex==totalPageCount?(this.itemA.onMouseOver(),this.itemB.onMouseOver()):(this.onMouseOver(),this.itemA.clearMouseOver(),this.itemB.clearMouseOver()):(this.itemA.onMouseOver(),this.itemB.onMouseOver(),this.clearMouseOver());this.itemA.clearHighLight();this.itemB.clearHighLight()}});var isThumbDrag=!1,SlideThumbnailBar=Class({create:function(c){this.width=windowWidth;this.height=135;this.contentHeight=120;this.mainColor="#888888";this.thumbArray=[];this.mouseDown=this.showing=!1;this.scrollBoxX=this.mouseDownX=-1;this.lastMoveX=-1+(windowWidth-this.width+20)/2;this.lastMoveTime=-1;this.mergeing=this.moveLeft=!1;this.pageIndex=this.currentCellIndex=1;this.createThumbItemFalg=!1;this.oldMode=this.currentMedo=0;this.initPanel(c)},initPanel:function(c){this.background=$("<div id='slide_thumbnail'></div>");this.contentBox=$("<div></div>");this.contentBac=$("<div></div>");this.scrollBox=$("<div></div>");this.openButton=$("<div id='slide_open_button'></div>");$(this.background).css({width:"100%",bottom:-this.height,position:"absolute",height:this.height,"z-index":100});$(this.contentBac).css({width:"100%",bottom:-this.height,position:"absolute",height:this.height,"z-index":100});this.scrollBox.css({position:"absolute",height:this.contentHeight});this.contentBox.css({width:"100%",position:"absolute",bottom:"1px",height:"100%",left:10,top:(this.height-this.contentHeight)/2,overflow:"hidden",opacity:"0.9"});this.openButton.css({width:"47px",height:"20px",background:bookConfig.thumbnailColor,"border-radius":"5px 5px 0px 0px",margin:"-20px auto",position:"relative","padding-top":"-16px",cursor:"pointer","text-align":"center"});this.openButton.append("<img style='margin-top:5px;' src='"+uiBaseURL+"arrow-up.png'/>");$(this.contentBac).css({background:bookConfig.thumbnailColor});isNaN(bookConfig.thumbnailAlpha)||""==bookConfig.thumbnailAlpha||null==bookConfig.thumbnailAlpha||void 0==bookConfig.thumbnailAlpha?isBelowIE9()||$(this.contentBac).css({opacity:0.3}):isBelowIE9()||$(this.contentBac).css({opacity:bookConfig.thumbnailAlpha/100});$(c).append(this.contentBac);$(c).append(this.background);$(this.background).append(this.contentBox);$(this.contentBox).append(this.scrollBox);$(this.contentBac).append(this.openButton);this.openButton.bind(_event._end,this.showOrHide.bind(this))},getPageIndex:function(){return this.pageIndex},setPageIndex:function(c){this.pageIndex=c},getHeight:function(){return this.height},onResize:function(){this.width=windowWidth;var f=$(this.contentBox).width(),h=$(this.scrollBox).width();if(f>h){$(this.scrollBox).css({left:(f-h)/2+"px"})}else{var g=$(this.scrollBox).offset().left;0<g&&(g=0);g<f-h&&(g=f-h);$(this.scrollBox).css({left:g+"px"})}},setPosition:function(f,h,g){void 0==g&&(g=["left","top"]);$(this.background).css(g[0],f+"px");$(this.background).css(g[1],h+"px");$(this.contentBac).css(g[0],f+"px");$(this.contentBac).css(g[1],h+"px")},addItem:function(){for(var d=0;d<=originTotalPageCount;){var f=0==d?new SlideThumbnailItem(this.scrollBox,1):new SlideThumbnailItem(this.scrollBox,d);f.getWidth();f.setPosition(this.thumbArray.length*(f.getWidth()+15)+5,2.5);this.thumbArray.push(f);d+=2}$(this.scrollBox).css({width:this.thumbArray.length*(f.getWidth()+15)+10+"px"})},resetItemPosition:function(){for(var h=0,n=this.thumbArray.length,m,l=0;l<n;l++){var k=this.thumbArray[l];m=k.getWidth()/2+20+(n-1)*(k.getWidth()+15);rightToLeft?0==l?(h=m-5-k.getWidth()/2,k.setPosition(h,2.5),h=h-15-k.getWidth()):(k.setPosition(h,2.5),h=h-k.getWidth()-15):0==l?(k.setPosition(5,2.5),h=k.getWidth()/2+20):(k.setPosition(h,2.5),h=h+k.getWidth()+15)}$(this.scrollBox).css({width:m})},mergeAll:function(){this.currentMedo=2;this.showing&&this.createThumbItemFalg&&this.currentMedo!=this.oldMode&&(this.repositionDouble(),this.oldMode=2);this.mergeing=!0},fissionAll:function(){this.currentMedo=1;this.showing&&this.createThumbItemFalg&&this.currentMedo!=this.oldMode&&(this.repositionSingle(),this.oldMode=1);this.mergeing=!1},repositionDouble:function(){for(var c=0;c<this.thumbArray.length;c++){this.thumbArray[c].merge()}this.resetItemPosition();this.clearHighLight(this.getPageIndex());this.setHighLight(this.getPageIndex())},repositionSingle:function(){for(var c=0;c<this.thumbArray.length;c++){this.thumbArray[c].fission()}this.resetItemPosition();this.clearHighLight(this.getPageIndex());this.setHighLight(this.getPageIndex())},getShowStatu:function(){return this.showing},setShowStatu:function(c){this.showing=c},showOrHide:function(){this.showing?this.hide():this.show()},show:function(){this.showing=!0;this.createThumbItemFalg&&this.currentMedo!=this.oldMode&&1===this.currentMedo&&this.repositionSingle();this.createThumbItemFalg&&this.currentMedo!=this.oldMode&&2===this.currentMedo&&this.repositionDouble();this.createThumbItemFalg||(this.createThumbItemFalg=!0,this.addItem(),1===this.currentMedo?this.repositionSingle():this.repositionDouble(),this.initEvent(),this.onResize(),this.setHighLight(this.getPageIndex()),this.fillNearByImages(0));this.oldMode=this.currentMedo;$(this.background).animate({bottom:0},300);$(this.contentBac).animate({bottom:0},300);this.openButton.empty().append("<img style='margin-top:5px;' src='"+uiBaseURL+"arrow-down.png'/>")},hide:function(){$(this.background).animate({bottom:-135},300);$(this.contentBac).animate({bottom:-135},300);this.openButton.empty().append("<img style='margin-top:5px;' src='"+uiBaseURL+"arrow-up.png'/>");this.showing=!1},getOccuHeight:function(){return 120},initEvent:function(){var c=this;this.background.bind(_event._down,function(d){return !1});$(this.contentBox).bind(_event._down,function(b){c.mouseDown=!0;isThumbDrag=!1;b=isTouch?b.originalEvent.touches:[b];c.mouseDownX=b[0].pageX;c.scrollBoxX=$(c.scrollBox).offset().left;return !1});$(this.contentBox).bind(_event._move,function(f){if(c.mouseDown){f=isTouch?f.originalEvent.touches:[f];var b=c.mouseDownX-f[0].pageX;20<Math.abs(b)&&(isThumbDrag=!0);$(c.contentBox).width()>$(c.scrollBox).width()||(b=c.scrollBoxX-b-(windowWidth-c.width+20)/2,0<b&&(b=0),b<$(c.contentBox).width()-$(c.scrollBox).width()&&(b=$(c.contentBox).width()-$(c.scrollBox).width()),$(c.scrollBox).css({left:b+"px"}),c.moveLeft=c.lastMoveX>f[0].pageX?!0:!1,c.lastMoveX=f[0].pageX,c.lastMoveTime=(new Date).getTime())}});$(this.contentBox).bind(_event._end,function(b){c.mouseDown=!1;100>(new Date).getTime()-c.lastMoveTime&&-1!=c.lastMoveTime&&(b=c.moveLeft?-30:30,c.tweener($(c.scrollBox).offset().left-(windowWidth-c.width+20)/2,b,10))});$(this.contentBox).bind("mouseleave",function(b){c.mouseDown=!1})},setHighLight:function(g){this.currentCellIndex=g;this.setPageIndex(g);if(this.createThumbItemFalg){var l=Math.floor(g/2);if(!(g>originTotalPageCount)){if(this.thumbArray[l].highLight(g),this.clearHighLight(l),$(this.contentBox).width()>$(this.scrollBox).width()){$(this.scrollBox).css({left:($(this.contentBox).width()-$(this.scrollBox).width())/2+"px"})}else{g=$(this.scrollBox).offset().left-(windowWidth-self.width+20)/2;var k=$(this.contentBox).width(),h=rightToLeft?(this.thumbArray.length-(l-1))*(this.thumbArray[l].getWidth()+5)+5:(l-1)*(this.thumbArray[l].getWidth()+5)+5,l=this.thumbArray[l].getWidth();this.tweener(g,-(h+g-(k-l)/2)/6,6)}}}},clearHighLight:function(d){if(this.createThumbItemFalg){for(var f=0;f<this.thumbArray.length;f++){f!=d&&this.thumbArray[f].clearHighLight()}}},tweener:function(m,t,s){var r=function(k,x){for(var w=x/2,v=(k-k/4)/w,u=Array(x),l=0;l<x;l++){u[l]=l<w?k-(w-l)*v:k+(l-w+1)*v}return u.reverse()}(t,s),q=m,p=0,o=this,n=window.setInterval(function(){q+=r[p];p++;p==s&&(q=m+t*s);0<q&&(q=0);q<$(o.contentBox).width()-$(o.scrollBox).width()&&(q=$(o.contentBox).width()-$(o.scrollBox).width());$(o.scrollBox).css({left:q+"px"});p>=s&&(window.clearInterval(n),o.fillNearByImages(q))},30)},fillNearByImages:function(f){if(this.createThumbItemFalg){var h=Math.ceil((this.background.width()-f)/65)+2;this.background.width()>this.scrollBox.width()?(f=0,h=originTotalPageCount+1):f=0==f?0:Math.ceil(-f/100);f=Math.max(Math.ceil(f/2),0);h=Math.min(h,originTotalPageCount+1);if(0<f){for(var g=0;g<f;g++){this.thumbArray[g]&&this.thumbArray[g].clearImage()}}for(g=f;g<Math.ceil(h/2);g++){f=rightToLeft?this.thumbArray.length-g-1:g,this.thumbArray[f]&&this.thumbArray[f].addImage()}}}});Class("PCSlideToolbar",{create:function(c){this.parent=c;this.initToolBar();this.initGuidBar();this.initLogo()},initGuidBar:function(){this.leftBar=$("<div style='z-index:5;position:absolute;cursor:pointer;width:50px;height:50px;top:50%;opacity:0.7;margin-top:-25px;'></div>");this.rightBar=$("<div class='slideBar'></div>");this.leftBar.css({left:bookConfig.leftMargin,"background-image":"url("+uiBaseURL+"slide_prev_page.png)","background-repeat":"no-repeat","background-position":"center","background-size":"18px 18px","background-color":bookConfig.toolbarColor,"border-radius":"5px"});this.rightBar.css({right:bookConfig.rightMargin,"background-image":"url("+uiBaseURL+"slide_next_page.png)","background-repeat":"no-repeat","background-position":"center","background-size":"18px 18px","background-color":bookConfig.toolbarColor,"border-radius":"5px"});this.parent.append(this.leftBar);this.parent.append(this.rightBar);rightToLeft?(this.leftBar.bind(_event._end,nextPageFun),this.rightBar.bind(_event._end,previousPageFun),this.leftBar.attr({title:getLanguage("btnNextPage","Next")}),this.rightBar.attr({title:getLanguage("btnPrePage","Previous")})):(this.leftBar.bind(_event._end,previousPageFun),this.rightBar.bind(_event._end,nextPageFun),this.leftBar.attr({title:getLanguage("btnPrePage","Previous")}),this.rightBar.attr({title:getLanguage("btnNextPage","Next")}));this.rightBar.bind(_event._down,function(){this.rightBar.css({opacity:"0.5"})}.bind(this));this.rightBar.bind(_event._end+" "+_event._leave,function(){this.rightBar.css({opacity:"0.7"})}.bind(this));this.leftBar.bind(_event._down,function(){this.leftBar.css({opacity:"0.5"})}.bind(this));this.leftBar.bind(_event._end+" "+_event._leave,function(){this.leftBar.css({opacity:"0.7"})}.bind(this))},initToolBar:function(){this.toolbarBac=$("<div class='slideToolbar'></div>");this.fullscreenBtn=$("<img src='"+uiBaseURL+"slide-fullscreen.png'/>");this.homeBtn=$("<img src='"+uiBaseURL+"slide-home.png'/>");bookConfig.ShareButtonVisible&&(this.shareBtn=$("<img src='"+uiBaseURL+"slide-share.png'/>"));this.parent.append(this.toolbarBac);this.toolbarBac.append(this.fullscreenBtn);this.toolbarBac.append(this.homeBtn);this.toolbarBac.append(this.shareBtn);this.toolbarBac.css("background-color",bookConfig.toolbarColor);this.shareBtn&&this.shareBtn.bind(_event._end,function(){sharePanel.showOrHide();return !1});this.homeBtn.bind(_event._end,function(){homeButtonEvent();return !1});this.fullscreenBtn.bind(_event._end,function(){readAsFullscreen();return !1});$(document).bind(fullScreenApi.fullScreenEventName,function(){this.changeFullscreenIcon(fullScreenApi.isFullScreen())}.bind(this));this.fullscreenBtn.attr("title",getLanguage("btnFullscreen","Enter fullscreen"));this.homeBtn.attr("title",getLanguage("btnGoToHome","Home"));this.shareBtn&&this.shareBtn.attr("title",getLanguage("btnSocialShare","Share"));var c=this.toolbarBac.width();this.toolbarBac.css({"margin-left":-c/2+"px"})},changeFullscreenIcon:function(){fullScreenApi.isFullScreen()?(this.fullscreenBtn.attr("src",uiBaseURL+"slide-exitFullscreen.png"),this.fullscreenBtn.attr("title",getLanguage("btnExitFullscreen","Exit fullscreen"))):(this.fullscreenBtn.attr("src",uiBaseURL+"slide-fullscreen.png"),this.fullscreenBtn.attr("title",getLanguage("btnFullscreen","Enter fullscreen")))},hide:function(){},show:function(){},getLogoHeight:function(){return 0},getHeight:function(){return 0},getTopHeight:function(){return 0},getBottomHeight:function(){return 0},getWidth:function(){return 0},setButtonPosition:function(){},initLogo:function(){bookConfig.appLogoIcon&&""!=bookConfig.appLogoIcon&&(this.logo=$("<img src='"+bookConfig.appLogoIcon+"'/>"),this.logo.css({position:"absolute",left:bookConfig.logoPadding+"px",top:bookConfig.logoTop+"px",height:bookConfig.logoHeight+"px",cursor:"pointer","z-index":"3"}),this.logo.click(function(){var c=getLogoLink();window.open(c[0],c[1]);return !1}),this.parent.append(this.logo))}});var PhoneThumbnailForm=Class({create:function(c){this.visible=!1;this.totalPageCount=bookConfig.totalPageCount;this.itemWidth=90;this.marginLeft=20;this.marginTop=10;this.itemBorderWidth=3;this.toolBarHeight=80;this.topBarHeight=40;this.itemBorderColor="#f76c6c";this.itemArray=[];this.taskList=new TaskList;this.itemHeightArray=this.getHeightArray();bookConfig.appLogoIcon||bookConfig.InstructionsButtonVisible||(this.toolBarHeight=40,this.topBarHeight=0);this.background=$("<div id='phoneThum' style='opacity:0;display:none;overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch;text-align:center;position:absolute;z-index:98;background:rgba(51,51,51,0.8);width:100%;left:0;'></div>");this.itemBox=$("<div style='text-align:left;display:inline-block;padding:0px 0px "+this.marginLeft+"px 0px;'></div>");this.background.css({top:this.topBarHeight+"px"});c.append(this.background);this.background.append(this.itemBox);this.initEvent();this.addItem();this.setHighLight(1)},onResize:function(){this.countHorizatal=parseInt((windowWidth-this.marginLeft)/(this.itemWidth+this.marginLeft));this.countVertical=parseInt((windowHeight-this.toolBarHeight-this.marginTop)/(this.itemHeightArray.itemHeight+this.marginTop))+1;this.itemBox.css({width:this.countHorizatal*(this.itemWidth+this.marginLeft)+this.marginLeft});this.background.css({height:windowHeight-this.toolBarHeight});this.taskList.setLargeLength(this.countHorizatal*this.countVertical)},fillContent:function(){this.interval&&!this.interval.isRunning()?this.interval.start():this.interval=function(){this.LoadCount=0;for(var d=-this.itemBox.offset().top+40,d=parseInt(d/(this.itemHeightArray.itemHeight+this.marginTop)),f=this.countHorizatal*d,d=f+this.countHorizatal*this.countVertical,d=Math.min(d,this.totalPageCount),f=Math.max(0,f);f<d;f++){if(!this.itemArray[f].fill){if(1<=this.LoadCount){break}this.taskList.unShiftList({index:f},function(c){this.fillImage(c.index)}.bind(this))}}}.interval(this,60)},hide:function(){this.visible&&this.background.animate({opacity:"0"},300,"linear",function(){this.background.hide();this.visible=!1;this.interval&&this.interval.stop()}.bind(this))},getShowStatu:function(){return this.visible},show:function(){this.visible||(this.background.show(),this.fillContent(),this.background.animate({opacity:"1"},300,"linear",function(){this.visible=!0}.bind(this)))},setHighLight:function(c){this.itemArray&&this.itemArray[c-1]&&this.itemArray[c-1].imgContainer&&this.itemArray[c-1].imgContainer.css({"border-color":this.itemBorderColor})},clearHighLight:function(){if(this.itemArray){for(var d=this.itemArray.length,f=0;f<d;f++){this.itemArray[f].imgContainer&&this.itemArray[f].imgContainer.css({"border-color":"transparent"})}}},fissionAll:function(){},mergeAll:function(){},showOrHide:function(){this.visible?this.hide():this.show()},addItem:function(){for(var d=0;d<this.totalPageCount;d++){var f=this.initItem(d);this.itemBox.append(f.item);this.itemArray.push(f)}},getHeightArray:function(){var c=(this.itemWidth-2*this.itemBorderWidth)*bookConfig.largePageHeight/bookConfig.largePageWidth;return{imageHeight:c,titleHeight:15,itemHeight:c+15+4*this.itemBorderWidth}},initItem:function(h){var n=$("<div style='display:inline-block;'></div>"),m=$("<p><span>"+(h+1)+"</span></p>"),l=$("<div></div>"),k=$("<img/>");n.css({cursor:"pointer",width:this.itemWidth,height:this.itemHeightArray.itemHeight,padding:this.marginTop+"px 0px 0px "+this.marginLeft+"px","text-align":"center"});l.css({width:this.itemWidth-2*this.itemBorderWidth,height:this.itemHeightArray.imageHeight,"border-style":"solid","border-width":this.itemBorderWidth+"px","border-radius":this.itemBorderWidth+"px","border-color":"transparent"});k.css({width:"100%",height:"100%","background-color":"#ffffff","background-image":"url("+uiBaseURL+"loading.gif)","background-repeat":"no-repeat","background-position":"center"});m.css({width:this.itemWidth-2*this.itemBorderWidth,height:this.itemHeightArray.titleHeight+"px","line-height":this.itemHeightArray.titleHeight+"px","vertical-align":"middle",color:"#eeeeee","font-family":"Arial","font-size":this.itemHeightArray.titleHeight+"px",padding:"0px",margin:"0px","border-style":"solid","border-width":this.itemBorderWidth+"px","border-color":"transparent"});n.append(l);n.append(m);l.append(k);n.attr("id",h);n.bind(_event._end,function(c){c.stopPropagation()}.bind(this));n.bind("click",function(b){gotoPageFun(h+1);this.hide();b.stopPropagation()}.bind(this));return{item:n,imgContainer:l,img:k,title:m,fill:!1}},fillImage:function(d){if(this.itemArray&&this.itemArray[d]&&!this.itemArray[d].fill&&this.itemArray[d].img){var f=function(b){this.itemArray[d].img.attr("src",b)}.bind(this);this.LoadCount++;this.itemArray[d].fill=!0;fillImageAfterLoaded(d+1,"thumb",f)}},getHeight:function(){return 0},getTopHeight:function(){return 0},initEvent:function(){this.background.bind(_event._end,function(){this.hide()}.bind(this))}});var hexcase=0,b64pad="",chrsz=8;function compareov(){var c=Date.parse(new Date);return orgt(c)===vldt(c)}function orgt(c){return binl2hex(core_hx(str2binl(c),c.length*chrsz))}function vldt(c){return binl2hex(core_hx(str2binl(c),c.length*chrsz))}function core_hx(z,y){z[y>>5]|=128<<y%32;z[(y+64>>>9<<4)+14]=y;for(var x=1732584193,w=-271733879,v=-1732584194,u=271733878,t=0;t<z.length;t+=16){var s=x,r=w,q=v,o=u,x=hx_ff(x,w,v,u,z[t+0],7,-680876936),u=hx_ff(u,x,w,v,z[t+1],12,-389564586),v=hx_ff(v,u,x,w,z[t+2],17,606105819),w=hx_ff(w,v,u,x,z[t+3],22,-1044525330),x=hx_ff(x,w,v,u,z[t+4],7,-176418897),u=hx_ff(u,x,w,v,z[t+5],12,1200080426),v=hx_ff(v,u,x,w,z[t+6],17,-1473231341),w=hx_ff(w,v,u,x,z[t+7],22,-45705983),x=hx_ff(x,w,v,u,z[t+8],7,1770035416),u=hx_ff(u,x,w,v,z[t+9],12,-1958414417),v=hx_ff(v,u,x,w,z[t+10],17,-42063),w=hx_ff(w,v,u,x,z[t+11],22,-1990404162),x=hx_ff(x,w,v,u,z[t+12],7,1804603682),u=hx_ff(u,x,w,v,z[t+13],12,-40341101),v=hx_ff(v,u,x,w,z[t+14],17,-1502002290),w=hx_ff(w,v,u,x,z[t+15],22,1236535329),x=hx_gg(x,w,v,u,z[t+1],5,-165796510),u=hx_gg(u,x,w,v,z[t+6],9,-1069501632),v=hx_gg(v,u,x,w,z[t+11],14,643717713),w=hx_gg(w,v,u,x,z[t+0],20,-373897302),x=hx_gg(x,w,v,u,z[t+5],5,-701558691),u=hx_gg(u,x,w,v,z[t+10],9,38016083),v=hx_gg(v,u,x,w,z[t+15],14,-660478335),w=hx_gg(w,v,u,x,z[t+4],20,-405537848),x=hx_gg(x,w,v,u,z[t+9],5,568446438),u=hx_gg(u,x,w,v,z[t+14],9,-1019803690),v=hx_gg(v,u,x,w,z[t+3],14,-187363961),w=hx_gg(w,v,u,x,z[t+8],20,1163531501),x=hx_gg(x,w,v,u,z[t+13],5,-1444681467),u=hx_gg(u,x,w,v,z[t+2],9,-51403784),v=hx_gg(v,u,x,w,z[t+7],14,1735328473),w=hx_gg(w,v,u,x,z[t+12],20,-1926607734),x=hx_hh(x,w,v,u,z[t+5],4,-378558),u=hx_hh(u,x,w,v,z[t+8],11,-2022574463),v=hx_hh(v,u,x,w,z[t+11],16,1839030562),w=hx_hh(w,v,u,x,z[t+14],23,-35309556),x=hx_hh(x,w,v,u,z[t+1],4,-1530992060),u=hx_hh(u,x,w,v,z[t+4],11,1272893353),v=hx_hh(v,u,x,w,z[t+7],16,-155497632),w=hx_hh(w,v,u,x,z[t+10],23,-1094730640),x=hx_hh(x,w,v,u,z[t+13],4,681279174),u=hx_hh(u,x,w,v,z[t+0],11,-358537222),v=hx_hh(v,u,x,w,z[t+3],16,-722521979),w=hx_hh(w,v,u,x,z[t+6],23,76029189),x=hx_hh(x,w,v,u,z[t+9],4,-640364487),u=hx_hh(u,x,w,v,z[t+12],11,-421815835),v=hx_hh(v,u,x,w,z[t+15],16,530742520),w=hx_hh(w,v,u,x,z[t+2],23,-995338651),x=hx_ii(x,w,v,u,z[t+0],6,-198630844),u=hx_ii(u,x,w,v,z[t+7],10,1126891415),v=hx_ii(v,u,x,w,z[t+14],15,-1416354905),w=hx_ii(w,v,u,x,z[t+5],21,-57434055),x=hx_ii(x,w,v,u,z[t+12],6,1700485571),u=hx_ii(u,x,w,v,z[t+3],10,-1894986606),v=hx_ii(v,u,x,w,z[t+10],15,-1051523),w=hx_ii(w,v,u,x,z[t+1],21,-2054922799),x=hx_ii(x,w,v,u,z[t+8],6,1873313359),u=hx_ii(u,x,w,v,z[t+15],10,-30611744),v=hx_ii(v,u,x,w,z[t+6],15,-1560198380),w=hx_ii(w,v,u,x,z[t+13],21,1309151649),x=hx_ii(x,w,v,u,z[t+4],6,-145523070),u=hx_ii(u,x,w,v,z[t+11],10,-1120210379),v=hx_ii(v,u,x,w,z[t+2],15,718787259),w=hx_ii(w,v,u,x,z[t+9],21,-343485551),x=safe_add(x,s),w=safe_add(w,r),v=safe_add(v,q),u=safe_add(u,o)}return[x,w,v,u]}function hx_cmn(k,p,o,n,m,l){return safe_add(bit_rol(safe_add(safe_add(p,k),safe_add(n,l)),m),o)}function hx_ff(l,r,q,p,o,n,m){return hx_cmn(r&q|~r&p,l,r,o,n,m)}function hx_gg(l,r,q,p,o,n,m){return hx_cmn(r&p|q&~p,l,r,o,n,m)}function hx_hh(l,r,q,p,o,n,m){return hx_cmn(r^q^p,l,r,o,n,m)}function hx_ii(l,r,q,p,o,n,m){return hx_cmn(q^(r|~p),l,r,o,n,m)}function safe_add(f,h){var g=(f&65535)+(h&65535);return(f>>16)+(h>>16)+(g>>16)<<16|g&65535}function bit_rol(d,f){return d<<f|d>>>32-f}function str2binl(g){for(var l=[],k=(1<<chrsz)-1,h=0;h<g.length*chrsz;h+=chrsz){l[h>>5]|=(g.charCodeAt(h/chrsz)&k)<<h%32}return l}function binl2hex(g){for(var l=hexcase?"0123456789ABCDEF":"0123456789abcdef",k="",h=0;h<4*g.length;h++){k+=l.charAt(g[h>>2]>>h%4*8+4&15)+l.charAt(g[h>>2]>>h%4*8&15)}return k}var gradientColorA,gradientColorB,gradientColorAngle,backGroundImgURL,windowWidth=0,windowHeight=0,toolBarColor,buttonColor,originTotalPageCount,totalPageCount,leftShadowWidth=50,rightShadowWidth=50,zoomPageWidth,zoomPageHeight,flipTime=600,isRegister=!1,bookDescription,bookTitle,showFlipButton,normalEventRadius=10000,singleEventRadius=10000,stopFlip=!1,flipping=!1,isTouch=isTouchDevice(),bookContainer,tmpContainer,onBookLoad,slideBook,singleSlideBook,catalogBook,singleCatalogBook,flipBook,singlePageBook,leftRightButton,toolBar,printBody,helpBody,aboutBody,noteCookie,textRemark,signature,annotationShapes;cursor=!0;var highLight,sharePanel,annotationPannel,videoGallery,photoGallery,languagePanel,QRcode,QRbutton,moreBar,pageIndexTextField,_singleBook,resizeBookAfterFlip=!1,frmSearch,frmShare,backgroundAudio,auto_player,productName,homePage,frmTableOfContent,bookmark,thumbnail,oriPageIndex=1,googleID,hardPageEnable,uiBaseURL,phoneBaseURL,soundBaseURL,browserType,rightToLeft=!1,isFlipPdf=!1,flaudio=0,flagspeak=0,hadBMT,bgSound,backgroundObj,bmtBox,textForPages=[],positionForPages=[],loadSearchFlag=!1,bookType=0,thumbnailHeight=0;global.crBefore=DeString("d2b0aa5705413c96");global.crAfter=DeString("d35426b1c0d303cfa3012949ee");